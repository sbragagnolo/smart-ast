base 64 content
base64bidGame
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC45Ow0KDQpjb250cmFjdCB0b2tlblJlY2lwaWVudCB7IGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpOyB9DQoNCmNvbnRyYWN0IFJvdW5kVG9rZW4gew0KDQogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJST1VORCI7DQogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlJPVU5EIjsNCiAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7DQogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgdmVyc2lvbiA9ICcwLjEnOw0KICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMDAgKiAxMDAwMDAwMDAwMDAwMDAwMDAwOw0KDQogIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOw0KICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCiAgZXZlbnQgTmV3T3duZXIoYWRkcmVzcyBfbmV3T3duZXIpOw0KDQogIG1vZGlmaWVyIGNoZWNrSWZUb0NvbnRyYWN0KGFkZHJlc3MgX3RvKSB7DQogICAgaWYoX3RvICE9IGFkZHJlc3ModGhpcykpICB7DQogICAgICBfOw0KICAgIH0NCiAgfQ0KDQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7DQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCg0KICBmdW5jdGlvbiBSb3VuZFRva2VuKCkgew0KICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICBiYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHJlcGxhY2VPd25lcihhZGRyZXNzIF9uZXdPd25lcikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93Ow0KICAgIG93bmVyID0gX25ld093bmVyOw0KICAgIE5ld093bmVyKF9uZXdPd25lcik7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCg0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgew0KICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICB9DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBjaGVja0lmVG9Db250cmFjdChfdG8pIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgew0KICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7DQogICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGNoZWNrSWZUb0NvbnRyYWN0KF90bykgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsNCiAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOw0KICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsNCiAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIHRva2VuUmVjaXBpZW50IHNwZW5kZXIgPSB0b2tlblJlY2lwaWVudChfc3BlbmRlcik7DQogICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsNCiAgICAgIHNwZW5kZXIucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSk7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7DQogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogIH0NCn0NCg0KDQpjb250cmFjdCBPd25lZCB7DQogIGFkZHJlc3MgcHVibGljIGNvbnRyYWN0T3duZXI7DQogIGFkZHJlc3MgcHVibGljIHBlbmRpbmdDb250cmFjdE93bmVyOw0KDQogIGZ1bmN0aW9uIE93bmVkKCkgew0KICAgIGNvbnRyYWN0T3duZXIgPSBtc2cuc2VuZGVyOw0KICB9DQoNCiAgbW9kaWZpZXIgb25seUNvbnRyYWN0T3duZXIoKSB7DQogICAgaWYgKGNvbnRyYWN0T3duZXIgPT0gbXNnLnNlbmRlcikgXzsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNoYW5nZUNvbnRyYWN0T3duZXJzaGlwKGFkZHJlc3MgX3RvKSBvbmx5Q29udHJhY3RPd25lcigpIHJldHVybnMoYm9vbCkgew0KICAgIHBlbmRpbmdDb250cmFjdE93bmVyID0gX3RvOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gY2xhaW1Db250cmFjdE93bmVyc2hpcCgpIHJldHVybnMoYm9vbCkgew0KICAgIGlmIChwZW5kaW5nQ29udHJhY3RPd25lciAhPSBtc2cuc2VuZGVyKQ0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIGNvbnRyYWN0T3duZXIgPSBwZW5kaW5nQ29udHJhY3RPd25lcjsNCiAgICBkZWxldGUgcGVuZGluZ0NvbnRyYWN0T3duZXI7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCn0NCg0KY29udHJhY3QgQmlkR2FtZSBpcyBPd25lZCB7DQoNCiAgdWludCBjb21taXNzaW9uUGVyY2VudDsNCiAgdWludCByZWZ1bmRQZW5hbHR5Ow0KICBhZGRyZXNzIGdhbWVPcmFjbGVBZGRyZXNzOw0KICBhZGRyZXNzIGNvbnRyYWN0Um91bmRUb2tlbkFkZHJlc3M7DQoNCiAgc3RydWN0IEdhbWUgew0KICAgIHVpbnQgZ2FtZUlkOw0KICAgIHVpbnQgc3RhdGU7IC8vMCAtIG5ldywgMSAtIHN0YXJ0ZWQsIDJYWC0gZ2FtZSBjb21wbGV0ZWQ7DQogICAgc3RyaW5nIHdpbm5lclVzZXJOYW1lOw0KICAgIHVpbnQgd2lubmVyVXNlcklkOw0KICAgIHVpbnQgdG90YWxHYW1lQmlkOw0KCXVpbnQgYmlkQW10Ow0KICAgIEJpZFtdIGJpZHM7DQogIH0NCg0KICBzdHJ1Y3QgQmlkIHsNCiAgICBhZGRyZXNzIGJpZGRlckFkZHJlc3M7DQogICAgdWludCBiaWQ7DQogICAgdWludCB1c2VySWQ7DQogICAgc3RyaW5nIHVzZXJOYW1lOw0KICAgIGJvb2wgcmVmdW5kZWQ7DQogIH0NCg0KICBtYXBwaW5nKHVpbnQgPT4gR2FtZSkgZ2FtZXM7DQoNCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIC8vIG1vZGlmaWVycw0KICBtb2RpZmllciBvbmx5R2FtZU9yYWNsZSgpIHsNCiAgICBpZiAoZ2FtZU9yYWNsZUFkZHJlc3MgPT0gbXNnLnNlbmRlcikgXzsNCiAgfQ0KDQogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAvLyBldmVudHMNCiAgZXZlbnQgTG9nU2VuZGVyMihhZGRyZXNzIGxvZywgYWRkcmVzcyBjb250cmFjdFJvdW5kVG9rZW4pOw0KICBldmVudCBHYW1lQmlkQWNjZXB0ZWQoYWRkcmVzcyBiaWRkZXIsIHVpbnQgYW1vdW50LCB1aW50IGdhbWVJZCwgdWludCB1c2VySWQsIGJ5dGVzIHVzZXJOYW1lLCBib29sIHN0YXRlKTsNCiAgZXZlbnQgR2FtZVN0YXJ0ZWQodWludCBnYW1lSWQpOw0KICBldmVudCBHYW1lRmluaXNoZWQodWludCBnYW1lSWQsIHVpbnQgd2lubmVyVXNlcklkLCBzdHJpbmcgd2lubmVyVXNlck5hbWUsIHVpbnQgd2lubmVyc1BheW1lbnQsIGFkZHJlc3Mgd2lubmVyQWRkcmVzcyk7DQogIGV2ZW50IEdhbWVSZWZ1bmRlZCh1aW50IGdhbWVJZCwgdWludCByZWZ1bmRVc2VySWQsIHVpbnQgcmVmdW5kUGF5bWVudCk7DQoNCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIC8vIGluaXQgc2V0dGluZ3MNCiAgZnVuY3Rpb24gc2V0UGFyYW1zKHVpbnQgX2NvbW1pc3Npb25QZXJjZW50LCB1aW50IF9yZWZ1bmRQZW5hbHR5LCBhZGRyZXNzIF9nYW1lT3JhY2xlQWRkcmVzcywgYWRkcmVzcyBfY29udHJhY3RSb3VuZFRva2VuQWRkcmVzcykgb25seUNvbnRyYWN0T3duZXIoKSB7DQogICAgY29tbWlzc2lvblBlcmNlbnQgPSBfY29tbWlzc2lvblBlcmNlbnQ7DQogICAgcmVmdW5kUGVuYWx0eSA9IF9yZWZ1bmRQZW5hbHR5Ow0KICAgIGdhbWVPcmFjbGVBZGRyZXNzID0gX2dhbWVPcmFjbGVBZGRyZXNzOw0KICAgIGNvbnRyYWN0Um91bmRUb2tlbkFkZHJlc3MgPSBfY29udHJhY3RSb3VuZFRva2VuQWRkcmVzczsNCiAgICBMb2dTZW5kZXIyKG1zZy5zZW5kZXIsIGNvbnRyYWN0Um91bmRUb2tlbkFkZHJlc3MpOw0KICB9DQoNCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIC8vIGNvbnRhY3QgYWN0aW9ucw0KICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKSB7DQogICAgdWludCBpID0gYnl0ZXNUb1VpbnQyKGJ5dGVzKF9leHRyYURhdGEpKTsNCiAgICB1aW50IF9nYW1lSWQgPSBpLzEwMDAwOw0KICAgIHVpbnQgX3VzZXJJZCA9IGkgLSBfZ2FtZUlkKjEwMDAwOw0KDQoJLy9jaGVjayBnYW1lIGJpZCBhbW91bnQgYW5kIGZvcmNlIGJpZGRpbmcgdGhlIHNhbWUgYW1vdW50IG9mIFJPVU5Ecw0KCWlmIChnYW1lc1tfZ2FtZUlkXS5nYW1lSWQgPiAwKXsNCgkJdWludCBhbW91bnRUb0JpZCA9IGdhbWVzW19nYW1lSWRdLmJpZEFtdDsNCgkJZm9yICh1aW50IGsgPSAwOyBrIDwgZ2FtZXNbX2dhbWVJZF0uYmlkcy5sZW5ndGg7IGsrKykgew0KCQkJaWYoIWdhbWVzW19nYW1lSWRdLmJpZHNba10ucmVmdW5kZWQgJiYgX3VzZXJJZD09Z2FtZXNbX2dhbWVJZF0uYmlkc1trXS51c2VySWQpIHsNCgkJCQlhbW91bnRUb0JpZC09Z2FtZXNbX2dhbWVJZF0uYmlkc1trXS5iaWQ7DQoJCQl9CQ0KCQl9DQoJCWlmKGFtb3VudFRvQmlkPjApDQoJCQlfdmFsdWUgPSBhbW91bnRUb0JpZDsNCgkJZWxzZQ0KCQkJdGhyb3c7DQogICAgfQ0KCQ0KICAgIFJvdW5kVG9rZW4gdG9rZW4gPSBSb3VuZFRva2VuKGNvbnRyYWN0Um91bmRUb2tlbkFkZHJlc3MpOw0KICAgIGJvb2wgc3RhdGUgPSB0b2tlbi50cmFuc2ZlckZyb20oX2Zyb20sIGdhbWVPcmFjbGVBZGRyZXNzLCBfdmFsdWUpOw0KDQogICAgaWYgKCFzdGF0ZSkgdGhyb3c7DQoNCglpZiAoZ2FtZXNbX2dhbWVJZF0uZ2FtZUlkID09IDApew0KCQlnYW1lc1tfZ2FtZUlkXS5iaWRBbXQgPSBfdmFsdWU7DQoJCWdhbWVzW19nYW1lSWRdLmdhbWVJZCA9IF9nYW1lSWQ7DQoJfQ0KDQogICAgZ2FtZXNbX2dhbWVJZF0udG90YWxHYW1lQmlkICs9IF92YWx1ZTsNCiAgICBnYW1lc1tfZ2FtZUlkXS5iaWRzLnB1c2goQmlkKF9mcm9tLCBfdmFsdWUsIF91c2VySWQsICcnLCBmYWxzZSkpOw0KDQogICAgR2FtZUJpZEFjY2VwdGVkKF9mcm9tLCBfdmFsdWUsIF9nYW1lSWQsIF91c2VySWQsICcnLCBzdGF0ZSk7DQogIH0NCg0KICBmdW5jdGlvbiBnYW1lUmVzdWx0KHVpbnQgX2dhbWVJZCwgdWludCBfdXNlcklkKSBvbmx5R2FtZU9yYWNsZSgpIHsNCiAgICBpZiAoZ2FtZXNbX2dhbWVJZF0uZ2FtZUlkID09IDApIHRocm93Ow0KICAgIGlmIChnYW1lc1tfZ2FtZUlkXS53aW5uZXJVc2VySWQgIT0gMCkgdGhyb3c7DQogICAgaWYgKGdhbWVzW19nYW1lSWRdLnRvdGFsR2FtZUJpZCA9PSAwKSB0aHJvdzsNCg0KICAgIGFkZHJlc3Mgd2lubmVyQWRkcmVzczsNCiAgICB1aW50IGNvbW1pc3Npb24gPSBnYW1lc1tfZ2FtZUlkXS50b3RhbEdhbWVCaWQqY29tbWlzc2lvblBlcmNlbnQvMTAwOw0KICAgIC8vIGlmIChjb21taXNzaW9uIDwgMSkgY29tbWlzc2lvbiA9IDE7DQogICAgdWludCB3aW5uZXJBbW91bnQgPSBnYW1lc1tfZ2FtZUlkXS50b3RhbEdhbWVCaWQgLSBjb21taXNzaW9uOw0KDQogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgZ2FtZXNbX2dhbWVJZF0uYmlkcy5sZW5ndGg7IGkrKykgew0KICAgICAgaWYoIWdhbWVzW19nYW1lSWRdLmJpZHNbaV0ucmVmdW5kZWQgJiYgX3VzZXJJZD09Z2FtZXNbX2dhbWVJZF0uYmlkc1tpXS51c2VySWQpIHsNCiAgICAgICAgd2lubmVyQWRkcmVzcyA9IGdhbWVzW19nYW1lSWRdLmJpZHNbaV0uYmlkZGVyQWRkcmVzczsNCiAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgfQ0KDQogICAgaWYgKHdpbm5lckFkZHJlc3MgPT0gMCkgdGhyb3c7DQoNCiAgICBSb3VuZFRva2VuIHRva2VuID0gUm91bmRUb2tlbihjb250cmFjdFJvdW5kVG9rZW5BZGRyZXNzKTsNCiAgICBib29sIHN0YXRlID0gdG9rZW4udHJhbnNmZXJGcm9tKGdhbWVPcmFjbGVBZGRyZXNzLCB3aW5uZXJBZGRyZXNzLCB3aW5uZXJBbW91bnQpOw0KDQogICAgaWYgKCFzdGF0ZSkgdGhyb3c7DQoNCiAgICBnYW1lc1tfZ2FtZUlkXS53aW5uZXJVc2VySWQgPSBfdXNlcklkOw0KICAgIGdhbWVzW19nYW1lSWRdLnN0YXRlID0gMjAwOw0KDQogICAgR2FtZUZpbmlzaGVkKF9nYW1lSWQsIF91c2VySWQsICcnLCB3aW5uZXJBbW91bnQsIHdpbm5lckFkZHJlc3MpOw0KICB9DQoNCiAgZnVuY3Rpb24gZ2FtZVN0YXJ0KHVpbnQgX2dhbWVJZCkgb25seUdhbWVPcmFjbGUoKSB7DQogICAgaWYgKGdhbWVzW19nYW1lSWRdLmdhbWVJZCA9PSAwKSB0aHJvdzsNCiAgICBpZiAoZ2FtZXNbX2dhbWVJZF0uc3RhdGUgIT0gMCkgdGhyb3c7DQogICAgZ2FtZXNbX2dhbWVJZF0uc3RhdGUgPSAxOw0KICAgIEdhbWVTdGFydGVkKF9nYW1lSWQpOw0KICB9DQoNCiAgZnVuY3Rpb24gZ2FtZVJlZnVuZCh1aW50IF9nYW1lSWQpIG9ubHlHYW1lT3JhY2xlKCkgew0KICAgIGlmIChnYW1lc1tfZ2FtZUlkXS5nYW1lSWQgPT0gMCkgdGhyb3c7DQogICAgaWYgKGdhbWVzW19nYW1lSWRdLndpbm5lclVzZXJJZCAhPSAwKSB0aHJvdzsNCiAgICBpZiAoZ2FtZXNbX2dhbWVJZF0udG90YWxHYW1lQmlkID09IDApIHRocm93Ow0KDQogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgZ2FtZXNbX2dhbWVJZF0uYmlkcy5sZW5ndGg7IGkrKykgew0KICAgICAgaWYoIWdhbWVzW19nYW1lSWRdLmJpZHNbaV0ucmVmdW5kZWQpIHsNCiAgICAgICAgdWludCBwZW5hbHR5ID0gZ2FtZXNbX2dhbWVJZF0uYmlkc1tpXS5iaWQqcmVmdW5kUGVuYWx0eS8xMDA7DQogICAgICAgIC8vIGlmIChwZW5hbHR5IDwgMSkgcGVuYWx0eSA9IDE7DQogICAgICAgIHVpbnQgcmVmdW5kQW1vdW50ID0gZ2FtZXNbX2dhbWVJZF0uYmlkc1tpXS5iaWQgLSBwZW5hbHR5Ow0KDQogICAgICAgIFJvdW5kVG9rZW4gdG9rZW4gPSBSb3VuZFRva2VuKGNvbnRyYWN0Um91bmRUb2tlbkFkZHJlc3MpOw0KICAgICAgICBib29sIHN0YXRlID0gdG9rZW4udHJhbnNmZXJGcm9tKGdhbWVPcmFjbGVBZGRyZXNzLCBnYW1lc1tfZ2FtZUlkXS5iaWRzW2ldLmJpZGRlckFkZHJlc3MsIHJlZnVuZEFtb3VudCk7DQoNCiAgICAgICAgaWYgKCFzdGF0ZSkgdGhyb3c7DQoNCiAgICAgICAgZ2FtZXNbX2dhbWVJZF0uYmlkc1tpXS5yZWZ1bmRlZCA9IHRydWU7DQogICAgICAgIGdhbWVzW19nYW1lSWRdLnRvdGFsR2FtZUJpZCAtPSBnYW1lc1tfZ2FtZUlkXS5iaWRzW2ldLmJpZDsNCiAgICAgICAgR2FtZVJlZnVuZGVkKF9nYW1lSWQsIGdhbWVzW19nYW1lSWRdLmJpZHNbaV0udXNlcklkLCByZWZ1bmRBbW91bnQpOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIGJpZFJlZnVuZCh1aW50IF9nYW1lSWQsIHVpbnQgX3VzZXJJZCkgb25seUdhbWVPcmFjbGUoKSB7DQogICAgaWYgKGdhbWVzW19nYW1lSWRdLmdhbWVJZCA9PSAwKSB0aHJvdzsNCiAgICBpZiAoZ2FtZXNbX2dhbWVJZF0ud2lubmVyVXNlcklkICE9IDApIHRocm93Ow0KICAgIGlmIChnYW1lc1tfZ2FtZUlkXS50b3RhbEdhbWVCaWQgPT0gMCkgdGhyb3c7DQogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgZ2FtZXNbX2dhbWVJZF0uYmlkcy5sZW5ndGg7IGkrKykgew0KICAgICAgaWYoIWdhbWVzW19nYW1lSWRdLmJpZHNbaV0ucmVmdW5kZWQpIHsNCiAgICAgICAgaWYgKGdhbWVzW19nYW1lSWRdLmJpZHNbaV0udXNlcklkID09IF91c2VySWQpIHsNCiAgICAgICAgICB1aW50IHBlbmFsdHkgPSBnYW1lc1tfZ2FtZUlkXS5iaWRzW2ldLmJpZCpyZWZ1bmRQZW5hbHR5LzEwMDsNCiAgICAgICAgICAvLyBpZiAocGVuYWx0eSA8IDEpIHBlbmFsdHkgPSAxOw0KICAgICAgICAgIHVpbnQgcmVmdW5kQW1vdW50ID0gZ2FtZXNbX2dhbWVJZF0uYmlkc1tpXS5iaWQgLSBwZW5hbHR5Ow0KDQogICAgICAgICAgUm91bmRUb2tlbiB0b2tlbiA9IFJvdW5kVG9rZW4oY29udHJhY3RSb3VuZFRva2VuQWRkcmVzcyk7DQogICAgICAgICAgYm9vbCBzdGF0ZSA9IHRva2VuLnRyYW5zZmVyRnJvbShnYW1lT3JhY2xlQWRkcmVzcywgZ2FtZXNbX2dhbWVJZF0uYmlkc1tpXS5iaWRkZXJBZGRyZXNzLCByZWZ1bmRBbW91bnQpOw0KDQogICAgICAgICAgaWYgKCFzdGF0ZSkgdGhyb3c7DQoNCiAgICAgICAgICBnYW1lc1tfZ2FtZUlkXS5iaWRzW2ldLnJlZnVuZGVkID0gdHJ1ZTsNCiAgICAgICAgICBnYW1lc1tfZ2FtZUlkXS50b3RhbEdhbWVCaWQgLT0gZ2FtZXNbX2dhbWVJZF0uYmlkc1tpXS5iaWQ7DQogICAgICAgICAgR2FtZVJlZnVuZGVkKF9nYW1lSWQsIGdhbWVzW19nYW1lSWRdLmJpZHNbaV0udXNlcklkLCByZWZ1bmRBbW91bnQpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIC8vIEdldCBzZXR0aW5ncw0KICBmdW5jdGlvbiBnZXRTZXR0aW5ncygpIGNvbnN0YW50IHJldHVybnModWludCBjb21taXNzaW9uLCB1aW50IHBlbmFsdHkpIHsNCiAgICByZXR1cm4gKA0KICAgICAgY29tbWlzc2lvblBlcmNlbnQsDQogICAgICByZWZ1bmRQZW5hbHR5DQogICAgKTsNCiAgfQ0KDQogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAvLyBHZXQgZ2FtZSBpbmZvDQogIGZ1bmN0aW9uIGdldEdhbWUodWludCBfZ2FtZUlkKSBjb25zdGFudCByZXR1cm5zKHVpbnQgZ2FtZUlkLCB1aW50IHN0YXRlLCB1aW50IHdpbm5lclVzZXJJZCwgdWludCB0b3RhbEdhbWVCaWQsIHVpbnQgYmlkQW10LCB1aW50IGJpZHNBbW91bnQpIHsNCiAgICB2YXIgZ2FtZSA9IGdhbWVzW19nYW1lSWRdOw0KICAgIHJldHVybiAoDQogICAgICBnYW1lLmdhbWVJZCwNCiAgICAgIGdhbWUuc3RhdGUsDQogICAgICBnYW1lLndpbm5lclVzZXJJZCwNCiAgICAgIGdhbWUudG90YWxHYW1lQmlkLA0KCSAgZ2FtZS5iaWRBbXQsDQogICAgICBnYW1lLmJpZHMubGVuZ3RoDQogICAgKTsNCiAgfQ0KDQogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAvLyBHZXQgYmlkIGluZm8NCiAgZnVuY3Rpb24gZ2V0R2FtZUJpZCh1aW50IF9nYW1lSWQsIHVpbnQgX2JpZElkKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MgYmlkZGVyQWRkcmVzcywgdWludCBiaWRzQW1vdW50LCB1aW50IHVzZXJJZCwgc3RyaW5nIHVzZXJOYW1lLCBib29sIHJlZnVuZGVkKSB7DQogICAgR2FtZSBnYW1lID0gZ2FtZXNbX2dhbWVJZF07DQogICAgQmlkIGJpZD1nYW1lLmJpZHNbX2JpZElkXTsNCiAgICByZXR1cm4gKA0KICAgICAgYmlkLmJpZGRlckFkZHJlc3MsDQogICAgICBiaWQuYmlkLA0KICAgICAgYmlkLnVzZXJJZCwNCiAgICAgIGJpZC51c2VyTmFtZSwNCiAgICAgIGJpZC5yZWZ1bmRlZA0KICAgICk7DQogIH0NCg0KICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgLy8gR2V0IGJhbGFuY2Ugb2YgYWRkcmVzcw0KICBmdW5jdGlvbiBnZXRCYWxhbmNlKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsNCiAgICBSb3VuZFRva2VuIHRva2VuID0gUm91bmRUb2tlbihjb250cmFjdFJvdW5kVG9rZW5BZGRyZXNzKTsNCiAgICByZXR1cm4gdG9rZW4uYmFsYW5jZU9mKF9vd25lcik7DQogIH0NCg0KICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgLy8ga2lsbCBjb250cmFjdA0KICBmdW5jdGlvbiBraWxsKCkgb25seUNvbnRyYWN0T3duZXIoKSB7DQogICBpZiAobXNnLnNlbmRlciA9PSBjb250cmFjdE93bmVyKXsNCiAgICAgIHN1aWNpZGUoY29udHJhY3RPd25lcik7DQogICAgfQ0KICB9DQoNCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIC8vIHV0aWxzDQogIGZ1bmN0aW9uIGJ5dGVzVG9VaW50MihieXRlcyBiKSByZXR1cm5zICh1aW50KSB7DQogICAgdWludCByZXN1bHQgPSAwOw0KICAgIGZvciAodWludCBpPTE7IGkgPCBiLmxlbmd0aDsgaSsrKSB7DQogICAgICB1aW50IHggPSB1aW50KHVpbnQoYltpXSkpOw0KICAgICAgaWYgKHggPiAwKQ0KICAgICAgICB4ID0geCAtIDQ4Ow0KICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgeCooMTAqKihiLmxlbmd0aC1pLTEpKTsNCiAgICB9DQogICAgcmV0dXJuIHJlc3VsdDsNCiAgfQ0KDQp9'