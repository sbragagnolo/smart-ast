base 64 content
base64bitplusToken1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC40Ow0KDQoNCi8vLyBAdGl0bGUgQml0cGx1cyBUb2tlbiAoQlBOVCkgLSBjcm93ZGZ1bmRpbmcgY29kZSBmb3IgQml0cGx1cyBQcm9qZWN0DQpjb250cmFjdCBCaXRwbHVzVG9rZW4gew0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJCaXRwbHVzIFRva2VuIjsNCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJCUE5UIjsNCiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsgIC8vIDE4IGRlY2ltYWwgcGxhY2VzLCB0aGUgc2FtZSBhcyBFVEguDQoNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbkNyZWF0aW9uUmF0ZSA9IDEwMDA7DQoNCiAgICAvLyBUaGUgZnVuZGluZyBjYXAgaW4gd2Vpcy4NCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbkNyZWF0aW9uQ2FwID0gMjUwMDAgZXRoZXIgKiB0b2tlbkNyZWF0aW9uUmF0ZTsNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbkNyZWF0aW9uTWluID0gMjUwMCBldGhlciAqIHRva2VuQ3JlYXRpb25SYXRlOw0KDQogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ1N0YXJ0QmxvY2s7DQogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ0VuZEJsb2NrOw0KDQogICAgLy8gVGhlIGZsYWcgaW5kaWNhdGVzIGlmIHRoZSBjb250cmFjdCBpcyBpbiBGdW5kaW5nIHN0YXRlLg0KICAgIGJvb2wgcHVibGljIGZ1bmRpbmcgPSB0cnVlOw0KDQogICAgLy8gUmVjZWl2ZXMgRVRIDQogICAgYWRkcmVzcyBwdWJsaWMgYml0cGx1c0FkZHJlc3M7DQoNCiAgICAvLyBUaGUgY3VycmVudCB0b3RhbCB0b2tlbiBzdXBwbHkuDQogICAgdWludDI1NiB0b3RhbFRva2VuczsNCg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7DQogICAgDQogICAgLy8gT3duZXIgb2YgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IHRvIGFub3RoZXIgYWNjb3VudA0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOw0KICAgIA0KICAgIHN0cnVjdCBFYXJseUJhY2tlckNvbmRpdGlvbiB7DQogICAgICAgIGFkZHJlc3MgYmFja2VyQWRkcmVzczsNCiAgICAgICAgdWludDI1NiBkZXBvc2l0ZWQ7DQogICAgICAgIHVpbnQyNTYgYWdyZWVkUGVyY2VudGFnZTsNCiAgICAgICAgdWludDI1NiBhZ3JlZWRFdGhQcmljZTsNCiAgICB9DQogICAgDQogICAgRWFybHlCYWNrZXJDb25kaXRpb25bXSBwdWJsaWMgZWFybHlCYWNrZXJzOw0KICAgIA0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOw0KICAgIGV2ZW50IFJlZnVuZChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBFYXJseUJhY2tlckRlcG9zaXQoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCB1aW50MjU2IF92YWx1ZSk7DQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7DQoNCiAgICBmdW5jdGlvbiBCaXRwbHVzVG9rZW4odWludDI1NiBfZnVuZGluZ1N0YXJ0QmxvY2ssDQogICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgX2Z1bmRpbmdFbmRCbG9jaykgew0KDQogICAgICAgIGFkZHJlc3MgX2JpdHBsdXNBZGRyZXNzID0gMHgyODZlMDA2MGQ5REJFYTAyMzEzODk0ODVENDU1QTgwZjE0NjQ4QjNjOw0KICAgICAgICBpZiAoX2JpdHBsdXNBZGRyZXNzID09IDApIHRocm93Ow0KICAgICAgICBpZiAoX2Z1bmRpbmdTdGFydEJsb2NrIDw9IGJsb2NrLm51bWJlcikgdGhyb3c7DQogICAgICAgIGlmIChfZnVuZGluZ0VuZEJsb2NrICAgPD0gX2Z1bmRpbmdTdGFydEJsb2NrKSB0aHJvdzsNCiAgICAgICAgDQogICAgICAgIC8vIHNwZWNpYWwgY29uZGl0aW9ucyBmb3IgdGhlIGVhcmx5IGJhY2tlcnMNCiAgICAgICAgZWFybHlCYWNrZXJzLnB1c2goRWFybHlCYWNrZXJDb25kaXRpb24oew0KICAgICAgICAgICAgYmFja2VyQWRkcmVzczogMHhhMWNmYzllYmRmZmJmZmU5YjI3ZDc0MWFlMDRjZmMyZTc4YWY1MjdhLA0KICAgICAgICAgICAgZGVwb3NpdGVkOiAwLA0KICAgICAgICAgICAgYWdyZWVkUGVyY2VudGFnZTogMTAwMCwNCiAgICAgICAgICAgIGFncmVlZEV0aFByaWNlOiAyNTAgZXRoZXINCiAgICAgICAgfSkpOw0KICAgICAgICANCiAgICAgICAgLy8gY29uZGl0aW9ucyBmb3IgdGhlIGNvbXBhbnkgLyBkZXZlbG9wZXJzDQogICAgICAgIGVhcmx5QmFja2Vycy5wdXNoKEVhcmx5QmFja2VyQ29uZGl0aW9uKHsNCiAgICAgICAgICAgIGJhY2tlckFkZHJlc3M6IDB4MzdlZjExNjgyNTJmMjc0RDRjQTViNTU4MjEzZDcyOTQwODVCQ0EwOCwNCiAgICAgICAgICAgIGRlcG9zaXRlZDogMCwNCiAgICAgICAgICAgIGFncmVlZFBlcmNlbnRhZ2U6IDUwMCwNCiAgICAgICAgICAgIGFncmVlZEV0aFByaWNlOiAwLjEgZXRoZXINCiAgICAgICAgfSkpOw0KICAgICAgICANCiAgICAgICAgZWFybHlCYWNrZXJzLnB1c2goRWFybHlCYWNrZXJDb25kaXRpb24oew0KICAgICAgICAgICAgYmFja2VyQWRkcmVzczogMHgyNDY2MDQ2NDNhYzM4ZTk2NTI2YjY2YmE5MWMxYjJlYzBjMzlkOGRlLA0KICAgICAgICAgICAgZGVwb3NpdGVkOiAwLA0KICAgICAgICAgICAgYWdyZWVkUGVyY2VudGFnZTogNTAwLA0KICAgICAgICAgICAgYWdyZWVkRXRoUHJpY2U6IDAuMSBldGhlcg0KICAgICAgICB9KSk7ICAgICAgICANCiAgICAgICAgDQogICAgICAgIGJpdHBsdXNBZGRyZXNzID0gX2JpdHBsdXNBZGRyZXNzOw0KICAgICAgICBmdW5kaW5nU3RhcnRCbG9jayA9IF9mdW5kaW5nU3RhcnRCbG9jazsNCiAgICAgICAgZnVuZGluZ0VuZEJsb2NrID0gX2Z1bmRpbmdFbmRCbG9jazsNCiAgICB9DQoNCiAgICAvLy8gQG5vdGljZSBUcmFuc2ZlciBgX3ZhbHVlYCBCUE5UIHRva2VucyBmcm9tIHNlbmRlcidzIGFjY291bnQNCiAgICAvLy8gYG1zZy5zZW5kZXJgIHRvIHByb3ZpZGVkIGFjY291bnQgYWRkcmVzcyBgX3RvYC4NCiAgICAvLy8gQG5vdGljZSBUaGlzIGZ1bmN0aW9uIGlzIGRpc2FibGVkIGR1cmluZyB0aGUgZnVuZGluZy4NCiAgICAvLy8gQGRldiBSZXF1aXJlZCBzdGF0ZTogT3BlcmF0aW9uYWwNCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgdG9rZW5zIHJlY2lwaWVudA0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQNCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgLy8gQWJvcnQgaWYgbm90IGluIE9wZXJhdGlvbmFsIHN0YXRlLg0KICAgICAgICBpZiAoZnVuZGluZykgdGhyb3c7DQoNCiAgICAgICAgdmFyIHNlbmRlckJhbGFuY2UgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsNCiAgICAgICAgaWYgKHNlbmRlckJhbGFuY2UgPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsNCiAgICAgICAgICAgIHNlbmRlckJhbGFuY2UgLT0gX3ZhbHVlOw0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzZW5kZXJCYWxhbmNlOw0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7DQogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgNCiAgICAgICAgIGFkZHJlc3MgX2Zyb20sDQogICAgICAgICBhZGRyZXNzIF90bywNCiAgICAgICAgIHVpbnQyNTYgX2Ftb3VudA0KICAgICApIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICAvLyBBYm9ydCBpZiBub3QgaW4gT3BlcmF0aW9uYWwgc3RhdGUuDQogICAgICAgIGlmIChmdW5kaW5nKSB0aHJvdzsgICAgICAgICANCiAgICAgICAgIA0KICAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50DQogICAgICAgICAgICAgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudA0KICAgICAgICAgICAgICYmIF9hbW91bnQgPiAwKSB7DQogICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF9hbW91bnQ7DQogICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX2Ftb3VudDsNCiAgICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF9hbW91bnQ7DQogICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgIH0NCiAgICB9ICAgIA0KDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICAgIHJldHVybiB0b3RhbFRva2VuczsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogICAgfQ0KDQogICAgLy8vIEBub3RpY2UgQ3JlYXRlIHRva2VucyB3aGVuIGZ1bmRpbmcgaXMgYWN0aXZlLg0KICAgIC8vLyBAZGV2IFJlcXVpcmVkIHN0YXRlOiBGdW5kaW5nIEFjdGl2ZQ0KICAgIC8vLyBAZGV2IFN0YXRlIHRyYW5zaXRpb246IC0+IEZ1bmRpbmcgU3VjY2VzcyAob25seSBpZiBjYXAgcmVhY2hlZCkNCiAgICBmdW5jdGlvbiBjcmVhdGUoKSBwYXlhYmxlIGV4dGVybmFsIHsNCiAgICAgICAgLy8gQWJvcnQgaWYgbm90IGluIEZ1bmRpbmcgQWN0aXZlIHN0YXRlLg0KICAgICAgICAvLyBUaGUgY2hlY2tzIGFyZSBzcGxpdCAoaW5zdGVhZCBvZiB1c2luZyBvciBvcGVyYXRvcikgYmVjYXVzZSBpdCBpcw0KICAgICAgICAvLyBjaGVhcGVyIHRoaXMgd2F5Lg0KICAgICAgICBpZiAoIWZ1bmRpbmcpIHRocm93Ow0KICAgICAgICBpZiAoYmxvY2subnVtYmVyIDwgZnVuZGluZ1N0YXJ0QmxvY2spIHRocm93Ow0KICAgICAgICBpZiAoYmxvY2subnVtYmVyID4gZnVuZGluZ0VuZEJsb2NrKSB0aHJvdzsNCg0KICAgICAgICAvLyBEbyBub3QgYWxsb3cgY3JlYXRpbmcgMCB0b2tlbnMuDQogICAgICAgIGlmIChtc2cudmFsdWUgPT0gMCkgdGhyb3c7DQogICAgICAgIA0KICAgICAgICBib29sIGlzRWFybHlCYWNrZXIgPSBmYWxzZTsNCiAgICAgICAgDQogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGVhcmx5QmFja2Vycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYoZWFybHlCYWNrZXJzW2ldLmJhY2tlckFkZHJlc3MgPT0gbXNnLnNlbmRlcikgew0KICAgICAgICAgICAgICAgIGVhcmx5QmFja2Vyc1tpXS5kZXBvc2l0ZWQgKz0gbXNnLnZhbHVlOw0KICAgICAgICAgICAgICAgIGlzRWFybHlCYWNrZXIgPSB0cnVlOw0KICAgICAgICAgICAgICAgIEVhcmx5QmFja2VyRGVwb3NpdChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgaWYoIWlzRWFybHlCYWNrZXIpIHsNCiAgICAgICAgICAgIC8vIGRvIG5vdCBhbGxvdyB0byBjcmVhdGUgbW9yZSB0aGVuIGNhcCB0b2tlbnMNCiAgICAgICAgICAgIGlmIChtc2cudmFsdWUgPiAodG9rZW5DcmVhdGlvbkNhcCAtIHRvdGFsVG9rZW5zKSAvIHRva2VuQ3JlYXRpb25SYXRlKQ0KICAgICAgICAgICAgICAgIHRocm93Ow0KDQogICAgICAgICAgICB2YXIgbnVtVG9rZW5zID0gbXNnLnZhbHVlICogdG9rZW5DcmVhdGlvblJhdGU7DQogICAgICAgICAgICB0b3RhbFRva2VucyArPSBudW1Ub2tlbnM7DQoNCiAgICAgICAgICAgIC8vIEFzc2lnbiBuZXcgdG9rZW5zIHRvIHRoZSBzZW5kZXINCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IG51bVRva2VuczsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gTG9nIHRva2VuIGNyZWF0aW9uIGV2ZW50DQogICAgICAgICAgICBUcmFuc2ZlcigwLCBtc2cuc2VuZGVyLCBudW1Ub2tlbnMpOyAgICAgICAgICAgIA0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8vIEBub3RpY2UgRmluYWxpemUgY3Jvd2RmdW5kaW5nDQogICAgLy8vIEBkZXYgSWYgY2FwIHdhcyByZWFjaGVkIG9yIGNyb3dkZnVuZGluZyBoYXMgZW5kZWQgdGhlbjoNCiAgICAvLy8gY3JlYXRlIEJQTlQgZm9yIHRoZSBlYXJseSBiYWNrZXJzLA0KICAgIC8vLyB0cmFuc2ZlciBFVEggdG8gdGhlIEJpdHBsdXMgYWRkcmVzcy4NCiAgICAvLy8gQGRldiBSZXF1aXJlZCBzdGF0ZTogRnVuZGluZyBTdWNjZXNzDQogICAgLy8vIEBkZXYgU3RhdGUgdHJhbnNpdGlvbjogLT4gT3BlcmF0aW9uYWwgTm9ybWFsDQogICAgZnVuY3Rpb24gZmluYWxpemUoKSBleHRlcm5hbCB7DQogICAgICAgIC8vIEFib3J0IGlmIG5vdCBpbiBGdW5kaW5nIFN1Y2Nlc3Mgc3RhdGUuDQogICAgICAgIGlmICghZnVuZGluZykgdGhyb3c7DQogICAgICAgIGlmICgoYmxvY2subnVtYmVyIDw9IGZ1bmRpbmdFbmRCbG9jayB8fA0KICAgICAgICAgICAgIHRvdGFsVG9rZW5zIDwgdG9rZW5DcmVhdGlvbk1pbikgJiYNCiAgICAgICAgICAgICB0b3RhbFRva2VucyA8IHRva2VuQ3JlYXRpb25DYXApIHRocm93Ow0KDQogICAgICAgIC8vIFN3aXRjaCB0byBPcGVyYXRpb25hbCBzdGF0ZS4gVGhpcyBpcyB0aGUgb25seSBwbGFjZSB0aGlzIGNhbiBoYXBwZW4uDQogICAgICAgIGZ1bmRpbmcgPSBmYWxzZTsNCiAgICAgICAgLy8gVHJhbnNmZXIgRVRIIHRvIHRoZSBCaXRwbHVzIGFkZHJlc3MuDQogICAgICAgIGlmICghYml0cGx1c0FkZHJlc3Muc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsNCiAgICAgICAgDQogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGVhcmx5QmFja2Vycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYoZWFybHlCYWNrZXJzW2ldLmRlcG9zaXRlZCAhPSB1aW50MjU2KDApKSB7DQogICAgICAgICAgICAgICAgdWludDI1NiBwZXJjZW50YWdlID0gKGVhcmx5QmFja2Vyc1tpXS5kZXBvc2l0ZWQgKiBlYXJseUJhY2tlcnNbaV0uYWdyZWVkUGVyY2VudGFnZSAvIGVhcmx5QmFja2Vyc1tpXS5hZ3JlZWRFdGhQcmljZSk7DQogICAgICAgICAgICAgICAgdWludDI1NiBhZGRpdGlvbmFsVG9rZW5zID0gdG90YWxUb2tlbnMgKiBwZXJjZW50YWdlIC8gKDEwMDAwIC0gcGVyY2VudGFnZSk7DQogICAgICAgICAgICAgICAgYWRkcmVzcyBiYWNrZXJBZGRyID0gZWFybHlCYWNrZXJzW2ldLmJhY2tlckFkZHJlc3M7DQogICAgICAgICAgICAgICAgYmFsYW5jZXNbYmFja2VyQWRkcl0gPSBhZGRpdGlvbmFsVG9rZW5zOw0KICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zICs9IGFkZGl0aW9uYWxUb2tlbnM7DQogICAgICAgICAgICAgICAgVHJhbnNmZXIoMCwgYmFja2VyQWRkciwgYWRkaXRpb25hbFRva2Vucyk7DQoJCQl9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLy8gQG5vdGljZSBHZXQgYmFjayB0aGUgZXRoZXIgc2VudCBkdXJpbmcgdGhlIGZ1bmRpbmcgaW4gY2FzZSB0aGUgZnVuZGluZw0KICAgIC8vLyBoYXMgbm90IHJlYWNoZWQgdGhlIG1pbmltdW0gbGV2ZWwuDQogICAgLy8vIEBkZXYgUmVxdWlyZWQgc3RhdGU6IEZ1bmRpbmcgRmFpbHVyZQ0KICAgIGZ1bmN0aW9uIHJlZnVuZCgpIGV4dGVybmFsIHsNCiAgICAgICAgLy8gQWJvcnQgaWYgbm90IGluIEZ1bmRpbmcgRmFpbHVyZSBzdGF0ZS4NCiAgICAgICAgaWYgKCFmdW5kaW5nKSB0aHJvdzsNCiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBmdW5kaW5nRW5kQmxvY2spIHRocm93Ow0KICAgICAgICBpZiAodG90YWxUb2tlbnMgPj0gdG9rZW5DcmVhdGlvbk1pbikgdGhyb3c7DQogICAgICAgIA0KICAgICAgICBib29sIGlzRWFybHlCYWNrZXIgPSBmYWxzZTsNCiAgICAgICAgdWludDI1NiBldGhWYWx1ZTsNCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgZWFybHlCYWNrZXJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZihlYXJseUJhY2tlcnNbaV0uYmFja2VyQWRkcmVzcyA9PSBtc2cuc2VuZGVyKSB7DQogICAgICAgICAgICAgICAgaXNFYXJseUJhY2tlciA9IHRydWU7DQogICAgICAgICAgICAgICAgZXRoVmFsdWUgPSBlYXJseUJhY2tlcnNbaV0uZGVwb3NpdGVkOw0KICAgICAgICAgICAgICAgIGlmIChldGhWYWx1ZSA9PSAwKSB0aHJvdzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmKCFpc0Vhcmx5QmFja2VyKSB7DQogICAgICAgICAgICB2YXIgYnBudFZhbHVlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07DQogICAgICAgICAgICBpZiAoYnBudFZhbHVlID09IDApIHRocm93Ow0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOw0KICAgICAgICAgICAgdG90YWxUb2tlbnMgLT0gYnBudFZhbHVlOw0KICAgICAgICAgICAgZXRoVmFsdWUgPSBicG50VmFsdWUgLyB0b2tlbkNyZWF0aW9uUmF0ZTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgUmVmdW5kKG1zZy5zZW5kZXIsIGV0aFZhbHVlKTsNCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoZXRoVmFsdWUpKSB0aHJvdzsNCiAgICB9DQogICAgDQogICAgLy8gQWxsb3cgX3NwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSB5b3VyIGFjY291bnQsIG11bHRpcGxlIHRpbWVzLCB1cCB0byB0aGUgX3ZhbHVlIGFtb3VudC4NCiAgICAvLyBJZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2FpbiBpdCBvdmVyd3JpdGVzIHRoZSBjdXJyZW50IGFsbG93YW5jZSB3aXRoIF92YWx1ZS4NCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsNCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQogICAgDQogICAgLy8gSnVzdCBhIHNhZmVndWFyZCBmb3IgcGVvcGxlIHdobyBtaWdodCBpbnZlc3QgYW5kIHRoZW4gbG9vc2UgdGhlIGtleQ0KICAgIC8vIElmIDIgd2Vla3MgYWZ0ZXIgYW4gdW5zdWNjZXNzZnVsIGVuZCBvZiB0aGUgY2FtcGFpZ24gdGhlcmUgYXJlIHVuY2xhaW1lZA0KICAgIC8vIGZ1bmRzLCB0cmFuc2ZlciB0aG9zZSB0byBCaXRwbHVzIGFkZHJlc3MgLSB0aGUgZnVuZHMgd2lsbCBiZSByZXR1cm5lZCB0byANCiAgICAvLyByZXNwZWN0aXZlIG93bmVycyBmcm9tIGl0DQogICAgZnVuY3Rpb24gc2FmZWd1YXJkKCkgew0KICAgICAgICBpZihibG9jay5udW1iZXIgPiAoZnVuZGluZ0VuZEJsb2NrICsgNzEwMDApKSB7DQogICAgICAgICAgICBpZiAoIWJpdHBsdXNBZGRyZXNzLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7DQogICAgICAgIH0NCiAgICB9DQp9'