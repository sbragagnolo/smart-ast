base 64 content
base64blockoptions2
	^'cHJhZ21hIHNvbGlkaXR5XiAwLjQgLjg7DQoNCg0KY29udHJhY3QgRVJDMjAgew0KDQogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7DQoNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnModWludDI1Nik7DQoNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpOw0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyhib29sIG9rKTsNCg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSByZXR1cm5zKGJvb2wgb2spOw0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyhib29sIG9rKTsNCg0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOw0KDQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7DQoNCn0NCg0KY29udHJhY3QgYmxvY2tvcHRpb25zIGlzIEVSQzIwDQoNCnsNCg0KICAgICAgIC8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovDQogICAgICAvL1RvIHN0b3JlIG5hbWUgZm9yIHRva2VuDQogICAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiYmxvY2tvcHRpb25zIjsNCiAgICANCiAgICAgIC8vVG8gc3RvcmUgc3ltYm9sIGZvciB0b2tlbiAgICAgICANCiAgICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkJPUFQiOw0KICAgIA0KICAgICAgLy9UbyBzdG9yZSBkZWNpbWFsIHBsYWNlcyBmb3IgdG9rZW4NCiAgICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDg7ICAgIA0KICAgIA0KICAgICAgLy9UbyBzdG9yZSBjdXJyZW50IHN1cHBseSBvZiBCT1BUDQogICAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseT0yMDAwMDAwMCAqIDEwMDAwMDAwMDsNCiAgICAgIA0KICAgICAgIHVpbnQgcHJlX2ljb19zdGFydDsNCiAgICAgICB1aW50IHByZV9pY29fZW5kOw0KICAgICAgIHVpbnQgaWNvX3N0YXJ0Ow0KICAgICAgIHVpbnQgaWNvX2VuZDsNCiAgICAgICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgaW52ZXN0b3I7DQogICAgICAgbWFwcGluZyh1aW50ID0+IHVpbnQpIHdlaXJlY2VpdmVkOw0KICAgICAgIG1hcHBpbmcodWludCA9PiB1aW50KSBvcHRzU2VudDsNCiAgICAgIA0KICAgICAgICBldmVudCBwcmVpY28odWludCBjb3VudGVyLGFkZHJlc3MgaW52ZXN0b3JzLHVpbnQgd2VpUmVjZWl2ZWQsdWludCBib3B0c2VudCk7DQogICAgICAgIGV2ZW50IGljbyh1aW50IGNvdW50ZXIsYWRkcmVzcyBpbnZlc3RvcnMsdWludCB3ZWlSZWNlaXZlZCx1aW50IGJvcHRzZW50KTsNCiAgICAgICAgdWludCBjb3VudGVyPTA7DQogICAgICAgIHVpbnQgcHJvZml0X3NlbnQ9MDsNCiAgICAgICAgYm9vbCBzdG9wcGVkID0gZmFsc2U7DQogICAgICAgIA0KICAgICAgZnVuY3Rpb24gYmxvY2tvcHRpb25zKCl7DQogICAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgICAgICAgIGJhbGFuY2VzW293bmVyXSA9IHRvdGFsU3VwcGx5IDsgLy90byBoYW5kbGUgOCBkZWNpbWFsIHBsYWNlcw0KICAgICAgICAgIHByZV9pY29fc3RhcnQgPSBub3c7DQogICAgICAgICAgcHJlX2ljb19lbmQgPSBwcmVfaWNvX3N0YXJ0ICsgNyBkYXlzOw0KICAgICAgICAgIA0KICAgICAgICB9DQogICAgICAvL21hcCB0byBzdG9yZSBCT1BUIGJhbGFuY2UgY29ycmVzcG9uZGluZyB0byBhZGRyZXNzDQogICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7DQogICAgDQogICAgICAvL1RvIHN0b3JlIHNwZW5kZXIgd2l0aCBhbGxvd2VkIGFtb3VudCBvZiBCT1BUIHRvIHNwZW5kIGNvcnJlc3BvbmRpbmcgdG8gQk9QVHMgaG9sZGVyJ3MgYWNjb3VudA0KICAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOw0KICAgIA0KICAgICAgLy9vd25lciB2YXJpYWJsZSB0byBzdG9yZSBjb250cmFjdCBvd25lciBhY2NvdW50DQogICAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCiAgICAgIA0KICAgICAgLy9tb2RpZmllciB0byBjaGVjayB0cmFuc2FjdGlvbiBpbml0aWF0b3IgaXMgb25seSBvd25lcg0KICAgICAgbW9kaWZpZXIgb25seU93bmVyKCkgew0KICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBvd25lcikNCiAgICAgICAgICBfOw0KICAgICAgfQ0KICAgIA0KICAgICAgLy9vd25lcnNoaXAgY2FuIGJlIHRyYW5zZmVycmVkIHRvIHByb3ZpZGVkIG5ld093bmVyLiBGdW5jdGlvbiBjYW4gb25seSBiZSBpbml0aWF0ZWQgYnkgY29udHJhY3Qgb3duZXIncyBhY2NvdW50DQogICAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgew0KICAgICAgICAgIGJhbGFuY2VzW25ld093bmVyXSA9IGJhbGFuY2VzW293bmVyXTsNCiAgICAgICAgICBiYWxhbmNlc1tvd25lcl09MDsNCiAgICAgICAgICBvd25lciA9IG5ld093bmVyOw0KICAgICAgfQ0KDQogICAgICAgIC8qKg0KICAgICAgICAqIE11bHRpcGxpY2F0aW9uIHdpdGggc2FmZXR5IGNoZWNrDQogICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIE11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgICAgICAgIC8vY2hlY2sgcmVzdWx0IHNob3VsZCBub3QgYmUgb3RoZXIgd2lzZSB1bnRpbCBhPTANCiAgICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgICAgICAgIHJldHVybiBjOw0KICAgICAgICB9DQogICAgDQogICAgICAgIC8qKg0KICAgICAgICAqIERpdmlzaW9uIHdpdGggc2FmZXR5IGNoZWNrDQogICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIERpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgICAgIC8vb3ZlcmZsb3cgY2hlY2s7IGIgbXVzdCBub3QgYmUgMA0KICAgICAgICAgIGFzc2VydChiID4gMCk7DQogICAgICAgICAgdWludCBjID0gYSAvIGI7DQogICAgICAgICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7DQogICAgICAgICAgcmV0dXJuIGM7DQogICAgICAgIH0NCiAgICANCiAgICAgICAgLyoqDQogICAgICAgICogU3VidHJhY3Rpb24gd2l0aCBzYWZldHkgY2hlY2sNCiAgICAgICAgKi8NCiAgICAgICAgZnVuY3Rpb24gU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgICAgICAgLy9iIG11c3QgYmUgZ3JlYXRlciB0aGF0IGEgYXMgd2UgbmVlZCB0byBzdG9yZSB2YWx1ZSBpbiB1bnNpZ25lZCBpbnRlZ2VyDQogICAgICAgICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgICAgICAgcmV0dXJuIGEgLSBiOw0KICAgICAgICB9DQogICAgDQogICAgICAgIC8qKg0KICAgICAgICAqIEFkZGl0aW9uIHdpdGggc2FmZXR5IGNoZWNrDQogICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIEFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgICAgIHVpbnQgYyA9IGEgKyBiOw0KICAgICAgICAgIC8vcmVzdWx0IG11c3QgYmUgZ3JlYXRlciBhcyBhIG9yIGIgY2FuIG5vdCBiZSBuZWdhdGl2ZQ0KICAgICAgICAgIGFzc2VydChjPj1hICYmIGM+PWIpOw0KICAgICAgICAgIHJldHVybiBjOw0KICAgICAgICB9DQogICAgDQogICAgICAvKioNCiAgICAgICAgKiBhc3NlcnQgdXNlZCBpbiBkaWZmZXJlbnQgTWF0aCBmdW5jdGlvbnMNCiAgICAgICAgKi8NCiAgICAgICAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7DQogICAgICAgICAgaWYgKCFhc3NlcnRpb24pIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIA0KICAgIC8vSW1wbGVtZW50YXRpb24gZm9yIHRyYW5zZmVycmluZyBCT1BUIHRvIHByb3ZpZGVkIGFkZHJlc3MgDQogICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wpew0KDQogICAgICAgIHVpbnQgY2hlY2sgPSBiYWxhbmNlc1tvd25lcl0gLSBfdmFsdWU7DQogICAgICAgIGlmKG1zZy5zZW5kZXIgPT0gb3duZXIgJiYgbm93Pj1wcmVfaWNvX3N0YXJ0ICYmIG5vdzw9cHJlX2ljb19lbmQgJiYgY2hlY2sgPCAxOTAwMDAwMDAwMDAwMDAwKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZihtc2cuc2VuZGVyID09b3duZXIgJiYgbm93Pj1wcmVfaWNvX2VuZCAmJiBub3c8PShwcmVfaWNvX2VuZCArIDE2IGRheXMpICYmIGNoZWNrIDwgMTg1MDAwMDAwMDAwMDAwMCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYobXNnLnNlbmRlciA9PSBvd25lciAmJiBjaGVjayA8IDE1MDAwMDAwMDAwMDAwMCAmJiBub3cgPCBpY29fc3RhcnQgKyAxODAgZGF5cykNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKG1zZy5zZW5kZXIgPT0gb3duZXIgJiYgY2hlY2sgPCAxMDAwMDAwMDAwMDAwMDAgJiYgbm93IDwgaWNvX3N0YXJ0ICsgMzYwIGRheXMpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChtc2cuc2VuZGVyID09IG93bmVyICYmIGNoZWNrIDwgNTAwMDAwMDAwMDAwMDAgJiYgbm93IDwgaWNvX3N0YXJ0ICsgNTQwIGRheXMpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICAvL0NoZWNrIHByb3ZpZGVkIEJPUFQgc2hvdWxkIG5vdCBiZSAwDQogICAgICAgZWxzZSBpZiAoX3ZhbHVlID4gMCkgew0KICAgICAgICAgIC8vZGVkdWN0IE9QVFMgYW1vdW50IGZyb20gdHJhbnNhY3Rpb24gaW5pdGlhdG9yDQogICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sX3ZhbHVlKTsNCiAgICAgICAgICAvL0FkZCBPUFRTIHRvIGJhbGFjZSBvZiB0YXJnZXQgYWNjb3VudA0KICAgICAgICAgIGJhbGFuY2VzW190b10gPSBBZGQoYmFsYW5jZXNbX3RvXSxfdmFsdWUpOw0KICAgICAgICAgIC8vRW1pdCBldmVudCBmb3IgdHJhbnNmZXJyaW5nIEJPUFQNCiAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZXsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIA0KICAgICAgLy9UcmFuc2ZlciBpbml0aWF0ZWQgYnkgc3BlbmRlciANCiAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsNCiAgICANCiAgICAgICAgLy9DaGVjayBwcm92aWRlZCBCT1BUIHNob3VsZCBub3QgYmUgMA0KICAgICAgICBpZiAoX3ZhbHVlID4gMCkgew0KICAgICAgICAgIC8vR2V0IGFtb3VudCBvZiBCT1BUIGZvciB3aGljaCBzcGVuZGVyIGlzIGF1dGhvcml6ZWQNCiAgICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOw0KICAgICAgICAgIC8vQWRkIGFtb3VudCBvZiBCT1BUIGluIHRyYXJnZXQgYWNjb3VudCdzIGJhbGFuY2UNCiAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gQWRkKGJhbGFuY2VzW190b10sIF92YWx1ZSk7DQogICAgICAgICAgLy9EZWR1Y3QgQk9QVCBhbW91bnQgZnJvbSBfZnJvbSBhY2NvdW50DQogICAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gU3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsNCiAgICAgICAgICAvL0RlZHVjdCBBdXRob3JpemVkIGFtb3VudCBmb3Igc3BlbmRlcg0KICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gU3ViKF9hbGxvd2FuY2UsIF92YWx1ZSk7DQogICAgICAgICAgLy9FbWl0IGV2ZW50IGZvciBUcmFuc2Zlcg0KICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgDQogICAgICAvL0dldCBCT1BUIGJhbGFuY2UgZm9yIHByb3ZpZGVkIGFkZHJlc3MNCiAgICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7DQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICAgICAgfQ0KICAgICAgDQogICAgICAvL0FkZCBzcGVuZGVyIHRvIGF1dGhvcml6ZSBmb3Igc3BlbmRpbmcgc3BlY2lmaWVkIGFtb3VudCBvZiBCT1BUIA0KICAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICAgICAgLy9FbWl0IGV2ZW50IGZvciBhcHByb3ZhbCBwcm92aWRlZCB0byBzcGVuZGVyDQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgLy9HZXQgQk9QVCBhbW91bnQgdGhhdCBzcGVuZGVyIGNhbiBzcGVuZCBmcm9tIHByb3ZpZGVkIG93bmVyJ3MgYWNjb3VudCANCiAgICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsNCiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogICAgICB9DQogICAgICANCiAgICAgICAvKgkNCiAgICAgICAqIEZhaWxzYWZlIGRyYWluDQogICAgICAgKi8NCiAgICAJZnVuY3Rpb24gZHJhaW4oKSBvbmx5T3duZXIgew0KICAgIAkJb3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpOw0KICAgIAl9DQoJDQogICAgCWZ1bmN0aW9uKCkgcGF5YWJsZSANCiAgICAJeyAgIA0KICAgIAkgICAgaWYoc3RvcHBlZCAmJiBtc2cuc2VuZGVyICE9IG93bmVyKQ0KICAgIAkgICAgcmV2ZXJ0KCk7DQogICAgCSAgICAgZWxzZSBpZihtc2cuc2VuZGVyID09IG93bmVyKQ0KICAgIAkgICAgew0KICAgIAkgICAgICAgIHByb2ZpdF9zZW50ID0gbXNnLnZhbHVlOw0KICAgIAkgICAgfQ0KICAgIAkgICBlbHNlIGlmKG5vdz49cHJlX2ljb19zdGFydCAmJiBub3c8PXByZV9pY29fZW5kKQ0KICAgIAkgICAgew0KICAgIAkgICAgICAgIHVpbnQgY2hlY2sgPSBiYWxhbmNlc1tvd25lcl0tKCg0MDAqbXNnLnZhbHVlKS8xMDAwMDAwMDAwMCk7DQogICAgCSAgICAgICAgaWYoY2hlY2sgPj0gMTkwMDAwMDAwMDAwMDAwMCkNCiAgICAgICAgICAgICAgICBwcmVfaWNvKG1zZy5zZW5kZXIsbXNnLnZhbHVlKTsNCiAgICAJICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG5vdz49aWNvX3N0YXJ0ICYmIG5vdzxpY29fZW5kKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG1haW5faWNvKG1zZy5zZW5kZXIsbXNnLnZhbHVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICB9DQogICAgICAgDQogICAgICAgZnVuY3Rpb24gcHJlX2ljbyhhZGRyZXNzIHNlbmRlciwgdWludCB2YWx1ZSlwYXlhYmxlDQogICAgICAgew0KICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyKzE7DQoJICAgICAgaW52ZXN0b3JbY291bnRlcl09c2VuZGVyOw0KICAgICAgICAgIHdlaXJlY2VpdmVkW2NvdW50ZXJdPXZhbHVlOw0KICAgICAgICAgIG9wdHNTZW50W2NvdW50ZXJdID0gKDQwMCp2YWx1ZSkvMTAwMDAwMDAwMDA7DQogICAgICAgICAgYmFsYW5jZXNbb3duZXJdPWJhbGFuY2VzW293bmVyXS1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICBiYWxhbmNlc1tpbnZlc3Rvcltjb3VudGVyXV0rPW9wdHNTZW50W2NvdW50ZXJdOw0KICAgICAgICAgIHByZWljbyhjb3VudGVyLGludmVzdG9yW2NvdW50ZXJdLHdlaXJlY2VpdmVkW2NvdW50ZXJdLG9wdHNTZW50W2NvdW50ZXJdKTsNCiAgICAgICB9DQogICAgICAgDQogICAgICAgZnVuY3Rpb24gIG1haW5faWNvKGFkZHJlc3Mgc2VuZGVyLCB1aW50IHZhbHVlKXBheWFibGUNCiAgICAgICB7DQogICAgICAgICAgIGlmKG5vdyA+PSBpY29fc3RhcnQgJiYgbm93IDw9IChpY29fc3RhcnQgKyA3IGRheXMpKSAvLzIwJSBkaXNjb3VudCBvbiBCT1BUDQogICAgICAgICAgIHsNCiAgICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIrMTsNCiAgICAJICAgICAgaW52ZXN0b3JbY291bnRlcl09c2VuZGVyOw0KICAgICAgICAgICAgICB3ZWlyZWNlaXZlZFtjb3VudGVyXT12YWx1ZTsNCiAgICAgICAgICAgICAgb3B0c1NlbnRbY291bnRlcl0gPSAoMjUwKnZhbHVlKS8xMDAwMDAwMDAwMDsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdPWJhbGFuY2VzW293bmVyXS1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbaW52ZXN0b3JbY291bnRlcl1dKz1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgaWNvKGNvdW50ZXIsaW52ZXN0b3JbY291bnRlcl0sd2VpcmVjZWl2ZWRbY291bnRlcl0sb3B0c1NlbnRbY291bnRlcl0pOw0KICAgICAgICAgICB9DQogICAgICAgICAgIGVsc2UgaWYgKG5vdyA+PSAoaWNvX3N0YXJ0ICsgNyBkYXlzKSAmJiBub3cgPD0gKGljb19zdGFydCArIDE0IGRheXMpKSAvLzEwJSBkaXNjb3VudCBvbiBCT1BUDQogICAgICAgICAgIHsNCiAgICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIrMTsNCiAgICAJICAgICAgaW52ZXN0b3JbY291bnRlcl09c2VuZGVyOw0KICAgICAgICAgICAgICB3ZWlyZWNlaXZlZFtjb3VudGVyXT12YWx1ZTsNCiAgICAgICAgICAgICAgb3B0c1NlbnRbY291bnRlcl0gPSAoMjIwKnZhbHVlKS8xMDAwMDAwMDAwMDsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdPWJhbGFuY2VzW293bmVyXS1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbaW52ZXN0b3JbY291bnRlcl1dKz1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgaWNvKGNvdW50ZXIsaW52ZXN0b3JbY291bnRlcl0sd2VpcmVjZWl2ZWRbY291bnRlcl0sb3B0c1NlbnRbY291bnRlcl0pOw0KICAgICAgICAgICB9DQogICAgICAgICAgIGVsc2UgaWYgKG5vdyA+PSAoaWNvX3N0YXJ0ICsgMTQgZGF5cykgJiYgbm93IDw9IChpY29fc3RhcnQgKyAzMSBkYXlzKSkgLy9ubyBkaXNjb3VudCBvbiBCT1BUDQogICAgICAgICAgIHsNCiAgICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIrMTsNCiAgICAJICAgICAgaW52ZXN0b3JbY291bnRlcl09c2VuZGVyOw0KICAgICAgICAgICAgICB3ZWlyZWNlaXZlZFtjb3VudGVyXT12YWx1ZTsNCiAgICAgICAgICAgICAgb3B0c1NlbnRbY291bnRlcl0gPSAoMjAwKnZhbHVlKS8xMDAwMDAwMDAwMDsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdPWJhbGFuY2VzW293bmVyXS1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbaW52ZXN0b3JbY291bnRlcl1dKz1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgaWNvKGNvdW50ZXIsaW52ZXN0b3JbY291bnRlcl0sd2VpcmVjZWl2ZWRbY291bnRlcl0sb3B0c1NlbnRbY291bnRlcl0pOw0KICAgICAgICAgICB9DQogICAgICAgfQ0KICAgICAgIA0KICAgICAgIGZ1bmN0aW9uIHN0YXJ0SUNPKClvbmx5T3duZXINCiAgICAgICB7DQogICAgICAgICAgIGljb19zdGFydCA9IG5vdzsNCiAgICAgICAgICAgaWNvX2VuZD1pY29fc3RhcnQgKyAzMSBkYXlzOw0KICAgICAgICAgICBwcmVfaWNvX3N0YXJ0ID0gMDsNCiAgICAgICAgICAgcHJlX2ljb19lbmQgPSAwOw0KICAgICAgICAgICANCiAgICAgICB9DQogICAgICAgDQogICAgICANCiAgICAgICAgZnVuY3Rpb24gZW5kSUNPKClvbmx5T3duZXINCiAgICAgICB7DQogICAgICAgICAgc3RvcHBlZD10cnVlOw0KICAgICAgICAgIGlmKGJhbGFuY2VzW293bmVyXSA+IDE1MDAwMDAwMDAwMDAwMCkNCiAgICAgICAgICB7DQogICAgICAgICAgICAgIHVpbnQgYnVybmVkVG9rZW5zID0gYmFsYW5jZXNbb3duZXJdLTE1MDAwMDAwMDAwMDAwMDsNCiAgICAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS1idXJuZWRUb2tlbnM7DQogICAgICAgICAgIGJhbGFuY2VzW293bmVyXSA9IDE1MDAwMDAwMDAwMDAwMDsNCiAgICAgICAgICB9DQogICAgICAgfQ0KDQogICAgICAgIHN0cnVjdCBkaXN0cmlidXRpb25TdHJ1Y3QNCiAgICAgICAgew0KICAgICAgICAgICAgdWludCBkaXZpZGVudDsNCiAgICAgICAgICAgIGJvb2wgZGl2aWRlbnRTdGF0dXM7DQogICAgICAgIH0gICANCiAgICAgICAgbWFwcGluZyhhZGRyZXNzID0+IGRpc3RyaWJ1dGlvblN0cnVjdCkgZGl2aWRlbnRzTWFwOw0KICAgICAgICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcylyZXF1ZXN0b3I7DQogICANCiAgICAgICAgIGV2ZW50IGRpdmlkZW50U2VudCh1aW50IHJlcXVlc3ROdW1iZXIsYWRkcmVzcyB0byx1aW50IGRpdmkpOw0KICAgICAgICAgdWludCByZXF1ZXN0Q291bnQ9MDsNCiAgICAgICAgICANCiAgICAgICAgICBmdW5jdGlvbiBkaXN0cmlidXRlKClvbmx5T3duZXINCiAgICAgICAgICB7DQogICAgICAgICAgICAgIGZvcih1aW50IGk9MTsgaSA8PSBjb3VudGVyO2krKykNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGRpdmlkZW50c01hcFtpbnZlc3RvcltpXV0uZGl2aWRlbnQgPSAoYmFsYW5jZU9mKGludmVzdG9yW2ldKSpwcm9maXRfc2VudCkvKHRvdGFsU3VwcGx5KjEwMDAwMDAwMCk7DQogICAgICAgICAgICAgICAgZGl2aWRlbnRzTWFwW2ludmVzdG9yW2ldXS5kaXZpZGVudFN0YXR1cyA9IHRydWU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgIA0KICAgICAgICAgIGZ1bmN0aW9uIHJlcXVlc3REaXZpZGVudCgpcGF5YWJsZQ0KICAgICAgICAgIHsNCiAgICAgICAgICAgICAgcmVxdWVzdENvdW50ID0gcmVxdWVzdENvdW50ICsgMTsNCiAgICAgICAgICAgICAgcmVxdWVzdG9yW3JlcXVlc3RDb3VudF0gPSBtc2cuc2VuZGVyOw0KICAgICAgICAgICAgICAgICAgaWYoZGl2aWRlbnRzTWFwW3JlcXVlc3RvcltyZXF1ZXN0Q291bnRdXS5kaXZpZGVudFN0YXR1cyA9PSB0cnVlKQ0KICAgICAgICAgICAgICAgICAgeyAgIA0KICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZW50U2VudChyZXF1ZXN0Q291bnQscmVxdWVzdG9yW3JlcXVlc3RDb3VudF0sZGl2aWRlbnRzTWFwW3JlcXVlc3RvcltyZXF1ZXN0Q291bnRdXS5kaXZpZGVudCk7DQogICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdG9yW3JlcXVlc3RDb3VudF0uc2VuZChkaXZpZGVudHNNYXBbcmVxdWVzdG9yW3JlcXVlc3RDb3VudF1dLmRpdmlkZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICBkaXZpZGVudHNNYXBbcmVxdWVzdG9yW3JlcXVlc3RDb3VudF1dLmRpdmlkZW50U3RhdHVzID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICANCiAgICAgICAgICB9DQoNCn0='