base 64 content
base64blockoptions3
	^'cHJhZ21hIHNvbGlkaXR5XiAwLjQgLjg7DQoNCg0KY29udHJhY3QgRVJDMjAgew0KDQogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7DQoNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnModWludDI1Nik7DQoNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpOw0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyhib29sIG9rKTsNCg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSByZXR1cm5zKGJvb2wgb2spOw0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyhib29sIG9rKTsNCg0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOw0KDQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7DQoNCn0NCg0KY29udHJhY3QgYmxvY2tvcHRpb25zIGlzIEVSQzIwDQoNCnsNCg0KICAgICAgIC8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovDQogICAgICAvL1RvIHN0b3JlIG5hbWUgZm9yIHRva2VuDQogICAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiYmxvY2tvcHRpb25zIjsNCiAgICANCiAgICAgIC8vVG8gc3RvcmUgc3ltYm9sIGZvciB0b2tlbiAgICAgICANCiAgICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkJPUFQiOw0KICAgIA0KICAgICAgLy9UbyBzdG9yZSBkZWNpbWFsIHBsYWNlcyBmb3IgdG9rZW4NCiAgICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDg7ICAgIA0KICAgIA0KICAgICAgLy9UbyBzdG9yZSBjdXJyZW50IHN1cHBseSBvZiBCT1BUDQogICAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseT0yMDAwMDAwMCAqIDEwMDAwMDAwMDsNCiAgICAgIA0KICAgICAgIHVpbnQgcHJlX2ljb19zdGFydDsNCiAgICAgICB1aW50IHByZV9pY29fZW5kOw0KICAgICAgIHVpbnQgaWNvX3N0YXJ0Ow0KICAgICAgIHVpbnQgaWNvX2VuZDsNCiAgICAgICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgaW52ZXN0b3I7DQogICAgICAgbWFwcGluZyh1aW50ID0+IHVpbnQpIHdlaXJlY2VpdmVkOw0KICAgICAgIG1hcHBpbmcodWludCA9PiB1aW50KSBvcHRzU2VudDsNCiAgICAgIA0KICAgICAgICBldmVudCBwcmVpY28odWludCBjb3VudGVyLGFkZHJlc3MgaW52ZXN0b3IsdWludCB3ZWlyZWNlaXZlZCx1aW50IG9wdHNTZW50KTsNCiAgICAgICAgZXZlbnQgaWNvKHVpbnQgY291bnRlcixhZGRyZXNzIGludmVzdG9yLHVpbnQgd2VpcmVjZWl2ZWQsdWludCBvcHRzU2VudCk7DQogICAgICAgIHVpbnQgY291bnRlcj0wOw0KICAgICAgICB1aW50IHByb2ZpdF9zZW50PTA7DQogICAgICAgIGJvb2wgc3RvcHBlZCA9IGZhbHNlOw0KICAgICAgICANCiAgICAgIGZ1bmN0aW9uIGJsb2Nrb3B0aW9ucygpew0KICAgICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseSA7IC8vdG8gaGFuZGxlIDggZGVjaW1hbCBwbGFjZXMNCiAgICAgICAgICBwcmVfaWNvX3N0YXJ0ID0gbm93Ow0KICAgICAgICAgIHByZV9pY29fZW5kID0gcHJlX2ljb19zdGFydCArIDcgZGF5czsNCiAgICAgICAgICANCiAgICAgICAgfQ0KICAgICAgLy9tYXAgdG8gc3RvcmUgQk9QVCBiYWxhbmNlIGNvcnJlc3BvbmRpbmcgdG8gYWRkcmVzcw0KICAgICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOw0KICAgIA0KICAgICAgLy9UbyBzdG9yZSBzcGVuZGVyIHdpdGggYWxsb3dlZCBhbW91bnQgb2YgQk9QVCB0byBzcGVuZCBjb3JyZXNwb25kaW5nIHRvIEJPUFRzIGhvbGRlcidzIGFjY291bnQNCiAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsNCiAgICANCiAgICAgIC8vb3duZXIgdmFyaWFibGUgdG8gc3RvcmUgY29udHJhY3Qgb3duZXIgYWNjb3VudA0KICAgICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQogICAgICANCiAgICAgIC8vbW9kaWZpZXIgdG8gY2hlY2sgdHJhbnNhY3Rpb24gaW5pdGlhdG9yIGlzIG9ubHkgb3duZXINCiAgICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gb3duZXIpDQogICAgICAgICAgXzsNCiAgICAgIH0NCiAgICANCiAgICAgIC8vb3duZXJzaGlwIGNhbiBiZSB0cmFuc2ZlcnJlZCB0byBwcm92aWRlZCBuZXdPd25lci4gRnVuY3Rpb24gY2FuIG9ubHkgYmUgaW5pdGlhdGVkIGJ5IGNvbnRyYWN0IG93bmVyJ3MgYWNjb3VudA0KICAgICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsNCiAgICAgICAgICBiYWxhbmNlc1tuZXdPd25lcl0gPSBiYWxhbmNlc1tvd25lcl07DQogICAgICAgICAgYmFsYW5jZXNbb3duZXJdPTA7DQogICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAgKiBNdWx0aXBsaWNhdGlvbiB3aXRoIHNhZmV0eSBjaGVjaw0KICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgICB1aW50IGMgPSBhICogYjsNCiAgICAgICAgICAvL2NoZWNrIHJlc3VsdCBzaG91bGQgbm90IGJlIG90aGVyIHdpc2UgdW50aWwgYT0wDQogICAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsNCiAgICAgICAgICByZXR1cm4gYzsNCiAgICAgICAgfQ0KICAgIA0KICAgICAgICAvKioNCiAgICAgICAgKiBEaXZpc2lvbiB3aXRoIHNhZmV0eSBjaGVjaw0KICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgICAvL292ZXJmbG93IGNoZWNrOyBiIG11c3Qgbm90IGJlIDANCiAgICAgICAgICBhc3NlcnQoYiA+IDApOw0KICAgICAgICAgIHVpbnQgYyA9IGEgLyBiOw0KICAgICAgICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOw0KICAgICAgICAgIHJldHVybiBjOw0KICAgICAgICB9DQogICAgDQogICAgICAgIC8qKg0KICAgICAgICAqIFN1YnRyYWN0aW9uIHdpdGggc2FmZXR5IGNoZWNrDQogICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIFN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgICAgIC8vYiBtdXN0IGJlIGdyZWF0ZXIgdGhhdCBhIGFzIHdlIG5lZWQgdG8gc3RvcmUgdmFsdWUgaW4gdW5zaWduZWQgaW50ZWdlcg0KICAgICAgICAgIGFzc2VydChiIDw9IGEpOw0KICAgICAgICAgIHJldHVybiBhIC0gYjsNCiAgICAgICAgfQ0KICAgIA0KICAgICAgICAvKioNCiAgICAgICAgKiBBZGRpdGlvbiB3aXRoIHNhZmV0eSBjaGVjaw0KICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgICB1aW50IGMgPSBhICsgYjsNCiAgICAgICAgICAvL3Jlc3VsdCBtdXN0IGJlIGdyZWF0ZXIgYXMgYSBvciBiIGNhbiBub3QgYmUgbmVnYXRpdmUNCiAgICAgICAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsNCiAgICAgICAgICByZXR1cm4gYzsNCiAgICAgICAgfQ0KICAgIA0KICAgICAgLyoqDQogICAgICAgICogYXNzZXJ0IHVzZWQgaW4gZGlmZmVyZW50IE1hdGggZnVuY3Rpb25zDQogICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgew0KICAgICAgICAgIGlmICghYXNzZXJ0aW9uKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICANCiAgICAvL0ltcGxlbWVudGF0aW9uIGZvciB0cmFuc2ZlcnJpbmcgQk9QVCB0byBwcm92aWRlZCBhZGRyZXNzIA0KICAgICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sKXsNCg0KICAgICAgICB1aW50IGNoZWNrID0gYmFsYW5jZXNbb3duZXJdIC0gX3ZhbHVlOw0KICAgICAgICBpZihtc2cuc2VuZGVyID09IG93bmVyICYmIG5vdz49cHJlX2ljb19zdGFydCAmJiBub3c8PXByZV9pY29fZW5kICYmIGNoZWNrIDwgMTkwMDAwMDAwMDAwMDAwMCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYobXNnLnNlbmRlciA9PW93bmVyICYmIG5vdz49cHJlX2ljb19lbmQgJiYgbm93PD0ocHJlX2ljb19lbmQgKyAxNiBkYXlzKSAmJiBjaGVjayA8IDE4NTAwMDAwMDAwMDAwMDApDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmKG1zZy5zZW5kZXIgPT0gb3duZXIgJiYgY2hlY2sgPCAxNTAwMDAwMDAwMDAwMDAgJiYgbm93IDwgaWNvX3N0YXJ0ICsgMTgwIGRheXMpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChtc2cuc2VuZGVyID09IG93bmVyICYmIGNoZWNrIDwgMTAwMDAwMDAwMDAwMDAwICYmIG5vdyA8IGljb19zdGFydCArIDM2MCBkYXlzKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAobXNnLnNlbmRlciA9PSBvd25lciAmJiBjaGVjayA8IDUwMDAwMDAwMDAwMDAwICYmIG5vdyA8IGljb19zdGFydCArIDU0MCBkYXlzKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgLy9DaGVjayBwcm92aWRlZCBCT1BUIHNob3VsZCBub3QgYmUgMA0KICAgICAgIGVsc2UgaWYgKF92YWx1ZSA+IDApIHsNCiAgICAgICAgICAvL2RlZHVjdCBPUFRTIGFtb3VudCBmcm9tIHRyYW5zYWN0aW9uIGluaXRpYXRvcg0KICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLF92YWx1ZSk7DQogICAgICAgICAgLy9BZGQgT1BUUyB0byBiYWxhY2Ugb2YgdGFyZ2V0IGFjY291bnQNCiAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gQWRkKGJhbGFuY2VzW190b10sX3ZhbHVlKTsNCiAgICAgICAgICAvL0VtaXQgZXZlbnQgZm9yIHRyYW5zZmVycmluZyBCT1BUDQogICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGVsc2V7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICB9DQogICAgICANCiAgICAgIC8vVHJhbnNmZXIgaW5pdGlhdGVkIGJ5IHNwZW5kZXIgDQogICAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7DQogICAgDQogICAgICAgIC8vQ2hlY2sgcHJvdmlkZWQgQk9QVCBzaG91bGQgbm90IGJlIDANCiAgICAgICAgaWYgKF92YWx1ZSA+IDApIHsNCiAgICAgICAgICAvL0dldCBhbW91bnQgb2YgQk9QVCBmb3Igd2hpY2ggc3BlbmRlciBpcyBhdXRob3JpemVkDQogICAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsNCiAgICAgICAgICAvL0FkZCBhbW91bnQgb2YgQk9QVCBpbiB0cmFyZ2V0IGFjY291bnQncyBiYWxhbmNlDQogICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IEFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOw0KICAgICAgICAgIC8vRGVkdWN0IEJPUFQgYW1vdW50IGZyb20gX2Zyb20gYWNjb3VudA0KICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IFN1YihiYWxhbmNlc1tfZnJvbV0sIF92YWx1ZSk7DQogICAgICAgICAgLy9EZWR1Y3QgQXV0aG9yaXplZCBhbW91bnQgZm9yIHNwZW5kZXINCiAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IFN1YihfYWxsb3dhbmNlLCBfdmFsdWUpOw0KICAgICAgICAgIC8vRW1pdCBldmVudCBmb3IgVHJhbnNmZXINCiAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIA0KICAgICAgLy9HZXQgQk9QVCBiYWxhbmNlIGZvciBwcm92aWRlZCBhZGRyZXNzDQogICAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgew0KICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgLy9BZGQgc3BlbmRlciB0byBhdXRob3JpemUgZm9yIHNwZW5kaW5nIHNwZWNpZmllZCBhbW91bnQgb2YgQk9QVCANCiAgICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgICAgIC8vRW1pdCBldmVudCBmb3IgYXBwcm92YWwgcHJvdmlkZWQgdG8gc3BlbmRlcg0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQogICAgICANCiAgICAgIC8vR2V0IEJPUFQgYW1vdW50IHRoYXQgc3BlbmRlciBjYW4gc3BlbmQgZnJvbSBwcm92aWRlZCBvd25lcidzIGFjY291bnQgDQogICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7DQogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOw0KICAgICAgfQ0KICAgICAgDQogICAgICAgLyoJDQogICAgICAgKiBGYWlsc2FmZSBkcmFpbg0KICAgICAgICovDQogICAgCWZ1bmN0aW9uIGRyYWluKCkgb25seU93bmVyIHsNCiAgICAJCW93bmVyLnNlbmQodGhpcy5iYWxhbmNlKTsNCiAgICAJfQ0KCQ0KICAgIAlmdW5jdGlvbigpIHBheWFibGUgDQogICAgCXsgICANCiAgICAJICAgIGlmKCFzdG9wcGVkKQ0KICAgIAkgICAgcmV2ZXJ0KCk7DQogICAgCSAgICAgZWxzZSBpZihtc2cuc2VuZGVyID09IG93bmVyKQ0KICAgIAkgICAgew0KICAgIAkgICAgICAgIHByb2ZpdF9zZW50ID0gbXNnLnZhbHVlOw0KICAgIAkgICAgfQ0KICAgIAkgICBlbHNlIGlmKG5vdz49cHJlX2ljb19zdGFydCAmJiBub3c8PXByZV9pY29fZW5kKQ0KICAgIAkgICAgew0KICAgIAkgICAgICAgIHVpbnQgY2hlY2sgPSBiYWxhbmNlc1tvd25lcl0tKCg0MDAqbXNnLnZhbHVlKS8xMDAwMDAwMDAwMCk7DQogICAgCSAgICAgICAgaWYoY2hlY2sgPj0gMTkwMDAwMDAwMDAwMDAwMCkNCiAgICAgICAgICAgICAgICBwcmVfaWNvKG1zZy5zZW5kZXIsbXNnLnZhbHVlKTsNCiAgICAJICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG5vdz49aWNvX3N0YXJ0ICYmIG5vdzxpY29fZW5kKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG1haW5faWNvKG1zZy5zZW5kZXIsbXNnLnZhbHVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICB9DQogICAgICAgDQogICAgICAgZnVuY3Rpb24gcHJlX2ljbyhhZGRyZXNzIHNlbmRlciwgdWludCB2YWx1ZSlwYXlhYmxlDQogICAgICAgew0KICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyKzE7DQoJICAgICAgaW52ZXN0b3JbY291bnRlcl09c2VuZGVyOw0KICAgICAgICAgIHdlaXJlY2VpdmVkW2NvdW50ZXJdPXZhbHVlOw0KICAgICAgICAgIG9wdHNTZW50W2NvdW50ZXJdID0gKDQwMCp2YWx1ZSkvMTAwMDAwMDAwMDA7DQogICAgICAgICAgYmFsYW5jZXNbb3duZXJdPWJhbGFuY2VzW293bmVyXS1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICBiYWxhbmNlc1tpbnZlc3Rvcltjb3VudGVyXV0rPW9wdHNTZW50W2NvdW50ZXJdOw0KICAgICAgICAgIHByZWljbyhjb3VudGVyLGludmVzdG9yW2NvdW50ZXJdLHdlaXJlY2VpdmVkW2NvdW50ZXJdLG9wdHNTZW50W2NvdW50ZXJdKTsNCiAgICAgICB9DQogICAgICAgDQogICAgICAgZnVuY3Rpb24gIG1haW5faWNvKGFkZHJlc3Mgc2VuZGVyLCB1aW50IHZhbHVlKXBheWFibGUNCiAgICAgICB7DQogICAgICAgICAgIGlmKG5vdyA+PSBpY29fc3RhcnQgJiYgbm93IDw9IChpY29fc3RhcnQgKyA3IGRheXMpKSAvLzIwJSBkaXNjb3VudCBvbiBCT1BUDQogICAgICAgICAgIHsNCiAgICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIrMTsNCiAgICAJICAgICAgaW52ZXN0b3JbY291bnRlcl09c2VuZGVyOw0KICAgICAgICAgICAgICB3ZWlyZWNlaXZlZFtjb3VudGVyXT12YWx1ZTsNCiAgICAgICAgICAgICAgb3B0c1NlbnRbY291bnRlcl0gPSAoMjUwKnZhbHVlKS8xMDAwMDAwMDAwMDsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdPWJhbGFuY2VzW293bmVyXS1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbaW52ZXN0b3JbY291bnRlcl1dKz1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgaWNvKGNvdW50ZXIsaW52ZXN0b3JbY291bnRlcl0sd2VpcmVjZWl2ZWRbY291bnRlcl0sb3B0c1NlbnRbY291bnRlcl0pOw0KICAgICAgICAgICB9DQogICAgICAgICAgIGVsc2UgaWYgKG5vdyA+PSAoaWNvX3N0YXJ0ICsgNyBkYXlzKSAmJiBub3cgPD0gKGljb19zdGFydCArIDE0IGRheXMpKSAvLzEwJSBkaXNjb3VudCBvbiBCT1BUDQogICAgICAgICAgIHsNCiAgICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIrMTsNCiAgICAJICAgICAgaW52ZXN0b3JbY291bnRlcl09c2VuZGVyOw0KICAgICAgICAgICAgICB3ZWlyZWNlaXZlZFtjb3VudGVyXT12YWx1ZTsNCiAgICAgICAgICAgICAgb3B0c1NlbnRbY291bnRlcl0gPSAoMjIwKnZhbHVlKS8xMDAwMDAwMDAwMDsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdPWJhbGFuY2VzW293bmVyXS1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbaW52ZXN0b3JbY291bnRlcl1dKz1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgaWNvKGNvdW50ZXIsaW52ZXN0b3JbY291bnRlcl0sd2VpcmVjZWl2ZWRbY291bnRlcl0sb3B0c1NlbnRbY291bnRlcl0pOw0KICAgICAgICAgICB9DQogICAgICAgICAgIGVsc2UgaWYgKG5vdyA+PSAoaWNvX3N0YXJ0ICsgMTQgZGF5cykgJiYgbm93IDw9IChpY29fc3RhcnQgKyAzMSBkYXlzKSkgLy9ubyBkaXNjb3VudCBvbiBCT1BUDQogICAgICAgICAgIHsNCiAgICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIrMTsNCiAgICAJICAgICAgaW52ZXN0b3JbY291bnRlcl09c2VuZGVyOw0KICAgICAgICAgICAgICB3ZWlyZWNlaXZlZFtjb3VudGVyXT12YWx1ZTsNCiAgICAgICAgICAgICAgb3B0c1NlbnRbY291bnRlcl0gPSAoMjAwKnZhbHVlKS8xMDAwMDAwMDAwMDsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdPWJhbGFuY2VzW293bmVyXS1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbaW52ZXN0b3JbY291bnRlcl1dKz1vcHRzU2VudFtjb3VudGVyXTsNCiAgICAgICAgICAgICAgaWNvKGNvdW50ZXIsaW52ZXN0b3JbY291bnRlcl0sd2VpcmVjZWl2ZWRbY291bnRlcl0sb3B0c1NlbnRbY291bnRlcl0pOw0KICAgICAgICAgICB9DQogICAgICAgfQ0KICAgICAgIA0KICAgICAgIGZ1bmN0aW9uIHN0YXJ0SUNPKClvbmx5T3duZXINCiAgICAgICB7DQogICAgICAgICAgIGljb19zdGFydCA9IG5vdzsNCiAgICAgICAgICAgaWNvX2VuZD1pY29fc3RhcnQgKyAzMSBkYXlzOw0KICAgICAgICAgICBwcmVfaWNvX3N0YXJ0ID0gMDsNCiAgICAgICAgICAgcHJlX2ljb19lbmQgPSAwOw0KICAgICAgICAgICANCiAgICAgICB9DQogICAgICAgDQogICAgICANCiAgICAgICAgZnVuY3Rpb24gZW5kSUNPKClvbmx5T3duZXINCiAgICAgICB7DQogICAgICAgICAgc3RvcHBlZD10cnVlOw0KICAgICAgICAgIGlmKGJhbGFuY2VzW293bmVyXSA+IDIwMDAwMDApDQogICAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gMjAwMDAwMDsNCiAgICAgICAgICAgDQogICAgICAgfQ0KDQogICAgICAgIHN0cnVjdCBkaXN0cmlidXRpb25TdHJ1Y3QNCiAgICAgICAgew0KICAgICAgICAgICAgdWludCBkaXZpZGVudDsNCiAgICAgICAgICAgIGJvb2wgZGl2aWRlbnRTdGF0dXM7DQogICAgICAgIH0gICANCiAgICAgICAgbWFwcGluZyhhZGRyZXNzID0+IGRpc3RyaWJ1dGlvblN0cnVjdCkgZGl2aWRlbnRzTWFwOw0KICAgICAgICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcylyZXF1ZXN0b3I7DQogICANCiAgICAgICAgIGV2ZW50IGRpdmlkZW50U2VudCh1aW50IHJlcXVlc3ROdW1iZXIsYWRkcmVzcyB0byx1aW50IGRpdmkpOw0KICAgICAgICAgdWludCByZXF1ZXN0Q291bnQ9MDsNCiAgICAgICAgICANCiAgICAgICAgICBmdW5jdGlvbiBkaXN0cmlidXRlKClvbmx5T3duZXINCiAgICAgICAgICB7DQogICAgICAgICAgICAgIGZvcih1aW50IGk9MTsgaSA8PSBjb3VudGVyO2krKykNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGRpdmlkZW50c01hcFtpbnZlc3RvcltpXV0uZGl2aWRlbnQgPSAoYmFsYW5jZU9mKGludmVzdG9yW2ldKSpwcm9maXRfc2VudCkvKHRvdGFsU3VwcGx5KjEwMDAwMDAwMCk7DQogICAgICAgICAgICAgICAgZGl2aWRlbnRzTWFwW2ludmVzdG9yW2ldXS5kaXZpZGVudFN0YXR1cyA9IHRydWU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgIA0KICAgICAgICAgIGZ1bmN0aW9uIHJlcXVlc3REaXZpZGVudCgpcGF5YWJsZQ0KICAgICAgICAgIHsNCiAgICAgICAgICAgICAgcmVxdWVzdENvdW50ID0gcmVxdWVzdENvdW50ICsgMTsNCiAgICAgICAgICAgICAgcmVxdWVzdG9yW3JlcXVlc3RDb3VudF0gPSBtc2cuc2VuZGVyOw0KICAgICAgICAgICAgICAgICAgaWYoZGl2aWRlbnRzTWFwW3JlcXVlc3RvcltyZXF1ZXN0Q291bnRdXS5kaXZpZGVudFN0YXR1cyA9PSB0cnVlKQ0KICAgICAgICAgICAgICAgICAgeyAgIA0KICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZW50U2VudChyZXF1ZXN0Q291bnQscmVxdWVzdG9yW3JlcXVlc3RDb3VudF0sZGl2aWRlbnRzTWFwW3JlcXVlc3RvcltyZXF1ZXN0Q291bnRdXS5kaXZpZGVudCk7DQogICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdG9yW3JlcXVlc3RDb3VudF0uc2VuZChkaXZpZGVudHNNYXBbcmVxdWVzdG9yW3JlcXVlc3RDb3VudF1dLmRpdmlkZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICBkaXZpZGVudHNNYXBbcmVxdWVzdG9yW3JlcXVlc3RDb3VudF1dLmRpdmlkZW50U3RhdHVzID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICANCiAgICAgICAgICB9DQoNCn0='