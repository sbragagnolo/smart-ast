base 64 content
base64builderCongress
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC40Ow0KDQovKioNCiAqIEB0aXRsZSBDb250cmFjdCBmb3Igb2JqZWN0IHRoYXQgaGF2ZSBhbiBvd25lcg0KICovDQpjb250cmFjdCBPd25lZCB7DQogICAgLyoqDQogICAgICogQ29udHJhY3Qgb3duZXIgYWRkcmVzcw0KICAgICAqLw0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQogICAgLyoqDQogICAgICogQGRldiBEZWxlZ2F0ZSBjb250cmFjdCB0byBhbm90aGVyIHBlcnNvbg0KICAgICAqIEBwYXJhbSBfb3duZXIgTmV3IG93bmVyIGFkZHJlc3MgDQogICAgICovDQogICAgZnVuY3Rpb24gc2V0T3duZXIoYWRkcmVzcyBfb3duZXIpIG9ubHlPd25lcg0KICAgIHsgb3duZXIgPSBfb3duZXI7IH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgT3duZXIgY2hlY2sgbW9kaWZpZXINCiAgICAgKi8NCiAgICBtb2RpZmllciBvbmx5T3duZXIgeyBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7IF87IH0NCn0NCg0KLyoqDQogKiBAdGl0bGUgQ29tbW9uIHBhdHRlcm4gZm9yIGRlc3Ryb3lhYmxlIGNvbnRyYWN0cyANCiAqLw0KY29udHJhY3QgRGVzdHJveWFibGUgew0KICAgIGFkZHJlc3MgcHVibGljIGhhbW1lcjsNCg0KICAgIC8qKg0KICAgICAqIEBkZXYgSGFtbWVyIHNldHRlcg0KICAgICAqIEBwYXJhbSBfaGFtbWVyIE5ldyBoYW1tZXIgYWRkcmVzcw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNldEhhbW1lcihhZGRyZXNzIF9oYW1tZXIpIG9ubHlIYW1tZXINCiAgICB7IGhhbW1lciA9IF9oYW1tZXI7IH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgRGVzdHJveSBjb250cmFjdCBhbmQgc2NydWIgYSBkYXRhDQogICAgICogQG5vdGljZSBPbmx5IGhhbW1lciBjYW4gY2FsbCBpdCANCiAgICAgKi8NCiAgICBmdW5jdGlvbiBkZXN0cm95KCkgb25seUhhbW1lcg0KICAgIHsgc3VpY2lkZShtc2cuc2VuZGVyKTsgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBIYW1tZXIgY2hlY2sgbW9kaWZpZXINCiAgICAgKi8NCiAgICBtb2RpZmllciBvbmx5SGFtbWVyIHsgaWYgKG1zZy5zZW5kZXIgIT0gaGFtbWVyKSB0aHJvdzsgXzsgfQ0KfQ0KDQovKioNCiAqIEB0aXRsZSBHZW5lcmljIG93bmVkIGRlc3Ryb3lhYmxlIGNvbnRyYWN0DQogKi8NCmNvbnRyYWN0IE9iamVjdCBpcyBPd25lZCwgRGVzdHJveWFibGUgew0KICAgIGZ1bmN0aW9uIE9iamVjdCgpIHsNCiAgICAgICAgb3duZXIgID0gbXNnLnNlbmRlcjsNCiAgICAgICAgaGFtbWVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQp9DQoNCi8vIFN0YW5kYXJkIHRva2VuIGludGVyZmFjZSAoRVJDIDIwKQ0KLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQpjb250cmFjdCBFUkMyMCANCnsNCi8vIEZ1bmN0aW9uczoNCiAgICAvLy8gQHJldHVybiB0b3RhbCBhbW91bnQgb2YgdG9rZW5zDQogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7DQoNCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkDQogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOw0KDQogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYA0KICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQNCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkDQogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKTsNCg0KICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYA0KICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcg0KICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQNCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkDQogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCk7DQoNCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMNCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2Vucw0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2Ygd2VpIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2Zlcg0KICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpOw0KDQogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2Vucw0KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zDQogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudA0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7DQoNCi8vIEV2ZW50czoNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCn0NCg0KLyoqDQogKiBAdGl0bGUgQXNzZXQgcmVjaXBpZW50IGludGVyZmFjZQ0KICovDQpjb250cmFjdCBSZWNpcGllbnQgew0KICAgIC8qKg0KICAgICAqIEBkZXYgT24gcmVjZWl2ZWQgZXRoZXJzDQogICAgICogQHBhcmFtIHNlbmRlciBFdGhlciBzZW5kZXINCiAgICAgKiBAcGFyYW0gYW1vdW50IEV0aGVyIHZhbHVlDQogICAgICovDQogICAgZXZlbnQgUmVjZWl2ZWRFdGhlcihhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBpbmRleGVkIGFtb3VudCk7DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IE9uIHJlY2VpdmVkIGN1c3RvbSBFUkMyMCB0b2tlbnMNCiAgICAgKiBAcGFyYW0gZnJvbSBUb2tlbiBzZW5kZXINCiAgICAgKiBAcGFyYW0gdmFsdWUgVG9rZW4gdmFsdWUNCiAgICAgKiBAcGFyYW0gdG9rZW4gVG9rZW4gY29udHJhY3QgYWRkcmVzcw0KICAgICAqIEBwYXJhbSBleHRyYURhdGEgQ3VzdG9tIGFkZGl0aW9uYWwgZGF0YQ0KICAgICAqLw0KICAgIGV2ZW50IFJlY2VpdmVkVG9rZW5zKGFkZHJlc3MgaW5kZXhlZCBmcm9tLA0KICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgaW5kZXhlZCB2YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXMgZXh0cmFEYXRhKTsNCg0KICAgIC8qKg0KICAgICAqIEBkZXYgUmVjZWl2ZSBhcHByb3ZlZCBFUkMyMCB0b2tlbnMNCiAgICAgKiBAcGFyYW0gX2Zyb20gU3BlbmRlciBhZGRyZXNzDQogICAgICogQHBhcmFtIF92YWx1ZSBUcmFuc2FjdGlvbiB2YWx1ZQ0KICAgICAqIEBwYXJhbSBfdG9rZW4gRVJDMjAgdG9rZW4gY29udHJhY3QgYWRkcmVzcw0KICAgICAqIEBwYXJhbSBfZXh0cmFEYXRhIEN1c3RvbSBhZGRpdGlvbmFsIGRhdGENCiAgICAgKi8NCiAgICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVSQzIwIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSkgew0KICAgICAgICBpZiAoIV90b2tlbi50cmFuc2ZlckZyb20oX2Zyb20sIHRoaXMsIF92YWx1ZSkpIHRocm93Ow0KICAgICAgICBSZWNlaXZlZFRva2VucyhfZnJvbSwgX3ZhbHVlLCBfdG9rZW4sIF9leHRyYURhdGEpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgQ2F0Y2ggc2VuZGVkIHRvIGNvbnRyYWN0IGV0aGVycw0KICAgICAqLw0KICAgIGZ1bmN0aW9uICgpIHBheWFibGUNCiAgICB7IFJlY2VpdmVkRXRoZXIobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgfQ0KfQ0KDQovKioNCiAqIEB0aXRsZSBJbXByb3ZlZCBjb25ncmVzcyBjb250cmFjdCBieSBFdGhlcmV1bSBGb3VuZGF0aW9uDQogKiBAZGV2IGh0dHBzOi8vd3d3LmV0aGVyZXVtLm9yZy9kYW8jdGhlLWJsb2NrY2hhaW4tY29uZ3Jlc3MgDQogKi8NCmNvbnRyYWN0IENvbmdyZXNzIGlzIE9iamVjdCwgUmVjaXBpZW50IHsNCiAgICAvKioNCiAgICAgKiBAZGV2IE1pbmltYWwgcXVvcnVtIHZhbHVlDQogICAgICovDQogICAgdWludDI1NiBwdWJsaWMgbWluaW11bVF1b3J1bTsNCg0KICAgIC8qKg0KICAgICAqIEBkZXYgRHVyYXRpb24gb2YgZGViYXRlcw0KICAgICAqLw0KICAgIHVpbnQyNTYgcHVibGljIGRlYmF0aW5nUGVyaW9kSW5NaW51dGVzOw0KDQogICAgLyoqDQogICAgICogQGRldiBNYWpvcml0eSBtYXJnaW4gaXMgdXNlZCBpbiB2b3RpbmcgcHJvY2VkdXJlIA0KICAgICAqLw0KICAgIGludDI1NiBwdWJsaWMgbWFqb3JpdHlNYXJnaW47DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IEFyY2hpdmUgb2YgYWxsIG1lbWJlciBwcm9wb3NhbHMgDQogICAgICovDQogICAgUHJvcG9zYWxbXSBwdWJsaWMgcHJvcG9zYWxzOw0KDQogICAgLyoqDQogICAgICogQGRldiBDb3VudCBvZiBwcm9wb3NhbHMgaW4gYXJjaGl2ZSANCiAgICAgKi8NCiAgICBmdW5jdGlvbiBudW1Qcm9wb3NhbHMoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KQ0KICAgIHsgcmV0dXJuIHByb3Bvc2Fscy5sZW5ndGg7IH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgQ29uZ3Jlc3MgbWVtYmVycyBsaXN0DQogICAgICovDQogICAgTWVtYmVyW10gcHVibGljIG1lbWJlcnM7DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IEdldCBtZW1iZXIgaWRlbnRpZmllciBieSBhY2NvdW50IGFkZHJlc3MNCiAgICAgKi8NCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIG1lbWJlcklkOw0KDQogICAgLyoqDQogICAgICogQGRldiBPbiBwcm9wb3NhbCBhZGRlZCANCiAgICAgKiBAcGFyYW0gcHJvcG9zYWwgUHJvcG9zYWwgaWRlbnRpZmllcg0KICAgICAqIEBwYXJhbSByZWNpcGllbnQgRXRoZXIgcmVjaXBpZW50DQogICAgICogQHBhcmFtIGFtb3VudCBBbW91bnQgb2Ygd2VpIHRvIHRyYW5zZmVyDQogICAgICovDQogICAgZXZlbnQgUHJvcG9zYWxBZGRlZCh1aW50MjU2IGluZGV4ZWQgcHJvcG9zYWwsDQogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcmVjaXBpZW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBpbmRleGVkIGFtb3VudCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBkZXNjcmlwdGlvbik7DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IE9uIHZvdGUgYnkgbWVtYmVyIGFjY2VwdGVkDQogICAgICogQHBhcmFtIHByb3Bvc2FsIFByb3Bvc2FsIGlkZW50aWZpZXINCiAgICAgKiBAcGFyYW0gcG9zaXRpb24gSXMgcHJvcG9zYWwgYWNjZXB0ZWQgYnkgbWVtZWJlcg0KICAgICAqIEBwYXJhbSB2b3RlciBDb25ncmVzcyBtZW1lYmVyIGFjY291bnQgYWRkcmVzcw0KICAgICAqIEBwYXJhbSBqdXN0aWZpY2F0aW9uIE1lbWJlciBjb21tZW50DQogICAgICovDQogICAgZXZlbnQgVm90ZWQodWludDI1NiBpbmRleGVkIHByb3Bvc2FsLA0KICAgICAgICAgICAgICAgIGJvb2wgICAgaW5kZXhlZCBwb3NpdGlvbiwNCiAgICAgICAgICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdm90ZXIsDQogICAgICAgICAgICAgICAgc3RyaW5nIGp1c3RpZmljYXRpb24pOw0KDQogICAgLyoqDQogICAgICogQGRldiBPbiBQcm9wb3NhbCBjbG9zZWQNCiAgICAgKiBAcGFyYW0gcHJvcG9zYWwgUHJvcG9zYWwgaWRlbnRpZmllcg0KICAgICAqIEBwYXJhbSBxdW9ydW0gTnVtYmVyIG9mIHZvdGVzIA0KICAgICAqIEBwYXJhbSBhY3RpdmUgSXMgcHJvcG9zYWwgcGFzc2VkDQogICAgICovDQogICAgZXZlbnQgUHJvcG9zYWxUYWxsaWVkKHVpbnQyNTYgaW5kZXhlZCBwcm9wb3NhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBpbmRleGVkIHF1b3J1bSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCAgICBpbmRleGVkIGFjdGl2ZSk7DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IE9uIGNoYW5nZWQgbWVtYmVyc2hpcA0KICAgICAqIEBwYXJhbSBtZW1iZXIgQWNjb3VudCBhZGRyZXNzIA0KICAgICAqIEBwYXJhbSBpc01lbWJlciBJcyBhY2NvdW50IG1lbWJlciBub3cNCiAgICAgKi8NCiAgICBldmVudCBNZW1iZXJzaGlwQ2hhbmdlZChhZGRyZXNzIGluZGV4ZWQgbWVtYmVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgICAgaW5kZXhlZCBpc01lbWJlcik7DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IE9uIHZvdGluZyBydWxlcyBjaGFuZ2VkDQogICAgICogQHBhcmFtIG1pbmltdW1RdW9ydW0gTmV3IG1pbmltYWwgY291bnQgb2Ygdm90ZXMNCiAgICAgKiBAcGFyYW0gZGViYXRpbmdQZXJpb2RJbk1pbnV0ZXMgTmV3IGRlYmF0aW5nIGR1cmF0aW9uDQogICAgICogQHBhcmFtIG1ham9yaXR5TWFyZ2luIE5ldyBtYWpvcml0eSBtYXJnaW4gdmFsdWUNCiAgICAgKi8NCiAgICBldmVudCBDaGFuZ2VPZlJ1bGVzKHVpbnQyNTYgaW5kZXhlZCBtaW5pbXVtUXVvcnVtLA0KICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBpbmRleGVkIGRlYmF0aW5nUGVyaW9kSW5NaW51dGVzLA0KICAgICAgICAgICAgICAgICAgICAgICAgaW50MjU2ICBpbmRleGVkIG1ham9yaXR5TWFyZ2luKTsNCg0KICAgIHN0cnVjdCBQcm9wb3NhbCB7DQogICAgICAgIGFkZHJlc3MgcmVjaXBpZW50Ow0KICAgICAgICB1aW50MjU2IGFtb3VudDsNCiAgICAgICAgc3RyaW5nICBkZXNjcmlwdGlvbjsNCiAgICAgICAgdWludDI1NiB2b3RpbmdEZWFkbGluZTsNCiAgICAgICAgYm9vbCAgICBleGVjdXRlZDsNCiAgICAgICAgYm9vbCAgICBwcm9wb3NhbFBhc3NlZDsNCiAgICAgICAgdWludDI1NiBudW1iZXJPZlZvdGVzOw0KICAgICAgICBpbnQyNTYgIGN1cnJlbnRSZXN1bHQ7DQogICAgICAgIGJ5dGVzMzIgcHJvcG9zYWxIYXNoOw0KICAgICAgICBWb3RlW10gIHZvdGVzOw0KICAgICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgdm90ZWQ7DQogICAgfQ0KDQogICAgc3RydWN0IE1lbWJlciB7DQogICAgICAgIGFkZHJlc3MgbWVtYmVyOw0KICAgICAgICBzdHJpbmcgIG5hbWU7DQogICAgICAgIHVpbnQyNTYgbWVtYmVyU2luY2U7DQogICAgfQ0KDQogICAgc3RydWN0IFZvdGUgew0KICAgICAgICBib29sICAgIGluU3VwcG9ydDsNCiAgICAgICAgYWRkcmVzcyB2b3RlcjsNCiAgICAgICAgc3RyaW5nICBqdXN0aWZpY2F0aW9uOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgTW9kaWZpZXIgdGhhdCBhbGxvd3Mgb25seSBzaGFyZWhvbGRlcnMgdG8gdm90ZSBhbmQgY3JlYXRlIG5ldyBwcm9wb3NhbHMNCiAgICAgKi8NCiAgICBtb2RpZmllciBvbmx5TWVtYmVycyB7DQogICAgICAgIGlmIChtZW1iZXJJZFttc2cuc2VuZGVyXSA9PSAwKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IEZpcnN0IHRpbWUgc2V0dXANCiAgICAgKi8NCiAgICBmdW5jdGlvbiBDb25ncmVzcygNCiAgICAgICAgdWludDI1NiBtaW5pbXVtUXVvcnVtRm9yUHJvcG9zYWxzLA0KICAgICAgICB1aW50MjU2IG1pbnV0ZXNGb3JEZWJhdGUsDQogICAgICAgIGludDI1NiAgbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5LA0KICAgICAgICBhZGRyZXNzIGNvbmdyZXNzTGVhZGVyDQogICAgKSB7DQogICAgICAgIGNoYW5nZVZvdGluZ1J1bGVzKG1pbmltdW1RdW9ydW1Gb3JQcm9wb3NhbHMsIG1pbnV0ZXNGb3JEZWJhdGUsIG1hcmdpbk9mVm90ZXNGb3JNYWpvcml0eSk7DQogICAgICAgIC8vIEl04oCZcyBuZWNlc3NhcnkgdG8gYWRkIGFuIGVtcHR5IGZpcnN0IG1lbWJlcg0KICAgICAgICBhZGRNZW1iZXIoMCwgJycpOyAvLyBhbmQgbGV0J3MgYWRkIHRoZSBmb3VuZGVyLCB0byBzYXZlIGEgc3RlcCBsYXRlcg0KICAgICAgICBpZiAoY29uZ3Jlc3NMZWFkZXIgIT0gMCkNCiAgICAgICAgICAgIGFkZE1lbWJlcihjb25ncmVzc0xlYWRlciwgJ1RoZSBGb3VuZGVyJyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBBcHBlbmQgbmV3IGNvbmdyZXNzIG1lbWJlciANCiAgICAgKiBAcGFyYW0gdGFyZ2V0TWVtYmVyIE1lbWJlciBhY2NvdW50IGFkZHJlc3MNCiAgICAgKiBAcGFyYW0gbWVtYmVyTmFtZSBNZW1iZXIgZnVsbCBuYW1lDQogICAgICovDQogICAgZnVuY3Rpb24gYWRkTWVtYmVyKGFkZHJlc3MgdGFyZ2V0TWVtYmVyLCBzdHJpbmcgbWVtYmVyTmFtZSkgb25seU93bmVyIHsNCiAgICAgICAgaWYgKG1lbWJlcklkW3RhcmdldE1lbWJlcl0gIT0gMCkgdGhyb3c7DQoNCiAgICAgICAgbWVtYmVySWRbdGFyZ2V0TWVtYmVyXSA9IG1lbWJlcnMubGVuZ3RoOw0KICAgICAgICBtZW1iZXJzLnB1c2goTWVtYmVyKHttZW1iZXI6ICAgICAgdGFyZ2V0TWVtYmVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJTaW5jZTogbm93LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAgICAgICAgbWVtYmVyTmFtZX0pKTsNCg0KICAgICAgICBNZW1iZXJzaGlwQ2hhbmdlZCh0YXJnZXRNZW1iZXIsIHRydWUpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgUmVtb3ZlIGNvbmdyZXNzIG1lbWJlcg0KICAgICAqIEBwYXJhbSB0YXJnZXRNZW1iZXIgTWVtYmVyIGFjY291bnQgYWRkcmVzcw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHJlbW92ZU1lbWJlcihhZGRyZXNzIHRhcmdldE1lbWJlcikgb25seU93bmVyIHsNCiAgICAgICAgaWYgKG1lbWJlcklkW3RhcmdldE1lbWJlcl0gPT0gMCkgdGhyb3c7DQoNCiAgICAgICAgdWludDI1NiB0YXJnZXRJZCA9IG1lbWJlcklkW3RhcmdldE1lbWJlcl07DQogICAgICAgIHVpbnQyNTYgbGFzdElkICAgPSBtZW1iZXJzLmxlbmd0aCAtIDE7DQoNCiAgICAgICAgLy8gTW92ZSBsYXN0IG1lbWJlciB0byByZW1vdmVkIHBvc2l0aW9uDQogICAgICAgIE1lbWJlciBtZW1vcnkgbW92ZWQgICAgPSBtZW1iZXJzW2xhc3RJZF07DQogICAgICAgIG1lbWJlcnNbdGFyZ2V0SWRdICAgICAgPSBtb3ZlZDsgDQogICAgICAgIG1lbWJlcklkW21vdmVkLm1lbWJlcl0gPSB0YXJnZXRJZDsNCg0KICAgICAgICAvLyBDbGVhbiB1cA0KICAgICAgICBtZW1iZXJJZFt0YXJnZXRNZW1iZXJdID0gMDsNCiAgICAgICAgZGVsZXRlIG1lbWJlcnNbbGFzdElkXTsNCiAgICAgICAgLS1tZW1iZXJzLmxlbmd0aDsNCg0KICAgICAgICBNZW1iZXJzaGlwQ2hhbmdlZCh0YXJnZXRNZW1iZXIsIGZhbHNlKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IENoYW5nZSBydWxlcyBvZiB2b3RpbmcNCiAgICAgKiBAcGFyYW0gbWluaW11bVF1b3J1bUZvclByb3Bvc2FscyBNaW5pbWFsIGNvdW50IG9mIHZvdGVzDQogICAgICogQHBhcmFtIG1pbnV0ZXNGb3JEZWJhdGUgRGViYXRlIGRlYWRsaW5lIGluIG1pbnV0ZXMNCiAgICAgKiBAcGFyYW0gbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5IE1ham9yaXR5IG1hcmdpbiB2YWx1ZQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGNoYW5nZVZvdGluZ1J1bGVzKA0KICAgICAgICB1aW50MjU2IG1pbmltdW1RdW9ydW1Gb3JQcm9wb3NhbHMsDQogICAgICAgIHVpbnQyNTYgbWludXRlc0ZvckRlYmF0ZSwNCiAgICAgICAgaW50MjU2ICBtYXJnaW5PZlZvdGVzRm9yTWFqb3JpdHkNCiAgICApDQogICAgICAgIG9ubHlPd25lcg0KICAgIHsNCiAgICAgICAgbWluaW11bVF1b3J1bSAgICAgICAgICAgPSBtaW5pbXVtUXVvcnVtRm9yUHJvcG9zYWxzOw0KICAgICAgICBkZWJhdGluZ1BlcmlvZEluTWludXRlcyA9IG1pbnV0ZXNGb3JEZWJhdGU7DQogICAgICAgIG1ham9yaXR5TWFyZ2luICAgICAgICAgID0gbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5Ow0KDQogICAgICAgIENoYW5nZU9mUnVsZXMobWluaW11bVF1b3J1bSwgZGViYXRpbmdQZXJpb2RJbk1pbnV0ZXMsIG1ham9yaXR5TWFyZ2luKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IENyZWF0ZSBhIG5ldyBwcm9wb3NhbA0KICAgICAqIEBwYXJhbSBiZW5lZmljaWFyeSBCZW5lZmljaWFyeSBhY2NvdW50IGFkZHJlc3MNCiAgICAgKiBAcGFyYW0gYW1vdW50IFRyYW5zYWN0aW9uIHZhbHVlIGluIFdlaSANCiAgICAgKiBAcGFyYW0gam9iRGVzY3JpcHRpb24gSm9iIGRlc2NyaXB0aW9uIHN0cmluZw0KICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbkJ5dGVjb2RlIEJ5dGVjb2RlIG9mIHRyYW5zYWN0aW9uDQogICAgICovDQogICAgZnVuY3Rpb24gbmV3UHJvcG9zYWwoDQogICAgICAgIGFkZHJlc3MgYmVuZWZpY2lhcnksDQogICAgICAgIHVpbnQyNTYgYW1vdW50LA0KICAgICAgICBzdHJpbmcgIGpvYkRlc2NyaXB0aW9uLA0KICAgICAgICBieXRlcyAgIHRyYW5zYWN0aW9uQnl0ZWNvZGUNCiAgICApDQogICAgICAgIG9ubHlNZW1iZXJzDQogICAgICAgIHJldHVybnMgKHVpbnQyNTYgaWQpDQogICAgew0KICAgICAgICBpZCAgICAgICAgICAgICAgID0gcHJvcG9zYWxzLmxlbmd0aCsrOw0KICAgICAgICBQcm9wb3NhbCBwICAgICAgID0gcHJvcG9zYWxzW2lkXTsNCiAgICAgICAgcC5yZWNpcGllbnQgICAgICA9IGJlbmVmaWNpYXJ5Ow0KICAgICAgICBwLmFtb3VudCAgICAgICAgID0gYW1vdW50Ow0KICAgICAgICBwLmRlc2NyaXB0aW9uICAgID0gam9iRGVzY3JpcHRpb247DQogICAgICAgIHAucHJvcG9zYWxIYXNoICAgPSBzaGEzKGJlbmVmaWNpYXJ5LCBhbW91bnQsIHRyYW5zYWN0aW9uQnl0ZWNvZGUpOw0KICAgICAgICBwLnZvdGluZ0RlYWRsaW5lID0gbm93ICsgZGViYXRpbmdQZXJpb2RJbk1pbnV0ZXMgKiAxIG1pbnV0ZXM7DQogICAgICAgIHAuZXhlY3V0ZWQgICAgICAgPSBmYWxzZTsNCiAgICAgICAgcC5wcm9wb3NhbFBhc3NlZCA9IGZhbHNlOw0KICAgICAgICBwLm51bWJlck9mVm90ZXMgID0gMDsNCiAgICAgICAgUHJvcG9zYWxBZGRlZChpZCwgYmVuZWZpY2lhcnksIGFtb3VudCwgam9iRGVzY3JpcHRpb24pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgQ2hlY2sgaWYgYSBwcm9wb3NhbCBjb2RlIG1hdGNoZXMNCiAgICAgKiBAcGFyYW0gaWQgUHJvcG9zYWwgaWRlbnRpZmllcg0KICAgICAqIEBwYXJhbSBiZW5lZmljaWFyeSBCZW5lZmljaWFyeSBhY2NvdW50IGFkZHJlc3MNCiAgICAgKiBAcGFyYW0gYW1vdW50IFRyYW5zYWN0aW9uIHZhbHVlIGluIFdlaSANCiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25CeXRlY29kZSBCeXRlY29kZSBvZiB0cmFuc2FjdGlvbg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGNoZWNrUHJvcG9zYWxDb2RlKA0KICAgICAgICB1aW50MjU2IGlkLA0KICAgICAgICBhZGRyZXNzIGJlbmVmaWNpYXJ5LA0KICAgICAgICB1aW50MjU2IGFtb3VudCwNCiAgICAgICAgYnl0ZXMgICB0cmFuc2FjdGlvbkJ5dGVjb2RlDQogICAgKQ0KICAgICAgICBjb25zdGFudA0KICAgICAgICByZXR1cm5zIChib29sIGNvZGVDaGVja3NPdXQpDQogICAgew0KICAgICAgICByZXR1cm4gcHJvcG9zYWxzW2lkXS5wcm9wb3NhbEhhc2gNCiAgICAgICAgICAgID09IHNoYTMoYmVuZWZpY2lhcnksIGFtb3VudCwgdHJhbnNhY3Rpb25CeXRlY29kZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBQcm9wb3NhbCB2b3RpbmcNCiAgICAgKiBAcGFyYW0gaWQgUHJvcG9zYWwgaWRlbnRpZmllcg0KICAgICAqIEBwYXJhbSBzdXBwb3J0c1Byb3Bvc2FsIElzIHByb3Bvc2FsIHN1cHBvcnRlZA0KICAgICAqIEBwYXJhbSBqdXN0aWZpY2F0aW9uVGV4dCBNZW1iZXIgY29tbWVudA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHZvdGUoDQogICAgICAgIHVpbnQyNTYgaWQsDQogICAgICAgIGJvb2wgICAgc3VwcG9ydHNQcm9wb3NhbCwNCiAgICAgICAgc3RyaW5nICBqdXN0aWZpY2F0aW9uVGV4dA0KICAgICkNCiAgICAgICAgb25seU1lbWJlcnMNCiAgICAgICAgcmV0dXJucyAodWludDI1NiB2b3RlKQ0KICAgIHsNCiAgICAgICAgUHJvcG9zYWwgcCA9IHByb3Bvc2Fsc1tpZF07ICAgICAgICAgICAgIC8vIEdldCB0aGUgcHJvcG9zYWwNCiAgICAgICAgaWYgKHAudm90ZWRbbXNnLnNlbmRlcl0gPT0gdHJ1ZSkgdGhyb3c7IC8vIElmIGhhcyBhbHJlYWR5IHZvdGVkLCBjYW5jZWwNCiAgICAgICAgcC52b3RlZFttc2cuc2VuZGVyXSA9IHRydWU7ICAgICAgICAgICAgIC8vIFNldCB0aGlzIHZvdGVyIGFzIGhhdmluZyB2b3RlZA0KICAgICAgICBwLm51bWJlck9mVm90ZXMrKzsgICAgICAgICAgICAgICAgICAgICAgLy8gSW5jcmVhc2UgdGhlIG51bWJlciBvZiB2b3Rlcw0KICAgICAgICBpZiAoc3VwcG9ydHNQcm9wb3NhbCkgeyAgICAgICAgICAgICAgICAgLy8gSWYgdGhleSBzdXBwb3J0IHRoZSBwcm9wb3NhbA0KICAgICAgICAgICAgcC5jdXJyZW50UmVzdWx0Kys7ICAgICAgICAgICAgICAgICAgLy8gSW5jcmVhc2Ugc2NvcmUNCiAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXkgZG9uJ3QNCiAgICAgICAgICAgIHAuY3VycmVudFJlc3VsdC0tOyAgICAgICAgICAgICAgICAgIC8vIERlY3JlYXNlIHRoZSBzY29yZQ0KICAgICAgICB9DQogICAgICAgIC8vIENyZWF0ZSBhIGxvZyBvZiB0aGlzIGV2ZW50DQogICAgICAgIFZvdGVkKGlkLCAgc3VwcG9ydHNQcm9wb3NhbCwgbXNnLnNlbmRlciwganVzdGlmaWNhdGlvblRleHQpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgVHJ5IHRvIGV4ZWN1dGUgcHJvcG9zYWwNCiAgICAgKiBAcGFyYW0gaWQgUHJvcG9zYWwgaWRlbnRpZmllcg0KICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbkJ5dGVjb2RlIFRyYW5zYWN0aW9uIGRhdGENCiAgICAgKi8NCiAgICBmdW5jdGlvbiBleGVjdXRlUHJvcG9zYWwoDQogICAgICAgIHVpbnQyNTYgaWQsDQogICAgICAgIGJ5dGVzICAgdHJhbnNhY3Rpb25CeXRlY29kZQ0KICAgICkNCiAgICAgICAgb25seU1lbWJlcnMNCiAgICB7DQogICAgICAgIFByb3Bvc2FsIHAgPSBwcm9wb3NhbHNbaWRdOw0KICAgICAgICAvKiBDaGVjayBpZiB0aGUgcHJvcG9zYWwgY2FuIGJlIGV4ZWN1dGVkOg0KICAgICAgICAgICAtIEhhcyB0aGUgdm90aW5nIGRlYWRsaW5lIGFycml2ZWQ/DQogICAgICAgICAgIC0gSGFzIGl0IGJlZW4gYWxyZWFkeSBleGVjdXRlZCBvciBpcyBpdCBiZWluZyBleGVjdXRlZD8NCiAgICAgICAgICAgLSBEb2VzIHRoZSB0cmFuc2FjdGlvbiBjb2RlIG1hdGNoIHRoZSBwcm9wb3NhbD8NCiAgICAgICAgICAgLSBIYXMgYSBtaW5pbXVtIHF1b3J1bT8NCiAgICAgICAgKi8NCg0KICAgICAgICBpZiAobm93IDwgcC52b3RpbmdEZWFkbGluZQ0KICAgICAgICAgICAgfHwgcC5leGVjdXRlZA0KICAgICAgICAgICAgfHwgcC5wcm9wb3NhbEhhc2ggIT0gc2hhMyhwLnJlY2lwaWVudCwgcC5hbW91bnQsIHRyYW5zYWN0aW9uQnl0ZWNvZGUpDQogICAgICAgICAgICB8fCBwLm51bWJlck9mVm90ZXMgPCBtaW5pbXVtUXVvcnVtKQ0KICAgICAgICAgICAgdGhyb3c7DQoNCiAgICAgICAgLyogZXhlY3V0ZSByZXN1bHQgKi8NCiAgICAgICAgLyogSWYgZGlmZmVyZW5jZSBiZXR3ZWVuIHN1cHBvcnQgYW5kIG9wcG9zaXRpb24gaXMgbGFyZ2VyIHRoYW4gbWFyZ2luICovDQogICAgICAgIGlmIChwLmN1cnJlbnRSZXN1bHQgPiBtYWpvcml0eU1hcmdpbikgew0KICAgICAgICAgICAgLy8gQXZvaWQgcmVjdXJzaXZlIGNhbGxpbmcNCg0KICAgICAgICAgICAgcC5leGVjdXRlZCA9IHRydWU7DQogICAgICAgICAgICBpZiAoIXAucmVjaXBpZW50LmNhbGwudmFsdWUocC5hbW91bnQpKHRyYW5zYWN0aW9uQnl0ZWNvZGUpKQ0KICAgICAgICAgICAgICAgIHRocm93Ow0KDQogICAgICAgICAgICBwLnByb3Bvc2FsUGFzc2VkID0gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHAucHJvcG9zYWxQYXNzZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBGaXJlIEV2ZW50cw0KICAgICAgICBQcm9wb3NhbFRhbGxpZWQoaWQsIHAubnVtYmVyT2ZWb3RlcywgcC5wcm9wb3NhbFBhc3NlZCk7DQogICAgfQ0KfQ0KDQpsaWJyYXJ5IENyZWF0b3JDb25ncmVzcyB7DQogICAgZnVuY3Rpb24gY3JlYXRlKHVpbnQyNTYgbWluaW11bVF1b3J1bUZvclByb3Bvc2FscywgdWludDI1NiBtaW51dGVzRm9yRGViYXRlLCBpbnQyNTYgbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5LCBhZGRyZXNzIGNvbmdyZXNzTGVhZGVyKSByZXR1cm5zIChDb25ncmVzcykNCiAgICB7IHJldHVybiBuZXcgQ29uZ3Jlc3MobWluaW11bVF1b3J1bUZvclByb3Bvc2FscywgbWludXRlc0ZvckRlYmF0ZSwgbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5LCBjb25ncmVzc0xlYWRlcik7IH0NCg0KICAgIGZ1bmN0aW9uIHZlcnNpb24oKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcpDQogICAgeyByZXR1cm4gInYwLjYuMyI7IH0NCg0KICAgIGZ1bmN0aW9uIGFiaSgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZykNCiAgICB7IHJldHVybiAnW3siY29uc3RhbnQiOnRydWUsImlucHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoicHJvcG9zYWxzIiwib3V0cHV0cyI6W3sibmFtZSI6InJlY2lwaWVudCIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiYW1vdW50IiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJkZXNjcmlwdGlvbiIsInR5cGUiOiJzdHJpbmcifSx7Im5hbWUiOiJ2b3RpbmdEZWFkbGluZSIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoiZXhlY3V0ZWQiLCJ0eXBlIjoiYm9vbCJ9LHsibmFtZSI6InByb3Bvc2FsUGFzc2VkIiwidHlwZSI6ImJvb2wifSx7Im5hbWUiOiJudW1iZXJPZlZvdGVzIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJjdXJyZW50UmVzdWx0IiwidHlwZSI6ImludDI1NiJ9LHsibmFtZSI6InByb3Bvc2FsSGFzaCIsInR5cGUiOiJieXRlczMyIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6InRhcmdldE1lbWJlciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoicmVtb3ZlTWVtYmVyIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX293bmVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJzZXRPd25lciIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6ImlkIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJ0cmFuc2FjdGlvbkJ5dGVjb2RlIiwidHlwZSI6ImJ5dGVzIn1dLCJuYW1lIjoiZXhlY3V0ZVByb3Bvc2FsIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6Im1lbWJlcklkIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im51bVByb3Bvc2FscyIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJoYW1tZXIiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6Im1lbWJlcnMiLCJvdXRwdXRzIjpbeyJuYW1lIjoibWVtYmVyIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJuYW1lIiwidHlwZSI6InN0cmluZyJ9LHsibmFtZSI6Im1lbWJlclNpbmNlIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoiZGViYXRpbmdQZXJpb2RJbk1pbnV0ZXMiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoibWluaW11bVF1b3J1bSIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiZGVzdHJveSIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im93bmVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9mcm9tIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfdmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6Il90b2tlbiIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX2V4dHJhRGF0YSIsInR5cGUiOiJieXRlcyJ9XSwibmFtZSI6InJlY2VpdmVBcHByb3ZhbCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im1ham9yaXR5TWFyZ2luIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiYmVuZWZpY2lhcnkiLCJ0eXBlIjoiYWRkcmVzcyJ9LHsibmFtZSI6ImFtb3VudCIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoiam9iRGVzY3JpcHRpb24iLCJ0eXBlIjoic3RyaW5nIn0seyJuYW1lIjoidHJhbnNhY3Rpb25CeXRlY29kZSIsInR5cGUiOiJieXRlcyJ9XSwibmFtZSI6Im5ld1Byb3Bvc2FsIiwib3V0cHV0cyI6W3sibmFtZSI6ImlkIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoibWluaW11bVF1b3J1bUZvclByb3Bvc2FscyIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoibWludXRlc0ZvckRlYmF0ZSIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoibWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5IiwidHlwZSI6ImludDI1NiJ9XSwibmFtZSI6ImNoYW5nZVZvdGluZ1J1bGVzIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoidGFyZ2V0TWVtYmVyIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJtZW1iZXJOYW1lIiwidHlwZSI6InN0cmluZyJ9XSwibmFtZSI6ImFkZE1lbWJlciIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9oYW1tZXIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6InNldEhhbW1lciIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6ImlkIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJzdXBwb3J0c1Byb3Bvc2FsIiwidHlwZSI6ImJvb2wifSx7Im5hbWUiOiJqdXN0aWZpY2F0aW9uVGV4dCIsInR5cGUiOiJzdHJpbmcifV0sIm5hbWUiOiJ2b3RlIiwib3V0cHV0cyI6W3sibmFtZSI6InZvdGUiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W3sibmFtZSI6ImlkIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJiZW5lZmljaWFyeSIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiYW1vdW50IiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJ0cmFuc2FjdGlvbkJ5dGVjb2RlIiwidHlwZSI6ImJ5dGVzIn1dLCJuYW1lIjoiY2hlY2tQcm9wb3NhbENvZGUiLCJvdXRwdXRzIjpbeyJuYW1lIjoiY29kZUNoZWNrc091dCIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJpbnB1dHMiOlt7Im5hbWUiOiJtaW5pbXVtUXVvcnVtRm9yUHJvcG9zYWxzIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJtaW51dGVzRm9yRGViYXRlIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJtYXJnaW5PZlZvdGVzRm9yTWFqb3JpdHkiLCJ0eXBlIjoiaW50MjU2In0seyJuYW1lIjoiY29uZ3Jlc3NMZWFkZXIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJjb25zdHJ1Y3RvciJ9LHsicGF5YWJsZSI6dHJ1ZSwidHlwZSI6ImZhbGxiYWNrIn0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJwcm9wb3NhbCIsInR5cGUiOiJ1aW50MjU2In0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoicmVjaXBpZW50IiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJhbW91bnQiLCJ0eXBlIjoidWludDI1NiJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJkZXNjcmlwdGlvbiIsInR5cGUiOiJzdHJpbmcifV0sIm5hbWUiOiJQcm9wb3NhbEFkZGVkIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJwcm9wb3NhbCIsInR5cGUiOiJ1aW50MjU2In0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoicG9zaXRpb24iLCJ0eXBlIjoiYm9vbCJ9LHsiaW5kZXhlZCI6dHJ1ZSwibmFtZSI6InZvdGVyIiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoianVzdGlmaWNhdGlvbiIsInR5cGUiOiJzdHJpbmcifV0sIm5hbWUiOiJWb3RlZCIsInR5cGUiOiJldmVudCJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbeyJpbmRleGVkIjp0cnVlLCJuYW1lIjoicHJvcG9zYWwiLCJ0eXBlIjoidWludDI1NiJ9LHsiaW5kZXhlZCI6dHJ1ZSwibmFtZSI6InF1b3J1bSIsInR5cGUiOiJ1aW50MjU2In0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoiYWN0aXZlIiwidHlwZSI6ImJvb2wifV0sIm5hbWUiOiJQcm9wb3NhbFRhbGxpZWQiLCJ0eXBlIjoiZXZlbnQifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W3siaW5kZXhlZCI6dHJ1ZSwibmFtZSI6Im1lbWJlciIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoiaXNNZW1iZXIiLCJ0eXBlIjoiYm9vbCJ9XSwibmFtZSI6Ik1lbWJlcnNoaXBDaGFuZ2VkIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJtaW5pbXVtUXVvcnVtIiwidHlwZSI6InVpbnQyNTYifSx7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJkZWJhdGluZ1BlcmlvZEluTWludXRlcyIsInR5cGUiOiJ1aW50MjU2In0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoibWFqb3JpdHlNYXJnaW4iLCJ0eXBlIjoiaW50MjU2In1dLCJuYW1lIjoiQ2hhbmdlT2ZSdWxlcyIsInR5cGUiOiJldmVudCJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbeyJpbmRleGVkIjp0cnVlLCJuYW1lIjoic2VuZGVyIiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJhbW91bnQiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6IlJlY2VpdmVkRXRoZXIiLCJ0eXBlIjoiZXZlbnQifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W3siaW5kZXhlZCI6dHJ1ZSwibmFtZSI6ImZyb20iLCJ0eXBlIjoiYWRkcmVzcyJ9LHsiaW5kZXhlZCI6dHJ1ZSwibmFtZSI6InZhbHVlIiwidHlwZSI6InVpbnQyNTYifSx7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJ0b2tlbiIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6ImV4dHJhRGF0YSIsInR5cGUiOiJieXRlcyJ9XSwibmFtZSI6IlJlY2VpdmVkVG9rZW5zIiwidHlwZSI6ImV2ZW50In1dJzsgfQ0KfQ0KDQovKioNCiAqIEB0aXRsZSBCdWlsZGVyIGJhc2VkIGNvbnRyYWN0DQogKi8NCmNvbnRyYWN0IEJ1aWxkZXIgaXMgT2JqZWN0IHsNCiAgICAvKioNCiAgICAgKiBAZGV2IHRoaXMgZXZlbnQgZW1pdHRlZCBmb3IgZXZlcnkgYnVpbGRlZCBjb250cmFjdA0KICAgICAqLw0KICAgIGV2ZW50IEJ1aWxkZWQoYWRkcmVzcyBpbmRleGVkIGNsaWVudCwgYWRkcmVzcyBpbmRleGVkIGluc3RhbmNlKTsNCiANCiAgICAvKiBBZGRyZXNzZXMgYnVpbGRlZCBjb250cmFjdHMgYXQgc2VuZGVyICovDQogICAgbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3NbXSkgcHVibGljIGdldENvbnRyYWN0c09mOw0KIA0KICAgIC8qKg0KICAgICAqIEBkZXYgR2V0IGxhc3QgYWRkcmVzcw0KICAgICAqIEByZXR1cm4gbGFzdCBhZGRyZXNzIGNvbnRyYWN0DQogICAgICovDQogICAgZnVuY3Rpb24gZ2V0TGFzdENvbnRyYWN0KCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgew0KICAgICAgICB2YXIgc2VuZGVyX2NvbnRyYWN0cyA9IGdldENvbnRyYWN0c09mW21zZy5zZW5kZXJdOw0KICAgICAgICByZXR1cm4gc2VuZGVyX2NvbnRyYWN0c1tzZW5kZXJfY29udHJhY3RzLmxlbmd0aCAtIDFdOw0KICAgIH0NCg0KICAgIC8qIEJ1aWxkaW5nIGJlbmVmaWNpYXJ5ICovDQogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnk7DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IFNldCBiZW5lZmljaWFyeQ0KICAgICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgaXMgYWRkcmVzcyBvZiBiZW5lZmljaWFyeQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNldEJlbmVmaWNpYXJ5KGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBvbmx5T3duZXINCiAgICB7IGJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OyB9DQoNCiAgICAvKiBCdWlsZGluZyBjb3N0ICAqLw0KICAgIHVpbnQgcHVibGljIGJ1aWxkaW5nQ29zdFdlaTsNCg0KICAgIC8qKg0KICAgICAqIEBkZXYgU2V0IGJ1aWxkaW5nIGNvc3QNCiAgICAgKiBAcGFyYW0gX2J1aWxkaW5nQ29zdFdlaSBpcyBjb3N0DQogICAgICovDQogICAgZnVuY3Rpb24gc2V0Q29zdCh1aW50IF9idWlsZGluZ0Nvc3RXZWkpIG9ubHlPd25lcg0KICAgIHsgYnVpbGRpbmdDb3N0V2VpID0gX2J1aWxkaW5nQ29zdFdlaTsgfQ0KDQogICAgLyogU2VjdXJpdHkgY2hlY2sgcmVwb3J0ICovDQogICAgc3RyaW5nIHB1YmxpYyBzZWN1cml0eUNoZWNrVVJJOw0KDQogICAgLyoqDQogICAgICogQGRldiBTZXQgc2VjdXJpdHkgY2hlY2sgcmVwb3J0IFVSSQ0KICAgICAqIEBwYXJhbSBfdXJpIGlzIGFuIFVSSSB0byByZXBvcnQNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBzZXRTZWN1cml0eUNoZWNrKHN0cmluZyBfdXJpKSBvbmx5T3duZXINCiAgICB7IHNlY3VyaXR5Q2hlY2tVUkkgPSBfdXJpOyB9DQp9DQoNCi8vDQovLyBBSVJBIEJ1aWxkZXIgZm9yIENvbmdyZXNzIGNvbnRyYWN0DQovLw0KY29udHJhY3QgQnVpbGRlckNvbmdyZXNzIGlzIEJ1aWxkZXIgew0KICAgIC8qKg0KICAgICAqIEBkZXYgUnVuIHNjcmlwdCBjcmVhdGlvbiBjb250cmFjdA0KICAgICAqIEByZXR1cm4gYWRkcmVzcyBuZXcgY29udHJhY3QNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBjcmVhdGUodWludDI1NiBtaW5pbXVtUXVvcnVtRm9yUHJvcG9zYWxzLA0KICAgICAgICAgICAgICAgICAgICB1aW50MjU2IG1pbnV0ZXNGb3JEZWJhdGUsDQogICAgICAgICAgICAgICAgICAgIGludDI1NiBtYXJnaW5PZlZvdGVzRm9yTWFqb3JpdHksDQogICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgY29uZ3Jlc3NMZWFkZXIsDQogICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgX2NsaWVudCkgcGF5YWJsZSByZXR1cm5zIChhZGRyZXNzKSB7DQogICAgICAgIGlmIChidWlsZGluZ0Nvc3RXZWkgPiAwICYmIGJlbmVmaWNpYXJ5ICE9IDApIHsNCiAgICAgICAgICAgIC8vIFRvbyBsb3cgdmFsdWUNCiAgICAgICAgICAgIGlmIChtc2cudmFsdWUgPCBidWlsZGluZ0Nvc3RXZWkpIHRocm93Ow0KICAgICAgICAgICAgLy8gQmVuZWZpY2lhcnkgc2VuZA0KICAgICAgICAgICAgaWYgKCFiZW5lZmljaWFyeS5zZW5kKGJ1aWxkaW5nQ29zdFdlaSkpIHRocm93Ow0KICAgICAgICAgICAgLy8gUmVmdW5kDQogICAgICAgICAgICBpZiAobXNnLnZhbHVlID4gYnVpbGRpbmdDb3N0V2VpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlIC0gYnVpbGRpbmdDb3N0V2VpKSkgdGhyb3c7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBSZWZ1bmQgYWxsDQogICAgICAgICAgICBpZiAobXNnLnZhbHVlID4gMCkgew0KICAgICAgICAgICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKG1zZy52YWx1ZSkpIHRocm93Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKF9jbGllbnQgPT0gMCkNCiAgICAgICAgICAgIF9jbGllbnQgPSBtc2cuc2VuZGVyOw0KIA0KICAgICAgICBpZiAoY29uZ3Jlc3NMZWFkZXIgPT0gMCkNCiAgICAgICAgICAgIGNvbmdyZXNzTGVhZGVyID0gX2NsaWVudDsNCg0KICAgICAgICB2YXIgaW5zdCA9IENyZWF0b3JDb25ncmVzcy5jcmVhdGUobWluaW11bVF1b3J1bUZvclByb3Bvc2FscywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXNGb3JEZWJhdGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5PZlZvdGVzRm9yTWFqb3JpdHksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25ncmVzc0xlYWRlcik7DQogICAgICAgIGluc3Quc2V0T3duZXIoX2NsaWVudCk7DQogICAgICAgIGluc3Quc2V0SGFtbWVyKF9jbGllbnQpOw0KICAgICAgICBnZXRDb250cmFjdHNPZltfY2xpZW50XS5wdXNoKGluc3QpOw0KICAgICAgICBCdWlsZGVkKF9jbGllbnQsIGluc3QpOw0KICAgICAgICByZXR1cm4gaW5zdDsNCiAgICB9DQp9'