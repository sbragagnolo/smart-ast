base 64 content
base64cATToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyoqDQogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzDQogKi8NCmxpYnJhcnkgU2FmZU1hdGggew0KICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICB1aW50IGMgPSBhICogYjsNCiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwDQogICAgdWludCBjID0gYSAvIGI7DQogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIGFzc2VydChiIDw9IGEpOw0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKyBiOw0KICAgIGFzc2VydChjID49IGEpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsNCiAgICBpZiAoIWFzc2VydGlvbikgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICB9DQp9DQoNCi8qKg0KICogQHRpdGxlIEVSQzIwQmFzaWMNCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQ0KICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQogKi8NCmNvbnRyYWN0IEVSQzIwQmFzaWMgew0KICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7DQogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOw0KfQ0KDQovKioNCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UNCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICovDQpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsNCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7DQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOw0KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSk7DQogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KfQ0KDQovKioNCiAqIEB0aXRsZSBCYXNpYyB0b2tlbg0KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gDQogKi8NCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7DQogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50Ow0KDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsNCg0KICAvKioNCiAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4NCiAgICovDQogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsNCiAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsNCiAgICAgICB0aHJvdzsNCiAgICAgfQ0KICAgICBfOw0KICB9DQoNCiAgLyoqDQogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcw0KICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uDQogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLg0KICAqLw0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsNCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOw0KICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgfQ0KDQogIC8qKg0KICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuDQogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIA0KICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuDQogICovDQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7DQogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogIH0NCg0KfQ0KDQoNCi8qKg0KICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuDQogKg0KICogQGRldiBJbXBsZW1hbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcnQgdG9rZW4uDQogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbA0KICovDQpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIwIHsNCg0KICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7DQoNCg0KICAvKioNCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyDQogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20NCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvDQogICAqIEBwYXJhbSBfdmFsdWUgdWludCB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQNCiAgICovDQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsNCiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOw0KDQogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0DQogICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93Ow0KDQogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7DQogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOw0KICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsNCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVhaGxmIG9mIG1zZy5zZW5kZXIuDQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4NCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4NCiAgICovDQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsNCg0KICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgDQogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QNCiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToNCiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkNCiAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93Ow0KDQogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGFuIGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLg0KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuDQogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLg0KICAgKiBAcmV0dXJuIEEgdWludCBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuDQogICAqLw0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7DQogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogIH0NCg0KfQ0KDQoNCmNvbnRyYWN0IENBVFRva2VuIGlzIFN0YW5kYXJkVG9rZW4gew0KCXVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2Ow0KCQ0KCS8vIGtlY2NhazI1NiBoYXNoIG9mIGhpZGRlbiBjYXANCglzdHJpbmcgcHVibGljIGNvbnN0YW50IEhJRERFTl9DQVAgPSAiMHhkMjJmMTlkNTQxOTNmZjVlMDhlN2JhODhjOGU1MmVjMWI5ZmM4ZDRlMGNmMTc3ZTFiZThhNzY0ZmE1YjM3NWZhIjsNCgkNCgkvLyBFdmVudHMNCglldmVudCBDcmVhdGVkQ0FUKGFkZHJlc3MgaW5kZXhlZCBfY3JlYXRvciwgdWludDI1NiBfYW1vdW50T2ZDQVQpOw0KCWV2ZW50IENBVFJlZnVuZGVkRm9yV2VpKGFkZHJlc3MgaW5kZXhlZCBfcmVmdW5kZXIsIHVpbnQyNTYgX2Ftb3VudE9mV2VpKTsNCgkNCgkvLyBUb2tlbiBkYXRhDQoJc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkJsb2NrQ0FUIFRva2VuIjsNCglzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJDQVQiOw0KCXVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7ICAvLyBTaW5jZSBvdXIgZGVjaW1hbHMgZXF1YWxzIHRoZSBudW1iZXIgb2Ygd2VpIHBlciBldGhlciwgd2UgbmVlZG4ndCBtdWx0aXBseSBzZW50IHZhbHVlcyB3aGVuIGNvbnZlcnRpbmcgYmV0d2VlbiBDQVQgYW5kIEVUSC4NCglzdHJpbmcgcHVibGljIHZlcnNpb24gPSAiMS4wIjsNCgkNCgkvLyBBZGRyZXNzZXMgYW5kIGNvbnRyYWN0cw0KCWFkZHJlc3MgcHVibGljIGV4ZWN1dG9yOw0KCWFkZHJlc3MgcHVibGljIGRldkVUSERlc3RpbmF0aW9uOw0KCWFkZHJlc3MgcHVibGljIGRldkNBVERlc3RpbmF0aW9uOw0KCWFkZHJlc3MgcHVibGljIHJlc2VydmVDQVREZXN0aW5hdGlvbjsNCgkNCgkvLyBTYWxlIGRhdGENCglib29sIHB1YmxpYyBzYWxlSGFzRW5kZWQ7DQoJYm9vbCBwdWJsaWMgbWluQ2FwUmVhY2hlZDsNCglib29sIHB1YmxpYyBhbGxvd1JlZnVuZDsNCgltYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBFVEhDb250cmlidXRlZDsNCgl1aW50MjU2IHB1YmxpYyB0b3RhbEVUSFJhaXNlZDsNCgl1aW50MjU2IHB1YmxpYyBzYWxlU3RhcnRCbG9jazsNCgl1aW50MjU2IHB1YmxpYyBzYWxlRW5kQmxvY2s7DQoJdWludDI1NiBwdWJsaWMgc2FsZUZpcnN0RWFybHlCaXJkRW5kQmxvY2s7DQoJdWludDI1NiBwdWJsaWMgc2FsZVNlY29uZEVhcmx5QmlyZEVuZEJsb2NrOw0KCXVpbnQyNTYgcHVibGljIGNvbnN0YW50IERFVl9QT1JUSU9OID0gMjA7ICAvLyBJbiBwZXJjZW50YWdlDQoJdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUkVTRVJWRV9QT1JUSU9OID0gMTsgIC8vIEluIHBlcmNlbnRhZ2UNCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCBBRERJVElPTkFMX1BPUlRJT04gPSBERVZfUE9SVElPTiArIFJFU0VSVkVfUE9SVElPTjsNCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCBTRUNVUklUWV9FVEhFUl9DQVAgPSAxMDAwMDAwIGV0aGVyOw0KCXVpbnQyNTYgcHVibGljIGNvbnN0YW50IENBVF9QRVJfRVRIX0JBU0VfUkFURSA9IDMwMDsgIC8vIDMwMCBDQVQgPSAxIEVUSCBkdXJpbmcgbm9ybWFsIHBhcnQgb2YgdG9rZW4gc2FsZQ0KCXVpbnQyNTYgcHVibGljIGNvbnN0YW50IENBVF9QRVJfRVRIX0ZJUlNUX0VBUkxZX0JJUkRfUkFURSA9IDMzMDsNCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCBDQVRfUEVSX0VUSF9TRUNPTkRfRUFSTFlfQklSRF9SQVRFID0gMzE1Ow0KCQ0KCWZ1bmN0aW9uIENBVFRva2VuKA0KCQlhZGRyZXNzIF9kZXZFVEhEZXN0aW5hdGlvbiwNCgkJYWRkcmVzcyBfZGV2Q0FURGVzdGluYXRpb24sDQoJCWFkZHJlc3MgX3Jlc2VydmVDQVREZXN0aW5hdGlvbiwNCgkJdWludDI1NiBfc2FsZVN0YXJ0QmxvY2ssDQoJCXVpbnQyNTYgX3NhbGVFbmRCbG9jaw0KCSkgew0KCQkvLyBSZWplY3Qgb24gaW52YWxpZCBFVEggZGVzdGluYXRpb24gYWRkcmVzcyBvciBDQVQgZGVzdGluYXRpb24gYWRkcmVzcw0KCQlpZiAoX2RldkVUSERlc3RpbmF0aW9uID09IGFkZHJlc3MoMHgwKSkgdGhyb3c7DQoJCWlmIChfZGV2Q0FURGVzdGluYXRpb24gPT0gYWRkcmVzcygweDApKSB0aHJvdzsNCgkJaWYgKF9yZXNlcnZlQ0FURGVzdGluYXRpb24gPT0gYWRkcmVzcygweDApKSB0aHJvdzsNCgkJLy8gUmVqZWN0IGlmIHNhbGUgZW5kcyBiZWZvcmUgdGhlIGN1cnJlbnQgYmxvY2sNCgkJaWYgKF9zYWxlRW5kQmxvY2sgPD0gYmxvY2subnVtYmVyKSB0aHJvdzsNCgkJLy8gUmVqZWN0IGlmIHRoZSBzYWxlIGVuZCB0aW1lIGlzIGxlc3MgdGhhbiB0aGUgc2FsZSBzdGFydCB0aW1lDQoJCWlmIChfc2FsZUVuZEJsb2NrIDw9IF9zYWxlU3RhcnRCbG9jaykgdGhyb3c7DQoNCgkJZXhlY3V0b3IgPSBtc2cuc2VuZGVyOw0KCQlzYWxlSGFzRW5kZWQgPSBmYWxzZTsNCgkJbWluQ2FwUmVhY2hlZCA9IGZhbHNlOw0KCQlhbGxvd1JlZnVuZCA9IGZhbHNlOw0KCQlkZXZFVEhEZXN0aW5hdGlvbiA9IF9kZXZFVEhEZXN0aW5hdGlvbjsNCgkJZGV2Q0FURGVzdGluYXRpb24gPSBfZGV2Q0FURGVzdGluYXRpb247DQoJCXJlc2VydmVDQVREZXN0aW5hdGlvbiA9IF9yZXNlcnZlQ0FURGVzdGluYXRpb247DQoJCXRvdGFsRVRIUmFpc2VkID0gMDsNCgkJc2FsZVN0YXJ0QmxvY2sgPSBfc2FsZVN0YXJ0QmxvY2s7DQoJCXNhbGVFbmRCbG9jayA9IF9zYWxlRW5kQmxvY2s7DQoJCXNhbGVGaXJzdEVhcmx5QmlyZEVuZEJsb2NrID0gc2FsZVN0YXJ0QmxvY2sgKyA2MTcxOyAgLy8gRXF1aXZhbGVudCB0byAyNCBob3VycyBsYXRlciwgYXNzdW1pbmcgMTQgc2Vjb25kIGJsb2Nrcw0KCQlzYWxlU2Vjb25kRWFybHlCaXJkRW5kQmxvY2sgPSBzYWxlRmlyc3RFYXJseUJpcmRFbmRCbG9jayArIDEyMzQyOyAgLy8gRXF1aXZhbGVudCB0byA0OCBob3VycyBsYXRlciBhZnRlciBmaXJzdCBlYXJseSBiaXJkLCBhc3N1bWluZyAxNCBzZWNvbmQgYmxvY2tzDQoNCgkJdG90YWxTdXBwbHkgPSAwOw0KCX0NCgkNCglmdW5jdGlvbiBjcmVhdGVUb2tlbnMoKSBwYXlhYmxlIGV4dGVybmFsIHsNCgkJLy8gSWYgc2FsZSBpcyBub3QgYWN0aXZlLCBkbyBub3QgY3JlYXRlIENBVA0KCQlpZiAoc2FsZUhhc0VuZGVkKSB0aHJvdzsNCgkJaWYgKGJsb2NrLm51bWJlciA8IHNhbGVTdGFydEJsb2NrKSB0aHJvdzsNCgkJaWYgKGJsb2NrLm51bWJlciA+IHNhbGVFbmRCbG9jaykgdGhyb3c7DQoJCS8vIENoZWNrIGlmIHRoZSBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgc2VjdXJpdHkgY2FwDQoJCXVpbnQyNTYgbmV3RXRoZXJCYWxhbmNlID0gdG90YWxFVEhSYWlzZWQuYWRkKG1zZy52YWx1ZSk7DQoJCWlmIChuZXdFdGhlckJhbGFuY2UgPiBTRUNVUklUWV9FVEhFUl9DQVApIHRocm93OyANCgkJLy8gRG8gbm90IGRvIGFueXRoaW5nIGlmIHRoZSBhbW91bnQgb2YgZXRoZXIgc2VudCBpcyAwDQoJCWlmICgwID09IG1zZy52YWx1ZSkgdGhyb3c7DQoJCQ0KCQkvLyBDYWxjdWxhdGUgdGhlIENBVCB0byBFVEggcmF0ZSBmb3IgdGhlIGN1cnJlbnQgdGltZSBwZXJpb2Qgb2YgdGhlIHNhbGUNCgkJdWludDI1NiBjdXJUb2tlblJhdGUgPSBDQVRfUEVSX0VUSF9CQVNFX1JBVEU7DQoJCWlmIChibG9jay5udW1iZXIgPCBzYWxlRmlyc3RFYXJseUJpcmRFbmRCbG9jaykgew0KCQkJY3VyVG9rZW5SYXRlID0gQ0FUX1BFUl9FVEhfRklSU1RfRUFSTFlfQklSRF9SQVRFOw0KCQl9DQoJCWVsc2UgaWYgKGJsb2NrLm51bWJlciA8IHNhbGVTZWNvbmRFYXJseUJpcmRFbmRCbG9jaykgew0KCQkJY3VyVG9rZW5SYXRlID0gQ0FUX1BFUl9FVEhfU0VDT05EX0VBUkxZX0JJUkRfUkFURTsNCgkJfQ0KCQkNCgkJLy8gQ2FsY3VsYXRlIHRoZSBhbW91bnQgb2YgQ0FUIGJlaW5nIHB1cmNoYXNlZA0KCQl1aW50MjU2IGFtb3VudE9mQ0FUID0gbXNnLnZhbHVlLm11bChjdXJUb2tlblJhdGUpOw0KCQkNCgkJLy8gRW5zdXJlIHRoYXQgdGhlIHRyYW5zYWN0aW9uIGlzIHNhZmUNCgkJdWludDI1NiB0b3RhbFN1cHBseVNhZmUgPSB0b3RhbFN1cHBseS5hZGQoYW1vdW50T2ZDQVQpOw0KCQl1aW50MjU2IGJhbGFuY2VTYWZlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKGFtb3VudE9mQ0FUKTsNCgkJdWludDI1NiBjb250cmlidXRlZFNhZmUgPSBFVEhDb250cmlidXRlZFttc2cuc2VuZGVyXS5hZGQobXNnLnZhbHVlKTsNCg0KCQkvLyBVcGRhdGUgaW5kaXZpZHVhbCBhbmQgdG90YWwgYmFsYW5jZXMNCgkJdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseVNhZmU7DQoJCWJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZVNhZmU7DQoNCgkJdG90YWxFVEhSYWlzZWQgPSBuZXdFdGhlckJhbGFuY2U7DQoJCUVUSENvbnRyaWJ1dGVkW21zZy5zZW5kZXJdID0gY29udHJpYnV0ZWRTYWZlOw0KDQoJCUNyZWF0ZWRDQVQobXNnLnNlbmRlciwgYW1vdW50T2ZDQVQpOw0KCX0NCgkNCglmdW5jdGlvbiBlbmRTYWxlKCkgew0KCQkvLyBEbyBub3QgZW5kIGFuIGFscmVhZHkgZW5kZWQgc2FsZQ0KCQlpZiAoc2FsZUhhc0VuZGVkKSB0aHJvdzsNCgkJLy8gQ2FuJ3QgZW5kIGEgc2FsZSB0aGF0IGhhc24ndCBoaXQgaXRzIG1pbmltdW0gY2FwDQoJCWlmICghbWluQ2FwUmVhY2hlZCkgdGhyb3c7DQoJCS8vIE9ubHkgYWxsb3cgdGhlIG93bmVyIHRvIGVuZCB0aGUgc2FsZQ0KCQlpZiAobXNnLnNlbmRlciAhPSBleGVjdXRvcikgdGhyb3c7DQoJCQ0KCQlzYWxlSGFzRW5kZWQgPSB0cnVlOw0KDQoJCS8vIENhbGN1bGF0ZSBhbmQgY3JlYXRlIGRldmVsb3BlciBhbmQgcmVzZXJ2ZSBwb3J0aW9uIG9mIENBVA0KCQl1aW50MjU2IGFkZGl0aW9uYWxDQVQgPSAodG90YWxTdXBwbHkubXVsKEFERElUSU9OQUxfUE9SVElPTikpLmRpdigxMDAgLSBBRERJVElPTkFMX1BPUlRJT04pOw0KCQl1aW50MjU2IHRvdGFsU3VwcGx5U2FmZSA9IHRvdGFsU3VwcGx5LmFkZChhZGRpdGlvbmFsQ0FUKTsNCg0KCQl1aW50MjU2IHJlc2VydmVTaGFyZSA9IChhZGRpdGlvbmFsQ0FULm11bChSRVNFUlZFX1BPUlRJT04pKS5kaXYoQURESVRJT05BTF9QT1JUSU9OKTsNCgkJdWludDI1NiBkZXZTaGFyZSA9IGFkZGl0aW9uYWxDQVQuc3ViKHJlc2VydmVTaGFyZSk7DQoNCgkJdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseVNhZmU7DQoJCWJhbGFuY2VzW2RldkNBVERlc3RpbmF0aW9uXSA9IGRldlNoYXJlOw0KCQliYWxhbmNlc1tyZXNlcnZlQ0FURGVzdGluYXRpb25dID0gcmVzZXJ2ZVNoYXJlOw0KCQkNCgkJQ3JlYXRlZENBVChkZXZDQVREZXN0aW5hdGlvbiwgZGV2U2hhcmUpOw0KCQlDcmVhdGVkQ0FUKHJlc2VydmVDQVREZXN0aW5hdGlvbiwgcmVzZXJ2ZVNoYXJlKTsNCg0KCQlpZiAodGhpcy5iYWxhbmNlID4gMCkgew0KCQkJaWYgKCFkZXZFVEhEZXN0aW5hdGlvbi5jYWxsLnZhbHVlKHRoaXMuYmFsYW5jZSkoKSkgdGhyb3c7DQoJCX0NCgl9DQoNCgkvLyBBbGxvd3MgQmxvY2tDQVQgdG8gd2l0aGRyYXcgZnVuZHMNCglmdW5jdGlvbiB3aXRoZHJhd0Z1bmRzKCkgew0KCQkvLyBEaXNhbGxvdyB3aXRoZHJhdyBpZiB0aGUgbWluaW11bSBoYXNuJ3QgYmVlbiByZWFjaGVkDQoJCWlmICghbWluQ2FwUmVhY2hlZCkgdGhyb3c7DQoJCWlmICgwID09IHRoaXMuYmFsYW5jZSkgdGhyb3c7DQoNCgkJaWYgKCFkZXZFVEhEZXN0aW5hdGlvbi5jYWxsLnZhbHVlKHRoaXMuYmFsYW5jZSkoKSkgdGhyb3c7DQoJfQ0KCQ0KCS8vIFNpZ25hbHMgdGhhdCB0aGUgc2FsZSBoYXMgcmVhY2hlZCBpdHMgbWluaW11bSBmdW5kaW5nIGdvYWwNCglmdW5jdGlvbiB0cmlnZ2VyTWluQ2FwKCkgew0KCQlpZiAobXNnLnNlbmRlciAhPSBleGVjdXRvcikgdGhyb3c7DQoNCgkJbWluQ2FwUmVhY2hlZCA9IHRydWU7DQoJfQ0KDQoJLy8gT3BlbnMgcmVmdW5kaW5nLg0KCWZ1bmN0aW9uIHRyaWdnZXJSZWZ1bmQoKSB7DQoJCS8vIE5vIHJlZnVuZHMgaWYgdGhlIHNhbGUgd2FzIHN1Y2Nlc3NmdWwNCgkJaWYgKHNhbGVIYXNFbmRlZCkgdGhyb3c7DQoJCS8vIE5vIHJlZnVuZHMgaWYgbWluaW11bSBjYXAgaXMgaGl0DQoJCWlmIChtaW5DYXBSZWFjaGVkKSB0aHJvdzsNCgkJLy8gTm8gcmVmdW5kcyBpZiB0aGUgc2FsZSBpcyBzdGlsbCBwcm9ncmVzc2luZw0KCQlpZiAoYmxvY2subnVtYmVyIDwgc2FsZUVuZEJsb2NrKSB0aHJvdzsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gZXhlY3V0b3IpIHRocm93Ow0KDQoJCWFsbG93UmVmdW5kID0gdHJ1ZTsNCgl9DQoNCglmdW5jdGlvbiByZWZ1bmQoKSBleHRlcm5hbCB7DQoJCS8vIE5vIHJlZnVuZHMgdW50aWwgaXQgaXMgYXBwcm92ZWQNCgkJaWYgKCFhbGxvd1JlZnVuZCkgdGhyb3c7DQoJCS8vIE5vdGhpbmcgdG8gcmVmdW5kDQoJCWlmICgwID09IEVUSENvbnRyaWJ1dGVkW21zZy5zZW5kZXJdKSB0aHJvdzsNCg0KCQkvLyBEbyB0aGUgcmVmdW5kLg0KCQl1aW50MjU2IGV0aGVyQW1vdW50ID0gRVRIQ29udHJpYnV0ZWRbbXNnLnNlbmRlcl07DQoJCUVUSENvbnRyaWJ1dGVkW21zZy5zZW5kZXJdID0gMDsNCg0KCQlDQVRSZWZ1bmRlZEZvcldlaShtc2cuc2VuZGVyLCBldGhlckFtb3VudCk7DQoJCWlmICghbXNnLnNlbmRlci5zZW5kKGV0aGVyQW1vdW50KSkgdGhyb3c7DQoJfQ0KDQoJZnVuY3Rpb24gY2hhbmdlRGV2ZWxvcGVyRVRIRGVzdGluYXRpb25BZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIHsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gZXhlY3V0b3IpIHRocm93Ow0KCQlkZXZFVEhEZXN0aW5hdGlvbiA9IF9uZXdBZGRyZXNzOw0KCX0NCgkNCglmdW5jdGlvbiBjaGFuZ2VEZXZlbG9wZXJDQVREZXN0aW5hdGlvbkFkZHJlc3MoYWRkcmVzcyBfbmV3QWRkcmVzcykgew0KCQlpZiAobXNnLnNlbmRlciAhPSBleGVjdXRvcikgdGhyb3c7DQoJCWRldkNBVERlc3RpbmF0aW9uID0gX25ld0FkZHJlc3M7DQoJfQ0KCQ0KCWZ1bmN0aW9uIGNoYW5nZVJlc2VydmVDQVREZXN0aW5hdGlvbkFkZHJlc3MoYWRkcmVzcyBfbmV3QWRkcmVzcykgew0KCQlpZiAobXNnLnNlbmRlciAhPSBleGVjdXRvcikgdGhyb3c7DQoJCXJlc2VydmVDQVREZXN0aW5hdGlvbiA9IF9uZXdBZGRyZXNzOw0KCX0NCgkNCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHsNCgkJLy8gQ2Fubm90IHRyYW5zZmVyIHVubGVzcyB0aGUgbWluaW11bSBjYXAgaXMgaGl0DQoJCWlmICghbWluQ2FwUmVhY2hlZCkgdGhyb3c7DQoJCQ0KCQlzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7DQoJfQ0KCQ0KCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHsNCgkJLy8gQ2Fubm90IHRyYW5zZmVyIHVubGVzcyB0aGUgbWluaW11bSBjYXAgaXMgaGl0DQoJCWlmICghbWluQ2FwUmVhY2hlZCkgdGhyb3c7DQoJCQ0KCQlzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsNCgl9DQp9'