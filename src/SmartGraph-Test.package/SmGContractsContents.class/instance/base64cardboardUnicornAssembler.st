base 64 content
base64cardboardUnicornAssembler
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KY29udHJhY3QgQ2FyZGJvYXJkVW5pY29ybnMgew0KICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIHdobywgdWludCB2YWx1ZSk7DQogIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX25ld093bmVyKTsNCiAgZnVuY3Rpb24gd2l0aGRyYXcoKTsNCiAgZnVuY3Rpb24gd2l0aGRyYXdGb3JlaWduVG9rZW5zKGFkZHJlc3MgX3Rva2VuQ29udHJhY3QpOw0KfQ0KY29udHJhY3QgUmVhbFVuaWNvcm5Db25ncmVzcyB7DQogIHVpbnQgcHVibGljIHByaWNlT2ZBVW5pY29ybkluRmlubmV5Ow0KfQ0KY29udHJhY3QgRm9yZWlnblRva2VuIHsNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKTsNCn0NCg0KY29udHJhY3QgQ2FyZGJvYXJkVW5pY29ybkFzc2VtYmxlciB7DQogIGFkZHJlc3MgcHVibGljIGNhcmRib2FyZFVuaWNvcm5Ub2tlbkFkZHJlc3M7DQogIGFkZHJlc3MgcHVibGljIHJlYWxVbmljb3JuQWRkcmVzcyA9IDB4ZkI2OTE2MDk1Y2ExZGY2MGJCNzlDZTkyY0UzRWE3NGMzN2M1ZDM1OTsNCiAgYWRkcmVzcyBwdWJsaWMgb3duZXIgPSBtc2cuc2VuZGVyOw0KICB1aW50IHB1YmxpYyBwcmljZVBlclVuaWNvcm4gPSAxIGZpbm5leTsNCiAgdWludCBwdWJsaWMgbGFzdFByaWNlU2V0RGF0ZSA9IDA7DQogIA0KICBldmVudCBQcmljZVVwZGF0ZSh1aW50IG5ld1ByaWNlLCBhZGRyZXNzIHVwZGF0ZXIpOw0KDQogIG1vZGlmaWVyIG9ubHlPd25lciB7DQogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsNCiAgICBfOw0KICB9DQogIA0KICAvKioNCiAgICogQ2hhbmdlIG93bmVyc2hpcCBvZiB0aGUgYXNzZW1ibGVyDQogICAqLw0KICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIHsNCiAgICBvd25lciA9IF9uZXdPd25lcjsNCiAgfQ0KICBmdW5jdGlvbiBjaGFuZ2VUb2tlbk93bmVyKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgew0KICAgIENhcmRib2FyZFVuaWNvcm5zIGN1ID0gQ2FyZGJvYXJkVW5pY29ybnMoY2FyZGJvYXJkVW5pY29yblRva2VuQWRkcmVzcyk7DQogICAgY3UuY2hhbmdlT3duZXIoX25ld093bmVyKTsNCiAgfQ0KICANCiAgLyoqDQogICAqIENoYW5nZSB0aGUgQ2FyZGJvYXJkVW5pY29ybnMgdG9rZW4gY29udHJhY3QgbWFuYWdlZCBieSB0aGlzIGNvbnRyYWN0DQogICAqLw0KICBmdW5jdGlvbiBjaGFuZ2VDYXJkYm9hcmRVbmljb3JuVG9rZW5BZGRyZXNzKGFkZHJlc3MgX25ld1Rva2VuQWRkcmVzcykgb25seU93bmVyIHsNCiAgICBDYXJkYm9hcmRVbmljb3JucyBjdSA9IENhcmRib2FyZFVuaWNvcm5zKF9uZXdUb2tlbkFkZHJlc3MpOw0KICAgIHJlcXVpcmUoY3Uub3duZXIoKSA9PSBhZGRyZXNzKHRoaXMpKTsgLy8gV2UgbXVzdCBiZSB0aGUgb3duZXIgb2YgdGhlIHRva2VuDQogICAgY2FyZGJvYXJkVW5pY29yblRva2VuQWRkcmVzcyA9IF9uZXdUb2tlbkFkZHJlc3M7DQogIH0NCiAgDQogIC8qKg0KICAgKiBDaGFuZ2UgdGhlIHJlYWwgdW5pY29ybiBjb250cmFjdCBsb2NhdGlvbi4NCiAgICogVGhpcyBjb250cmFjdCBpcyB1c2VkIGFzIGEgcHJpY2UgcmVmZXJlbmNlOyBzaG91bGQgdGhlIEV0aGVyZXVtIEZvdW5kYXRpb24NCiAgICogcmUtZGVwbG95IHRoZWlyIGNvbnRyYWN0LCB0aGlzIHNob3VsZCBiZSBjYWxsZWQgdG8gdXBkYXRlIHRoZSByZWZlcmVuY2UuDQogICAqLw0KICBmdW5jdGlvbiBjaGFuZ2VSZWFsVW5pY29ybkFkZHJlc3MoYWRkcmVzcyBfbmV3VW5pY29ybkFkZHJlc3MpIG9ubHlPd25lciB7DQogICAgcmVhbFVuaWNvcm5BZGRyZXNzID0gX25ld1VuaWNvcm5BZGRyZXNzOw0KICB9DQogIA0KICBmdW5jdGlvbiB3aXRoZHJhdyhib29sIF9pbmNsdWRlVG9rZW4pIG9ubHlPd25lciB7DQogICAgaWYgKF9pbmNsdWRlVG9rZW4pIHsNCiAgICAgIC8vIEZpcnN0IGhhdmUgdGhlIHRva2VuIGNvbnRyYWN0IHNlbmQgYWxsIGl0cyBmdW5kcyB0byBpdHMgb3duZXIgKHdoaWNoIGlzIHVzKQ0KICAgICAgQ2FyZGJvYXJkVW5pY29ybnMgY3UgPSBDYXJkYm9hcmRVbmljb3JucyhjYXJkYm9hcmRVbmljb3JuVG9rZW5BZGRyZXNzKTsNCiAgICAgIGN1LndpdGhkcmF3KCk7DQogICAgfQ0KDQogICAgLy8gVGhlbiBzZW5kIHRoYXQgd2hvbGUgdG90YWwgdG8gb3VyIG93bmVyDQogICAgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsNCiAgfQ0KICBmdW5jdGlvbiB3aXRoZHJhd0ZvcmVpZ25Ub2tlbnMoYWRkcmVzcyBfdG9rZW5Db250cmFjdCwgYm9vbCBfaW5jbHVkZVRva2VuKSBvbmx5T3duZXIgew0KICAgIEZvcmVpZ25Ub2tlbiB0b2tlbiA9IEZvcmVpZ25Ub2tlbihfdG9rZW5Db250cmFjdCk7DQoNCiAgICBpZiAoX2luY2x1ZGVUb2tlbikgew0KICAgICAgLy8gRmlyc3QgaGF2ZSB0aGUgdG9rZW4gY29udHJhY3Qgc2VuZCBpdHMgdG9rZW5zIHRvIGl0cyBvd25lciAod2hpY2ggaXMgdXMpDQogICAgICBDYXJkYm9hcmRVbmljb3JucyBjdSA9IENhcmRib2FyZFVuaWNvcm5zKGNhcmRib2FyZFVuaWNvcm5Ub2tlbkFkZHJlc3MpOw0KICAgICAgY3Uud2l0aGRyYXdGb3JlaWduVG9rZW5zKF90b2tlbkNvbnRyYWN0KTsNCiAgICB9DQoNCiAgICAvLyBUaGVuIHNlbmQgdGhhdCB3aG9sZSB0b3RhbCB0byBvdXIgb3duZXINCiAgICB1aW50MjU2IGFtb3VudCA9IHRva2VuLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsNCiAgICB0b2tlbi50cmFuc2Zlcihvd25lciwgYW1vdW50KTsNCiAgfQ0KDQogIC8qKg0KICAgKiBVcGRhdGUgdGhlIHByaWNlIG9mIGEgQ2FyZGJvYXJkVW5pY29ybiB0byBiZSAxLzEwMDAgYSByZWFsIFVuaWNvcm4ncyBwcmljZQ0KICAgKi8NCiAgZnVuY3Rpb24gdXBkYXRlUHJpY2VGcm9tUmVhbFVuaWNvcm5QcmljZSgpIHsNCiAgICByZXF1aXJlKGJsb2NrLnRpbWVzdGFtcCA+IGxhc3RQcmljZVNldERhdGUgKyA3IGRheXMpOyAvLyBJZiBvd25lciBzZXQgdGhlIHByaWNlLCBjYW5ub3Qgc3luYyByaWdodCBhZnRlcg0KICAgIFJlYWxVbmljb3JuQ29uZ3Jlc3MgY29uZ3Jlc3MgPSBSZWFsVW5pY29ybkNvbmdyZXNzKHJlYWxVbmljb3JuQWRkcmVzcyk7DQogICAgcHJpY2VQZXJVbmljb3JuID0gKGNvbmdyZXNzLnByaWNlT2ZBVW5pY29ybkluRmlubmV5KCkgKiAxIGZpbm5leSkgLyAxMDAwOw0KICAgIFByaWNlVXBkYXRlKHByaWNlUGVyVW5pY29ybiwgbXNnLnNlbmRlcik7DQogIH0NCiAgDQogIC8qKg0KICAgKiBTZXQgYSBzcGVjaWZpYyBwcmljZSBmb3IgYSBDYXJkYm9hcmRVbmljb3JuDQogICAqLw0KICBmdW5jdGlvbiBzZXRQcmljZSh1aW50IF9uZXdQcmljZSkgb25seU93bmVyIHsNCiAgICBwcmljZVBlclVuaWNvcm4gPSBfbmV3UHJpY2U7DQogICAgbGFzdFByaWNlU2V0RGF0ZSA9IGJsb2NrLnRpbWVzdGFtcDsNCiAgICBQcmljZVVwZGF0ZShwcmljZVBlclVuaWNvcm4sIG1zZy5zZW5kZXIpOw0KICB9DQogIA0KICAvKioNCiAgICogU3RyYXAgYSBob3JuIHRvIGEgaG9yc2UhDQogICAqLw0KICBmdW5jdGlvbiBhc3NlbWJsZVVuaWNvcm4oKSBwYXlhYmxlIHsNCiAgICBpZiAobXNnLnZhbHVlID49IHByaWNlUGVyVW5pY29ybikgew0KICAgICAgICBDYXJkYm9hcmRVbmljb3JucyBjdSA9IENhcmRib2FyZFVuaWNvcm5zKGNhcmRib2FyZFVuaWNvcm5Ub2tlbkFkZHJlc3MpOw0KICAgICAgICBjdS5taW50KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSAvIHByaWNlUGVyVW5pY29ybik7DQogICAgICAgIG93bmVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7DQogICAgfQ0KICB9DQogIA0KICBmdW5jdGlvbigpIHBheWFibGUgew0KICAgICAgYXNzZW1ibGVVbmljb3JuKCk7DQogIH0NCg0KfQ=='