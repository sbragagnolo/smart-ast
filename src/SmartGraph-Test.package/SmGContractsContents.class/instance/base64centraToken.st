base 64 content
base64centraToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMzsNCiAgICANCiAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgIC8vIERldmVsb3BlciBOZWNoZXNvdiBBbmRyZXk6IEZhY2Vib29rLmNvbS9OZWNoZXNvdiAgIA0KICAgLy8gRW5qb3kuIChjKSBQUkNSLm9yZyBJQ08gUGxhdGZvcm0gMjAxNy4gVGhlIFBSQ1IgTGljZW5jZS4NCiAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICANCiAgIC8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlDQogICAvLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjANCiAgY29udHJhY3QgRVJDMjBJbnRlcmZhY2Ugew0KICAgICAgLy8gR2V0IHRoZSB0b3RhbCB0b2tlbiBzdXBwbHkNCiAgICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSk7DQogICANCiAgICAgIC8vIEdldCB0aGUgYWNjb3VudCBiYWxhbmNlIG9mIGFub3RoZXIgYWNjb3VudCB3aXRoIGFkZHJlc3MgX293bmVyDQogICAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7DQogICANCiAgICAgIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgdG8gYWRkcmVzcyBfdG8NCiAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgIA0KICAgICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8NCiAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICANCiAgICAgIC8vIEFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50LCBtdWx0aXBsZSB0aW1lcywgdXAgdG8gdGhlIF92YWx1ZSBhbW91bnQuDQogICAgICAvLyBJZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2FpbiBpdCBvdmVyd3JpdGVzIHRoZSBjdXJyZW50IGFsbG93YW5jZSB3aXRoIF92YWx1ZS4NCiAgICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgcmVxdWlyZWQgZm9yIHNvbWUgREVYIGZ1bmN0aW9uYWxpdHkNCiAgICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICANCiAgICAgIC8vIFJldHVybnMgdGhlIGFtb3VudCB3aGljaCBfc3BlbmRlciBpcyBzdGlsbCBhbGxvd2VkIHRvIHdpdGhkcmF3IGZyb20gX293bmVyDQogICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsNCiAgIA0KICAgICAgLy8gVHJpZ2dlcmVkIHdoZW4gdG9rZW5zIGFyZSB0cmFuc2ZlcnJlZC4NCiAgICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOw0KICAgDQogICAgICAvLyBUcmlnZ2VyZWQgd2hlbmV2ZXIgYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgaXMgY2FsbGVkLg0KICAgICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7DQogIH0gIA0KICAgDQogIGNvbnRyYWN0IENlbnRyYVRva2VuIGlzIEVSQzIwSW50ZXJmYWNlIHsNCg0KICAgICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiQ2VudHJhIjsNCiAgICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJDZW50cmEgdG9rZW4iOw0KICAgICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7IA0KICAgICAgICAgICANCiAgICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IG1heFRva2VucyA9IDEwMDAwMDAwMCoxMCoqMTg7IA0KICAgICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgb3duZXJTdXBwbHkgPSBtYXhUb2tlbnMqMzIvMTAwOw0KICAgICAgdWludDI1NiBfdG90YWxTdXBwbHkgPSBvd25lclN1cHBseTsgIA0KDQogICAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbl9wcmljZSA9IDEvNDAwKjEwKioxODsgDQogICAgICB1aW50IHB1YmxpYyBjb25zdGFudCBpY29fc3RhcnQgPSAxNTAxODkxMjAwOw0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgaWNvX2ZpbmlzaCA9IDE1MDcyNDgwMDA7IA0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWluVmFsdWVQcmUgPSAxLzEwKjEwKioxODsgDQogICAgICB1aW50IHB1YmxpYyBjb25zdGFudCBtaW5WYWx1ZSA9IDEvMTAqMTAqKjE4OyANCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IG1heFZhbHVlID0gMzAwMCoxMCoqMTg7ICAgICAgIA0KDQogICAgICB1aW50IHB1YmxpYyBjb25zdGFudCBjYXJkX2dvbGRfbWluYW1vdW50ICA9IDMwKjEwKioxODsNCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNhcmRfZ29sZF9maXJzdCA9IDEwMDA7DQogICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgY2FyZHNfZ29sZF9jaGVjazsgDQogICAgICBhZGRyZXNzW10gcHVibGljIGNhcmRzX2dvbGQ7DQoNCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNhcmRfYmxhY2tfbWluYW1vdW50ID0gMTAwKjEwKioxODsNCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNhcmRfYmxhY2tfZmlyc3QgPSA1MDA7DQogICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGNhcmRzX2JsYWNrX2NoZWNrOyANCiAgICAgIGFkZHJlc3NbXSBwdWJsaWMgY2FyZHNfYmxhY2s7DQoNCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNhcmRfdGl0YW5pdW1fbWluYW1vdW50ICA9IDUwMCoxMCoqMTg7DQogICAgICB1aW50IHB1YmxpYyBjb25zdGFudCBjYXJkX3RpdGFuaXVtX2ZpcnN0ID0gMjAwOw0KICAgICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGNhcmRzX3RpdGFuaXVtX2NoZWNrOyANCiAgICAgIGFkZHJlc3NbXSBwdWJsaWMgY2FyZHNfdGl0YW5pdW07DQoNCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNhcmRfYmx1ZV9taW5hbW91bnQgID0gNS8xMCoxMCoqMTg7DQogICAgICB1aW50IHB1YmxpYyBjb25zdGFudCBjYXJkX2JsdWVfZmlyc3QgPSAxMDAwMDAwMDA7DQogICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgY2FyZHNfYmx1ZV9jaGVjazsgDQogICAgICBhZGRyZXNzW10gcHVibGljIGNhcmRzX2JsdWU7DQoNCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNhcmRfc3RhcnRfbWluYW1vdW50ICA9IDEvMTAqMTAqKjE4Ow0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgY2FyZF9zdGFydF9maXJzdCA9IDEwMDAwMDAwMDsNCiAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBjYXJkc19zdGFydF9jaGVjazsgDQogICAgICBhZGRyZXNzW10gcHVibGljIGNhcmRzX3N0YXJ0Ow0KDQogICAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsgICAgICANCiAgICAgIA0KICAgICAgLy8gT3duZXIgb2YgdGhpcyBjb250cmFjdA0KICAgICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQogICANCiAgICAgIC8vIEJhbGFuY2VzIGZvciBlYWNoIGFjY291bnQNCiAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsNCiAgIA0KICAgICAgLy8gT3duZXIgb2YgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IHRvIGFub3RoZXIgYWNjb3VudA0KICAgICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7DQogICANCiAgICAgIC8vIEZ1bmN0aW9ucyB3aXRoIHRoaXMgbW9kaWZpZXIgY2FuIG9ubHkgYmUgZXhlY3V0ZWQgYnkgdGhlIG93bmVyDQogICAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7DQogICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgICAgICAgICAgdGhyb3c7DQogICAgICAgICAgfQ0KICAgICAgICAgIF87DQogICAgICB9ICAgICAgDQogICANCiAgICAgIC8vIENvbnN0cnVjdG9yDQogICAgICBmdW5jdGlvbiBDZW50cmFUb2tlbigpIHsNCiAgICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7DQogICAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gb3duZXJTdXBwbHk7DQogICAgICB9DQogICAgICANCiAgICAgIC8vZGVmYXVsdCBmdW5jdGlvbiBmb3IgYnV5IHRva2VucyAgICAgIA0KICAgICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsgICAgICAgIA0KICAgICAgICAgIHRva2Vuc19idXkoKTsgICAgICAgIA0KICAgICAgfQ0KICAgICAgDQogICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpIHsNCiAgICAgICAgICB0b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseTsNCiAgICAgIH0NCg0KICAgICAgLy9XaXRoZHJhdyBtb25leSBmcm9tIGNvbnRyYWN0IGJhbGFuY2UgdG8gb3duZXINCiAgICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgcmVzdWx0KSB7DQogICAgICAgICAgb3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpOw0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfQ0KICAgDQogICAgICAvLyBXaGF0IGlzIHRoZSBiYWxhbmNlIG9mIGEgcGFydGljdWxhciBhY2NvdW50Pw0KICAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsNCiAgICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCiAgICAgIH0NCiAgIA0KICAgICAgLy8gVHJhbnNmZXIgdGhlIGJhbGFuY2UgZnJvbSBvd25lcidzIGFjY291bnQgdG8gYW5vdGhlciBhY2NvdW50DQogICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCg0KICAgICAgICAgIGlmKG5vdyA8IGljb19zdGFydCkgdGhyb3c7DQoNCiAgICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCANCiAgICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDANCiAgICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7DQogICAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7DQogICAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX2Ftb3VudDsNCiAgICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsNCiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgIA0KICAgICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8NCiAgICAgIC8vIFRoZSB0cmFuc2ZlckZyb20gbWV0aG9kIGlzIHVzZWQgZm9yIGEgd2l0aGRyYXcgd29ya2Zsb3csIGFsbG93aW5nIGNvbnRyYWN0cyB0byBzZW5kDQogICAgICAvLyB0b2tlbnMgb24geW91ciBiZWhhbGYsIGZvciBleGFtcGxlIHRvICJkZXBvc2l0IiB0byBhIGNvbnRyYWN0IGFkZHJlc3MgYW5kL29yIHRvIGNoYXJnZQ0KICAgICAgLy8gZmVlcyBpbiBzdWItY3VycmVuY2llczsgdGhlIGNvbW1hbmQgc2hvdWxkIGZhaWwgdW5sZXNzIHRoZSBfZnJvbSBhY2NvdW50IGhhcw0KICAgICAgLy8gZGVsaWJlcmF0ZWx5IGF1dGhvcml6ZWQgdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSB2aWEgc29tZSBtZWNoYW5pc207IHdlIHByb3Bvc2UNCiAgICAgIC8vIHRoZXNlIHN0YW5kYXJkaXplZCBBUElzIGZvciBhcHByb3ZhbDoNCiAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgNCiAgICAgICAgICBhZGRyZXNzIF9mcm9tLA0KICAgICAgICAgIGFkZHJlc3MgX3RvLA0KICAgICAgICAgIHVpbnQyNTYgX2Ftb3VudA0KICAgICApIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KDQogICAgICAgICBpZihub3cgPCBpY29fc3RhcnQpIHRocm93Ow0KDQogICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQNCiAgICAgICAgICAgICAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50DQogICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDANCiAgICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10pIHsNCiAgICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX2Ftb3VudDsNCiAgICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfYW1vdW50Ow0KICAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX2Ftb3VudDsNCiAgICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsNCiAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgfQ0KICAgICB9DQogIA0KICAgICAvLyBBbGxvdyBfc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIHlvdXIgYWNjb3VudCwgbXVsdGlwbGUgdGltZXMsIHVwIHRvIHRoZSBfdmFsdWUgYW1vdW50Lg0KICAgICAvLyBJZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2FpbiBpdCBvdmVyd3JpdGVzIHRoZSBjdXJyZW50IGFsbG93YW5jZSB3aXRoIF92YWx1ZS4NCiAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfYW1vdW50Ow0KICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOw0KICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgIH0NCiAgDQogICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsNCiAgICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOw0KICAgICB9DQogICAgIC8vZ2V0IHRvdGFsIGJsYWNrIGNhcmRzDQogICAgZnVuY3Rpb24gY2FyZHNfYmxhY2tfdG90YWwoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7IA0KICAgICAgcmV0dXJuIGNhcmRzX2JsYWNrLmxlbmd0aDsNCiAgICB9DQogICAgLy9nZXQgdG90YWwgZ29sZCBjYXJkcw0KICAgIGZ1bmN0aW9uIGNhcmRzX2dvbGRfdG90YWwoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7IA0KICAgICAgcmV0dXJuIGNhcmRzX2dvbGQubGVuZ3RoOw0KICAgIH0gICAgDQogICAgLy9nZXQgdG90YWwgdGl0YW5pdW0gY2FyZHMNCiAgICBmdW5jdGlvbiBjYXJkc190aXRhbml1bV90b3RhbCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsgDQogICAgICByZXR1cm4gY2FyZHNfdGl0YW5pdW0ubGVuZ3RoOw0KICAgIH0NCiAgICAvL2dldCB0b3RhbCBibHVlIGNhcmRzDQogICAgZnVuY3Rpb24gY2FyZHNfYmx1ZV90b3RhbCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsgDQogICAgICByZXR1cm4gY2FyZHNfYmx1ZS5sZW5ndGg7DQogICAgfQ0KDQogICAgLy9nZXQgdG90YWwgc3RhcnQgY2FyZHMNCiAgICBmdW5jdGlvbiBjYXJkc19zdGFydF90b3RhbCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsgDQogICAgICByZXR1cm4gY2FyZHNfc3RhcnQubGVuZ3RoOw0KICAgIH0NCg0KICAgICAgLyoqDQogICAgICAqIEJ1eSB0b2tlbnMgcHJlLXNhbGUgYW5kIHNhbGUgDQogICAgICAqLw0KICAgICAgZnVuY3Rpb24gdG9rZW5zX2J1eSgpIHBheWFibGUgcmV0dXJucyAoYm9vbCkgeyANCg0KICAgICAgICB1aW50IHRub3cgPSBub3c7DQogICAgICAgIA0KICAgICAgICBpZih0bm93ID4gaWNvX2ZpbmlzaCkgdGhyb3c7ICAgICAgICANCiAgICAgICAgaWYoX3RvdGFsU3VwcGx5ID49IG1heFRva2VucykgdGhyb3c7DQogICAgICAgIGlmKCEobXNnLnZhbHVlID49IHRva2VuX3ByaWNlKSkgdGhyb3c7DQogICAgICAgIGlmKCEobXNnLnZhbHVlID49IG1pblZhbHVlKSkgdGhyb3c7DQogICAgICAgIGlmKG1zZy52YWx1ZSA+IG1heFZhbHVlKSB0aHJvdzsNCg0KICAgICAgICB1aW50IHRva2Vuc19idXkgPSBtc2cudmFsdWUvdG9rZW5fcHJpY2UqMTAqKjE4Ow0KDQogICAgICAgIGlmKCEodG9rZW5zX2J1eSA+IDApKSB0aHJvdzsgICANCg0KICAgICAgICBpZih0bm93IDwgaWNvX3N0YXJ0KXsNCiAgICAgICAgICBpZighKG1zZy52YWx1ZSA+PSBtaW5WYWx1ZVByZSkpIHRocm93Ow0KICAgICAgICAgIHRva2Vuc19idXkgPSB0b2tlbnNfYnV5KjEyNS8xMDA7DQogICAgICAgIH0gDQogICAgICAgIGlmKChpY29fc3RhcnQgKyA4NjQwMCowIDw9IHRub3cpJiYodG5vdyA8IGljb19zdGFydCArIDg2NDAwKjIpKXsNCiAgICAgICAgICB0b2tlbnNfYnV5ID0gdG9rZW5zX2J1eSoxMjAvMTAwOw0KICAgICAgICB9IA0KICAgICAgICBpZigoaWNvX3N0YXJ0ICsgODY0MDAqMiA8PSB0bm93KSYmKHRub3cgPCBpY29fc3RhcnQgKyA4NjQwMCo3KSl7DQogICAgICAgICAgdG9rZW5zX2J1eSA9IHRva2Vuc19idXkqMTEwLzEwMDsgICAgICAgIA0KICAgICAgICB9IA0KICAgICAgICBpZigoaWNvX3N0YXJ0ICsgODY0MDAqNyA8PSB0bm93KSYmKHRub3cgPCBpY29fc3RhcnQgKyA4NjQwMCoxNCkpew0KICAgICAgICAgIHRva2Vuc19idXkgPSB0b2tlbnNfYnV5KjEwNS8xMDA7ICAgICAgICANCiAgICAgICAgfSAgICAgICAgIA0KDQogICAgICAgIGlmKF90b3RhbFN1cHBseS5hZGQodG9rZW5zX2J1eSkgPiBtYXhUb2tlbnMpIHRocm93Ow0KICAgICAgICBfdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHkuYWRkKHRva2Vuc19idXkpOw0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZCh0b2tlbnNfYnV5KTsgDQoNCiAgICAgICAgaWYoKG1zZy52YWx1ZSA+PSBjYXJkX2dvbGRfbWluYW1vdW50KQ0KICAgICAgICAgICYmKG1zZy52YWx1ZSA8IGNhcmRfYmxhY2tfbWluYW1vdW50KQ0KICAgICAgICAgICYmKGNhcmRzX2dvbGQubGVuZ3RoIDwgY2FyZF9nb2xkX2ZpcnN0KQ0KICAgICAgICAgICYmKGNhcmRzX2dvbGRfY2hlY2tbbXNnLnNlbmRlcl0gIT0gMSkNCiAgICAgICAgICApIHsNCiAgICAgICAgICBjYXJkc19nb2xkLnB1c2gobXNnLnNlbmRlcik7DQogICAgICAgICAgY2FyZHNfZ29sZF9jaGVja1ttc2cuc2VuZGVyXSA9IDE7DQogICAgICAgIH0gICAgICAgDQoNCiAgICAgICAgaWYoKG1zZy52YWx1ZSA+PSBjYXJkX2JsYWNrX21pbmFtb3VudCkNCiAgICAgICAgICAmJihtc2cudmFsdWUgPCBjYXJkX3RpdGFuaXVtX21pbmFtb3VudCkNCiAgICAgICAgICAmJihjYXJkc19ibGFjay5sZW5ndGggPCBjYXJkX2JsYWNrX2ZpcnN0KQ0KICAgICAgICAgICYmKGNhcmRzX2JsYWNrX2NoZWNrW21zZy5zZW5kZXJdICE9IDEpDQogICAgICAgICAgKSB7DQogICAgICAgICAgY2FyZHNfYmxhY2sucHVzaChtc2cuc2VuZGVyKTsNCiAgICAgICAgICBjYXJkc19ibGFja19jaGVja1ttc2cuc2VuZGVyXSA9IDE7DQogICAgICAgIH0gICAgICAgIA0KDQogICAgICAgIGlmKChtc2cudmFsdWUgPj0gY2FyZF90aXRhbml1bV9taW5hbW91bnQpDQogICAgICAgICAgJiYoY2FyZHNfdGl0YW5pdW0ubGVuZ3RoIDwgY2FyZF90aXRhbml1bV9maXJzdCkNCiAgICAgICAgICAmJihjYXJkc190aXRhbml1bV9jaGVja1ttc2cuc2VuZGVyXSAhPSAxKQ0KICAgICAgICAgICkgew0KICAgICAgICAgIGNhcmRzX3RpdGFuaXVtLnB1c2gobXNnLnNlbmRlcik7DQogICAgICAgICAgY2FyZHNfdGl0YW5pdW1fY2hlY2tbbXNnLnNlbmRlcl0gPSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYoKG1zZy52YWx1ZSA+PSBjYXJkX2JsdWVfbWluYW1vdW50KQ0KICAgICAgICAgICYmKG1zZy52YWx1ZSA8IGNhcmRfZ29sZF9taW5hbW91bnQpDQogICAgICAgICAgJiYoY2FyZHNfYmx1ZS5sZW5ndGggPCBjYXJkX2JsdWVfZmlyc3QpDQogICAgICAgICAgJiYoY2FyZHNfYmx1ZV9jaGVja1ttc2cuc2VuZGVyXSAhPSAxKQ0KICAgICAgICAgICkgew0KICAgICAgICAgIGNhcmRzX2JsdWUucHVzaChtc2cuc2VuZGVyKTsNCiAgICAgICAgICBjYXJkc19ibHVlX2NoZWNrW21zZy5zZW5kZXJdID0gMTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmKChtc2cudmFsdWUgPj0gY2FyZF9zdGFydF9taW5hbW91bnQpDQogICAgICAgICAgJiYobXNnLnZhbHVlIDwgY2FyZF9ibHVlX21pbmFtb3VudCkNCiAgICAgICAgICAmJihjYXJkc19zdGFydC5sZW5ndGggPCBjYXJkX3N0YXJ0X2ZpcnN0KQ0KICAgICAgICAgICYmKGNhcmRzX3N0YXJ0X2NoZWNrW21zZy5zZW5kZXJdICE9IDEpDQogICAgICAgICAgKSB7DQogICAgICAgICAgY2FyZHNfc3RhcnQucHVzaChtc2cuc2VuZGVyKTsNCiAgICAgICAgICBjYXJkc19zdGFydF9jaGVja1ttc2cuc2VuZGVyXSA9IDE7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIA0KIH0NCg0KIC8qKg0KICAgKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzDQogICAqLw0KICBsaWJyYXJ5IFNhZmVNYXRoIHsNCiAgICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsNCiAgICAgIHJldHVybiBjOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwDQogICAgICB1aW50IGMgPSBhIC8gYjsNCiAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkDQogICAgICByZXR1cm4gYzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgIGFzc2VydChiIDw9IGEpOw0KICAgICAgcmV0dXJuIGEgLSBiOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgdWludCBjID0gYSArIGI7DQogICAgICBhc3NlcnQoYyA+PSBhKTsNCiAgICAgIHJldHVybiBjOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7DQogICAgICBpZiAoIWFzc2VydGlvbikgew0KICAgICAgICB0aHJvdzsNCiAgICAgIH0NCiAgICB9DQogIH0='