base 64 content
base64centraToken1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCiAgICANCiAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgIC8vIERldmVsb3BlciBOZWNoZXNvdiBBbmRyZXk6IEZhY2Vib29rLmNvbS9OZWNoZXNvdiAgIA0KICAgLy8gRW5qb3kuIChjKSBQUkNSLm9yZyBJQ08gUGxhdGZvcm0gMjAxNy4gVGhlIFBSQ1IgTGljZW5jZS4NCiAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICANCiAgIC8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlDQogICAvLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjANCiAgY29udHJhY3QgRVJDMjBJbnRlcmZhY2Ugew0KICAgICAgLy8gR2V0IHRoZSB0b3RhbCB0b2tlbiBzdXBwbHkNCiAgICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSk7DQogICANCiAgICAgIC8vIEdldCB0aGUgYWNjb3VudCBiYWxhbmNlIG9mIGFub3RoZXIgYWNjb3VudCB3aXRoIGFkZHJlc3MgX293bmVyDQogICAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7DQogICANCiAgICAgIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgdG8gYWRkcmVzcyBfdG8NCiAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgIA0KICAgICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8NCiAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICANCiAgICAgIC8vIEFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50LCBtdWx0aXBsZSB0aW1lcywgdXAgdG8gdGhlIF92YWx1ZSBhbW91bnQuDQogICAgICAvLyBJZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2FpbiBpdCBvdmVyd3JpdGVzIHRoZSBjdXJyZW50IGFsbG93YW5jZSB3aXRoIF92YWx1ZS4NCiAgICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgcmVxdWlyZWQgZm9yIHNvbWUgREVYIGZ1bmN0aW9uYWxpdHkNCiAgICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICANCiAgICAgIC8vIFJldHVybnMgdGhlIGFtb3VudCB3aGljaCBfc3BlbmRlciBpcyBzdGlsbCBhbGxvd2VkIHRvIHdpdGhkcmF3IGZyb20gX293bmVyDQogICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsNCiAgIA0KICAgICAgLy8gVHJpZ2dlcmVkIHdoZW4gdG9rZW5zIGFyZSB0cmFuc2ZlcnJlZC4NCiAgICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOw0KICAgDQogICAgICAvLyBUcmlnZ2VyZWQgd2hlbmV2ZXIgYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgaXMgY2FsbGVkLg0KICAgICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7DQogIH0gIA0KICAgDQogIGNvbnRyYWN0IENlbnRyYVRva2VuIGlzIEVSQzIwSW50ZXJmYWNlIHsNCg0KICAgICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiQ2VudHJhIjsNCiAgICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJDZW50cmEgdG9rZW4iOw0KICAgICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7IA0KICAgICAgICAgICANCiAgICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IG1heFRva2VucyA9IDEwMDAwMDAwMCoxMCoqMTg7IA0KICAgICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgb3duZXJTdXBwbHkgPSBtYXhUb2tlbnMqMzIvMTAwOw0KICAgICAgdWludDI1NiBfdG90YWxTdXBwbHkgPSBvd25lclN1cHBseTsgIA0KDQogICAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbl9wcmljZSA9IDEvNDAwKjEwKioxODsgDQogICAgICB1aW50IHB1YmxpYyBjb25zdGFudCBpY29fc3RhcnQgPSAxNTAxODkxMjAwOw0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgaWNvX2ZpbmlzaCA9IDE1MDcyNDgwMDA7IA0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWluVmFsdWVQcmUgPSAxMDAqMTAqKjE4OyANCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IG1pblZhbHVlID0gMSoxMCoqMTg7IA0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWF4VmFsdWUgPSAzMDAwKjEwKioxODsgICAgICAgDQoNCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNhcmRfZ29sZF9taW5hbW91bnQgID0gMzAqMTAqKjE4Ow0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgY2FyZF9nb2xkX2ZpcnN0ID0gMTAwMDsNCiAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBjYXJkc19nb2xkX2NoZWNrOyANCiAgICAgIGFkZHJlc3NbXSBwdWJsaWMgY2FyZHNfZ29sZDsNCg0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgY2FyZF9ibGFja19taW5hbW91bnQgPSAxMDAqMTAqKjE4Ow0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgY2FyZF9ibGFja19maXJzdCA9IDUwMDsNCiAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgY2FyZHNfYmxhY2tfY2hlY2s7IA0KICAgICAgYWRkcmVzc1tdIHB1YmxpYyBjYXJkc19ibGFjazsNCg0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgY2FyZF90aXRhbml1bV9taW5hbW91bnQgID0gNTAwKjEwKioxODsNCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNhcmRfdGl0YW5pdW1fZmlyc3QgPSAyMDA7DQogICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgY2FyZHNfdGl0YW5pdW1fY2hlY2s7IA0KICAgICAgYWRkcmVzc1tdIHB1YmxpYyBjYXJkc190aXRhbml1bTsNCg0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgY2FyZF9ibHVlX21pbmFtb3VudCAgPSA1LzEwKjEwKioxODsNCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNhcmRfYmx1ZV9maXJzdCA9IDEwMDAwMDAwMDsNCiAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBjYXJkc19ibHVlX2NoZWNrOyANCiAgICAgIGFkZHJlc3NbXSBwdWJsaWMgY2FyZHNfYmx1ZTsNCg0KICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgY2FyZF9zdGFydF9taW5hbW91bnQgID0gMS8xMCoxMCoqMTg7DQogICAgICB1aW50IHB1YmxpYyBjb25zdGFudCBjYXJkX3N0YXJ0X2ZpcnN0ID0gMTAwMDAwMDAwOw0KICAgICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGNhcmRzX3N0YXJ0X2NoZWNrOyANCiAgICAgIGFkZHJlc3NbXSBwdWJsaWMgY2FyZHNfc3RhcnQ7DQoNCiAgICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OyAgICAgIA0KICAgICAgDQogICAgICAvLyBPd25lciBvZiB0aGlzIGNvbnRyYWN0DQogICAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCiAgIA0KICAgICAgLy8gQmFsYW5jZXMgZm9yIGVhY2ggYWNjb3VudA0KICAgICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOw0KICAgDQogICAgICAvLyBPd25lciBvZiBhY2NvdW50IGFwcHJvdmVzIHRoZSB0cmFuc2ZlciBvZiBhbiBhbW91bnQgdG8gYW5vdGhlciBhY2NvdW50DQogICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCiAgIA0KICAgICAgLy8gRnVuY3Rpb25zIHdpdGggdGhpcyBtb2RpZmllciBjYW4gb25seSBiZSBleGVjdXRlZCBieSB0aGUgb3duZXINCiAgICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsNCiAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgICB9DQogICAgICAgICAgXzsNCiAgICAgIH0gICAgICANCiAgIA0KICAgICAgLy8gQ29uc3RydWN0b3INCiAgICAgIGZ1bmN0aW9uIENlbnRyYVRva2VuKCkgew0KICAgICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBvd25lclN1cHBseTsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgLy9kZWZhdWx0IGZ1bmN0aW9uIGZvciBidXkgdG9rZW5zICAgICAgDQogICAgICBmdW5jdGlvbigpIHBheWFibGUgeyAgICAgICAgDQogICAgICAgICAgdG9rZW5zX2J1eSgpOyAgICAgICAgDQogICAgICB9DQogICAgICANCiAgICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSkgew0KICAgICAgICAgIHRvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5Ow0KICAgICAgfQ0KDQogICAgICAvL1dpdGhkcmF3IG1vbmV5IGZyb20gY29udHJhY3QgYmFsYW5jZSB0byBvd25lcg0KICAgICAgZnVuY3Rpb24gd2l0aGRyYXcoKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCByZXN1bHQpIHsNCiAgICAgICAgICBvd25lci5zZW5kKHRoaXMuYmFsYW5jZSk7DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQogICANCiAgICAgIC8vIFdoYXQgaXMgdGhlIGJhbGFuY2Ugb2YgYSBwYXJ0aWN1bGFyIGFjY291bnQ/DQogICAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgew0KICAgICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICAgICAgfQ0KICAgDQogICAgICAvLyBUcmFuc2ZlciB0aGUgYmFsYW5jZSBmcm9tIG93bmVyJ3MgYWNjb3VudCB0byBhbm90aGVyIGFjY291bnQNCiAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KDQogICAgICAgICAgaWYobm93IDwgaWNvX3N0YXJ0KSB0aHJvdzsNCg0KICAgICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50IA0KICAgICAgICAgICAgICAmJiBfYW1vdW50ID4gMA0KICAgICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10pIHsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX2Ftb3VudDsNCiAgICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfYW1vdW50Ow0KICAgICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOw0KICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgfQ0KICAgDQogICAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bw0KICAgICAgLy8gVGhlIHRyYW5zZmVyRnJvbSBtZXRob2QgaXMgdXNlZCBmb3IgYSB3aXRoZHJhdyB3b3JrZmxvdywgYWxsb3dpbmcgY29udHJhY3RzIHRvIHNlbmQNCiAgICAgIC8vIHRva2VucyBvbiB5b3VyIGJlaGFsZiwgZm9yIGV4YW1wbGUgdG8gImRlcG9zaXQiIHRvIGEgY29udHJhY3QgYWRkcmVzcyBhbmQvb3IgdG8gY2hhcmdlDQogICAgICAvLyBmZWVzIGluIHN1Yi1jdXJyZW5jaWVzOyB0aGUgY29tbWFuZCBzaG91bGQgZmFpbCB1bmxlc3MgdGhlIF9mcm9tIGFjY291bnQgaGFzDQogICAgICAvLyBkZWxpYmVyYXRlbHkgYXV0aG9yaXplZCB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlIHZpYSBzb21lIG1lY2hhbmlzbTsgd2UgcHJvcG9zZQ0KICAgICAgLy8gdGhlc2Ugc3RhbmRhcmRpemVkIEFQSXMgZm9yIGFwcHJvdmFsOg0KICAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKA0KICAgICAgICAgIGFkZHJlc3MgX2Zyb20sDQogICAgICAgICAgYWRkcmVzcyBfdG8sDQogICAgICAgICAgdWludDI1NiBfYW1vdW50DQogICAgICkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoNCiAgICAgICAgIGlmKG5vdyA8IGljb19zdGFydCkgdGhyb3c7DQoNCiAgICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudA0KICAgICAgICAgICAgICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQNCiAgICAgICAgICAgICAmJiBfYW1vdW50ID4gMA0KICAgICAgICAgICAgICYmIGJhbGFuY2VzW190b10gKyBfYW1vdW50ID4gYmFsYW5jZXNbX3RvXSkgew0KICAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfYW1vdW50Ow0KICAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7DQogICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfYW1vdW50Ow0KICAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOw0KICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICB9DQogICAgIH0NCiAgDQogICAgIC8vIEFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50LCBtdWx0aXBsZSB0aW1lcywgdXAgdG8gdGhlIF92YWx1ZSBhbW91bnQuDQogICAgIC8vIElmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIGl0IG92ZXJ3cml0ZXMgdGhlIGN1cnJlbnQgYWxsb3dhbmNlIHdpdGggX3ZhbHVlLg0KICAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7DQogICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCk7DQogICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgfQ0KICANCiAgICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgew0KICAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogICAgIH0NCiAgICAgLy9nZXQgdG90YWwgYmxhY2sgY2FyZHMNCiAgICBmdW5jdGlvbiBjYXJkc19ibGFja190b3RhbCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsgDQogICAgICByZXR1cm4gY2FyZHNfYmxhY2subGVuZ3RoOw0KICAgIH0NCiAgICAvL2dldCB0b3RhbCBnb2xkIGNhcmRzDQogICAgZnVuY3Rpb24gY2FyZHNfZ29sZF90b3RhbCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsgDQogICAgICByZXR1cm4gY2FyZHNfZ29sZC5sZW5ndGg7DQogICAgfSAgICANCiAgICAvL2dldCB0b3RhbCB0aXRhbml1bSBjYXJkcw0KICAgIGZ1bmN0aW9uIGNhcmRzX3RpdGFuaXVtX3RvdGFsKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgeyANCiAgICAgIHJldHVybiBjYXJkc190aXRhbml1bS5sZW5ndGg7DQogICAgfQ0KICAgIC8vZ2V0IHRvdGFsIGJsdWUgY2FyZHMNCiAgICBmdW5jdGlvbiBjYXJkc19ibHVlX3RvdGFsKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgeyANCiAgICAgIHJldHVybiBjYXJkc19ibHVlLmxlbmd0aDsNCiAgICB9DQoNCiAgICAvL2dldCB0b3RhbCBzdGFydCBjYXJkcw0KICAgIGZ1bmN0aW9uIGNhcmRzX3N0YXJ0X3RvdGFsKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgeyANCiAgICAgIHJldHVybiBjYXJkc19zdGFydC5sZW5ndGg7DQogICAgfQ0KDQogICAgICAvKioNCiAgICAgICogQnV5IHRva2VucyBwcmUtc2FsZSBhbmQgc2FsZSANCiAgICAgICovDQogICAgICBmdW5jdGlvbiB0b2tlbnNfYnV5KCkgcGF5YWJsZSByZXR1cm5zIChib29sKSB7IA0KDQogICAgICAgIHVpbnQgdG5vdyA9IG5vdzsNCiAgICAgICAgDQogICAgICAgIGlmKHRub3cgPiBpY29fZmluaXNoKSB0aHJvdzsgICAgICAgIA0KICAgICAgICBpZihfdG90YWxTdXBwbHkgPj0gbWF4VG9rZW5zKSB0aHJvdzsNCiAgICAgICAgaWYoIShtc2cudmFsdWUgPj0gdG9rZW5fcHJpY2UpKSB0aHJvdzsNCiAgICAgICAgaWYoIShtc2cudmFsdWUgPj0gbWluVmFsdWUpKSB0aHJvdzsNCiAgICAgICAgaWYobXNnLnZhbHVlID4gbWF4VmFsdWUpIHRocm93Ow0KDQogICAgICAgIHVpbnQgdG9rZW5zX2J1eSA9IG1zZy52YWx1ZS90b2tlbl9wcmljZSoxMCoqMTg7DQoNCiAgICAgICAgaWYoISh0b2tlbnNfYnV5ID4gMCkpIHRocm93OyAgIA0KDQogICAgICAgIGlmKHRub3cgPCBpY29fc3RhcnQpew0KICAgICAgICAgIGlmKCEobXNnLnZhbHVlID49IG1pblZhbHVlUHJlKSkgdGhyb3c7DQogICAgICAgICAgdG9rZW5zX2J1eSA9IHRva2Vuc19idXkqMTI1LzEwMDsNCiAgICAgICAgfSANCiAgICAgICAgaWYoKGljb19zdGFydCArIDg2NDAwKjAgPD0gdG5vdykmJih0bm93IDwgaWNvX3N0YXJ0ICsgODY0MDAqMikpew0KICAgICAgICAgIHRva2Vuc19idXkgPSB0b2tlbnNfYnV5KjEyMC8xMDA7DQogICAgICAgIH0gDQogICAgICAgIGlmKChpY29fc3RhcnQgKyA4NjQwMCoyIDw9IHRub3cpJiYodG5vdyA8IGljb19zdGFydCArIDg2NDAwKjcpKXsNCiAgICAgICAgICB0b2tlbnNfYnV5ID0gdG9rZW5zX2J1eSoxMTAvMTAwOyAgICAgICAgDQogICAgICAgIH0gDQogICAgICAgIGlmKChpY29fc3RhcnQgKyA4NjQwMCo3IDw9IHRub3cpJiYodG5vdyA8IGljb19zdGFydCArIDg2NDAwKjE0KSl7DQogICAgICAgICAgdG9rZW5zX2J1eSA9IHRva2Vuc19idXkqMTA1LzEwMDsgICAgICAgIA0KICAgICAgICB9ICAgICAgICAgDQoNCiAgICAgICAgaWYoX3RvdGFsU3VwcGx5LmFkZCh0b2tlbnNfYnV5KSA+IG1heFRva2VucykgdGhyb3c7DQogICAgICAgIF90b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseS5hZGQodG9rZW5zX2J1eSk7DQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKHRva2Vuc19idXkpOyANCg0KICAgICAgICBpZigobXNnLnZhbHVlID49IGNhcmRfZ29sZF9taW5hbW91bnQpDQogICAgICAgICAgJiYobXNnLnZhbHVlIDwgY2FyZF9ibGFja19taW5hbW91bnQpDQogICAgICAgICAgJiYoY2FyZHNfZ29sZC5sZW5ndGggPCBjYXJkX2dvbGRfZmlyc3QpDQogICAgICAgICAgJiYoY2FyZHNfZ29sZF9jaGVja1ttc2cuc2VuZGVyXSAhPSAxKQ0KICAgICAgICAgICkgew0KICAgICAgICAgIGNhcmRzX2dvbGQucHVzaChtc2cuc2VuZGVyKTsNCiAgICAgICAgICBjYXJkc19nb2xkX2NoZWNrW21zZy5zZW5kZXJdID0gMTsNCiAgICAgICAgfSAgICAgICANCg0KICAgICAgICBpZigobXNnLnZhbHVlID49IGNhcmRfYmxhY2tfbWluYW1vdW50KQ0KICAgICAgICAgICYmKG1zZy52YWx1ZSA8IGNhcmRfdGl0YW5pdW1fbWluYW1vdW50KQ0KICAgICAgICAgICYmKGNhcmRzX2JsYWNrLmxlbmd0aCA8IGNhcmRfYmxhY2tfZmlyc3QpDQogICAgICAgICAgJiYoY2FyZHNfYmxhY2tfY2hlY2tbbXNnLnNlbmRlcl0gIT0gMSkNCiAgICAgICAgICApIHsNCiAgICAgICAgICBjYXJkc19ibGFjay5wdXNoKG1zZy5zZW5kZXIpOw0KICAgICAgICAgIGNhcmRzX2JsYWNrX2NoZWNrW21zZy5zZW5kZXJdID0gMTsNCiAgICAgICAgfSAgICAgICAgDQoNCiAgICAgICAgaWYoKG1zZy52YWx1ZSA+PSBjYXJkX3RpdGFuaXVtX21pbmFtb3VudCkNCiAgICAgICAgICAmJihjYXJkc190aXRhbml1bS5sZW5ndGggPCBjYXJkX3RpdGFuaXVtX2ZpcnN0KQ0KICAgICAgICAgICYmKGNhcmRzX3RpdGFuaXVtX2NoZWNrW21zZy5zZW5kZXJdICE9IDEpDQogICAgICAgICAgKSB7DQogICAgICAgICAgY2FyZHNfdGl0YW5pdW0ucHVzaChtc2cuc2VuZGVyKTsNCiAgICAgICAgICBjYXJkc190aXRhbml1bV9jaGVja1ttc2cuc2VuZGVyXSA9IDE7DQogICAgICAgIH0NCg0KICAgICAgICBpZigobXNnLnZhbHVlID49IGNhcmRfYmx1ZV9taW5hbW91bnQpDQogICAgICAgICAgJiYobXNnLnZhbHVlIDwgY2FyZF9nb2xkX21pbmFtb3VudCkNCiAgICAgICAgICAmJihjYXJkc19ibHVlLmxlbmd0aCA8IGNhcmRfYmx1ZV9maXJzdCkNCiAgICAgICAgICAmJihjYXJkc19ibHVlX2NoZWNrW21zZy5zZW5kZXJdICE9IDEpDQogICAgICAgICAgKSB7DQogICAgICAgICAgY2FyZHNfYmx1ZS5wdXNoKG1zZy5zZW5kZXIpOw0KICAgICAgICAgIGNhcmRzX2JsdWVfY2hlY2tbbXNnLnNlbmRlcl0gPSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYoKG1zZy52YWx1ZSA+PSBjYXJkX3N0YXJ0X21pbmFtb3VudCkNCiAgICAgICAgICAmJihtc2cudmFsdWUgPCBjYXJkX2JsdWVfbWluYW1vdW50KQ0KICAgICAgICAgICYmKGNhcmRzX3N0YXJ0Lmxlbmd0aCA8IGNhcmRfc3RhcnRfZmlyc3QpDQogICAgICAgICAgJiYoY2FyZHNfc3RhcnRfY2hlY2tbbXNnLnNlbmRlcl0gIT0gMSkNCiAgICAgICAgICApIHsNCiAgICAgICAgICBjYXJkc19zdGFydC5wdXNoKG1zZy5zZW5kZXIpOw0KICAgICAgICAgIGNhcmRzX3N0YXJ0X2NoZWNrW21zZy5zZW5kZXJdID0gMTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfQ0KICAgICAgDQogfQ0KDQogLyoqDQogICAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MNCiAgICovDQogIGxpYnJhcnkgU2FmZU1hdGggew0KICAgIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgdWludCBjID0gYSAqIGI7DQogICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgICAgcmV0dXJuIGM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDANCiAgICAgIHVpbnQgYyA9IGEgLyBiOw0KICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQNCiAgICAgIHJldHVybiBjOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgICByZXR1cm4gYSAtIGI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgICB1aW50IGMgPSBhICsgYjsNCiAgICAgIGFzc2VydChjID49IGEpOw0KICAgICAgcmV0dXJuIGM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsNCiAgICAgIGlmICghYXNzZXJ0aW9uKSB7DQogICAgICAgIHRocm93Ow0KICAgICAgfQ0KICAgIH0NCiAgfQ=='