base 64 content
base64centrallyIssuedToken2
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyoqDQogKiBDZW50cmFsbHkgaXNzdWVkIEV0aGVyZXVtIHRva2VuLg0KICoNCiAqIFdlIG1peCBpbiBidXJuYWJsZSBhbmQgdXBncmFkZWFibGUgdHJhaXRzLg0KICoNCiAqIFRva2VuIHN1cHBseSBpcyBjcmVhdGVkIGluIHRoZSB0b2tlbiBjb250cmFjdCBjcmVhdGlvbiBhbmQgYWxsb2NhdGVkIHRvIG93bmVyLg0KICogVGhlIG93bmVyIGNhbiB0aGVuIHRyYW5zZmVyIGZyb20gaXRzIHN1cHBseSB0byBjcm93ZHNhbGUgcGFydGljaXBhbnRzLg0KICogVGhlIG93bmVyLCBvciBhbnlib2R5LCBjYW4gYnVybiBhbnkgZXhjZXNzaXZlIHRva2VucyB0aGV5IGFyZSBob2xkaW5nLg0KICoNCiAqLw0KDQovKioNCiAqICBOVFJZIENvaW50cmFjdCBjb250cmFjdCwgRVJDMjAgY29tcGxpYW50IChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwKQ0KICoNCiAqICBDb2RlIGlzIGJhc2VkIG9uIG11bHRpcGxlIHNvdXJjZXM6DQogKiAgaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMNCiAqICBodHRwczovL2dpdGh1Yi5jb20vVG9rZW5NYXJrZXROZXQvaWNvL2Jsb2IvbWFzdGVyL2NvbnRyYWN0cw0KICogIGh0dHBzOi8vZ2l0aHViLmNvbS9Db25zZW5TeXMvVG9rZW5zL2Jsb2IvbWFzdGVyL1Rva2VuX0NvbnRyYWN0cy9jb250cmFjdHMNCiAqLw0KDQoNCi8qKg0KICogQHRpdGxlIEVSQzIwQmFzaWMNCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQ0KICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQogKi8NCmNvbnRyYWN0IEVSQzIwQmFzaWMgew0KICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7DQp9DQoNCg0KLyoqDQogKiAgTlRSWSBDb2ludHJhY3QgY29udHJhY3QsIEVSQzIwIGNvbXBsaWFudCAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCkNCiAqDQogKiAgQ29kZSBpcyBiYXNlZCBvbiBtdWx0aXBsZSBzb3VyY2VzOg0KICogIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzDQogKiAgaHR0cHM6Ly9naXRodWIuY29tL1Rva2VuTWFya2V0TmV0L2ljby9ibG9iL21hc3Rlci9jb250cmFjdHMNCiAqICBodHRwczovL2dpdGh1Yi5jb20vQ29uc2VuU3lzL1Rva2Vucy9ibG9iL21hc3Rlci9Ub2tlbl9Db250cmFjdHMvY29udHJhY3RzDQogKi8NCg0KDQovKioNCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UNCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICovDQpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsNCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7DQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsNCn0NCg0KDQovKioNCiAqICBOVFJZIENvaW50cmFjdCBjb250cmFjdCwgRVJDMjAgY29tcGxpYW50IChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwKQ0KICoNCiAqICBDb2RlIGlzIGJhc2VkIG9uIG11bHRpcGxlIHNvdXJjZXM6DQogKiAgaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMNCiAqICBodHRwczovL2dpdGh1Yi5jb20vVG9rZW5NYXJrZXROZXQvaWNvL2Jsb2IvbWFzdGVyL2NvbnRyYWN0cw0KICogIGh0dHBzOi8vZ2l0aHViLmNvbS9Db25zZW5TeXMvVG9rZW5zL2Jsb2IvbWFzdGVyL1Rva2VuX0NvbnRyYWN0cy9jb250cmFjdHMNCiAqLw0KDQpjb250cmFjdCBFcnJvckhhbmRsZXIgew0KICAgIGJvb2wgcHVibGljIGlzSW5UZXN0TW9kZSA9IGZhbHNlOw0KICAgIGV2ZW50IGV2UmVjb3JkKGFkZHJlc3MgbXNnX3NlbmRlciwgdWludCBtc2dfdmFsdWUsIHN0cmluZyBtZXNzYWdlKTsNCg0KICAgIGZ1bmN0aW9uIGRvVGhyb3coc3RyaW5nIG1lc3NhZ2UpIGludGVybmFsIHsNCiAgICAgICAgZXZSZWNvcmQobXNnLnNlbmRlciwgbXNnLnZhbHVlLCBtZXNzYWdlKTsNCiAgICAgICAgaWYgKCFpc0luVGVzdE1vZGUpIHsNCiAgICAgICAgCXRocm93Ow0KCQl9DQogICAgfQ0KfQ0KDQovKioNCiAqICBOVFJZIENvaW50cmFjdCBjb250cmFjdCwgRVJDMjAgY29tcGxpYW50IChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwKQ0KICoNCiAqICBDb2RlIGlzIGJhc2VkIG9uIG11bHRpcGxlIHNvdXJjZXM6DQogKiAgaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMNCiAqICBodHRwczovL2dpdGh1Yi5jb20vVG9rZW5NYXJrZXROZXQvaWNvL2Jsb2IvbWFzdGVyL2NvbnRyYWN0cw0KICogIGh0dHBzOi8vZ2l0aHViLmNvbS9Db25zZW5TeXMvVG9rZW5zL2Jsb2IvbWFzdGVyL1Rva2VuX0NvbnRyYWN0cy9jb250cmFjdHMNCiAqLw0KDQovKioNCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MNCiAqLw0KbGlicmFyeSBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOw0KICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDANCiAgICB1aW50MjU2IGMgPSBhIC8gYjsNCiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZA0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgcmV0dXJuIGEgLSBiOw0KICB9DQoNCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgdWludDI1NiBjID0gYSArIGI7DQogICAgYXNzZXJ0KGMgPj0gYSk7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQp9DQoNCg0KLyoqDQogKiAgTlRSWSBDb2ludHJhY3QgY29udHJhY3QsIEVSQzIwIGNvbXBsaWFudCAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCkNCiAqDQogKiAgQ29kZSBpcyBiYXNlZCBvbiBtdWx0aXBsZSBzb3VyY2VzOg0KICogIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzDQogKiAgaHR0cHM6Ly9naXRodWIuY29tL1Rva2VuTWFya2V0TmV0L2ljby9ibG9iL21hc3Rlci9jb250cmFjdHMNCiAqICBodHRwczovL2dpdGh1Yi5jb20vQ29uc2VuU3lzL1Rva2Vucy9ibG9iL21hc3Rlci9Ub2tlbl9Db250cmFjdHMvY29udHJhY3RzDQogKi8NCg0KDQovKioNCiAqIFN0YW5kYXJkIEVSQzIwIHRva2VuIHdpdGggU2hvcnQgSGFuZCBBdHRhY2sgYW5kIGFwcHJvdmUoKSByYWNlIGNvbmRpdGlvbiBtaXRpZ2F0aW9uLg0KICoNCiAqIEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDoNCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbA0KICovDQpjb250cmFjdCBOVFJZU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgRXJyb3JIYW5kbGVyIHsNCiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQoNCiAgLyogTlRSWSBmdW5jdGlvbmFsIGlzIHBhdXNlZCBpZiB0aGVyZSBpcyBhbnkgZW1lcmdlbmN5ICovDQogIGJvb2wgcHVibGljIGVtZXJnZW5jeSA9IGZhbHNlOw0KDQogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50Ow0KDQogIC8qIEFjdHVhbCBiYWxhbmNlcyBvZiB0b2tlbiBob2xkZXJzICovDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsNCg0KICAvKiBhcHByb3ZlKCkgYWxsb3dhbmNlcyAqLw0KICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7DQogIA0KICAvKiBmcmVlemVBY2NvdW50KCkgZnJvemVuKCkgKi8NCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBmcm96ZW5BY2NvdW50Ow0KDQogIC8qIE5vdGlmeSBhY2NvdW50IGZyb3plbiBhY3Rpdml0eSAqLw0KICBldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZW4pOw0KDQogIC8qIEludGVyZmFjZSBkZWNsYXJhdGlvbiAqLw0KICBmdW5jdGlvbiBpc1Rva2VuKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wgd2VBcmUpIHsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuIA0KICAgKi8NCiAgbW9kaWZpZXIgb25seU93bmVyKCkgew0KICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7DQogICAgICBkb1Rocm93KCJPbmx5IE93bmVyISIpOw0KICAgIH0NCiAgICBfOw0KICB9DQoNCiAgLyoqDQogICAqIEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrDQogICAqDQogICAqIGh0dHA6Ly92ZXNzZW5lcy5jb20vdGhlLWVyYzIwLXNob3J0LWFkZHJlc3MtYXR0YWNrLWV4cGxhaW5lZC8NCiAgICovDQogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsNCiAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsNCiAgICAgICBkb1Rocm93KCJTaG9ydCBhZGRyZXNzIGF0dGFjayEiKTsNCiAgICAgfQ0KICAgICBfOw0KICB9DQoNCiAgbW9kaWZpZXIgc3RvcEluRW1lcmdlbmN5IHsNCiAgICBpZiAoZW1lcmdlbmN5KXsNCiAgICAgICAgZG9UaHJvdygiRW1lcmdlbmN5IHN0YXRlISIpOw0KICAgIH0NCiAgICBfOw0KICB9DQogIA0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHN0b3BJbkVtZXJnZW5jeSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAvLyBDaGVjayBpZiBmcm96ZW4gLy8NCiAgICBpZiAoZnJvemVuQWNjb3VudFttc2cuc2VuZGVyXSkgZG9UaHJvdygiQWNjb3VudCBmcmVlemVkISIpOyAgDQogICAgICAgICAgICAgICAgICANCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YiggX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCg0KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBzdG9wSW5FbWVyZ2VuY3kgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgLy8gQ2hlY2sgaWYgZnJvemVuIC8vDQogICAgaWYgKGZyb3plbkFjY291bnRbX2Zyb21dKSBkb1Rocm93KCJBY2NvdW50IGZyZWV6ZWQhIik7DQoNCiAgICB1aW50IF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsNCg0KICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsNCiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7DQogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7DQogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogIH0NCg0KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBzdG9wSW5FbWVyZ2VuY3kgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoNCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYA0KICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90DQogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6DQogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5DQogICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSBkb1Rocm93KCJBbGxvd2FuY2UgcmFjZSBjb25kaXRpb24hIik7DQoNCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsNCiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgfQ0KDQoNCiAgLyoqDQogICogSXQgaXMgY2FsbGVkIENpcmN1aXQgQnJlYWtlcnMgKFBhdXNlIGNvbnRyYWN0IGZ1bmN0aW9uYWxpdHkpLCBpdCBzdG9wIGV4ZWN1dGlvbiBpZiBjZXJ0YWluIGNvbmRpdGlvbnMgYXJlIG1ldCwgDQogICogYW5kIGNhbiBiZSB1c2VmdWwgd2hlbiBuZXcgZXJyb3JzIGFyZSBkaXNjb3ZlcmVkLiBGb3IgZXhhbXBsZSwgbW9zdCBhY3Rpb25zIG1heSBiZSBzdXNwZW5kZWQgaW4gYSBjb250cmFjdCBpZiBhIA0KICAqIGJ1ZyBpcyBkaXNjb3ZlcmVkLCBzbyB0aGUgbW9zdCBmZWFzaWJsZSBvcHRpb24gdG8gc3RvcCBhbmQgdXBkYXRlZCBtaWdyYXRpb24gbWVzc2FnZSBhYm91dCBsYXVuY2hpbmcgYW4gdXBkYXRlZCB2ZXJzaW9uIG9mIGNvbnRyYWN0LiANCiAgKiBAcGFyYW0gX3N0b3AgU3dpdGNoIHRoZSBjaXJjdWl0ZSBicmVha2VyIG9uIG9yIG9mZg0KICAqLw0KICBmdW5jdGlvbiBlbWVyZ2VuY3lTdG9wKGJvb2wgX3N0b3ApIG9ubHlPd25lciB7DQogICAgICBlbWVyZ2VuY3kgPSBfc3RvcDsNCiAgfQ0KDQogIC8qKg0KICAqIE93bmVyIGNhbiBzZXQgYW55IGFjY291bnQgaW50byBmcmVlemUgc3RhdGUuIEl0IGlzIGhlbHBmdWwgaW4gY2FzZSBpZiBhY2NvdW50IGhvbGRlciBoYXMgDQogICogbG9zdCBoaXMga2V5IGFuZCBoZSB3YW50IGFkbWluaXN0cmF0b3IgdG8gZnJlZXplIGFjY291bnQgdW50aWwgYWNjb3VudCBrZXkgaXMgcmVjb3ZlcmVkDQogICogQHBhcmFtIHRhcmdldCBUaGUgYWNjb3VudCBhZGRyZXNzDQogICogQHBhcmFtIGZyZWV6ZSBUaGUgc3RhdGUgb2YgYWNjb3VudA0KICAqLw0KICBmdW5jdGlvbiBmcmVlemVBY2NvdW50KGFkZHJlc3MgdGFyZ2V0LCBib29sIGZyZWV6ZSkgb25seU93bmVyIHsNCiAgICAgIGZyb3plbkFjY291bnRbdGFyZ2V0XSA9IGZyZWV6ZTsNCiAgICAgIEZyb3plbkZ1bmRzKHRhcmdldCwgZnJlZXplKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGZyb3plbihhZGRyZXNzIF90YXJnZXQpIGNvbnN0YW50IHJldHVybnMgKGJvb2wgZnJvemVuKSB7DQogICAgcmV0dXJuIGZyb3plbkFjY291bnRbX3RhcmdldF07DQogIH0NCg0KICAvKioNCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4NCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4gDQogICAqLw0KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgew0KICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7DQogICAgICBiYWxhbmNlc1tuZXdPd25lcl0gPSBiYWxhbmNlc1tvd25lcl07DQogICAgICBiYWxhbmNlc1tvd25lcl0gPSAwOw0KICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICAgIFRyYW5zZmVyKG93bmVyLCBuZXdPd25lcixiYWxhbmNlc1tuZXdPd25lcl0pOw0KICAgIH0NCiAgfQ0KDQp9DQoNCg0KLyoqDQogKiAgTlRSWSBDb2ludHJhY3QgY29udHJhY3QsIEVSQzIwIGNvbXBsaWFudCAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCkNCiAqDQogKiAgQ29kZSBpcyBiYXNlZCBvbiBtdWx0aXBsZSBzb3VyY2VzOg0KICogIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzDQogKiAgaHR0cHM6Ly9naXRodWIuY29tL1Rva2VuTWFya2V0TmV0L2ljby9ibG9iL21hc3Rlci9jb250cmFjdHMNCiAqICBodHRwczovL2dpdGh1Yi5jb20vQ29uc2VuU3lzL1Rva2Vucy9ibG9iL21hc3Rlci9Ub2tlbl9Db250cmFjdHMvY29udHJhY3RzDQogKi8NCg0KLyoqDQogKiBVcGdyYWRlIGFnZW50IGludGVyZmFjZSBpbnNwaXJlZCBieSBMdW55ci4NCiAqDQogKiBVcGdyYWRlIGFnZW50IHRyYW5zZmVycyB0b2tlbnMgdG8gYSBuZXcgY29udHJhY3QuDQogKiBVcGdyYWRlIGFnZW50IGl0c2VsZiBjYW4gYmUgdGhlIHRva2VuIGNvbnRyYWN0LCBvciBqdXN0IGEgbWlkZGxlIG1hbiBjb250cmFjdCBkb2luZyB0aGUgaGVhdnkgbGlmdGluZy4NCiAqLw0KY29udHJhY3QgVXBncmFkZUFnZW50IHsNCg0KICB1aW50IHB1YmxpYyBvcmlnaW5hbFN1cHBseTsNCg0KICAvKiogSW50ZXJmYWNlIG1hcmtlciAqLw0KICBmdW5jdGlvbiBpc1VwZ3JhZGVBZ2VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCg0KICBmdW5jdGlvbiB1cGdyYWRlRnJvbShhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSkgcHVibGljOw0KDQp9DQoNCg0KLyoqDQogKiAgTlRSWSBDb2ludHJhY3QgY29udHJhY3QsIEVSQzIwIGNvbXBsaWFudCAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCkNCiAqDQogKiAgQ29kZSBpcyBiYXNlZCBvbiBtdWx0aXBsZSBzb3VyY2VzOg0KICogIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzDQogKiAgaHR0cHM6Ly9naXRodWIuY29tL1Rva2VuTWFya2V0TmV0L2ljby9ibG9iL21hc3Rlci9jb250cmFjdHMNCiAqICBodHRwczovL2dpdGh1Yi5jb20vQ29uc2VuU3lzL1Rva2Vucy9ibG9iL21hc3Rlci9Ub2tlbl9Db250cmFjdHMvY29udHJhY3RzDQogKi8NCg0KDQovKioNCiAqIEEgdG9rZW4gdXBncmFkZSBtZWNoYW5pc20gd2hlcmUgdXNlcnMgY2FuIG9wdC1pbiBhbW91bnQgb2YgdG9rZW5zIHRvIHRoZSBuZXh0IHNtYXJ0IGNvbnRyYWN0IHJldmlzaW9uLg0KICoNCiAqIEZpcnN0IGVudmlzaW9uZWQgYnkgR29sZW0gYW5kIEx1bnlyIHByb2plY3RzLg0KICovDQpjb250cmFjdCBVcGdyYWRlYWJsZVRva2VuIGlzIE5UUllTdGFuZGFyZFRva2VuIHsNCg0KICAvKiogQ29udHJhY3QgLyBwZXJzb24gd2hvIGNhbiBzZXQgdGhlIHVwZ3JhZGUgcGF0aC4gVGhpcyBjYW4gYmUgdGhlIHNhbWUgYXMgdGVhbSBtdWx0aXNpZyB3YWxsZXQsIGFzIHdoYXQgaXQgaXMgd2l0aCBpdHMgZGVmYXVsdCB2YWx1ZS4gKi8NCiAgYWRkcmVzcyBwdWJsaWMgdXBncmFkZU1hc3RlcjsNCg0KICAvKiogVGhlIG5leHQgY29udHJhY3Qgd2hlcmUgdGhlIHRva2VucyB3aWxsIGJlIG1pZ3JhdGVkLiAqLw0KICBVcGdyYWRlQWdlbnQgcHVibGljIHVwZ3JhZGVBZ2VudDsNCg0KICAvKiogSG93IG1hbnkgdG9rZW5zIHdlIGhhdmUgdXBncmFkZWQgYnkgbm93LiAqLw0KICB1aW50MjU2IHB1YmxpYyB0b3RhbFVwZ3JhZGVkOw0KDQogIC8qKg0KICAgKiBVcGdyYWRlIHN0YXRlcy4NCiAgICoNCiAgICogLSBOb3RBbGxvd2VkOiBUaGUgY2hpbGQgY29udHJhY3QgaGFzIG5vdCByZWFjaGVkIGEgY29uZGl0aW9uIHdoZXJlIHRoZSB1cGdyYWRlIGNhbiBiZ3VuDQogICAqIC0gV2FpdGluZ0ZvckFnZW50OiBUb2tlbiBhbGxvd3MgdXBncmFkZSwgYnV0IHdlIGRvbid0IGhhdmUgYSBuZXcgYWdlbnQgeWV0DQogICAqIC0gUmVhZHlUb1VwZ3JhZGU6IFRoZSBhZ2VudCBpcyBzZXQsIGJ1dCBub3QgYSBzaW5nbGUgdG9rZW4gaGFzIGJlZW4gdXBncmFkZWQgeWV0DQogICAqIC0gVXBncmFkaW5nOiBVcGdyYWRlIGFnZW50IGlzIHNldCBhbmQgdGhlIGJhbGFuY2UgaG9sZGVycyBjYW4gdXBncmFkZSB0aGVpciB0b2tlbnMNCiAgICoNCiAgICovDQogIGVudW0gVXBncmFkZVN0YXRlIHtVbmtub3duLCBOb3RBbGxvd2VkLCBXYWl0aW5nRm9yQWdlbnQsIFJlYWR5VG9VcGdyYWRlLCBVcGdyYWRpbmd9DQoNCiAgLyoqDQogICAqIFNvbWVib2R5IGhhcyB1cGdyYWRlZCBzb21lIG9mIGhpcyB0b2tlbnMuDQogICAqLw0KICBldmVudCBVcGdyYWRlKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOw0KDQogIC8qKg0KICAgKiBOZXcgdXBncmFkZSBhZ2VudCBhdmFpbGFibGUuDQogICAqLw0KICBldmVudCBVcGdyYWRlQWdlbnRTZXQoYWRkcmVzcyBhZ2VudCk7DQoNCiAgLyoqDQogICAqIERvIG5vdCBhbGxvdyBjb25zdHJ1Y3Rpb24gd2l0aG91dCB1cGdyYWRlIG1hc3RlciBzZXQuDQogICAqLw0KICBmdW5jdGlvbiBVcGdyYWRlYWJsZVRva2VuKGFkZHJlc3MgX3VwZ3JhZGVNYXN0ZXIpIHsNCiAgICB1cGdyYWRlTWFzdGVyID0gX3VwZ3JhZGVNYXN0ZXI7DQogIH0NCg0KICAvKioNCiAgICogQWxsb3cgdGhlIHRva2VuIGhvbGRlciB0byB1cGdyYWRlIHNvbWUgb2YgdGhlaXIgdG9rZW5zIHRvIGEgbmV3IGNvbnRyYWN0Lg0KICAgKi8NCiAgZnVuY3Rpb24gdXBncmFkZSh1aW50MjU2IHZhbHVlKSBwdWJsaWMgew0KDQogICAgICBVcGdyYWRlU3RhdGUgc3RhdGUgPSBnZXRVcGdyYWRlU3RhdGUoKTsNCiAgICAgIGlmKCEoc3RhdGUgPT0gVXBncmFkZVN0YXRlLlJlYWR5VG9VcGdyYWRlIHx8IHN0YXRlID09IFVwZ3JhZGVTdGF0ZS5VcGdyYWRpbmcpKSB7DQogICAgICAgIGRvVGhyb3coIkNhbGxlZCBpbiBhIGJhZCBzdGF0ZSEiKTsNCiAgICAgIH0NCg0KICAgICAgLy8gVmFsaWRhdGUgaW5wdXQgdmFsdWUuDQogICAgICBpZiAodmFsdWUgPT0gMCkgZG9UaHJvdygiVmFsdWUgdG8gdXBncmFkZSBpcyB6ZXJvISIpOw0KDQogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1Yih2YWx1ZSk7DQoNCiAgICAgIC8vIFRha2UgdG9rZW5zIG91dCBmcm9tIGNpcmN1bGF0aW9uDQogICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1Yih2YWx1ZSk7DQogICAgICB0b3RhbFVwZ3JhZGVkID0gdG90YWxVcGdyYWRlZC5hZGQodmFsdWUpOw0KDQogICAgICAvLyBVcGdyYWRlIGFnZW50IHJlaXNzdWVzIHRoZSB0b2tlbnMNCiAgICAgIHVwZ3JhZGVBZ2VudC51cGdyYWRlRnJvbShtc2cuc2VuZGVyLCB2YWx1ZSk7DQogICAgICBVcGdyYWRlKG1zZy5zZW5kZXIsIHVwZ3JhZGVBZ2VudCwgdmFsdWUpOw0KICB9DQoNCiAgLyoqDQogICAqIFNldCBhbiB1cGdyYWRlIGFnZW50IHRoYXQgaGFuZGxlcw0KICAgKi8NCiAgZnVuY3Rpb24gc2V0VXBncmFkZUFnZW50KGFkZHJlc3MgYWdlbnQpIGV4dGVybmFsIHsNCg0KICAgICAgaWYoIWNhblVwZ3JhZGUoKSkgew0KICAgICAgICAvLyBUaGUgdG9rZW4gaXMgbm90IHlldCBpbiBhIHN0YXRlIHRoYXQgd2UgY291bGQgdGhpbmsgdXBncmFkaW5nDQogICAgICAgIGRvVGhyb3coIlRva2VuIHN0YXRlIGlzIG5vdCBmZWFzaWJsZSBmb3IgdXBncmFkaW5nIHlldCEiKTsNCiAgICAgIH0NCg0KICAgICAgaWYgKGFnZW50ID09IDB4MCkgZG9UaHJvdygiSW52YWxpZCBhZGRyZXNzISIpOw0KICAgICAgLy8gT25seSBhIG1hc3RlciBjYW4gZGVzaWduYXRlIHRoZSBuZXh0IGFnZW50DQogICAgICBpZiAobXNnLnNlbmRlciAhPSB1cGdyYWRlTWFzdGVyKSBkb1Rocm93KCJPbmx5IHVwZ3JhZGUgbWFzdGVyISIpOw0KICAgICAgLy8gVXBncmFkZSBoYXMgYWxyZWFkeSBiZWd1biBmb3IgYW4gYWdlbnQNCiAgICAgIGlmIChnZXRVcGdyYWRlU3RhdGUoKSA9PSBVcGdyYWRlU3RhdGUuVXBncmFkaW5nKSBkb1Rocm93KCJVcGdyYWRlIHN0YXJ0ZWQgYWxyZWFkeSEiKTsNCg0KICAgICAgdXBncmFkZUFnZW50ID0gVXBncmFkZUFnZW50KGFnZW50KTsNCg0KICAgICAgLy8gQmFkIGludGVyZmFjZQ0KICAgICAgaWYoIXVwZ3JhZGVBZ2VudC5pc1VwZ3JhZGVBZ2VudCgpKSBkb1Rocm93KCJCYWQgaW50ZXJmYWNlISIpOw0KICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdG9rZW4gc3VwcGxpZXMgbWF0Y2ggaW4gc291cmNlIGFuZCB0YXJnZXQNCiAgICAgIGlmICh1cGdyYWRlQWdlbnQub3JpZ2luYWxTdXBwbHkoKSAhPSB0b3RhbFN1cHBseSkgZG9UaHJvdygiVG90YWwgc3VwcGx5IHNvdXJjZSBpcyBub3QgZXF1YWxsIHRvIHRhcmdldCEiKTsNCg0KICAgICAgVXBncmFkZUFnZW50U2V0KHVwZ3JhZGVBZ2VudCk7DQogIH0NCg0KICAvKioNCiAgICogR2V0IHRoZSBzdGF0ZSBvZiB0aGUgdG9rZW4gdXBncmFkZS4NCiAgICovDQogIGZ1bmN0aW9uIGdldFVwZ3JhZGVTdGF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKFVwZ3JhZGVTdGF0ZSkgew0KICAgIGlmKCFjYW5VcGdyYWRlKCkpIHJldHVybiBVcGdyYWRlU3RhdGUuTm90QWxsb3dlZDsNCiAgICBlbHNlIGlmKGFkZHJlc3ModXBncmFkZUFnZW50KSA9PSAweDAwKSByZXR1cm4gVXBncmFkZVN0YXRlLldhaXRpbmdGb3JBZ2VudDsNCiAgICBlbHNlIGlmKHRvdGFsVXBncmFkZWQgPT0gMCkgcmV0dXJuIFVwZ3JhZGVTdGF0ZS5SZWFkeVRvVXBncmFkZTsNCiAgICBlbHNlIHJldHVybiBVcGdyYWRlU3RhdGUuVXBncmFkaW5nOw0KICB9DQoNCiAgLyoqDQogICAqIENoYW5nZSB0aGUgdXBncmFkZSBtYXN0ZXIuDQogICAqDQogICAqIFRoaXMgYWxsb3dzIHVzIHRvIHNldCBhIG5ldyBvd25lciBmb3IgdGhlIHVwZ3JhZGUgbWVjaGFuaXNtLg0KICAgKi8NCiAgZnVuY3Rpb24gc2V0VXBncmFkZU1hc3RlcihhZGRyZXNzIG1hc3RlcikgcHVibGljIHsNCiAgICAgIGlmIChtYXN0ZXIgPT0gMHgwKSBkb1Rocm93KCJJbnZhbGlkIGFkZHJlc3Mgb2YgdXBncmFkZSBtYXN0ZXIhIik7DQogICAgICBpZiAobXNnLnNlbmRlciAhPSB1cGdyYWRlTWFzdGVyKSBkb1Rocm93KCJPbmx5IHVwZ3JhZGUgbWFzdGVyISIpOw0KICAgICAgdXBncmFkZU1hc3RlciA9IG1hc3RlcjsNCiAgfQ0KDQogIC8qKg0KICAgKiBDaGlsZCBjb250cmFjdCBjYW4gZW5hYmxlIHRvIHByb3ZpZGUgdGhlIGNvbmRpdGlvbiB3aGVuIHRoZSB1cGdyYWRlIGNhbiBiZWd1bi4NCiAgICovDQogIGZ1bmN0aW9uIGNhblVwZ3JhZGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhib29sKSB7DQogICAgIHJldHVybiB0cnVlOw0KICB9DQoNCn0NCg0KLyoqDQogKiAgTlRSWSBDb2ludHJhY3QgY29udHJhY3QsIEVSQzIwIGNvbXBsaWFudCAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCkNCiAqDQogKiAgQ29kZSBpcyBiYXNlZCBvbiBtdWx0aXBsZSBzb3VyY2VzOg0KICogIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzDQogKiAgaHR0cHM6Ly9naXRodWIuY29tL1Rva2VuTWFya2V0TmV0L2ljby9ibG9iL21hc3Rlci9jb250cmFjdHMNCiAqICBodHRwczovL2dpdGh1Yi5jb20vQ29uc2VuU3lzL1Rva2Vucy9ibG9iL21hc3Rlci9Ub2tlbl9Db250cmFjdHMvY29udHJhY3RzDQogKi8NCg0KDQpjb250cmFjdCBCdXJuYWJsZVRva2VuIGlzIE5UUllTdGFuZGFyZFRva2VuIHsNCg0KICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBCVVJOX0FERFJFU1MgPSAwOw0KDQogIC8qKiBIb3cgbWFueSB0b2tlbnMgd2UgYnVybmVkICovDQogIGV2ZW50IEJ1cm5lZChhZGRyZXNzIGJ1cm5lciwgdWludCBidXJuZWRBbW91bnQpOw0KDQogIC8qKg0KICAgKiBCdXJuIGV4dHJhIHRva2VucyBmcm9tIGEgYmFsYW5jZS4NCiAgICoNCiAgICovDQogIGZ1bmN0aW9uIGJ1cm4odWludCBidXJuQW1vdW50KSB7DQogICAgYWRkcmVzcyBidXJuZXIgPSBtc2cuc2VuZGVyOw0KICAgIGJhbGFuY2VzW2J1cm5lcl0gPSBiYWxhbmNlc1tidXJuZXJdLnN1YihidXJuQW1vdW50KTsNCiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihidXJuQW1vdW50KTsNCiAgICBCdXJuZWQoYnVybmVyLCBidXJuQW1vdW50KTsNCiAgfQ0KfQ0KDQoNCmNvbnRyYWN0IENlbnRyYWxseUlzc3VlZFRva2VuIGlzIEJ1cm5hYmxlVG9rZW4sIFVwZ3JhZGVhYmxlVG9rZW4gew0KDQogIHN0cmluZyBwdWJsaWMgbmFtZTsNCiAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7DQogIHVpbnQgcHVibGljIGRlY2ltYWxzOw0KDQogIGZ1bmN0aW9uIENlbnRyYWxseUlzc3VlZFRva2VuKCkgVXBncmFkZWFibGVUb2tlbihvd25lcikgew0KICAgIG5hbWUgPSAiTm90YXJ5IFBsYXRmb3JtIFRva2VuIjsNCiAgICBzeW1ib2wgPSAiTlRSWSI7DQogICAgZGVjaW1hbHMgPSAxODsNCiAgICBvd25lciA9IDB4MTUzOEVGODAyMTNjZGUzMzlBMzMzRWU0MjBhODVjMjE5MDViMWIyRDsNCg0KICAgIHRvdGFsU3VwcGx5ID0gMTUwMDAwMDAwICogMSBldGhlcjsNCiAgICANCiAgICAvLyBBbGxvY2F0ZSBpbml0aWFsIGJhbGFuY2UgdG8gdGhlIG93bmVyIC8vDQogICAgYmFsYW5jZXNbb3duZXJdID0gMTUwMDAwMDAwICogMSBldGhlcjsNCg0KICAgIC8vIEZyZWV6ZSBub3RhcnkgdGVhbSBmdW5kcyBmb3Igb25lIHllYXIgKE9uZSBtb250aCB3aXRoIHByZSBpY28gYWxyZWFkeSBwYXNzZWQpLy8NCiAgICB1bmxvY2tlZEF0ID0gIG5vdyArIDMzMCAqIDEgZGF5czsNCiAgfQ0KDQogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRlYW1BbGxvY2F0aW9ucyA9IDE1MDAwMDAwICogMSBldGhlcjsNCiAgdWludDI1NiBwdWJsaWMgdW5sb2NrZWRBdDsNCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBhbGxvY2F0aW9uczsNCiAgZnVuY3Rpb24gYWxsb2NhdGUoKSBwdWJsaWMgew0KICAgICAgYWxsb2NhdGlvbnNbMHhhYjFjYjE3NDAzNDRBOTI4MGRDNTAyRjNCODU0NTI0OERjMzA0NWVBXSA9IDI1MDAwMDAgKiAxIGV0aGVyOw0KICAgICAgYWxsb2NhdGlvbnNbMHgzMzA3MDlBNTlBYjJEMUUxMTA1NjgzRjkyYzFFRTgxNDM5NTVhMzU3XSA9IDI1MDAwMDAgKiAxIGV0aGVyOw0KICAgICAgYWxsb2NhdGlvbnNbMHhBYTA4ODdmYzZlODg5NkM0QTgwQ2EzMzY4Q0ZkNTZEMjAzZEIzOWRiXSA9IDI1MDAwMDAgKiAxIGV0aGVyOw0KICAgICAgYWxsb2NhdGlvbnNbMHgxZmJBMWQyMjQzNUREM0U3RmE1YmE0YjQ0OUNDNTUwYTkzM0U3MmIzXSA9IDI1MDAwMDAgKiAxIGV0aGVyOw0KICAgICAgYWxsb2NhdGlvbnNbMHhDOWQ1RTJjN2U0MDM3M2FlNTc2YTM4Y0Q3ZTYyRTIyM0M5NWFCRkQ0XSA9IDUwMDAwMCAqIDEgZXRoZXI7DQogICAgICBhbGxvY2F0aW9uc1sweGFiYzBCNjRhMzhERTRiNzY3MzEzMjY4RjBkYjU0RjRjZjg4MTZEOUNdID0gNTAwMDAwICogMSBldGhlcjsNCiAgICAgIGFsbG9jYXRpb25zWzB4NWQ4NWJDRGU1MDYwQzVCZDAwREJlREY1RTA3RjQzQ0UzQ2NhZGU2Zl0gPSAyNTAwMDAgKiAxIGV0aGVyOw0KICAgICAgYWxsb2NhdGlvbnNbMHhlY2IxYjAyMzFDQkMwQjA0MDE1RjllNTEzMkM2MjQ2NUMxMjhCNTc4XSA9IDI1MDAwMCAqIDEgZXRoZXI7DQogICAgICBhbGxvY2F0aW9uc1sweEY5YjFDZmM3ZmUzQjYzYkVEYzU5NEFEMjAxMzJDQjA2YzE4RkQ1RjJdID0gMjUwMDAwICogMSBldGhlcjsNCiAgICAgIGFsbG9jYXRpb25zWzB4RGJiODlhODdkOWY5MUVBM2YwQWIwMzVhNjdFM0E5NTFBMDVkMDEzMF0gPSAyNTAwMDAgKiAxIGV0aGVyOw0KICAgICAgYWxsb2NhdGlvbnNbMHhDMTUzMDY0NUUyMUQyN0FCNGI1NjdCYWMzNDg3MjFlRTNFMjQ0Q2JkXSA9IDIwMDAwMCAqIDEgZXRoZXI7DQogICAgICBhbGxvY2F0aW9uc1sweGNmYjQ0MTYyMDMwZTZDQmNhODhlNjVEZmZBMjE5MTFlOTdjZTg1MzNdID0gMjAwMDAwICogMSBldGhlcjsNCiAgICAgIGFsbG9jYXRpb25zWzB4NjRmNzQ4YTVDNWU1MDREYkRmNjFkNDkyODJkNjIwMkJjMTMxMWMzRV0gPSAyMDAwMDAgKiAxIGV0aGVyOw0KICAgICAgYWxsb2NhdGlvbnNbMHhGRjIyRkEyQjNlNUUyMTgxN2IwMmE0NUJhNjkzQjdhQzAxNDg1YTlDXSA9IDIwMDAwMCAqIDEgZXRoZXI7DQogICAgICBhbGxvY2F0aW9uc1sweEM5ODU2MTEyRENiOGVFNDQ5QjgzNjA0NDM4NjExRWRDZjYxNDA4QUZdID0gMjAwMDAwICogMSBldGhlcjsNCiAgICAgIGFsbG9jYXRpb25zWzB4Njg5Q0NmRUFCRDk5MDgxRDA2MWFFMDcwYjFEQTVFMWY2ZTRCOWZCMl0gPSAyMDAwMDAwICogMSBldGhlcjsNCiAgfQ0KDQogIGZ1bmN0aW9uIHdpdGhEcmF3KCkgcHVibGljIHsNCiAgICAgIGlmKG5vdyA8IHVubG9ja2VkQXQpeyANCiAgICAgICAgICBkb1Rocm93KCJBbGxvY2F0aW9ucyBhcmUgZnJlZXplZCEiKTsNCiAgICAgIH0NCiAgICAgIGlmIChhbGxvY2F0aW9uc1ttc2cuc2VuZGVyXSA9PSAwKXsNCiAgICAgICAgICBkb1Rocm93KCJObyBhbGxvY2F0aW9uIGZvdW5kISIpOw0KICAgICAgfQ0KICAgICAgYmFsYW5jZXNbb3duZXJdIC09IGFsbG9jYXRpb25zW21zZy5zZW5kZXJdOw0KICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gYWxsb2NhdGlvbnNbbXNnLnNlbmRlcl07DQogICAgICBUcmFuc2Zlcihvd25lciwgbXNnLnNlbmRlciwgYWxsb2NhdGlvbnNbbXNnLnNlbmRlcl0pOw0KICAgICAgYWxsb2NhdGlvbnNbbXNnLnNlbmRlcl0gPSAwOw0KICAgICAgDQogIH0NCiAgDQogICBmdW5jdGlvbiAoKSB7DQogICAgICAgIC8vaWYgZXRoZXIgaXMgc2VudCB0byB0aGlzIGFkZHJlc3MsIHNlbmQgaXQgYmFjay4NCiAgICAgICAgdGhyb3c7DQogICAgfQ0KICANCn0='