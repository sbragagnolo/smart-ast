base 64 content
base64contribution2
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQoNCmNvbnRyYWN0IFNhZmVNYXRoIHsNCg0KICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsNCiAgICBpZiAoIWFzc2VydGlvbikgdGhyb3c7DQogIH0NCg0KICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSAqIGI7DQogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICBhc3NlcnQoYiA+IDApOw0KICAgIHVpbnQgYyA9IGEgLyBiOw0KICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCn0NCg0KDQpjb250cmFjdCBTdGFuZGFyZFRva2VuUHJvdG9jb2wgew0KDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRvdGFsU3VwcGx5KSB7fQ0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7fQ0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQ0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30NCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQ0KDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3JlY2lwaWVudCwgdWludDI1NiBfdmFsdWUpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOw0KDQp9DQoNCg0KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBTdGFuZGFyZFRva2VuUHJvdG9jb2wgew0KDQogICAgbW9kaWZpZXIgd2hlbl9jYW5fdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUpIF87DQogICAgfQ0KDQogICAgbW9kaWZpZXIgd2hlbl9jYW5fcmVjZWl2ZShhZGRyZXNzIF9yZWNpcGllbnQsIHVpbnQyNTYgX3ZhbHVlKSB7DQogICAgICAgIGlmIChiYWxhbmNlc1tfcmVjaXBpZW50XSArIF92YWx1ZSA+IGJhbGFuY2VzW19yZWNpcGllbnRdKSBfOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIHdoZW5faXNfYWxsb3dlZChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9kZWxlZ2F0ZSwgdWludDI1NiBfdmFsdWUpIHsNCiAgICAgICAgaWYgKGFsbG93ZWRbX2Zyb21dW19kZWxlZ2F0ZV0gPj0gX3ZhbHVlKSBfOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdmFsdWUpDQogICAgICAgIHdoZW5fY2FuX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF92YWx1ZSkNCiAgICAgICAgd2hlbl9jYW5fcmVjZWl2ZShfcmVjaXBpZW50LCBfdmFsdWUpDQogICAgICAgIHJldHVybnMgKGJvb2wgb19zdWNjZXNzKQ0KICAgIHsNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICBiYWxhbmNlc1tfcmVjaXBpZW50XSArPSBfdmFsdWU7DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF9yZWNpcGllbnQsIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9yZWNpcGllbnQsIHVpbnQyNTYgX3ZhbHVlKQ0KICAgICAgICB3aGVuX2Nhbl90cmFuc2ZlcihfZnJvbSwgX3ZhbHVlKQ0KICAgICAgICB3aGVuX2Nhbl9yZWNlaXZlKF9yZWNpcGllbnQsIF92YWx1ZSkNCiAgICAgICAgd2hlbl9pc19hbGxvd2VkKF9mcm9tLCBtc2cuc2VuZGVyLCBfdmFsdWUpDQogICAgICAgIHJldHVybnMgKGJvb2wgb19zdWNjZXNzKQ0KICAgIHsNCiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOw0KICAgICAgICBiYWxhbmNlc1tfcmVjaXBpZW50XSArPSBfdmFsdWU7DQogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfcmVjaXBpZW50LCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgew0KICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIG9fc3VjY2Vzcykgew0KICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBvX3JlbWFpbmluZykgew0KICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgICB9DQoNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCg0KfQ0KDQpjb250cmFjdCBHVVBUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsNCg0KCS8vRklFTERTDQoJc3RyaW5nIHB1YmxpYyBuYW1lID0gIkd1cHB5IjsNCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJHVVAiOw0KICAgIHVpbnQgcHVibGljIGRlY2ltYWxzID0gMzsNCg0KCS8vQ09OU1RBTlRTDQoJdWludCBwdWJsaWMgY29uc3RhbnQgTE9DS09VVF9QRVJJT0QgPSAxIHllYXJzOyAvL3RpbWUgYWZ0ZXIgZW5kIGRhdGUgdGhhdCBpbGxpcXVpZCBHVVAgY2FuIGJlIHRyYW5zZmVycmVkDQoNCgkvL0FTU0lHTkVEIElOIElOSVRJQUxJWkFUSU9ODQoJdWludCBwdWJsaWMgZW5kTWludGluZ1RpbWU7IC8vVGltZXN0YW1wIGFmdGVyIHdoaWNoIG5vIG1vcmUgdG9rZW5zIGNhbiBiZSBjcmVhdGVkDQoJYWRkcmVzcyBwdWJsaWMgbWludGVyOyAvL2FkZHJlc3Mgb2YgdGhlIGFjY291bnQgd2hpY2ggbWF5IG1pbnQgbmV3IHRva2Vucw0KDQoJbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgaWxsaXF1aWRCYWxhbmNlOyAvL0JhbGFuY2Ugb2YgJ0Zyb3plbiBmdW5kcycNCg0KCS8vTU9ESUZJRVJTDQoJLy9DYW4gb25seSBiZSBjYWxsZWQgYnkgY29udHJpYnV0aW9uIGNvbnRyYWN0Lg0KCW1vZGlmaWVyIG9ubHlfbWludGVyIHsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gbWludGVyKSB0aHJvdzsNCgkJXzsNCgl9DQoNCgkvLyBDYW4gb25seSBiZSBjYWxsZWQgaWYgaWxsaXF1aWQgdG9rZW5zIG1heSBiZSB0cmFuc2Zvcm1lZCBpbnRvIGxpcXVpZC4NCgkvLyBUaGlzIGhhcHBlbnMgd2hlbiBgTE9DS09VVF9QRVJJT0RgIG9mIHRpbWUgcGFzc2VzIGFmdGVyIGBlbmRNaW50aW5nVGltZWAuDQoJbW9kaWZpZXIgd2hlbl90aGF3YWJsZSB7DQoJCWlmIChub3cgPCBlbmRNaW50aW5nVGltZSArIExPQ0tPVVRfUEVSSU9EKSB0aHJvdzsNCgkJXzsNCgl9DQoNCgkvLyBDYW4gb25seSBiZSBjYWxsZWQgaWYgKGxpcXVpZCkgdG9rZW5zIG1heSBiZSB0cmFuc2ZlcnJlZC4gSGFwcGVucw0KCS8vIGltbWVkaWF0ZWx5IGFmdGVyIGBlbmRNaW50aW5nVGltZWAuDQoJbW9kaWZpZXIgd2hlbl90cmFuc2ZlcmFibGUgew0KCQlpZiAobm93IDwgZW5kTWludGluZ1RpbWUpIHRocm93Ow0KCQlfOw0KCX0NCg0KCS8vIENhbiBvbmx5IGJlIGNhbGxlZCBpZiB0aGUgYGNyb3dkZnVuZGVyYCBpcyBhbGxvd2VkIHRvIG1pbnQgdG9rZW5zLiBBbnkNCgkvLyB0aW1lIGJlZm9yZSBgZW5kTWludGluZ1RpbWVgLg0KCW1vZGlmaWVyIHdoZW5fbWludGFibGUgew0KCQlpZiAobm93ID49IGVuZE1pbnRpbmdUaW1lKSB0aHJvdzsNCgkJXzsNCgl9DQoNCgkvLyBJbml0aWFsaXphdGlvbiBjb250cmFjdCBhc3NpZ25zIGFkZHJlc3Mgb2YgY3Jvd2RmdW5kIGNvbnRyYWN0IGFuZCBlbmQgdGltZS4NCglmdW5jdGlvbiBHVVBUb2tlbihhZGRyZXNzIF9taW50ZXIsIHVpbnQgX2VuZE1pbnRpbmdUaW1lKSB7DQoJCWVuZE1pbnRpbmdUaW1lID0gX2VuZE1pbnRpbmdUaW1lOw0KCQltaW50ZXIgPSBfbWludGVyOw0KCX0NCg0KCS8vIENyZWF0ZSBuZXcgdG9rZW5zIHdoZW4gY2FsbGVkIGJ5IHRoZSBjcm93ZGZ1bmQgY29udHJhY3QuDQoJLy8gT25seSBjYWxsYWJsZSBiZWZvcmUgdGhlIGVuZCB0aW1lLg0KCWZ1bmN0aW9uIGNyZWF0ZVRva2VuKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludCBfdmFsdWUpDQoJCXdoZW5fbWludGFibGUNCgkJb25seV9taW50ZXINCgkJcmV0dXJucyAoYm9vbCBvX3N1Y2Nlc3MpDQoJew0KCQliYWxhbmNlc1tfcmVjaXBpZW50XSArPSBfdmFsdWU7DQoJCXRvdGFsU3VwcGx5ICs9IF92YWx1ZTsNCgkJcmV0dXJuIHRydWU7DQoJfQ0KDQoJLy8gQ3JlYXRlIGFuIGlsbGlxdWlkQmFsYW5jZSB3aGljaCBjYW5ub3QgYmUgdHJhZGVkIHVudGlsIGVuZCBvZiBsb2Nrb3V0IHBlcmlvZC4NCgkvLyBDYW4gb25seSBiZSBjYWxsZWQgYnkgY3Jvd2RmdW5kIGNvbnRyYWN0IGJlZm9yZSB0aGUgZW5kIHRpbWUuDQoJZnVuY3Rpb24gY3JlYXRlSWxsaXF1aWRUb2tlbihhZGRyZXNzIF9yZWNpcGllbnQsIHVpbnQgX3ZhbHVlKQ0KCQl3aGVuX21pbnRhYmxlDQoJCW9ubHlfbWludGVyDQoJCXJldHVybnMgKGJvb2wgb19zdWNjZXNzKQ0KCXsNCgkJaWxsaXF1aWRCYWxhbmNlW19yZWNpcGllbnRdICs9IF92YWx1ZTsNCgkJdG90YWxTdXBwbHkgKz0gX3ZhbHVlOw0KCQlyZXR1cm4gdHJ1ZTsNCgl9DQoNCgkvLyBNYWtlIHNlbmRlcidzIGlsbGlxdWlkIGJhbGFuY2UgbGlxdWlkIHdoZW4gY2FsbGVkIGFmdGVyIGxvY2tvdXQgcGVyaW9kLg0KCWZ1bmN0aW9uIG1ha2VMaXF1aWQoKQ0KCQl3aGVuX3RoYXdhYmxlDQoJew0KCQliYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBpbGxpcXVpZEJhbGFuY2VbbXNnLnNlbmRlcl07DQoJCWlsbGlxdWlkQmFsYW5jZVttc2cuc2VuZGVyXSA9IDA7DQoJfQ0KDQoJLy8gVHJhbnNmZXIgYW1vdW50IG9mIHRva2VucyBmcm9tIHNlbmRlciBhY2NvdW50IHRvIHJlY2lwaWVudC4NCgkvLyBPbmx5IGNhbGxhYmxlIGFmdGVyIHRoZSBjcm93ZCBmdW5kIGVuZCBkYXRlLg0KCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludCBfYW1vdW50KQ0KCQl3aGVuX3RyYW5zZmVyYWJsZQ0KCQlyZXR1cm5zIChib29sIG9fc3VjY2VzcykNCgl7DQoJCXJldHVybiBzdXBlci50cmFuc2ZlcihfcmVjaXBpZW50LCBfYW1vdW50KTsNCgl9DQoNCgkvLyBUcmFuc2ZlciBhbW91bnQgb2YgdG9rZW5zIGZyb20gYSBzcGVjaWZpZWQgYWRkcmVzcyB0byBhIHJlY2lwaWVudC4NCgkvLyBPbmx5IGNhbGxhYmxlIGFmdGVyIHRoZSBjcm93ZCBmdW5kIGVuZCBkYXRlLg0KCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9yZWNpcGllbnQsIHVpbnQgX2Ftb3VudCkNCgkJd2hlbl90cmFuc2ZlcmFibGUNCgkJcmV0dXJucyAoYm9vbCBvX3N1Y2Nlc3MpDQoJew0KCQlyZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfcmVjaXBpZW50LCBfYW1vdW50KTsNCgl9DQp9DQoNCg0KY29udHJhY3QgQ29udHJpYnV0aW9uIGlzIFNhZmVNYXRoIHsNCg0KCS8vRklFTERTDQoNCgkvL0NPTlNUQU5UUw0KCS8vVGltZSBsaW1pdHMNCgl1aW50IHB1YmxpYyBjb25zdGFudCBTVEFHRV9PTkVfVElNRV9FTkQgPSA1IGhvdXJzOw0KCXVpbnQgcHVibGljIGNvbnN0YW50IFNUQUdFX1RXT19USU1FX0VORCA9IDcyIGhvdXJzOw0KCXVpbnQgcHVibGljIGNvbnN0YW50IFNUQUdFX1RIUkVFX1RJTUVfRU5EID0gMiB3ZWVrczsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBTVEFHRV9GT1VSX1RJTUVfRU5EID0gNCB3ZWVrczsNCgkvL1ByaWNlcyBvZiBHVVANCgl1aW50IHB1YmxpYyBjb25zdGFudCBQUklDRV9TVEFHRV9PTkUgICA9IDQ4MDAwMDsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBQUklDRV9TVEFHRV9UV08gICA9IDQ0MDAwMDsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBQUklDRV9TVEFHRV9USFJFRSA9IDQwMDAwMDsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBQUklDRV9TVEFHRV9GT1VSICA9IDM2MDAwMDsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBQUklDRV9CVENTICAgICAgICA9IDQ4MDAwMDsNCgkvL0dVUCBUb2tlbiBMaW1pdHMNCgl1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfU1VQUExZID0gICAgICAgIDEwMDAwMDAwMDAwMDsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBBTExPQ19JTExJUVVJRF9URUFNID0gODAwMDAwMDAwMDsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBBTExPQ19MSVFVSURfVEVBTSA9ICAxMzAwMDAwMDAwMDsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBBTExPQ19CT1VOVElFUyA9ICAgICAgMjAwMDAwMDAwMDsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBBTExPQ19ORVdfVVNFUlMgPSAgICAxNzAwMDAwMDAwMDsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBBTExPQ19DUk9XRFNBTEUgPSAgICA2MDAwMDAwMDAwMDsNCgl1aW50IHB1YmxpYyBjb25zdGFudCBCVENTX1BPUlRJT05fTUFYID0gMzEyNTAgKiBQUklDRV9CVENTOw0KCS8vQVNTSUdORUQgSU4gSU5JVElBTElaQVRJT04NCgkvL1N0YXJ0IGFuZCBlbmQgdGltZXMNCgl1aW50IHB1YmxpYyBwdWJsaWNTdGFydFRpbWU7IC8vVGltZSBpbiBzZWNvbmRzIHB1YmxpYyBjcm93ZCBmdW5kIHN0YXJ0cy4NCgl1aW50IHB1YmxpYyBwcml2YXRlU3RhcnRUaW1lOyAvL1RpbWUgaW4gc2Vjb25kcyB3aGVuIEJUQ1N1aXNzZSBjYW4gcHVyY2hhc2UgdXAgdG8gMzEyNTAgRVRIIHdvcnRoIG9mIEdVUDsNCgl1aW50IHB1YmxpYyBwdWJsaWNFbmRUaW1lOyAvL1RpbWUgaW4gc2Vjb25kcyBjcm93ZHNhbGUgZW5kcw0KCS8vU3BlY2lhbCBBZGRyZXNzZXMNCglhZGRyZXNzIHB1YmxpYyBidGNzQWRkcmVzczsgLy9BZGRyZXNzIHVzZWQgYnkgQlRDU3Vpc3NlDQoJYWRkcmVzcyBwdWJsaWMgbXVsdGlzaWdBZGRyZXNzOyAvL0FkZHJlc3MgdG8gd2hpY2ggYWxsIGV0aGVyIGZsb3dzLg0KCWFkZHJlc3MgcHVibGljIG1hdGNocG9vbEFkZHJlc3M7IC8vQWRkcmVzcyB0byB3aGljaCBBTExPQ19CT1VOVElFUywgQUxMT0NfTElRVUlEX1RFQU0sIEFMTE9DX05FV19VU0VSUywgQUxMT0NfSUxMSVFVSURfVEVBTSBpcyBzZW50IHRvLg0KCWFkZHJlc3MgcHVibGljIG93bmVyQWRkcmVzczsgLy9BZGRyZXNzIG9mIHRoZSBjb250cmFjdCBvd25lci4gQ2FuIGhhbHQgdGhlIGNyb3dkc2FsZS4NCgkvL0NvbnRyYWN0cw0KCUdVUFRva2VuIHB1YmxpYyBndXBUb2tlbjsgLy9FeHRlcm5hbCB0b2tlbiBjb250cmFjdCBob2xsZGluZyB0aGUgR1VQDQoJLy9SdW5uaW5nIHRvdGFscw0KCXVpbnQgcHVibGljIGV0aGVyUmFpc2VkOyAvL1RvdGFsIEV0aGVyIHJhaXNlZC4NCgl1aW50IHB1YmxpYyBndXBTb2xkOyAvL1RvdGFsIEdVUCBjcmVhdGVkDQoJdWludCBwdWJsaWMgYnRjc1BvcnRpb25Ub3RhbDsgLy9Ub3RhbCBvZiBUb2tlbnMgcHVyY2hhc2VkIGJ5IEJUQyBTdWlzc2UuIE5vdCB0byBleGNlZWQgQlRDU19QT1JUSU9OX01BWC4NCgkvL2Jvb2xlYW5zDQoJYm9vbCBwdWJsaWMgaGFsdGVkOyAvL2hhbHRzIHRoZSBjcm93ZCBzYWxlIGlmIHRydWUuDQoNCgkvL0ZVTkNUSU9OIE1PRElGSUVSUw0KDQoJLy9JcyBjdXJyZW50bHkgaW4gdGhlIHBlcmlvZCBhZnRlciB0aGUgcHJpdmF0ZSBzdGFydCB0aW1lIGFuZCBiZWZvcmUgdGhlIHB1YmxpYyBzdGFydCB0aW1lLg0KCW1vZGlmaWVyIGlzX3ByZV9jcm93ZGZ1bmRfcGVyaW9kKCkgew0KCQlpZiAobm93ID49IHB1YmxpY1N0YXJ0VGltZSB8fCBub3cgPCBwcml2YXRlU3RhcnRUaW1lKSB0aHJvdzsNCgkJXzsNCgl9DQoNCgkvL0lzIGN1cnJlbnRseSB0aGUgY3Jvd2RmdW5kIHBlcmlvZA0KCW1vZGlmaWVyIGlzX2Nyb3dkZnVuZF9wZXJpb2QoKSB7DQoJCWlmIChub3cgPCBwdWJsaWNTdGFydFRpbWUgfHwgbm93ID49IHB1YmxpY0VuZFRpbWUpIHRocm93Ow0KCQlfOw0KCX0NCg0KCS8vTWF5IG9ubHkgYmUgY2FsbGVkIGJ5IEJUQyBTdWlzc2UNCgltb2RpZmllciBvbmx5X2J0Y3MoKSB7DQoJCWlmIChtc2cuc2VuZGVyICE9IGJ0Y3NBZGRyZXNzKSB0aHJvdzsNCgkJXzsNCgl9DQoNCgkvL01heSBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIgYWRkcmVzcw0KCW1vZGlmaWVyIG9ubHlfb3duZXIoKSB7DQoJCWlmIChtc2cuc2VuZGVyICE9IG93bmVyQWRkcmVzcykgdGhyb3c7DQoJCV87DQoJfQ0KDQoJLy9NYXkgb25seSBiZSBjYWxsZWQgaWYgdGhlIGNyb3dkZnVuZCBoYXMgbm90IGJlZW4gaGFsdGVkDQoJbW9kaWZpZXIgaXNfbm90X2hhbHRlZCgpIHsNCgkJaWYgKGhhbHRlZCkgdGhyb3c7DQoJCV87DQoJfQ0KDQoJLy8gRVZFTlRTDQoNCglldmVudCBQcmVCdXkodWludCBfYW1vdW50KTsNCglldmVudCBCdXkoYWRkcmVzcyBpbmRleGVkIF9yZWNpcGllbnQsIHVpbnQgX2Ftb3VudCk7DQoNCg0KCS8vIEZVTkNUSU9OUw0KDQoJLy9Jbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gRGVwbG95cyBHVVBUb2tlbiBjb250cmFjdCBhc3NpZ25zIHZhbHVlcywgdG8gYWxsIHJlbWFpbmluZyBmaWVsZHMsIGNyZWF0ZXMgZmlyc3QgZW50aXRsZW1lbnRzIGluIHRoZSBHVVAgVG9rZW4gY29udHJhY3QuDQoJZnVuY3Rpb24gQ29udHJpYnV0aW9uKA0KCQlhZGRyZXNzIF9idGNzLA0KCQlhZGRyZXNzIF9tdWx0aXNpZywNCgkJYWRkcmVzcyBfbWF0Y2hwb29sLA0KCQl1aW50IF9wdWJsaWNTdGFydFRpbWUsDQoJCXVpbnQgX3ByaXZhdGVTdGFydFRpbWUNCgkpIHsNCgkJb3duZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsNCgkJcHVibGljU3RhcnRUaW1lID0gX3B1YmxpY1N0YXJ0VGltZTsNCgkJcHJpdmF0ZVN0YXJ0VGltZSA9IF9wcml2YXRlU3RhcnRUaW1lOw0KCQlwdWJsaWNFbmRUaW1lID0gX3B1YmxpY1N0YXJ0VGltZSArIDQgd2Vla3M7DQoJCWJ0Y3NBZGRyZXNzID0gX2J0Y3M7DQoJCW11bHRpc2lnQWRkcmVzcyA9IF9tdWx0aXNpZzsNCgkJbWF0Y2hwb29sQWRkcmVzcyA9IF9tYXRjaHBvb2w7DQoJCWd1cFRva2VuID0gbmV3IEdVUFRva2VuKHRoaXMsIHB1YmxpY0VuZFRpbWUpOw0KCQlndXBUb2tlbi5jcmVhdGVJbGxpcXVpZFRva2VuKG1hdGNocG9vbEFkZHJlc3MsIEFMTE9DX0lMTElRVUlEX1RFQU0pOw0KCQlndXBUb2tlbi5jcmVhdGVUb2tlbihtYXRjaHBvb2xBZGRyZXNzLCBBTExPQ19CT1VOVElFUyk7DQoJCWd1cFRva2VuLmNyZWF0ZVRva2VuKG1hdGNocG9vbEFkZHJlc3MsIEFMTE9DX0xJUVVJRF9URUFNKTsNCgkJZ3VwVG9rZW4uY3JlYXRlVG9rZW4obWF0Y2hwb29sQWRkcmVzcywgQUxMT0NfTkVXX1VTRVJTKTsNCgl9DQoNCgkvL01heSBiZSB1c2VkIGJ5IG93bmVyIG9mIGNvbnRyYWN0IHRvIGhhbHQgY3Jvd2RzYWxlIGFuZCBubyBsb25nZXIgZXhjZXB0IGV0aGVyLg0KCWZ1bmN0aW9uIHRvZ2dsZUhhbHQoYm9vbCBfaGFsdGVkKQ0KCQlvbmx5X293bmVyDQoJew0KCQloYWx0ZWQgPSBfaGFsdGVkOw0KCX0NCg0KCS8vY29uc3RhbnQgZnVuY3Rpb24gcmV0dXJucyB0aGUgY3VycmVudCBHVVAgcHJpY2UuDQoJZnVuY3Rpb24gZ2V0UHJpY2VSYXRlKCkNCgkJY29uc3RhbnQNCgkJcmV0dXJucyAodWludCBvX3JhdGUpDQoJew0KCQlpZiAobm93IDw9IHB1YmxpY1N0YXJ0VGltZSArIFNUQUdFX09ORV9USU1FX0VORCkgcmV0dXJuIFBSSUNFX1NUQUdFX09ORTsNCgkJaWYgKG5vdyA8PSBwdWJsaWNTdGFydFRpbWUgKyBTVEFHRV9UV09fVElNRV9FTkQpIHJldHVybiBQUklDRV9TVEFHRV9UV087DQoJCWlmIChub3cgPD0gcHVibGljU3RhcnRUaW1lICsgU1RBR0VfVEhSRUVfVElNRV9FTkQpIHJldHVybiBQUklDRV9TVEFHRV9USFJFRTsNCgkJaWYgKG5vdyA8PSBwdWJsaWNTdGFydFRpbWUgKyBTVEFHRV9GT1VSX1RJTUVfRU5EKSByZXR1cm4gUFJJQ0VfU1RBR0VfRk9VUjsNCgkJZWxzZSByZXR1cm4gMDsNCgl9DQoNCgkvLyBHaXZlbiB0aGUgcmF0ZSBvZiBhIHB1cmNoYXNlIGFuZCB0aGUgcmVtYWluaW5nIHRva2VucyBpbiB0aGlzIHRyYW5jaGUsIGl0DQoJLy8gd2lsbCB0aHJvdyBpZiB0aGUgc2FsZSB3b3VsZCB0YWtlIGl0IHBhc3QgdGhlIGxpbWl0IG9mIHRoZSB0cmFuY2hlLg0KCS8vIEl0IGV4ZWN1dGVzIHRoZSBwdXJjaGFzZSBmb3IgdGhlIGFwcHJvcHJpYXRlIGFtb3VudCBvZiB0b2tlbnMsIHdoaWNoDQoJLy8gaW52b2x2ZXMgYWRkaW5nIGl0IHRvIHRoZSB0b3RhbCwgbWludGluZyBHVVAgdG9rZW5zIGFuZCBzdGFzaGluZyB0aGUNCgkvLyBldGhlci4NCgkvLyBSZXR1cm5zIGBhbW91bnRgIGluIHNjb3BlIGFzIHRoZSBudW1iZXIgb2YgR1VQIHRva2VucyB0aGF0IGl0IHdpbGwNCgkvLyBwdXJjaGFzZS4NCglmdW5jdGlvbiBwcm9jZXNzUHVyY2hhc2UodWludCBfcmF0ZSwgdWludCBfcmVtYWluaW5nKQ0KCQlpbnRlcm5hbA0KCQlyZXR1cm5zICh1aW50IG9fYW1vdW50KQ0KCXsNCgkJb19hbW91bnQgPSBzYWZlRGl2KHNhZmVNdWwobXNnLnZhbHVlLCBfcmF0ZSksIDEgZXRoZXIpOw0KCQlpZiAob19hbW91bnQgPiBfcmVtYWluaW5nKSB0aHJvdzsNCgkJaWYgKCFtdWx0aXNpZ0FkZHJlc3Muc2VuZChtc2cudmFsdWUpKSB0aHJvdzsNCgkJaWYgKCFndXBUb2tlbi5jcmVhdGVUb2tlbihtc2cuc2VuZGVyLCBvX2Ftb3VudCkpIHRocm93Ow0KCQlndXBTb2xkICs9IG9fYW1vdW50Ow0KCQlldGhlclJhaXNlZCArPSBtc2cudmFsdWU7DQoJfQ0KDQoJLy9TcGVjaWFsIEZ1bmN0aW9uIGNhbiBvbmx5IGJlIGNhbGxlZCBieSBCVEMgU3Vpc3NlIGFuZCBvbmx5IGR1cmluZyB0aGUgcHJlLWNyb3dkc2FsZSBwZXJpb2QuDQoJLy9BbGxvd3MgdGhlIHB1cmNoYXNlIG9mIHVwIHRvIDEyNTAwMCBFdGhlciB3b3J0aCBvZiBHVVAgVG9rZW5zLg0KCWZ1bmN0aW9uIHByZUJ1eSgpDQoJCXBheWFibGUNCgkJaXNfcHJlX2Nyb3dkZnVuZF9wZXJpb2QNCgkJb25seV9idGNzDQoJCWlzX25vdF9oYWx0ZWQNCgl7DQoJCXVpbnQgYW1vdW50ID0gcHJvY2Vzc1B1cmNoYXNlKFBSSUNFX0JUQ1MsIEJUQ1NfUE9SVElPTl9NQVggLSBidGNzUG9ydGlvblRvdGFsKTsNCgkJYnRjc1BvcnRpb25Ub3RhbCArPSBhbW91bnQ7DQoJCVByZUJ1eShhbW91bnQpOw0KCX0NCg0KCS8vRGVmYXVsdCBmdW5jdGlvbiBjYWxsZWQgYnkgc2VuZGluZyBFdGhlciB0byB0aGlzIGFkZHJlc3Mgd2l0aCBubyBhcmd1bWVudHMuDQoJLy9SZXN1bHRzIGluIGNyZWF0aW9uIG9mIG5ldyBHVVAgVG9rZW5zIGlmIHRyYW5zYWN0aW9uIHdvdWxkIG5vdCBleGNlZWQgaGFyZCBsaW1pdCBvZiBHVVAgVG9rZW4uDQoJZnVuY3Rpb24oKQ0KCQlwYXlhYmxlDQoJCWlzX2Nyb3dkZnVuZF9wZXJpb2QNCgkJaXNfbm90X2hhbHRlZA0KCXsNCgkJdWludCBhbW91bnQgPSBwcm9jZXNzUHVyY2hhc2UoZ2V0UHJpY2VSYXRlKCksIEFMTE9DX0NST1dEU0FMRSAtIGd1cFNvbGQpOw0KCQlCdXkobXNnLnNlbmRlciwgYW1vdW50KTsNCgl9DQoNCgkvL2ZhaWxzYWZlIGRyYWluDQoJZnVuY3Rpb24gZHJhaW4oKQ0KCQlvbmx5X293bmVyDQoJew0KCQlpZiAoIW93bmVyQWRkcmVzcy5zZW5kKHRoaXMuYmFsYW5jZSkpIHRocm93Ow0KCX0NCn0='