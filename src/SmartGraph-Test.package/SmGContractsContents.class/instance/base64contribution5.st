base 64 content
base64contribution5
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQovLy8gQHRpdGxlIEFzc2VydGl2ZSBjb250cmFjdA0KLy8vIEBhdXRob3IgTWVsb25wb3J0IEFHIDx0ZWFtQG1lbG9ucG9ydC5jb20+DQovLy8gQG5vdGljZSBBc3NlcnRzIGZ1bmN0aW9uDQpjb250cmFjdCBBc3NlcnRpdmUgew0KDQogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgew0KICAgICAgaWYgKCFhc3NlcnRpb24pIHRocm93Ow0KICB9DQoNCn0NCg0KLy8vIEB0aXRsZSBPdmVyZmxvdyBhd2FyZSB1aW50IG1hdGggZnVuY3Rpb25zLg0KLy8vIEBhdXRob3IgTWVsb25wb3J0IEFHIDx0ZWFtQG1lbG9ucG9ydC5jb20+DQovLy8gQG5vdGljZSBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vTWFrZXJEQU8vbWFrZXItb3RjL2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9zaW1wbGVfbWFya2V0LnNvbA0KY29udHJhY3QgU2FmZU1hdGggaXMgQXNzZXJ0aXZlew0KDQogICAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgICB1aW50IGMgPSBhICogYjsNCiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsNCiAgICAgICAgcmV0dXJuIGM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgICBhc3NlcnQoYiA8PSBhKTsNCiAgICAgICAgcmV0dXJuIGEgLSBiOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgdWludCBjID0gYSArIGI7DQogICAgICAgIGFzc2VydChjPj1hICYmIGM+PWIpOw0KICAgICAgICByZXR1cm4gYzsNCiAgICB9DQoNCn0NCg0KLy8vIEB0aXRsZSBFUkMyMCBUb2tlbiBQcm90b2NvbA0KLy8vIEBhdXRob3IgTWVsb25wb3J0IEFHIDx0ZWFtQG1lbG9ucG9ydC5jb20+DQovLy8gQG5vdGljZSBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQpjb250cmFjdCBFUkMyMFByb3RvY29sIHsNCg0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSkge30NCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9DQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQ0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHt9DQoNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCg0KfQ0KDQovLy8gQHRpdGxlIEVSQzIwIFRva2VuDQovLy8gQGF1dGhvciBNZWxvbnBvcnQgQUcgPHRlYW1AbWVsb25wb3J0LmNvbT4NCi8vLyBAbm90aWNlIE9yaWdpbmFsIHRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQovLy8gQG5vdGljZSBDaGVja2VkIGFnYWluc3QgaW50ZWdlciBvdmVyZmxvdw0KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBQcm90b2NvbCB7DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7DQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsNCiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7DQogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsNCiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsNCiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogICAgfQ0KDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsNCg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCg0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Ow0KDQp9DQoNCg0KLy8vIEB0aXRsZSBNZWxvbiBUb2tlbiBDb250cmFjdA0KLy8vIEBhdXRob3IgTWVsb25wb3J0IEFHIDx0ZWFtQG1lbG9ucG9ydC5jb20+DQpjb250cmFjdCBNZWxvblRva2VuIGlzIEVSQzIwLCBTYWZlTWF0aCB7DQoNCiAgICAvLyBGSUVMRFMNCg0KICAgIC8vIENvbnN0YW50IHRva2VuIHNwZWNpZmljIGZpZWxkcw0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJNZWxvbiBUb2tlbiI7DQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiTUxOIjsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4Ow0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRIQVdJTkdfRFVSQVRJT04gPSAyIHllYXJzOyAvLyBUaW1lIG5lZWRlZCBmb3IgaWNlZCB0b2tlbnMgdG8gdGhhdyBpbnRvIGxpcXVpZCB0b2tlbnMNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfVE9UQUxfVE9LRU5fQU1PVU5UX09GRkVSRURfVE9fUFVCTElDID0gMTAwMDAwMCAqIDEwICoqIGRlY2ltYWxzOyAvLyBNYXggYW1vdW50IG9mIHRva2VucyBvZmZlcmVkIHRvIHRoZSBwdWJsaWMNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfVE9UQUxfVE9LRU5fQU1PVU5UID0gMTI1MDAwMCAqIDEwICoqIGRlY2ltYWxzOyAvLyBNYXggYW1vdW50IG9mIHRvdGFsIHRva2VucyByYWlzZWQgZHVyaW5nIGFsbCBjb250cmlidXRpb25zIChpbmNsdWRlcyBzdGFrZXMgb2YgcGF0cm9ucykNCg0KICAgIC8vIEZpZWxkcyB0aGF0IGFyZSBvbmx5IGNoYW5nZWQgaW4gY29uc3RydWN0b3INCiAgICBhZGRyZXNzIHB1YmxpYyBtaW50ZXI7IC8vIENvbnRyaWJ1dGlvbiBjb250cmFjdChzKQ0KICAgIGFkZHJlc3MgcHVibGljIG1lbG9ucG9ydDsgLy8gQ2FuIGNoYW5nZSB0byBvdGhlciBtaW50aW5nIGNvbnRyaWJ1dGlvbiBjb250cmFjdHMgYnV0IG9ubHkgdW50aWwgdG90YWwgYW1vdW50IG9mIHRva2VuIG1pbnRlZA0KICAgIHVpbnQgcHVibGljIHN0YXJ0VGltZTsgLy8gQ29udHJpYnV0aW9uIHN0YXJ0IHRpbWUgaW4gc2Vjb25kcw0KICAgIHVpbnQgcHVibGljIGVuZFRpbWU7IC8vIENvbnRyaWJ1dGlvbiBlbmQgdGltZSBpbiBzZWNvbmRzDQoNCiAgICAvLyBGaWVsZHMgdGhhdCBjYW4gYmUgY2hhbmdlZCBieSBmdW5jdGlvbnMNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGxvY2tlZEJhbGFuY2VzOw0KDQogICAgLy8gTU9ESUZJRVJTDQoNCiAgICBtb2RpZmllciBvbmx5X21pbnRlciB7DQogICAgICAgIGFzc2VydChtc2cuc2VuZGVyID09IG1pbnRlcik7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgbW9kaWZpZXIgb25seV9tZWxvbnBvcnQgew0KICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBtZWxvbnBvcnQpOw0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIGlzX2xhdGVyX3RoYW4odWludCB4KSB7DQogICAgICAgIGFzc2VydChub3cgPiB4KTsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBtb2RpZmllciBtYXhfdG90YWxfdG9rZW5fYW1vdW50X25vdF9yZWFjaGVkKHVpbnQgYW1vdW50KSB7DQogICAgICAgIGFzc2VydChzYWZlQWRkKHRvdGFsU3VwcGx5LCBhbW91bnQpIDw9IE1BWF9UT1RBTF9UT0tFTl9BTU9VTlQpOw0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vIENPTlNUQU5UIE1FVEhPRFMNCg0KICAgIGZ1bmN0aW9uIGxvY2tlZEJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7DQogICAgICAgIHJldHVybiBsb2NrZWRCYWxhbmNlc1tfb3duZXJdOw0KICAgIH0NCg0KICAgIC8vIE1FVEhPRFMNCg0KICAgIC8vLyBQcmU6IEFsbCBmaWVsZHMsIGV4Y2VwdCB7IG1pbnRlciwgbWVsb25wb3J0LCBzdGFydFRpbWUsIGVuZFRpbWUgfSBhcmUgdmFsaWQNCiAgICAvLy8gUG9zdDogQWxsIGZpZWxkcywgaW5jbHVkaW5nIHsgbWludGVyLCBtZWxvbnBvcnQsIHN0YXJ0VGltZSwgZW5kVGltZSB9IGFyZSB2YWxpZA0KICAgIGZ1bmN0aW9uIE1lbG9uVG9rZW4oYWRkcmVzcyBzZXRNaW50ZXIsIGFkZHJlc3Mgc2V0TWVsb25wb3J0LCB1aW50IHNldFN0YXJ0VGltZSwgdWludCBzZXRFbmRUaW1lKSB7DQogICAgICAgIG1pbnRlciA9IHNldE1pbnRlcjsNCiAgICAgICAgbWVsb25wb3J0ID0gc2V0TWVsb25wb3J0Ow0KICAgICAgICBzdGFydFRpbWUgPSBzZXRTdGFydFRpbWU7DQogICAgICAgIGVuZFRpbWUgPSBzZXRFbmRUaW1lOw0KICAgIH0NCg0KICAgIC8vLyBQcmU6IEFkZHJlc3Mgb2YgY29udHJpYnV0aW9uIGNvbnRyYWN0IChtaW50ZXIpIGlzIHNldA0KICAgIC8vLyBQb3N0OiBNaW50cyB0b2tlbiBpbnRvIHRyYWRlYWJsZSB0cmFuY2hlDQogICAgZnVuY3Rpb24gbWludExpcXVpZFRva2VuKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50IGFtb3VudCkNCiAgICAgICAgZXh0ZXJuYWwNCiAgICAgICAgb25seV9taW50ZXINCiAgICAgICAgbWF4X3RvdGFsX3Rva2VuX2Ftb3VudF9ub3RfcmVhY2hlZChhbW91bnQpDQogICAgew0KICAgICAgICBiYWxhbmNlc1tyZWNpcGllbnRdID0gc2FmZUFkZChiYWxhbmNlc1tyZWNpcGllbnRdLCBhbW91bnQpOw0KICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIGFtb3VudCk7DQogICAgfQ0KDQogICAgLy8vIFByZTogQWRkcmVzcyBvZiBjb250cmlidXRpb24gY29udHJhY3QgKG1pbnRlcikgaXMgc2V0DQogICAgLy8vIFBvc3Q6IE1pbnRzIFRva2VuIGludG8gaWNlZCB0cmFuY2hlLiBCZWNvbWUgbGlxdWlkIGFmdGVyIGNvbXBsZXRpb24gb2YgdGhlIG1lbG9ucHJvamVjdCBvciB0d28geWVhcnMuDQogICAgZnVuY3Rpb24gbWludEljZWRUb2tlbihhZGRyZXNzIHJlY2lwaWVudCwgdWludCBhbW91bnQpDQogICAgICAgIGV4dGVybmFsDQogICAgICAgIG9ubHlfbWludGVyDQogICAgICAgIG1heF90b3RhbF90b2tlbl9hbW91bnRfbm90X3JlYWNoZWQoYW1vdW50KQ0KICAgIHsNCiAgICAgICAgbG9ja2VkQmFsYW5jZXNbcmVjaXBpZW50XSA9IHNhZmVBZGQobG9ja2VkQmFsYW5jZXNbcmVjaXBpZW50XSwgYW1vdW50KTsNCiAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCBhbW91bnQpOw0KICAgIH0NCg0KICAgIC8vLyBQcmU6IFRoYXdpbmcgcGVyaW9kIGhhcyBwYXNzZWQgLSBpY2VkIGZ1bmRzIGhhdmUgdHVybmVkIGludG8gbGlxdWlkIG9uZXMNCiAgICAvLy8gUG9zdDogQWxsIGZ1bmRzIGF2YWlsYWJsZSBmb3IgdHJhZGUNCiAgICBmdW5jdGlvbiB1bmxvY2tCYWxhbmNlKGFkZHJlc3MgcmVjaXBpZW50KQ0KICAgICAgICBpc19sYXRlcl90aGFuKGVuZFRpbWUgKyBUSEFXSU5HX0RVUkFUSU9OKQ0KICAgIHsNCiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IHNhZmVBZGQoYmFsYW5jZXNbcmVjaXBpZW50XSwgbG9ja2VkQmFsYW5jZXNbcmVjaXBpZW50XSk7DQogICAgICAgIGxvY2tlZEJhbGFuY2VzW3JlY2lwaWVudF0gPSAwOw0KICAgIH0NCg0KICAgIC8vLyBQcmU6IFByZXZlbnQgdHJhbnNmZXJzIHVudGlsIGNvbnRyaWJ1dGlvbiBwZXJpb2QgaXMgb3Zlci4NCiAgICAvLy8gUG9zdDogVHJhbnNmZXIgTUxOIGZyb20gbXNnLnNlbmRlcg0KICAgIC8vLyBOb3RlOiBFUkMyMCBpbnRlcmZhY2UNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHJlY2lwaWVudCwgdWludCBhbW91bnQpDQogICAgICAgIGlzX2xhdGVyX3RoYW4oZW5kVGltZSkNCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKHJlY2lwaWVudCwgYW1vdW50KTsNCiAgICB9DQoNCiAgICAvLy8gUHJlOiBQcmV2ZW50IHRyYW5zZmVycyB1bnRpbCBjb250cmlidXRpb24gcGVyaW9kIGlzIG92ZXIuDQogICAgLy8vIFBvc3Q6IFRyYW5zZmVyIE1MTiBmcm9tIGFyYml0cmFyeSBhZGRyZXNzDQogICAgLy8vIE5vdGU6IEVSQzIwIGludGVyZmFjZQ0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIHNlbmRlciwgYWRkcmVzcyByZWNpcGllbnQsIHVpbnQgYW1vdW50KQ0KICAgICAgICBpc19sYXRlcl90aGFuKGVuZFRpbWUpDQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykNCiAgICB7DQogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oc2VuZGVyLCByZWNpcGllbnQsIGFtb3VudCk7DQogICAgfQ0KDQogICAgLy8vIFByZTogTWVsb25wb3J0IGFkZHJlc3MgaXMgc2V0LiBSZXN0cmljdGVkIHRvIG1lbG9ucG9ydC4NCiAgICAvLy8gUG9zdDogTmV3IG1pbnRlciBjYW4gbm93IGNyZWF0ZSB0b2tlbnMgdXAgdG8gTUFYX1RPVEFMX1RPS0VOX0FNT1VOVC4NCiAgICAvLy8gTm90ZTogVGhpcyBhbGxvd3MgYWRkaXRpb25hbCBjb250cmlidXRpb24gcGVyaW9kcyBhdCBhIGxhdGVyIHN0YWdlLCB3aGlsZSBzdGlsbCB1c2luZyB0aGUgc2FtZSBFUkMyMCBjb21wbGlhbnQgY29udHJhY3QuDQogICAgZnVuY3Rpb24gY2hhbmdlTWludGluZ0FkZHJlc3MoYWRkcmVzcyBuZXdBZGRyZXNzKSBvbmx5X21lbG9ucG9ydCB7IG1pbnRlciA9IG5ld0FkZHJlc3M7IH0NCg0KICAgIC8vLyBQcmU6IE1lbG9ucG9ydCBhZGRyZXNzIGlzIHNldC4gUmVzdHJpY3RlZCB0byBtZWxvbnBvcnQuDQogICAgLy8vIFBvc3Q6IE5ldyBhZGRyZXNzIHNldC4gVGhpcyBhZGRyZXNzIGNvbnRyb2xzIHRoZSBzZXR0aW5nIG9mIHRoZSBtaW50ZXIgYWRkcmVzcw0KICAgIGZ1bmN0aW9uIGNoYW5nZU1lbG9ucG9ydEFkZHJlc3MoYWRkcmVzcyBuZXdBZGRyZXNzKSBvbmx5X21lbG9ucG9ydCB7IG1lbG9ucG9ydCA9IG5ld0FkZHJlc3M7IH0NCn0NCg0KDQovLy8gQHRpdGxlIENvbnRyaWJ1dGlvbiBDb250cmFjdA0KLy8vIEBhdXRob3IgTWVsb25wb3J0IEFHIDx0ZWFtQG1lbG9ucG9ydC5jb20+DQovLy8gQG5vdGljZSBUaGlzIGZvbGxvd3MgQ29uZGl0aW9uLU9yaWVudGF0ZWQgUHJvZ3JhbW1pbmcgYXMgb3V0bGluZWQgaGVyZToNCi8vLyBAbm90aWNlICAgaHR0cHM6Ly9tZWRpdW0uY29tL0BnYXZvZnlvcmsvY29uZGl0aW9uLW9yaWVudGF0ZWQtcHJvZ3JhbW1pbmctOTY5ZjZiYTAxNjFhIy5zYWF2M2J2dmENCmNvbnRyYWN0IENvbnRyaWJ1dGlvbiBpcyBTYWZlTWF0aCB7DQoNCiAgICAvLyBGSUVMRFMNCg0KICAgIC8vIENvbnN0YW50IGZpZWxkcw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEVUSEVSX0NBUCA9IDIyNzAwMCBldGhlcjsgLy8gTWF4IGFtb3VudCByYWlzZWQgZHVyaW5nIGZpcnN0IGNvbnRyaWJ1dGlvbjsgdGFyZ2V0ZWQgYW1vdW50IENIRiAyLjVNTg0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9DT05UUklCVVRJT05fRFVSQVRJT04gPSA0IHdlZWtzOyAvLyBNYXggYW1vdW50IGluIHNlY29uZHMgb2YgY29udHJpYnV0aW9uIHBlcmlvZA0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEJUQ1NfRVRIRVJfQ0FQID0gRVRIRVJfQ0FQICogMjUgLyAxMDA7IC8vIE1heCBtZWxvbiB0b2tlbiBhbGxvY2F0aW9uIGZvciBidGNzIGJlZm9yZSBjb250cmlidXRpb24gcGVyaW9kIHN0YXJ0cw0KICAgIC8vIFByaWNlIFJhdGVzDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFJJQ0VfUkFURV9GSVJTVCA9IDIyMDA7IC8vIEZvdXIgcHJpY2UgdGllcnMsIGVhY2ggdmFsaWQgZm9yIHR3byB3ZWVrcw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBSSUNFX1JBVEVfU0VDT05EID0gMjE1MDsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUklDRV9SQVRFX1RISVJEID0gMjEwMDsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUklDRV9SQVRFX0ZPVVJUSCA9IDIwNTA7DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgRElWSVNPUl9QUklDRSA9IDEwMDA7IC8vIFByaWNlIHJhdGVzIGFyZSBkaXZpZGVkIGJ5IHRoaXMgbnVtYmVyDQogICAgLy8gQWRkcmVzc2VzIG9mIFBhdHJvbnMNCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBGT1VOREVSX09ORSA9IDB4MDA5YmVBRTA2QjBjMEM1MzZhZDFlQTQzRDZmNjFEQ0NmMDc0OEIxZjsNCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBGT1VOREVSX1RXTyA9IDB4QjFFRmNhNjJDNTU1YjQ5RTY3MzYzQjQ4YUU1YjhBZjNDN0UzZTY1NjsNCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBFWFRfQ09NUEFOWV9PTkUgPSAweDAwNzc5ZTBlNGM2MDgzY2ZkMjZkRTc3QjRkYmMxMDdBN0ViQjk5ZDI7DQogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgRVhUX0NPTVBBTllfVFdPID0gMHgxRjA2Qjk3NjEzNmU5NDcwNEQzMjhENGQyM2FhZTcyNTlBYUMxMmEyOw0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEVYVF9DT01QQU5ZX1RIUkVFID0gMHhERDkxNjE1RWE4RGU5NGJDNDgyMzFjNGFlOTQ4ODg5MUYxNjQ4ZGM1Ow0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEFEVklTT1JfT05FID0gMHgwMDAxMTI2RkM5NEFFMGJlMkI2ODViOGRFNDM0YTk5QjI1NTJBQWMzOw0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEFEVklTT1JfVFdPID0gMHg0ZjJBRjhkMjYxNDE5MENjODBjNkU5NzcyQjBDMzY3ZGI4RDk3NTNDOw0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEFEVklTT1JfVEhSRUUgPSAweDcxNWE3MGE3YzdkNzZhY2M4ZDU4NzQ4NjJlMzgxYzE5NDBjMTljY2U7DQogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgQURWSVNPUl9GT1VSID0gMHg4NjE1RjEzQzEyYzI0REZkY2EwYmEzMjUxMUUyODYxQkUwMmI5M2IyOw0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEFNQkFTU0FET1JfT05FID0gMHhkMzg0MUZCODBDRTQwOGNhN2QwYjQxRDcyYUE5MUNBNzQ2NTJBRjQ3Ow0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEFNQkFTU0FET1JfVFdPID0gMHhEYjc3NTU3NzUzODAxOGE2ODlFNEFkMmU4ZWI1YTdBZTdjMzQ3MjJCOw0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEFNQkFTU0FET1JfVEhSRUUgPSAweGFhOTY3ZTBjZTZBMUZmNUY5YzEyNEQxNUFEMDQxMkYxMzdDOTk3Njc7DQogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgQU1CQVNTQURPUl9GT1VSID0gMHg5MTBCNDFhNjU2OGE2NDU0MzdiQzI4NkE1QzczM2YzYzUwMWQ4Yzg4Ow0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEFNQkFTU0FET1JfRklWRSA9IDB4YjFkMTZCRkU4NDBFNjZFM2M4MTc4NTU1MTgzMmFBQUNCNGNmNjlmMzsNCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBBTUJBU1NBRE9SX1NJWCA9IDB4NUY2ZmYxNjM2NEJmRWY1NDYyNzAzMjU2OTVCNmU5MGNjODlDNDk3YTsNCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBBTUJBU1NBRE9SX1NFVkVOID0gMHg1ODY1NmU4ODcyQjBkMjY2YzJhY0NEMjc2Y0QyM0Y0QzBCNWZFZmI5Ow0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IFNQRUNJQUxJU1RfT05FID0gMHg4YTgxNWU4MThFNjE3ZDFmOTNCRTc0NzdEMTc5MjU4YUMyZDI1MzEwOw0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IFNQRUNJQUxJU1RfVFdPID0gMHgxZWJhNjcwMmJhMjFjZmMxZjZjODdjNzI2MzY0YjYwYTVlNDQ0OTAxOw0KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IFNQRUNJQUxJU1RfVEhSRUUgPSAweDgyZWFlNmMzMGVkOTYwNmUyYjM4OWFlNjUzOTU2NDg3NDhjNmExN2Y7DQogICAgLy8gU3Rha2VzIG9mIFBhdHJvbnMNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNRUxPTlBPUlRfQ09NUEFOWV9TVEFLRSA9IDEwMDA7IC8vIDEwJSBvZiBhbGwgY3JlYXRlZCBtZWxvbiB0b2tlbiBhbGxvY2F0ZWQgdG8gbWVsb25wb3J0IGNvbXBhbnkNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBGT1VOREVSX1NUQUtFID0gNDQ1OyAvLyA0LjQ1JSBvZiBhbGwgY3JlYXRlZCBtZWxvbiB0b2tlbiBhbGxvY2F0ZWQgdG8gZm91bmRlcg0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEVYVF9DT01QQU5ZX1NUQUtFX09ORSA9IDE1MDsgLy8gMS41JSBvZiBhbGwgY3JlYXRlZCBtZWxvbiB0b2tlbiBhbGxvY2F0ZWQgdG8gZXh0ZXJuYWwgY29tcGFueQ0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEVYVF9DT01QQU5ZX1NUQUtFX1RXTyA9IDEwMDsgLy8gMSUgb2YgYWxsIGNyZWF0ZWQgbWVsb24gdG9rZW4gYWxsb2NhdGVkIHRvIGV4dGVybmFsIGNvbXBhbnkNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBFWFRfQ09NUEFOWV9TVEFLRV9USFJFRSA9IDUwOyAvLyAwLjUlIG9mIGFsbCBjcmVhdGVkIG1lbG9uIHRva2VuIGFsbG9jYXRlZCB0byBleHRlcm5hbCBjb21wYW55DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQURWSVNPUl9TVEFLRV9PTkUgPSAxNTA7IC8vIDEuNSUgb2YgYWxsIGNyZWF0ZWQgbWVsb24gdG9rZW4gYWxsb2NhdGVkIHRvIGFkdmlzb3INCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBBRFZJU09SX1NUQUtFX1RXTyA9IDUwOyAvLyAwLjUlIG9mIGFsbCBjcmVhdGVkIG1lbG9uIHRva2VuIGFsbG9jYXRlZCB0byBhZHZpc29yDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQURWSVNPUl9TVEFLRV9USFJFRSA9IDI1OyAvLyAwLjI1JSBvZiBhbGwgY3JlYXRlZCBtZWxvbiB0b2tlbiBhbGxvY2F0ZWQgdG8gYWR2aXNvcg0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEFEVklTT1JfU1RBS0VfRk9VUiA9IDEwOyAvLyAwLjElIG9mIGFsbCBjcmVhdGVkIG1lbG9uIHRva2VuIGFsbG9jYXRlZCB0byBhZHZpc29yDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQU1CQVNTQURPUl9TVEFLRSA9IDU7IC8vIDAuMDUlIG9mIGFsbCBjcmVhdGVkIG1lbG9uIHRva2VuIGFsbG9jYXRlZCB0byBhbWJhc3NhZG9ycw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFNQRUNJQUxJU1RfU1RBS0VfT05FID0gMjU7IC8vIDAuMjUlIG9mIGFsbCBjcmVhdGVkIG1lbG9uIHRva2VuIGFsbG9jYXRlZCB0byBzcGVjaWFsaXN0DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgU1BFQ0lBTElTVF9TVEFLRV9UV08gPSAxMDsgLy8gMC4xJSBvZiBhbGwgY3JlYXRlZCBtZWxvbiB0b2tlbiBhbGxvY2F0ZWQgdG8gc3BlY2lhbGlzdA0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFNQRUNJQUxJU1RfU1RBS0VfVEhSRUUgPSA1OyAvLyAwLjA1JSBvZiBhbGwgY3JlYXRlZCBtZWxvbiB0b2tlbiBhbGxvY2F0ZWQgdG8gc3BlY2lhbGlzdA0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IERJVklTT1JfU1RBS0UgPSAxMDAwMDsgLy8gU3Rha2VzIGFyZSBkaXZpZGVkIGJ5IHRoaXMgbnVtYmVyOyBSZXN1bHRzIHRvIG9uZSBiYXNpcyBwb2ludA0KDQogICAgLy8gRmllbGRzIHRoYXQgYXJlIG9ubHkgY2hhbmdlZCBpbiBjb25zdHJ1Y3Rvcg0KICAgIGFkZHJlc3MgcHVibGljIG1lbG9ucG9ydDsgLy8gQWxsIGRlcG9zaXRlZCBFVEggd2lsbCBiZSBpbnN0YW50bHkgZm9yd2FyZGVkIHRvIHRoaXMgYWRkcmVzcy4NCiAgICBhZGRyZXNzIHB1YmxpYyBidGNzOyAvLyBCaXRjb2luIFN1aXNzZSBhZGRyZXNzIGZvciB0aGVpciBhbGxvY2F0aW9uIG9wdGlvbg0KICAgIGFkZHJlc3MgcHVibGljIHNpZ25lcjsgLy8gU2lnbmVyIGFkZHJlc3MgYXMgb24gaHR0cHM6Ly9jb250cmlidXRpb24ubWVsb25wb3J0LmNvbQ0KICAgIHVpbnQgcHVibGljIHN0YXJ0VGltZTsgLy8gQ29udHJpYnV0aW9uIHN0YXJ0IHRpbWUgaW4gc2Vjb25kcw0KICAgIHVpbnQgcHVibGljIGVuZFRpbWU7IC8vIENvbnRyaWJ1dGlvbiBlbmQgdGltZSBpbiBzZWNvbmRzDQogICAgTWVsb25Ub2tlbiBwdWJsaWMgbWVsb25Ub2tlbjsgLy8gQ29udHJhY3Qgb2YgdGhlIEVSQzIwIGNvbXBsaWFudCBtZWxvbiB0b2tlbg0KDQogICAgLy8gRmllbGRzIHRoYXQgY2FuIGJlIGNoYW5nZWQgYnkgZnVuY3Rpb25zDQogICAgdWludCBwdWJsaWMgZXRoZXJSYWlzZWQ7IC8vIFRoaXMgd2lsbCBrZWVwIHRyYWNrIG9mIHRoZSBFdGhlciByYWlzZWQgZHVyaW5nIHRoZSBjb250cmlidXRpb24NCiAgICBib29sIHB1YmxpYyBoYWx0ZWQ7IC8vIFRoZSBtZWxvbnBvcnQgYWRkcmVzcyBjYW4gc2V0IHRoaXMgdG8gdHJ1ZSB0byBoYWx0IHRoZSBjb250cmlidXRpb24gZHVlIHRvIGFuIGVtZXJnZW5jeQ0KDQogICAgLy8gRVZFTlRTDQoNCiAgICBldmVudCBUb2tlbnNCb3VnaHQoYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgdWludCBldGgsIHVpbnQgYW1vdW50KTsNCg0KICAgIC8vIE1PRElGSUVSUw0KDQogICAgbW9kaWZpZXIgaXNfc2lnbmVyX3NpZ25hdHVyZSh1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgew0KICAgICAgICBieXRlczMyIGhhc2ggPSBzaGEyNTYobXNnLnNlbmRlcik7DQogICAgICAgIGFzc2VydChlY3JlY292ZXIoaGFzaCwgdiwgciwgcykgPT0gc2lnbmVyKTsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5X21lbG9ucG9ydCB7DQogICAgICAgIGFzc2VydChtc2cuc2VuZGVyID09IG1lbG9ucG9ydCk7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgbW9kaWZpZXIgb25seV9idGNzIHsNCiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gYnRjcyk7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgbW9kaWZpZXIgaXNfbm90X2hhbHRlZCB7DQogICAgICAgIGFzc2VydCghaGFsdGVkKTsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBtb2RpZmllciBldGhlcl9jYXBfbm90X3JlYWNoZWQgew0KICAgICAgICBhc3NlcnQoc2FmZUFkZChldGhlclJhaXNlZCwgbXNnLnZhbHVlKSA8PSBFVEhFUl9DQVApOw0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIGJ0Y3NfZXRoZXJfY2FwX25vdF9yZWFjaGVkIHsNCiAgICAgICAgYXNzZXJ0KHNhZmVBZGQoZXRoZXJSYWlzZWQsIG1zZy52YWx1ZSkgPD0gQlRDU19FVEhFUl9DQVApOw0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIGlzX25vdF9lYXJsaWVyX3RoYW4odWludCB4KSB7DQogICAgICAgIGFzc2VydChub3cgPj0geCk7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgbW9kaWZpZXIgaXNfZWFybGllcl90aGFuKHVpbnQgeCkgew0KICAgICAgICBhc3NlcnQobm93IDwgeCk7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy8gQ09OU1RBTlQgTUVUSE9EUw0KDQogICAgLy8vIFByZTogc3RhcnRUaW1lLCBlbmRUaW1lIHNwZWNpZmllZCBpbiBjb25zdHJ1Y3RvciwNCiAgICAvLy8gUG9zdDogUHJpY2UgcmF0ZSBhdCBnaXZlbiBibG9ja1RpbWU7IE9uZSBldGhlciBlcXVhbHMgcHJpY2VSYXRlKCkgLyBESVZJU09SX1BSSUNFIG9mIG1lbG9uIHRva2Vucw0KICAgIGZ1bmN0aW9uIHByaWNlUmF0ZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgLy8gRm91ciBwcmljZSB0aWVycw0KICAgICAgICBpZiAoc3RhcnRUaW1lIDw9IG5vdyAmJiBub3cgPCBzdGFydFRpbWUgKyAxIHdlZWtzKQ0KICAgICAgICAgICAgcmV0dXJuIFBSSUNFX1JBVEVfRklSU1Q7DQogICAgICAgIGlmIChzdGFydFRpbWUgKyAxIHdlZWtzIDw9IG5vdyAmJiBub3cgPCBzdGFydFRpbWUgKyAyIHdlZWtzKQ0KICAgICAgICAgICAgcmV0dXJuIFBSSUNFX1JBVEVfU0VDT05EOw0KICAgICAgICBpZiAoc3RhcnRUaW1lICsgMiB3ZWVrcyA8PSBub3cgJiYgbm93IDwgc3RhcnRUaW1lICsgMyB3ZWVrcykNCiAgICAgICAgICAgIHJldHVybiBQUklDRV9SQVRFX1RISVJEOw0KICAgICAgICBpZiAoc3RhcnRUaW1lICsgMyB3ZWVrcyA8PSBub3cgJiYgbm93IDwgZW5kVGltZSkNCiAgICAgICAgICAgIHJldHVybiBQUklDRV9SQVRFX0ZPVVJUSDsNCiAgICAgICAgLy8gU2hvdWxkIG5vdCBiZSBjYWxsZWQgYmVmb3JlIG9yIGFmdGVyIGNvbnRyaWJ1dGlvbiBwZXJpb2QNCiAgICAgICAgYXNzZXJ0KGZhbHNlKTsNCiAgICB9DQoNCiAgICAvLyBOT04tQ09OU1RBTlQgTUVUSE9EUw0KDQogICAgLy8vIFByZTogQWxsIGZpZWxkcywgZXhjZXB0IHsgbWVsb25wb3J0LCBidGNzLCBzaWduZXIsIHN0YXJ0VGltZSB9IGFyZSB2YWxpZA0KICAgIC8vLyBQb3N0OiBBbGwgZmllbGRzLCBpbmNsdWRpbmcgeyBtZWxvbnBvcnQsIGJ0Y3MsIHNpZ25lciwgc3RhcnRUaW1lIH0gYXJlIHZhbGlkDQogICAgZnVuY3Rpb24gQ29udHJpYnV0aW9uKGFkZHJlc3Mgc2V0TWVsb25wb3J0LCBhZGRyZXNzIHNldEJUQ1MsIGFkZHJlc3Mgc2V0U2lnbmVyLCB1aW50IHNldFN0YXJ0VGltZSkgew0KICAgICAgICBtZWxvbnBvcnQgPSBzZXRNZWxvbnBvcnQ7DQogICAgICAgIGJ0Y3MgPSBzZXRCVENTOw0KICAgICAgICBzaWduZXIgPSBzZXRTaWduZXI7DQogICAgICAgIHN0YXJ0VGltZSA9IHNldFN0YXJ0VGltZTsNCiAgICAgICAgZW5kVGltZSA9IHN0YXJ0VGltZSArIE1BWF9DT05UUklCVVRJT05fRFVSQVRJT047DQogICAgICAgIG1lbG9uVG9rZW4gPSBuZXcgTWVsb25Ub2tlbih0aGlzLCBtZWxvbnBvcnQsIHN0YXJ0VGltZSwgZW5kVGltZSk7IC8vIENyZWF0ZSBNZWxvbiBUb2tlbiBDb250cmFjdA0KICAgICAgICB2YXIgbWF4VG90YWxUb2tlbkFtb3VudE9mZmVyZWRUb1B1YmxpYyA9IG1lbG9uVG9rZW4uTUFYX1RPVEFMX1RPS0VOX0FNT1VOVF9PRkZFUkVEX1RPX1BVQkxJQygpOw0KICAgICAgICB1aW50IHN0YWtlTXVsdGlwbGllciA9IG1heFRvdGFsVG9rZW5BbW91bnRPZmZlcmVkVG9QdWJsaWMgLyBESVZJU09SX1NUQUtFOw0KICAgICAgICAvLyBNaW50IGxpcXVpZCB0b2tlbnMgZm9yIG1lbG9ucG9ydCBjb21wYW55LCBsaXF1aWQgbWVhbnMgdHJhZGVhbGUNCiAgICAgICAgbWVsb25Ub2tlbi5taW50TGlxdWlkVG9rZW4obWVsb25wb3J0LCAgICAgICBNRUxPTlBPUlRfQ09NUEFOWV9TVEFLRSAqIHN0YWtlTXVsdGlwbGllcik7DQogICAgICAgIC8vIE1pbnQgaWNlZCB0b2tlbnMgdGhhdCBhcmUgdW5hYmxlIHRvIHRyYWRlIGZvciB0d28geWVhcnMgYW5kIGFsbG9jYXRlIGFjY29yZGluZyB0byByZWxldmFudCBzdGFrZXMNCiAgICAgICAgbWVsb25Ub2tlbi5taW50SWNlZFRva2VuKEZPVU5ERVJfT05FLCAgICAgICBGT1VOREVSX1NUQUtFICogICAgICAgICAgIHN0YWtlTXVsdGlwbGllcik7DQogICAgICAgIG1lbG9uVG9rZW4ubWludEljZWRUb2tlbihGT1VOREVSX1RXTywgICAgICAgRk9VTkRFUl9TVEFLRSAqICAgICAgICAgICBzdGFrZU11bHRpcGxpZXIpOw0KICAgICAgICBtZWxvblRva2VuLm1pbnRJY2VkVG9rZW4oRVhUX0NPTVBBTllfT05FLCAgIEVYVF9DT01QQU5ZX1NUQUtFX09ORSAqICAgc3Rha2VNdWx0aXBsaWVyKTsNCiAgICAgICAgbWVsb25Ub2tlbi5taW50SWNlZFRva2VuKEVYVF9DT01QQU5ZX1RXTywgICBFWFRfQ09NUEFOWV9TVEFLRV9UV08gKiAgIHN0YWtlTXVsdGlwbGllcik7DQogICAgICAgIG1lbG9uVG9rZW4ubWludEljZWRUb2tlbihFWFRfQ09NUEFOWV9USFJFRSwgRVhUX0NPTVBBTllfU1RBS0VfVEhSRUUgKiBzdGFrZU11bHRpcGxpZXIpOw0KICAgICAgICBtZWxvblRva2VuLm1pbnRJY2VkVG9rZW4oQURWSVNPUl9PTkUsICAgICAgIEFEVklTT1JfU1RBS0VfT05FICogICAgICAgc3Rha2VNdWx0aXBsaWVyKTsNCiAgICAgICAgbWVsb25Ub2tlbi5taW50SWNlZFRva2VuKEFEVklTT1JfVFdPLCAgICAgICBBRFZJU09SX1NUQUtFX1RXTyAqICAgICAgIHN0YWtlTXVsdGlwbGllcik7DQogICAgICAgIG1lbG9uVG9rZW4ubWludEljZWRUb2tlbihBRFZJU09SX1RIUkVFLCAgICAgQURWSVNPUl9TVEFLRV9USFJFRSAqICAgICBzdGFrZU11bHRpcGxpZXIpOw0KICAgICAgICBtZWxvblRva2VuLm1pbnRJY2VkVG9rZW4oQURWSVNPUl9GT1VSLCAgICAgIEFEVklTT1JfU1RBS0VfRk9VUiAqICAgICAgc3Rha2VNdWx0aXBsaWVyKTsNCiAgICAgICAgbWVsb25Ub2tlbi5taW50SWNlZFRva2VuKEFNQkFTU0FET1JfT05FLCAgICBBTUJBU1NBRE9SX1NUQUtFICogICAgICAgIHN0YWtlTXVsdGlwbGllcik7DQogICAgICAgIG1lbG9uVG9rZW4ubWludEljZWRUb2tlbihBTUJBU1NBRE9SX1RXTywgICAgQU1CQVNTQURPUl9TVEFLRSAqICAgICAgICBzdGFrZU11bHRpcGxpZXIpOw0KICAgICAgICBtZWxvblRva2VuLm1pbnRJY2VkVG9rZW4oQU1CQVNTQURPUl9USFJFRSwgIEFNQkFTU0FET1JfU1RBS0UgKiAgICAgICAgc3Rha2VNdWx0aXBsaWVyKTsNCiAgICAgICAgbWVsb25Ub2tlbi5taW50SWNlZFRva2VuKEFNQkFTU0FET1JfRk9VUiwgICBBTUJBU1NBRE9SX1NUQUtFICogICAgICAgIHN0YWtlTXVsdGlwbGllcik7DQogICAgICAgIG1lbG9uVG9rZW4ubWludEljZWRUb2tlbihBTUJBU1NBRE9SX0ZJVkUsICAgQU1CQVNTQURPUl9TVEFLRSAqICAgICAgICBzdGFrZU11bHRpcGxpZXIpOw0KICAgICAgICBtZWxvblRva2VuLm1pbnRJY2VkVG9rZW4oQU1CQVNTQURPUl9TSVgsICAgIEFNQkFTU0FET1JfU1RBS0UgKiAgICAgICAgc3Rha2VNdWx0aXBsaWVyKTsNCiAgICAgICAgbWVsb25Ub2tlbi5taW50SWNlZFRva2VuKEFNQkFTU0FET1JfU0VWRU4sICBBTUJBU1NBRE9SX1NUQUtFICogICAgICAgIHN0YWtlTXVsdGlwbGllcik7DQogICAgICAgIG1lbG9uVG9rZW4ubWludEljZWRUb2tlbihTUEVDSUFMSVNUX09ORSwgICAgU1BFQ0lBTElTVF9TVEFLRV9PTkUgKiAgICBzdGFrZU11bHRpcGxpZXIpOw0KICAgICAgICBtZWxvblRva2VuLm1pbnRJY2VkVG9rZW4oU1BFQ0lBTElTVF9UV08sICAgIFNQRUNJQUxJU1RfU1RBS0VfVFdPICogICAgc3Rha2VNdWx0aXBsaWVyKTsNCiAgICAgICAgbWVsb25Ub2tlbi5taW50SWNlZFRva2VuKFNQRUNJQUxJU1RfVEhSRUUsICBTUEVDSUFMSVNUX1NUQUtFX1RIUkVFICogIHN0YWtlTXVsdGlwbGllcik7DQogICAgfQ0KDQogICAgLy8vIFByZTogVmFsaWQgc2lnbmF0dXJlIHJlY2VpdmVkIGZyb20gaHR0cHM6Ly9jb250cmlidXRpb24ubWVsb25wb3J0LmNvbQ0KICAgIC8vLyBQb3N0OiBCb3VnaHQgbWVsb24gdG9rZW5zIGFjY29yZGluZyB0byBwcmljZVJhdGUoKSBhbmQgbXNnLnZhbHVlDQogICAgZnVuY3Rpb24gYnV5KHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSBwYXlhYmxlIHsgYnV5UmVjaXBpZW50KG1zZy5zZW5kZXIsIHYsIHIsIHMpOyB9DQoNCiAgICAvLy8gUHJlOiBWYWxpZCBzaWduYXR1cmUgcmVjZWl2ZWQgZnJvbSBodHRwczovL2NvbnRyaWJ1dGlvbi5tZWxvbnBvcnQuY29tDQogICAgLy8vIFBvc3Q6IEJvdWdodCBtZWxvbiB0b2tlbnMgYWNjb3JkaW5nIHRvIHByaWNlUmF0ZSgpIGFuZCBtc2cudmFsdWUgb24gYmVoYWxmIG9mIHJlY2lwaWVudA0KICAgIGZ1bmN0aW9uIGJ1eVJlY2lwaWVudChhZGRyZXNzIHJlY2lwaWVudCwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpDQogICAgICAgIHBheWFibGUNCiAgICAgICAgaXNfc2lnbmVyX3NpZ25hdHVyZSh2LCByLCBzKQ0KICAgICAgICBpc19ub3RfZWFybGllcl90aGFuKHN0YXJ0VGltZSkNCiAgICAgICAgaXNfZWFybGllcl90aGFuKGVuZFRpbWUpDQogICAgICAgIGlzX25vdF9oYWx0ZWQNCiAgICAgICAgZXRoZXJfY2FwX25vdF9yZWFjaGVkDQogICAgew0KICAgICAgICB1aW50IGFtb3VudCA9IHNhZmVNdWwobXNnLnZhbHVlLCBwcmljZVJhdGUoKSkgLyBESVZJU09SX1BSSUNFOw0KICAgICAgICBtZWxvblRva2VuLm1pbnRMaXF1aWRUb2tlbihyZWNpcGllbnQsIGFtb3VudCk7DQogICAgICAgIGV0aGVyUmFpc2VkID0gc2FmZUFkZChldGhlclJhaXNlZCwgbXNnLnZhbHVlKTsNCiAgICAgICAgYXNzZXJ0KG1lbG9ucG9ydC5zZW5kKG1zZy52YWx1ZSkpOw0KICAgICAgICBUb2tlbnNCb3VnaHQocmVjaXBpZW50LCBtc2cudmFsdWUsIGFtb3VudCk7DQogICAgfQ0KDQogICAgLy8vIFByZTogQlRDUyBiZWZvcmUgY29udHJpYnV0aW9uIHBlcmlvZCwgQlRDUyBoYXMgZXhjbHVzaXZlIHJpZ2h0IHRvIGJ1eSB1cCB0byAyNSUgb2YgYWxsIG1lbG9uIHRva2Vucw0KICAgIC8vLyBQb3N0OiBCb3VnaHQgbWVsb24gdG9rZW5zIGFjY29yZGluZyB0byBQUklDRV9SQVRFX0ZJUlNUIGFuZCBtc2cudmFsdWUgb24gYmVoYWxmIG9mIHJlY2lwaWVudA0KICAgIGZ1bmN0aW9uIGJ0Y3NCdXlSZWNpcGllbnQoYWRkcmVzcyByZWNpcGllbnQpDQogICAgICAgIHBheWFibGUNCiAgICAgICAgb25seV9idGNzDQogICAgICAgIGlzX2VhcmxpZXJfdGhhbihzdGFydFRpbWUpDQogICAgICAgIGlzX25vdF9oYWx0ZWQNCiAgICAgICAgYnRjc19ldGhlcl9jYXBfbm90X3JlYWNoZWQNCiAgICB7DQogICAgICAgIHVpbnQgYW1vdW50ID0gc2FmZU11bChtc2cudmFsdWUsIFBSSUNFX1JBVEVfRklSU1QpIC8gRElWSVNPUl9QUklDRTsNCiAgICAgICAgbWVsb25Ub2tlbi5taW50TGlxdWlkVG9rZW4ocmVjaXBpZW50LCBhbW91bnQpOw0KICAgICAgICBldGhlclJhaXNlZCA9IHNhZmVBZGQoZXRoZXJSYWlzZWQsIG1zZy52YWx1ZSk7DQogICAgICAgIGFzc2VydChtZWxvbnBvcnQuc2VuZChtc2cudmFsdWUpKTsNCiAgICAgICAgVG9rZW5zQm91Z2h0KHJlY2lwaWVudCwgbXNnLnZhbHVlLCBhbW91bnQpOw0KICAgIH0NCg0KICAgIC8vLyBQcmU6IEVtZXJnZW5jeSBzaXR1YXRpb24gdGhhdCByZXF1aXJlcyBjb250cmlidXRpb24gcGVyaW9kIHRvIHN0b3AuDQogICAgLy8vIFBvc3Q6IENvbnRyaWJ1dGluZyBub3QgcG9zc2libGUgYW55bW9yZS4NCiAgICBmdW5jdGlvbiBoYWx0KCkgb25seV9tZWxvbnBvcnQgeyBoYWx0ZWQgPSB0cnVlOyB9DQoNCiAgICAvLy8gUHJlOiBFbWVyZ2VuY3kgc2l0dWF0aW9uIHJlc29sdmVkLg0KICAgIC8vLyBQb3N0OiBDb250cmlidXRpbmcgYmVjb21lcyBwb3NzaWJsZSBhZ2FpbiB3aXRoaW5nIHRoZSBvdXRsaW5lZCByZXN0cmljdGlvbnMuDQogICAgZnVuY3Rpb24gdW5oYWx0KCkgb25seV9tZWxvbnBvcnQgeyBoYWx0ZWQgPSBmYWxzZTsgfQ0KDQogICAgLy8vIFByZTogUmVzdHJpY3RlZCB0byBtZWxvbnBvcnQuDQogICAgLy8vIFBvc3Q6IE5ldyBhZGRyZXNzIHNldC4gVG8gaGFsdCBjb250cmlidXRpb24gYW5kL29yIGNoYW5nZSBtaW50ZXIgaW4gTWVsb25Ub2tlbiBjb250cmFjdC4NCiAgICBmdW5jdGlvbiBjaGFuZ2VNZWxvbnBvcnRBZGRyZXNzKGFkZHJlc3MgbmV3QWRkcmVzcykgb25seV9tZWxvbnBvcnQgeyBtZWxvbnBvcnQgPSBuZXdBZGRyZXNzOyB9DQp9'