base 64 content
base64creditBIT
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQpjb250cmFjdCBJQ3JlZGl0Qk9ORHsNCiAgICBmdW5jdGlvbiBnZXRCb25kTXVsdGlwbGllcih1aW50IF9jcmVkaXRBbW91bnQsIHVpbnQgX2xvY2t0aW1lKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJvbmRNdWx0aXBsaWVyKSB7fQ0KICAgIGZ1bmN0aW9uIGdldE5ld0NvaW5zSXNzdWVkKHVpbnQgX2xvY2tlZEJhbGFuY2UsIHVpbnQgX2Jsb2NrRGlmZmVyZW5jZSwgdWludCBfcGVyY2VudFJld2FyZCkgY29uc3RhbnQgcmV0dXJucyh1aW50IG5ld0NvaW5zSXNzdWVkKXt9DQp9DQoNCmNvbnRyYWN0IElUb2tlblJlY2lwaWVudCB7IA0KICAgIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpOyANCn0NCg0KY29udHJhY3QgSUVSQzIwVG9rZW4gew0KDQogICAgLy8vIEByZXR1cm4gdG90YWwgYW1vdW50IG9mIHRva2Vucw0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpIHt9DQoNCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkDQogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30NCg0KICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmANCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50DQogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZA0KICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQ0KDQogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gDQogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyDQogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudA0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQNCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9DQoNCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMNCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2Vucw0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2Ygd2VpIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2Zlcg0KICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30NCg0KICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMNCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2Vucw0KICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fSAgIA0KDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7DQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7DQp9DQoNCmNvbnRyYWN0IENyZWRpdEJJVCBpcyBJRVJDMjBUb2tlbiB7DQoNCiAgICBzdHJ1Y3QgQ3JlZGl0QmFsYW5jZXsNCiAgICAgICAgdWludCBhdmFsaWFibGVCYWxhbmNlOw0KICAgICAgICB1aW50IGxvY2tlZEJhbGFuY2U7DQoNCiAgICAgICAgdWludCBib25kTXVsdGlwbGllcjsNCiAgICAgICAgdWludCBsb2NrZWRVbnRpbEJsb2NrOw0KICAgICAgICB1aW50IGxhc3RCbG9ja0NsYWltZWQ7DQogICAgfQ0KDQoJYWRkcmVzcyBwdWJsaWMgZGV2Ow0KCWFkZHJlc3MgcHVibGljIGNyZWRpdERhb0FkZHJlc3M7DQogICAgSUNyZWRpdEJPTkQgY3JlZGl0Qm9uZDsNCiAgICBhZGRyZXNzIHB1YmxpYyBjcmVkaXRHYW1lQWRkcmVzczsNCiAgICBhZGRyZXNzIHB1YmxpYyBjcmVkaXRNY0FkZHJlc3M7DQogICAgYm9vbCBwdWJsaWMgbG9ja2Rvd247DQoNCiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ0NyZWRpdGJpdCAxLjAnOw0KICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICdDcmVkaXRCSVQnOw0KICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gJ0NSQic7DQogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gODsNCg0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ID0gMDsNCiAgICB1aW50IHB1YmxpYyB0b3RhbEF2YWxpYWJsZVN1cHBseSA9IDA7DQogICAgdWludCBwdWJsaWMgdG90YWxMb2NrZWRTdXBwbHkgPSAwOyANCg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gQ3JlZGl0QmFsYW5jZSkgYmFsYW5jZXM7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOw0KDQogICAgLy9ldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsNCiAgICAvL2V2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOw0KICAgIGV2ZW50IExvY2tDcmVkaXRzKGFkZHJlc3MgX293bmVyLCB1aW50IF9hbW91bnQsIHVpbnQgX251bWJlck9mQmxvY2tzKTsNCiAgICBldmVudCBVbmxvY2tDcmVkaXRzKGFkZHJlc3MgX293bmVyLCB1aW50IF9hbW91bnQpOw0KICAgIGV2ZW50IE1pbnQoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2Ftb3VudCk7DQoNCiAgICBmdW5jdGlvbiBDcmVkaXRCSVQoKSB7DQogICAgICAgIGRldiA9IG1zZy5zZW5kZXI7DQogICAgICAgIGxvY2tkb3duID0gZmFsc2U7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGF2YWxpYWJsZUJhbGFuY2Upew0KICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXS5hdmFsaWFibGVCYWxhbmNlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGxvY2tlZEJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBhdmFsaWFibGVCYWxhbmNlKXsNCiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl0ubG9ja2VkQmFsYW5jZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRBY2NvdW50RGF0YShhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBhdmFsaWFibGVCYWxhbmNlLCB1aW50IGxvY2tlZEJhbGFuY2UsIHVpbnQgYm9uZE11bHRpcGxpZXIsIHVpbnQgbG9ja2VkVW50aWxCbG9jaywgdWludCBsYXN0QmxvY2tDbGFpbWVkKXsNCiAgICAgICAgQ3JlZGl0QmFsYW5jZSBtZW1vcnkgdGVtcEFjY291bnREYXRhID0gYmFsYW5jZXNbX293bmVyXTsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAgIHRlbXBBY2NvdW50RGF0YS5hdmFsaWFibGVCYWxhbmNlLA0KICAgICAgICAgICAgdGVtcEFjY291bnREYXRhLmxvY2tlZEJhbGFuY2UsDQogICAgICAgICAgICB0ZW1wQWNjb3VudERhdGEuYm9uZE11bHRpcGxpZXIsDQogICAgICAgICAgICB0ZW1wQWNjb3VudERhdGEubG9ja2VkVW50aWxCbG9jaywNCiAgICAgICAgICAgIHRlbXBBY2NvdW50RGF0YS5sYXN0QmxvY2tDbGFpbWVkDQogICAgICAgICk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbG9ja0JhbGFuY2UodWludCBfYW1vdW50LCB1aW50IF9sb2NrRm9yQmxvY2tzKSByZXR1cm5zICh1aW50IGVycm9yKXsNCiAgICAgICAgaWYgKGxvY2tkb3duKSB0aHJvdzsNCiAgICAgICAgdWludCByZWFsQmxvY2tzTG9ja2VkOw0KICAgICAgICBpZiAoYmxvY2subnVtYmVyICsgX2xvY2tGb3JCbG9ja3MgPCBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRVbnRpbEJsb2NrKXsNCiAgICAgICAgICAgIHJlYWxCbG9ja3NMb2NrZWQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRVbnRpbEJsb2NrOw0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgIHJlYWxCbG9ja3NMb2NrZWQgPSBibG9jay5udW1iZXIgKyBfbG9ja0ZvckJsb2NrczsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdWludCByZWFsQW1vdW50Ow0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0uYXZhbGlhYmxlQmFsYW5jZSA8IChfYW1vdW50ICogMTAqKjgpKSB7DQogICAgICAgICAgICByZWFsQW1vdW50ID0gKGJhbGFuY2VzW21zZy5zZW5kZXJdLmF2YWxpYWJsZUJhbGFuY2UgLyAxMCoqOCkgKiAxMCoqODsNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgICByZWFsQW1vdW50ID0gKF9hbW91bnQgKiAxMCoqOCk7DQogICAgICAgIH0NCg0KICAgICAgICB1aW50IG5ld0JvbmRNdWx0aXBsaWVyID0gY3JlZGl0Qm9uZC5nZXRCb25kTXVsdGlwbGllcihyZWFsQW1vdW50LCByZWFsQmxvY2tzTG9ja2VkKTsNCiAgICAgICAgaWYgKG5ld0JvbmRNdWx0aXBsaWVyID09IDApIHRocm93Ow0KDQogICAgICAgIHVpbnQgY2xhaW1FcnJvciA9IGNsYWltQm9uZFJld2FyZCgpOw0KDQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmF2YWxpYWJsZUJhbGFuY2UgLT0gcmVhbEFtb3VudDsNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja2VkQmFsYW5jZSArPSByZWFsQW1vdW50Ow0KICAgICAgICB0b3RhbEF2YWxpYWJsZVN1cHBseSAtPSByZWFsQW1vdW50Ow0KICAgICAgICB0b3RhbExvY2tlZFN1cHBseSArPSByZWFsQW1vdW50Ow0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5ib25kTXVsdGlwbGllciA9IG5ld0JvbmRNdWx0aXBsaWVyOw0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRVbnRpbEJsb2NrID0gcmVhbEJsb2Nrc0xvY2tlZDsNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubGFzdEJsb2NrQ2xhaW1lZCA9IGJsb2NrLm51bWJlcjsNCg0KICAgICAgICByZXR1cm4gMDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBtaW50TWlncmF0aW9uVG9rZW5zKGFkZHJlc3MgX3JlY2lldmVyLCB1aW50IF9hbW91bnQpIHJldHVybnMgKHVpbnQgZXJyb3Ipew0KICAgICAgDQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNyZWRpdE1jQWRkcmVzcykgeyByZXR1cm4gMTsgfQ0KICAgICAgICANCiAgICAgICAgbWludChfYW1vdW50LCBfcmVjaWV2ZXIpOw0KICAgICAgICByZXR1cm4gMDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjbGFpbUJvbmRSZXdhcmQoKSByZXR1cm5zICh1aW50IGVycm9yKXsNCiAgICAgICAgaWYgKGxvY2tkb3duKSB0aHJvdzsNCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdLmxvY2tlZEJhbGFuY2UgPT0gMCkgeyByZXR1cm4gMTt9DQogICAgICAgIA0KICAgICAgICB1aW50IGJsb2NrRGlmZmVyZW5jZSA9IGJsb2NrLm51bWJlciAtIGJhbGFuY2VzW21zZy5zZW5kZXJdLmxhc3RCbG9ja0NsYWltZWQ7DQogICAgICAgIGlmIChibG9ja0RpZmZlcmVuY2UgPCAxMCl7IHJldHVybiAxO30NCiAgICAgICAgDQogICAgICAgIHVpbnQgbmV3Q3JlZGl0c0lzc3VlZCA9IGNyZWRpdEJvbmQuZ2V0TmV3Q29pbnNJc3N1ZWQoDQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRCYWxhbmNlLCANCiAgICAgICAgICAgIGJsb2NrRGlmZmVyZW5jZSwgDQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5ib25kTXVsdGlwbGllcik7DQogICAgICAgIGlmIChuZXdDcmVkaXRzSXNzdWVkID09IDApIHsgcmV0dXJuIDE7IH0NCiAgICAgICAgDQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRVbnRpbEJsb2NrIDwgYmxvY2subnVtYmVyICkgew0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0uYXZhbGlhYmxlQmFsYW5jZSArPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRCYWxhbmNlOw0KICAgICAgICAgICAgdG90YWxBdmFsaWFibGVTdXBwbHkgKz0gYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja2VkQmFsYW5jZTsNCiAgICAgICAgICAgIHRvdGFsTG9ja2VkU3VwcGx5IC09IGJhbGFuY2VzW21zZy5zZW5kZXJdLmxvY2tlZEJhbGFuY2U7DQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5ib25kTXVsdGlwbGllciA9IDA7DQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRVbnRpbEJsb2NrID0gMDsNCiAgICAgICAgICAgIFVubG9ja0NyZWRpdHMobXNnLnNlbmRlciwgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja2VkQmFsYW5jZSk7DQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRCYWxhbmNlID0gMDsNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sYXN0QmxvY2tDbGFpbWVkID0gYmxvY2subnVtYmVyOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBtaW50KG5ld0NyZWRpdHNJc3N1ZWQsIG1zZy5zZW5kZXIpOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBjbGFpbUdhbWVSZXdhcmQoYWRkcmVzcyBfY2hhbXBpb24sIHVpbnQgX2xvY2tlZFRva2VuQW1vdW50LCB1aW50IF9sb2NrVGltZSkgcmV0dXJucyAodWludCBlcnJvcil7DQogICAgICAgIGlmIChsb2NrZG93bikgdGhyb3c7DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNyZWRpdEdhbWVBZGRyZXNzKSB7IHJldHVybiAxOyB9DQogICAgICAgIA0KICAgICAgICB1aW50IG5ld0NyZWRpdHNJc3N1ZWQgPSBjcmVkaXRCb25kLmdldE5ld0NvaW5zSXNzdWVkKA0KICAgICAgICAgICAgX2xvY2tlZFRva2VuQW1vdW50LCANCiAgICAgICAgICAgIF9sb2NrVGltZSwgDQogICAgICAgICAgICBjcmVkaXRCb25kLmdldEJvbmRNdWx0aXBsaWVyKF9sb2NrZWRUb2tlbkFtb3VudCwgX2xvY2tUaW1lICsgYmxvY2subnVtYmVyKSk7DQogICAgICAgIGlmIChuZXdDcmVkaXRzSXNzdWVkID09IDApIHsgcmV0dXJuIDE7IH0NCiAgICAgICAgbWludChuZXdDcmVkaXRzSXNzdWVkLCBfY2hhbXBpb24pOw0KICAgICAgICByZXR1cm4gMDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBtaW50Qm9udXNUb2tlbnNGb3JHYW1lcyh1aW50IF9hbW91bnQpIHJldHVybnMgKHVpbnQgZXJyb3Ipew0KICAgICAgICBpZiAobG9ja2Rvd24pIHRocm93Ow0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjcmVkaXREYW9BZGRyZXNzKSB7IHJldHVybiAxOyB9DQoNCiAgICAgICAgbWludChfYW1vdW50LCBjcmVkaXRHYW1lQWRkcmVzcyk7DQogICAgICAgIHJldHVybiAwOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG1pbnQodWludCBfbmV3Q3JlZGl0c0lzc3VlZCwgYWRkcmVzcyBfc2VuZGVyKSBpbnRlcm5hbCB7DQogICAgICAgDQogICAgICAgIHRvdGFsU3VwcGx5ICs9IF9uZXdDcmVkaXRzSXNzdWVkOw0KICAgICAgICB0b3RhbEF2YWxpYWJsZVN1cHBseSArPSBfbmV3Q3JlZGl0c0lzc3VlZDsNCiAgICAgICAgYmFsYW5jZXNbX3NlbmRlcl0uYXZhbGlhYmxlQmFsYW5jZSArPSBfbmV3Q3JlZGl0c0lzc3VlZDsNCiAgICAgICAgVHJhbnNmZXIoMHgwLCBfc2VuZGVyLCBfbmV3Q3JlZGl0c0lzc3VlZCk7DQogICAgICAgIE1pbnQoX3NlbmRlciwgX25ld0NyZWRpdHNJc3N1ZWQpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKXsNCiAgICAgICAgaWYgKGxvY2tkb3duKSB0aHJvdzsNCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdLmF2YWxpYWJsZUJhbGFuY2UgPCBfdmFsdWUpIHRocm93Ow0KICAgICAgICBpZiAoYmFsYW5jZXNbX3RvXS5hdmFsaWFibGVCYWxhbmNlICsgX3ZhbHVlIDwgYmFsYW5jZXNbX3RvXS5hdmFsaWFibGVCYWxhbmNlKSB0aHJvdzsNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0uYXZhbGlhYmxlQmFsYW5jZSAtPSBfdmFsdWU7DQogICAgICAgIGJhbGFuY2VzW190b10uYXZhbGlhYmxlQmFsYW5jZSArPSBfdmFsdWU7DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGlmIChsb2NrZG93bikgdGhyb3c7DQogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGlmIChsb2NrZG93bikgdGhyb3c7DQogICAgICAgIElUb2tlblJlY2lwaWVudCBzcGVuZGVyID0gSVRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsNCiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsNCiAgICAgICAgICAgIHNwZW5kZXIucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0gICAgICAgIA0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGlmIChsb2NrZG93bikgdGhyb3c7DQogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0uYXZhbGlhYmxlQmFsYW5jZSA8IF92YWx1ZSkgdGhyb3c7DQogICAgICAgIGlmIChiYWxhbmNlc1tfdG9dLmF2YWxpYWJsZUJhbGFuY2UgKyBfdmFsdWUgPCBiYWxhbmNlc1tfdG9dLmF2YWxpYWJsZUJhbGFuY2UpIHRocm93Ow0KICAgICAgICBpZiAoX3ZhbHVlID4gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSkgdGhyb3c7DQogICAgICAgIGJhbGFuY2VzW19mcm9tXS5hdmFsaWFibGVCYWxhbmNlIC09IF92YWx1ZTsNCiAgICAgICAgYmFsYW5jZXNbX3RvXS5hdmFsaWFibGVCYWxhbmNlICs9IF92YWx1ZTsNCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBzZXRDcmVkaXRCb25kKGFkZHJlc3MgX2JvbmRBZGRyZXNzKSByZXR1cm5zICh1aW50IGVycm9yKXsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY3JlZGl0RGFvQWRkcmVzcykge3JldHVybiAxO30NCiAgICAgICAgDQogICAgICAgIGNyZWRpdEJvbmQgPSBJQ3JlZGl0Qk9ORChfYm9uZEFkZHJlc3MpOw0KICAgICAgICByZXR1cm4gMDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRDcmVkaXRCb25kQWRkcmVzcygpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MgYm9uZEFkZHJlc3Mpew0KICAgICAgICByZXR1cm4gYWRkcmVzcyhjcmVkaXRCb25kKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gc2V0Q3JlZGl0RGFvQWRkcmVzcyhhZGRyZXNzIF9kYW9BZGRyZXNzKSByZXR1cm5zICh1aW50IGVycm9yKXsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gZGV2KSB7cmV0dXJuIDE7fQ0KICAgICAgICANCiAgICAgICAgY3JlZGl0RGFvQWRkcmVzcyA9IF9kYW9BZGRyZXNzOw0KICAgICAgICByZXR1cm4gMDsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gc2V0Q3JlZGl0R2FtZUFkZHJlc3MoYWRkcmVzcyBfZ2FtZUFkZHJlc3MpIHJldHVybnMgKHVpbnQgZXJyb3Ipew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjcmVkaXREYW9BZGRyZXNzKSB7cmV0dXJuIDE7fQ0KICAgICAgICANCiAgICAgICAgY3JlZGl0R2FtZUFkZHJlc3MgPSBfZ2FtZUFkZHJlc3M7DQogICAgICAgIHJldHVybiAwOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBzZXRDcmVkaXRNY0FkZHJlc3MoYWRkcmVzcyBfbWNBZGRyZXNzKSByZXR1cm5zICh1aW50IGVycm9yKXsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY3JlZGl0RGFvQWRkcmVzcykge3JldHVybiAxO30NCiAgICAgICAgDQogICAgICAgIGNyZWRpdE1jQWRkcmVzcyA9IF9tY0FkZHJlc3M7DQogICAgICAgIHJldHVybiAwOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGxvY2tUb2tlbigpIHJldHVybnMgKHVpbnQgZXJyb3Ipew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjcmVkaXREYW9BZGRyZXNzKSB7cmV0dXJuIDE7fQ0KDQogICAgICAgIGxvY2tkb3duID0gIWxvY2tkb3duOw0KICAgICAgICByZXR1cm4gMDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIHRocm93Ow0KICAgIH0NCn0='