base 64 content
base64crowdfunding
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC40Ow0KDQovKioNCiAqIEB0aXRsZSBDb250cmFjdCBmb3Igb2JqZWN0IHRoYXQgaGF2ZSBhbiBvd25lcg0KICovDQpjb250cmFjdCBPd25lZCB7DQogICAgLyoqDQogICAgICogQ29udHJhY3Qgb3duZXIgYWRkcmVzcw0KICAgICAqLw0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQogICAgLyoqDQogICAgICogQGRldiBEZWxlZ2F0ZSBjb250cmFjdCB0byBhbm90aGVyIHBlcnNvbg0KICAgICAqIEBwYXJhbSBfb3duZXIgTmV3IG93bmVyIGFkZHJlc3MgDQogICAgICovDQogICAgZnVuY3Rpb24gc2V0T3duZXIoYWRkcmVzcyBfb3duZXIpIG9ubHlPd25lcg0KICAgIHsgb3duZXIgPSBfb3duZXI7IH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgT3duZXIgY2hlY2sgbW9kaWZpZXINCiAgICAgKi8NCiAgICBtb2RpZmllciBvbmx5T3duZXIgeyBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7IF87IH0NCn0NCg0KLyoqDQogKiBAdGl0bGUgQ29tbW9uIHBhdHRlcm4gZm9yIGRlc3Ryb3lhYmxlIGNvbnRyYWN0cyANCiAqLw0KY29udHJhY3QgRGVzdHJveWFibGUgew0KICAgIGFkZHJlc3MgcHVibGljIGhhbW1lcjsNCg0KICAgIC8qKg0KICAgICAqIEBkZXYgSGFtbWVyIHNldHRlcg0KICAgICAqIEBwYXJhbSBfaGFtbWVyIE5ldyBoYW1tZXIgYWRkcmVzcw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNldEhhbW1lcihhZGRyZXNzIF9oYW1tZXIpIG9ubHlIYW1tZXINCiAgICB7IGhhbW1lciA9IF9oYW1tZXI7IH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgRGVzdHJveSBjb250cmFjdCBhbmQgc2NydWIgYSBkYXRhDQogICAgICogQG5vdGljZSBPbmx5IGhhbW1lciBjYW4gY2FsbCBpdCANCiAgICAgKi8NCiAgICBmdW5jdGlvbiBkZXN0cm95KCkgb25seUhhbW1lcg0KICAgIHsgc3VpY2lkZShtc2cuc2VuZGVyKTsgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBIYW1tZXIgY2hlY2sgbW9kaWZpZXINCiAgICAgKi8NCiAgICBtb2RpZmllciBvbmx5SGFtbWVyIHsgaWYgKG1zZy5zZW5kZXIgIT0gaGFtbWVyKSB0aHJvdzsgXzsgfQ0KfQ0KDQovKioNCiAqIEB0aXRsZSBHZW5lcmljIG93bmVkIGRlc3Ryb3lhYmxlIGNvbnRyYWN0DQogKi8NCmNvbnRyYWN0IE9iamVjdCBpcyBPd25lZCwgRGVzdHJveWFibGUgew0KICAgIGZ1bmN0aW9uIE9iamVjdCgpIHsNCiAgICAgICAgb3duZXIgID0gbXNnLnNlbmRlcjsNCiAgICAgICAgaGFtbWVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQp9DQoNCi8vIFN0YW5kYXJkIHRva2VuIGludGVyZmFjZSAoRVJDIDIwKQ0KLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQpjb250cmFjdCBFUkMyMCANCnsNCi8vIEZ1bmN0aW9uczoNCiAgICAvLy8gQHJldHVybiB0b3RhbCBhbW91bnQgb2YgdG9rZW5zDQogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7DQoNCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkDQogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOw0KDQogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYA0KICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQNCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkDQogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKTsNCg0KICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYA0KICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcg0KICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQNCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkDQogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCk7DQoNCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMNCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2Vucw0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2Ygd2VpIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2Zlcg0KICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpOw0KDQogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2Vucw0KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zDQogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudA0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7DQoNCi8vIEV2ZW50czoNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCn0NCg0KLyoqDQogKiBAdGl0bGUgQXNzZXQgcmVjaXBpZW50IGludGVyZmFjZQ0KICovDQpjb250cmFjdCBSZWNpcGllbnQgew0KICAgIC8qKg0KICAgICAqIEBkZXYgT24gcmVjZWl2ZWQgZXRoZXJzDQogICAgICogQHBhcmFtIHNlbmRlciBFdGhlciBzZW5kZXINCiAgICAgKiBAcGFyYW0gYW1vdW50IEV0aGVyIHZhbHVlDQogICAgICovDQogICAgZXZlbnQgUmVjZWl2ZWRFdGhlcihhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBpbmRleGVkIGFtb3VudCk7DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IE9uIHJlY2VpdmVkIGN1c3RvbSBFUkMyMCB0b2tlbnMNCiAgICAgKiBAcGFyYW0gZnJvbSBUb2tlbiBzZW5kZXINCiAgICAgKiBAcGFyYW0gdmFsdWUgVG9rZW4gdmFsdWUNCiAgICAgKiBAcGFyYW0gdG9rZW4gVG9rZW4gY29udHJhY3QgYWRkcmVzcw0KICAgICAqIEBwYXJhbSBleHRyYURhdGEgQ3VzdG9tIGFkZGl0aW9uYWwgZGF0YQ0KICAgICAqLw0KICAgIGV2ZW50IFJlY2VpdmVkVG9rZW5zKGFkZHJlc3MgaW5kZXhlZCBmcm9tLA0KICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgaW5kZXhlZCB2YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXMgZXh0cmFEYXRhKTsNCg0KICAgIC8qKg0KICAgICAqIEBkZXYgUmVjZWl2ZSBhcHByb3ZlZCBFUkMyMCB0b2tlbnMNCiAgICAgKiBAcGFyYW0gX2Zyb20gU3BlbmRlciBhZGRyZXNzDQogICAgICogQHBhcmFtIF92YWx1ZSBUcmFuc2FjdGlvbiB2YWx1ZQ0KICAgICAqIEBwYXJhbSBfdG9rZW4gRVJDMjAgdG9rZW4gY29udHJhY3QgYWRkcmVzcw0KICAgICAqIEBwYXJhbSBfZXh0cmFEYXRhIEN1c3RvbSBhZGRpdGlvbmFsIGRhdGENCiAgICAgKi8NCiAgICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVSQzIwIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSkgew0KICAgICAgICBpZiAoIV90b2tlbi50cmFuc2ZlckZyb20oX2Zyb20sIHRoaXMsIF92YWx1ZSkpIHRocm93Ow0KICAgICAgICBSZWNlaXZlZFRva2VucyhfZnJvbSwgX3ZhbHVlLCBfdG9rZW4sIF9leHRyYURhdGEpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgQ2F0Y2ggc2VuZGVkIHRvIGNvbnRyYWN0IGV0aGVycw0KICAgICAqLw0KICAgIGZ1bmN0aW9uICgpIHBheWFibGUNCiAgICB7IFJlY2VpdmVkRXRoZXIobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgfQ0KfQ0KDQoNCi8qKg0KICogQHRpdGxlIFRva2VuIGNvbnRyYWN0IHJlcHJlc2VudHMgYW55IGFzc2V0IGluIGRpZ2l0YWwgZWNvbm9teQ0KICovDQpjb250cmFjdCBUb2tlbiBpcyBPYmplY3QsIEVSQzIwIHsNCiAgICAvKiBTaG9ydCBkZXNjcmlwdGlvbiBvZiB0b2tlbiAqLw0KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsNCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsNCg0KICAgIC8qIFRvdGFsIGNvdW50IG9mIHRva2VucyBleGlzdCAqLw0KICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5Ow0KDQogICAgLyogRml4ZWQgcG9pbnQgcG9zaXRpb24gKi8NCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7DQogICAgDQogICAgLyogVG9rZW4gYXBwcm92ZW1lbnQgc3lzdGVtICovDQogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOw0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkpIGFsbG93YW5jZXM7DQogDQogICAgLyoqDQogICAgICogQGRldiBHZXQgYmFsYW5jZSBvZiBwbGFpbiBhZGRyZXNzDQogICAgICogQHBhcmFtIF9vd25lciBpcyBhIHRhcmdldCBhZGRyZXNzDQogICAgICogQHJldHVybiBhbW91bnQgb2YgdG9rZW5zIG9uIGJhbGFuY2UNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpDQogICAgeyByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsgfQ0KIA0KICAgIC8qKg0KICAgICAqIEBkZXYgVGFrZSBhbGxvd2VkIHRva2Vucw0KICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2Vucw0KICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMNCiAgICAgKiBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpDQogICAgeyByZXR1cm4gYWxsb3dhbmNlc1tfb3duZXJdW19zcGVuZGVyXTsgfQ0KDQogICAgLyogVG9rZW4gY29uc3RydWN0b3IgKi8NCiAgICBmdW5jdGlvbiBUb2tlbihzdHJpbmcgX25hbWUsIHN0cmluZyBfc3ltYm9sLCB1aW50OCBfZGVjaW1hbHMsIHVpbnQgX2NvdW50KSB7DQogICAgICAgIG5hbWUgICAgICAgID0gX25hbWU7DQogICAgICAgIHN5bWJvbCAgICAgID0gX3N5bWJvbDsNCiAgICAgICAgZGVjaW1hbHMgICAgPSBfZGVjaW1hbHM7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gX2NvdW50Ow0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IF9jb3VudDsNCiAgICB9DQogDQogICAgLyoqDQogICAgICogQGRldiBUcmFuc2ZlciBzZWxmIHRva2VucyB0byBnaXZlbiBhZGRyZXNzDQogICAgICogQHBhcmFtIF90byBkZXN0aW5hdGlvbiBhZGRyZXNzDQogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgb2YgdG9rZW4gdmFsdWVzIHRvIHNlbmQNCiAgICAgKiBAbm90aWNlIGBfdmFsdWVgIHRva2VucyB3aWxsIGJlIHNlbmRlZCB0byBgX3RvYA0KICAgICAqIEByZXR1cm4gYHRydWVgIHdoZW4gdHJhbnNmZXIgZG9uZQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKSB7DQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICAgICAgICArPSBfdmFsdWU7DQogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBUcmFuc2ZlciB3aXRoIGFwcHJvdmVtZW50IG1lY2hhaW5zbQ0KICAgICAqIEBwYXJhbSBfZnJvbSBzb3VyY2UgYWRkcmVzcywgYF92YWx1ZWAgdG9rZW5zIHNob2xkIGJlIGFwcHJvdmVkIGZvciBgc2VuZGVyYA0KICAgICAqIEBwYXJhbSBfdG8gZGVzdGluYXRpb24gYWRkcmVzcw0KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IG9mIHRva2VuIHZhbHVlcyB0byBzZW5kIA0KICAgICAqIEBub3RpY2UgZnJvbSBgX2Zyb21gIHdpbGwgYmUgc2VuZGVkIGBfdmFsdWVgIHRva2VucyB0byBgX3RvYA0KICAgICAqIEByZXR1cm4gYHRydWVgIHdoZW4gdHJhbnNmZXIgaXMgZG9uZQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgdmFyIGF2YWlsID0gYWxsb3dhbmNlc1tfZnJvbV1bbXNnLnNlbmRlcl0NCiAgICAgICAgICAgICAgICAgID4gYmFsYW5jZXNbX2Zyb21dID8gYmFsYW5jZXNbX2Zyb21dDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGFsbG93YW5jZXNbX2Zyb21dW21zZy5zZW5kZXJdOw0KICAgICAgICBpZiAoYXZhaWwgPj0gX3ZhbHVlKSB7DQogICAgICAgICAgICBhbGxvd2FuY2VzW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSAgICs9IF92YWx1ZTsNCiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBHaXZlIHRvIHRhcmdldCBhZGRyZXNzIGFiaWxpdHkgZm9yIHNlbGYgdG9rZW4gbWFuaXB1bGF0aW9uIHdpdGhvdXQgc2VuZGluZw0KICAgICAqIEBwYXJhbSBfc3BlbmRlciB0YXJnZXQgYWRkcmVzcyAoZnV0dXJlIHJlcXVlc3RlcikNCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCBvZiB0b2tlbiB2YWx1ZXMgZm9yIGFwcHJvdmluZw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgYWxsb3dhbmNlc1ttc2cuc2VuZGVyXVtfc3BlbmRlcl0gKz0gX3ZhbHVlOw0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBSZXNldCBjb3VudCBvZiB0b2tlbnMgYXBwcm92ZWQgZm9yIGdpdmVuIGFkZHJlc3MNCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgdGFyZ2V0IGFkZHJlc3MgKGZ1dHVyZSByZXF1ZXN0ZXIpDQogICAgICovDQogICAgZnVuY3Rpb24gdW5hcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIpDQogICAgeyBhbGxvd2FuY2VzW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7IH0NCn0NCg0KY29udHJhY3QgVG9rZW5FbWlzc2lvbiBpcyBUb2tlbiB7DQogICAgZnVuY3Rpb24gVG9rZW5FbWlzc2lvbihzdHJpbmcgX25hbWUsIHN0cmluZyBfc3ltYm9sLCB1aW50OCBfZGVjaW1hbHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IF9zdGFydF9jb3VudCkNCiAgICAgICAgICAgICBUb2tlbihfbmFtZSwgX3N5bWJvbCwgX2RlY2ltYWxzLCBfc3RhcnRfY291bnQpDQogICAge30NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgVG9rZW4gZW1pc3Npb24NCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCBvZiB0b2tlbiB2YWx1ZXMgdG8gZW1pdA0KICAgICAqIEBub3RpY2Ugb3duZXIgYmFsYW5jZSB3aWxsIGJlIGluY3JlYXNlZCBieSBgX3ZhbHVlYA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGVtaXNzaW9uKHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIgew0KICAgICAgICAvLyBPdmVyZmxvdyBjaGVjaw0KICAgICAgICBpZiAoX3ZhbHVlICsgdG90YWxTdXBwbHkgPCB0b3RhbFN1cHBseSkgdGhyb3c7DQoNCiAgICAgICAgdG90YWxTdXBwbHkgICAgICs9IF92YWx1ZTsNCiAgICAgICAgYmFsYW5jZXNbb3duZXJdICs9IF92YWx1ZTsNCiAgICB9DQogDQogICAgLyoqDQogICAgICogQGRldiBCdXJuIHRoZSB0b2tlbiB2YWx1ZXMgZnJvbSBzZW5kZXIgYmFsYW5jZSBhbmQgZnJvbSB0b3RhbA0KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IG9mIHRva2VuIHZhbHVlcyBmb3IgYnVybiANCiAgICAgKiBAbm90aWNlIHNlbmRlciBiYWxhbmNlIHdpbGwgYmUgZGVjcmVhc2VkIGJ5IGBfdmFsdWVgDQogICAgICovDQogICAgZnVuY3Rpb24gYnVybih1aW50IF92YWx1ZSkgew0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKSB7DQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgICAgICB0b3RhbFN1cHBseSAgICAgIC09IF92YWx1ZTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KLyoqDQogKiBAdGl0bGUgQ3Jvd2RmdW5kaW5nIGNvbnRyYWN0DQogKi8NCmNvbnRyYWN0IENyb3dkZnVuZGluZyBpcyBPYmplY3QsIFJlY2lwaWVudCB7DQogICAgLyoqDQogICAgICogQGRldiBUYXJnZXQgZnVuZCBhY2NvdW50IGFkZHJlc3MNCiAgICAgKi8NCiAgICBhZGRyZXNzIHB1YmxpYyBmdW5kOw0KDQogICAgLyoqDQogICAgICogQGRldiBCb3VudHkgdG9rZW4gYWRkcmVzcw0KICAgICAqLw0KICAgIFRva2VuRW1pc3Npb24gcHVibGljIGJvdW50eTsNCiAgICANCiAgICAvKioNCiAgICAgKiBAZGV2IERpc3RyaWJ1dGlvbiBvZiBkb25hdGlvbnMNCiAgICAgKi8NCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGRvbmF0aW9uczsNCg0KICAgIC8qKg0KICAgICAqIEBkZXYgVG90YWwgZnVuZGVkIHZhbHVlDQogICAgICovDQogICAgdWludDI1NiBwdWJsaWMgdG90YWxGdW5kZWQ7DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IERvY3VtZW50YXRpb24gcmVmZXJlbmNlDQogICAgICovDQogICAgc3RyaW5nIHB1YmxpYyByZWZlcmVuY2U7DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IENyb3dkZnVuZGluZyBjb25maWd1cmF0aW9uDQogICAgICovDQogICAgUGFyYW1zIHB1YmxpYyBjb25maWc7DQoNCiAgICBzdHJ1Y3QgUGFyYW1zIHsNCiAgICAgICAgLyogc3RhcnQvc3RvcCBibG9jayBzdGFtcHMgKi8NCiAgICAgICAgdWludDI1NiBzdGFydEJsb2NrOw0KICAgICAgICB1aW50MjU2IHN0b3BCbG9jazsNCg0KICAgICAgICAvKiBNaW5pbWFsL21heGltYWwgZnVuZGVkIHZhbHVlICovDQogICAgICAgIHVpbnQyNTYgbWluVmFsdWU7DQogICAgICAgIHVpbnQyNTYgbWF4VmFsdWU7DQogICAgICAgIA0KICAgICAgICAvKioNCiAgICAgICAgICogQm91bnR5IHJhdGlvIGVxdWF0aW9uOg0KICAgICAgICAgKiAgIGJvdW50eVZhbHVlID0gdmFsdWUgKiByYXRpbyAvIHNjYWxlDQogICAgICAgICAqIHdoZXJlDQogICAgICAgICAqICAgcmF0aW8gPSBSIC0gKGJsb2NrIC0gQikgLyBTICogVg0KICAgICAgICAgKiAgUiAtIHN0YXJ0IGJvdW50eSByYXRpbw0KICAgICAgICAgKiAgQiAtIHN0YXJ0IGJsb2NrIG51bWJlcg0KICAgICAgICAgKiAgUyAtIGJvdW50eSByZWR1Y3Rpb24gc3RlcCBpbiBibG9ja3MgDQogICAgICAgICAqICBWIC0gYm91bnR5IHJlZHVjdGlvbiB2YWx1ZQ0KICAgICAgICAgKi8NCiAgICAgICAgdWludDI1NiBib3VudHlTY2FsZTsNCiAgICAgICAgdWludDI1NiBzdGFydFJhdGlvOw0KICAgICAgICB1aW50MjU2IHJlZHVjdGlvblN0ZXA7DQogICAgICAgIHVpbnQyNTYgcmVkdWN0aW9uVmFsdWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBDYWxjdWxhdGUgYm91bnR5IHZhbHVlIGJ5IHJlZHVjdGlvbiBlcXVhdGlvbg0KICAgICAqIEBwYXJhbSBfdmFsdWUgSW5wdXQgZG9uYXRpb24gdmFsdWUNCiAgICAgKiBAcGFyYW0gX2Jsb2NrIElucHV0IGJsb2NrIG51bWJlcg0KICAgICAqIEByZXR1cm4gQm91bnR5IHZhbHVlDQogICAgICovDQogICAgZnVuY3Rpb24gYm91bnR5VmFsdWUodWludDI1NiBfdmFsdWUsIHVpbnQyNTYgX2Jsb2NrKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICAgIGlmIChfYmxvY2sgPCBjb25maWcuc3RhcnRCbG9jayB8fCBfYmxvY2sgPiBjb25maWcuc3RvcEJsb2NrKQ0KICAgICAgICAgICAgcmV0dXJuIDA7DQoNCiAgICAgICAgdmFyIFIgPSBjb25maWcuc3RhcnRSYXRpbzsNCiAgICAgICAgdmFyIEIgPSBjb25maWcuc3RhcnRCbG9jazsNCiAgICAgICAgdmFyIFMgPSBjb25maWcucmVkdWN0aW9uU3RlcDsNCiAgICAgICAgdmFyIFYgPSBjb25maWcucmVkdWN0aW9uVmFsdWU7DQogICAgICAgIHVpbnQyNTYgcmF0aW8gPSBSIC0gKF9ibG9jayAtIEIpIC8gUyAqIFY7IA0KICAgICAgICByZXR1cm4gX3ZhbHVlICogcmF0aW8gLyBjb25maWcuYm91bnR5U2NhbGU7IA0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgQ3Jvd2RmdW5kaW5nIHJ1bm5pbmcgY2hlY2tzDQogICAgICovDQogICAgbW9kaWZpZXIgb25seVJ1bm5pbmcgew0KICAgICAgICBib29sIGlzUnVubmluZyA9IHRvdGFsRnVuZGVkICsgbXNnLnZhbHVlIDw9IGNvbmZpZy5tYXhWYWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICYmIGJsb2NrLm51bWJlciA+PSBjb25maWcuc3RhcnRCbG9jaw0KICAgICAgICAgICAgICAgICAgICAgICYmIGJsb2NrLm51bWJlciA8PSBjb25maWcuc3RvcEJsb2NrOw0KICAgICAgICBpZiAoIWlzUnVubmluZykgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBDcm93ZGZ1bmR1bmcgZmFpbHVyZSBjaGVja3MNCiAgICAgKi8NCiAgICBtb2RpZmllciBvbmx5RmFpbHVyZSB7DQogICAgICAgIGJvb2wgaXNGYWlsdXJlID0gdG90YWxGdW5kZWQgIDwgY29uZmlnLm1pblZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgJiYgYmxvY2subnVtYmVyID4gY29uZmlnLnN0b3BCbG9jazsNCiAgICAgICAgaWYgKCFpc0ZhaWx1cmUpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgQ3Jvd2RmdW5kaW5nIHN1Y2Nlc3MgY2hlY2tzDQogICAgICovDQogICAgbW9kaWZpZXIgb25seVN1Y2Nlc3Mgew0KICAgICAgICBib29sIGlzU3VjY2VzcyA9IHRvdGFsRnVuZGVkID49IGNvbmZpZy5taW5WYWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICYmIGJsb2NrLm51bWJlciA+IGNvbmZpZy5zdG9wQmxvY2s7DQogICAgICAgIGlmICghaXNTdWNjZXNzKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IENyb3dkZnVuZGluZyBjb250cmFjdCBpbml0aWFsIA0KICAgICAqIEBwYXJhbSBfZnVuZCBEZXN0aW5hdGlvbiBhY2NvdW50IGFkZHJlc3MNCiAgICAgKiBAcGFyYW0gX2JvdW50eSBCb3VudHkgdG9rZW4gYWRkcmVzcw0KICAgICAqIEBwYXJhbSBfcmVmZXJlbmNlIFJlZmVyZW5jZSBkb2N1bWVudGF0aW9uIGxpbmsNCiAgICAgKiBAcGFyYW0gX3N0YXJ0QmxvY2sgRnVuZGluZyBzdGFydCBibG9jayBudW1iZXINCiAgICAgKiBAcGFyYW0gX3N0b3BCbG9jayBGdW5kaW5nIHN0b3AgYmxvY2sgbnVibWVyDQogICAgICogQHBhcmFtIF9taW5WYWx1ZSBNaW5pbWFsIGZ1bmRlZCB2YWx1ZSBpbiB3ZWkgDQogICAgICogQHBhcmFtIF9tYXhWYWx1ZSBNYXhpbWFsIGZ1bmRlZCB2YWx1ZSBpbiB3ZWkNCiAgICAgKiBAcGFyYW0gX3NjYWxlIEJvdW50eSBzY2FsaW5nIGZhY3RvciBieSBmdW5kZWQgdmFsdWUNCiAgICAgKiBAcGFyYW0gX3N0YXJ0UmF0aW8gSW5pdGlhbCBib3VudHkgcmF0aW8NCiAgICAgKiBAcGFyYW0gX3JlZHVjdGlvblN0ZXAgQm91bnR5IHJlZHVjdGlvbiBzdGVwIGluIGJsb2NrcyANCiAgICAgKiBAcGFyYW0gX3JlZHVjdGlvblZhbHVlIEJvdW50eSByZWR1Y3Rpb24gdmFsdWUNCiAgICAgKiBAbm90aWNlIHRoaXMgY29udHJhY3Qgc2hvdWxkIGJlIG93bmVyIG9mIGJvdW50eSB0b2tlbg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIENyb3dkZnVuZGluZygNCiAgICAgICAgYWRkcmVzcyBfZnVuZCwNCiAgICAgICAgYWRkcmVzcyBfYm91bnR5LA0KICAgICAgICBzdHJpbmcgIF9yZWZlcmVuY2UsDQogICAgICAgIHVpbnQyNTYgX3N0YXJ0QmxvY2ssDQogICAgICAgIHVpbnQyNTYgX3N0b3BCbG9jaywNCiAgICAgICAgdWludDI1NiBfbWluVmFsdWUsDQogICAgICAgIHVpbnQyNTYgX21heFZhbHVlLA0KICAgICAgICB1aW50MjU2IF9zY2FsZSwNCiAgICAgICAgdWludDI1NiBfc3RhcnRSYXRpbywNCiAgICAgICAgdWludDI1NiBfcmVkdWN0aW9uU3RlcCwNCiAgICAgICAgdWludDI1NiBfcmVkdWN0aW9uVmFsdWUNCiAgICApIHsNCiAgICAgICAgZnVuZCAgICAgID0gX2Z1bmQ7DQogICAgICAgIGJvdW50eSAgICA9IFRva2VuRW1pc3Npb24oX2JvdW50eSk7DQogICAgICAgIHJlZmVyZW5jZSA9IF9yZWZlcmVuY2U7DQoNCiAgICAgICAgY29uZmlnLnN0YXJ0QmxvY2sgICAgID0gX3N0YXJ0QmxvY2s7DQogICAgICAgIGNvbmZpZy5zdG9wQmxvY2sgICAgICA9IF9zdG9wQmxvY2s7DQogICAgICAgIGNvbmZpZy5taW5WYWx1ZSAgICAgICA9IF9taW5WYWx1ZTsNCiAgICAgICAgY29uZmlnLm1heFZhbHVlICAgICAgID0gX21heFZhbHVlOw0KICAgICAgICBjb25maWcuYm91bnR5U2NhbGUgICAgPSBfc2NhbGU7DQogICAgICAgIGNvbmZpZy5zdGFydFJhdGlvICAgICA9IF9zdGFydFJhdGlvOw0KICAgICAgICBjb25maWcucmVkdWN0aW9uU3RlcCAgPSBfcmVkdWN0aW9uU3RlcDsNCiAgICAgICAgY29uZmlnLnJlZHVjdGlvblZhbHVlID0gX3JlZHVjdGlvblZhbHVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgUmVjZWl2ZSBFdGhlciB0b2tlbiBhbmQgc2VuZCBib3VudHkNCiAgICAgKi8NCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIG9ubHlSdW5uaW5nIHsNCiAgICAgICAgUmVjZWl2ZWRFdGhlcihtc2cuc2VuZGVyLCBtc2cudmFsdWUpOw0KDQogICAgICAgIHRvdGFsRnVuZGVkICAgICAgICAgICArPSBtc2cudmFsdWU7DQogICAgICAgIGRvbmF0aW9uc1ttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7DQoNCiAgICAgICAgdmFyIGJvdW50eVZhbCA9IGJvdW50eVZhbHVlKG1zZy52YWx1ZSwgYmxvY2subnVtYmVyKTsNCiAgICAgICAgaWYgKGJvdW50eVZhbCA9PSAwKSB0aHJvdzsNCg0KICAgICAgICBib3VudHkuZW1pc3Npb24oYm91bnR5VmFsKTsNCiAgICAgICAgYm91bnR5LnRyYW5zZmVyKG1zZy5zZW5kZXIsIGJvdW50eVZhbCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBXaXRoZHJhd2FsIGJhbGFuY2Ugb24gc3VjY2Vzc2Z1bGwgZmluaXNoDQogICAgICovDQogICAgZnVuY3Rpb24gd2l0aGRyYXcoKSBvbmx5U3VjY2Vzcw0KICAgIHsgaWYgKCFmdW5kLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7IH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgUmVmdW5kIGRvbmF0aW9ucyB3aGVuIG5vIG1pbmltYWwgdmFsdWUgYWNoaWV2ZWQNCiAgICAgKi8NCiAgICBmdW5jdGlvbiByZWZ1bmQoKSBvbmx5RmFpbHVyZSB7DQogICAgICAgIHZhciBkb25hdGlvbiA9IGRvbmF0aW9uc1ttc2cuc2VuZGVyXTsNCiAgICAgICAgZG9uYXRpb25zW21zZy5zZW5kZXJdID0gMDsNCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoZG9uYXRpb24pKSB0aHJvdzsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IERpc2FibGUgcmVjZWl2ZSBhbm90aGVyIHRva2Vucw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRVJDMjAgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKQ0KICAgIHsgdGhyb3c7IH0NCn0='