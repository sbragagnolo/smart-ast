base 64 content
base64crowdsale2
	^'Y29udHJhY3QgRVJDMjBCYXNpYyB7DQogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5Ow0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOw0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsNCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7DQp9DQoNCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgew0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7DQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKTsNCiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7DQp9DQoNCmNvbnRyYWN0IE93biB7DQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQoNCiAgICBmdW5jdGlvbiBPd24oKSB7DQogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5T3duZXIgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsNCiAgICAgICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsNCiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCmNvbnRyYWN0IFBhdXNlIGlzIE93biB7DQogIGJvb2wgcHVibGljIHN0b3BwZWQ7DQoNCiAgbW9kaWZpZXIgc3RvcEluRW1lcmdlbmN5IHsNCiAgICBpZiAoc3RvcHBlZCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICAgIF87DQogIH0NCiAgDQogIG1vZGlmaWVyIG9ubHlJbkVtZXJnZW5jeSB7DQogICAgaWYgKCFzdG9wcGVkKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogICAgXzsNCiAgfQ0KDQogIC8vIG93bmVyIGNhbGwgdG8gdHJpZ2dlciBhIHN0b3Agc3RhdGUNCiAgZnVuY3Rpb24gZW1lcmdlbmN5U3RvcCgpIGV4dGVybmFsIG9ubHlPd25lciB7DQogICAgc3RvcHBlZCA9IHRydWU7DQogIH0NCg0KICAvLyBvd25lciBjYWxsIHRvIHJlc3RhcnQgZnJvbSB0aGUgc3RvcCBzdGF0ZQ0KICBmdW5jdGlvbiByZWxlYXNlKCkgZXh0ZXJuYWwgb25seU93bmVyIG9ubHlJbkVtZXJnZW5jeSB7DQogICAgc3RvcHBlZCA9IGZhbHNlOw0KICB9DQoNCn0NCg0KY29udHJhY3QgUHVsbGVyIHsNCg0KICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsNCiAgDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgcGF5bWVudHM7DQoNCiAgZXZlbnQgTG9nUmVmdW5kRVRIKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOw0KDQogIGZ1bmN0aW9uIGFzeW5jU2VuZChhZGRyZXNzIGRlc3QsIHVpbnQgYW1vdW50KSBpbnRlcm5hbCB7DQogICAgcGF5bWVudHNbZGVzdF0gPSBwYXltZW50c1tkZXN0XS5hZGQoYW1vdW50KTsNCiAgfQ0KDQogIC8vIHdpdGhkcndhdyBjYWxsIGZvciByZWZ1bmRpbmcgYmFsYW5jZSBhY3VtaWxhdGVkIGJ5IHBheWVlDQogIGZ1bmN0aW9uIHdpdGhkcmF3UGF5bWVudHMoKSB7DQogICAgYWRkcmVzcyBwYXllZSA9IG1zZy5zZW5kZXI7DQogICAgdWludCBwYXltZW50ID0gcGF5bWVudHNbcGF5ZWVdOw0KICAgIA0KICAgIGlmIChwYXltZW50ID09IDApIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIGlmICh0aGlzLmJhbGFuY2UgPCBwYXltZW50KSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBwYXltZW50c1twYXllZV0gPSAwOw0KDQogICAgaWYgKCFwYXllZS5zZW5kKHBheW1lbnQpKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogICAgTG9nUmVmdW5kRVRIKHBheWVlLHBheW1lbnQpOw0KICB9DQp9DQoNCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7DQogIA0KICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsNCiAgDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsNCiAgDQogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsNCiAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsNCiAgICAgICB0aHJvdzsNCiAgICAgfQ0KICAgICBfOw0KICB9DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7DQogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogIH0NCg0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgew0KICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICB9DQp9DQoNCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgew0KICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgew0KICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07DQogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7DQogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOw0KICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsNCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICB9DQoNCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgew0KICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7DQogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogIH0NCg0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7DQogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogIH0NCn0NCg0KY29udHJhY3QgVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duIHsNCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlRyaWJlVG9rZW4iOw0KICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJUUklCRSI7DQogIHVpbnQgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gNjsNCg0KICAvLyBUb2tlbiBjb25zdHJ1Y3Rvcg0KICBmdW5jdGlvbiBUb2tlbigpIHsNCiAgICAgIHRvdGFsU3VwcGx5ID0gMjAwMDAwMDAwMDAwMDAwOw0KICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSB0b3RhbFN1cHBseTsgLy8gc2VuZCBhbGwgY3JlYXRlZCB0b2tlbnMgdG8gdGhlIG93bmVyL2NyZWF0b3INCiAgfQ0KDQogIC8vIEJ1cm4gZnVuY3Rpb24gdG8gYnVybiBhIHNldCBhbW91bnQgb2YgdG9rZW5zDQogIGZ1bmN0aW9uIGJ1cm5lcih1aW50IF92YWx1ZSkgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsNCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOw0KICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7DQogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwLCBfdmFsdWUpOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCn0NCg0KY29udHJhY3QgQ3Jvd2RzYWxlIGlzIFBhdXNlLCBQdWxsZXIgew0KICAgIA0KICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50Ow0KDQogIAlzdHJ1Y3QgQmFja2VyIHsNCgkJdWludCB3ZWlSZWNlaXZlZDsgLy8gQW1vdW50IG9mIEV0aGVyIGdpdmVuDQoJCXVpbnQgY29pblNlbnQ7DQoJfQ0KICAgIA0KCS8vQ09OU1RBTlRTDQoJLy8gTWF4aW11bSBudW1iZXIgb2YgVFJJQkUgdG8gc2VsbA0KCXVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9DQVAgPSAxNjAwMDAwMDAwMDAwMDA7IC8vIDE2MCAwMDAgMDAwIFRSSUJFDQoJLy8gTWluaW11bSBhbW91bnQgdG8gaW52ZXN0DQoJdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX0lOVkVTVF9FVEhFUiA9IDEwMCBmaW5uZXk7IC8vIDAuMUVUSA0KCS8vIENyb3dkc2FsZSBwZXJpb2QNCgl1aW50IHByaXZhdGUgY29uc3RhbnQgQ1JPV0RTQUxFX1BFUklPRCA9IDIyIGRheXM7IC8vIDIyIGRheXMgY3Jvd2RzYWxlIHJ1bg0KCS8vIE51bWJlciBvZiBUUklCRSBwZXIgRXRoZXINCgl1aW50IHB1YmxpYyBjb25zdGFudCBDT0lOX1BFUl9FVEhFUiA9IDMwMDAwMDAwMDA7IC8vIDMgMDAwIFRSSUJFDQoNCg0KCS8vVkFSSUFCTEVTDQoJLy8gVFJJQkUgY29udHJhY3QgcmVmZXJlbmNlDQoJVG9rZW4gcHVibGljIGNvaW47DQogICAgLy8gTXVsdGlzaWcgY29udHJhY3QgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIEV0aGVyDQoJYWRkcmVzcyBwdWJsaWMgbXVsdGlzaWdFdGhlcjsNCgkvLyBOdW1iZXIgb2YgRXRoZXIgcmVjZWl2ZWQNCgl1aW50IHB1YmxpYyBldGhlclJlY2VpdmVkOw0KCS8vIE51bWJlciBvZiBUUklCRSBzZW50IHRvIEV0aGVyIGNvbnRyaWJ1dG9ycw0KCXVpbnQgcHVibGljIGNvaW5TZW50VG9FdGhlcjsNCiAgLy8gTnVtYmVyIG9mIFRSSUJFIHRvIGJ1cm4NCiAgdWludCBwdWJsaWMgY29pblRvQnVybjsNCgkvLyBDcm93ZHNhbGUgc3RhcnQgdGltZQ0KCXVpbnQgcHVibGljIHN0YXJ0VGltZTsNCgkvLyBDcm93ZHNhbGUgZW5kIHRpbWUNCgl1aW50IHB1YmxpYyBlbmRUaW1lOw0KIAkvLyBJcyBjcm93ZHNhbGUgc3RpbGwgb24gZ29pbmcNCglib29sIHB1YmxpYyBjcm93ZHNhbGVDbG9zZWQ7DQoJLy8gUmVmdW5kIG9wZW4gdmFyaWFibGUNCglib29sIHB1YmxpYyByZWZ1bmRzT3BlbjsNCg0KCS8vIEJhY2tlcnMgRXRoZXIgaW5kZXhlZCBieSB0aGVpciBFdGhlcmV1bSBhZGRyZXNzDQoJbWFwcGluZyhhZGRyZXNzID0+IEJhY2tlcikgcHVibGljIGJhY2tlcnM7DQoNCg0KCS8vTU9ESUZJRVJTDQoJbW9kaWZpZXIgcmVzcGVjdFRpbWVGcmFtZSgpIHsNCgkJaWYgKChub3cgPCBzdGFydFRpbWUpIHx8IChub3cgPiBlbmRUaW1lICkpIHRocm93Ow0KCQlfOw0KCX0NCgkNCgltb2RpZmllciByZWZ1bmRTdGF0dXMoKSB7DQoJCWlmICgocmVmdW5kc09wZW4gIT0gdHJ1ZSApKSB0aHJvdzsNCgkJXzsNCgl9DQoNCgkvL0VWRU5UUw0KCWV2ZW50IExvZ1JlY2VpdmVkRVRIKGFkZHJlc3MgYWRkciwgdWludCB2YWx1ZSk7DQoJZXZlbnQgTG9nQ29pbnNFbWl0ZWQoYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQgYW1vdW50KTsNCg0KCS8vQ3Jvd2RzYWxlIENvbnN0cnVjdG9yDQoJZnVuY3Rpb24gQ3Jvd2RzYWxlKGFkZHJlc3MgX1RSSUJFQWRkcmVzcywgYWRkcmVzcyBfdG8pIHsNCgkJY29pbiA9IFRva2VuKF9UUklCRUFkZHJlc3MpOw0KCQltdWx0aXNpZ0V0aGVyID0gX3RvOw0KCX0NCgkNCgkvLyBEZWZhdWx0IGZ1bmN0aW9uIHRvIHJlY2VpdmUgZXRoZXINCglmdW5jdGlvbigpIHN0b3BJbkVtZXJnZW5jeSByZXNwZWN0VGltZUZyYW1lIHBheWFibGUgew0KCQlyZWNlaXZlRVRIKG1zZy5zZW5kZXIpOw0KCX0NCg0KCSANCgkvLyBUbyBjYWxsIHRvIHN0YXJ0IHRoZSBjcm93ZHNhbGUNCglmdW5jdGlvbiBzdGFydCgpIG9ubHlPd25lciB7DQoJCWlmIChzdGFydFRpbWUgIT0gMCkgdGhyb3c7IC8vIENyb3dkc2FsZSB3YXMgYWxyZWFkeSBzdGFydGVkDQoNCgkJc3RhcnRUaW1lID0gbm93IDsgICAgICAgICAgICANCgkJZW5kVGltZSA9ICBub3cgKyBDUk9XRFNBTEVfUEVSSU9EOyAgICANCgl9DQoNCgkvLyBNYWluIGZ1bmN0aW9uIG9uIEVUSCByZWNlaXZlDQoJZnVuY3Rpb24gcmVjZWl2ZUVUSChhZGRyZXNzIGJlbmVmaWNpYXJ5KSBpbnRlcm5hbCB7DQoJCWlmIChtc2cudmFsdWUgPCBNSU5fSU5WRVNUX0VUSEVSKSB0aHJvdzsgLy8gRG8gbm90IGFjY2VwdCBpbnZlc3RtZW50IGlmIHRoZSBhbW91bnQgaXMgbG93ZXIgdGhhbiB0aGUgbWluaW11bSBhbGxvd2VkIGludmVzdG1lbnQNCgkJDQoJCXVpbnQgY29pblRvU2VuZCA9IGJvbnVzKG1zZy52YWx1ZS5tdWwoQ09JTl9QRVJfRVRIRVIpLmRpdigxIGV0aGVyKSk7IC8vIENhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIHRva2VucyB0byBzZW5kDQoJCWlmIChjb2luVG9TZW5kLmFkZChjb2luU2VudFRvRXRoZXIpID4gTUFYX0NBUCkgdGhyb3c7CQ0KDQoJCUJhY2tlciBiYWNrZXIgPSBiYWNrZXJzW2JlbmVmaWNpYXJ5XTsNCgkJY29pbi50cmFuc2ZlcihiZW5lZmljaWFyeSwgY29pblRvU2VuZCk7IC8vIFRyYW5zZmVyIFRSSUJFDQoNCgkJYmFja2VyLmNvaW5TZW50ID0gYmFja2VyLmNvaW5TZW50LmFkZChjb2luVG9TZW5kKTsNCgkJYmFja2VyLndlaVJlY2VpdmVkID0gYmFja2VyLndlaVJlY2VpdmVkLmFkZChtc2cudmFsdWUpOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcgZm9yIHRoaXMgYmFja2VyICAgIA0KDQoJCWV0aGVyUmVjZWl2ZWQgPSBldGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcNCgkJY29pblNlbnRUb0V0aGVyID0gY29pblNlbnRUb0V0aGVyLmFkZChjb2luVG9TZW5kKTsNCg0KCQkvLyBTZW5kIGV2ZW50cw0KCQlMb2dDb2luc0VtaXRlZChtc2cuc2VuZGVyICxjb2luVG9TZW5kKTsNCgkJTG9nUmVjZWl2ZWRFVEgoYmVuZWZpY2lhcnksIGV0aGVyUmVjZWl2ZWQpOyANCgl9DQoJDQoNCgkvLyBCb251cyBmdW5jdGlvbiBmb3IgdGhlIGZpcnN0IHdlZWsNCglmdW5jdGlvbiBib251cyh1aW50IGFtb3VudCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCkgew0KCQlpZiAobm93IDwgc3RhcnRUaW1lLmFkZCg3IGRheXMpKSByZXR1cm4gYW1vdW50LmFkZChhbW91bnQuZGl2KDUpKTsgICAvLyBib251cyAyMCUNCgkJcmV0dXJuIGFtb3VudDsNCgl9DQoNCgkvLyBGaW5hbGl6ZSBmdW5jdGlvbg0KCWZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIHB1YmxpYyB7DQoNCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNyb3dkc2FsZSBoYXMgZW5kZWQgb3IgaWYgdGhlIG9sZCB0b2tlbnMgaGF2ZSBiZWVuIHNvbGQNCiAgICBpZihjb2luU2VudFRvRXRoZXIgIT0gTUFYX0NBUCl7DQogICAgICAgIGlmIChub3cgPCBlbmRUaW1lKSAgdGhyb3c7IC8vIElmIENyb3dkc2FsZSBzdGlsbCBydW5uaW5nDQogICAgfQ0KCQkNCgkJaWYgKCFtdWx0aXNpZ0V0aGVyLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7IC8vIE1vdmUgdGhlIHJlbWFpbmluZyBFdGhlciB0byB0aGUgbXVsdGlzaWcgYWRkcmVzcw0KCQkNCgkJdWludCByZW1haW5zID0gY29pbi5iYWxhbmNlT2YodGhpcyk7DQoJCWlmIChyZW1haW5zID4gMCkgew0KICAgICAgY29pblRvQnVybiA9IGNvaW5Ub0J1cm4uYWRkKHJlbWFpbnMpOw0KICAgICAgLy8gVHJhbnNmZXIgcmVtYWlucyB0byBvd25lciB0byBidXJuDQogICAgICBjb2luLnRyYW5zZmVyKG93bmVyLCByZW1haW5zKTsNCgkJfQ0KCQljcm93ZHNhbGVDbG9zZWQgPSB0cnVlOw0KCX0NCg0KCS8vIERyYWluIGZ1bmN0aW9ucyBpbiBjYXNlIG9mIHVuZXhwZWN0ZWQgaXNzdWVzIHdpdGggdGhlIHNtYXJ0IGNvbnRyYWN0Lg0KICAvLyBFVEggZHJhaW4NCglmdW5jdGlvbiBkcmFpbigpIG9ubHlPd25lciB7DQogICAgaWYgKCFtdWx0aXNpZ0V0aGVyLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7IC8vVHJhbnNmZXIgdG8gdGVhbSBtdWx0aXNpZyB3YWxsZXQNCgl9DQogIC8vIFRPS0VOIGRyYWluDQogIGZ1bmN0aW9uIGNvaW5EcmFpbigpIG9ubHlPd25lciB7DQogICAgdWludCByZW1haW5zID0gY29pbi5iYWxhbmNlT2YodGhpcyk7DQogICAgY29pbi50cmFuc2Zlcihvd25lciwgcmVtYWlucyk7IC8vIFRyYW5zZmVyIHRvIG93bmVyIHdhbGxldA0KCX0NCg0KCS8vIENoYW5nZSBtdWx0aXNpZyB3YWxsZXQgaW4gY2FzZSBpdHMgbmVlZGVkDQoJZnVuY3Rpb24gY2hhbmdlTXVsdGlzaWcoYWRkcmVzcyBhZGRyKSBvbmx5T3duZXIgcHVibGljIHsNCgkJaWYgKGFkZHIgPT0gYWRkcmVzcygwKSkgdGhyb3c7DQoJCW11bHRpc2lnRXRoZXIgPSBhZGRyOw0KCX0NCg0KCS8vIENoYW5nZSBjb250cmFjdCBvd25lcnNoaXANCglmdW5jdGlvbiBjaGFuZ2VUcmliZU93bmVyKCkgb25seU93bmVyIHB1YmxpYyB7DQoJCWNvaW4udHJhbnNmZXJPd25lcnNoaXAob3duZXIpOw0KCX0NCg0KCS8vIFRvZ2dsZSByZWZ1bmQgc3RhdGUgb24gYW5kIG9mZg0KCWZ1bmN0aW9uIHNldFJlZnVuZFN0YXRlKCkgb25seU93bmVyIHB1YmxpYyB7DQoJCWlmKHJlZnVuZHNPcGVuID09IGZhbHNlKXsNCgkJCXJlZnVuZHNPcGVuID0gdHJ1ZTsNCgkJfWVsc2V7DQoJCQlyZWZ1bmRzT3BlbiA9IGZhbHNlOw0KCQl9DQoJfQ0KDQoJLy9SZWZ1bmQgZnVuY3Rpb24gd2hlbiBtaW5pbXVtIGNhcCBpc250IHJlYWNoZWQsIHRoaXMgaXMgc3RlcCBpcyBzdGVwIDIsIFRISVMgRlVOQ1RJT04gT05MWSBBVkFJTEFCTEUgQUZURVIgQkVJTkcgRU5BQkxFRC4NCgkvL1NURVAxOiBGcm9tIFRSSUJFIHRva2VuIGNvbnRyYWN0IHVzZSAiYXBwcm92ZSIgZnVuY3Rpb24gd2l0aCB0aGUgYW1vdW50IG9mIFRSSUJFIHlvdSBnb3QgaW4gdG90YWwuDQoJLy9TVEVQMjogRnJvbSBUUklCRSBjcm93ZHNhbGUgY29udHJhY3QgdXNlICJyZWZ1bmQiIGZ1bmN0aW9uIHdpdGggdGhlIGFtb3VudCBvZiBUUklCRSB5b3UgZ290IGluIHRvdGFsLg0KCS8vU1RFUDM6IEZyb20gVFJJQkUgY3Jvd2RzYWxlIGNvbnRyYWN0IHVzZSAid2l0aGRyYXdQYXllbWVudCIgZnVuY3Rpb24gdG8gcmVjaWV2ZSB0aGUgRVRILg0KCWZ1bmN0aW9uIHJlZnVuZCh1aW50IF92YWx1ZSkgcmVmdW5kU3RhdHVzIHB1YmxpYyB7DQoJCQ0KCQlpZiAoX3ZhbHVlICE9IGJhY2tlcnNbbXNnLnNlbmRlcl0uY29pblNlbnQpIHRocm93OyAvLyBjb21wYXJlIHZhbHVlIGZyb20gYmFja2VyIGJhbGFuY2UNCg0KCQljb2luLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBhZGRyZXNzKHRoaXMpLCBfdmFsdWUpOyAvLyBnZXQgdGhlIHRva2VuIGJhY2sgdG8gdGhlIGNyb3dkc2FsZSBjb250cmFjdA0KDQoJCXVpbnQgRVRIVG9TZW5kID0gYmFja2Vyc1ttc2cuc2VuZGVyXS53ZWlSZWNlaXZlZDsNCgkJYmFja2Vyc1ttc2cuc2VuZGVyXS53ZWlSZWNlaXZlZD0wOw0KDQoJCWlmIChFVEhUb1NlbmQgPiAwKSB7DQoJCQlhc3luY1NlbmQobXNnLnNlbmRlciwgRVRIVG9TZW5kKTsgLy8gcHVsbCBwYXltZW50IHRvIGdldCByZWZ1bmQgaW4gRVRIDQoJCX0NCgl9DQoNCn0NCg0KbGlicmFyeSBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgcmV0dXJuIGM7DQogIH0NCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgYXNzZXJ0KGIgPiAwKTsNCiAgICB1aW50IGMgPSBhIC8gYjsNCiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICBhc3NlcnQoYiA8PSBhKTsNCiAgICByZXR1cm4gYSAtIGI7DQogIH0NCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSArIGI7DQogICAgYXNzZXJ0KGMgPj0gYSk7DQogICAgcmV0dXJuIGM7DQogIH0NCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7DQogICAgaWYgKCFhc3NlcnRpb24pIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCiAgfQ0KfQ=='