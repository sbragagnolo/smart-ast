base 64 content
base64crowdsaleMinter1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLy8gPT09PSBESVNDTEFJTUVSID09PT0NCi8vDQovLyBFVEhFUkVVTSBJUyBTVElMTCBBTiBFWFBFUkVNRU5UQUwgVEVDSE5PTE9HWS4NCi8vIEFMVEhPVUdIIFRISVMgU01BUlQgQ09OVFJBQ1QgV0FTIENSRUFURUQgV0lUSCBHUkVBVCBDQVJFIEFORCBJTiBUSEUgSE9QRSBPRiBCRUlORyBVU0VGVUwsIE5PIEdVQVJBTlRFRVMgT0YgRkxBV0xFU1MgT1BFUkFUSU9OIENBTiBCRSBHSVZFTi4NCi8vIElOIFBBUlRJQ1VMQVIgLSBTVUJUSUxFIEJVR1MsIEhBQ0tFUiBBVFRBQ0tTIE9SIE1BTEZVTkNUSU9OIE9GIFVOREVSTFlJTkcgVEVDSE5PTE9HWSBDQU4gQ0FVU0UgVU5JTlRFTlRJT05BTCBCRUhBVklPVVIuDQovLyBZT1UgQVJFIFNUUk9OR0xZIEVOQ09VUkFHRUQgVE8gU1RVRFkgVEhJUyBTTUFSVCBDT05UUkFDVCBDQVJFRlVMTFkgSU4gT1JERVIgVE8gVU5ERVJTVEFORCBQT1NTSUJMRSBFREdFIENBU0VTIEFORCBSSVNLUy4NCi8vIERPTidUIFVTRSBUSElTIFNNQVJUIENPTlRSQUNUIElGIFlPVSBIQVZFIFNVQlNUQU5USUFMIERPVUJUUyBPUiBJRiBZT1UgRE9OJ1QgS05PVyBXSEFUIFlPVSBBUkUgRE9JTkcuDQovLw0KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQ0KLy8gQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULA0KLy8gSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwNCi8vIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLA0KLy8gT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4NCi8vID09PT0NCi8vDQoNCi8vLyBAYXV0aG9yIFNhbnRpbWVudCBTYWdsDQovLy8gQHRpdGxlICBDcm93ZHNhbGVNaW50ZXINCg0KY29udHJhY3QgQmFzZSB7DQoNCiAgICBmdW5jdGlvbiBtYXgodWludCBhLCB1aW50IGIpIHJldHVybnMgKHVpbnQpIHsgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOyB9DQogICAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7IHJldHVybiBhIDw9IGIgPyBhIDogYjsgfQ0KDQogICAgbW9kaWZpZXIgb25seShhZGRyZXNzIGFsbG93ZWQpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gYWxsb3dlZCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQoNCiAgICAvLy9AcmV0dXJuIFRydWUgaWYgYF9hZGRyYCBpcyBhIGNvbnRyYWN0DQogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmIChfYWRkciA9PSAwKSByZXR1cm4gZmFsc2U7DQogICAgICAgIHVpbnQgc2l6ZTsNCiAgICAgICAgYXNzZW1ibHkgew0KICAgICAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKHNpemUgPiAwKTsNCiAgICB9DQoNCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgLy8gKiAgICAgICAgICByZWVudHJhbmN5IGhhbmRsaW5nICAgICAgICAgICAgICAgICAgKg0KICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KICAgIC8vQGRldiBwcmVkZWZpbmVkIGxvY2tzICh1cCB0byB1aW50IGJpdCBsZW5ndGgsIGkuZS4gMjU2IHBvc3NpYmxlKQ0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAwID0gMiAqKiAwOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAxID0gMiAqKiAxOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAyID0gMiAqKiAyOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAzID0gMiAqKiAzOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA0ID0gMiAqKiA0Ow0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA1ID0gMiAqKiA1Ow0KDQogICAgLy9wcmV2ZW50cyByZWVudHJhbmN5IGF0dGFjczogc3BlY2lmaWMgbG9ja3MNCiAgICB1aW50IHByaXZhdGUgYml0bG9ja3MgPSAwOw0KICAgIG1vZGlmaWVyIG5vUmVlbnRyYW5jeSh1aW50IG0pIHsNCiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOw0KICAgICAgICBpZiAoX2xvY2tzICYgbSA+IDApIHRocm93Ow0KICAgICAgICBiaXRsb2NrcyB8PSBtOw0KICAgICAgICBfOw0KICAgICAgICBiaXRsb2NrcyA9IF9sb2NrczsNCiAgICB9DQoNCiAgICBtb2RpZmllciBub0FueVJlZW50cmFuY3kgew0KICAgICAgICB2YXIgX2xvY2tzID0gYml0bG9ja3M7DQogICAgICAgIGlmIChfbG9ja3MgPiAwKSB0aHJvdzsNCiAgICAgICAgYml0bG9ja3MgPSB1aW50KC0xKTsNCiAgICAgICAgXzsNCiAgICAgICAgYml0bG9ja3MgPSBfbG9ja3M7DQogICAgfQ0KDQogICAgLy8vQGRldiBlbXB0eSBtYXJraW5nIG1vZGlmaWVyIHNpZ25hbGluZyB0byB1c2VyIG9mIHRoZSBtYXJrZWQgZnVuY3Rpb24gLCB0aGF0IGl0IGNhbiBjYXVzZSBhbiByZWVudHJhbnQgY2FsbC4NCiAgICAvLy8gICAgIGRldmVsb3BlciBzaG91bGQgbWFrZSB0aGUgY2FsbGVyIGZ1bmN0aW9uIHJlZW50cmFudC1zYWZlIGlmIGl0IHVzZSBhIHJlZW50cmFudCBmdW5jdGlvbi4NCiAgICBtb2RpZmllciByZWVudHJhbnQgeyBfOyB9DQoNCn0NCg0KY29udHJhY3QgTWludGFibGVUb2tlbiB7DQogICAgLy90YXJnZXQgdG9rZW4gY29udHJhY3QgaXMgcmVzcG9uc2libGUgdG8gYWNjZXB0IG9ubHkgYXV0aG9yaXplZCBtaW50IGNhbGxzLg0KICAgIGZ1bmN0aW9uIG1pbnQodWludCBhbW91bnQsIGFkZHJlc3MgYWNjb3VudCk7DQoNCiAgICAvL3N0YXJ0IHRoZSB0b2tlbiBvbiBtaW50aW5nIGZpbmlzaGVkLA0KICAgIGZ1bmN0aW9uIHN0YXJ0KCk7DQp9DQoNCmNvbnRyYWN0IE93bmVkIGlzIEJhc2Ugew0KDQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7DQoNCiAgICBmdW5jdGlvbiBPd25lZCgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBvbmx5KG93bmVyKSB7DQogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIG9ubHkobmV3T3duZXIpIHsNCiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsNCiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICB9DQoNCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOw0KDQp9DQoNCmNvbnRyYWN0IEJhbGFuY2VTdG9yYWdlIHsNCiAgICBmdW5jdGlvbiBiYWxhbmNlcyhhZGRyZXNzIGFjY291bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQgYmFsYW5jZSk7DQp9DQoNCmNvbnRyYWN0IEFkZHJlc3NMaXN0IHsNCiAgICBmdW5jdGlvbiBjb250YWlucyhhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsNCn0NCg0KY29udHJhY3QgTWluTWF4V2hpdGVMaXN0IHsNCiAgICBmdW5jdGlvbiBhbGxvd2VkKGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgLypmaW5uZXkqLywgdWludCAvKmZpbm5leSovICk7DQp9DQoNCmNvbnRyYWN0IFByZXNhbGVCb251c1ZvdGluZyB7DQogICAgZnVuY3Rpb24gcmF3Vm90ZXMoYWRkcmVzcyBhZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByYXdWb3RlKTsNCn0NCg0KY29udHJhY3QgQ3Jvd2RzYWxlTWludGVyIGlzIE93bmVkIHsNCg0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgVkVSU0lPTiA9ICIwLjIuMS1URVNULkVULjEiOw0KDQogICAgLyogPT09PT09IGNvbmZpZ3VyYXRpb24gU1RBUlQgPT09PT09ICovDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQ09NTVVOSVRZX1NBTEVfU1RBUlQgPSAzOTcyMzgwOyAvKiBhcHByb3guIDA0LjA3LjIwMTcgMTI6MDAgKi8NCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUklPUklUWV9TQUxFX1NUQVJUICA9IDM5NzI0ODU7IC8qIGFwcHJveC4gMDQuMDcuMjAxNyAxMjozMCAqLw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBVQkxJQ19TQUxFX1NUQVJUICAgID0gMzk3MjU5MDsgLyogYXBwcm94LiAwNC4wNy4yMDE3IDEzOjAwICovDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFVCTElDX1NBTEVfRU5EICAgICAgPSAzOTcyNjk1OyAvKiBhcHByb3guIDA0LjA3LjIwMTcgMTM6MzAgKi8NCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBXSVRIRFJBV0FMX0VORCAgICAgICA9IDM5NzI4MDA7IC8qIGFwcHJveC4gMDQuMDcuMjAxNyAxNDowMCAqLw0KDQogICAgYWRkcmVzcyBwdWJsaWMgVEVBTV9HUk9VUF9XQUxMRVQgICAgICAgICAgID0gMHgyMTVhQ0IzNzg0NTAyN2NBNjRhNGYyOUIyRkNiN0FmZkE4RTlkMzI2Ow0KICAgIGFkZHJlc3MgcHVibGljIEFEVklTRVJTX0FORF9GUklFTkRTX1dBTExFVCA9IDB4NDFhYjgzNjBkRUYxZTE5RmRGYTMyMDkyRDgzYTdhNzk5NkMzMTJhNDsNCg0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRFQU1fQk9OVVNfUEVSX0NFTlQgICAgICAgICAgICA9IDE4Ow0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEFEVklTT1JTX0FORF9QQVJUTkVSU19QRVJfQ0VOVCA9IDEwOw0KDQogICAgTWludGFibGVUb2tlbiAgICAgIHB1YmxpYyBUT0tFTiAgICAgICAgICAgICAgICAgICAgPSBNaW50YWJsZVRva2VuKDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApOw0KDQogICAgQWRkcmVzc0xpc3QgICAgICAgIHB1YmxpYyBQUklPUklUWV9BRERSRVNTX0xJU1QgICAgPSBBZGRyZXNzTGlzdCgweDQ2MzYzNWVGZDIyNTU4YzY0RWZhNjIyN0E0NTY0OWVlRGMwZTQ4ODgpOw0KICAgIE1pbk1heFdoaXRlTGlzdCAgICBwdWJsaWMgQ09NTVVOSVRZX0FMTE9XQU5DRV9MSVNUID0gTWluTWF4V2hpdGVMaXN0KDB4MjZjNjNkNjMxQTMwNzg5N2Q3NkFmNWYwMkEwOEEwOWIzMzk1RENiOSk7DQogICAgQmFsYW5jZVN0b3JhZ2UgICAgIHB1YmxpYyBQUkVTQUxFX0JBTEFOQ0VTICAgICAgICAgPSBCYWxhbmNlU3RvcmFnZSgweDRGZDk5N0VkN2MxMERiRDA0ZTk1ZDM3MzBjZDc3RDc5NTEzMDc2RjIpOw0KICAgIFByZXNhbGVCb251c1ZvdGluZyBwdWJsaWMgUFJFU0FMRV9CT05VU19WT1RJTkcgICAgID0gUHJlc2FsZUJvbnVzVm90aW5nKDB4MjgzYTk3QWY4NjcxNjUxNjlBRUNlMGIyRTk2M2I5ZjBGQzdFNWI4Yyk7DQoNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUF9FVEggPSA0Ow0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRV9FVEggPSAzOw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRV9FVEggPSA1Ow0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9BQ0NFUFRFRF9BTU9VTlRfRklOTkVZID0gMjAwOw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOX1BFUl9FVEggPSAxMDAwOw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBSRV9TQUxFX0JPTlVTX1BFUl9DRU5UID0gNTQ7DQoNCiAgICAvL2NvbnN0cnVjdG9yDQogICAgZnVuY3Rpb24gQ3Jvd2RzYWxlTWludGVyKCkgew0KICAgICAgICAvL2NoZWNrIGNvbmZpZ3VyYXRpb24gaWYgc29tZXRoaW5nIGluIHNldHVwIGlzIGxvb2tpbmcgd2VpcmQNCiAgICAgICAgaWYgKA0KICAgICAgICAgICAgVE9LRU5fUEVSX0VUSCA9PSAwDQogICAgICAgICAgICB8fCBURUFNX0JPTlVTX1BFUl9DRU5UICsgQURWSVNPUlNfQU5EX1BBUlRORVJTX1BFUl9DRU5UID49MTAwDQogICAgICAgICAgICB8fCBNSU5fQUNDRVBURURfQU1PVU5UX0ZJTk5FWSA8IDENCiAgICAgICAgICAgIHx8IG93bmVyID09IDB4MA0KICAgICAgICAgICAgfHwgYWRkcmVzcyhDT01NVU5JVFlfQUxMT1dBTkNFX0xJU1QpID09IDB4MA0KICAgICAgICAgICAgfHwgYWRkcmVzcyhQUklPUklUWV9BRERSRVNTX0xJU1QpID09IDB4MA0KICAgICAgICAgICAgfHwgYWRkcmVzcyhQUkVTQUxFX0JPTlVTX1ZPVElORykgPT0gMHgwDQogICAgICAgICAgICB8fCBhZGRyZXNzKFBSRVNBTEVfQkFMQU5DRVMpID09IDB4MA0KICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1NBTEVfU1RBUlQgPT0gMA0KICAgICAgICAgICAgfHwgUFJJT1JJVFlfU0FMRV9TVEFSVCA9PSAwDQogICAgICAgICAgICB8fCBQVUJMSUNfU0FMRV9TVEFSVCA9PSAwDQogICAgICAgICAgICB8fCBQVUJMSUNfU0FMRV9FTkQgPT0gMA0KICAgICAgICAgICAgfHwgV0lUSERSQVdBTF9FTkQgPT0gMA0KICAgICAgICAgICAgfHwgTUlOX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFID09IDANCiAgICAgICAgICAgIHx8IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSA9PSAwDQogICAgICAgICAgICB8fCBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUCA9PSAwDQogICAgICAgICAgICB8fCBDT01NVU5JVFlfU0FMRV9TVEFSVCA8PSBibG9jay5udW1iZXINCiAgICAgICAgICAgIHx8IENPTU1VTklUWV9TQUxFX1NUQVJUID49IFBSSU9SSVRZX1NBTEVfU1RBUlQNCiAgICAgICAgICAgIHx8IFBSSU9SSVRZX1NBTEVfU1RBUlQgPj0gUFVCTElDX1NBTEVfU1RBUlQNCiAgICAgICAgICAgIHx8IFBVQkxJQ19TQUxFX1NUQVJUID49IFBVQkxJQ19TQUxFX0VORA0KICAgICAgICAgICAgfHwgUFVCTElDX1NBTEVfRU5EID49IFdJVEhEUkFXQUxfRU5EDQogICAgICAgICAgICB8fCBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUCA+IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRQ0KICAgICAgICAgICAgfHwgTUlOX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFID4gTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFICkNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgLyogPT09PT09IGNvbmZpZ3VyYXRpb24gRU5EID09PT09PSAqLw0KDQogICAgLyogPT09PT09IHB1YmxpYyBzdGF0ZXMgU1RBUlQ9PT09PT0gKi8NCg0KICAgIGJvb2wgcHVibGljIGlzQWJvcnRlZCA9IGZhbHNlOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VzOw0KICAgIGJvb2wgcHVibGljIFRPS0VOX1NUQVJURUQgPSBmYWxzZTsNCiAgICB1aW50IHB1YmxpYyB0b3RhbF9yZWNlaXZlZF9hbW91bnQ7DQogICAgYWRkcmVzc1tdIHB1YmxpYyBpbnZlc3RvcnM7DQoNCiAgICAvL2Rpc3BsYXlzIG51bWJlciBvZiB1bmlxIGludmVzdG9ycw0KICAgIGZ1bmN0aW9uIGludmVzdG9yc0NvdW50KCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyh1aW50KSB7IHJldHVybiBpbnZlc3RvcnMubGVuZ3RoOyB9DQoNCiAgICAvL2Rpc3BsYXlzIHJlY2VpdmVkIGFtb3VudCBpbiBldGggdXB0byBub3cNCiAgICBmdW5jdGlvbiBUT1RBTF9SRUNFSVZFRF9FVEgoKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50KSB7IHJldHVybiB0b3RhbF9yZWNlaXZlZF9hbW91bnQgLyAxIGV0aGVyOyB9DQoNCiAgICAvL2Rpc3BsYXlzIGN1cnJlbnQgY29udHJhY3Qgc3RhdGUgaW4gaHVtYW4gcmVhZGFibGUgZm9ybQ0KICAgIGZ1bmN0aW9uIHN0YXRlKCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAoc3RyaW5nKSB7IHJldHVybiBzdGF0ZU5hbWVzWyB1aW50KGN1cnJlbnRTdGF0ZSgpKSBdOyB9DQoNCiAgICBmdW5jdGlvbiBzYW5fd2hpdGVsaXN0KGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCwgdWludCkgeyByZXR1cm4gQ09NTVVOSVRZX0FMTE9XQU5DRV9MSVNULmFsbG93ZWQoYWRkcik7IH0NCiAgICBmdW5jdGlvbiBjZmlfd2hpdGVsaXN0KGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCkgeyByZXR1cm4gUFJJT1JJVFlfQUREUkVTU19MSVNULmNvbnRhaW5zKGFkZHIpOyB9DQoNCiAgICAvKiA9PT09PT0gcHVibGljIHN0YXRlcyBFTkQgPT09PT09ICovDQoNCiAgICBzdHJpbmdbXSBwcml2YXRlIHN0YXRlTmFtZXMgPSBbIkJFRk9SRV9TVEFSVCIsICJDT01NVU5JVFlfU0FMRSIsICJQUklPUklUWV9TQUxFIiwgIlBSSU9SSVRZX1NBTEVfRklOSVNIRUQiLCAiUFVCTElDX1NBTEUiLCAiQk9OVVNfTUlOVElORyIsICJXSVRIRFJBV0FMX1JVTk5JTkciLCAiUkVGVU5EX1JVTk5JTkciLCAiQ0xPU0VEIiBdOw0KICAgIGVudW0gU3RhdGUgeyBCRUZPUkVfU1RBUlQsIENPTU1VTklUWV9TQUxFLCBQUklPUklUWV9TQUxFLCBQUklPUklUWV9TQUxFX0ZJTklTSEVELCBQVUJMSUNfU0FMRSwgQk9OVVNfTUlOVElORywgV0lUSERSQVdBTF9SVU5OSU5HLCBSRUZVTkRfUlVOTklORywgQ0xPU0VEIH0NCg0KICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUCA9IENPTU1VTklUWV9QTFVTX1BSSU9SSVRZX1NBTEVfQ0FQX0VUSCAqIDEgZXRoZXI7DQogICAgdWludCBwcml2YXRlIGNvbnN0YW50IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSA9IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRV9FVEggKiAxIGV0aGVyOw0KICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUgPSBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkVfRVRIICogMSBldGhlcjsNCiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgTUlOX0FDQ0VQVEVEX0FNT1VOVCA9IE1JTl9BQ0NFUFRFRF9BTU9VTlRfRklOTkVZICogMSBmaW5uZXk7DQogICAgYm9vbCBwcml2YXRlIGFsbEJvbnVzZXNBcmVNaW50ZWQgPSBmYWxzZTsNCg0KICAgIC8vDQogICAgLy8gPT09PT09PSBpbnRlcmZhY2UgbWV0aG9kcyA9PT09PT09DQogICAgLy8NCg0KICAgIC8vYWNjZXB0IHBheW1lbnRzIGhlcmUNCiAgICBmdW5jdGlvbiAoKQ0KICAgIHBheWFibGUNCiAgICBub0FueVJlZW50cmFuY3kNCiAgICB7DQogICAgICAgIFN0YXRlIHN0YXRlID0gY3VycmVudFN0YXRlKCk7DQogICAgICAgIHVpbnQgYW1vdW50X2FsbG93ZWQ7DQogICAgICAgIGlmIChzdGF0ZSA9PSBTdGF0ZS5DT01NVU5JVFlfU0FMRSkgew0KICAgICAgICAgICAgdmFyIChtaW5fZmlubmV5LCBtYXhfZmlubmV5KSA9IENPTU1VTklUWV9BTExPV0FOQ0VfTElTVC5hbGxvd2VkKG1zZy5zZW5kZXIpOw0KICAgICAgICAgICAgdmFyIChtaW4sIG1heCkgPSAobWluX2Zpbm5leSAqIDEgZmlubmV5LCBtYXhfZmlubmV5ICogMSBmaW5uZXkpOw0KICAgICAgICAgICAgdmFyIHNlbmRlcl9iYWxhbmNlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07DQogICAgICAgICAgICBhc3NlcnQgKHNlbmRlcl9iYWxhbmNlIDw9IG1heCk7IC8vc2FuaXR5IGNoZWNrOiBzaG91bGQgYmUgYWx3YXlzIHRydWU7DQogICAgICAgICAgICBhc3NlcnQgKG1zZy52YWx1ZSA+PSBtaW4pOyAgICAgIC8vcmVqZWN0IHBheW1lbnRzIGxlc3MgdGhhbiBtaW5pbXVtDQogICAgICAgICAgICBhbW91bnRfYWxsb3dlZCA9IG1heCAtIHNlbmRlcl9iYWxhbmNlOw0KICAgICAgICAgICAgX3JlY2VpdmVGdW5kc1VwVG8oYW1vdW50X2FsbG93ZWQpOw0KICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IFN0YXRlLlBSSU9SSVRZX1NBTEUpIHsNCiAgICAgICAgICAgIGFzc2VydCAoUFJJT1JJVFlfQUREUkVTU19MSVNULmNvbnRhaW5zKG1zZy5zZW5kZXIpKTsNCiAgICAgICAgICAgIGFtb3VudF9hbGxvd2VkID0gQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVAgLSB0b3RhbF9yZWNlaXZlZF9hbW91bnQ7DQogICAgICAgICAgICBfcmVjZWl2ZUZ1bmRzVXBUbyhhbW91bnRfYWxsb3dlZCk7DQogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gU3RhdGUuUFVCTElDX1NBTEUpIHsNCiAgICAgICAgICAgIGFtb3VudF9hbGxvd2VkID0gTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFIC0gdG90YWxfcmVjZWl2ZWRfYW1vdW50Ow0KICAgICAgICAgICAgX3JlY2VpdmVGdW5kc1VwVG8oYW1vdW50X2FsbG93ZWQpOw0KICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IFN0YXRlLlJFRlVORF9SVU5OSU5HKSB7DQogICAgICAgICAgICAvLyBhbnkgZW50cmluZyBjYWxsIGluIFJlZnVuZCBQaGFzZSB3aWxsIGNhdXNlIGZ1bGwgcmVmdW5kDQogICAgICAgICAgICBfc2VuZFJlZnVuZCgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICB9DQoNCg0KICAgIGZ1bmN0aW9uIHJlZnVuZCgpIGV4dGVybmFsDQogICAgaW5TdGF0ZShTdGF0ZS5SRUZVTkRfUlVOTklORykNCiAgICBub0FueVJlZW50cmFuY3kNCiAgICB7DQogICAgICAgIF9zZW5kUmVmdW5kKCk7DQogICAgfQ0KDQoNCiAgICBmdW5jdGlvbiB3aXRoZHJhd0Z1bmRzQW5kU3RhcnRUb2tlbigpIGV4dGVybmFsDQogICAgaW5TdGF0ZShTdGF0ZS5XSVRIRFJBV0FMX1JVTk5JTkcpDQogICAgbm9BbnlSZWVudHJhbmN5DQogICAgb25seShvd25lcikNCiAgICB7DQogICAgICAgIC8vIHRyYW5zZmVyIGZ1bmRzIHRvIG93bmVyDQogICAgICAgIGlmICghb3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsNCg0KICAgICAgICAvL25vdGlmeSB0b2tlbiBjb250cmFjdCB0byBzdGFydA0KICAgICAgICBpZiAoVE9LRU4uY2FsbChieXRlczQoc2hhMygic3RhcnQoKSIpKSkpIHsNCiAgICAgICAgICAgIFRPS0VOX1NUQVJURUQgPSB0cnVlOw0KICAgICAgICAgICAgVG9rZW5TdGFydGVkKFRPS0VOKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGV2ZW50IFRva2VuU3RhcnRlZChhZGRyZXNzIHRva2VuQWRkcik7DQoNCiAgICAvL3RoZXJlIGFyZSBhcm91bmQgNDAgYWRkcmVzc2VzIGluIFBSRVNBTEVfQUREUkVTU0VTIGxpc3QuIEV2ZXJ5dGhpbmcgZml0cyBpbnRvIHNpbmdsZSBUeC4NCiAgICBmdW5jdGlvbiBtaW50QWxsQm9udXNlcygpIGV4dGVybmFsDQogICAgaW5TdGF0ZShTdGF0ZS5CT05VU19NSU5USU5HKQ0KICAgIG5vQW55UmVlbnRyYW5jeQ0KICAgIHsNCiAgICAgICAgYXNzZXJ0KCFhbGxCb251c2VzQXJlTWludGVkKTsNCiAgICAgICAgYWxsQm9udXNlc0FyZU1pbnRlZCA9IHRydWU7DQoNCiAgICAgICAgdWludCBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVCA9IFRFQU1fQk9OVVNfUEVSX0NFTlQgKyBBRFZJU09SU19BTkRfUEFSVE5FUlNfUEVSX0NFTlQ7DQoNCiAgICAgICAgdWludCB0b3RhbF9wcmVzYWxlX2Ftb3VudF93aXRoX2JvbnVzID0gbWludFByZXNhbGVCb251c2VzKCk7DQogICAgICAgIHVpbnQgdG90YWxfY29sbGVjdGVkX2Ftb3VudCA9IHRvdGFsX3JlY2VpdmVkX2Ftb3VudCArIHRvdGFsX3ByZXNhbGVfYW1vdW50X3dpdGhfYm9udXM7DQogICAgICAgIHVpbnQgZXh0cmFfYW1vdW50ID0gdG90YWxfY29sbGVjdGVkX2Ftb3VudCAqIFRFQU1fQU5EX1BBUlRORVJTX1BFUl9DRU5UIC8gKDEwMCAtIFRFQU1fQU5EX1BBUlRORVJTX1BFUl9DRU5UKTsNCiAgICAgICAgdWludCBleHRyYV90ZWFtX2Ftb3VudCA9IGV4dHJhX2Ftb3VudCAqIFRFQU1fQk9OVVNfUEVSX0NFTlQgLyBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVDsNCiAgICAgICAgdWludCBleHRyYV9wYXJ0bmVyc19hbW91bnQgPSBleHRyYV9hbW91bnQgKiBBRFZJU09SU19BTkRfUEFSVE5FUlNfUEVSX0NFTlQgLyBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVDsNCi8qIA0KICAgICAgICAvL2JlYXV0aWZ5IHRvdGFsIHN1cHBseTogcm91bmQgZG93biB0byBmdWxsIGV0aC4NCiAgICAgICAgdWludCB0b3RhbF90b19taW50ID0gdG90YWxfY29sbGVjdGVkX2Ftb3VudCArIGV4dHJhX2Ftb3VudDsNCiAgICAgICAgdWludCByb3VuZF9yZW1haW5kZXIgPSB0b3RhbF90b19taW50IC0gKHRvdGFsX3RvX21pbnQgLyAxIGV0aGVyICogMSBldGhlcik7DQogICAgICAgIGV4dHJhX3RlYW1fYW1vdW50IC09IHJvdW5kX3JlbWFpbmRlcjsgLy90aGlzIHdpbGwgcmVkdWNlIHRvdGFsX3N1cHBseSB0byByb3VuZGVkIHZhbHVlDQoqLw0KICAgICAgICAvL21pbnQgZ3JvdXAgYm9udXNlcw0KICAgICAgICBfbWludChleHRyYV90ZWFtX2Ftb3VudCAsIFRFQU1fR1JPVVBfV0FMTEVUKTsNCiAgICAgICAgX21pbnQoZXh0cmFfcGFydG5lcnNfYW1vdW50LCBBRFZJU0VSU19BTkRfRlJJRU5EU19XQUxMRVQpOw0KDQogICAgfQ0KDQogICAgZnVuY3Rpb24gbWludFByZXNhbGVCb251c2VzKCkgaW50ZXJuYWwgcmV0dXJucyh1aW50IGFtb3VudCkgew0KICAgICAgICB1aW50IHRvdGFsX3ByZXNhbGVfYW1vdW50X3dpdGhfYm9udXMgPSAwOw0KICAgICAgICAvL21pbnQgcHJlc2FsZSBib251c2VzDQogICAgICAgIGZvcih1aW50IGk9MDsgaSA8IFBSRVNBTEVfQUREUkVTU0VTLmxlbmd0aDsgKytpKSB7DQogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBQUkVTQUxFX0FERFJFU1NFU1tpXTsNCiAgICAgICAgICAgIHZhciBhbW91bnRfd2l0aF9ib251cyA9IHByZXNhbGVUb2tlbkFtb3VudChhZGRyKTsNCiAgICAgICAgICAgIGlmIChhbW91bnRfd2l0aF9ib251cz4wKSB7DQogICAgICAgICAgICAgICAgX21pbnQoYW1vdW50X3dpdGhfYm9udXMsIGFkZHIpOw0KICAgICAgICAgICAgICAgIHRvdGFsX3ByZXNhbGVfYW1vdW50X3dpdGhfYm9udXMgKz0gYW1vdW50X3dpdGhfYm9udXM7DQogICAgICAgICAgICB9DQogICAgICAgIH0vL2Zvcg0KICAgICAgICByZXR1cm4gdG90YWxfcHJlc2FsZV9hbW91bnRfd2l0aF9ib251czsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBwcmVzYWxlVG9rZW5BbW91bnQoYWRkcmVzcyBhZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KXsNCiAgICAgICAgdWludCBwcmVzYWxlX2JhbGFuY2UgPSBQUkVTQUxFX0JBTEFOQ0VTLmJhbGFuY2VzKGFkZHIpOw0KICAgICAgICBpZiAocHJlc2FsZV9iYWxhbmNlID4gMCkgew0KICAgICAgICAgICAgLy8gdGhpcyBjYWxjdWxhdGlvbiBpcyBhYm91dCB3YWl2ZWQgcHJlLXNhbGUgYm9udXMuDQogICAgICAgICAgICAvLyByYXdWb3RlIGNvbnRhaW5zIGEgdmFsdWUgWzAuLjEgZXRoZXJdLg0KICAgICAgICAgICAgLy8gICAgIDAgZXRoZXIgICAgLSBtZWFucyAiZGVmYXVsdCB2YWx1ZSIgb3IgIm5vIHZvdGUiIDogMTAwJSBib251cyBzYXZlZA0KICAgICAgICAgICAgLy8gICAgIDEgZXRoZXIgICAgLSBtZWFucyAidm90ZSAxMDAlIiA6IDEwMCUgYm9udXMgc2F2ZWQNCiAgICAgICAgICAgIC8vICAgIDw9MTAgZmlubmV5IC0gc3BlY2lhbCB2YWx1ZSAidm90ZSAwJSIgOiBubyBib251cyBhdCBhbGwgKDEwMCUgYm9udXMgd2FpdmVkKS4NCiAgICAgICAgICAgIC8vICBvdGhlciB2YWx1ZSAtICJQUkVfU0FMRV9CT05VU19QRVJfQ0VOVCAqIHJhd1ZvdGUgLyAxIGV0aGVyIiBpcyBhbiBlZmZlY3RpdmUgYm9udXMgcGVyIGNlbnQgZm9yIHBhcnRpY3VsYXIgcHJlc2FsZSBtZW1iZXIuDQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgdmFyIHJhd1ZvdGUgPSBQUkVTQUxFX0JPTlVTX1ZPVElORy5yYXdWb3RlcyhhZGRyKTsNCiAgICAgICAgICAgIGlmIChyYXdWb3RlID09IDApICAgICAgICAgICAgICByYXdWb3RlID0gMSBldGhlcjsgLy9zcGVjaWFsIGNhc2UgIm5vIHZvdGUiIChkZWZhdWx0IHZhbHVlKSA9PT4gKDEgZXRoZXIgaXMgMTAwJSkNCiAgICAgICAgICAgIGVsc2UgaWYgKHJhd1ZvdGUgPD0gMTAgZmlubmV5KSByYXdWb3RlID0gMDsgICAgICAgLy9zcGVjaWFsIGNhc2UgIjAlIiAobm8gYm9udXMpICAgICAgICAgICA9PT4gKDAgZXRoZXIgaXMgICAwJSkNCiAgICAgICAgICAgIGVsc2UgaWYgKHJhd1ZvdGUgPiAxIGV0aGVyKSAgICByYXdWb3RlID0gMSBldGhlcjsgLy9tYXggYm9udXMgaXMgMTAwJSAoc2hvdWxkIG5vdCBvY2N1cikNCiAgICAgICAgICAgIHZhciBwcmVzYWxlX2JvbnVzID0gcHJlc2FsZV9iYWxhbmNlICogUFJFX1NBTEVfQk9OVVNfUEVSX0NFTlQgKiByYXdWb3RlIC8gMSBldGhlciAvIDEwMDsNCiAgICAgICAgICAgIHJldHVybiBwcmVzYWxlX2JhbGFuY2UgKyBwcmVzYWxlX2JvbnVzOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhdHRhY2hUb1Rva2VuKE1pbnRhYmxlVG9rZW4gdG9rZW5BZGRyKSBleHRlcm5hbA0KICAgIGluU3RhdGUoU3RhdGUuQkVGT1JFX1NUQVJUKQ0KICAgIG9ubHkob3duZXIpDQogICAgew0KICAgICAgICBUT0tFTiA9IHRva2VuQWRkcjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhYm9ydCgpIGV4dGVybmFsDQogICAgaW5TdGF0ZUJlZm9yZShTdGF0ZS5SRUZVTkRfUlVOTklORykNCiAgICBvbmx5KG93bmVyKQ0KICAgIHsNCiAgICAgICAgaXNBYm9ydGVkID0gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLw0KICAgIC8vID09PT09PT0gaW1wbGVtZW50YXRpb24gbWV0aG9kcyA9PT09PT09DQogICAgLy8NCg0KICAgIGZ1bmN0aW9uIF9zZW5kUmVmdW5kKCkgcHJpdmF0ZQ0KICAgIHRva2VuSG9sZGVyc09ubHkNCiAgICB7DQogICAgICAgIC8vIGxvYWQgYmFsYW5jZSB0byByZWZ1bmQgcGx1cyBhbW91bnQgY3VycmVudGx5IHNlbnQNCiAgICAgICAgdmFyIGFtb3VudF90b19yZWZ1bmQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXSArIG1zZy52YWx1ZTsNCiAgICAgICAgLy8gcmVzZXQgYmFsYW5jZQ0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7DQogICAgICAgIC8vIHNlbmQgcmVmdW5kIGJhY2sgdG8gc2VuZGVyDQogICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKGFtb3VudF90b19yZWZ1bmQpKSB0aHJvdzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfcmVjZWl2ZUZ1bmRzVXBUbyh1aW50IGFtb3VudCkgcHJpdmF0ZQ0KICAgIG5vdFRvb1NtYWxsQW1vdW50T25seQ0KICAgIHsNCiAgICAgICAgcmVxdWlyZSAoYW1vdW50ID4gMCk7DQogICAgICAgIGlmIChtc2cudmFsdWUgPiBhbW91bnQpIHsNCiAgICAgICAgICAgIC8vIGFjY2VwdCBhbW91bnQgb25seSBhbmQgcmV0dXJuIGNoYW5nZQ0KICAgICAgICAgICAgdmFyIGNoYW5nZV90b19yZXR1cm4gPSBtc2cudmFsdWUgLSBhbW91bnQ7DQogICAgICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChjaGFuZ2VfdG9fcmV0dXJuKSkgdGhyb3c7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBhY2NlcHQgZnVsbCBhbW91bnQNCiAgICAgICAgICAgIGFtb3VudCA9IG1zZy52YWx1ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPT0gMCkgaW52ZXN0b3JzLnB1c2gobXNnLnNlbmRlcik7DQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IGFtb3VudDsNCiAgICAgICAgdG90YWxfcmVjZWl2ZWRfYW1vdW50ICs9IGFtb3VudDsNCiAgICAgICAgX21pbnQoYW1vdW50LG1zZy5zZW5kZXIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIF9taW50KHVpbnQgYW1vdW50LCBhZGRyZXNzIGFjY291bnQpIHByaXZhdGUgew0KICAgICAgICBNaW50YWJsZVRva2VuKFRPS0VOKS5taW50KGFtb3VudCAqIFRPS0VOX1BFUl9FVEgsIGFjY291bnQpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGN1cnJlbnRTdGF0ZSgpIHByaXZhdGUgY29uc3RhbnQNCiAgICByZXR1cm5zIChTdGF0ZSkNCiAgICB7DQogICAgICAgIGlmIChpc0Fib3J0ZWQpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhbGFuY2UgPiAwDQogICAgICAgICAgICAgICAgICAgPyBTdGF0ZS5SRUZVTkRfUlVOTklORw0KICAgICAgICAgICAgICAgICAgIDogU3RhdGUuQ0xPU0VEOw0KICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8IENPTU1VTklUWV9TQUxFX1NUQVJUIHx8IGFkZHJlc3MoVE9LRU4pID09IDB4MCkgew0KICAgICAgICAgICAgIHJldHVybiBTdGF0ZS5CRUZPUkVfU1RBUlQ7DQogICAgICAgIH0gZWxzZSBpZiAoYmxvY2subnVtYmVyIDwgUFJJT1JJVFlfU0FMRV9TVEFSVCkgew0KICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkNPTU1VTklUWV9TQUxFOw0KICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8IFBVQkxJQ19TQUxFX1NUQVJUKSB7DQogICAgICAgICAgICByZXR1cm4gdG90YWxfcmVjZWl2ZWRfYW1vdW50IDwgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVANCiAgICAgICAgICAgICAgICA/IFN0YXRlLlBSSU9SSVRZX1NBTEUNCiAgICAgICAgICAgICAgICA6IFN0YXRlLlBSSU9SSVRZX1NBTEVfRklOSVNIRUQ7DQogICAgICAgIH0gZWxzZSBpZiAoYmxvY2subnVtYmVyIDw9IFBVQkxJQ19TQUxFX0VORCAmJiB0b3RhbF9yZWNlaXZlZF9hbW91bnQgPCBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUpIHsNCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5QVUJMSUNfU0FMRTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmJhbGFuY2UgPT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkNMT1NFRDsNCiAgICAgICAgfSBlbHNlIGlmIChibG9jay5udW1iZXIgPD0gV0lUSERSQVdBTF9FTkQgJiYgdG90YWxfcmVjZWl2ZWRfYW1vdW50ID49IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSkgew0KICAgICAgICAgICAgcmV0dXJuIGFsbEJvbnVzZXNBcmVNaW50ZWQNCiAgICAgICAgICAgICAgICA/IFN0YXRlLldJVEhEUkFXQUxfUlVOTklORw0KICAgICAgICAgICAgICAgIDogU3RhdGUuQk9OVVNfTUlOVElORzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5SRUZVTkRfUlVOTklORzsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vDQogICAgLy8gPT09PT09PT09PT09IG1vZGlmaWVycyA9PT09PT09PT09PT0NCiAgICAvLw0KDQogICAgLy9mYWlscyBpZiBzdGF0ZSBkb3NuJ3QgbWF0Y2gNCiAgICBtb2RpZmllciBpblN0YXRlKFN0YXRlIHN0YXRlKSB7DQogICAgICAgIGlmIChzdGF0ZSAhPSBjdXJyZW50U3RhdGUoKSkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy9mYWlscyBpZiB0aGUgY3VycmVudCBzdGF0ZSBpcyBub3QgYmVmb3JlIHRoYW4gdGhlIGdpdmVuIG9uZS4NCiAgICBtb2RpZmllciBpblN0YXRlQmVmb3JlKFN0YXRlIHN0YXRlKSB7DQogICAgICAgIGlmIChjdXJyZW50U3RhdGUoKSA+PSBzdGF0ZSkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy9hY2NlcHRzIGNhbGxzIGZyb20gdG9rZW4gaG9sZGVycyBvbmx5DQogICAgbW9kaWZpZXIgdG9rZW5Ib2xkZXJzT25seSgpew0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPT0gMCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQoNCiAgICAvLyBkb25gdCBhY2NlcHQgdHJhbnNhY3Rpb25zIHdpdGggdmFsdWUgbGVzcyB0aGFuIGFsbG93ZWQgbWluaW11bQ0KICAgIG1vZGlmaWVyIG5vdFRvb1NtYWxsQW1vdW50T25seSgpew0KICAgICAgICBpZiAobXNnLnZhbHVlIDwgTUlOX0FDQ0VQVEVEX0FNT1VOVCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy8NCiAgICAvLyA9PT09PT09PT09PT0gREFUQSA9PT09PT09PT09PT0NCiAgICAvLw0KDQogICAgYWRkcmVzc1tdIFBSRVNBTEVfQUREUkVTU0VTID0gWw0KICAgICAgICAweEY1NURGZDJCMDJDZjMyODI2ODBDOTRCRDAxRTlEYTA0NDA0NEU2QTIsDQogICAgICAgIDB4MEQ0MEI1MzgyODk0OGIzNDA2NzM2NzRBZTY1RWU3ZjVEODQ4OGUzMywNCiAgICAgICAgMHgwZWE2OTBkNDY2ZDZiYmQxOEYxMjRFMjA0RUE0ODZhNEJmOTM0Y2JBLA0KICAgICAgICAweDZkMjVCOWY0MGI5MkNjRjE1ODI1MDYyNUExNTI1NzQ2MDM0NjUxOTIsDQogICAgICAgIDB4NDgxRGEwRjFlODljMjA2NzEyQkNlQTRmN0Q2RTYwZDdiNDJmNkM2QywNCiAgICAgICAgMHg0MTZFRGE1RDZFZDI5Q0FjM2U2RDk3QzEwMmQ2MUJDNTc4QzVkQjg3LA0KICAgICAgICAweEQ3OEFjNkZGYzkwRTA4NEY1ZkQ1NjM1NjNDYzlmRDMzZUUzMDNmMTgsDQogICAgICAgIDB4ZTY3MTRhYjUyM2FjRWNmOWI4NWQ4ODA0OTJBMkFjREJlNDE4NDg5MiwNCiAgICAgICAgMHgyODVBOWNBNWZFOWVlODU0NDU3MDE2YTdhNWQzQTNCQjk1NTM4MDkzLA0KICAgICAgICAweDYwMGNhNjM3MmYzMTJCMDgxMjA1QjJDM2RBNzI1MTdhNjAzYTE1Q2MsDQogICAgICAgIDB4MmI4ZDVDOTIwOWZCRDUwMEZkODE3RDk2MDgzMEFDNjcxOGI4ODExMiwNCiAgICAgICAgMHg0QjE1RGQyM0U1ZjkwNjJlNEZCM2E5QjdERUNGNjUzQzAyMTVlNTYwLA0KICAgICAgICAweEQ2NzQ0OWU2QUIyM2MxZjQ2ZGVhNzdkM2Y1RTVENDdGZjMzRGM5YTksDQogICAgICAgIDB4ZDBBRGFEN2VkODFBZkRhMDM5OTY5NTY2Q2ViODQyM0UwYWIxNGQ5MCwNCiAgICAgICAgMHgyNDVmMjc3OTZhNDRkN0UzRDMwNjU0ZUQ2Mjg1MGZmMDlFRTg1NjU2LA0KICAgICAgICAweDYzOUQ2ZUMyY2VmNGQ2ZjcxMzBiNDAxMzJCM0I2RjViNjY3ZTUxMDUsDQogICAgICAgIDB4NWU5YTY5Qjg2NTY5MTQ5NjVkNjlkOGRhNDljMzcwOUYwYkYyQjVFZiwNCiAgICAgICAgMHgwODMyYzNCODAxMzE5YjYyYUIxRDM1MzU2MTVkMWZlOWFGYzMzOTdBLA0KICAgICAgICAweGY2RGQ2MzEyNzkzNzcyMDU4MThDM2E2NzI1RWVFRkI5RDBGNmI5RjMsDQogICAgICAgIDB4NDc2OTYwNTRlNzFlNGMzZjg5OTExOTYwMWEyNTVhNzA2NUMzMDg3QiwNCiAgICAgICAgMHhmMTA3YkU2YzY4MzNmNjFBMjRjNjRENjNjOEE3ZmNENzg0QWJmZjA2LA0KICAgICAgICAweDA1NmYwNzJCZDIyNDAzMTViNzA4REJDYkRERTgwZDQwMGYwMzk0YTEsDQogICAgICAgIDB4OWU1QmFlQzI0NEQ4Y0NENDk0NzcwMzdFMjhlZDcwNTg0RWVBRDk1NiwNCiAgICAgICAgMHg0MEEwYjJjMUI0RTMwRjI3ZTIxREY5NGU3MzQ2NzE4NTZiNDg1OTY2LA0KICAgICAgICAweDg0ZjA2MjBBNTQ3YTREMTRBNzk4Nzc3MGM0RjVDMjVkNDg4ZDYzMzUsDQogICAgICAgIDB4MDM2QWMxMWMxNjFDMDlkOTRjQTM5RjdCMjRDMWJDODIwNDZjMzMyQiwNCiAgICAgICAgMHgyOTEyQTE4QzkwMmRFNmY5NTMyMUQ2ZDYzMDVEN0I4MEVlYzRDMDU1LA0KICAgICAgICAweEUxQWQzMDk3MWI4M2MxN0UyQTI0YzAzMzRDQjQ1ZjgwOEFiRUJjODcsDQogICAgICAgIDB4MDdmMzViN0ZFNzM1YzQ5RkQ1MDUxRDVhMEMyZTc0YzkxNzdmRWE2ZCwNCiAgICAgICAgMHgxMTY2OUNjZTZBRjNjZTFFZjM3Nzc3MjFmQ0MwZWVmMGVFNTdFYWJhLA0KICAgICAgICAweEJEYmFGNjQzNGQ0MEQ2MzU1QjFlODBlNDBDYzRBQjlDNjhEOTYxMTYsDQogICAgICAgIDB4MTcxMjViNTlhYzUxY0VlMDI5RTRiRDc4RDdmNTk0N0QxZUE0OUJCMiwNCiAgICAgICAgMHhBMzgyQTNBNjVjM0Y4ZWUyYjcyNkEyNTM1QjNjMzRBODlEOTA5NEQ0LA0KICAgICAgICAweEFCNzhjODc4MWZCNjRCZWQzN0IyNzRDNUVFNzU5ZUUzMzQ2NWYxZjMsDQogICAgICAgIDB4RTc0RjIwNjI2MTJFM2NBRThhOTNFMjRiMmYwRDNhMjEzMzM3Mzg4NCwNCiAgICAgICAgMHg1MDUxMjA5NTdBOTgwNjgyN0Y4RjExMUExMjM1NjFFODJDNDBiQzc4LA0KICAgICAgICAweDAwQTQ2OTIyQjFDNTRBZTZiNTgxOEM0OUI5N0UwM0VCNEJCMzUyZTEsDQogICAgICAgIDB4RTc2ZkU1MmEyNTFDOEYzYTVkY0Q2NTdFNDdBNkM4RDE2RmRmNGJGQQ0KICAgIF07DQoNCn0vLyBDcm93ZHNhbGVNaW50ZXI='