base 64 content
base64crowdsaleMinter3
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLy8gPT09PSBESVNDTEFJTUVSID09PT0NCi8vDQovLyBFVEhFUkVVTSBJUyBTVElMTCBBTiBFWFBFUkVNRU5UQUwgVEVDSE5PTE9HWS4NCi8vIEFMVEhPVUdIIFRISVMgU01BUlQgQ09OVFJBQ1QgV0FTIENSRUFURUQgV0lUSCBHUkVBVCBDQVJFIEFORCBJTiBUSEUgSE9QRSBPRiBCRUlORyBVU0VGVUwsIE5PIEdVQVJBTlRFRVMgT0YgRkxBV0xFU1MgT1BFUkFUSU9OIENBTiBCRSBHSVZFTi4NCi8vIElOIFBBUlRJQ1VMQVIgLSBTVUJUSUxFIEJVR1MsIEhBQ0tFUiBBVFRBQ0tTIE9SIE1BTEZVTkNUSU9OIE9GIFVOREVSTFlJTkcgVEVDSE5PTE9HWSBDQU4gQ0FVU0UgVU5JTlRFTlRJT05BTCBCRUhBVklPVVIuDQovLyBZT1UgQVJFIFNUUk9OR0xZIEVOQ09VUkFHRUQgVE8gU1RVRFkgVEhJUyBTTUFSVCBDT05UUkFDVCBDQVJFRlVMTFkgSU4gT1JERVIgVE8gVU5ERVJTVEFORCBQT1NTSUJMRSBFREdFIENBU0VTIEFORCBSSVNLUy4NCi8vIERPTidUIFVTRSBUSElTIFNNQVJUIENPTlRSQUNUIElGIFlPVSBIQVZFIFNVQlNUQU5USUFMIERPVUJUUyBPUiBJRiBZT1UgRE9OJ1QgS05PVyBXSEFUIFlPVSBBUkUgRE9JTkcuDQovLw0KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQ0KLy8gQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULA0KLy8gSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwNCi8vIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLA0KLy8gT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4NCi8vID09PT0NCi8vDQoNCi8vLyBAYXV0aG9yIFNhbnRpbWVudCBTYWdsDQovLy8gQHRpdGxlICBDcm93ZHNhbGVNaW50ZXINCg0KY29udHJhY3QgQmFzZSB7DQoNCiAgICBmdW5jdGlvbiBtYXgodWludCBhLCB1aW50IGIpIHJldHVybnMgKHVpbnQpIHsgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOyB9DQogICAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7IHJldHVybiBhIDw9IGIgPyBhIDogYjsgfQ0KDQogICAgbW9kaWZpZXIgb25seShhZGRyZXNzIGFsbG93ZWQpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gYWxsb3dlZCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQoNCiAgICAvLy9AcmV0dXJuIFRydWUgaWYgYF9hZGRyYCBpcyBhIGNvbnRyYWN0DQogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmIChfYWRkciA9PSAwKSByZXR1cm4gZmFsc2U7DQogICAgICAgIHVpbnQgc2l6ZTsNCiAgICAgICAgYXNzZW1ibHkgew0KICAgICAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKHNpemUgPiAwKTsNCiAgICB9DQoNCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgLy8gKiAgICAgICAgICByZWVudHJhbmN5IGhhbmRsaW5nICAgICAgICAgICAgICAgICAgKg0KICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KICAgIC8vQGRldiBwcmVkZWZpbmVkIGxvY2tzICh1cCB0byB1aW50IGJpdCBsZW5ndGgsIGkuZS4gMjU2IHBvc3NpYmxlKQ0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAwID0gMiAqKiAwOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAxID0gMiAqKiAxOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAyID0gMiAqKiAyOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAzID0gMiAqKiAzOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA0ID0gMiAqKiA0Ow0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA1ID0gMiAqKiA1Ow0KDQogICAgLy9wcmV2ZW50cyByZWVudHJhbmN5IGF0dGFjczogc3BlY2lmaWMgbG9ja3MNCiAgICB1aW50IHByaXZhdGUgYml0bG9ja3MgPSAwOw0KICAgIG1vZGlmaWVyIG5vUmVlbnRyYW5jeSh1aW50IG0pIHsNCiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOw0KICAgICAgICBpZiAoX2xvY2tzICYgbSA+IDApIHRocm93Ow0KICAgICAgICBiaXRsb2NrcyB8PSBtOw0KICAgICAgICBfOw0KICAgICAgICBiaXRsb2NrcyA9IF9sb2NrczsNCiAgICB9DQoNCiAgICBtb2RpZmllciBub0FueVJlZW50cmFuY3kgew0KICAgICAgICB2YXIgX2xvY2tzID0gYml0bG9ja3M7DQogICAgICAgIGlmIChfbG9ja3MgPiAwKSB0aHJvdzsNCiAgICAgICAgYml0bG9ja3MgPSB1aW50KC0xKTsNCiAgICAgICAgXzsNCiAgICAgICAgYml0bG9ja3MgPSBfbG9ja3M7DQogICAgfQ0KDQogICAgLy8vQGRldiBlbXB0eSBtYXJraW5nIG1vZGlmaWVyIHNpZ25hbGluZyB0byB1c2VyIG9mIHRoZSBtYXJrZWQgZnVuY3Rpb24gLCB0aGF0IGl0IGNhbiBjYXVzZSBhbiByZWVudHJhbnQgY2FsbC4NCiAgICAvLy8gICAgIGRldmVsb3BlciBzaG91bGQgbWFrZSB0aGUgY2FsbGVyIGZ1bmN0aW9uIHJlZW50cmFudC1zYWZlIGlmIGl0IHVzZSBhIHJlZW50cmFudCBmdW5jdGlvbi4NCiAgICBtb2RpZmllciByZWVudHJhbnQgeyBfOyB9DQoNCn0NCg0KY29udHJhY3QgTWludGFibGVUb2tlbiB7DQogICAgLy90YXJnZXQgdG9rZW4gY29udHJhY3QgaXMgcmVzcG9uc2libGUgdG8gYWNjZXB0IG9ubHkgYXV0aG9yaXplZCBtaW50IGNhbGxzLg0KICAgIGZ1bmN0aW9uIG1pbnQodWludCBhbW91bnQsIGFkZHJlc3MgYWNjb3VudCk7DQoNCiAgICAvL3N0YXJ0IHRoZSB0b2tlbiBvbiBtaW50aW5nIGZpbmlzaGVkLA0KICAgIGZ1bmN0aW9uIHN0YXJ0KCk7DQp9DQoNCmNvbnRyYWN0IE93bmVkIGlzIEJhc2Ugew0KDQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7DQoNCiAgICBmdW5jdGlvbiBPd25lZCgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBvbmx5KG93bmVyKSB7DQogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIG9ubHkobmV3T3duZXIpIHsNCiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsNCiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICB9DQoNCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOw0KDQp9DQoNCmNvbnRyYWN0IEJhbGFuY2VTdG9yYWdlIHsNCiAgICBmdW5jdGlvbiBiYWxhbmNlcyhhZGRyZXNzIGFjY291bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQgYmFsYW5jZSk7DQp9DQoNCmNvbnRyYWN0IEFkZHJlc3NMaXN0IHsNCiAgICBmdW5jdGlvbiBjb250YWlucyhhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsNCn0NCg0KY29udHJhY3QgTWluTWF4V2hpdGVMaXN0IHsNCiAgICBmdW5jdGlvbiBhbGxvd2VkKGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgLypmaW5uZXkqLywgdWludCAvKmZpbm5leSovICk7DQp9DQoNCmNvbnRyYWN0IFByZXNhbGVCb251c1ZvdGluZyB7DQogICAgZnVuY3Rpb24gcmF3Vm90ZXMoYWRkcmVzcyBhZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByYXdWb3RlKTsNCn0NCg0KY29udHJhY3QgQ3Jvd2RzYWxlTWludGVyIGlzIE93bmVkIHsNCg0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgVkVSU0lPTiA9ICIwLjIuMS1URVNULk1BWC4yIjsNCg0KICAgIC8qID09PT09PSBjb25maWd1cmF0aW9uIFNUQVJUID09PT09PSAqLw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IENPTU1VTklUWV9TQUxFX1NUQVJUID0gMzk3MTk1MDsgLyogYXBwcm94LiAwNC4wNy4yMDE3IDEwOjAwICovDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFJJT1JJVFlfU0FMRV9TVEFSVCAgPSAzOTcyMTUwOyAvKiBhcHByb3guIDA0LjA3LjIwMTcgMTE6MDAgKi8NCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQVUJMSUNfU0FMRV9TVEFSVCAgICA9IDM5NzIyNTA7IC8qIGFwcHJveC4gMDQuMDcuMjAxNyAxMTozMCAqLw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBVQkxJQ19TQUxFX0VORCAgICAgID0gMzk3MjM1MDsgLyogYXBwcm94LiAwNC4wNy4yMDE3IDEyOjAwICovDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgV0lUSERSQVdBTF9FTkQgICAgICAgPSAzOTcyNDUwOyAvKiBhcHByb3guIDA0LjA3LjIwMTcgMTI6MzAgKi8NCg0KICAgIGFkZHJlc3MgcHVibGljIFRFQU1fR1JPVVBfV0FMTEVUICAgICAgICAgICA9IDB4MjE1YUNCMzc4NDUwMjdjQTY0YTRmMjlCMkZDYjdBZmZBOEU5ZDMyNjsNCiAgICBhZGRyZXNzIHB1YmxpYyBBRFZJU0VSU19BTkRfRlJJRU5EU19XQUxMRVQgPSAweDQxYWI4MzYwZEVGMWUxOUZkRmEzMjA5MkQ4M2E3YTc5OTZDMzEyYTQ7DQoNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBURUFNX0JPTlVTX1BFUl9DRU5UICAgICAgICAgICAgPSAxODsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBBRFZJU09SU19BTkRfUEFSVE5FUlNfUEVSX0NFTlQgPSAxMDsNCg0KICAgIE1pbnRhYmxlVG9rZW4gICAgICBwdWJsaWMgVE9LRU4gICAgICAgICAgICAgICAgICAgID0gTWludGFibGVUb2tlbigweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsNCg0KICAgIEFkZHJlc3NMaXN0ICAgICAgICBwdWJsaWMgUFJJT1JJVFlfQUREUkVTU19MSVNUICAgID0gQWRkcmVzc0xpc3QoMHg0NjM2MzVlRmQyMjU1OGM2NEVmYTYyMjdBNDU2NDllZURjMGU0ODg4KTsNCiAgICBNaW5NYXhXaGl0ZUxpc3QgICAgcHVibGljIENPTU1VTklUWV9BTExPV0FOQ0VfTElTVCA9IE1pbk1heFdoaXRlTGlzdCgweDI2YzYzZDYzMUEzMDc4OTdkNzZBZjVmMDJBMDhBMDliMzM5NURDYjkpOw0KICAgIEJhbGFuY2VTdG9yYWdlICAgICBwdWJsaWMgUFJFU0FMRV9CQUxBTkNFUyAgICAgICAgID0gQmFsYW5jZVN0b3JhZ2UoMHg0RmQ5OTdFZDdjMTBEYkQwNGU5NWQzNzMwY2Q3N0Q3OTUxMzA3NkYyKTsNCiAgICBQcmVzYWxlQm9udXNWb3RpbmcgcHVibGljIFBSRVNBTEVfQk9OVVNfVk9USU5HICAgICA9IFByZXNhbGVCb251c1ZvdGluZygweDI4M2E5N0FmODY3MTY1MTY5QUVDZTBiMkU5NjNiOWYwRkM3RTViOGMpOw0KDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVBfRVRIID0gNDsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkVfRVRIID0gMzsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkVfRVRIID0gNTsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fQUNDRVBURURfQU1PVU5UX0ZJTk5FWSA9IDIwMDsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTl9QRVJfRVRIID0gMTAwMDsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUkVfU0FMRV9CT05VU19QRVJfQ0VOVCA9IDU0Ow0KDQogICAgLy9jb25zdHJ1Y3Rvcg0KICAgIGZ1bmN0aW9uIENyb3dkc2FsZU1pbnRlcigpIHsNCiAgICAgICAgLy9jaGVjayBjb25maWd1cmF0aW9uIGlmIHNvbWV0aGluZyBpbiBzZXR1cCBpcyBsb29raW5nIHdlaXJkDQogICAgICAgIGlmICgNCiAgICAgICAgICAgIFRPS0VOX1BFUl9FVEggPT0gMA0KICAgICAgICAgICAgfHwgVEVBTV9CT05VU19QRVJfQ0VOVCArIEFEVklTT1JTX0FORF9QQVJUTkVSU19QRVJfQ0VOVCA+PTEwMA0KICAgICAgICAgICAgfHwgTUlOX0FDQ0VQVEVEX0FNT1VOVF9GSU5ORVkgPCAxDQogICAgICAgICAgICB8fCBvd25lciA9PSAweDANCiAgICAgICAgICAgIHx8IGFkZHJlc3MoQ09NTVVOSVRZX0FMTE9XQU5DRV9MSVNUKSA9PSAweDANCiAgICAgICAgICAgIHx8IGFkZHJlc3MoUFJJT1JJVFlfQUREUkVTU19MSVNUKSA9PSAweDANCiAgICAgICAgICAgIHx8IGFkZHJlc3MoUFJFU0FMRV9CT05VU19WT1RJTkcpID09IDB4MA0KICAgICAgICAgICAgfHwgYWRkcmVzcyhQUkVTQUxFX0JBTEFOQ0VTKSA9PSAweDANCiAgICAgICAgICAgIHx8IENPTU1VTklUWV9TQUxFX1NUQVJUID09IDANCiAgICAgICAgICAgIHx8IFBSSU9SSVRZX1NBTEVfU1RBUlQgPT0gMA0KICAgICAgICAgICAgfHwgUFVCTElDX1NBTEVfU1RBUlQgPT0gMA0KICAgICAgICAgICAgfHwgUFVCTElDX1NBTEVfRU5EID09IDANCiAgICAgICAgICAgIHx8IFdJVEhEUkFXQUxfRU5EID09IDANCiAgICAgICAgICAgIHx8IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSA9PSAwDQogICAgICAgICAgICB8fCBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUgPT0gMA0KICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVAgPT0gMA0KICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1NBTEVfU1RBUlQgPD0gYmxvY2subnVtYmVyDQogICAgICAgICAgICB8fCBDT01NVU5JVFlfU0FMRV9TVEFSVCA+PSBQUklPUklUWV9TQUxFX1NUQVJUDQogICAgICAgICAgICB8fCBQUklPUklUWV9TQUxFX1NUQVJUID49IFBVQkxJQ19TQUxFX1NUQVJUDQogICAgICAgICAgICB8fCBQVUJMSUNfU0FMRV9TVEFSVCA+PSBQVUJMSUNfU0FMRV9FTkQNCiAgICAgICAgICAgIHx8IFBVQkxJQ19TQUxFX0VORCA+PSBXSVRIRFJBV0FMX0VORA0KICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVAgPiBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUNCiAgICAgICAgICAgIHx8IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSA+IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSApDQogICAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIC8qID09PT09PSBjb25maWd1cmF0aW9uIEVORCA9PT09PT0gKi8NCg0KICAgIC8qID09PT09PSBwdWJsaWMgc3RhdGVzIFNUQVJUPT09PT09ICovDQoNCiAgICBib29sIHB1YmxpYyBpc0Fib3J0ZWQgPSBmYWxzZTsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBiYWxhbmNlczsNCiAgICBib29sIHB1YmxpYyBUT0tFTl9TVEFSVEVEID0gZmFsc2U7DQogICAgdWludCBwdWJsaWMgdG90YWxfcmVjZWl2ZWRfYW1vdW50Ow0KICAgIGFkZHJlc3NbXSBwdWJsaWMgaW52ZXN0b3JzOw0KDQogICAgLy9kaXNwbGF5cyBudW1iZXIgb2YgdW5pcSBpbnZlc3RvcnMNCiAgICBmdW5jdGlvbiBpbnZlc3RvcnNDb3VudCgpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnModWludCkgeyByZXR1cm4gaW52ZXN0b3JzLmxlbmd0aDsgfQ0KDQogICAgLy9kaXNwbGF5cyByZWNlaXZlZCBhbW91bnQgaW4gZXRoIHVwdG8gbm93DQogICAgZnVuY3Rpb24gVE9UQUxfUkVDRUlWRURfRVRIKCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludCkgeyByZXR1cm4gdG90YWxfcmVjZWl2ZWRfYW1vdW50IC8gMSBldGhlcjsgfQ0KDQogICAgLy9kaXNwbGF5cyBjdXJyZW50IGNvbnRyYWN0IHN0YXRlIGluIGh1bWFuIHJlYWRhYmxlIGZvcm0NCiAgICBmdW5jdGlvbiBzdGF0ZSgpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHN0cmluZykgeyByZXR1cm4gc3RhdGVOYW1lc1sgdWludChjdXJyZW50U3RhdGUoKSkgXTsgfQ0KDQogICAgZnVuY3Rpb24gc2FuX3doaXRlbGlzdChhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQsIHVpbnQpIHsgcmV0dXJuIENPTU1VTklUWV9BTExPV0FOQ0VfTElTVC5hbGxvd2VkKGFkZHIpOyB9DQogICAgZnVuY3Rpb24gY2ZpX3doaXRlbGlzdChhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsgcmV0dXJuIFBSSU9SSVRZX0FERFJFU1NfTElTVC5jb250YWlucyhhZGRyKTsgfQ0KDQogICAgLyogPT09PT09IHB1YmxpYyBzdGF0ZXMgRU5EID09PT09PSAqLw0KDQogICAgc3RyaW5nW10gcHJpdmF0ZSBzdGF0ZU5hbWVzID0gWyJCRUZPUkVfU1RBUlQiLCAiQ09NTVVOSVRZX1NBTEUiLCAiUFJJT1JJVFlfU0FMRSIsICJQUklPUklUWV9TQUxFX0ZJTklTSEVEIiwgIlBVQkxJQ19TQUxFIiwgIkJPTlVTX01JTlRJTkciLCAiV0lUSERSQVdBTF9SVU5OSU5HIiwgIlJFRlVORF9SVU5OSU5HIiwgIkNMT1NFRCIgXTsNCiAgICBlbnVtIFN0YXRlIHsgQkVGT1JFX1NUQVJULCBDT01NVU5JVFlfU0FMRSwgUFJJT1JJVFlfU0FMRSwgUFJJT1JJVFlfU0FMRV9GSU5JU0hFRCwgUFVCTElDX1NBTEUsIEJPTlVTX01JTlRJTkcsIFdJVEhEUkFXQUxfUlVOTklORywgUkVGVU5EX1JVTk5JTkcsIENMT1NFRCB9DQoNCiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVAgPSBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUF9FVEggKiAxIGV0aGVyOw0KICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBNSU5fVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUgPSBNSU5fVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkVfRVRIICogMSBldGhlcjsNCiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFID0gTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFX0VUSCAqIDEgZXRoZXI7DQogICAgdWludCBwcml2YXRlIGNvbnN0YW50IE1JTl9BQ0NFUFRFRF9BTU9VTlQgPSBNSU5fQUNDRVBURURfQU1PVU5UX0ZJTk5FWSAqIDEgZmlubmV5Ow0KICAgIGJvb2wgcHJpdmF0ZSBhbGxCb251c2VzQXJlTWludGVkID0gZmFsc2U7DQoNCiAgICAvLw0KICAgIC8vID09PT09PT0gaW50ZXJmYWNlIG1ldGhvZHMgPT09PT09PQ0KICAgIC8vDQoNCiAgICAvL2FjY2VwdCBwYXltZW50cyBoZXJlDQogICAgZnVuY3Rpb24gKCkNCiAgICBwYXlhYmxlDQogICAgbm9BbnlSZWVudHJhbmN5DQogICAgew0KICAgICAgICBTdGF0ZSBzdGF0ZSA9IGN1cnJlbnRTdGF0ZSgpOw0KICAgICAgICB1aW50IGFtb3VudF9hbGxvd2VkOw0KICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuQ09NTVVOSVRZX1NBTEUpIHsNCiAgICAgICAgICAgIHZhciAobWluX2Zpbm5leSwgbWF4X2Zpbm5leSkgPSBDT01NVU5JVFlfQUxMT1dBTkNFX0xJU1QuYWxsb3dlZChtc2cuc2VuZGVyKTsNCiAgICAgICAgICAgIHZhciAobWluLCBtYXgpID0gKG1pbl9maW5uZXkgKiAxIGZpbm5leSwgbWF4X2Zpbm5leSAqIDEgZmlubmV5KTsNCiAgICAgICAgICAgIHZhciBzZW5kZXJfYmFsYW5jZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOw0KICAgICAgICAgICAgYXNzZXJ0IChzZW5kZXJfYmFsYW5jZSA8PSBtYXgpOyAvL3Nhbml0eSBjaGVjazogc2hvdWxkIGJlIGFsd2F5cyB0cnVlOw0KICAgICAgICAgICAgYXNzZXJ0IChtc2cudmFsdWUgPj0gbWluKTsgICAgICAvL3JlamVjdCBwYXltZW50cyBsZXNzIHRoYW4gbWluaW11bQ0KICAgICAgICAgICAgYW1vdW50X2FsbG93ZWQgPSBtYXggLSBzZW5kZXJfYmFsYW5jZTsNCiAgICAgICAgICAgIF9yZWNlaXZlRnVuZHNVcFRvKGFtb3VudF9hbGxvd2VkKTsNCiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBTdGF0ZS5QUklPUklUWV9TQUxFKSB7DQogICAgICAgICAgICBhc3NlcnQgKFBSSU9SSVRZX0FERFJFU1NfTElTVC5jb250YWlucyhtc2cuc2VuZGVyKSk7DQogICAgICAgICAgICBhbW91bnRfYWxsb3dlZCA9IENPTU1VTklUWV9QTFVTX1BSSU9SSVRZX1NBTEVfQ0FQIC0gdG90YWxfcmVjZWl2ZWRfYW1vdW50Ow0KICAgICAgICAgICAgX3JlY2VpdmVGdW5kc1VwVG8oYW1vdW50X2FsbG93ZWQpOw0KICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IFN0YXRlLlBVQkxJQ19TQUxFKSB7DQogICAgICAgICAgICBhbW91bnRfYWxsb3dlZCA9IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSAtIHRvdGFsX3JlY2VpdmVkX2Ftb3VudDsNCiAgICAgICAgICAgIF9yZWNlaXZlRnVuZHNVcFRvKGFtb3VudF9hbGxvd2VkKTsNCiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBTdGF0ZS5SRUZVTkRfUlVOTklORykgew0KICAgICAgICAgICAgLy8gYW55IGVudHJpbmcgY2FsbCBpbiBSZWZ1bmQgUGhhc2Ugd2lsbCBjYXVzZSBmdWxsIHJlZnVuZA0KICAgICAgICAgICAgX3NlbmRSZWZ1bmQoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQogICAgfQ0KDQoNCiAgICBmdW5jdGlvbiByZWZ1bmQoKSBleHRlcm5hbA0KICAgIGluU3RhdGUoU3RhdGUuUkVGVU5EX1JVTk5JTkcpDQogICAgbm9BbnlSZWVudHJhbmN5DQogICAgew0KICAgICAgICBfc2VuZFJlZnVuZCgpOw0KICAgIH0NCg0KDQogICAgZnVuY3Rpb24gd2l0aGRyYXdGdW5kc0FuZFN0YXJ0VG9rZW4oKSBleHRlcm5hbA0KICAgIGluU3RhdGUoU3RhdGUuV0lUSERSQVdBTF9SVU5OSU5HKQ0KICAgIG5vQW55UmVlbnRyYW5jeQ0KICAgIG9ubHkob3duZXIpDQogICAgew0KICAgICAgICAvLyB0cmFuc2ZlciBmdW5kcyB0byBvd25lcg0KICAgICAgICBpZiAoIW93bmVyLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7DQoNCiAgICAgICAgLy9ub3RpZnkgdG9rZW4gY29udHJhY3QgdG8gc3RhcnQNCiAgICAgICAgaWYgKFRPS0VOLmNhbGwoYnl0ZXM0KHNoYTMoInN0YXJ0KCkiKSkpKSB7DQogICAgICAgICAgICBUT0tFTl9TVEFSVEVEID0gdHJ1ZTsNCiAgICAgICAgICAgIFRva2VuU3RhcnRlZChUT0tFTik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBldmVudCBUb2tlblN0YXJ0ZWQoYWRkcmVzcyB0b2tlbkFkZHIpOw0KDQogICAgLy90aGVyZSBhcmUgYXJvdW5kIDQwIGFkZHJlc3NlcyBpbiBQUkVTQUxFX0FERFJFU1NFUyBsaXN0LiBFdmVyeXRoaW5nIGZpdHMgaW50byBzaW5nbGUgVHguDQogICAgZnVuY3Rpb24gbWludEFsbEJvbnVzZXMoKSBleHRlcm5hbA0KICAgIGluU3RhdGUoU3RhdGUuQk9OVVNfTUlOVElORykNCiAgICBub0FueVJlZW50cmFuY3kNCiAgICB7DQogICAgICAgIGFzc2VydCghYWxsQm9udXNlc0FyZU1pbnRlZCk7DQogICAgICAgIGFsbEJvbnVzZXNBcmVNaW50ZWQgPSB0cnVlOw0KDQogICAgICAgIHVpbnQgVEVBTV9BTkRfUEFSVE5FUlNfUEVSX0NFTlQgPSBURUFNX0JPTlVTX1BFUl9DRU5UICsgQURWSVNPUlNfQU5EX1BBUlRORVJTX1BFUl9DRU5UOw0KDQogICAgICAgIHVpbnQgdG90YWxfcHJlc2FsZV9hbW91bnRfd2l0aF9ib251cyA9IG1pbnRQcmVzYWxlQm9udXNlcygpOw0KICAgICAgICB1aW50IHRvdGFsX2NvbGxlY3RlZF9hbW91bnQgPSB0b3RhbF9yZWNlaXZlZF9hbW91bnQgKyB0b3RhbF9wcmVzYWxlX2Ftb3VudF93aXRoX2JvbnVzOw0KICAgICAgICB1aW50IGV4dHJhX2Ftb3VudCA9IHRvdGFsX2NvbGxlY3RlZF9hbW91bnQgKiBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVCAvICgxMDAgLSBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVCk7DQogICAgICAgIHVpbnQgZXh0cmFfdGVhbV9hbW91bnQgPSBleHRyYV9hbW91bnQgKiBURUFNX0JPTlVTX1BFUl9DRU5UIC8gVEVBTV9BTkRfUEFSVE5FUlNfUEVSX0NFTlQ7DQogICAgICAgIHVpbnQgZXh0cmFfcGFydG5lcnNfYW1vdW50ID0gZXh0cmFfYW1vdW50ICogQURWSVNPUlNfQU5EX1BBUlRORVJTX1BFUl9DRU5UIC8gVEVBTV9BTkRfUEFSVE5FUlNfUEVSX0NFTlQ7DQovKiANCiAgICAgICAgLy9iZWF1dGlmeSB0b3RhbCBzdXBwbHk6IHJvdW5kIGRvd24gdG8gZnVsbCBldGguDQogICAgICAgIHVpbnQgdG90YWxfdG9fbWludCA9IHRvdGFsX2NvbGxlY3RlZF9hbW91bnQgKyBleHRyYV9hbW91bnQ7DQogICAgICAgIHVpbnQgcm91bmRfcmVtYWluZGVyID0gdG90YWxfdG9fbWludCAtICh0b3RhbF90b19taW50IC8gMSBldGhlciAqIDEgZXRoZXIpOw0KICAgICAgICBleHRyYV90ZWFtX2Ftb3VudCAtPSByb3VuZF9yZW1haW5kZXI7IC8vdGhpcyB3aWxsIHJlZHVjZSB0b3RhbF9zdXBwbHkgdG8gcm91bmRlZCB2YWx1ZQ0KKi8NCiAgICAgICAgLy9taW50IGdyb3VwIGJvbnVzZXMNCiAgICAgICAgX21pbnQoZXh0cmFfdGVhbV9hbW91bnQgLCBURUFNX0dST1VQX1dBTExFVCk7DQogICAgICAgIF9taW50KGV4dHJhX3BhcnRuZXJzX2Ftb3VudCwgQURWSVNFUlNfQU5EX0ZSSUVORFNfV0FMTEVUKTsNCg0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG1pbnRQcmVzYWxlQm9udXNlcygpIGludGVybmFsIHJldHVybnModWludCBhbW91bnQpIHsNCiAgICAgICAgdWludCB0b3RhbF9wcmVzYWxlX2Ftb3VudF93aXRoX2JvbnVzID0gMDsNCiAgICAgICAgLy9taW50IHByZXNhbGUgYm9udXNlcw0KICAgICAgICBmb3IodWludCBpPTA7IGkgPCBQUkVTQUxFX0FERFJFU1NFUy5sZW5ndGg7ICsraSkgew0KICAgICAgICAgICAgYWRkcmVzcyBhZGRyID0gUFJFU0FMRV9BRERSRVNTRVNbaV07DQogICAgICAgICAgICB2YXIgYW1vdW50X3dpdGhfYm9udXMgPSBwcmVzYWxlVG9rZW5BbW91bnQoYWRkcik7DQogICAgICAgICAgICBpZiAoYW1vdW50X3dpdGhfYm9udXM+MCkgew0KICAgICAgICAgICAgICAgIF9taW50KGFtb3VudF93aXRoX2JvbnVzLCBhZGRyKTsNCiAgICAgICAgICAgICAgICB0b3RhbF9wcmVzYWxlX2Ftb3VudF93aXRoX2JvbnVzICs9IGFtb3VudF93aXRoX2JvbnVzOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ly9mb3INCiAgICAgICAgcmV0dXJuIHRvdGFsX3ByZXNhbGVfYW1vdW50X3dpdGhfYm9udXM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcHJlc2FsZVRva2VuQW1vdW50KGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCl7DQogICAgICAgIHVpbnQgcHJlc2FsZV9iYWxhbmNlID0gUFJFU0FMRV9CQUxBTkNFUy5iYWxhbmNlcyhhZGRyKTsNCiAgICAgICAgaWYgKHByZXNhbGVfYmFsYW5jZSA+IDApIHsNCiAgICAgICAgICAgIC8vIHRoaXMgY2FsY3VsYXRpb24gaXMgYWJvdXQgd2FpdmVkIHByZS1zYWxlIGJvbnVzLg0KICAgICAgICAgICAgLy8gcmF3Vm90ZSBjb250YWlucyBhIHZhbHVlIFswLi4xIGV0aGVyXS4NCiAgICAgICAgICAgIC8vICAgICAwIGV0aGVyICAgIC0gbWVhbnMgImRlZmF1bHQgdmFsdWUiIG9yICJubyB2b3RlIiA6IDEwMCUgYm9udXMgc2F2ZWQNCiAgICAgICAgICAgIC8vICAgICAxIGV0aGVyICAgIC0gbWVhbnMgInZvdGUgMTAwJSIgOiAxMDAlIGJvbnVzIHNhdmVkDQogICAgICAgICAgICAvLyAgICA8PTEwIGZpbm5leSAtIHNwZWNpYWwgdmFsdWUgInZvdGUgMCUiIDogbm8gYm9udXMgYXQgYWxsICgxMDAlIGJvbnVzIHdhaXZlZCkuDQogICAgICAgICAgICAvLyAgb3RoZXIgdmFsdWUgLSAiUFJFX1NBTEVfQk9OVVNfUEVSX0NFTlQgKiByYXdWb3RlIC8gMSBldGhlciIgaXMgYW4gZWZmZWN0aXZlIGJvbnVzIHBlciBjZW50IGZvciBwYXJ0aWN1bGFyIHByZXNhbGUgbWVtYmVyLg0KICAgICAgICAgICAgLy8NCiAgICAgICAgICAgIHZhciByYXdWb3RlID0gUFJFU0FMRV9CT05VU19WT1RJTkcucmF3Vm90ZXMoYWRkcik7DQogICAgICAgICAgICBpZiAocmF3Vm90ZSA9PSAwKSAgICAgICAgICAgICAgcmF3Vm90ZSA9IDEgZXRoZXI7IC8vc3BlY2lhbCBjYXNlICJubyB2b3RlIiAoZGVmYXVsdCB2YWx1ZSkgPT0+ICgxIGV0aGVyIGlzIDEwMCUpDQogICAgICAgICAgICBlbHNlIGlmIChyYXdWb3RlIDw9IDEwIGZpbm5leSkgcmF3Vm90ZSA9IDA7ICAgICAgIC8vc3BlY2lhbCBjYXNlICIwJSIgKG5vIGJvbnVzKSAgICAgICAgICAgPT0+ICgwIGV0aGVyIGlzICAgMCUpDQogICAgICAgICAgICBlbHNlIGlmIChyYXdWb3RlID4gMSBldGhlcikgICAgcmF3Vm90ZSA9IDEgZXRoZXI7IC8vbWF4IGJvbnVzIGlzIDEwMCUgKHNob3VsZCBub3Qgb2NjdXIpDQogICAgICAgICAgICB2YXIgcHJlc2FsZV9ib251cyA9IHByZXNhbGVfYmFsYW5jZSAqIFBSRV9TQUxFX0JPTlVTX1BFUl9DRU5UICogcmF3Vm90ZSAvIDEgZXRoZXIgLyAxMDA7DQogICAgICAgICAgICByZXR1cm4gcHJlc2FsZV9iYWxhbmNlICsgcHJlc2FsZV9ib251czsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXR0YWNoVG9Ub2tlbihNaW50YWJsZVRva2VuIHRva2VuQWRkcikgZXh0ZXJuYWwNCiAgICBpblN0YXRlKFN0YXRlLkJFRk9SRV9TVEFSVCkNCiAgICBvbmx5KG93bmVyKQ0KICAgIHsNCiAgICAgICAgVE9LRU4gPSB0b2tlbkFkZHI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWJvcnQoKSBleHRlcm5hbA0KICAgIGluU3RhdGVCZWZvcmUoU3RhdGUuUkVGVU5EX1JVTk5JTkcpDQogICAgb25seShvd25lcikNCiAgICB7DQogICAgICAgIGlzQWJvcnRlZCA9IHRydWU7DQogICAgfQ0KDQogICAgLy8NCiAgICAvLyA9PT09PT09IGltcGxlbWVudGF0aW9uIG1ldGhvZHMgPT09PT09PQ0KICAgIC8vDQoNCiAgICBmdW5jdGlvbiBfc2VuZFJlZnVuZCgpIHByaXZhdGUNCiAgICB0b2tlbkhvbGRlcnNPbmx5DQogICAgew0KICAgICAgICAvLyBsb2FkIGJhbGFuY2UgdG8gcmVmdW5kIHBsdXMgYW1vdW50IGN1cnJlbnRseSBzZW50DQogICAgICAgIHZhciBhbW91bnRfdG9fcmVmdW5kID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0gKyBtc2cudmFsdWU7DQogICAgICAgIC8vIHJlc2V0IGJhbGFuY2UNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOw0KICAgICAgICAvLyBzZW5kIHJlZnVuZCBiYWNrIHRvIHNlbmRlcg0KICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChhbW91bnRfdG9fcmVmdW5kKSkgdGhyb3c7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gX3JlY2VpdmVGdW5kc1VwVG8odWludCBhbW91bnQpIHByaXZhdGUNCiAgICBub3RUb29TbWFsbEFtb3VudE9ubHkNCiAgICB7DQogICAgICAgIHJlcXVpcmUgKGFtb3VudCA+IDApOw0KICAgICAgICBpZiAobXNnLnZhbHVlID4gYW1vdW50KSB7DQogICAgICAgICAgICAvLyBhY2NlcHQgYW1vdW50IG9ubHkgYW5kIHJldHVybiBjaGFuZ2UNCiAgICAgICAgICAgIHZhciBjaGFuZ2VfdG9fcmV0dXJuID0gbXNnLnZhbHVlIC0gYW1vdW50Ow0KICAgICAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoY2hhbmdlX3RvX3JldHVybikpIHRocm93Ow0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gYWNjZXB0IGZ1bGwgYW1vdW50DQogICAgICAgICAgICBhbW91bnQgPSBtc2cudmFsdWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID09IDApIGludmVzdG9ycy5wdXNoKG1zZy5zZW5kZXIpOw0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBhbW91bnQ7DQogICAgICAgIHRvdGFsX3JlY2VpdmVkX2Ftb3VudCArPSBhbW91bnQ7DQogICAgICAgIF9taW50KGFtb3VudCxtc2cuc2VuZGVyKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfbWludCh1aW50IGFtb3VudCwgYWRkcmVzcyBhY2NvdW50KSBwcml2YXRlIHsNCiAgICAgICAgTWludGFibGVUb2tlbihUT0tFTikubWludChhbW91bnQgKiBUT0tFTl9QRVJfRVRILCBhY2NvdW50KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjdXJyZW50U3RhdGUoKSBwcml2YXRlIGNvbnN0YW50DQogICAgcmV0dXJucyAoU3RhdGUpDQogICAgew0KICAgICAgICBpZiAoaXNBYm9ydGVkKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlID4gMA0KICAgICAgICAgICAgICAgICAgID8gU3RhdGUuUkVGVU5EX1JVTk5JTkcNCiAgICAgICAgICAgICAgICAgICA6IFN0YXRlLkNMT1NFRDsNCiAgICAgICAgfSBlbHNlIGlmIChibG9jay5udW1iZXIgPCBDT01NVU5JVFlfU0FMRV9TVEFSVCB8fCBhZGRyZXNzKFRPS0VOKSA9PSAweDApIHsNCiAgICAgICAgICAgICByZXR1cm4gU3RhdGUuQkVGT1JFX1NUQVJUOw0KICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8IFBSSU9SSVRZX1NBTEVfU1RBUlQpIHsNCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5DT01NVU5JVFlfU0FMRTsNCiAgICAgICAgfSBlbHNlIGlmIChibG9jay5udW1iZXIgPCBQVUJMSUNfU0FMRV9TVEFSVCkgew0KICAgICAgICAgICAgcmV0dXJuIHRvdGFsX3JlY2VpdmVkX2Ftb3VudCA8IENPTU1VTklUWV9QTFVTX1BSSU9SSVRZX1NBTEVfQ0FQDQogICAgICAgICAgICAgICAgPyBTdGF0ZS5QUklPUklUWV9TQUxFDQogICAgICAgICAgICAgICAgOiBTdGF0ZS5QUklPUklUWV9TQUxFX0ZJTklTSEVEOw0KICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8PSBQVUJMSUNfU0FMRV9FTkQgJiYgdG90YWxfcmVjZWl2ZWRfYW1vdW50IDwgTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFKSB7DQogICAgICAgICAgICByZXR1cm4gU3RhdGUuUFVCTElDX1NBTEU7DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5iYWxhbmNlID09IDApIHsNCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5DTE9TRUQ7DQogICAgICAgIH0gZWxzZSBpZiAoYmxvY2subnVtYmVyIDw9IFdJVEhEUkFXQUxfRU5EICYmIHRvdGFsX3JlY2VpdmVkX2Ftb3VudCA+PSBNSU5fVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUpIHsNCiAgICAgICAgICAgIHJldHVybiBhbGxCb251c2VzQXJlTWludGVkDQogICAgICAgICAgICAgICAgPyBTdGF0ZS5XSVRIRFJBV0FMX1JVTk5JTkcNCiAgICAgICAgICAgICAgICA6IFN0YXRlLkJPTlVTX01JTlRJTkc7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gU3RhdGUuUkVGVU5EX1JVTk5JTkc7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLw0KICAgIC8vID09PT09PT09PT09PSBtb2RpZmllcnMgPT09PT09PT09PT09DQogICAgLy8NCg0KICAgIC8vZmFpbHMgaWYgc3RhdGUgZG9zbid0IG1hdGNoDQogICAgbW9kaWZpZXIgaW5TdGF0ZShTdGF0ZSBzdGF0ZSkgew0KICAgICAgICBpZiAoc3RhdGUgIT0gY3VycmVudFN0YXRlKCkpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vZmFpbHMgaWYgdGhlIGN1cnJlbnQgc3RhdGUgaXMgbm90IGJlZm9yZSB0aGFuIHRoZSBnaXZlbiBvbmUuDQogICAgbW9kaWZpZXIgaW5TdGF0ZUJlZm9yZShTdGF0ZSBzdGF0ZSkgew0KICAgICAgICBpZiAoY3VycmVudFN0YXRlKCkgPj0gc3RhdGUpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vYWNjZXB0cyBjYWxscyBmcm9tIHRva2VuIGhvbGRlcnMgb25seQ0KICAgIG1vZGlmaWVyIHRva2VuSG9sZGVyc09ubHkoKXsNCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID09IDApIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KDQogICAgLy8gZG9uYHQgYWNjZXB0IHRyYW5zYWN0aW9ucyB3aXRoIHZhbHVlIGxlc3MgdGhhbiBhbGxvd2VkIG1pbmltdW0NCiAgICBtb2RpZmllciBub3RUb29TbWFsbEFtb3VudE9ubHkoKXsNCiAgICAgICAgaWYgKG1zZy52YWx1ZSA8IE1JTl9BQ0NFUFRFRF9BTU9VTlQpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vDQogICAgLy8gPT09PT09PT09PT09IERBVEEgPT09PT09PT09PT09DQogICAgLy8NCg0KICAgIGFkZHJlc3NbXSBQUkVTQUxFX0FERFJFU1NFUyA9IFsNCiAgICAgICAgMHhGNTVERmQyQjAyQ2YzMjgyNjgwQzk0QkQwMUU5RGEwNDQwNDRFNkEyLA0KICAgICAgICAweDBENDBCNTM4Mjg5NDhiMzQwNjczNjc0QWU2NUVlN2Y1RDg0ODhlMzMsDQogICAgICAgIDB4MGVhNjkwZDQ2NmQ2YmJkMThGMTI0RTIwNEVBNDg2YTRCZjkzNGNiQSwNCiAgICAgICAgMHg2ZDI1QjlmNDBiOTJDY0YxNTgyNTA2MjVBMTUyNTc0NjAzNDY1MTkyLA0KICAgICAgICAweDQ4MURhMEYxZTg5YzIwNjcxMkJDZUE0ZjdENkU2MGQ3YjQyZjZDNkMsDQogICAgICAgIDB4NDE2RURhNUQ2RWQyOUNBYzNlNkQ5N0MxMDJkNjFCQzU3OEM1ZEI4NywNCiAgICAgICAgMHhENzhBYzZGRmM5MEUwODRGNWZENTYzNTYzQ2M5ZkQzM2VFMzAzZjE4LA0KICAgICAgICAweGU2NzE0YWI1MjNhY0VjZjliODVkODgwNDkyQTJBY0RCZTQxODQ4OTIsDQogICAgICAgIDB4Mjg1QTljQTVmRTllZTg1NDQ1NzAxNmE3YTVkM0EzQkI5NTUzODA5MywNCiAgICAgICAgMHg2MDBjYTYzNzJmMzEyQjA4MTIwNUIyQzNkQTcyNTE3YTYwM2ExNUNjLA0KICAgICAgICAweDJiOGQ1QzkyMDlmQkQ1MDBGZDgxN0Q5NjA4MzBBQzY3MThiODgxMTIsDQogICAgICAgIDB4NEIxNURkMjNFNWY5MDYyZTRGQjNhOUI3REVDRjY1M0MwMjE1ZTU2MCwNCiAgICAgICAgMHhENjc0NDllNkFCMjNjMWY0NmRlYTc3ZDNmNUU1RDQ3RmYzM0RjOWE5LA0KICAgICAgICAweGQwQURhRDdlZDgxQWZEYTAzOTk2OTU2NkNlYjg0MjNFMGFiMTRkOTAsDQogICAgICAgIDB4MjQ1ZjI3Nzk2YTQ0ZDdFM0QzMDY1NGVENjI4NTBmZjA5RUU4NTY1NiwNCiAgICAgICAgMHg2MzlENmVDMmNlZjRkNmY3MTMwYjQwMTMyQjNCNkY1YjY2N2U1MTA1LA0KICAgICAgICAweDVlOWE2OUI4NjU2OTE0OTY1ZDY5ZDhkYTQ5YzM3MDlGMGJGMkI1RWYsDQogICAgICAgIDB4MDgzMmMzQjgwMTMxOWI2MmFCMUQzNTM1NjE1ZDFmZTlhRmMzMzk3QSwNCiAgICAgICAgMHhmNkRkNjMxMjc5Mzc3MjA1ODE4QzNhNjcyNUVlRUZCOUQwRjZiOUYzLA0KICAgICAgICAweDQ3Njk2MDU0ZTcxZTRjM2Y4OTkxMTk2MDFhMjU1YTcwNjVDMzA4N0IsDQogICAgICAgIDB4ZjEwN2JFNmM2ODMzZjYxQTI0YzY0RDYzYzhBN2ZjRDc4NEFiZmYwNiwNCiAgICAgICAgMHgwNTZmMDcyQmQyMjQwMzE1YjcwOERCQ2JEREU4MGQ0MDBmMDM5NGExLA0KICAgICAgICAweDllNUJhZUMyNDREOGNDRDQ5NDc3MDM3RTI4ZWQ3MDU4NEVlQUQ5NTYsDQogICAgICAgIDB4NDBBMGIyYzFCNEUzMEYyN2UyMURGOTRlNzM0NjcxODU2YjQ4NTk2NiwNCiAgICAgICAgMHg4NGYwNjIwQTU0N2E0RDE0QTc5ODc3NzBjNEY1QzI1ZDQ4OGQ2MzM1LA0KICAgICAgICAweDAzNkFjMTFjMTYxQzA5ZDk0Y0EzOUY3QjI0QzFiQzgyMDQ2YzMzMkIsDQogICAgICAgIDB4MjkxMkExOEM5MDJkRTZmOTUzMjFENmQ2MzA1RDdCODBFZWM0QzA1NSwNCiAgICAgICAgMHhFMUFkMzA5NzFiODNjMTdFMkEyNGMwMzM0Q0I0NWY4MDhBYkVCYzg3LA0KICAgICAgICAweDA3ZjM1YjdGRTczNWM0OUZENTA1MUQ1YTBDMmU3NGM5MTc3ZkVhNmQsDQogICAgICAgIDB4MTE2NjlDY2U2QUYzY2UxRWYzNzc3NzIxZkNDMGVlZjBlRTU3RWFiYSwNCiAgICAgICAgMHhCRGJhRjY0MzRkNDBENjM1NUIxZTgwZTQwQ2M0QUI5QzY4RDk2MTE2LA0KICAgICAgICAweDE3MTI1YjU5YWM1MWNFZTAyOUU0YkQ3OEQ3ZjU5NDdEMWVBNDlCQjIsDQogICAgICAgIDB4QTM4MkEzQTY1YzNGOGVlMmI3MjZBMjUzNUIzYzM0QTg5RDkwOTRENCwNCiAgICAgICAgMHhBQjc4Yzg3ODFmQjY0QmVkMzdCMjc0QzVFRTc1OWVFMzM0NjVmMWYzLA0KICAgICAgICAweEU3NEYyMDYyNjEyRTNjQUU4YTkzRTI0YjJmMEQzYTIxMzMzNzM4ODQsDQogICAgICAgIDB4NTA1MTIwOTU3QTk4MDY4MjdGOEYxMTFBMTIzNTYxRTgyQzQwYkM3OCwNCiAgICAgICAgMHgwMEE0NjkyMkIxQzU0QWU2YjU4MThDNDlCOTdFMDNFQjRCQjM1MmUxLA0KICAgICAgICAweEU3NmZFNTJhMjUxQzhGM2E1ZGNENjU3RTQ3QTZDOEQxNkZkZjRiRkENCiAgICBdOw0KDQp9Ly8gQ3Jvd2RzYWxlTWludGVy'