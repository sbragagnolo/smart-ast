base 64 content
base64crowdsaleMinter4
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLy8gPT09PSBESVNDTEFJTUVSID09PT0NCi8vDQovLyBFVEhFUkVVTSBJUyBTVElMTCBBTiBFWFBFUkVNRU5UQUwgVEVDSE5PTE9HWS4NCi8vIEFMVEhPVUdIIFRISVMgU01BUlQgQ09OVFJBQ1QgV0FTIENSRUFURUQgV0lUSCBHUkVBVCBDQVJFIEFORCBJTiBUSEUgSE9QRSBPRiBCRUlORyBVU0VGVUwsIE5PIEdVQVJBTlRFRVMgT0YgRkxBV0xFU1MgT1BFUkFUSU9OIENBTiBCRSBHSVZFTi4NCi8vIElOIFBBUlRJQ1VMQVIgLSBTVUJUSUxFIEJVR1MsIEhBQ0tFUiBBVFRBQ0tTIE9SIE1BTEZVTkNUSU9OIE9GIFVOREVSTFlJTkcgVEVDSE5PTE9HWSBDQU4gQ0FVU0UgVU5JTlRFTlRJT05BTCBCRUhBVklPVVIuDQovLyBZT1UgQVJFIFNUUk9OR0xZIEVOQ09VUkFHRUQgVE8gU1RVRFkgVEhJUyBTTUFSVCBDT05UUkFDVCBDQVJFRlVMTFkgSU4gT1JERVIgVE8gVU5ERVJTVEFORCBQT1NTSUJMRSBFREdFIENBU0VTIEFORCBSSVNLUy4NCi8vIERPTidUIFVTRSBUSElTIFNNQVJUIENPTlRSQUNUIElGIFlPVSBIQVZFIFNVQlNUQU5USUFMIERPVUJUUyBPUiBJRiBZT1UgRE9OJ1QgS05PVyBXSEFUIFlPVSBBUkUgRE9JTkcuDQovLw0KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQ0KLy8gQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULA0KLy8gSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwNCi8vIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLA0KLy8gT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4NCi8vID09PT0NCi8vDQoNCi8vLyBAYXV0aG9yIGV0aGVybmlhbiBmb3IgU2FudGltZW50IExMQw0KLy8vIEB0aXRsZSAgQ3Jvd2RzYWxlTWludGVyDQoNCmNvbnRyYWN0IEJhc2Ugew0KDQogICAgZnVuY3Rpb24gbWF4KHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7IHJldHVybiBhID49IGIgPyBhIDogYjsgfQ0KICAgIGZ1bmN0aW9uIG1pbih1aW50IGEsIHVpbnQgYikgcmV0dXJucyAodWludCkgeyByZXR1cm4gYSA8PSBiID8gYSA6IGI7IH0NCg0KICAgIG1vZGlmaWVyIG9ubHkoYWRkcmVzcyBhbGxvd2VkKSB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGFsbG93ZWQpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KDQogICAgLy8vQHJldHVybiBUcnVlIGlmIGBfYWRkcmAgaXMgYSBjb250cmFjdA0KICAgIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICBpZiAoX2FkZHIgPT0gMCkgcmV0dXJuIGZhbHNlOw0KICAgICAgICB1aW50IHNpemU7DQogICAgICAgIGFzc2VtYmx5IHsNCiAgICAgICAgICAgIHNpemUgOj0gZXh0Y29kZXNpemUoX2FkZHIpDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIChzaXplID4gMCk7DQogICAgfQ0KDQogICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIC8vICogICAgICAgICAgcmVlbnRyYW5jeSBoYW5kbGluZyAgICAgICAgICAgICAgICAgICoNCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCiAgICAvL0BkZXYgcHJlZGVmaW5lZCBsb2NrcyAodXAgdG8gdWludCBiaXQgbGVuZ3RoLCBpLmUuIDI1NiBwb3NzaWJsZSkNCiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwMCA9IDIgKiogMDsNCiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwMSA9IDIgKiogMTsNCiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwMiA9IDIgKiogMjsNCiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwMyA9IDIgKiogMzsNCiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwNCA9IDIgKiogNDsNCiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwNSA9IDIgKiogNTsNCg0KICAgIC8vcHJldmVudHMgcmVlbnRyYW5jeSBhdHRhY3M6IHNwZWNpZmljIGxvY2tzDQogICAgdWludCBwcml2YXRlIGJpdGxvY2tzID0gMDsNCiAgICBtb2RpZmllciBub1JlZW50cmFuY3kodWludCBtKSB7DQogICAgICAgIHZhciBfbG9ja3MgPSBiaXRsb2NrczsNCiAgICAgICAgaWYgKF9sb2NrcyAmIG0gPiAwKSB0aHJvdzsNCiAgICAgICAgYml0bG9ja3MgfD0gbTsNCiAgICAgICAgXzsNCiAgICAgICAgYml0bG9ja3MgPSBfbG9ja3M7DQogICAgfQ0KDQogICAgbW9kaWZpZXIgbm9BbnlSZWVudHJhbmN5IHsNCiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOw0KICAgICAgICBpZiAoX2xvY2tzID4gMCkgdGhyb3c7DQogICAgICAgIGJpdGxvY2tzID0gdWludCgtMSk7DQogICAgICAgIF87DQogICAgICAgIGJpdGxvY2tzID0gX2xvY2tzOw0KICAgIH0NCg0KICAgIC8vL0BkZXYgZW1wdHkgbWFya2luZyBtb2RpZmllciBzaWduYWxpbmcgdG8gdXNlciBvZiB0aGUgbWFya2VkIGZ1bmN0aW9uICwgdGhhdCBpdCBjYW4gY2F1c2UgYW4gcmVlbnRyYW50IGNhbGwuDQogICAgLy8vICAgICBkZXZlbG9wZXIgc2hvdWxkIG1ha2UgdGhlIGNhbGxlciBmdW5jdGlvbiByZWVudHJhbnQtc2FmZSBpZiBpdCB1c2UgYSByZWVudHJhbnQgZnVuY3Rpb24uDQogICAgbW9kaWZpZXIgcmVlbnRyYW50IHsgXzsgfQ0KDQp9DQoNCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gew0KICAgIC8vdGFyZ2V0IHRva2VuIGNvbnRyYWN0IGlzIHJlc3BvbnNpYmxlIHRvIGFjY2VwdCBvbmx5IGF1dGhvcml6ZWQgbWludCBjYWxscy4NCiAgICBmdW5jdGlvbiBtaW50KHVpbnQgYW1vdW50LCBhZGRyZXNzIGFjY291bnQpOw0KDQogICAgLy9zdGFydCB0aGUgdG9rZW4gb24gbWludGluZyBmaW5pc2hlZCwNCiAgICBmdW5jdGlvbiBzdGFydCgpOw0KfQ0KDQpjb250cmFjdCBPd25lZCBpcyBCYXNlIHsNCg0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOw0KICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOw0KDQogICAgZnVuY3Rpb24gT3duZWQoKSB7DQogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgb25seShvd25lcikgew0KICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBvbmx5KG5ld093bmVyKSB7DQogICAgICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7DQogICAgICAgIG93bmVyID0gbmV3T3duZXI7DQogICAgfQ0KDQogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvKTsNCg0KfQ0KDQpjb250cmFjdCBCYWxhbmNlU3RvcmFnZSB7DQogICAgZnVuY3Rpb24gYmFsYW5jZXMoYWRkcmVzcyBhY2NvdW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50IGJhbGFuY2UpOw0KfQ0KDQpjb250cmFjdCBBZGRyZXNzTGlzdCB7DQogICAgZnVuY3Rpb24gY29udGFpbnMoYWRkcmVzcyBhZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7DQp9DQoNCmNvbnRyYWN0IE1pbk1heFdoaXRlTGlzdCB7DQogICAgZnVuY3Rpb24gYWxsb3dlZChhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IC8qZmlubmV5Ki8sIHVpbnQgLypmaW5uZXkqLyApOw0KfQ0KDQpjb250cmFjdCBQcmVzYWxlQm9udXNWb3Rpbmcgew0KICAgIGZ1bmN0aW9uIHJhd1ZvdGVzKGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmF3Vm90ZSk7DQp9DQoNCmNvbnRyYWN0IENyb3dkc2FsZU1pbnRlciBpcyBPd25lZCB7DQoNCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IFZFUlNJT04gPSAiMC4yLjEiOw0KDQogICAgLyogPT09PT09IGNvbmZpZ3VyYXRpb24gU1RBUlQgPT09PT09ICovDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQ09NTVVOSVRZX1NBTEVfU1RBUlQgPSAzOTczNDIwOyAvKiBhcHByb3guIDA0LjA3LjIwMTcgMTY6MDAgR01UKzEgKi8NCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUklPUklUWV9TQUxFX1NUQVJUICA9IDM5Nzg0OTY7IC8qIGFwcHJveC4gMDUuMDcuMjAxNyAxNjowMCBHTVQrMSAqLw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBVQkxJQ19TQUxFX1NUQVJUICAgID0gMzk4MzU3ODsgLyogYXBwcm94LiAwNi4wNy4yMDE3IDE2OjAwIEdNVCsxICovDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFVCTElDX1NBTEVfRU5EICAgICAgPSA0MTMwOTY3OyAvKiBhcHByb3guIDA0LjA4LjIwMTcgMTY6MDAgR01UKzEgKi8NCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBXSVRIRFJBV0FMX0VORCAgICAgICA9IDQyODg1MjA7IC8qIGFwcHJveC4gMDQuMDkuMjAxNyAxNjowMCBHTVQrMSAqLw0KCQ0KICAgIGFkZHJlc3MgcHVibGljIFRFQU1fR1JPVVBfV0FMTEVUICAgICAgICAgICA9IDB4QTBEOEYzM0VmOUI0NERhQUU1MjI1MzFERDVFNzI1Mjk2MmIwOTIwNzsNCiAgICBhZGRyZXNzIHB1YmxpYyBBRFZJU0VSU19BTkRfRlJJRU5EU19XQUxMRVQgPSAweDQ0ZjE0NWY2QmMzNmU1MWVFRDliNjYxZTk5QzhiOUNDRjk4N2MwNDM7DQoNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBURUFNX0JPTlVTX1BFUl9DRU5UICAgICAgICAgICAgPSAxODsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBBRFZJU09SU19BTkRfUEFSVE5FUlNfUEVSX0NFTlQgPSAxMDsNCg0KICAgIE1pbnRhYmxlVG9rZW4gICAgICBwdWJsaWMgVE9LRU4gICAgICAgICAgICAgICAgICAgID0gTWludGFibGVUb2tlbigweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsNCg0KICAgIEFkZHJlc3NMaXN0ICAgICAgICBwdWJsaWMgUFJJT1JJVFlfQUREUkVTU19MSVNUICAgID0gQWRkcmVzc0xpc3QoMHg5NDExQ2Y3MEY5N0MyRUQwOTMyNWU1ODYyOUQ0ODQwMWFFZDUwRjg5KTsNCiAgICBNaW5NYXhXaGl0ZUxpc3QgICAgcHVibGljIENPTU1VTklUWV9BTExPV0FOQ0VfTElTVCA9IE1pbk1heFdoaXRlTGlzdCgweGQyNjc1ZDNlYTQ3ODY5MmFkMzRmMDlmYTFmOGJkYTY3YTk2OTZiZjcpOw0KICAgIEJhbGFuY2VTdG9yYWdlICAgICBwdWJsaWMgUFJFU0FMRV9CQUxBTkNFUyAgICAgICAgID0gQmFsYW5jZVN0b3JhZ2UoMHg0RmQ5OTdFZDdjMTBEYkQwNGU5NWQzNzMwY2Q3N0Q3OTUxMzA3NkYyKTsNCiAgICBQcmVzYWxlQm9udXNWb3RpbmcgcHVibGljIFBSRVNBTEVfQk9OVVNfVk9USU5HICAgICA9IFByZXNhbGVCb251c1ZvdGluZygweDI4M2E5N0FmODY3MTY1MTY5QUVDZTBiMkU5NjNiOWYwRkM3RTViOGMpOw0KDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVBfRVRIID0gNDUwMDA7DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFX0VUSCA9IDE1MDAwOw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRV9FVEggPSA0NTAwMDsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fQUNDRVBURURfQU1PVU5UX0ZJTk5FWSA9IDIwMDsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTl9QRVJfRVRIID0gMTAwMDsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUkVfU0FMRV9CT05VU19QRVJfQ0VOVCA9IDU0Ow0KDQogICAgLy9jb25zdHJ1Y3Rvcg0KICAgIGZ1bmN0aW9uIENyb3dkc2FsZU1pbnRlcigpIHsNCiAgICAgICAgLy9jaGVjayBjb25maWd1cmF0aW9uIGlmIHNvbWV0aGluZyBpbiBzZXR1cCBpcyBsb29raW5nIHdlaXJkDQogICAgICAgIGlmICgNCiAgICAgICAgICAgIFRPS0VOX1BFUl9FVEggPT0gMA0KICAgICAgICAgICAgfHwgVEVBTV9CT05VU19QRVJfQ0VOVCArIEFEVklTT1JTX0FORF9QQVJUTkVSU19QRVJfQ0VOVCA+PTEwMA0KICAgICAgICAgICAgfHwgTUlOX0FDQ0VQVEVEX0FNT1VOVF9GSU5ORVkgPCAxDQogICAgICAgICAgICB8fCBvd25lciA9PSAweDANCiAgICAgICAgICAgIHx8IGFkZHJlc3MoQ09NTVVOSVRZX0FMTE9XQU5DRV9MSVNUKSA9PSAweDANCiAgICAgICAgICAgIHx8IGFkZHJlc3MoUFJJT1JJVFlfQUREUkVTU19MSVNUKSA9PSAweDANCiAgICAgICAgICAgIHx8IGFkZHJlc3MoUFJFU0FMRV9CT05VU19WT1RJTkcpID09IDB4MA0KICAgICAgICAgICAgfHwgYWRkcmVzcyhQUkVTQUxFX0JBTEFOQ0VTKSA9PSAweDANCiAgICAgICAgICAgIHx8IENPTU1VTklUWV9TQUxFX1NUQVJUID09IDANCiAgICAgICAgICAgIHx8IFBSSU9SSVRZX1NBTEVfU1RBUlQgPT0gMA0KICAgICAgICAgICAgfHwgUFVCTElDX1NBTEVfU1RBUlQgPT0gMA0KICAgICAgICAgICAgfHwgUFVCTElDX1NBTEVfRU5EID09IDANCiAgICAgICAgICAgIHx8IFdJVEhEUkFXQUxfRU5EID09IDANCiAgICAgICAgICAgIHx8IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSA9PSAwDQogICAgICAgICAgICB8fCBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUgPT0gMA0KICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVAgPT0gMA0KICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1NBTEVfU1RBUlQgPD0gYmxvY2subnVtYmVyDQogICAgICAgICAgICB8fCBDT01NVU5JVFlfU0FMRV9TVEFSVCA+PSBQUklPUklUWV9TQUxFX1NUQVJUDQogICAgICAgICAgICB8fCBQUklPUklUWV9TQUxFX1NUQVJUID49IFBVQkxJQ19TQUxFX1NUQVJUDQogICAgICAgICAgICB8fCBQVUJMSUNfU0FMRV9TVEFSVCA+PSBQVUJMSUNfU0FMRV9FTkQNCiAgICAgICAgICAgIHx8IFBVQkxJQ19TQUxFX0VORCA+PSBXSVRIRFJBV0FMX0VORA0KICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVAgPiBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUNCiAgICAgICAgICAgIHx8IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSA+IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSApDQogICAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIC8qID09PT09PSBjb25maWd1cmF0aW9uIEVORCA9PT09PT0gKi8NCg0KICAgIC8qID09PT09PSBwdWJsaWMgc3RhdGVzIFNUQVJUPT09PT09ICovDQoNCiAgICBib29sIHB1YmxpYyBpc0Fib3J0ZWQgPSBmYWxzZTsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBiYWxhbmNlczsNCiAgICBib29sIHB1YmxpYyBUT0tFTl9TVEFSVEVEID0gZmFsc2U7DQogICAgdWludCBwdWJsaWMgdG90YWxfcmVjZWl2ZWRfYW1vdW50Ow0KICAgIGFkZHJlc3NbXSBwdWJsaWMgaW52ZXN0b3JzOw0KDQogICAgLy9kaXNwbGF5cyBudW1iZXIgb2YgdW5pcSBpbnZlc3RvcnMNCiAgICBmdW5jdGlvbiBpbnZlc3RvcnNDb3VudCgpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnModWludCkgeyByZXR1cm4gaW52ZXN0b3JzLmxlbmd0aDsgfQ0KDQogICAgLy9kaXNwbGF5cyByZWNlaXZlZCBhbW91bnQgaW4gZXRoIHVwdG8gbm93DQogICAgZnVuY3Rpb24gVE9UQUxfUkVDRUlWRURfRVRIKCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludCkgeyByZXR1cm4gdG90YWxfcmVjZWl2ZWRfYW1vdW50IC8gMSBldGhlcjsgfQ0KDQogICAgLy9kaXNwbGF5cyBjdXJyZW50IGNvbnRyYWN0IHN0YXRlIGluIGh1bWFuIHJlYWRhYmxlIGZvcm0NCiAgICBmdW5jdGlvbiBzdGF0ZSgpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHN0cmluZykgeyByZXR1cm4gc3RhdGVOYW1lc1sgdWludChjdXJyZW50U3RhdGUoKSkgXTsgfQ0KDQogICAgZnVuY3Rpb24gc2FuX3doaXRlbGlzdChhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQsIHVpbnQpIHsgcmV0dXJuIENPTU1VTklUWV9BTExPV0FOQ0VfTElTVC5hbGxvd2VkKGFkZHIpOyB9DQogICAgZnVuY3Rpb24gY2ZpX3doaXRlbGlzdChhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsgcmV0dXJuIFBSSU9SSVRZX0FERFJFU1NfTElTVC5jb250YWlucyhhZGRyKTsgfQ0KDQogICAgLyogPT09PT09IHB1YmxpYyBzdGF0ZXMgRU5EID09PT09PSAqLw0KDQogICAgc3RyaW5nW10gcHJpdmF0ZSBzdGF0ZU5hbWVzID0gWyJCRUZPUkVfU1RBUlQiLCAiQ09NTVVOSVRZX1NBTEUiLCAiUFJJT1JJVFlfU0FMRSIsICJQUklPUklUWV9TQUxFX0ZJTklTSEVEIiwgIlBVQkxJQ19TQUxFIiwgIkJPTlVTX01JTlRJTkciLCAiV0lUSERSQVdBTF9SVU5OSU5HIiwgIlJFRlVORF9SVU5OSU5HIiwgIkNMT1NFRCIgXTsNCiAgICBlbnVtIFN0YXRlIHsgQkVGT1JFX1NUQVJULCBDT01NVU5JVFlfU0FMRSwgUFJJT1JJVFlfU0FMRSwgUFJJT1JJVFlfU0FMRV9GSU5JU0hFRCwgUFVCTElDX1NBTEUsIEJPTlVTX01JTlRJTkcsIFdJVEhEUkFXQUxfUlVOTklORywgUkVGVU5EX1JVTk5JTkcsIENMT1NFRCB9DQoNCiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVAgPSBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUF9FVEggKiAxIGV0aGVyOw0KICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBNSU5fVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUgPSBNSU5fVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkVfRVRIICogMSBldGhlcjsNCiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFID0gTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFX0VUSCAqIDEgZXRoZXI7DQogICAgdWludCBwcml2YXRlIGNvbnN0YW50IE1JTl9BQ0NFUFRFRF9BTU9VTlQgPSBNSU5fQUNDRVBURURfQU1PVU5UX0ZJTk5FWSAqIDEgZmlubmV5Ow0KICAgIGJvb2wgcHJpdmF0ZSBhbGxCb251c2VzQXJlTWludGVkID0gZmFsc2U7DQoNCiAgICAvLw0KICAgIC8vID09PT09PT0gaW50ZXJmYWNlIG1ldGhvZHMgPT09PT09PQ0KICAgIC8vDQoNCiAgICAvL2FjY2VwdCBwYXltZW50cyBoZXJlDQogICAgZnVuY3Rpb24gKCkNCiAgICBwYXlhYmxlDQogICAgbm9BbnlSZWVudHJhbmN5DQogICAgew0KICAgICAgICBTdGF0ZSBzdGF0ZSA9IGN1cnJlbnRTdGF0ZSgpOw0KICAgICAgICB1aW50IGFtb3VudF9hbGxvd2VkOw0KICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuQ09NTVVOSVRZX1NBTEUpIHsNCiAgICAgICAgICAgIHZhciAobWluX2Zpbm5leSwgbWF4X2Zpbm5leSkgPSBDT01NVU5JVFlfQUxMT1dBTkNFX0xJU1QuYWxsb3dlZChtc2cuc2VuZGVyKTsNCiAgICAgICAgICAgIHZhciAobWluLCBtYXgpID0gKG1pbl9maW5uZXkgKiAxIGZpbm5leSwgbWF4X2Zpbm5leSAqIDEgZmlubmV5KTsNCiAgICAgICAgICAgIHZhciBzZW5kZXJfYmFsYW5jZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOw0KICAgICAgICAgICAgYXNzZXJ0IChzZW5kZXJfYmFsYW5jZSA8PSBtYXgpOyAvL3Nhbml0eSBjaGVjazogc2hvdWxkIGJlIGFsd2F5cyB0cnVlOw0KICAgICAgICAgICAgYXNzZXJ0IChtc2cudmFsdWUgPj0gbWluKTsgICAgICAvL3JlamVjdCBwYXltZW50cyBsZXNzIHRoYW4gbWluaW11bQ0KICAgICAgICAgICAgYW1vdW50X2FsbG93ZWQgPSBtYXggLSBzZW5kZXJfYmFsYW5jZTsNCiAgICAgICAgICAgIF9yZWNlaXZlRnVuZHNVcFRvKGFtb3VudF9hbGxvd2VkKTsNCiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBTdGF0ZS5QUklPUklUWV9TQUxFKSB7DQogICAgICAgICAgICBhc3NlcnQgKFBSSU9SSVRZX0FERFJFU1NfTElTVC5jb250YWlucyhtc2cuc2VuZGVyKSk7DQogICAgICAgICAgICBhbW91bnRfYWxsb3dlZCA9IENPTU1VTklUWV9QTFVTX1BSSU9SSVRZX1NBTEVfQ0FQIC0gdG90YWxfcmVjZWl2ZWRfYW1vdW50Ow0KICAgICAgICAgICAgX3JlY2VpdmVGdW5kc1VwVG8oYW1vdW50X2FsbG93ZWQpOw0KICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IFN0YXRlLlBVQkxJQ19TQUxFKSB7DQogICAgICAgICAgICBhbW91bnRfYWxsb3dlZCA9IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSAtIHRvdGFsX3JlY2VpdmVkX2Ftb3VudDsNCiAgICAgICAgICAgIF9yZWNlaXZlRnVuZHNVcFRvKGFtb3VudF9hbGxvd2VkKTsNCiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBTdGF0ZS5SRUZVTkRfUlVOTklORykgew0KICAgICAgICAgICAgLy8gYW55IGVudHJpbmcgY2FsbCBpbiBSZWZ1bmQgUGhhc2Ugd2lsbCBjYXVzZSBmdWxsIHJlZnVuZA0KICAgICAgICAgICAgX3NlbmRSZWZ1bmQoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQogICAgfQ0KDQoNCiAgICBmdW5jdGlvbiByZWZ1bmQoKSBleHRlcm5hbA0KICAgIGluU3RhdGUoU3RhdGUuUkVGVU5EX1JVTk5JTkcpDQogICAgbm9BbnlSZWVudHJhbmN5DQogICAgew0KICAgICAgICBfc2VuZFJlZnVuZCgpOw0KICAgIH0NCg0KDQogICAgZnVuY3Rpb24gd2l0aGRyYXdGdW5kc0FuZFN0YXJ0VG9rZW4oKSBleHRlcm5hbA0KICAgIGluU3RhdGUoU3RhdGUuV0lUSERSQVdBTF9SVU5OSU5HKQ0KICAgIG5vQW55UmVlbnRyYW5jeQ0KICAgIG9ubHkob3duZXIpDQogICAgew0KICAgICAgICAvLyB0cmFuc2ZlciBmdW5kcyB0byBvd25lcg0KICAgICAgICBpZiAoIW93bmVyLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7DQoNCiAgICAgICAgLy9ub3RpZnkgdG9rZW4gY29udHJhY3QgdG8gc3RhcnQNCiAgICAgICAgaWYgKFRPS0VOLmNhbGwoYnl0ZXM0KHNoYTMoInN0YXJ0KCkiKSkpKSB7DQogICAgICAgICAgICBUT0tFTl9TVEFSVEVEID0gdHJ1ZTsNCiAgICAgICAgICAgIFRva2VuU3RhcnRlZChUT0tFTik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBldmVudCBUb2tlblN0YXJ0ZWQoYWRkcmVzcyB0b2tlbkFkZHIpOw0KDQogICAgLy90aGVyZSBhcmUgYXJvdW5kIDQwIGFkZHJlc3NlcyBpbiBQUkVTQUxFX0FERFJFU1NFUyBsaXN0LiBFdmVyeXRoaW5nIGZpdHMgaW50byBzaW5nbGUgVHguDQogICAgZnVuY3Rpb24gbWludEFsbEJvbnVzZXMoKSBleHRlcm5hbA0KICAgIGluU3RhdGUoU3RhdGUuQk9OVVNfTUlOVElORykNCiAgICBub0FueVJlZW50cmFuY3kNCiAgICB7DQogICAgICAgIGFzc2VydCghYWxsQm9udXNlc0FyZU1pbnRlZCk7DQogICAgICAgIGFsbEJvbnVzZXNBcmVNaW50ZWQgPSB0cnVlOw0KDQogICAgICAgIHVpbnQgVEVBTV9BTkRfUEFSVE5FUlNfUEVSX0NFTlQgPSBURUFNX0JPTlVTX1BFUl9DRU5UICsgQURWSVNPUlNfQU5EX1BBUlRORVJTX1BFUl9DRU5UOw0KDQogICAgICAgIHVpbnQgdG90YWxfcHJlc2FsZV9hbW91bnRfd2l0aF9ib251cyA9IG1pbnRQcmVzYWxlQm9udXNlcygpOw0KICAgICAgICB1aW50IHRvdGFsX2NvbGxlY3RlZF9hbW91bnQgPSB0b3RhbF9yZWNlaXZlZF9hbW91bnQgKyB0b3RhbF9wcmVzYWxlX2Ftb3VudF93aXRoX2JvbnVzOw0KICAgICAgICB1aW50IGV4dHJhX2Ftb3VudCA9IHRvdGFsX2NvbGxlY3RlZF9hbW91bnQgKiBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVCAvICgxMDAgLSBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVCk7DQogICAgICAgIHVpbnQgZXh0cmFfdGVhbV9hbW91bnQgPSBleHRyYV9hbW91bnQgKiBURUFNX0JPTlVTX1BFUl9DRU5UIC8gVEVBTV9BTkRfUEFSVE5FUlNfUEVSX0NFTlQ7DQogICAgICAgIHVpbnQgZXh0cmFfcGFydG5lcnNfYW1vdW50ID0gZXh0cmFfYW1vdW50ICogQURWSVNPUlNfQU5EX1BBUlRORVJTX1BFUl9DRU5UIC8gVEVBTV9BTkRfUEFSVE5FUlNfUEVSX0NFTlQ7DQogDQogICAgICAgIC8vYmVhdXRpZnkgdG90YWwgc3VwcGx5OiByb3VuZCBkb3duIHRvIGZ1bGwgZXRoLg0KICAgICAgICB1aW50IHRvdGFsX3RvX21pbnQgPSB0b3RhbF9jb2xsZWN0ZWRfYW1vdW50ICsgZXh0cmFfYW1vdW50Ow0KICAgICAgICB1aW50IHJvdW5kX3JlbWFpbmRlciA9IHRvdGFsX3RvX21pbnQgLSAodG90YWxfdG9fbWludCAvIDEgZXRoZXIgKiAxIGV0aGVyKTsNCiAgICAgICAgZXh0cmFfdGVhbV9hbW91bnQgLT0gcm91bmRfcmVtYWluZGVyOyAvL3RoaXMgd2lsbCByZWR1Y2UgdG90YWxfc3VwcGx5IHRvIHJvdW5kZWQgdmFsdWUNCg0KICAgICAgICAvL21pbnQgZ3JvdXAgYm9udXNlcw0KICAgICAgICBfbWludChleHRyYV90ZWFtX2Ftb3VudCAsIFRFQU1fR1JPVVBfV0FMTEVUKTsNCiAgICAgICAgX21pbnQoZXh0cmFfcGFydG5lcnNfYW1vdW50LCBBRFZJU0VSU19BTkRfRlJJRU5EU19XQUxMRVQpOw0KDQogICAgfQ0KDQogICAgZnVuY3Rpb24gbWludFByZXNhbGVCb251c2VzKCkgaW50ZXJuYWwgcmV0dXJucyh1aW50IGFtb3VudCkgew0KICAgICAgICB1aW50IHRvdGFsX3ByZXNhbGVfYW1vdW50X3dpdGhfYm9udXMgPSAwOw0KICAgICAgICAvL21pbnQgcHJlc2FsZSBib251c2VzDQogICAgICAgIGZvcih1aW50IGk9MDsgaSA8IFBSRVNBTEVfQUREUkVTU0VTLmxlbmd0aDsgKytpKSB7DQogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBQUkVTQUxFX0FERFJFU1NFU1tpXTsNCiAgICAgICAgICAgIHZhciBhbW91bnRfd2l0aF9ib251cyA9IHByZXNhbGVUb2tlbkFtb3VudChhZGRyKTsNCiAgICAgICAgICAgIGlmIChhbW91bnRfd2l0aF9ib251cz4wKSB7DQogICAgICAgICAgICAgICAgX21pbnQoYW1vdW50X3dpdGhfYm9udXMsIGFkZHIpOw0KICAgICAgICAgICAgICAgIHRvdGFsX3ByZXNhbGVfYW1vdW50X3dpdGhfYm9udXMgKz0gYW1vdW50X3dpdGhfYm9udXM7DQogICAgICAgICAgICB9DQogICAgICAgIH0vL2Zvcg0KICAgICAgICByZXR1cm4gdG90YWxfcHJlc2FsZV9hbW91bnRfd2l0aF9ib251czsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBwcmVzYWxlVG9rZW5BbW91bnQoYWRkcmVzcyBhZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KXsNCiAgICAgICAgdWludCBwcmVzYWxlX2JhbGFuY2UgPSBQUkVTQUxFX0JBTEFOQ0VTLmJhbGFuY2VzKGFkZHIpOw0KICAgICAgICBpZiAocHJlc2FsZV9iYWxhbmNlID4gMCkgew0KICAgICAgICAgICAgLy8gdGhpcyBjYWxjdWxhdGlvbiBpcyBhYm91dCB3YWl2ZWQgcHJlLXNhbGUgYm9udXMuDQogICAgICAgICAgICAvLyByYXdWb3RlIGNvbnRhaW5zIGEgdmFsdWUgWzAuLjEgZXRoZXJdLg0KICAgICAgICAgICAgLy8gICAgIDAgZXRoZXIgICAgLSBtZWFucyAiZGVmYXVsdCB2YWx1ZSIgb3IgIm5vIHZvdGUiIDogMTAwJSBib251cyBzYXZlZA0KICAgICAgICAgICAgLy8gICAgIDEgZXRoZXIgICAgLSBtZWFucyAidm90ZSAxMDAlIiA6IDEwMCUgYm9udXMgc2F2ZWQNCiAgICAgICAgICAgIC8vICAgIDw9MTAgZmlubmV5IC0gc3BlY2lhbCB2YWx1ZSAidm90ZSAwJSIgOiBubyBib251cyBhdCBhbGwgKDEwMCUgYm9udXMgd2FpdmVkKS4NCiAgICAgICAgICAgIC8vICBvdGhlciB2YWx1ZSAtICJQUkVfU0FMRV9CT05VU19QRVJfQ0VOVCAqIHJhd1ZvdGUgLyAxIGV0aGVyIiBpcyBhbiBlZmZlY3RpdmUgYm9udXMgcGVyIGNlbnQgZm9yIHBhcnRpY3VsYXIgcHJlc2FsZSBtZW1iZXIuDQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgdmFyIHJhd1ZvdGUgPSBQUkVTQUxFX0JPTlVTX1ZPVElORy5yYXdWb3RlcyhhZGRyKTsNCiAgICAgICAgICAgIGlmIChyYXdWb3RlID09IDApICAgICAgICAgICAgICByYXdWb3RlID0gMSBldGhlcjsgLy9zcGVjaWFsIGNhc2UgIm5vIHZvdGUiIChkZWZhdWx0IHZhbHVlKSA9PT4gKDEgZXRoZXIgaXMgMTAwJSkNCiAgICAgICAgICAgIGVsc2UgaWYgKHJhd1ZvdGUgPD0gMTAgZmlubmV5KSByYXdWb3RlID0gMDsgICAgICAgLy9zcGVjaWFsIGNhc2UgIjAlIiAobm8gYm9udXMpICAgICAgICAgICA9PT4gKDAgZXRoZXIgaXMgICAwJSkNCiAgICAgICAgICAgIGVsc2UgaWYgKHJhd1ZvdGUgPiAxIGV0aGVyKSAgICByYXdWb3RlID0gMSBldGhlcjsgLy9tYXggYm9udXMgaXMgMTAwJSAoc2hvdWxkIG5vdCBvY2N1cikNCiAgICAgICAgICAgIHZhciBwcmVzYWxlX2JvbnVzID0gcHJlc2FsZV9iYWxhbmNlICogUFJFX1NBTEVfQk9OVVNfUEVSX0NFTlQgKiByYXdWb3RlIC8gMSBldGhlciAvIDEwMDsNCiAgICAgICAgICAgIHJldHVybiBwcmVzYWxlX2JhbGFuY2UgKyBwcmVzYWxlX2JvbnVzOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhdHRhY2hUb1Rva2VuKE1pbnRhYmxlVG9rZW4gdG9rZW5BZGRyKSBleHRlcm5hbA0KICAgIGluU3RhdGUoU3RhdGUuQkVGT1JFX1NUQVJUKQ0KICAgIG9ubHkob3duZXIpDQogICAgew0KICAgICAgICBUT0tFTiA9IHRva2VuQWRkcjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhYm9ydCgpIGV4dGVybmFsDQogICAgaW5TdGF0ZUJlZm9yZShTdGF0ZS5SRUZVTkRfUlVOTklORykNCiAgICBvbmx5KG93bmVyKQ0KICAgIHsNCiAgICAgICAgaXNBYm9ydGVkID0gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLw0KICAgIC8vID09PT09PT0gaW1wbGVtZW50YXRpb24gbWV0aG9kcyA9PT09PT09DQogICAgLy8NCg0KICAgIGZ1bmN0aW9uIF9zZW5kUmVmdW5kKCkgcHJpdmF0ZQ0KICAgIHRva2VuSG9sZGVyc09ubHkNCiAgICB7DQogICAgICAgIC8vIGxvYWQgYmFsYW5jZSB0byByZWZ1bmQgcGx1cyBhbW91bnQgY3VycmVudGx5IHNlbnQNCiAgICAgICAgdmFyIGFtb3VudF90b19yZWZ1bmQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXSArIG1zZy52YWx1ZTsNCiAgICAgICAgLy8gcmVzZXQgYmFsYW5jZQ0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7DQogICAgICAgIC8vIHNlbmQgcmVmdW5kIGJhY2sgdG8gc2VuZGVyDQogICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKGFtb3VudF90b19yZWZ1bmQpKSB0aHJvdzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfcmVjZWl2ZUZ1bmRzVXBUbyh1aW50IGFtb3VudCkgcHJpdmF0ZQ0KICAgIG5vdFRvb1NtYWxsQW1vdW50T25seQ0KICAgIHsNCiAgICAgICAgcmVxdWlyZSAoYW1vdW50ID4gMCk7DQogICAgICAgIGlmIChtc2cudmFsdWUgPiBhbW91bnQpIHsNCiAgICAgICAgICAgIC8vIGFjY2VwdCBhbW91bnQgb25seSBhbmQgcmV0dXJuIGNoYW5nZQ0KICAgICAgICAgICAgdmFyIGNoYW5nZV90b19yZXR1cm4gPSBtc2cudmFsdWUgLSBhbW91bnQ7DQogICAgICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChjaGFuZ2VfdG9fcmV0dXJuKSkgdGhyb3c7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBhY2NlcHQgZnVsbCBhbW91bnQNCiAgICAgICAgICAgIGFtb3VudCA9IG1zZy52YWx1ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPT0gMCkgaW52ZXN0b3JzLnB1c2gobXNnLnNlbmRlcik7DQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IGFtb3VudDsNCiAgICAgICAgdG90YWxfcmVjZWl2ZWRfYW1vdW50ICs9IGFtb3VudDsNCiAgICAgICAgX21pbnQoYW1vdW50LG1zZy5zZW5kZXIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIF9taW50KHVpbnQgYW1vdW50LCBhZGRyZXNzIGFjY291bnQpIHByaXZhdGUgew0KICAgICAgICBNaW50YWJsZVRva2VuKFRPS0VOKS5taW50KGFtb3VudCAqIFRPS0VOX1BFUl9FVEgsIGFjY291bnQpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGN1cnJlbnRTdGF0ZSgpIHByaXZhdGUgY29uc3RhbnQNCiAgICByZXR1cm5zIChTdGF0ZSkNCiAgICB7DQogICAgICAgIGlmIChpc0Fib3J0ZWQpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhbGFuY2UgPiAwDQogICAgICAgICAgICAgICAgICAgPyBTdGF0ZS5SRUZVTkRfUlVOTklORw0KICAgICAgICAgICAgICAgICAgIDogU3RhdGUuQ0xPU0VEOw0KICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8IENPTU1VTklUWV9TQUxFX1NUQVJUIHx8IGFkZHJlc3MoVE9LRU4pID09IDB4MCkgew0KICAgICAgICAgICAgIHJldHVybiBTdGF0ZS5CRUZPUkVfU1RBUlQ7DQogICAgICAgIH0gZWxzZSBpZiAoYmxvY2subnVtYmVyIDwgUFJJT1JJVFlfU0FMRV9TVEFSVCkgew0KICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkNPTU1VTklUWV9TQUxFOw0KICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8IFBVQkxJQ19TQUxFX1NUQVJUKSB7DQogICAgICAgICAgICByZXR1cm4gdG90YWxfcmVjZWl2ZWRfYW1vdW50IDwgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVANCiAgICAgICAgICAgICAgICA/IFN0YXRlLlBSSU9SSVRZX1NBTEUNCiAgICAgICAgICAgICAgICA6IFN0YXRlLlBSSU9SSVRZX1NBTEVfRklOSVNIRUQ7DQogICAgICAgIH0gZWxzZSBpZiAoYmxvY2subnVtYmVyIDw9IFBVQkxJQ19TQUxFX0VORCAmJiB0b3RhbF9yZWNlaXZlZF9hbW91bnQgPCBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUpIHsNCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5QVUJMSUNfU0FMRTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmJhbGFuY2UgPT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkNMT1NFRDsNCiAgICAgICAgfSBlbHNlIGlmIChibG9jay5udW1iZXIgPD0gV0lUSERSQVdBTF9FTkQgJiYgdG90YWxfcmVjZWl2ZWRfYW1vdW50ID49IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSkgew0KICAgICAgICAgICAgcmV0dXJuIGFsbEJvbnVzZXNBcmVNaW50ZWQNCiAgICAgICAgICAgICAgICA/IFN0YXRlLldJVEhEUkFXQUxfUlVOTklORw0KICAgICAgICAgICAgICAgIDogU3RhdGUuQk9OVVNfTUlOVElORzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5SRUZVTkRfUlVOTklORzsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vDQogICAgLy8gPT09PT09PT09PT09IG1vZGlmaWVycyA9PT09PT09PT09PT0NCiAgICAvLw0KDQogICAgLy9mYWlscyBpZiBzdGF0ZSBkb3NuJ3QgbWF0Y2gNCiAgICBtb2RpZmllciBpblN0YXRlKFN0YXRlIHN0YXRlKSB7DQogICAgICAgIGlmIChzdGF0ZSAhPSBjdXJyZW50U3RhdGUoKSkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy9mYWlscyBpZiB0aGUgY3VycmVudCBzdGF0ZSBpcyBub3QgYmVmb3JlIHRoYW4gdGhlIGdpdmVuIG9uZS4NCiAgICBtb2RpZmllciBpblN0YXRlQmVmb3JlKFN0YXRlIHN0YXRlKSB7DQogICAgICAgIGlmIChjdXJyZW50U3RhdGUoKSA+PSBzdGF0ZSkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy9hY2NlcHRzIGNhbGxzIGZyb20gdG9rZW4gaG9sZGVycyBvbmx5DQogICAgbW9kaWZpZXIgdG9rZW5Ib2xkZXJzT25seSgpew0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPT0gMCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQoNCiAgICAvLyBkb25gdCBhY2NlcHQgdHJhbnNhY3Rpb25zIHdpdGggdmFsdWUgbGVzcyB0aGFuIGFsbG93ZWQgbWluaW11bQ0KICAgIG1vZGlmaWVyIG5vdFRvb1NtYWxsQW1vdW50T25seSgpew0KICAgICAgICBpZiAobXNnLnZhbHVlIDwgTUlOX0FDQ0VQVEVEX0FNT1VOVCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy8NCiAgICAvLyA9PT09PT09PT09PT0gREFUQSA9PT09PT09PT09PT0NCiAgICAvLw0KDQogICAgYWRkcmVzc1tdIFBSRVNBTEVfQUREUkVTU0VTID0gWw0KICAgICAgICAweEY1NURGZDJCMDJDZjMyODI2ODBDOTRCRDAxRTlEYTA0NDA0NEU2QTIsDQogICAgICAgIDB4MEQ0MEI1MzgyODk0OGIzNDA2NzM2NzRBZTY1RWU3ZjVEODQ4OGUzMywNCiAgICAgICAgMHgwZWE2OTBkNDY2ZDZiYmQxOEYxMjRFMjA0RUE0ODZhNEJmOTM0Y2JBLA0KICAgICAgICAweDZkMjVCOWY0MGI5MkNjRjE1ODI1MDYyNUExNTI1NzQ2MDM0NjUxOTIsDQogICAgICAgIDB4NDgxRGEwRjFlODljMjA2NzEyQkNlQTRmN0Q2RTYwZDdiNDJmNkM2QywNCiAgICAgICAgMHg0MTZFRGE1RDZFZDI5Q0FjM2U2RDk3QzEwMmQ2MUJDNTc4QzVkQjg3LA0KICAgICAgICAweEQ3OEFjNkZGYzkwRTA4NEY1ZkQ1NjM1NjNDYzlmRDMzZUUzMDNmMTgsDQogICAgICAgIDB4ZTY3MTRhYjUyM2FjRWNmOWI4NWQ4ODA0OTJBMkFjREJlNDE4NDg5MiwNCiAgICAgICAgMHgyODVBOWNBNWZFOWVlODU0NDU3MDE2YTdhNWQzQTNCQjk1NTM4MDkzLA0KICAgICAgICAweDYwMGNhNjM3MmYzMTJCMDgxMjA1QjJDM2RBNzI1MTdhNjAzYTE1Q2MsDQogICAgICAgIDB4MmI4ZDVDOTIwOWZCRDUwMEZkODE3RDk2MDgzMEFDNjcxOGI4ODExMiwNCiAgICAgICAgMHg0QjE1RGQyM0U1ZjkwNjJlNEZCM2E5QjdERUNGNjUzQzAyMTVlNTYwLA0KICAgICAgICAweEQ2NzQ0OWU2QUIyM2MxZjQ2ZGVhNzdkM2Y1RTVENDdGZjMzRGM5YTksDQogICAgICAgIDB4ZDBBRGFEN2VkODFBZkRhMDM5OTY5NTY2Q2ViODQyM0UwYWIxNGQ5MCwNCiAgICAgICAgMHgyNDVmMjc3OTZhNDRkN0UzRDMwNjU0ZUQ2Mjg1MGZmMDlFRTg1NjU2LA0KICAgICAgICAweDYzOUQ2ZUMyY2VmNGQ2ZjcxMzBiNDAxMzJCM0I2RjViNjY3ZTUxMDUsDQogICAgICAgIDB4NWU5YTY5Qjg2NTY5MTQ5NjVkNjlkOGRhNDljMzcwOUYwYkYyQjVFZiwNCiAgICAgICAgMHgwODMyYzNCODAxMzE5YjYyYUIxRDM1MzU2MTVkMWZlOWFGYzMzOTdBLA0KICAgICAgICAweGY2RGQ2MzEyNzkzNzcyMDU4MThDM2E2NzI1RWVFRkI5RDBGNmI5RjMsDQogICAgICAgIDB4NDc2OTYwNTRlNzFlNGMzZjg5OTExOTYwMWEyNTVhNzA2NUMzMDg3QiwNCiAgICAgICAgMHhmMTA3YkU2YzY4MzNmNjFBMjRjNjRENjNjOEE3ZmNENzg0QWJmZjA2LA0KICAgICAgICAweDA1NmYwNzJCZDIyNDAzMTViNzA4REJDYkRERTgwZDQwMGYwMzk0YTEsDQogICAgICAgIDB4OWU1QmFlQzI0NEQ4Y0NENDk0NzcwMzdFMjhlZDcwNTg0RWVBRDk1NiwNCiAgICAgICAgMHg0MEEwYjJjMUI0RTMwRjI3ZTIxREY5NGU3MzQ2NzE4NTZiNDg1OTY2LA0KICAgICAgICAweDg0ZjA2MjBBNTQ3YTREMTRBNzk4Nzc3MGM0RjVDMjVkNDg4ZDYzMzUsDQogICAgICAgIDB4MDM2QWMxMWMxNjFDMDlkOTRjQTM5RjdCMjRDMWJDODIwNDZjMzMyQiwNCiAgICAgICAgMHgyOTEyQTE4QzkwMmRFNmY5NTMyMUQ2ZDYzMDVEN0I4MEVlYzRDMDU1LA0KICAgICAgICAweEUxQWQzMDk3MWI4M2MxN0UyQTI0YzAzMzRDQjQ1ZjgwOEFiRUJjODcsDQogICAgICAgIDB4MDdmMzViN0ZFNzM1YzQ5RkQ1MDUxRDVhMEMyZTc0YzkxNzdmRWE2ZCwNCiAgICAgICAgMHgxMTY2OUNjZTZBRjNjZTFFZjM3Nzc3MjFmQ0MwZWVmMGVFNTdFYWJhLA0KICAgICAgICAweEJEYmFGNjQzNGQ0MEQ2MzU1QjFlODBlNDBDYzRBQjlDNjhEOTYxMTYsDQogICAgICAgIDB4MTcxMjViNTlhYzUxY0VlMDI5RTRiRDc4RDdmNTk0N0QxZUE0OUJCMiwNCiAgICAgICAgMHhBMzgyQTNBNjVjM0Y4ZWUyYjcyNkEyNTM1QjNjMzRBODlEOTA5NEQ0LA0KICAgICAgICAweEFCNzhjODc4MWZCNjRCZWQzN0IyNzRDNUVFNzU5ZUUzMzQ2NWYxZjMsDQogICAgICAgIDB4RTc0RjIwNjI2MTJFM2NBRThhOTNFMjRiMmYwRDNhMjEzMzM3Mzg4NCwNCiAgICAgICAgMHg1MDUxMjA5NTdBOTgwNjgyN0Y4RjExMUExMjM1NjFFODJDNDBiQzc4LA0KICAgICAgICAweDAwQTQ2OTIyQjFDNTRBZTZiNTgxOEM0OUI5N0UwM0VCNEJCMzUyZTEsDQogICAgICAgIDB4RTc2ZkU1MmEyNTFDOEYzYTVkY0Q2NTdFNDdBNkM4RDE2RmRmNGJGQQ0KICAgIF07DQoNCn0vLyBDcm93ZHNhbGVNaW50ZXI='