base 64 content
base64crowdsaleMinter6
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLy8gPT09PSBESVNDTEFJTUVSID09PT0NCi8vDQovLyBFVEhFUkVVTSBJUyBTVElMTCBBTiBFWFBFUkVNRU5UQUwgVEVDSE5PTE9HWS4NCi8vIEFMVEhPVUdIIFRISVMgU01BUlQgQ09OVFJBQ1QgV0FTIENSRUFURUQgV0lUSCBHUkVBVCBDQVJFIEFORCBJTiBUSEUgSE9QRSBPRiBCRUlORyBVU0VGVUwsIE5PIEdVQVJBTlRFRVMgT0YgRkxBV0xFU1MgT1BFUkFUSU9OIENBTiBCRSBHSVZFTi4NCi8vIElOIFBBUlRJQ1VMQVIgLSBTVUJUSUxFIEJVR1MsIEhBQ0tFUiBBVFRBQ0tTIE9SIE1BTEZVTkNUSU9OIE9GIFVOREVSTFlJTkcgVEVDSE5PTE9HWSBDQU4gQ0FVU0UgVU5JTlRFTlRJT05BTCBCRUhBVklPVVIuDQovLyBZT1UgQVJFIFNUUk9OR0xZIEVOQ09VUkFHRUQgVE8gU1RVRFkgVEhJUyBTTUFSVCBDT05UUkFDVCBDQVJFRlVMTFkgSU4gT1JERVIgVE8gVU5ERVJTVEFORCBQT1NTSUJMRSBFREdFIENBU0VTIEFORCBSSVNLUy4NCi8vIERPTidUIFVTRSBUSElTIFNNQVJUIENPTlRSQUNUIElGIFlPVSBIQVZFIFNVQlNUQU5USUFMIERPVUJUUyBPUiBJRiBZT1UgRE9OJ1QgS05PVyBXSEFUIFlPVSBBUkUgRE9JTkcuDQovLw0KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQ0KLy8gQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULA0KLy8gSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwNCi8vIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLA0KLy8gT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4NCi8vID09PT0NCi8vDQoNCi8vLyBAYXV0aG9yIFNhbnRpbWVudCBTYWdsDQovLy8gQHRpdGxlICBDcm93ZHNhbGVNaW50ZXINCg0KY29udHJhY3QgQmFzZSB7DQoNCiAgICBmdW5jdGlvbiBtYXgodWludCBhLCB1aW50IGIpIHJldHVybnMgKHVpbnQpIHsgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOyB9DQogICAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7IHJldHVybiBhIDw9IGIgPyBhIDogYjsgfQ0KDQogICAgbW9kaWZpZXIgb25seShhZGRyZXNzIGFsbG93ZWQpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gYWxsb3dlZCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQoNCiAgICAvLy9AcmV0dXJuIFRydWUgaWYgYF9hZGRyYCBpcyBhIGNvbnRyYWN0DQogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmIChfYWRkciA9PSAwKSByZXR1cm4gZmFsc2U7DQogICAgICAgIHVpbnQgc2l6ZTsNCiAgICAgICAgYXNzZW1ibHkgew0KICAgICAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKHNpemUgPiAwKTsNCiAgICB9DQoNCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgLy8gKiAgICAgICAgICByZWVudHJhbmN5IGhhbmRsaW5nICAgICAgICAgICAgICAgICAgKg0KICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KICAgIC8vQGRldiBwcmVkZWZpbmVkIGxvY2tzICh1cCB0byB1aW50IGJpdCBsZW5ndGgsIGkuZS4gMjU2IHBvc3NpYmxlKQ0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAwID0gMiAqKiAwOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAxID0gMiAqKiAxOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAyID0gMiAqKiAyOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAzID0gMiAqKiAzOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA0ID0gMiAqKiA0Ow0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA1ID0gMiAqKiA1Ow0KDQogICAgLy9wcmV2ZW50cyByZWVudHJhbmN5IGF0dGFjczogc3BlY2lmaWMgbG9ja3MNCiAgICB1aW50IHByaXZhdGUgYml0bG9ja3MgPSAwOw0KICAgIG1vZGlmaWVyIG5vUmVlbnRyYW5jeSh1aW50IG0pIHsNCiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOw0KICAgICAgICBpZiAoX2xvY2tzICYgbSA+IDApIHRocm93Ow0KICAgICAgICBiaXRsb2NrcyB8PSBtOw0KICAgICAgICBfOw0KICAgICAgICBiaXRsb2NrcyA9IF9sb2NrczsNCiAgICB9DQoNCiAgICBtb2RpZmllciBub0FueVJlZW50cmFuY3kgew0KICAgICAgICB2YXIgX2xvY2tzID0gYml0bG9ja3M7DQogICAgICAgIGlmIChfbG9ja3MgPiAwKSB0aHJvdzsNCiAgICAgICAgYml0bG9ja3MgPSB1aW50KC0xKTsNCiAgICAgICAgXzsNCiAgICAgICAgYml0bG9ja3MgPSBfbG9ja3M7DQogICAgfQ0KDQogICAgLy8vQGRldiBlbXB0eSBtYXJraW5nIG1vZGlmaWVyIHNpZ25hbGluZyB0byB1c2VyIG9mIHRoZSBtYXJrZWQgZnVuY3Rpb24gLCB0aGF0IGl0IGNhbiBjYXVzZSBhbiByZWVudHJhbnQgY2FsbC4NCiAgICAvLy8gICAgIGRldmVsb3BlciBzaG91bGQgbWFrZSB0aGUgY2FsbGVyIGZ1bmN0aW9uIHJlZW50cmFudC1zYWZlIGlmIGl0IHVzZSBhIHJlZW50cmFudCBmdW5jdGlvbi4NCiAgICBtb2RpZmllciByZWVudHJhbnQgeyBfOyB9DQoNCn0NCg0KY29udHJhY3QgTWludGFibGVUb2tlbiB7DQogICAgLy90YXJnZXQgdG9rZW4gY29udHJhY3QgaXMgcmVzcG9uc2libGUgdG8gYWNjZXB0IG9ubHkgYXV0aG9yaXplZCBtaW50IGNhbGxzLg0KICAgIGZ1bmN0aW9uIG1pbnQodWludCBhbW91bnQsIGFkZHJlc3MgYWNjb3VudCk7DQoNCiAgICAvL3N0YXJ0IHRoZSB0b2tlbiBvbiBtaW50aW5nIGZpbmlzaGVkLA0KICAgIGZ1bmN0aW9uIHN0YXJ0KCk7DQp9DQoNCmNvbnRyYWN0IE93bmVkIGlzIEJhc2Ugew0KDQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7DQoNCiAgICBmdW5jdGlvbiBPd25lZCgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBvbmx5KG93bmVyKSB7DQogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIG9ubHkobmV3T3duZXIpIHsNCiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsNCiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICB9DQoNCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOw0KDQp9DQoNCmNvbnRyYWN0IEJhbGFuY2VTdG9yYWdlIHsNCiAgICBmdW5jdGlvbiBiYWxhbmNlcyhhZGRyZXNzIGFjY291bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQgYmFsYW5jZSk7DQp9DQoNCmNvbnRyYWN0IEFkZHJlc3NMaXN0IHsNCiAgICBmdW5jdGlvbiBjb250YWlucyhhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsNCn0NCg0KY29udHJhY3QgTWluTWF4V2hpdGVMaXN0IHsNCiAgICBmdW5jdGlvbiBhbGxvd2VkKGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgLypmaW5uZXkqLywgdWludCAvKmZpbm5leSovICk7DQp9DQoNCmNvbnRyYWN0IFByZXNhbGVCb251c1ZvdGluZyB7DQogICAgZnVuY3Rpb24gcmF3Vm90ZXMoYWRkcmVzcyBhZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByYXdWb3RlKTsNCn0NCg0KY29udHJhY3QgQ3Jvd2RzYWxlTWludGVyIGlzIE93bmVkIHsNCg0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgVkVSU0lPTiA9ICIwLjIuMS1URVNULjEiOw0KDQogICAgLyogPT09PT09IGNvbmZpZ3VyYXRpb24gU1RBUlQgPT09PT09ICovDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQ09NTVVOSVRZX1NBTEVfU1RBUlQgPSAzOTY4MTkwOyAvKiBhcHByb3guIDAzLjA3LjIwMTcgMTU6MzkgKi8NCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUklPUklUWV9TQUxFX1NUQVJUICA9IDM5NjgzMTA7IC8qIGFwcHJveC4gMzAuMDcuMjAxNyAxNjowMCAqLw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBVQkxJQ19TQUxFX1NUQVJUICAgID0gMzk2ODQzMDsgLyogYXBwcm94LiAzMC4wNy4yMDE3IDE2OjMwICovDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFVCTElDX1NBTEVfRU5EICAgICAgPSAzOTY4NTUwOyAvKiBhcHByb3guIDMwLjA3LjIwMTcgMTc6MDAgKi8NCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBXSVRIRFJBV0FMX0VORCAgICAgICA9IDM5Njg2NzA7IC8qIGFwcHJveC4gMzAuMDcuMjAxNyAxNzoxMCAqLw0KDQogICAgYWRkcmVzcyBwdWJsaWMgVEVBTV9HUk9VUF9XQUxMRVQgICAgICAgICAgID0gMHgwMDhjZEM5Yjg5QUQ2NzdDRWY3RjJDMDU1ZWZDOTdkMzYwNmE1MEJkOw0KICAgIGFkZHJlc3MgcHVibGljIEFEVklTRVJTX0FORF9GUklFTkRTX1dBTExFVCA9IDB4MDBlQ2Y5MmZBMzY3ODY3OGExQjgyODk5ZGExMzA3YTAwODNiNjM3OTsNCg0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRFQU1fQk9OVVNfUEVSX0NFTlQgICAgICAgICAgICA9IDE4Ow0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEFEVklTT1JTX0FORF9QQVJUTkVSU19QRVJfQ0VOVCA9IDEwOw0KDQogICAgTWludGFibGVUb2tlbiAgICAgIHB1YmxpYyBUT0tFTiAgICAgICAgICAgICAgICAgICAgPSBNaW50YWJsZVRva2VuKDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApOw0KDQogICAgQWRkcmVzc0xpc3QgICAgICAgIHB1YmxpYyBQUklPUklUWV9BRERSRVNTX0xJU1QgICAgPSBBZGRyZXNzTGlzdCgweDQ2MzYzNWVGZDIyNTU4YzY0RWZhNjIyN0E0NTY0OWVlRGMwZTQ4ODgpOw0KICAgIE1pbk1heFdoaXRlTGlzdCAgICBwdWJsaWMgQ09NTVVOSVRZX0FMTE9XQU5DRV9MSVNUID0gTWluTWF4V2hpdGVMaXN0KDB4MzM3NUQzZDlkZjhDNjdiM0Q3RUJjRTIyMGMzRERhNEJFMDNkQ0UzMSk7DQogICAgQmFsYW5jZVN0b3JhZ2UgICAgIHB1YmxpYyBQUkVTQUxFX0JBTEFOQ0VTICAgICAgICAgPSBCYWxhbmNlU3RvcmFnZSgweDRGZDk5N0VkN2MxMERiRDA0ZTk1ZDM3MzBjZDc3RDc5NTEzMDc2RjIpOw0KICAgIFByZXNhbGVCb251c1ZvdGluZyBwdWJsaWMgUFJFU0FMRV9CT05VU19WT1RJTkcgICAgID0gUHJlc2FsZUJvbnVzVm90aW5nKDB4MjgzYTk3QWY4NjcxNjUxNjlBRUNlMGIyRTk2M2I5ZjBGQzdFNWI4Yyk7DQoNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUF9FVEggPSA1Ow0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRV9FVEggPSAzOw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRV9FVEggPSA1Ow0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9BQ0NFUFRFRF9BTU9VTlRfRklOTkVZID0gNTAwOw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOX1BFUl9FVEggPSAxMDAwOw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBSRV9TQUxFX0JPTlVTX1BFUl9DRU5UID0gNTQ7DQoNCiAgICAvL2NvbnN0cnVjdG9yDQogICAgZnVuY3Rpb24gQ3Jvd2RzYWxlTWludGVyKCkgew0KICAgICAgICAvL2NoZWNrIGNvbmZpZ3VyYXRpb24gaWYgc29tZXRoaW5nIGluIHNldHVwIGlzIGxvb2tpbmcgd2VpcmQNCiAgICAgICAgaWYgKA0KICAgICAgICAgICAgVE9LRU5fUEVSX0VUSCA9PSAwDQogICAgICAgICAgICB8fCBURUFNX0JPTlVTX1BFUl9DRU5UICsgQURWSVNPUlNfQU5EX1BBUlRORVJTX1BFUl9DRU5UID49MTAwDQogICAgICAgICAgICB8fCBNSU5fQUNDRVBURURfQU1PVU5UX0ZJTk5FWSA8IDENCiAgICAgICAgICAgIHx8IG93bmVyID09IDB4MA0KICAgICAgICAgICAgfHwgYWRkcmVzcyhDT01NVU5JVFlfQUxMT1dBTkNFX0xJU1QpID09IDB4MA0KICAgICAgICAgICAgfHwgYWRkcmVzcyhQUklPUklUWV9BRERSRVNTX0xJU1QpID09IDB4MA0KICAgICAgICAgICAgfHwgYWRkcmVzcyhQUkVTQUxFX0JPTlVTX1ZPVElORykgPT0gMHgwDQogICAgICAgICAgICB8fCBhZGRyZXNzKFBSRVNBTEVfQkFMQU5DRVMpID09IDB4MA0KICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1NBTEVfU1RBUlQgPT0gMA0KICAgICAgICAgICAgfHwgUFJJT1JJVFlfU0FMRV9TVEFSVCA9PSAwDQogICAgICAgICAgICB8fCBQVUJMSUNfU0FMRV9TVEFSVCA9PSAwDQogICAgICAgICAgICB8fCBQVUJMSUNfU0FMRV9FTkQgPT0gMA0KICAgICAgICAgICAgfHwgV0lUSERSQVdBTF9FTkQgPT0gMA0KICAgICAgICAgICAgfHwgTUlOX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFID09IDANCiAgICAgICAgICAgIHx8IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSA9PSAwDQogICAgICAgICAgICB8fCBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUCA9PSAwDQogICAgICAgICAgICB8fCBDT01NVU5JVFlfU0FMRV9TVEFSVCA8PSBibG9jay5udW1iZXINCiAgICAgICAgICAgIHx8IENPTU1VTklUWV9TQUxFX1NUQVJUID49IFBSSU9SSVRZX1NBTEVfU1RBUlQNCiAgICAgICAgICAgIHx8IFBSSU9SSVRZX1NBTEVfU1RBUlQgPj0gUFVCTElDX1NBTEVfU1RBUlQNCiAgICAgICAgICAgIHx8IFBVQkxJQ19TQUxFX1NUQVJUID49IFBVQkxJQ19TQUxFX0VORA0KICAgICAgICAgICAgfHwgUFVCTElDX1NBTEVfRU5EID49IFdJVEhEUkFXQUxfRU5EDQogICAgICAgICAgICB8fCBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUCA+IE1BWF9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRQ0KICAgICAgICAgICAgfHwgTUlOX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFID4gTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFICkNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgLyogPT09PT09IGNvbmZpZ3VyYXRpb24gRU5EID09PT09PSAqLw0KDQogICAgLyogPT09PT09IHB1YmxpYyBzdGF0ZXMgU1RBUlQ9PT09PT0gKi8NCg0KICAgIGJvb2wgcHVibGljIGlzQWJvcnRlZCA9IGZhbHNlOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VzOw0KICAgIGJvb2wgcHVibGljIFRPS0VOX1NUQVJURUQgPSBmYWxzZTsNCiAgICB1aW50IHB1YmxpYyB0b3RhbF9yZWNlaXZlZF9hbW91bnQ7DQogICAgYWRkcmVzc1tdIHB1YmxpYyBpbnZlc3RvcnM7DQoNCiAgICAvL2Rpc3BsYXlzIG51bWJlciBvZiB1bmlxIGludmVzdG9ycw0KICAgIGZ1bmN0aW9uIGludmVzdG9yc0NvdW50KCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyh1aW50KSB7IHJldHVybiBpbnZlc3RvcnMubGVuZ3RoOyB9DQoNCiAgICAvL2Rpc3BsYXlzIHJlY2VpdmVkIGFtb3VudCBpbiBldGggdXB0byBub3cNCiAgICBmdW5jdGlvbiBUT1RBTF9SRUNFSVZFRF9FVEgoKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50KSB7IHJldHVybiB0b3RhbF9yZWNlaXZlZF9hbW91bnQgLyAxIGV0aGVyOyB9DQoNCiAgICAvL2Rpc3BsYXlzIGN1cnJlbnQgY29udHJhY3Qgc3RhdGUgaW4gaHVtYW4gcmVhZGFibGUgZm9ybQ0KICAgIGZ1bmN0aW9uIHN0YXRlKCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAoc3RyaW5nKSB7IHJldHVybiBzdGF0ZU5hbWVzWyB1aW50KGN1cnJlbnRTdGF0ZSgpKSBdOyB9DQoNCiAgICBmdW5jdGlvbiBzYW5fd2hpdGVsaXN0KGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCwgdWludCkgeyByZXR1cm4gQ09NTVVOSVRZX0FMTE9XQU5DRV9MSVNULmFsbG93ZWQoYWRkcik7IH0NCiAgICBmdW5jdGlvbiBjZmlfd2hpdGVsaXN0KGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCkgeyByZXR1cm4gUFJJT1JJVFlfQUREUkVTU19MSVNULmNvbnRhaW5zKGFkZHIpOyB9DQoNCiAgICAvKiA9PT09PT0gcHVibGljIHN0YXRlcyBFTkQgPT09PT09ICovDQoNCiAgICBzdHJpbmdbXSBwcml2YXRlIHN0YXRlTmFtZXMgPSBbIkJFRk9SRV9TVEFSVCIsICJDT01NVU5JVFlfU0FMRSIsICJQUklPUklUWV9TQUxFIiwgIlBSSU9SSVRZX1NBTEVfRklOSVNIRUQiLCAiUFVCTElDX1NBTEUiLCAiQk9OVVNfTUlOVElORyIsICJXSVRIRFJBV0FMX1JVTk5JTkciLCAiUkVGVU5EX1JVTk5JTkciLCAiQ0xPU0VEIiBdOw0KICAgIGVudW0gU3RhdGUgeyBCRUZPUkVfU1RBUlQsIENPTU1VTklUWV9TQUxFLCBQUklPUklUWV9TQUxFLCBQUklPUklUWV9TQUxFX0ZJTklTSEVELCBQVUJMSUNfU0FMRSwgQk9OVVNfTUlOVElORywgV0lUSERSQVdBTF9SVU5OSU5HLCBSRUZVTkRfUlVOTklORywgQ0xPU0VEIH0NCg0KICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUCA9IENPTU1VTklUWV9QTFVTX1BSSU9SSVRZX1NBTEVfQ0FQX0VUSCAqIDEgZXRoZXI7DQogICAgdWludCBwcml2YXRlIGNvbnN0YW50IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSA9IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRV9FVEggKiAxIGV0aGVyOw0KICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUgPSBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkVfRVRIICogMSBldGhlcjsNCiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgTUlOX0FDQ0VQVEVEX0FNT1VOVCA9IE1JTl9BQ0NFUFRFRF9BTU9VTlRfRklOTkVZICogMSBmaW5uZXk7DQogICAgYm9vbCBwcml2YXRlIGFsbEJvbnVzZXNBcmVNaW50ZWQgPSBmYWxzZTsNCg0KICAgIC8vDQogICAgLy8gPT09PT09PSBpbnRlcmZhY2UgbWV0aG9kcyA9PT09PT09DQogICAgLy8NCg0KICAgIC8vYWNjZXB0IHBheW1lbnRzIGhlcmUNCiAgICBmdW5jdGlvbiAoKQ0KICAgIHBheWFibGUNCiAgICBub0FueVJlZW50cmFuY3kNCiAgICB7DQogICAgICAgIFN0YXRlIHN0YXRlID0gY3VycmVudFN0YXRlKCk7DQogICAgICAgIHVpbnQgYW1vdW50X2FsbG93ZWQ7DQogICAgICAgIGlmIChzdGF0ZSA9PSBTdGF0ZS5DT01NVU5JVFlfU0FMRSkgew0KICAgICAgICAgICAgdmFyIChtaW5fZmlubmV5LCBtYXhfZmlubmV5KSA9IENPTU1VTklUWV9BTExPV0FOQ0VfTElTVC5hbGxvd2VkKG1zZy5zZW5kZXIpOw0KICAgICAgICAgICAgdmFyIChtaW4sIG1heCkgPSAobWluX2Zpbm5leSAqIDEgZmlubmV5LCBtYXhfZmlubmV5ICogMSBmaW5uZXkpOw0KICAgICAgICAgICAgdmFyIHNlbmRlcl9iYWxhbmNlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07DQogICAgICAgICAgICBhc3NlcnQgKHNlbmRlcl9iYWxhbmNlIDw9IG1heCk7IC8vc2FuaXR5IGNoZWNrOiBzaG91bGQgYmUgYWx3YXlzIHRydWU7DQogICAgICAgICAgICBhc3NlcnQgKG1zZy52YWx1ZSA+PSBtaW4pOyAgICAgIC8vcmVqZWN0IHBheW1lbnRzIGxlc3MgdGhhbiBtaW5pbXVtDQogICAgICAgICAgICBhbW91bnRfYWxsb3dlZCA9IG1heCAtIHNlbmRlcl9iYWxhbmNlOw0KICAgICAgICAgICAgX3JlY2VpdmVGdW5kc1VwVG8oYW1vdW50X2FsbG93ZWQpOw0KICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IFN0YXRlLlBSSU9SSVRZX1NBTEUpIHsNCiAgICAgICAgICAgIGFzc2VydCAoUFJJT1JJVFlfQUREUkVTU19MSVNULmNvbnRhaW5zKG1zZy5zZW5kZXIpKTsNCiAgICAgICAgICAgIGFtb3VudF9hbGxvd2VkID0gQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVAgLSB0b3RhbF9yZWNlaXZlZF9hbW91bnQ7DQogICAgICAgICAgICBfcmVjZWl2ZUZ1bmRzVXBUbyhhbW91bnRfYWxsb3dlZCk7DQogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gU3RhdGUuUFVCTElDX1NBTEUpIHsNCiAgICAgICAgICAgIGFtb3VudF9hbGxvd2VkID0gTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFIC0gdG90YWxfcmVjZWl2ZWRfYW1vdW50Ow0KICAgICAgICAgICAgX3JlY2VpdmVGdW5kc1VwVG8oYW1vdW50X2FsbG93ZWQpOw0KICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IFN0YXRlLlJFRlVORF9SVU5OSU5HKSB7DQogICAgICAgICAgICAvLyBhbnkgZW50cmluZyBjYWxsIGluIFJlZnVuZCBQaGFzZSB3aWxsIGNhdXNlIGZ1bGwgcmVmdW5kDQogICAgICAgICAgICBfc2VuZFJlZnVuZCgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICB9DQoNCg0KICAgIGZ1bmN0aW9uIHJlZnVuZCgpIGV4dGVybmFsDQogICAgaW5TdGF0ZShTdGF0ZS5SRUZVTkRfUlVOTklORykNCiAgICBub0FueVJlZW50cmFuY3kNCiAgICB7DQogICAgICAgIF9zZW5kUmVmdW5kKCk7DQogICAgfQ0KDQoNCiAgICBmdW5jdGlvbiB3aXRoZHJhd0Z1bmRzQW5kU3RhcnRUb2tlbigpIGV4dGVybmFsDQogICAgaW5TdGF0ZShTdGF0ZS5XSVRIRFJBV0FMX1JVTk5JTkcpDQogICAgbm9BbnlSZWVudHJhbmN5DQogICAgb25seShvd25lcikNCiAgICB7DQogICAgICAgIC8vIHRyYW5zZmVyIGZ1bmRzIHRvIG93bmVyDQogICAgICAgIGlmICghb3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsNCg0KICAgICAgICAvL25vdGlmeSB0b2tlbiBjb250cmFjdCB0byBzdGFydA0KICAgICAgICBpZiAoVE9LRU4uY2FsbChieXRlczQoc2hhMygic3RhcnQoKSIpKSkpIHsNCiAgICAgICAgICAgIFRPS0VOX1NUQVJURUQgPSB0cnVlOw0KICAgICAgICAgICAgVG9rZW5TdGFydGVkKFRPS0VOKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGV2ZW50IFRva2VuU3RhcnRlZChhZGRyZXNzIHRva2VuQWRkcik7DQoNCiAgICAvL3RoZXJlIGFyZSBhcm91bmQgNDAgYWRkcmVzc2VzIGluIFBSRVNBTEVfQUREUkVTU0VTIGxpc3QuIEV2ZXJ5dGhpbmcgZml0cyBpbnRvIHNpbmdsZSBUeC4NCiAgICBmdW5jdGlvbiBtaW50QWxsQm9udXNlcygpIGV4dGVybmFsDQogICAgaW5TdGF0ZShTdGF0ZS5CT05VU19NSU5USU5HKQ0KICAgIG5vQW55UmVlbnRyYW5jeQ0KICAgIHsNCiAgICAgICAgYXNzZXJ0KCFhbGxCb251c2VzQXJlTWludGVkKTsNCiAgICAgICAgYWxsQm9udXNlc0FyZU1pbnRlZCA9IHRydWU7DQoNCiAgICAgICAgdWludCBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVCA9IFRFQU1fQk9OVVNfUEVSX0NFTlQgKyBBRFZJU09SU19BTkRfUEFSVE5FUlNfUEVSX0NFTlQ7DQoNCiAgICAgICAgdWludCB0b3RhbF9wcmVzYWxlX2Ftb3VudF93aXRoX2JvbnVzID0gbWludFByZXNhbGVCb251c2VzKCk7DQogICAgICAgIHVpbnQgdG90YWxfY29sbGVjdGVkX2Ftb3VudCA9IHRvdGFsX3JlY2VpdmVkX2Ftb3VudCArIHRvdGFsX3ByZXNhbGVfYW1vdW50X3dpdGhfYm9udXM7DQogICAgICAgIHVpbnQgZXh0cmFfYW1vdW50ID0gdG90YWxfY29sbGVjdGVkX2Ftb3VudCAqIFRFQU1fQU5EX1BBUlRORVJTX1BFUl9DRU5UIC8gKDEwMCAtIFRFQU1fQU5EX1BBUlRORVJTX1BFUl9DRU5UKTsNCiAgICAgICAgdWludCBleHRyYV90ZWFtX2Ftb3VudCA9IGV4dHJhX2Ftb3VudCAqIFRFQU1fQk9OVVNfUEVSX0NFTlQgLyBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVDsNCiAgICAgICAgdWludCBleHRyYV9wYXJ0bmVyc19hbW91bnQgPSBleHRyYV9hbW91bnQgKiBBRFZJU09SU19BTkRfUEFSVE5FUlNfUEVSX0NFTlQgLyBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVDsNCg0KICAgICAgICAvL2JlYXV0aWZ5IHRvdGFsIHN1cHBseTogcm91bmQgZG93biB0byBmdWxsIGV0aC4NCiAgICAgICAgdWludCB0b3RhbF90b19taW50ID0gdG90YWxfY29sbGVjdGVkX2Ftb3VudCArIGV4dHJhX2Ftb3VudDsNCiAgICAgICAgdWludCByb3VuZF9yZW1haW5kZXIgPSB0b3RhbF90b19taW50IC0gKHRvdGFsX3RvX21pbnQgLyAxIGV0aGVyICogMSBldGhlcik7DQogICAgICAgIGV4dHJhX3RlYW1fYW1vdW50IC09IHJvdW5kX3JlbWFpbmRlcjsgLy90aGlzIHdpbGwgcmVkdWNlIHRvdGFsX3N1cHBseSB0byByb3VuZGVkIHZhbHVlDQoNCiAgICAgICAgLy9taW50IGdyb3VwIGJvbnVzZXMNCiAgICAgICAgX21pbnQoZXh0cmFfdGVhbV9hbW91bnQgLCBURUFNX0dST1VQX1dBTExFVCk7DQogICAgICAgIF9taW50KGV4dHJhX3BhcnRuZXJzX2Ftb3VudCwgQURWSVNFUlNfQU5EX0ZSSUVORFNfV0FMTEVUKTsNCg0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG1pbnRQcmVzYWxlQm9udXNlcygpIGludGVybmFsIHJldHVybnModWludCBhbW91bnQpIHsNCiAgICAgICAgdWludCB0b3RhbF9wcmVzYWxlX2Ftb3VudF93aXRoX2JvbnVzID0gMDsNCiAgICAgICAgLy9taW50IHByZXNhbGUgYm9udXNlcw0KICAgICAgICBmb3IodWludCBpPTA7IGkgPCBQUkVTQUxFX0FERFJFU1NFUy5sZW5ndGg7ICsraSkgew0KICAgICAgICAgICAgYWRkcmVzcyBhZGRyID0gUFJFU0FMRV9BRERSRVNTRVNbaV07DQogICAgICAgICAgICB2YXIgYW1vdW50X3dpdGhfYm9udXMgPSBwcmVzYWxlVG9rZW5BbW91bnQoYWRkcik7DQogICAgICAgICAgICBpZiAoYW1vdW50X3dpdGhfYm9udXM+MCkgew0KICAgICAgICAgICAgICAgIF9taW50KGFtb3VudF93aXRoX2JvbnVzLCBhZGRyKTsNCiAgICAgICAgICAgICAgICB0b3RhbF9wcmVzYWxlX2Ftb3VudF93aXRoX2JvbnVzICs9IGFtb3VudF93aXRoX2JvbnVzOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ly9mb3INCiAgICAgICAgcmV0dXJuIHRvdGFsX3ByZXNhbGVfYW1vdW50X3dpdGhfYm9udXM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcHJlc2FsZVRva2VuQW1vdW50KGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCl7DQogICAgICAgIHVpbnQgcHJlc2FsZV9iYWxhbmNlID0gUFJFU0FMRV9CQUxBTkNFUy5iYWxhbmNlcyhhZGRyKTsNCiAgICAgICAgaWYgKHByZXNhbGVfYmFsYW5jZSA+IDApIHsNCiAgICAgICAgICAgIC8vIHRoaXMgY2FsY3VsYXRpb24gaXMgYWJvdXQgd2FpdmVkIHByZS1zYWxlIGJvbnVzLg0KICAgICAgICAgICAgLy8gcmF3Vm90ZSBjb250YWlucyBhIHZhbHVlIFswLi4xIGV0aGVyXS4NCiAgICAgICAgICAgIC8vICAgICAwIGV0aGVyICAgIC0gbWVhbnMgImRlZmF1bHQgdmFsdWUiIG9yICJubyB2b3RlIiA6IDEwMCUgYm9udXMgc2F2ZWQNCiAgICAgICAgICAgIC8vICAgICAxIGV0aGVyICAgIC0gbWVhbnMgInZvdGUgMTAwJSIgOiAxMDAlIGJvbnVzIHNhdmVkDQogICAgICAgICAgICAvLyAgICA8PTEwIGZpbm5leSAtIHNwZWNpYWwgdmFsdWUgInZvdGUgMCUiIDogbm8gYm9udXMgYXQgYWxsICgxMDAlIGJvbnVzIHdhaXZlZCkuDQogICAgICAgICAgICAvLyAgb3RoZXIgdmFsdWUgLSAiUFJFX1NBTEVfQk9OVVNfUEVSX0NFTlQgKiByYXdWb3RlIC8gMSBldGhlciIgaXMgYW4gZWZmZWN0aXZlIGJvbnVzIHBlciBjZW50IGZvciBwYXJ0aWN1bGFyIHByZXNhbGUgbWVtYmVyLg0KICAgICAgICAgICAgLy8NCiAgICAgICAgICAgIHZhciByYXdWb3RlID0gUFJFU0FMRV9CT05VU19WT1RJTkcucmF3Vm90ZXMoYWRkcik7DQogICAgICAgICAgICBpZiAocmF3Vm90ZSA9PSAwKSAgICAgICAgICAgICAgcmF3Vm90ZSA9IDEgZXRoZXI7IC8vc3BlY2lhbCBjYXNlICJubyB2b3RlIiAoZGVmYXVsdCB2YWx1ZSkgPT0+ICgxIGV0aGVyIGlzIDEwMCUpDQogICAgICAgICAgICBlbHNlIGlmIChyYXdWb3RlIDw9IDEwIGZpbm5leSkgcmF3Vm90ZSA9IDA7ICAgICAgIC8vc3BlY2lhbCBjYXNlICIwJSIgKG5vIGJvbnVzKSAgICAgICAgICAgPT0+ICgwIGV0aGVyIGlzICAgMCUpDQogICAgICAgICAgICBlbHNlIGlmIChyYXdWb3RlID4gMSBldGhlcikgICAgcmF3Vm90ZSA9IDEgZXRoZXI7IC8vbWF4IGJvbnVzIGlzIDEwMCUgKHNob3VsZCBub3Qgb2NjdXIpDQogICAgICAgICAgICB2YXIgcHJlc2FsZV9ib251cyA9IHByZXNhbGVfYmFsYW5jZSAqIFBSRV9TQUxFX0JPTlVTX1BFUl9DRU5UICogcmF3Vm90ZSAvIDEgZXRoZXIgLyAxMDA7DQogICAgICAgICAgICByZXR1cm4gcHJlc2FsZV9iYWxhbmNlICsgcHJlc2FsZV9ib251czsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXR0YWNoVG9Ub2tlbihNaW50YWJsZVRva2VuIHRva2VuQWRkcikgZXh0ZXJuYWwNCiAgICBpblN0YXRlKFN0YXRlLkJFRk9SRV9TVEFSVCkNCiAgICBvbmx5KG93bmVyKQ0KICAgIHsNCiAgICAgICAgVE9LRU4gPSB0b2tlbkFkZHI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWJvcnQoKSBleHRlcm5hbA0KICAgIGluU3RhdGVCZWZvcmUoU3RhdGUuUkVGVU5EX1JVTk5JTkcpDQogICAgb25seShvd25lcikNCiAgICB7DQogICAgICAgIGlzQWJvcnRlZCA9IHRydWU7DQogICAgfQ0KDQogICAgLy8NCiAgICAvLyA9PT09PT09IGltcGxlbWVudGF0aW9uIG1ldGhvZHMgPT09PT09PQ0KICAgIC8vDQoNCiAgICBmdW5jdGlvbiBfc2VuZFJlZnVuZCgpIHByaXZhdGUNCiAgICB0b2tlbkhvbGRlcnNPbmx5DQogICAgew0KICAgICAgICAvLyBsb2FkIGJhbGFuY2UgdG8gcmVmdW5kIHBsdXMgYW1vdW50IGN1cnJlbnRseSBzZW50DQogICAgICAgIHZhciBhbW91bnRfdG9fcmVmdW5kID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0gKyBtc2cudmFsdWU7DQogICAgICAgIC8vIHJlc2V0IGJhbGFuY2UNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOw0KICAgICAgICAvLyBzZW5kIHJlZnVuZCBiYWNrIHRvIHNlbmRlcg0KICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChhbW91bnRfdG9fcmVmdW5kKSkgdGhyb3c7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gX3JlY2VpdmVGdW5kc1VwVG8odWludCBhbW91bnQpIHByaXZhdGUNCiAgICBub3RUb29TbWFsbEFtb3VudE9ubHkNCiAgICB7DQogICAgICAgIHJlcXVpcmUgKGFtb3VudCA+IDApOw0KICAgICAgICBpZiAobXNnLnZhbHVlID4gYW1vdW50KSB7DQogICAgICAgICAgICAvLyBhY2NlcHQgYW1vdW50IG9ubHkgYW5kIHJldHVybiBjaGFuZ2UNCiAgICAgICAgICAgIHZhciBjaGFuZ2VfdG9fcmV0dXJuID0gbXNnLnZhbHVlIC0gYW1vdW50Ow0KICAgICAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoY2hhbmdlX3RvX3JldHVybikpIHRocm93Ow0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gYWNjZXB0IGZ1bGwgYW1vdW50DQogICAgICAgICAgICBhbW91bnQgPSBtc2cudmFsdWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID09IDApIGludmVzdG9ycy5wdXNoKG1zZy5zZW5kZXIpOw0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBhbW91bnQ7DQogICAgICAgIHRvdGFsX3JlY2VpdmVkX2Ftb3VudCArPSBhbW91bnQ7DQogICAgICAgIF9taW50KGFtb3VudCxtc2cuc2VuZGVyKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfbWludCh1aW50IGFtb3VudCwgYWRkcmVzcyBhY2NvdW50KSBwcml2YXRlIHsNCiAgICAgICAgTWludGFibGVUb2tlbihUT0tFTikubWludChhbW91bnQgKiBUT0tFTl9QRVJfRVRILCBhY2NvdW50KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjdXJyZW50U3RhdGUoKSBwcml2YXRlIGNvbnN0YW50DQogICAgcmV0dXJucyAoU3RhdGUpDQogICAgew0KICAgICAgICBpZiAoaXNBYm9ydGVkKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlID4gMA0KICAgICAgICAgICAgICAgICAgID8gU3RhdGUuUkVGVU5EX1JVTk5JTkcNCiAgICAgICAgICAgICAgICAgICA6IFN0YXRlLkNMT1NFRDsNCiAgICAgICAgfSBlbHNlIGlmIChibG9jay5udW1iZXIgPCBDT01NVU5JVFlfU0FMRV9TVEFSVCB8fCBhZGRyZXNzKFRPS0VOKSA9PSAweDApIHsNCiAgICAgICAgICAgICByZXR1cm4gU3RhdGUuQkVGT1JFX1NUQVJUOw0KICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8IFBSSU9SSVRZX1NBTEVfU1RBUlQpIHsNCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5DT01NVU5JVFlfU0FMRTsNCiAgICAgICAgfSBlbHNlIGlmIChibG9jay5udW1iZXIgPCBQVUJMSUNfU0FMRV9TVEFSVCkgew0KICAgICAgICAgICAgcmV0dXJuIHRvdGFsX3JlY2VpdmVkX2Ftb3VudCA8IENPTU1VTklUWV9QTFVTX1BSSU9SSVRZX1NBTEVfQ0FQDQogICAgICAgICAgICAgICAgPyBTdGF0ZS5QUklPUklUWV9TQUxFDQogICAgICAgICAgICAgICAgOiBTdGF0ZS5QUklPUklUWV9TQUxFX0ZJTklTSEVEOw0KICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8PSBQVUJMSUNfU0FMRV9FTkQgJiYgdG90YWxfcmVjZWl2ZWRfYW1vdW50IDwgTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFKSB7DQogICAgICAgICAgICByZXR1cm4gU3RhdGUuUFVCTElDX1NBTEU7DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5iYWxhbmNlID09IDApIHsNCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5DTE9TRUQ7DQogICAgICAgIH0gZWxzZSBpZiAoYmxvY2subnVtYmVyIDw9IFdJVEhEUkFXQUxfRU5EICYmIHRvdGFsX3JlY2VpdmVkX2Ftb3VudCA+PSBNSU5fVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUpIHsNCiAgICAgICAgICAgIHJldHVybiBhbGxCb251c2VzQXJlTWludGVkDQogICAgICAgICAgICAgICAgPyBTdGF0ZS5XSVRIRFJBV0FMX1JVTk5JTkcNCiAgICAgICAgICAgICAgICA6IFN0YXRlLkJPTlVTX01JTlRJTkc7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gU3RhdGUuUkVGVU5EX1JVTk5JTkc7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLw0KICAgIC8vID09PT09PT09PT09PSBtb2RpZmllcnMgPT09PT09PT09PT09DQogICAgLy8NCg0KICAgIC8vZmFpbHMgaWYgc3RhdGUgZG9zbid0IG1hdGNoDQogICAgbW9kaWZpZXIgaW5TdGF0ZShTdGF0ZSBzdGF0ZSkgew0KICAgICAgICBpZiAoc3RhdGUgIT0gY3VycmVudFN0YXRlKCkpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vZmFpbHMgaWYgdGhlIGN1cnJlbnQgc3RhdGUgaXMgbm90IGJlZm9yZSB0aGFuIHRoZSBnaXZlbiBvbmUuDQogICAgbW9kaWZpZXIgaW5TdGF0ZUJlZm9yZShTdGF0ZSBzdGF0ZSkgew0KICAgICAgICBpZiAoY3VycmVudFN0YXRlKCkgPj0gc3RhdGUpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vYWNjZXB0cyBjYWxscyBmcm9tIHRva2VuIGhvbGRlcnMgb25seQ0KICAgIG1vZGlmaWVyIHRva2VuSG9sZGVyc09ubHkoKXsNCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID09IDApIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KDQogICAgLy8gZG9uYHQgYWNjZXB0IHRyYW5zYWN0aW9ucyB3aXRoIHZhbHVlIGxlc3MgdGhhbiBhbGxvd2VkIG1pbmltdW0NCiAgICBtb2RpZmllciBub3RUb29TbWFsbEFtb3VudE9ubHkoKXsNCiAgICAgICAgaWYgKG1zZy52YWx1ZSA8IE1JTl9BQ0NFUFRFRF9BTU9VTlQpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vDQogICAgLy8gPT09PT09PT09PT09IERBVEEgPT09PT09PT09PT09DQogICAgLy8NCg0KICAgIGFkZHJlc3NbXSBQUkVTQUxFX0FERFJFU1NFUyA9IFsNCiAgICAgICAgMHhGNTVERmQyQjAyQ2YzMjgyNjgwQzk0QkQwMUU5RGEwNDQwNDRFNkEyLA0KICAgICAgICAweDBENDBCNTM4Mjg5NDhiMzQwNjczNjc0QWU2NUVlN2Y1RDg0ODhlMzMsDQogICAgICAgIDB4MGVhNjkwZDQ2NmQ2YmJkMThGMTI0RTIwNEVBNDg2YTRCZjkzNGNiQSwNCiAgICAgICAgMHg2ZDI1QjlmNDBiOTJDY0YxNTgyNTA2MjVBMTUyNTc0NjAzNDY1MTkyLA0KICAgICAgICAweDQ4MURhMEYxZTg5YzIwNjcxMkJDZUE0ZjdENkU2MGQ3YjQyZjZDNkMsDQogICAgICAgIDB4NDE2RURhNUQ2RWQyOUNBYzNlNkQ5N0MxMDJkNjFCQzU3OEM1ZEI4NywNCiAgICAgICAgMHhENzhBYzZGRmM5MEUwODRGNWZENTYzNTYzQ2M5ZkQzM2VFMzAzZjE4LA0KICAgICAgICAweGU2NzE0YWI1MjNhY0VjZjliODVkODgwNDkyQTJBY0RCZTQxODQ4OTIsDQogICAgICAgIDB4Mjg1QTljQTVmRTllZTg1NDQ1NzAxNmE3YTVkM0EzQkI5NTUzODA5MywNCiAgICAgICAgMHg2MDBjYTYzNzJmMzEyQjA4MTIwNUIyQzNkQTcyNTE3YTYwM2ExNUNjLA0KICAgICAgICAweDJiOGQ1QzkyMDlmQkQ1MDBGZDgxN0Q5NjA4MzBBQzY3MThiODgxMTIsDQogICAgICAgIDB4NEIxNURkMjNFNWY5MDYyZTRGQjNhOUI3REVDRjY1M0MwMjE1ZTU2MCwNCiAgICAgICAgMHhENjc0NDllNkFCMjNjMWY0NmRlYTc3ZDNmNUU1RDQ3RmYzM0RjOWE5LA0KICAgICAgICAweGQwQURhRDdlZDgxQWZEYTAzOTk2OTU2NkNlYjg0MjNFMGFiMTRkOTAsDQogICAgICAgIDB4MjQ1ZjI3Nzk2YTQ0ZDdFM0QzMDY1NGVENjI4NTBmZjA5RUU4NTY1NiwNCiAgICAgICAgMHg2MzlENmVDMmNlZjRkNmY3MTMwYjQwMTMyQjNCNkY1YjY2N2U1MTA1LA0KICAgICAgICAweDVlOWE2OUI4NjU2OTE0OTY1ZDY5ZDhkYTQ5YzM3MDlGMGJGMkI1RWYsDQogICAgICAgIDB4MDgzMmMzQjgwMTMxOWI2MmFCMUQzNTM1NjE1ZDFmZTlhRmMzMzk3QSwNCiAgICAgICAgMHhmNkRkNjMxMjc5Mzc3MjA1ODE4QzNhNjcyNUVlRUZCOUQwRjZiOUYzLA0KICAgICAgICAweDQ3Njk2MDU0ZTcxZTRjM2Y4OTkxMTk2MDFhMjU1YTcwNjVDMzA4N0IsDQogICAgICAgIDB4ZjEwN2JFNmM2ODMzZjYxQTI0YzY0RDYzYzhBN2ZjRDc4NEFiZmYwNiwNCiAgICAgICAgMHgwNTZmMDcyQmQyMjQwMzE1YjcwOERCQ2JEREU4MGQ0MDBmMDM5NGExLA0KICAgICAgICAweDllNUJhZUMyNDREOGNDRDQ5NDc3MDM3RTI4ZWQ3MDU4NEVlQUQ5NTYsDQogICAgICAgIDB4NDBBMGIyYzFCNEUzMEYyN2UyMURGOTRlNzM0NjcxODU2YjQ4NTk2NiwNCiAgICAgICAgMHg4NGYwNjIwQTU0N2E0RDE0QTc5ODc3NzBjNEY1QzI1ZDQ4OGQ2MzM1LA0KICAgICAgICAweDAzNkFjMTFjMTYxQzA5ZDk0Y0EzOUY3QjI0QzFiQzgyMDQ2YzMzMkIsDQogICAgICAgIDB4MjkxMkExOEM5MDJkRTZmOTUzMjFENmQ2MzA1RDdCODBFZWM0QzA1NSwNCiAgICAgICAgMHhFMUFkMzA5NzFiODNjMTdFMkEyNGMwMzM0Q0I0NWY4MDhBYkVCYzg3LA0KICAgICAgICAweDA3ZjM1YjdGRTczNWM0OUZENTA1MUQ1YTBDMmU3NGM5MTc3ZkVhNmQsDQogICAgICAgIDB4MTE2NjlDY2U2QUYzY2UxRWYzNzc3NzIxZkNDMGVlZjBlRTU3RWFiYSwNCiAgICAgICAgMHhCRGJhRjY0MzRkNDBENjM1NUIxZTgwZTQwQ2M0QUI5QzY4RDk2MTE2LA0KICAgICAgICAweDE3MTI1YjU5YWM1MWNFZTAyOUU0YkQ3OEQ3ZjU5NDdEMWVBNDlCQjIsDQogICAgICAgIDB4QTM4MkEzQTY1YzNGOGVlMmI3MjZBMjUzNUIzYzM0QTg5RDkwOTRENCwNCiAgICAgICAgMHhBQjc4Yzg3ODFmQjY0QmVkMzdCMjc0QzVFRTc1OWVFMzM0NjVmMWYzLA0KICAgICAgICAweEU3NEYyMDYyNjEyRTNjQUU4YTkzRTI0YjJmMEQzYTIxMzMzNzM4ODQsDQogICAgICAgIDB4NTA1MTIwOTU3QTk4MDY4MjdGOEYxMTFBMTIzNTYxRTgyQzQwYkM3OCwNCiAgICAgICAgMHgwMEE0NjkyMkIxQzU0QWU2YjU4MThDNDlCOTdFMDNFQjRCQjM1MmUxLA0KICAgICAgICAweEU3NmZFNTJhMjUxQzhGM2E1ZGNENjU3RTQ3QTZDOEQxNkZkZjRiRkENCiAgICBdOw0KDQp9Ly8gQ3Jvd2RzYWxlTWludGVy'