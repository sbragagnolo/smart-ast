base 64 content
base64cryptoABS
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyoqDQogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzDQogKi8NCmxpYnJhcnkgU2FmZU1hdGggew0KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICB1aW50MjU2IGMgPSBhICogYjsNCiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwDQogICAgdWludDI1NiBjID0gYSAvIGI7DQogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIGFzc2VydChiIDw9IGEpOw0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKyBiOw0KICAgIGFzc2VydChjID49IGEpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KfQ0KDQovKioNCiAqIEB0aXRsZSBPd25hYmxlDQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sIA0KICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4gDQogKi8NCmNvbnRyYWN0IE93bmFibGUgew0KICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCg0KDQogIC8qKiANCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyDQogICAqIGFjY291bnQuDQogICAqLw0KICBmdW5jdGlvbiBPd25hYmxlKCkgew0KICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgfQ0KDQoNCiAgLyoqDQogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4gDQogICAqLw0KICBtb2RpZmllciBvbmx5T3duZXIoKSB7DQogICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCiAgICBfOw0KICB9DQoNCg0KICAvKioNCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4NCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4gDQogICAqLw0KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgew0KICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7DQogICAgICBvd25lciA9IG5ld093bmVyOw0KICAgIH0NCiAgfQ0KDQp9DQoNCi8qKg0KICogQHRpdGxlIEVSQzIwQmFzaWMNCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQ0KICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQogKi8NCmNvbnRyYWN0IEVSQzIwQmFzaWMgew0KICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSk7DQogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOw0KfQ0KDQovKioNCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UNCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICovDQpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsNCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7DQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpOw0KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7DQogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOw0KfQ0KDQpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgew0KICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsNCg0KICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7DQoNCiAgLyoqDQogICAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suDQogICAqLw0KICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludDI1NiBzaXplKSB7DQogICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7DQogICAgICAgdGhyb3c7DQogICAgIH0NCiAgICAgXzsNCiAgfQ0KDQogIC8qKg0KICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MNCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLg0KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4NCiAgKi8NCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7DQogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLg0KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiANCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLg0KICAqLw0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgew0KICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICB9DQoNCn0NCg0KLyoqDQogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4NCiAqDQogKiBAZGV2IEltcGxlbWFudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFydCB0b2tlbi4NCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sDQogKi8NCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgew0KDQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCg0KDQogIC8qKg0KICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXINCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQ0KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8NCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZA0KICAgKi8NCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgew0KICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07DQoNCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQNCiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7DQoNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7DQogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOw0KICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWFobGYgb2YgbXNnLnNlbmRlci4NCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLg0KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50Lg0KICAgKi8NCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgew0KDQogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2ANCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdA0KICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOg0KICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQ0KICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7DQoNCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYW4gYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuDQogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4NCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuDQogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4NCiAgICovDQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsNCiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgfQ0KDQp9DQoNCmNvbnRyYWN0IENyeXB0b0FCUyBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsNCiAgc3RyaW5nIHB1YmxpYyBuYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5ZCN56ixDQogIHN0cmluZyBwdWJsaWMgc3ltYm9sOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRva2VuIOS7o+iZnw0KICB1aW50MjU2IHB1YmxpYyBkZWNpbWFscyA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWNpbWFscw0KICBhZGRyZXNzIHB1YmxpYyBjb250cmFjdEFkZHJlc3M7ICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250cmFjdCBhZGRyZXNzDQoNCiAgdWludDI1NiBwdWJsaWMgbWluSW52ZXN0SW5XZWk7ICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pyA5L2O5oqV6LOH6YeR6aGNIGluIHdlaQ0KICB1aW50MjU2IHB1YmxpYyB0b2tlbkV4Y2hhbmdlUmF0ZUluV2VpOyAgICAgICAgICAgICAgICAvLyAxIFRva2VuID0gbiBFVEggaW4gd2VpDQoNCiAgdWludDI1NiBwdWJsaWMgc3RhcnRCbG9jazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUNPIOi1t+Wni+eahCBibG9jayBudW1iZXINCiAgdWludDI1NiBwdWJsaWMgZW5kQmxvY2s7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUNPIOe1kOadn+eahCBibG9jayBudW1iZXINCiAgdWludDI1NiBwdWJsaWMgbWF4VG9rZW5TdXBwbHk7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUNPIOeahCBtYXggdG9rZW7vvIzpgI/pgY4gVVNEIHRvIEVUSCDmj5vnrpflh7rkvoYNCiAgDQogIHVpbnQyNTYgcHVibGljIGluaXRpYWxpemVkVGltZTsgICAgICAgICAgICAgICAgICAgICAgIC8vIOi1t+Wni+aZgumWk++8jOWQiOe0hOmDqOe9sueahOaZguWAmeacg+Wvq+WFpQ0KICB1aW50MjU2IHB1YmxpYyBmaW5hbmNpbmdQZXJpb2Q7ICAgICAgICAgICAgICAgICAgICAgICAvLyB0b2tlbiDnsYzos4fmnJ/plpMNCiAgdWludDI1NiBwdWJsaWMgdG9rZW5Mb2Nrb3V0UGVyaW9kOyAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW4g6ZaJ6Y6W5pyf77yM6ZaJ6Y6W5pyf5YWn5LiN5b6XIHRyYW5zZmVyDQogIHVpbnQyNTYgcHVibGljIHRva2VuTWF0dXJpdHlQZXJpb2Q7ICAgICAgICAgICAgICAgICAgIC8vIHRva2VuIOWIsOacn+aXpQ0KDQogIGJvb2wgcHVibGljIHBhdXNlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaaq+WBnOWQiOe0hOWKn+iDveWft+ihjA0KICBib29sIHB1YmxpYyBpbml0aWFsaXplZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlkIjntITllZ/li5UNCiAgdWludDI1NiBwdWJsaWMgZmluYWxpemVkQmxvY2s7ICAgICAgICAgICAgICAgICAgICAgICAgLy8g5ZCI57SE57WC5q2i5oqV6LOH55qE5Y2A5aGK57eo6JmfDQogIHVpbnQyNTYgcHVibGljIGZpbmFsaXplZFRpbWU7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWQiOe0hOe1guatouaKleizh+eahOaZgumWkw0KICB1aW50MjU2IHB1YmxpYyBmaW5hbGl6ZWRDYXBpdGFsOyAgICAgICAgICAgICAgICAgICAgICAvLyDlkIjntITliLDmnJ/nmoQgRVRIIOmHkemhjQ0KDQogIHN0cnVjdCBFeGNoYW5nZVJhdGUgew0KICAgIHVpbnQyNTYgYmxvY2tOdW1iZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBibG9jayBudW1iZXINCiAgICB1aW50MjU2IGV4Y2hhbmdlUmF0ZUluV2VpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMSBVU0QgPSBuIEVUSCBpbiB3ZWksIOa0vueZvOWIqeaBr+S9v+eUqOeahOWIqeeOh+Wfuua6lg0KICB9DQoNCiAgRXhjaGFuZ2VSYXRlW10gcHVibGljIGV4Y2hhbmdlUmF0ZUFycmF5OyAgICAgICAgICAgICAgLy8gZXhjaGFuZ2UgcmF0ZSBhcnJheQ0KICB1aW50MjU2IHB1YmxpYyBuZXh0RXhjaGFuZ2VSYXRlSW5kZXg7ICAgICAgICAgICAgICAgICAvLyBleGNoYW5nZSByYXRlIGxhc3QgaW5kZXgNCiAgDQogIHVpbnQyNTZbXSBwdWJsaWMgaW50ZXJlc3RBcnJheTsgICAgICAgICAgICAgICAgICAgICAgIC8vIGludGVyZXN0IGFycmF5DQoNCiAgc3RydWN0IFBheWVlIHsNCiAgICBib29sIGlzRXhpc3RzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF5ZWUg5a2Y5ZyoDQogICAgYm9vbCBpc1BheWFibGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBheWVlIOWFgeiosemgmOmMog0KICAgIHVpbnQyNTYgaW50ZXJlc3RJbldlaTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlvoXpoJjliKnmga/ph5HpoY0NCiAgfQ0KDQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gUGF5ZWUpIHB1YmxpYyBwYXllZXM7IA0KICBhZGRyZXNzW10gcHVibGljIHBheWVlQXJyYXk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXllZSBhcnJheQ0KICB1aW50MjU2IHB1YmxpYyBuZXh0UGF5ZWVJbmRleDsgICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXllZSBkZXBvc2l0ZSBpbnRlcmVzdCBpbmRleA0KDQogIHN0cnVjdCBBc3NldCB7DQogICAgc3RyaW5nIGRhdGE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzc2V0IGRhdGENCiAgfQ0KDQogIEFzc2V0W10gcHVibGljIGFzc2V0QXJyYXk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzc2V0IGFycmF5DQoNCiAgLyoqDQogICAqIEBkZXYgVGhyb3dzIGlmIGNvbnRyYWN0IHBhdXNlZC4NCiAgICovDQogIG1vZGlmaWVyIG5vdFBhdXNlZCgpIHsNCiAgICByZXF1aXJlKHBhdXNlZCA9PSBmYWxzZSk7DQogICAgXzsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IFRocm93cyBpZiBjb250cmFjdCBpcyBwYXVzZWQuDQogICAqLw0KICBtb2RpZmllciBpc1BhdXNlZCgpIHsNCiAgICByZXF1aXJlKHBhdXNlZCA9PSB0cnVlKTsNCiAgICBfOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgVGhyb3dzIGlmIG5vdCBhIHBheWVlLiANCiAgICovDQogIG1vZGlmaWVyIGlzUGF5ZWUoKSB7DQogICAgcmVxdWlyZShwYXllZXNbbXNnLnNlbmRlcl0uaXNQYXlhYmxlID09IHRydWUpOw0KICAgIF87DQogIH0NCg0KICAvKioNCiAgICogQGRldiBUaHJvd3MgaWYgY29udHJhY3Qgbm90IGluaXRpYWxpemVkLiANCiAgICovDQogIG1vZGlmaWVyIGlzSW5pdGlhbGl6ZWQoKSB7DQogICAgcmVxdWlyZShpbml0aWFsaXplZCA9PSB0cnVlKTsNCiAgICBfOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgVGhyb3dzIGlmIGNvbnRyYWN0IG5vdCBvcGVuLiANCiAgICovDQogIG1vZGlmaWVyIGlzQ29udHJhY3RPcGVuKCkgew0KICAgIHJlcXVpcmUoDQogICAgICBnZXRCbG9ja051bWJlcigpID49IHN0YXJ0QmxvY2sgJiYNCiAgICAgIGdldEJsb2NrTnVtYmVyKCkgPD0gZW5kQmxvY2sgJiYNCiAgICAgIGZpbmFsaXplZEJsb2NrID09IDApOw0KICAgIF87DQogIH0NCg0KICAvKioNCiAgICogQGRldiBUaHJvd3MgaWYgdG9rZW4gaW4gbG9ja291dCBwZXJpb2QuIA0KICAgKi8NCiAgbW9kaWZpZXIgbm90TG9ja291dCgpIHsNCiAgICByZXF1aXJlKG5vdyA+IChpbml0aWFsaXplZFRpbWUgKyBmaW5hbmNpbmdQZXJpb2QgKyB0b2tlbkxvY2tvdXRQZXJpb2QpKTsNCiAgICBfOw0KICB9DQogIA0KICAvKioNCiAgICogQGRldiBUaHJvd3MgaWYgbm90IG92ZXIgbWF0dXJpdHkgZGF0ZS4gDQogICAqLw0KICBtb2RpZmllciBvdmVyTWF0dXJpdHkoKSB7DQogICAgcmVxdWlyZShub3cgPiAoaW5pdGlhbGl6ZWRUaW1lICsgZmluYW5jaW5nUGVyaW9kICsgdG9rZW5NYXR1cml0eVBlcmlvZCkpOw0KICAgIF87DQogIH0NCg0KICAvKioNCiAgICogQGRldiBDb250cmFjdCBjb25zdHJ1Y3Rvci4NCiAgICovDQogIGZ1bmN0aW9uIENyeXB0b0FCUygpIHsNCiAgICBwYXVzZWQgPSBmYWxzZTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IEluaXRpYWxpemUgY29udHJhY3Qgd2l0aCBpbml0YWwgcGFyYW1ldGVycy4gDQogICAqIEBwYXJhbSBfbmFtZSBuYW1lIG9mIHRva2VuDQogICAqIEBwYXJhbSBfc3ltYm9sIHN5bWJvbCBvZiB0b2tlbg0KICAgKiBAcGFyYW0gX2NvbnRyYWN0QWRkcmVzcyBjb250cmFjdCBkZXBsb3llZCBhZGRyZXNzDQogICAqIEBwYXJhbSBfc3RhcnRCbG9jayBzdGFydCBibG9jayBudW1iZXINCiAgICogQHBhcmFtIF9lbmRCbG9jayBlbmQgYmxvY2sgbnVtYmVyDQogICAqIEBwYXJhbSBfaW5pdGlhbGl6ZWRUaW1lIGNvbnRyYWN0IGluaXRhbGl6ZWQgdGltZQ0KICAgKiBAcGFyYW0gX2ZpbmFuY2luZ1BlcmlvZCBjb250cmFjdCBmaW5hbmNpbmcgcGVyaW9kDQogICAqIEBwYXJhbSBfdG9rZW5Mb2Nrb3V0UGVyaW9kIGNvbnRyYWN0IHRva2VuIGxvY2tvdXQgcGVyaW9kDQogICAqIEBwYXJhbSBfdG9rZW5NYXR1cml0eVBlcmlvZCBjb250cmFjdCB0b2tlbiBtYXR1cml0eSBwZXJpb2QNCiAgICogQHBhcmFtIF9taW5JbnZlc3RJbldlaSBtaW5pbXVtIHdlaSBhY2NlcHQgb2YgaW52ZXN0DQogICAqIEBwYXJhbSBfbWF4VG9rZW5TdXBwbHkgbWF4aW11bSB0b2tlIHN1cHBseQ0KICAgKiBAcGFyYW0gX3Rva2VuRXhjaGFuZ2VSYXRlSW5XZWkgdG9rZW4gZXhjaGFuZ2UgcmF0ZSBpbiB3ZWkNCiAgICogQHBhcmFtIF9leGNoYW5nZVJhdGVJbldlaSBldGggZXhjaGFuZ2UgcmF0ZSBpbiB3ZWkNCiAgICovDQogIGZ1bmN0aW9uIGluaXRpYWxpemUoDQogICAgICBzdHJpbmcgX25hbWUsDQogICAgICBzdHJpbmcgX3N5bWJvbCwNCiAgICAgIHVpbnQyNTYgX2RlY2ltYWxzLA0KICAgICAgYWRkcmVzcyBfY29udHJhY3RBZGRyZXNzLA0KICAgICAgdWludDI1NiBfc3RhcnRCbG9jaywNCiAgICAgIHVpbnQyNTYgX2VuZEJsb2NrLA0KICAgICAgdWludDI1NiBfaW5pdGlhbGl6ZWRUaW1lLA0KICAgICAgdWludDI1NiBfZmluYW5jaW5nUGVyaW9kLA0KICAgICAgdWludDI1NiBfdG9rZW5Mb2Nrb3V0UGVyaW9kLA0KICAgICAgdWludDI1NiBfdG9rZW5NYXR1cml0eVBlcmlvZCwNCiAgICAgIHVpbnQyNTYgX21pbkludmVzdEluV2VpLA0KICAgICAgdWludDI1NiBfbWF4VG9rZW5TdXBwbHksDQogICAgICB1aW50MjU2IF90b2tlbkV4Y2hhbmdlUmF0ZUluV2VpLA0KICAgICAgdWludDI1NiBfZXhjaGFuZ2VSYXRlSW5XZWkpIG9ubHlPd25lciB7DQogICAgcmVxdWlyZShieXRlcyhuYW1lKS5sZW5ndGggPT0gMCk7DQogICAgcmVxdWlyZShieXRlcyhzeW1ib2wpLmxlbmd0aCA9PSAwKTsNCiAgICByZXF1aXJlKGRlY2ltYWxzID09IDApOw0KICAgIHJlcXVpcmUoY29udHJhY3RBZGRyZXNzID09IDB4MCk7DQogICAgcmVxdWlyZSh0b3RhbFN1cHBseSA9PSAwKTsNCiAgICByZXF1aXJlKGRlY2ltYWxzID09IDApOw0KICAgIHJlcXVpcmUoX3N0YXJ0QmxvY2sgPj0gZ2V0QmxvY2tOdW1iZXIoKSk7DQogICAgcmVxdWlyZShfc3RhcnRCbG9jayA8IF9lbmRCbG9jayk7DQogICAgcmVxdWlyZShmaW5hbmNpbmdQZXJpb2QgPT0gMCk7DQogICAgcmVxdWlyZSh0b2tlbkxvY2tvdXRQZXJpb2QgPT0gMCk7DQogICAgcmVxdWlyZSh0b2tlbk1hdHVyaXR5UGVyaW9kID09IDApOw0KICAgIHJlcXVpcmUoaW5pdGlhbGl6ZWRUaW1lID09IDApOw0KICAgIHJlcXVpcmUoX21heFRva2VuU3VwcGx5ID49IHRvdGFsU3VwcGx5KTsNCiAgICBuYW1lID0gX25hbWU7DQogICAgc3ltYm9sID0gX3N5bWJvbDsNCiAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsNCiAgICBjb250cmFjdEFkZHJlc3MgPSBfY29udHJhY3RBZGRyZXNzOw0KICAgIHN0YXJ0QmxvY2sgPSBfc3RhcnRCbG9jazsNCiAgICBlbmRCbG9jayA9IF9lbmRCbG9jazsNCiAgICBpbml0aWFsaXplZFRpbWUgPSBfaW5pdGlhbGl6ZWRUaW1lOw0KICAgIGZpbmFuY2luZ1BlcmlvZCA9IF9maW5hbmNpbmdQZXJpb2Q7DQogICAgdG9rZW5Mb2Nrb3V0UGVyaW9kID0gX3Rva2VuTG9ja291dFBlcmlvZDsNCiAgICB0b2tlbk1hdHVyaXR5UGVyaW9kID0gX3Rva2VuTWF0dXJpdHlQZXJpb2Q7DQogICAgbWluSW52ZXN0SW5XZWkgPSBfbWluSW52ZXN0SW5XZWk7DQogICAgbWF4VG9rZW5TdXBwbHkgPSBfbWF4VG9rZW5TdXBwbHk7DQogICAgdG9rZW5FeGNoYW5nZVJhdGVJbldlaSA9IF90b2tlbkV4Y2hhbmdlUmF0ZUluV2VpOw0KICAgIG93bmVyU2V0RXhjaGFuZ2VSYXRlSW5XZWkoX2V4Y2hhbmdlUmF0ZUluV2VpKTsNCiAgICBpbml0aWFsaXplZCA9IHRydWU7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBGaW5hbGl6ZSBjb250cmFjdA0KICAgKi8NCiAgZnVuY3Rpb24gZmluYWxpemUoKSBwdWJsaWMgaXNJbml0aWFsaXplZCB7DQogICAgcmVxdWlyZShnZXRCbG9ja051bWJlcigpID49IHN0YXJ0QmxvY2spOw0KICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBnZXRCbG9ja051bWJlcigpID4gZW5kQmxvY2spOw0KDQogICAgZmluYWxpemVkQmxvY2sgPSBnZXRCbG9ja051bWJlcigpOw0KICAgIGZpbmFsaXplZFRpbWUgPSBub3c7DQoNCiAgICBGaW5hbGl6ZWQoKTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IGZhbGxiYWNrIGZ1bmN0aW9uIGFjY2VwdCBldGhlcg0KICAgKi8NCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSBub3RQYXVzZWQgew0KICAgIHByb3h5UGF5bWVudChtc2cuc2VuZGVyKTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IHBheW1lbnQgZnVuY3Rpb24sIHRyYW5zZmVyIGV0aCB0byB0b2tlbg0KICAgKiBAcGFyYW0gX3BheWVlIFRoZSBwYXllZSBhZGRyZXNzDQogICAqLw0KICBmdW5jdGlvbiBwcm94eVBheW1lbnQoYWRkcmVzcyBfcGF5ZWUpIHB1YmxpYyBwYXlhYmxlIG5vdFBhdXNlZCBpc0luaXRpYWxpemVkIGlzQ29udHJhY3RPcGVuIHJldHVybnMgKGJvb2wpIHsNCiAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOw0KDQogICAgdWludDI1NiBhbW91bnQgPSBtc2cudmFsdWU7DQogICAgcmVxdWlyZShhbW91bnQgPj0gbWluSW52ZXN0SW5XZWkpOyANCg0KICAgIHVpbnQyNTYgcmVmdW5kID0gYW1vdW50ICUgdG9rZW5FeGNoYW5nZVJhdGVJbldlaTsNCiAgICB1aW50MjU2IHRva2VucyA9IChhbW91bnQgLSByZWZ1bmQpIC8gdG9rZW5FeGNoYW5nZVJhdGVJbldlaTsNCiAgICByZXF1aXJlKHRvdGFsU3VwcGx5LmFkZCh0b2tlbnMpIDw9IG1heFRva2VuU3VwcGx5KTsNCiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZCh0b2tlbnMpOw0KICAgIGJhbGFuY2VzW19wYXllZV0gPSBiYWxhbmNlc1tfcGF5ZWVdLmFkZCh0b2tlbnMpOw0KDQogICAgaWYgKHBheWVlc1ttc2cuc2VuZGVyXS5pc0V4aXN0cyAhPSB0cnVlKSB7DQogICAgICBwYXllZXNbbXNnLnNlbmRlcl0uaXNFeGlzdHMgPSB0cnVlOw0KICAgICAgcGF5ZWVzW21zZy5zZW5kZXJdLmlzUGF5YWJsZSA9IHRydWU7DQogICAgICBwYXllZUFycmF5LnB1c2gobXNnLnNlbmRlcik7DQogICAgfQ0KDQogICAgcmVxdWlyZShvd25lci5zZW5kKGFtb3VudCAtIHJlZnVuZCkpOw0KICAgIGlmIChyZWZ1bmQgPiAwKSB7DQogICAgICByZXF1aXJlKG1zZy5zZW5kZXIuc2VuZChyZWZ1bmQpKTsNCiAgICB9DQogICAgcmV0dXJuIHRydWU7DQogIH0NCg0KICAvKioNCiAgICogQGRldiB0cmFuc2ZlciB0b2tlbg0KICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLg0KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuDQogICAqLw0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIG5vdExvY2tvdXQgbm90UGF1c2VkIGlzSW5pdGlhbGl6ZWQgew0KICAgIHJlcXVpcmUoX3RvICE9IGNvbnRyYWN0QWRkcmVzcyk7DQogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBpZiAocGF5ZWVzW190b10uaXNFeGlzdHMgIT0gdHJ1ZSkgew0KICAgICAgcGF5ZWVzW190b10uaXNFeGlzdHMgPSB0cnVlOw0KICAgICAgcGF5ZWVzW190b10uaXNQYXlhYmxlID0gdHJ1ZTsNCiAgICAgIHBheWVlQXJyYXkucHVzaChfdG8pOw0KICAgIH0NCiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyDQogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20NCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvDQogICAqIEBwYXJhbSBfdmFsdWUgdWludCB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQNCiAgICovDQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIG5vdExvY2tvdXQgbm90UGF1c2VkIGlzSW5pdGlhbGl6ZWQgew0KICAgIHJlcXVpcmUoX3RvICE9IGNvbnRyYWN0QWRkcmVzcyk7DQogICAgcmVxdWlyZShfZnJvbSAhPSBjb250cmFjdEFkZHJlc3MpOw0KICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07DQoNCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQNCiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7DQogICAgcmVxdWlyZShfYWxsb3dhbmNlID49IF92YWx1ZSk7DQoNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7DQogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOw0KICAgIGlmIChwYXllZXNbX3RvXS5pc0V4aXN0cyAhPSB0cnVlKSB7DQogICAgICBwYXllZXNbX3RvXS5pc0V4aXN0cyA9IHRydWU7DQogICAgICBwYXllZXNbX3RvXS5pc1BheWFibGUgPSB0cnVlOw0KICAgICAgcGF5ZWVBcnJheS5wdXNoKF90byk7DQogICAgfQ0KICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBhZGQgaW50ZXJlc3QgdG8gZWFjaCBwYXllZXMNCiAgICovDQogIGZ1bmN0aW9uIG93bmVyRGVwb3NpdEludGVyZXN0KCkgb25seU93bmVyIGlzUGF1c2VkIGlzSW5pdGlhbGl6ZWQgew0KICAgIHVpbnQyNTYgaSA9IG5leHRQYXllZUluZGV4Ow0KICAgIHVpbnQyNTYgcGF5ZWVzTGVuZ3RoID0gcGF5ZWVBcnJheS5sZW5ndGg7DQogICAgd2hpbGUgKGkgPCBwYXllZXNMZW5ndGggJiYgbXNnLmdhcyA+IDIwMDAwMDApIHsNCiAgICAgIGFkZHJlc3MgX3BheWVlID0gcGF5ZWVBcnJheVtpXTsNCiAgICAgIHVpbnQyNTYgX2JhbGFuY2UgPSBiYWxhbmNlc1tfcGF5ZWVdOw0KICAgICAgaWYgKHBheWVlc1tfcGF5ZWVdLmlzUGF5YWJsZSA9PSB0cnVlICYmIF9iYWxhbmNlID4gMCkgew0KICAgICAgICB1aW50MjU2IF9pbnRlcmVzdEluV2VpID0gKF9iYWxhbmNlICogaW50ZXJlc3RBcnJheVtnZXRJbnRlcmVzdENvdW50KCkgLSAxXSkgLyB0b3RhbFN1cHBseTsNCiAgICAgICAgcGF5ZWVzW19wYXllZV0uaW50ZXJlc3RJbldlaSArPSBfaW50ZXJlc3RJbldlaTsNCiAgICAgICAgRGVwb3NpdEludGVyZXN0KGdldEludGVyZXN0Q291bnQoKSwgX3BheWVlLCBfYmFsYW5jZSwgX2ludGVyZXN0SW5XZWkpOw0KICAgICAgfQ0KICAgICAgaSsrOw0KICAgIH0NCiAgICBuZXh0UGF5ZWVJbmRleCA9IGk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiByZXR1cm4gaW50ZXJlc3QgYnkgYWRkcmVzcywgdW5pdCBgd2VpYA0KICAgKiBAcGFyYW0gX2FkZHJlc3MgVGhlIHBheWVlIGFkZHJlc3MNCiAgICovDQogIGZ1bmN0aW9uIGludGVyZXN0T2YoYWRkcmVzcyBfYWRkcmVzcykgaXNJbml0aWFsaXplZCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlc3VsdCkgIHsNCiAgICByZXF1aXJlKHBheWVlc1tfYWRkcmVzc10uaXNFeGlzdHMgPT0gdHJ1ZSk7DQogICAgcmV0dXJuIHBheWVlc1tfYWRkcmVzc10uaW50ZXJlc3RJbldlaTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IHdpdGhkcmF3IGludGVyZXN0IGJ5IHBheWVlDQogICAqIEBwYXJhbSBfaW50ZXJlc3RJbldlaSBXaXRoZHJhdyBpbnRlcmVzdCBhbW91bnQgaW4gd2VpDQogICAqLw0KICBmdW5jdGlvbiBwYXllZVdpdGhkcmF3SW50ZXJlc3QodWludDI1NiBfaW50ZXJlc3RJbldlaSkgcGF5YWJsZSBpc1BheWVlIGlzSW5pdGlhbGl6ZWQgbm90TG9ja291dCB7DQogICAgcmVxdWlyZShtc2cudmFsdWUgPT0gMCk7DQogICAgdWludDI1NiBpbnRlcmVzdEluV2VpID0gX2ludGVyZXN0SW5XZWk7DQogICAgcmVxdWlyZShwYXllZXNbbXNnLnNlbmRlcl0uaXNQYXlhYmxlID09IHRydWUgJiYgX2ludGVyZXN0SW5XZWkgPD0gcGF5ZWVzW21zZy5zZW5kZXJdLmludGVyZXN0SW5XZWkpOw0KICAgIHJlcXVpcmUobXNnLnNlbmRlci5zZW5kKGludGVyZXN0SW5XZWkpKTsNCiAgICBwYXllZXNbbXNnLnNlbmRlcl0uaW50ZXJlc3RJbldlaSAtPSBpbnRlcmVzdEluV2VpOw0KICAgIFBheWVlV2l0aGRyYXdJbnRlcmVzdChtc2cuc2VuZGVyLCBpbnRlcmVzdEluV2VpLCBwYXllZXNbbXNnLnNlbmRlcl0uaW50ZXJlc3RJbldlaSk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiB3aXRoZHJhdyBjYXBpdGFsIGJ5IHBheWVlDQogICAqLw0KICBmdW5jdGlvbiBwYXllZVdpdGhkcmF3Q2FwaXRhbCgpIHBheWFibGUgaXNQYXllZSBpc1BhdXNlZCBpc0luaXRpYWxpemVkIG92ZXJNYXR1cml0eSB7DQogICAgcmVxdWlyZShtc2cudmFsdWUgPT0gMCk7DQogICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+IDAgJiYgdG90YWxTdXBwbHkgPiAwKTsNCiAgICB1aW50MjU2IGNhcGl0YWwgPSAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gKiBmaW5hbGl6ZWRDYXBpdGFsKSAvIHRvdGFsU3VwcGx5Ow0KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsNCiAgICByZXF1aXJlKG1zZy5zZW5kZXIuc2VuZChjYXBpdGFsKSk7DQogICAgUGF5ZWVXaXRoZHJhd0NhcGl0YWwobXNnLnNlbmRlciwgY2FwaXRhbCk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBwYXVzZSBjb250cmFjdA0KICAgKi8NCiAgZnVuY3Rpb24gb3duZXJQYXVzZUNvbnRyYWN0KCkgb25seU93bmVyIHsNCiAgICBwYXVzZWQgPSB0cnVlOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgcmVzdW1lIGNvbnRyYWN0DQogICAqLw0KICBmdW5jdGlvbiBvd25lclJlc3VtZUNvbnRyYWN0KCkgb25seU93bmVyIHsNCiAgICBwYXVzZWQgPSBmYWxzZTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IHNldCBleGNoYW5nZSByYXRlIGluIHdlaSwgMSBUb2tlbiA9IG4gRVRIIGluIHdlaQ0KICAgKiBAcGFyYW0gX2V4Y2hhbmdlUmF0ZUluV2VpIGNoYW5nZSByYXRlIG9mIGV0aGVyDQogICAqLw0KICBmdW5jdGlvbiBvd25lclNldEV4Y2hhbmdlUmF0ZUluV2VpKHVpbnQyNTYgX2V4Y2hhbmdlUmF0ZUluV2VpKSBvbmx5T3duZXIgew0KICAgIHJlcXVpcmUoX2V4Y2hhbmdlUmF0ZUluV2VpID4gMCk7DQogICAgdmFyIF9leGNoYW5nZVJhdGUgPSBFeGNoYW5nZVJhdGUoIGdldEJsb2NrTnVtYmVyKCksIF9leGNoYW5nZVJhdGVJbldlaSk7DQogICAgZXhjaGFuZ2VSYXRlQXJyYXkucHVzaChfZXhjaGFuZ2VSYXRlKTsNCiAgICBuZXh0RXhjaGFuZ2VSYXRlSW5kZXggPSBleGNoYW5nZVJhdGVBcnJheS5sZW5ndGg7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBkaXNhYmxlIHNpbmdsZSBwYXllZSBpbiBlbWVyZ2VuY3kNCiAgICogQHBhcmFtIF9hZGRyZXNzIERpc2FibGUgcGF5ZWUgYWRkcmVzcw0KICAgKi8NCiAgZnVuY3Rpb24gb3duZXJEaXNhYmxlUGF5ZWUoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHsNCiAgICByZXF1aXJlKF9hZGRyZXNzICE9IG93bmVyKTsNCiAgICBwYXllZXNbX2FkZHJlc3NdLmlzUGF5YWJsZSA9IGZhbHNlOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgZW5hYmxlIHNpbmdsZSBwYXllZQ0KICAgKiBAcGFyYW0gX2FkZHJlc3MgRW5hYmxlIHBheWVlIGFkZHJlc3MNCiAgICovDQogIGZ1bmN0aW9uIG93bmVyRW5hYmxlUGF5ZWUoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHsNCiAgICBwYXllZXNbX2FkZHJlc3NdLmlzUGF5YWJsZSA9IHRydWU7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBnZXQgcGF5ZWUgY291bnQNCiAgICovDQogIGZ1bmN0aW9uIGdldFBheWVlQ291bnQoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIHBheWVlQXJyYXkubGVuZ3RoOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgZ2V0IGJsb2NrIG51bWJlcg0KICAgKi8NCiAgZnVuY3Rpb24gZ2V0QmxvY2tOdW1iZXIoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGJsb2NrLm51bWJlcjsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IGFkZCBhc3NldCBkYXRhLCBhdWRpdCBpbmZvcm1hdGlvbg0KICAgKiBAcGFyYW0gX2RhdGEgYXNzZXQgZGF0YQ0KICAgKi8NCiAgZnVuY3Rpb24gb3duZXJBZGRBc3NldChzdHJpbmcgX2RhdGEpIG9ubHlPd25lciB7DQogICAgdmFyIF9hc3NldCA9IEFzc2V0KF9kYXRhKTsNCiAgICBhc3NldEFycmF5LnB1c2goX2Fzc2V0KTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IGdldCBhc3NldCBjb3VudA0KICAgKi8NCiAgZnVuY3Rpb24gZ2V0QXNzZXRDb3VudCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVzdWx0KSB7DQogICAgcmV0dXJuIGFzc2V0QXJyYXkubGVuZ3RoOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgcHV0IGFsbCBjYXBpdGFsIGluIHRoaXMgY29udHJhY3QNCiAgICovDQogIGZ1bmN0aW9uIG93bmVyUHV0Q2FwaXRhbCgpIHBheWFibGUgaXNJbml0aWFsaXplZCBpc1BhdXNlZCBvbmx5T3duZXIgew0KICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7DQogICAgZmluYWxpemVkQ2FwaXRhbCA9IG1zZy52YWx1ZTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IHB1dCBpbnRlcmVzdCBpbiB0aGlzIGNvbnRyYWN0DQogICAqIEBwYXJhbSBfdGVybXMgTnVtYmVyIG9mIGludGVyZXN0DQogICAqLw0KICBmdW5jdGlvbiBvd25lclB1dEludGVyZXN0KHVpbnQyNTYgX3Rlcm1zKSBwYXlhYmxlIGlzSW5pdGlhbGl6ZWQgaXNQYXVzZWQgb25seU93bmVyIHsNCiAgICByZXF1aXJlKF90ZXJtcyA9PSAoZ2V0SW50ZXJlc3RDb3VudCgpICsgMSkpOw0KICAgIGludGVyZXN0QXJyYXkucHVzaChtc2cudmFsdWUpOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgZ2V0IGludGVyZXN0IGNvdW50DQogICAqLw0KICBmdW5jdGlvbiBnZXRJbnRlcmVzdENvdW50KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZXN1bHQpIHsNCiAgICByZXR1cm4gaW50ZXJlc3RBcnJheS5sZW5ndGg7DQogIH0NCg0KICAvKioNCiAgICogQGRldiB3aXRoZHJhdyBiYWxhbmNlIGZyb20gY29udHJhY3QgaWYgZW1lcmdlbmN5DQogICAqLw0KICBmdW5jdGlvbiBvd25lcldpdGhkcmF3KCkgcGF5YWJsZSBpc0luaXRpYWxpemVkIG9ubHlPd25lciB7DQogICAgcmVxdWlyZShvd25lci5zZW5kKHRoaXMuYmFsYW5jZSkpOw0KICB9DQoNCiAgZXZlbnQgUGF5ZWVXaXRoZHJhd0NhcGl0YWwoYWRkcmVzcyBfcGF5ZWUsIHVpbnQyNTYgX2NhcGl0YWwpOw0KICBldmVudCBQYXllZVdpdGhkcmF3SW50ZXJlc3QoYWRkcmVzcyBfcGF5ZWUsIHVpbnQyNTYgX2ludGVyZXN0LCB1aW50MjU2IF9yZW1haW5JbnRlcmVzdCk7DQogIGV2ZW50IERlcG9zaXRJbnRlcmVzdCh1aW50MjU2IF90ZXJtcywgYWRkcmVzcyBfcGF5ZWUsIHVpbnQyNTYgX2JhbGFuY2UsIHVpbnQyNTYgX2ludGVyZXN0KTsNCiAgZXZlbnQgRmluYWxpemVkKCk7DQp9'