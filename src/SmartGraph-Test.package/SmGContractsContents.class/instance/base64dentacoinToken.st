base 64 content
base64dentacoinToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQoNCg0KLyoqDQogKiBEZW50YWNvaW4gZXh0ZW5kZWQgRVJDMjAgdG9rZW4gY29udHJhY3QgY3JlYXRlZCBvbiBGZWJydWFyeSB0aGUgMTR0aCwgMjAxNyBieSBEZW50YWNvaW4gQi5WLiBpbiB0aGUgTmV0aGVybGFuZHMgDQogKg0KICogRm9yIHRlcm1zIGFuZCBjb25kaXRpb25zIHZpc2l0IGh0dHBzOi8vZGVudGFjb2luLmNvbQ0KICovDQoNCg0KDQpjb250cmFjdCBvd25lZCB7DQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQoNCiAgICBmdW5jdGlvbiBvd25lZCgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIG9ubHlPd25lciB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgew0KICAgICAgICBpZiAobmV3T3duZXIgPT0gMHgwKSB0aHJvdzsNCiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICB9DQp9DQoNCg0KDQoNCi8qKg0KICogT3ZlcmZsb3cgYXdhcmUgdWludCBtYXRoIGZ1bmN0aW9ucy4NCiAqLw0KY29udHJhY3QgU2FmZU1hdGggew0KICAvL2ludGVybmFscw0KDQogIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICB1aW50IGMgPSBhICogYjsNCiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIGFzc2VydChiIDw9IGEpOw0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICB1aW50IGMgPSBhICsgYjsNCiAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgew0KICAgIGlmICghYXNzZXJ0aW9uKSB0aHJvdzsNCiAgfQ0KfQ0KDQoNCg0KDQpjb250cmFjdCBUb2tlbiB7DQogICAgLyogVGhpcyBpcyBhIHNsaWdodCBjaGFuZ2UgdG8gdGhlIEVSQzIwIGJhc2Ugc3RhbmRhcmQuDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7DQogICAgaXMgcmVwbGFjZWQgd2l0aDoNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgICBUaGlzIGF1dG9tYXRpY2FsbHkgY3JlYXRlcyBhIGdldHRlciBmdW5jdGlvbiBmb3IgdGhlIHRvdGFsU3VwcGx5Lg0KICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdA0KICAgIGN1cnJlbnRseSByZWNvZ25pc2VkIGFzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBtYXRjaGluZyBhYnN0cmFjdA0KICAgIGZ1bmN0aW9uIGJ5IHRoZSBjb21waWxlci4NCiAgICAqLw0KICAgIC8vLyB0b3RhbCBhbW91bnQgb2YgdG9rZW5zDQogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7DQoNCg0KICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQNCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQ0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsNCg0KICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmANCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50DQogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZA0KICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYA0KICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcg0KICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQNCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkDQogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2Vucw0KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyDQogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMNCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2Vucw0KICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsNCg0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOw0KfQ0KDQoNCg0KDQoNCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gew0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgLy9EZWZhdWx0IGFzc3VtZXMgdG90YWxTdXBwbHkgY2FuJ3QgYmUgb3ZlciBtYXggKDJeMjU2IC0gMSkuDQogICAgICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuDQogICAgICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLg0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7DQogICAgICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7DQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsNCiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgLy9zYW1lIGFzIGFib3ZlLiBSZXBsYWNlIHRoaXMgbGluZSB3aXRoIHRoZSBmb2xsb3dpbmcgaWYgeW91IHdhbnQgdG8gcHJvdGVjdCBhZ2FpbnN0IHdyYXBwaW5nIHVpbnRzLg0KICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsNCiAgICAgICAgLy9pZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgew0KICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsNCiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOw0KICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgew0KICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7DQogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgICB9DQoNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCn0NCg0KDQoNCg0KDQoNCg0KLyogRGVudGFjb2luIENvbnRyYWN0ICovDQpjb250cmFjdCBEZW50YWNvaW5Ub2tlbiBpcyBvd25lZCwgU2FmZU1hdGgsIFN0YW5kYXJkVG9rZW4gew0KICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJEZW50YWNvaW4iOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3Nlcw0KICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gItmoIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3Nlcw0KICAgIGFkZHJlc3MgcHVibGljIERlbnRhY29pbkFkZHJlc3MgPSB0aGlzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZHJlc3Mgb2YgdGhlIERlbnRhY29pbiB0b2tlbg0KICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3Nlcw0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ID0gODAwMDAwMDAwMDAwMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0b3RhbCBzdXBwbHkgb2YgRGVudGFjb2lucyAoZWlnaHQgdHJpbGxpb24pDQogICAgdWludDI1NiBwdWJsaWMgYnV5UHJpY2VFdGggPSAxIGZpbm5leTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnV5IHByaWNlIGZvciBEZW50YWNvaW5zDQogICAgdWludDI1NiBwdWJsaWMgc2VsbFByaWNlRXRoID0gMSBmaW5uZXk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VsbCBwcmljZSBmb3IgRGVudGFjb2lucw0KICAgIHVpbnQyNTYgcHVibGljIGdhc0ZvckRDTiA9IDUgZmlubmV5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV0aCBmcm9tIGNvbnRyYWN0IGFnYWluc3QgRENOIHRvIHBheSB0eCAoMTAgdGltZXMgc2VsbFByaWNlRXRoKQ0KICAgIHVpbnQyNTYgcHVibGljIERDTkZvckdhcyA9IDEwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERDTiB0byBjb250cmFjdCBhZ2FpbnN0IGV0aCB0byBwYXkgdHgNCiAgICB1aW50MjU2IHB1YmxpYyBnYXNSZXNlcnZlID0gMSBldGhlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFdGggYW1vdW50IHRoYXQgcmVtYWlucyBpbiB0aGUgY29udHJhY3QgZm9yIGdhcyBhbmQgY2FuJ3QgYmUgc29sZA0KICAgIHVpbnQyNTYgcHVibGljIG1pbkJhbGFuY2VGb3JBY2NvdW50cyA9IDEwIGZpbm5leTsgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pbmltYWwgZXRoIGJhbGFuY2Ugb2Ygc2VuZGVyIGFuZCByZWNpcGllbnQNCiAgICBib29sIHB1YmxpYyBkaXJlY3RUcmFkZUFsbG93ZWQgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIYWx0IHRyYWRpbmcgRENOIGJ5IHNlbmRpbmcgdG8gdGhlIGNvbnRyYWN0IGRpcmVjdGx5DQoNCg0KLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0ICovDQogICAgZnVuY3Rpb24gRGVudGFjb2luVG9rZW4oKSB7DQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2l2ZSB0aGUgY3JlYXRvciBhbGwgdG9rZW5zDQogICAgfQ0KDQoNCi8qIENvbnN0cnVjdG9yIHBhcmFtZXRlcnMgKi8NCiAgICBmdW5jdGlvbiBzZXRFdGhlclByaWNlcyh1aW50MjU2IG5ld0J1eVByaWNlRXRoLCB1aW50MjU2IG5ld1NlbGxQcmljZUV0aCkgb25seU93bmVyIHsNCiAgICAgICAgYnV5UHJpY2VFdGggPSBuZXdCdXlQcmljZUV0aDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgcHJpY2VzIHRvIGJ1eSBhbmQgc2VsbCBEQ04NCiAgICAgICAgc2VsbFByaWNlRXRoID0gbmV3U2VsbFByaWNlRXRoOw0KICAgIH0NCiAgICBmdW5jdGlvbiBzZXRHYXNGb3JEQ04odWludCBuZXdHYXNBbW91bnRJbldlaSkgb25seU93bmVyIHsNCiAgICAgICAgZ2FzRm9yRENOID0gbmV3R2FzQW1vdW50SW5XZWk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldERDTkZvckdhcyh1aW50IG5ld0RDTkFtb3VudCkgb25seU93bmVyIHsNCiAgICAgICAgRENORm9yR2FzID0gbmV3RENOQW1vdW50Ow0KICAgIH0NCiAgICBmdW5jdGlvbiBzZXRHYXNSZXNlcnZlKHVpbnQgbmV3R2FzUmVzZXJ2ZUluV2VpKSBvbmx5T3duZXIgew0KICAgICAgICBnYXNSZXNlcnZlID0gbmV3R2FzUmVzZXJ2ZUluV2VpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBzZXRNaW5CYWxhbmNlKHVpbnQgbWluaW11bUJhbGFuY2VJbldlaSkgb25seU93bmVyIHsNCiAgICAgICAgbWluQmFsYW5jZUZvckFjY291bnRzID0gbWluaW11bUJhbGFuY2VJbldlaTsNCiAgICB9DQoNCg0KLyogSGFsdHMgb3IgdW5oYWx0cyBkaXJlY3QgdHJhZGVzIHdpdGhvdXQgdGhlIHNlbGwvYnV5IGZ1bmN0aW9ucyBiZWxvdyAqLw0KICAgIGZ1bmN0aW9uIGhhbHREaXJlY3RUcmFkZSgpIG9ubHlPd25lciB7DQogICAgICAgIGRpcmVjdFRyYWRlQWxsb3dlZCA9IGZhbHNlOw0KICAgIH0NCiAgICBmdW5jdGlvbiB1bmhhbHREaXJlY3RUcmFkZSgpIG9ubHlPd25lciB7DQogICAgICAgIGRpcmVjdFRyYWRlQWxsb3dlZCA9IHRydWU7DQogICAgfQ0KDQoNCi8qIFRyYW5zZmVyIGZ1bmN0aW9uIGV4dGVuZGVkIGJ5IGNoZWNrIG9mIGV0aCBiYWxhbmNlcyBhbmQgcGF5IHRyYW5zYWN0aW9uIGNvc3RzIHdpdGggRENOIGlmIG5vdCBlbm91Z2ggZXRoICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKF92YWx1ZSA8IERDTkZvckdhcykgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50cyBkcmFpbiBhbmQgc3BhbQ0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lciAmJiBfdG8gPT0gRGVudGFjb2luQWRkcmVzcyAmJiBkaXJlY3RUcmFkZUFsbG93ZWQpIHsNCiAgICAgICAgICAgIHNlbGxEZW50YWNvaW5zQWdhaW5zdEV0aGVyKF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmFkZSBEZW50YWNvaW5zIGFnYWluc3QgZXRoIGJ5IHNlbmRpbmcgdG8gdGhlIHRva2VuIGNvbnRyYWN0DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzZW5kZXIgaGFzIGVub3VnaCBhbmQgZm9yIG92ZXJmbG93cw0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOyAgIC8vIFN1YnRyYWN0IERDTiBmcm9tIHRoZSBzZW5kZXINCg0KICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIuYmFsYW5jZSA+PSBtaW5CYWxhbmNlRm9yQWNjb3VudHMgJiYgX3RvLmJhbGFuY2UgPj0gbWluQmFsYW5jZUZvckFjY291bnRzKSB7ICAgIC8vIENoZWNrIGlmIHNlbmRlciBjYW4gcGF5IGdhcyBhbmQgaWYgcmVjaXBpZW50IGNvdWxkDQogICAgICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsgICAgICAgICAgICAgLy8gQWRkIHRoZSBzYW1lIGFtb3VudCBvZiBEQ04gdG8gdGhlIHJlY2lwaWVudA0KICAgICAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyB0cmFuc2ZlciB0b29rIHBsYWNlDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGJhbGFuY2VzW3RoaXNdID0gc2FmZUFkZChiYWxhbmNlc1t0aGlzXSwgRENORm9yR2FzKTsgICAgICAgIC8vIFBheSBEQ05Gb3JHYXMgdG8gdGhlIGNvbnRyYWN0DQogICAgICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgc2FmZVN1YihfdmFsdWUsIERDTkZvckdhcykpOyAgLy8gUmVjaXBpZW50IGJhbGFuY2UgLURDTkZvckdhcw0KICAgICAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgc2FmZVN1YihfdmFsdWUsIERDTkZvckdhcykpOyAgICAgIC8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyB0cmFuc2ZlciB0b29rIHBsYWNlDQoNCiAgICAgICAgICAgICAgICBpZihtc2cuc2VuZGVyLmJhbGFuY2UgPCBtaW5CYWxhbmNlRm9yQWNjb3VudHMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYoIW1zZy5zZW5kZXIuc2VuZChnYXNGb3JEQ04pKSB0aHJvdzsgICAgICAgICAgICAgICAgICAvLyBTZW5kIGV0aCB0byBzZW5kZXINCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZihfdG8uYmFsYW5jZSA8IG1pbkJhbGFuY2VGb3JBY2NvdW50cykgew0KICAgICAgICAgICAgICAgICAgICBpZighX3RvLnNlbmQoZ2FzRm9yRENOKSkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgZXRoIHRvIHJlY2lwaWVudA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsgdGhyb3c7IH0NCiAgICB9DQoNCg0KLyogVXNlciBidXlzIERlbnRhY29pbnMgYW5kIHBheXMgaW4gRXRoZXIgKi8NCiAgICBmdW5jdGlvbiBidXlEZW50YWNvaW5zQWdhaW5zdEV0aGVyKCkgcGF5YWJsZSByZXR1cm5zICh1aW50IGFtb3VudCkgew0KICAgICAgICBpZiAoYnV5UHJpY2VFdGggPT0gMCB8fCBtc2cudmFsdWUgPCBidXlQcmljZUV0aCkgdGhyb3c7ICAgICAgICAgICAgIC8vIEF2b2lkIGRpdmlkaW5nIDAsIHNlbmRpbmcgc21hbGwgYW1vdW50cyBhbmQgc3BhbQ0KICAgICAgICBhbW91bnQgPSBtc2cudmFsdWUgLyBidXlQcmljZUV0aDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIERlbnRhY29pbnMNCiAgICAgICAgaWYgKGJhbGFuY2VzW3RoaXNdIDwgYW1vdW50KSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBpdCBoYXMgZW5vdWdoIHRvIHNlbGwNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBhbW91bnQpOyAgICAgICAvLyBBZGQgdGhlIGFtb3VudCB0byBidXllcidzIGJhbGFuY2UNCiAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBzYWZlU3ViKGJhbGFuY2VzW3RoaXNdLCBhbW91bnQpOyAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBhbW91bnQgZnJvbSBEZW50YWNvaW4gYmFsYW5jZQ0KICAgICAgICBUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCBhbW91bnQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgYW4gZXZlbnQgcmVmbGVjdGluZyB0aGUgY2hhbmdlDQogICAgICAgIHJldHVybiBhbW91bnQ7DQogICAgfQ0KDQoNCi8qIFVzZXIgc2VsbHMgRGVudGFjb2lucyBhbmQgZ2V0cyBFdGhlciAqLw0KICAgIGZ1bmN0aW9uIHNlbGxEZW50YWNvaW5zQWdhaW5zdEV0aGVyKHVpbnQyNTYgYW1vdW50KSByZXR1cm5zICh1aW50IHJldmVudWUpIHsNCiAgICAgICAgaWYgKHNlbGxQcmljZUV0aCA9PSAwIHx8IGFtb3VudCA8IERDTkZvckdhcykgdGhyb3c7ICAgICAgICAgICAgICAgICAvLyBBdm9pZCBzZWxsaW5nIGFuZCBzcGFtDQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IGFtb3VudCkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoIHRvIHNlbGwNCiAgICAgICAgcmV2ZW51ZSA9IHNhZmVNdWwoYW1vdW50LCBzZWxsUHJpY2VFdGgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXZlbnVlID0gZXRoIHRoYXQgd2lsbCBiZSBzZW5kIHRvIHRoZSB1c2VyDQogICAgICAgIGlmIChzYWZlU3ViKHRoaXMuYmFsYW5jZSwgcmV2ZW51ZSkgPCBnYXNSZXNlcnZlKSB0aHJvdzsgICAgICAgICAgICAgLy8gS2VlcCBtaW4gYW1vdW50IG9mIGV0aCBpbiBjb250cmFjdCB0byBwcm92aWRlIGdhcyBmb3IgdHJhbnNhY3Rpb25zDQogICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKHJldmVudWUpKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VuZCBldGhlciB0byB0aGUgc2VsbGVyLiBJdCdzIGltcG9ydGFudA0KICAgICAgICAgICAgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvIGRvIHRoaXMgbGFzdCB0byBhdm9pZCByZWN1cnNpb24gYXR0YWNrcw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBzYWZlQWRkKGJhbGFuY2VzW3RoaXNdLCBhbW91bnQpOyAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYW1vdW50IHRvIERlbnRhY29pbiBiYWxhbmNlDQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIGFtb3VudCk7ICAgLy8gU3VidHJhY3QgdGhlIGFtb3VudCBmcm9tIHNlbGxlcidzIGJhbGFuY2UNCiAgICAgICAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIHJldmVudWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIGFuIGV2ZW50IHJlZmxlY3Rpbmcgb24gdGhlIGNoYW5nZQ0KICAgICAgICAgICAgcmV0dXJuIHJldmVudWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuZCBmdW5jdGlvbiBhbmQgcmV0dXJucw0KICAgICAgICB9DQogICAgfQ0KDQoNCi8qIHJlZnVuZCB0byBvd25lciAqLw0KICAgIGZ1bmN0aW9uIHJlZnVuZFRvT3duZXIgKHVpbnQyNTYgYW1vdW50T2ZFdGgsIHVpbnQyNTYgZGNuKSBvbmx5T3duZXIgew0KICAgICAgICB1aW50MjU2IGV0aCA9IHNhZmVNdWwoYW1vdW50T2ZFdGgsIDEgZXRoZXIpOw0KICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChldGgpKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgZXRoZXIgdG8gdGhlIG93bmVyLiBJdCdzIGltcG9ydGFudA0KICAgICAgICAgICAgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvIGRvIHRoaXMgbGFzdCB0byBhdm9pZCByZWN1cnNpb24gYXR0YWNrcw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgZXRoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgYW4gZXZlbnQgcmVmbGVjdGluZyBvbiB0aGUgY2hhbmdlDQogICAgICAgIH0NCiAgICAgICAgaWYgKGJhbGFuY2VzW3RoaXNdIDwgZGNuKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBpdCBoYXMgZW5vdWdoIHRvIHNlbGwNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBkY24pOyAgICAgICAgICAvLyBBZGQgdGhlIGFtb3VudCB0byBidXllcidzIGJhbGFuY2UNCiAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBzYWZlU3ViKGJhbGFuY2VzW3RoaXNdLCBkY24pOyAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBhbW91bnQgZnJvbSBzZWxsZXIncyBiYWxhbmNlDQogICAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIGRjbik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIHRoZSBjaGFuZ2UNCiAgICB9DQoNCg0KLyogVGhpcyB1bm5hbWVkIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuZXZlciBzb21lb25lIHRyaWVzIHRvIHNlbmQgZXRoZXIgdG8gaXQgYW5kIHBvc3NpYmx5IHNlbGxzIERlbnRhY29pbnMgKi8NCiAgICBmdW5jdGlvbigpIHBheWFibGUgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgICAgICAgaWYgKCFkaXJlY3RUcmFkZUFsbG93ZWQpIHRocm93Ow0KICAgICAgICAgICAgYnV5RGVudGFjb2luc0FnYWluc3RFdGhlcigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IGRpcmVjdCB0cmFkZXMgYnkgc2VuZGluZyBldGggdG8gdGhlIGNvbnRyYWN0DQogICAgICAgIH0NCiAgICB9DQp9DQoNCi8qIEpKRyAqLw=='