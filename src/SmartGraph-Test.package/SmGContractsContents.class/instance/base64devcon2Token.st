base 64 content
base64devcon2Token
	^'bGlicmFyeSBUb2tlbkxpYiB7DQogICAgc3RydWN0IFRva2VuIHsNCiAgICAgICAgc3RyaW5nIGlkZW50aXR5Ow0KICAgICAgICBhZGRyZXNzIG93bmVyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGlkKFRva2VuIHN0b3JhZ2Ugc2VsZikgcmV0dXJucyAoYnl0ZXMzMikgew0KICAgICAgICByZXR1cm4gc2hhMyhzZWxmLmlkZW50aXR5KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZW5lcmF0ZUlkKHN0cmluZyBpZGVudGl0eSkgcmV0dXJucyAoYnl0ZXMzMikgew0KICAgICAgICByZXR1cm4gc2hhMyhpZGVudGl0eSk7DQogICAgfQ0KDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCBieXRlczMyIF92YWx1ZSk7DQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCBieXRlczMyIF92YWx1ZSk7DQoNCiAgICBmdW5jdGlvbiBsb2dBcHByb3ZhbChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgYnl0ZXMzMiBfdmFsdWUpIHsNCiAgICAgICAgQXBwcm92YWwoX293bmVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBsb2dUcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgYnl0ZXMzMiBfdmFsdWUpIHsNCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IFRva2VuSW50ZXJmYWNlIHsNCiAgICAvKg0KICAgICAqICBFdmVudHMNCiAgICAgKi8NCiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCBfdG8sIGJ5dGVzMzIgX2lkKTsNCiAgICBldmVudCBEZXN0cm95KGJ5dGVzMzIgX2lkKTsNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBNaW50ZXJBZGRlZChhZGRyZXNzIHdobyk7DQogICAgZXZlbnQgTWludGVyUmVtb3ZlZChhZGRyZXNzIHdobyk7DQoNCiAgICAvKg0KICAgICAqICBNaW50aW5nDQogICAgICovDQogICAgLy8vIEBkZXYgTWludHMgYSBuZXcgdG9rZW4uDQogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF9pZGVudGl0eSBTdHJpbmcgZm9yIG93bmVyIGlkZW50aXR5Lg0KICAgIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHN0cmluZyBfaWRlbnRpdHkpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQoNCiAgICAvLy8gQGRldiBEZXN0cm95IGEgdG9rZW4NCiAgICAvLy8gQHBhcmFtIF9pZCBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byBkZXN0cm95Lg0KICAgIGZ1bmN0aW9uIGRlc3Ryb3koYnl0ZXMzMiBfaWQpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQoNCiAgICAvLy8gQGRldiBBZGQgYSBuZXcgbWludGVyDQogICAgLy8vIEBwYXJhbSB3aG8gQWRkcmVzcyB0aGUgYWRkcmVzcyB0aGF0IGNhbiBub3cgbWludCB0b2tlbnMuDQogICAgZnVuY3Rpb24gYWRkTWludGVyKGFkZHJlc3Mgd2hvKSByZXR1cm5zIChib29sKTsNCg0KICAgIC8vLyBAZGV2IFJlbW92ZSBhIG1pbnRlcg0KICAgIC8vLyBAcGFyYW0gd2hvIEFkZHJlc3MgdGhlIGFkZHJlc3MgdGhhdCB3aWxsIG5vIGxvbmdlciBiZSBhIG1pbnRlci4NCiAgICBmdW5jdGlvbiByZW1vdmVNaW50ZXIoYWRkcmVzcyB3aG8pIHJldHVybnMgKGJvb2wpOw0KDQogICAgLyoNCiAgICAgKiAgUmVhZCBhbmQgd3JpdGUgc3RvcmFnZSBmdW5jdGlvbnMNCiAgICAgKi8NCg0KICAgIC8vLyBAZGV2IFJldHVybiB0aGUgbnVtYmVyIG9mIHRva2Vucw0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcmV0dXJucyAodWludCBzdXBwbHkpOw0KDQogICAgLy8vIEBkZXYgVHJhbnNmZXJzIHNlbmRlciB0b2tlbiB0byBnaXZlbiBhZGRyZXNzLiBSZXR1cm5zIHN1Y2Nlc3MuDQogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCBieXRlczMyIF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAZGV2IEFsbG93cyBhbGxvd2VkIHRoaXJkIHBhcnR5IHRvIHRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIGJ5dGVzMzIgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KDQogICAgLy8vIEBkZXYgU2V0cyBhcHByb3ZhbCBzcGVuZGVyIHRvIHRyYW5zZmVyIG93bmVyc2hpcCBvZiB0b2tlbi4gUmV0dXJucyBzdWNjZXNzLg0KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiBzcGVuZGVyLi4NCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRva2VuIHRoYXQgY2FuIGJlIHNwZW5kLg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCBieXRlczMyIF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8qDQogICAgICogUmVhZCBzdG9yYWdlIGZ1bmN0aW9ucw0KICAgICAqLw0KICAgIC8vLyBAZGV2IFJldHVybnMgaWQgb2YgdG9rZW4gb3duZWQgYnkgZ2l2ZW4gYWRkcmVzcyAoZW5jb2RlZCBhcyBhbiBpbnRlZ2VyKS4NCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsNCg0KICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIHRva2VuIGlkIHRoYXQgbWF5IHRyYW5zZmVyIGZyb20gX293bmVyIGFjY291bnQgYnkgX3NwZW5kZXIuLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHRva2VuIHNwZW5kZXIuDQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7DQoNCiAgICAvKg0KICAgICAqICBFeHRyYSBub24gRVJDMjAgZnVuY3Rpb25zDQogICAgICovDQogICAgLy8vIEBkZXYgUmV0dXJucyB3aGV0aGVyIHRoZSBhZGRyZXNzIG93bnMgYSB0b2tlbi4NCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIHRvIGNoZWNrLg0KICAgIGZ1bmN0aW9uIGlzVG9rZW5Pd25lcihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7DQoNCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBpZGVudGl0eSBvZiB0aGUgZ2l2ZW4gdG9rZW4gaWQuDQogICAgLy8vIEBwYXJhbSBfaWQgQnl0ZXMzMiBpZCBvZiB0b2tlbiB0byBsb29rdXAuDQogICAgZnVuY3Rpb24gaWRlbnRpdHlPZihieXRlczMyIF9pZCkgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIGlkZW50aXR5KTsNCg0KICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIGFkZHJlc3Mgb2YgdGhlIG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBpZC4NCiAgICAvLy8gQHBhcmFtIF9pZCBCeXRlczMyIGlkIG9mIHRva2VuIHRvIGxvb2t1cC4NCiAgICBmdW5jdGlvbiBvd25lck9mKGJ5dGVzMzIgX2lkKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzIG93bmVyKTsNCn0NCg0KY29udHJhY3QgRGV2Y29uMlRva2VuIGlzIFRva2VuSW50ZXJmYWNlIHsNCiAgICB1c2luZyBUb2tlbkxpYiBmb3IgVG9rZW5MaWIuVG9rZW47DQoNCiAgICAvKg0KICAgICAqICArLS0tLS0tLS0tLS0tLS0tLSsNCiAgICAgKiAgfCBBZG1pbmlzdHJhdGl2ZSB8DQogICAgICogICstLS0tLS0tLS0tLS0tLS0tKw0KICAgICAqLw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIG1pbnRlcnM7DQogICAgdWludCBjb25zdGFudCBfRU5EX01JTlRJTkcgPSAxNDc0NTAyNDAwOyAgLy8gVVRDICgyMDE2LzA5LzIyIC0gMDA6MDA6MDApDQoNCiAgICBmdW5jdGlvbiBFTkRfTUlOVElORygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgcmV0dXJuIF9FTkRfTUlOVElORzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBEZXZjb24yVG9rZW4oKSB7DQogICAgICAgIG1pbnRlcnNbbXNnLnNlbmRlcl0gPSB0cnVlOw0KICAgICAgICBNaW50ZXJBZGRlZChtc2cuc2VuZGVyKTsNCiAgICB9DQoNCiAgICAvKg0KICAgICAqICArLS0tLS0tLS0tLS0tKw0KICAgICAqICB8IFRva2VuIERhdGEgfA0KICAgICAqICArLS0tLS0tLS0tLS0tKw0KICAgICAqLw0KICAgIHVpbnQgbnVtVG9rZW5zOw0KDQogICAgLy8gaWQgPT4gVG9rZW4NCiAgICBtYXBwaW5nIChieXRlczMyID0+IFRva2VuTGliLlRva2VuKSB0b2tlbnM7DQoNCiAgICAvLyBvd25lciA9PiBvd25lZFRva2VuLmlkDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBieXRlczMyKSBwdWJsaWMgb3duZWRUb2tlbjsNCg0KICAgIC8vIG93bmVyID0+IHNwZW5kZXIgPT4gb3duZWRUb2tlbi5pZA0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiBieXRlczMyKSkgYXBwcm92YWxzOw0KDQogICAgLyoNCiAgICAgKiAgUmVhZCBhbmQgd3JpdGUgc3RvcmFnZSBmdW5jdGlvbnMNCiAgICAgKi8NCiAgICAvLy8gQGRldiBNaW50cyBhIG5ldyB0b2tlbg0KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfaWRlbnRpdHkgU3RyaW5nIGZvciBvd25lciBpZGVudGl0eS4NCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCBzdHJpbmcgX2lkZW50aXR5KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgLy8gb25seSBtaW50YWJsZSB0aWxsIGVuZCBvZiBjb25mZXJlbmNlDQogICAgICAgIGlmIChub3cgPj0gX0VORF9NSU5USU5HKSB0aHJvdzsNCg0KICAgICAgICAvLyBlbnN1cmUgdGhlIG1zZy5zZW5kZXIgaXMgYWxsb3dlZCB0byBtaW50Lg0KICAgICAgICBpZiAoIW1pbnRlcnNbbXNnLnNlbmRlcl0pIHJldHVybiBmYWxzZTsNCg0KICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgdG9rZW4gb3duZXIgZG9lc24ndCBhbHJlYWR5IG93biBhIHRva2VuLg0KICAgICAgICBpZiAob3duZWRUb2tlbltfdG9dICE9IDB4MCkgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIC8vIGdlbmVyYXRlIHRoZSB0b2tlbiBpZCBhbmQgZ2V0IHRoZSB0b2tlbi4NCiAgICAgICAgYnl0ZXMzMiBpZCA9IFRva2VuTGliLmdlbmVyYXRlSWQoX2lkZW50aXR5KTsNCiAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2lkXTsNCg0KICAgICAgICAvLyBkb24ndCBhbGxvdyByZS1taW50aW5nIG9mIGEgZ2l2ZW4gaWRlbnRpdHkuDQogICAgICAgIGlmIChpZCA9PSB0b2tlbi5pZCgpKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gc2V0IHRoZSB0b2tlbiBkYXRhDQogICAgICAgIHRva2VuLm93bmVyID0gX3RvOw0KICAgICAgICB0b2tlbi5pZGVudGl0eSA9IF9pZGVudGl0eTsNCiAgICAgICAgb3duZWRUb2tlbltfdG9dID0gaWQ7DQoNCiAgICAgICAgLy8gbG9nIHRoZSBtaW50aW5nIG9mIHRoaXMgdG9rZW4uDQogICAgICAgIE1pbnQoX3RvLCBpZCk7DQoNCiAgICAgICAgLy8gaW5jcmVhc2UgdGhlIHN1cHBseS4NCiAgICAgICAgbnVtVG9rZW5zICs9IDE7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgRGVzdHJveSBhIHRva2VuDQogICAgLy8vIEBwYXJhbSBfaWQgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gYmUgZGVzdHJveWVkDQogICAgZnVuY3Rpb24gZGVzdHJveShieXRlczMyIF9pZCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIC8vIG9ubHkgbWludGFibGUgdGlsbCBlbmQgb2YgY29uZmVyZW5jZQ0KICAgICAgICBpZiAobm93ID49IF9FTkRfTUlOVElORykgdGhyb3c7DQoNCiAgICAgICAgLy8gZW5zdXJlIHRoZSBtc2cuc2VuZGVyIGlzIGFsbG93ZWQgdG8gbWludC4NCiAgICAgICAgaWYgKCFtaW50ZXJzW21zZy5zZW5kZXJdKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gcHVsbCB0aGUgdG9rZW4gdG8gZGVzdHJveQ0KICAgICAgICB2YXIgdG9rZW5Ub0Rlc3Ryb3kgPSB0b2tlbnNbX2lkXTsNCg0KICAgICAgICAvLyBSZW1vdmUgYW55IG93bmVyc2hpcCBkYXRhDQogICAgICAgIG93bmVkVG9rZW5bdG9rZW5Ub0Rlc3Ryb3kub3duZXJdID0gMHgwOw0KDQogICAgICAgIC8vIFplcm8gb3V0IHRoZSBhY3R1YWwgdG9rZW4gZGF0YQ0KICAgICAgICB0b2tlblRvRGVzdHJveS5pZGVudGl0eSA9ICcnOw0KICAgICAgICB0b2tlblRvRGVzdHJveS5vd25lciA9IDB4MDsNCg0KICAgICAgICAvLyBMb2cgdGhlIGRlc3RydWN0aW9uDQogICAgICAgIERlc3Ryb3koX2lkKTsNCg0KICAgICAgICAvLyBkZWNyZWFzZSB0aGUgc3VwcGx5Lg0KICAgICAgICBudW1Ub2tlbnMgLT0gMTsNCiAgICAgICAgDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IEFkZCBhIG5ldyBtaW50ZXINCiAgICAvLy8gQHBhcmFtIHdobyBBZGRyZXNzIHRoZSBhZGRyZXNzIHRoYXQgY2FuIG5vdyBtaW50IHRva2Vucy4NCiAgICBmdW5jdGlvbiBhZGRNaW50ZXIoYWRkcmVzcyB3aG8pIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgLy8gb25seSBtaW50YWJsZSB0aWxsIGVuZCBvZiBjb25mZXJlbmNlDQogICAgICAgIGlmIChub3cgPj0gX0VORF9NSU5USU5HKSB0aHJvdzsNCg0KICAgICAgICAvLyBlbnN1cmUgdGhlIG1zZy5zZW5kZXIgaXMgYWxsb3dlZA0KICAgICAgICBpZiAoIW1pbnRlcnNbbXNnLnNlbmRlcl0pIHJldHVybiBmYWxzZTsNCg0KICAgICAgICBtaW50ZXJzW3dob10gPSB0cnVlOw0KDQogICAgICAgIC8vIExvZyBpdA0KICAgICAgICBNaW50ZXJBZGRlZCh3aG8pOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IFJlbW92ZSBhIG1pbnRlcg0KICAgIC8vLyBAcGFyYW0gd2hvIEFkZHJlc3MgdGhlIGFkZHJlc3MgdGhhdCB3aWxsIG5vIGxvbmdlciBiZSBhIG1pbnRlci4NCiAgICBmdW5jdGlvbiByZW1vdmVNaW50ZXIoYWRkcmVzcyB3aG8pIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgLy8gZW5zdXJlIHRoZSBtc2cuc2VuZGVyIGlzIGFsbG93ZWQNCiAgICAgICAgaWYgKCFtaW50ZXJzW21zZy5zZW5kZXJdKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgbWludGVyc1t3aG9dID0gZmFsc2U7DQoNCiAgICAgICAgLy8gTG9nIGl0DQogICAgICAgIE1pbnRlclJlbW92ZWQod2hvKTsNCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyIHRva2VuIHRvIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICByZXR1cm4gdHJhbnNmZXIoX3RvLCBieXRlczMyKF92YWx1ZSkpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCBieXRlczMyIF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIC8vIGRvbnQgYWxsb3cgdGhlIG51bGwgdG9rZW4uDQogICAgICAgIGlmIChfdmFsdWUgPT0gMHgwKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gZW5zdXJlIGl0IGlzIGFjdHVhbGx5IGEgdG9rZW4NCiAgICAgICAgaWYgKHRva2Vuc1tfdmFsdWVdLmlkKCkgIT0gX3ZhbHVlKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIG5ldyBvd25lciBkb2Vzbid0IGFscmVhZHkgb3duIGEgdG9rZW4uDQogICAgICAgIGlmIChvd25lZFRva2VuW190b10gIT0gMHgwKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gZ2V0IHRoZSB0b2tlbg0KICAgICAgICB2YXIgdG9rZW5Ub1RyYW5zZmVyID0gdG9rZW5zW192YWx1ZV07DQoNCiAgICAgICAgLy8gZW5zdXJlIG1zZy5zZW5kZXIgaXMgdGhlIHRva2VuIG93bmVyLg0KICAgICAgICBpZiAodG9rZW5Ub1RyYW5zZmVyLm93bmVyICE9IG1zZy5zZW5kZXIpIHJldHVybiBmYWxzZTsNCg0KICAgICAgICAvLyBzZXQgdGhlIG5ldyBvd25lci4NCiAgICAgICAgdG9rZW5Ub1RyYW5zZmVyLm93bmVyID0gX3RvOw0KICAgICAgICBvd25lZFRva2VuW21zZy5zZW5kZXJdID0gMHgwOw0KICAgICAgICBvd25lZFRva2VuW190b10gPSBfdmFsdWU7DQoNCiAgICAgICAgLy8gbG9nIHRoZSB0cmFuc2Zlcg0KICAgICAgICAvL1RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgdWludChfdmFsdWUpKTsNCiAgICAgICAgVG9rZW5MaWIubG9nVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IEFsbG93cyBhbGxvd2VkIHRoaXJkIHBhcnR5IHRvIHRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIHJldHVybiB0cmFuc2ZlckZyb20oX2Zyb20sIF90bywgYnl0ZXMzMihfdmFsdWUpKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIGJ5dGVzMzIgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgLy8gZG9udCBhbGxvdyB0aGUgbnVsbCB0b2tlbi4NCiAgICAgICAgaWYgKF92YWx1ZSA9PSAweDApIHJldHVybiBmYWxzZTsNCg0KICAgICAgICAvLyBlbnN1cmUgaXQgaXMgYWN0dWFsbHkgYSB0b2tlbg0KICAgICAgICBpZiAodG9rZW5zW192YWx1ZV0uaWQoKSAhPSBfdmFsdWUpIHJldHVybiBmYWxzZTsNCg0KICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgbmV3IG93bmVyIGRvZXNuJ3QgYWxyZWFkeSBvd24gYSB0b2tlbi4NCiAgICAgICAgaWYgKG93bmVkVG9rZW5bX3RvXSAhPSAweDApIHJldHVybiBmYWxzZTsNCg0KICAgICAgICAvLyBnZXQgdGhlIHRva2VuDQogICAgICAgIHZhciB0b2tlblRvVHJhbnNmZXIgPSB0b2tlbnNbX3ZhbHVlXTsNCg0KICAgICAgICAvLyBlbnN1cmUgdGhhdCBfZnJvbSBhY3R1YWxseSBvd25zIHRoaXMgdG9rZW4uDQogICAgICAgIGlmICh0b2tlblRvVHJhbnNmZXIub3duZXIgIT0gX2Zyb20pIHJldHVybiBmYWxzZTsNCiAgICAgICAgaWYgKG93bmVkVG9rZW5bX2Zyb21dICE9IF92YWx1ZSkgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZXkgYXJlIGFwcHJvdmVkIHRvIHRyYW5zZmVyIHRoaXMgdG9rZW4uDQogICAgICAgIGlmIChhcHByb3ZhbHNbX2Zyb21dW21zZy5zZW5kZXJdICE9IF92YWx1ZSkgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIC8vIGRvIHRoZSB0cmFuc2Zlcg0KICAgICAgICB0b2tlblRvVHJhbnNmZXIub3duZXIgPSBfdG87DQogICAgICAgIG93bmVkVG9rZW5bX2Zyb21dID0gMHgwOw0KICAgICAgICBvd25lZFRva2VuW190b10gPSBfdmFsdWU7DQogICAgICAgIGFwcHJvdmFsc1tfZnJvbV1bbXNnLnNlbmRlcl0gPSAweDA7DQoNCiAgICAgICAgLy8gbG9nIHRoZSB0cmFuc2Zlcg0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCB1aW50KF92YWx1ZSkpOw0KICAgICAgICBUb2tlbkxpYi5sb2dUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IFNldHMgYXBwcm92YWwgc3BlbmRlciB0byB0cmFuc2ZlciBvd25lcnNoaXAgb2YgdG9rZW4uIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2Ygc3BlbmRlci4uDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0b2tlbiB0aGF0IGNhbiBiZSBzcGVuZC4NCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgcmV0dXJuIGFwcHJvdmUoX3NwZW5kZXIsIGJ5dGVzMzIoX3ZhbHVlKSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCBieXRlczMyIF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIC8vIGRvbnQgYWxsb3cgdGhlIG51bGwgdG9rZW4uDQogICAgICAgIGlmIChfdmFsdWUgPT0gMHgwKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gZW5zdXJlIGl0IGlzIGFjdHVhbGx5IGEgdG9rZW4NCiAgICAgICAgaWYgKHRva2Vuc1tfdmFsdWVdLmlkKCkgIT0gX3ZhbHVlKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gZ2V0IHRoZSB0b2tlbiB0aGF0IGlzIGJlaW5nIGFwcHJvdmVkLg0KICAgICAgICB2YXIgdG9rZW5Ub0FwcHJvdmUgPSB0b2tlbnNbX3ZhbHVlXTsNCg0KICAgICAgICAvLyBlbnN1cmUgdGhleSBvd24gdGhpcyB0b2tlbi4NCiAgICAgICAgaWYgKHRva2VuVG9BcHByb3ZlLm93bmVyICE9IG1zZy5zZW5kZXIpIHJldHVybiBmYWxzZTsNCiAgICAgICAgaWYgKG93bmVkVG9rZW5bbXNnLnNlbmRlcl0gIT0gX3ZhbHVlKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gc2V0IHRoZSBhcHByb3ZhbA0KICAgICAgICBhcHByb3ZhbHNbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KDQogICAgICAgIC8vIExvZyB0aGUgYXBwcm92YWwNCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIHVpbnQoX3ZhbHVlKSk7DQogICAgICAgIFRva2VuTGliLmxvZ0FwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qDQogICAgICogUmVhZCBzdG9yYWdlIGZ1bmN0aW9ucw0KICAgICAqLw0KICAgIC8vLyBAZGV2IFJldHVybiB0aGUgbnVtYmVyIG9mIHRva2Vucw0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcmV0dXJucyAodWludCBzdXBwbHkpIHsNCiAgICAgICAgcmV0dXJuIG51bVRva2VuczsNCiAgICB9DQoNCiAgICAvLy8gQGRldiBSZXR1cm5zIGlkIG9mIHRva2VuIG93bmVkIGJ5IGdpdmVuIGFkZHJlc3MgKGVuY29kZWQgYXMgYW4gaW50ZWdlcikuDQogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgew0KICAgICAgICByZXR1cm4gdWludChvd25lZFRva2VuW19vd25lcl0pOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IFJldHVybnMgbnVtYmVyIG9mIGFsbG93ZWQgdG9rZW5zIGZvciBnaXZlbiBhZGRyZXNzLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHRva2VuIHNwZW5kZXIuDQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgew0KICAgICAgICByZXR1cm4gdWludChhcHByb3ZhbHNbX293bmVyXVtfc3BlbmRlcl0pOw0KICAgIH0NCg0KICAgIC8qDQogICAgICogIEV4dHJhIG5vbiBFUkMyMCBmdW5jdGlvbnMNCiAgICAgKi8NCiAgICAvLy8gQGRldiBSZXR1cm5zIHdoZXRoZXIgdGhlIGFkZHJlc3Mgb3ducyBhIHRva2VuLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3MgdG8gY2hlY2suDQogICAgZnVuY3Rpb24gaXNUb2tlbk93bmVyKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiAob3duZWRUb2tlbltfb3duZXJdICE9IDB4MCAmJiB0b2tlbnNbb3duZWRUb2tlbltfb3duZXJdXS5vd25lciA9PSBfb3duZXIpOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIGlkZW50aXR5IG9mIHRoZSBnaXZlbiB0b2tlbiBpZC4NCiAgICAvLy8gQHBhcmFtIF9pZCBCeXRlczMyIGlkIG9mIHRva2VuIHRvIGxvb2t1cC4NCiAgICBmdW5jdGlvbiBpZGVudGl0eU9mKGJ5dGVzMzIgX2lkKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgaWRlbnRpdHkpIHsNCiAgICAgICAgcmV0dXJuIHRva2Vuc1tfaWRdLmlkZW50aXR5Ow0KICAgIH0NCg0KICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIGFkZHJlc3Mgb2YgdGhlIG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBpZC4NCiAgICAvLy8gQHBhcmFtIF9pZCBCeXRlczMyIGlkIG9mIHRva2VuIHRvIGxvb2t1cC4NCiAgICBmdW5jdGlvbiBvd25lck9mKGJ5dGVzMzIgX2lkKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzIG93bmVyKSB7DQogICAgICAgIHJldHVybiB0b2tlbnNbX2lkXS5vd25lcjsNCiAgICB9DQp9'