base 64 content
base64dividendManager
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KDQovKioNCiAqIEB0aXRsZSBTYWZlTWF0aA0KICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3INCiAqLw0KbGlicmFyeSBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOw0KICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDANCiAgICB1aW50MjU2IGMgPSBhIC8gYjsNCiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZA0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgcmV0dXJuIGEgLSBiOw0KICB9DQoNCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgdWludDI1NiBjID0gYSArIGI7DQogICAgYXNzZXJ0KGMgPj0gYSk7DQogICAgcmV0dXJuIGM7DQogIH0NCn0NCg0KLyogVGhlIFNJRlQgaXRzZWxmIGlzIGEgc2ltcGxlIGV4dGVuc2lvbiBvZiB0aGUgRVJDMjAgdGhhdCBhbGxvd3MgZm9yIGdyYW50aW5nIG90aGVyIFNJRlQgY29udHJhY3RzIHNwZWNpYWwgcmlnaHRzIHRvIGFjdCBvbiBiZWhhbGYgb2YgYWxsIHRyYW5zZmVycy4gKi8NCmNvbnRyYWN0IFNtYXJ0SW52ZXN0bWVudEZ1bmRUb2tlbiB7DQogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7DQoNCiAgICAvKiBNYXAgYWxsIG91ciBvdXIgYmFsYW5jZXMgZm9yIGlzc3VlZCB0b2tlbnMgKi8NCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOw0KDQogICAgLyogTWFwIGJldHdlZW4gdXNlcnMgYW5kIHRoZWlyIGFwcHJvdmFsIGFkZHJlc3NlcyBhbmQgYW1vdW50cyAqLw0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOw0KDQogICAgLyogTGlzdCBvZiBhbGwgdG9rZW4gaG9sZGVycyAqLw0KICAgIGFkZHJlc3NbXSBhbGxUb2tlbkhvbGRlcnM7DQoNCiAgICAvKiBUaGUgbmFtZSBvZiB0aGUgY29udHJhY3QgKi8NCiAgICBzdHJpbmcgcHVibGljIG5hbWU7DQoNCiAgICAvKiBUaGUgc3ltYm9sIGZvciB0aGUgY29udHJhY3QgKi8NCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsNCg0KICAgIC8qIEhvdyBtYW55IERQcyBhcmUgaW4gdXNlIGluIHRoaXMgY29udHJhY3QgKi8NCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7DQoNCiAgICAvKiBEZWZpbmVzIHRoZSBjdXJyZW50IHN1cHBseSBvZiB0aGUgdG9rZW4gaW4gaXRzIG93biB1bml0cyAqLw0KICAgIHVpbnQyNTYgdG90YWxTdXBwbHlBbW91bnQgPSAwOw0KDQogICAgLyogRGVmaW5lcyB0aGUgYWRkcmVzcyBvZiB0aGUgSUNPIGNvbnRyYWN0IHdoaWNoIGlzIHRoZSBvbmx5IGNvbnRyYWN0IHBlcm1pdHRlZCB0byBtaW50IHRva2Vucy4gKi8NCiAgICBhZGRyZXNzIHB1YmxpYyBpY29Db250cmFjdEFkZHJlc3M7DQoNCiAgICAvKiBEZWZpbmVzIHdoZXRoZXIgb3Igbm90IHRoZSBmdW5kIGlzIGNsb3NlZC4gKi8NCiAgICBib29sIHB1YmxpYyBpc0Nsb3NlZDsNCg0KICAgIC8qIERlZmluZXMgdGhlIGNvbnRyYWN0IGhhbmRsaW5nIHRoZSBJQ08gcGhhc2UuICovDQogICAgSWNvUGhhc2VNYW5hZ2VtZW50IGljb1BoYXNlTWFuYWdlbWVudDsNCg0KICAgIC8qIERlZmluZXMgdGhlIGFkbWluIGNvbnRyYWN0IHdlIGludGVyZmFjZSB3aXRoIGZvciBjcmVkZW50YWlscy4gKi8NCiAgICBBdXRoZW50aWNhdGlvbk1hbmFnZXIgYXV0aGVudGljYXRpb25NYW5hZ2VyOw0KDQogICAgLyogRmlyZWQgd2hlbiB0aGUgZnVuZCBpcyBldmVudHVhbGx5IGNsb3NlZC4gKi8NCiAgICBldmVudCBGdW5kQ2xvc2VkKCk7DQogICAgDQogICAgLyogT3VyIHRyYW5zZmVyIGV2ZW50IHRvIGZpcmUgd2hlbmV2ZXIgd2Ugc2hpZnQgU01SVCBhcm91bmQgKi8NCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsNCiAgICANCiAgICAvKiBPdXIgYXBwcm92YWwgZXZlbnQgd2hlbiBvbmUgdXNlciBhcHByb3ZlcyBhbm90aGVyIHRvIGNvbnRyb2wgKi8NCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCg0KICAgIC8qIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiB0aGlzIGZ1bmQgd2l0aCBsaW5rcyB0byBvdGhlciBjb250cmFjdHMgdGhhdCBhcmUgcmVxdWlyZWQuICovDQogICAgZnVuY3Rpb24gU21hcnRJbnZlc3RtZW50RnVuZFRva2VuKGFkZHJlc3MgX2ljb0NvbnRyYWN0QWRkcmVzcywgYWRkcmVzcyBfYXV0aGVudGljYXRpb25NYW5hZ2VyQWRkcmVzcykgew0KICAgICAgICAvLyBTZXR1cCBkZWZhdWx0cw0KICAgICAgICBuYW1lID0gIlNtYXJ0IEludmVzdG1lbnQgRnVuZCBUb2tlbiI7DQogICAgICAgIHN5bWJvbCA9ICJTSUZUIjsNCiAgICAgICAgZGVjaW1hbHMgPSAwOw0KDQogICAgICAgIC8qIFNldHVwIGFjY2VzcyB0byBvdXIgb3RoZXIgY29udHJhY3RzIGFuZCB2YWxpZGF0ZSB0aGVpciB2ZXJzaW9ucyAqLw0KICAgICAgICBpY29QaGFzZU1hbmFnZW1lbnQgPSBJY29QaGFzZU1hbmFnZW1lbnQoX2ljb0NvbnRyYWN0QWRkcmVzcyk7DQogICAgICAgIGlmIChpY29QaGFzZU1hbmFnZW1lbnQuY29udHJhY3RWZXJzaW9uKCkgIT0gMzAwMjAxNzA3MTcxNDQwKQ0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIGF1dGhlbnRpY2F0aW9uTWFuYWdlciA9IEF1dGhlbnRpY2F0aW9uTWFuYWdlcihfYXV0aGVudGljYXRpb25NYW5hZ2VyQWRkcmVzcyk7DQogICAgICAgIGlmIChhdXRoZW50aWNhdGlvbk1hbmFnZXIuY29udHJhY3RWZXJzaW9uKCkgIT0gMTAwMjAxNzA3MTcxNTAzKQ0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIA0KICAgICAgICAvKiBTdG9yZSBvdXIgc3BlY2lhbCBhZGRyZXNzZXMgKi8NCiAgICAgICAgaWNvQ29udHJhY3RBZGRyZXNzID0gX2ljb0NvbnRyYWN0QWRkcmVzczsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBudW13b3Jkcykgew0KICAgICAgICBhc3NlcnQobXNnLmRhdGEubGVuZ3RoID09IG51bXdvcmRzICogMzIgKyA0KTsNCiAgICAgICAgXzsNCiAgICB9IA0KDQogICAgLyogVGhpcyBtb2RpZmllciBhbGxvd3MgYSBtZXRob2QgdG8gb25seSBiZSBjYWxsZWQgYnkgYWNjb3VudCByZWFkZXJzICovDQogICAgbW9kaWZpZXIgYWNjb3VudFJlYWRlck9ubHkgew0KICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uTWFuYWdlci5pc0N1cnJlbnRBY2NvdW50UmVhZGVyKG1zZy5zZW5kZXIpKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBtb2RpZmllciBmdW5kU2VuZGFibGVQaGFzZSB7DQogICAgICAgIC8vIElmIGl0J3MgaW4gSUNPIHBoYXNlLCBmb3JiaWQgaXQNCiAgICAgICAgaWYgKGljb1BoYXNlTWFuYWdlbWVudC5pY29QaGFzZSgpKQ0KICAgICAgICAgICAgdGhyb3c7DQoNCiAgICAgICAgLy8gSWYgaXQncyBhYmFuZG9uZWQsIGZvcmJpZCBpdA0KICAgICAgICBpZiAoaWNvUGhhc2VNYW5hZ2VtZW50Lmljb0FiYW5kb25lZCgpKQ0KICAgICAgICAgICAgdGhyb3c7DQoNCiAgICAgICAgLy8gV2UncmUgZ29vZCwgZnVuZHMgY2FuIG5vdyBiZSB0cmFuc2ZlcnJlZA0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8qIEdldHMgdGhlIGNvbnRyYWN0IHZlcnNpb24gZm9yIHZhbGlkYXRpb24gKi8NCiAgICBmdW5jdGlvbiBjb250cmFjdFZlcnNpb24oKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsNCiAgICAgICAgLyogU0lGVCBjb250cmFjdCBpZGVudGlmaWVzIGFzIDUwMFlZWVlNTURESEhNTSAqLw0KICAgICAgICByZXR1cm4gNTAwMjAxNzA3MTcxNDQwOw0KICAgIH0NCiAgICANCiAgICAvKiBUcmFuc2ZlciBmdW5kcyBiZXR3ZWVuIHR3byBhZGRyZXNzZXMgdGhhdCBhcmUgbm90IHRoZSBjdXJyZW50IG1zZy5zZW5kZXIgLSB0aGlzIHJlcXVpcmVzIGFwcHJvdmFsIHRvIGhhdmUgYmVlbiBzZXQgc2VwYXJhdGVseSBhbmQgZm9sbG93cyBzdGFuZGFyZCBFUkMyMCBndWlkZWxpbmVzICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIGZ1bmRTZW5kYWJsZVBoYXNlIG9ubHlQYXlsb2FkU2l6ZSgzKSByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudCAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICYmIF9hbW91bnQgPiAwICYmIGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpID4gYmFsYW5jZXNbX3RvXSkgew0KICAgICAgICAgICAgYm9vbCBpc05ldyA9IGJhbGFuY2VzW190b10gPT0gMDsNCiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX2Ftb3VudCk7DQogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsNCiAgICAgICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsNCiAgICAgICAgICAgIGlmIChpc05ldykNCiAgICAgICAgICAgICAgICB0b2tlbk93bmVyQWRkKF90byk7DQogICAgICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID09IDApDQogICAgICAgICAgICAgICAgdG9rZW5Pd25lclJlbW92ZShfZnJvbSk7DQogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICAvKiBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2YgaG9sZGVycyBvZiB0aGlzIGN1cnJlbmN5LiAqLw0KICAgIGZ1bmN0aW9uIHRva2VuSG9sZGVyQ291bnQoKSBhY2NvdW50UmVhZGVyT25seSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICAgIHJldHVybiBhbGxUb2tlbkhvbGRlcnMubGVuZ3RoOw0KICAgIH0NCg0KICAgIC8qIEdldHMgdGhlIHRva2VuIGhvbGRlciBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LiAqLw0KICAgIGZ1bmN0aW9uIHRva2VuSG9sZGVyKHVpbnQyNTYgX2luZGV4KSBhY2NvdW50UmVhZGVyT25seSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7DQogICAgICAgIHJldHVybiBhbGxUb2tlbkhvbGRlcnNbX2luZGV4XTsNCiAgICB9DQogDQogICAgLyogQWRkcyBhbiBhcHByb3ZhbCBmb3IgdGhlIHNwZWNpZmllZCBhY2NvdW50IHRvIHNwZW5kIG1vbmV5IG9mIHRoZSBtZXNzYWdlIHNlbmRlciB1cCB0byB0aGUgZGVmaW5lZCBsaW1pdCAqLw0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSBmdW5kU2VuZGFibGVQaGFzZSBvbmx5UGF5bG9hZFNpemUoMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsNCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKiBHZXRzIHRoZSBjdXJyZW50IGFsbG93YW5jZSB0aGF0IGhhcyBiZWVuIGFwcHJvdmVkIGZvciB0aGUgc3BlY2lmaWVkIHNwZW5kZXIgb2YgdGhlIG93bmVyIGFkZHJlc3MgKi8NCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7DQogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOw0KICAgIH0NCg0KICAgIC8qIEdldHMgdGhlIHRvdGFsIHN1cHBseSBhdmFpbGFibGUgb2YgdGhpcyB0b2tlbiAqLw0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgICByZXR1cm4gdG90YWxTdXBwbHlBbW91bnQ7DQogICAgfQ0KDQogICAgLyogR2V0cyB0aGUgYmFsYW5jZSBvZiBhIHNwZWNpZmllZCBhY2NvdW50ICovDQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsNCiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogICAgfQ0KDQogICAgLyogVHJhbnNmZXIgdGhlIGJhbGFuY2UgZnJvbSBvd25lcidzIGFjY291bnQgdG8gYW5vdGhlciBhY2NvdW50ICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgZnVuZFNlbmRhYmxlUGhhc2Ugb25seVBheWxvYWRTaXplKDIpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgLyogQ2hlY2sgaWYgc2VuZGVyIGhhcyBiYWxhbmNlIGFuZCBmb3Igb3ZlcmZsb3dzICovDQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IF9hbW91bnQgfHwgYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCkgPCBiYWxhbmNlc1tfdG9dKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIC8qIERvIGEgY2hlY2sgdG8gc2VlIGlmIHRoZXkgYXJlIG5ldywgaWYgc28gd2UnbGwgd2FudCB0byBhZGQgaXQgdG8gb3VyIGFycmF5ICovDQogICAgICAgIGJvb2wgaXNSZWNpcGllbnROZXcgPSBiYWxhbmNlc1tfdG9dIDwgMTsNCg0KICAgICAgICAvKiBBZGQgYW5kIHN1YnRyYWN0IG5ldyBiYWxhbmNlcyAqLw0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsNCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOw0KDQogICAgICAgIC8qIENvbnNvbGlkYXRlIGFycmF5cyBpZiB0aGV5IGFyZSBuZXcgb3IgaWYgc2VuZGVyIG5vdyBoYXMgZW1wdHkgYmFsYW5jZSAqLw0KICAgICAgICBpZiAoaXNSZWNpcGllbnROZXcpDQogICAgICAgICAgICB0b2tlbk93bmVyQWRkKF90byk7DQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IDEpDQogICAgICAgICAgICB0b2tlbk93bmVyUmVtb3ZlKG1zZy5zZW5kZXIpOw0KDQogICAgICAgIC8qIEZpcmUgbm90aWZpY2F0aW9uIGV2ZW50ICovDQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qIElmIHRoZSBzcGVjaWZpZWQgYWRkcmVzcyBpcyBub3QgaW4gb3VyIG93bmVyIGxpc3QsIGFkZCB0aGVtIC0gdGhpcyBjYW4gYmUgY2FsbGVkIGJ5IGRlc2NlbmRlbnRzIHRvIGVuc3VyZSB0aGUgZGF0YWJhc2UgaXMga2VwdCB1cCB0byBkYXRlLiAqLw0KICAgIGZ1bmN0aW9uIHRva2VuT3duZXJBZGQoYWRkcmVzcyBfYWRkcikgaW50ZXJuYWwgew0KICAgICAgICAvKiBGaXJzdCBjaGVjayBpZiB0aGV5IGFscmVhZHkgZXhpc3QgKi8NCiAgICAgICAgdWludDI1NiB0b2tlbkhvbGRlckNvdW50ID0gYWxsVG9rZW5Ib2xkZXJzLmxlbmd0aDsNCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgdG9rZW5Ib2xkZXJDb3VudDsgaSsrKQ0KICAgICAgICAgICAgaWYgKGFsbFRva2VuSG9sZGVyc1tpXSA9PSBfYWRkcikNCiAgICAgICAgICAgICAgICAvKiBBbHJlYWR5IGZvdW5kIHNvIHdlIGNhbiBhYm9ydCBub3cgKi8NCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgIA0KICAgICAgICAvKiBUaGV5IGRvbid0IHNlZW0gdG8gZXhpc3QsIHNvIGxldCdzIGFkZCB0aGVtICovDQogICAgICAgIGFsbFRva2VuSG9sZGVycy5sZW5ndGgrKzsNCiAgICAgICAgYWxsVG9rZW5Ib2xkZXJzW2FsbFRva2VuSG9sZGVycy5sZW5ndGggLSAxXSA9IF9hZGRyOw0KICAgIH0NCg0KICAgIC8qIElmIHRoZSBzcGVjaWZpZWQgYWRkcmVzcyBpcyBpbiBvdXIgb3duZXIgbGlzdCwgcmVtb3ZlIHRoZW0gLSB0aGlzIGNhbiBiZSBjYWxsZWQgYnkgZGVzY2VuZGVudHMgdG8gZW5zdXJlIHRoZSBkYXRhYmFzZSBpcyBrZXB0IHVwIHRvIGRhdGUuICovDQogICAgZnVuY3Rpb24gdG9rZW5Pd25lclJlbW92ZShhZGRyZXNzIF9hZGRyKSBpbnRlcm5hbCB7DQogICAgICAgIC8qIEZpbmQgb3V0IHdoZXJlIGluIG91ciBhcnJheSB0aGV5IGFyZSAqLw0KICAgICAgICB1aW50MjU2IHRva2VuSG9sZGVyQ291bnQgPSBhbGxUb2tlbkhvbGRlcnMubGVuZ3RoOw0KICAgICAgICB1aW50MjU2IGZvdW5kSW5kZXggPSAwOw0KICAgICAgICBib29sIGZvdW5kID0gZmFsc2U7DQogICAgICAgIHVpbnQyNTYgaTsNCiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRva2VuSG9sZGVyQ291bnQ7IGkrKykNCiAgICAgICAgICAgIGlmIChhbGxUb2tlbkhvbGRlcnNbaV0gPT0gX2FkZHIpIHsNCiAgICAgICAgICAgICAgICBmb3VuZEluZGV4ID0gaTsNCiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvKiBJZiB3ZSBkaWRuJ3QgZmluZCB0aGVtIGp1c3QgcmV0dXJuICovDQogICAgICAgIGlmICghZm91bmQpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIA0KICAgICAgICAvKiBXZSBub3cgbmVlZCB0byBzaHVmZmxlIGRvd24gdGhlIGFycmF5ICovDQogICAgICAgIGZvciAoaSA9IGZvdW5kSW5kZXg7IGkgPCB0b2tlbkhvbGRlckNvdW50IC0gMTsgaSsrKQ0KICAgICAgICAgICAgYWxsVG9rZW5Ib2xkZXJzW2ldID0gYWxsVG9rZW5Ib2xkZXJzW2kgKyAxXTsNCiAgICAgICAgYWxsVG9rZW5Ib2xkZXJzLmxlbmd0aC0tOw0KICAgIH0NCg0KICAgIC8qIE1pbnQgbmV3IHRva2VucyAtIHRoaXMgY2FuIG9ubHkgYmUgZG9uZSBieSBzcGVjaWFsIGNhbGxlcnMgKGkuZS4gdGhlIElDTyBtYW5hZ2VtZW50KSBkdXJpbmcgdGhlIElDTyBwaGFzZS4gKi8NCiAgICBmdW5jdGlvbiBtaW50VG9rZW5zKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX2Ftb3VudCkgb25seVBheWxvYWRTaXplKDIpIHsNCiAgICAgICAgLyogRW5zdXJlIHdlIGFyZSB0aGUgSUNPIGNvbnRyYWN0IGNhbGxpbmcgKi8NCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gaWNvQ29udHJhY3RBZGRyZXNzIHx8ICFpY29QaGFzZU1hbmFnZW1lbnQuaWNvUGhhc2UoKSkNCiAgICAgICAgICAgIHRocm93Ow0KDQogICAgICAgIC8qIE1pbnQgdGhlIHRva2VucyBmb3IgdGhlIG5ldyBhZGRyZXNzKi8NCiAgICAgICAgYm9vbCBpc05ldyA9IGJhbGFuY2VzW19hZGRyZXNzXSA9PSAwOw0KICAgICAgICB0b3RhbFN1cHBseUFtb3VudCA9IHRvdGFsU3VwcGx5QW1vdW50LmFkZChfYW1vdW50KTsNCiAgICAgICAgYmFsYW5jZXNbX2FkZHJlc3NdID0gYmFsYW5jZXNbX2FkZHJlc3NdLmFkZChfYW1vdW50KTsNCiAgICAgICAgaWYgKGlzTmV3KQ0KICAgICAgICAgICAgdG9rZW5Pd25lckFkZChfYWRkcmVzcyk7DQogICAgICAgIFRyYW5zZmVyKDAsIF9hZGRyZXNzLCBfYW1vdW50KTsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IEljb1BoYXNlTWFuYWdlbWVudCB7DQogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7DQogICAgDQogICAgLyogRGVmaW5lcyB3aGV0aGVyIG9yIG5vdCB3ZSBhcmUgaW4gdGhlIElDTyBwaGFzZSAqLw0KICAgIGJvb2wgcHVibGljIGljb1BoYXNlID0gdHJ1ZTsNCg0KICAgIC8qIERlZmluZXMgd2hldGhlciBvciBub3QgdGhlIElDTyBoYXMgYmVlbiBhYmFuZG9uZWQgKi8NCiAgICBib29sIHB1YmxpYyBpY29BYmFuZG9uZWQgPSBmYWxzZTsNCg0KICAgIC8qIERlZmluZXMgd2hldGhlciBvciBub3QgdGhlIFNJRlQgY29udHJhY3QgYWRkcmVzcyBoYXMgeWV0IGJlZW4gc2V0LiAgKi8NCiAgICBib29sIHNpZnRDb250cmFjdERlZmluZWQgPSBmYWxzZTsNCiAgICANCiAgICAvKiBEZWZpbmVzIHRoZSBzYWxlIHByaWNlIGR1cmluZyBJQ08gKi8NCiAgICB1aW50MjU2IGNvbnN0YW50IGljb1VuaXRQcmljZSA9IDEwIGZpbm5leTsNCg0KICAgIC8qIElmIGFuIElDTyBpcyBhYmFuZG9uZWQgYW5kIHNvbWUgd2l0aGRyYXdhbHMgZmFpbCB0aGVuIHRoaXMgbWFwIGFsbG93cyBwZW9wbGUgdG8gcmVxdWVzdCB3aXRoZHJhd2FsIG9mIGxvY2tlZC1pbiBldGhlci4gKi8NCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGFiYW5kb25lZEljb0JhbGFuY2VzOw0KDQogICAgLyogRGVmaW5lcyBvdXIgaW50ZXJmYWNlIHRvIHRoZSBTSUZUIGNvbnRyYWN0LiAqLw0KICAgIFNtYXJ0SW52ZXN0bWVudEZ1bmRUb2tlbiBzbWFydEludmVzdG1lbnRGdW5kVG9rZW47DQoNCiAgICAvKiBEZWZpbmVzIHRoZSBhZG1pbiBjb250cmFjdCB3ZSBpbnRlcmZhY2Ugd2l0aCBmb3IgY3JlZGVudGFpbHMuICovDQogICAgQXV0aGVudGljYXRpb25NYW5hZ2VyIGF1dGhlbnRpY2F0aW9uTWFuYWdlcjsNCg0KICAgIC8qIERlZmluZXMgdGhlIHRpbWUgdGhhdCB0aGUgSUNPIHN0YXJ0cy4gKi8NCiAgICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBpY29TdGFydFRpbWUgPSAxNTAxNTQ1NjAwOyAvLyBBdWd1c3QgMXN0IDIwMTcgYXQgMDA6MDA6MDAgVVRDDQoNCiAgICAvKiBEZWZpbmVzIHRoZSB0aW1lIHRoYXQgdGhlIElDTyBlbmRzLiAqLw0KICAgIHVpbnQyNTYgY29uc3RhbnQgcHVibGljIGljb0VuZFRpbWUgPSAxNTA1NDMzNjAwOyAvLyBTZXB0ZW1iZXIgMTV0aCAyMDE3IGF0IDAwOjAwOjAwIFVUQw0KDQogICAgLyogRGVmaW5lcyBvdXIgZXZlbnQgZmlyZWQgd2hlbiB0aGUgSUNPIGlzIGNsb3NlZCAqLw0KICAgIGV2ZW50IEljb0Nsb3NlZCgpOw0KDQogICAgLyogRGVmaW5lcyBvdXIgZXZlbnQgZmlyZWQgaWYgdGhlIElDTyBpcyBhYmFuZG9uZWQgKi8NCiAgICBldmVudCBJY29BYmFuZG9uZWQoc3RyaW5nIGRldGFpbHMpOw0KICAgIA0KICAgIC8qIEVuc3VyZXMgdGhhdCBvbmNlIHRoZSBJQ08gaXMgb3ZlciB0aGlzIGNvbnRyYWN0IGNhbm5vdCBiZSB1c2VkIHVudGlsIHRoZSBwb2ludCBpdCBpcyBkZXN0cnVjdGVkLiAqLw0KICAgIG1vZGlmaWVyIG9ubHlEdXJpbmdJY28gew0KICAgICAgICBib29sIGNvbnRyYWN0VmFsaWQgPSBzaWZ0Q29udHJhY3REZWZpbmVkICYmICFzbWFydEludmVzdG1lbnRGdW5kVG9rZW4uaXNDbG9zZWQoKTsNCiAgICAgICAgaWYgKCFjb250cmFjdFZhbGlkIHx8ICghaWNvUGhhc2UgJiYgIWljb0FiYW5kb25lZCkpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8qIFRoaXMgbW9kaWZpZXIgYWxsb3dzIGEgbWV0aG9kIHRvIG9ubHkgYmUgY2FsbGVkIGJ5IGN1cnJlbnQgYWRtaW5zICovDQogICAgbW9kaWZpZXIgYWRtaW5Pbmx5IHsNCiAgICAgICAgaWYgKCFhdXRoZW50aWNhdGlvbk1hbmFnZXIuaXNDdXJyZW50QWRtaW4obXNnLnNlbmRlcikpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8qIENyZWF0ZSB0aGUgSUNPIHBoYXNlIG1hbmFnZXJtZW50IGFuZCBkZWZpbmUgdGhlIGFkZHJlc3Mgb2YgdGhlIG1haW4gU0lGVCBjb250cmFjdC4gKi8NCiAgICBmdW5jdGlvbiBJY29QaGFzZU1hbmFnZW1lbnQoYWRkcmVzcyBfYXV0aGVudGljYXRpb25NYW5hZ2VyQWRkcmVzcykgew0KICAgICAgICAvKiBBIGJhc2ljIHNhbml0eSBjaGVjayAqLw0KICAgICAgICBpZiAoaWNvU3RhcnRUaW1lID49IGljb0VuZFRpbWUpDQogICAgICAgICAgICB0aHJvdzsNCg0KICAgICAgICAvKiBTZXR1cCBhY2Nlc3MgdG8gb3VyIG90aGVyIGNvbnRyYWN0cyBhbmQgdmFsaWRhdGUgdGhlaXIgdmVyc2lvbnMgKi8NCiAgICAgICAgYXV0aGVudGljYXRpb25NYW5hZ2VyID0gQXV0aGVudGljYXRpb25NYW5hZ2VyKF9hdXRoZW50aWNhdGlvbk1hbmFnZXJBZGRyZXNzKTsNCiAgICAgICAgaWYgKGF1dGhlbnRpY2F0aW9uTWFuYWdlci5jb250cmFjdFZlcnNpb24oKSAhPSAxMDAyMDE3MDcxNzE1MDMpDQogICAgICAgICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICAvKiBTZXQgdGhlIFNJRlQgY29udHJhY3QgYWRkcmVzcyBhcyBhIG9uZS10aW1lIG9wZXJhdGlvbi4gIFRoaXMgaGFwcGVucyBhZnRlciBhbGwgdGhlIGNvbnRyYWN0cyBhcmUgY3JlYXRlZCBhbmQgbm8NCiAgICAgICBvdGhlciBmdW5jdGlvbmFsaXR5IGNhbiBiZSB1c2VkIHVudGlsIHRoaXMgaXMgc2V0LiAqLw0KICAgIGZ1bmN0aW9uIHNldFNpZnRDb250cmFjdEFkZHJlc3MoYWRkcmVzcyBfc2lmdENvbnRyYWN0QWRkcmVzcykgYWRtaW5Pbmx5IHsNCiAgICAgICAgLyogVGhpcyBjYW4gb25seSBoYXBwZW4gb25jZSBpbiB0aGUgbGlmZXRpbWUgb2YgdGhpcyBjb250cmFjdCAqLw0KICAgICAgICBpZiAoc2lmdENvbnRyYWN0RGVmaW5lZCkNCiAgICAgICAgICAgIHRocm93Ow0KDQogICAgICAgIC8qIFNldHVwIGFjY2VzcyB0byBvdXIgb3RoZXIgY29udHJhY3RzIGFuZCB2YWxpZGF0ZSB0aGVpciB2ZXJzaW9ucyAqLw0KICAgICAgICBzbWFydEludmVzdG1lbnRGdW5kVG9rZW4gPSBTbWFydEludmVzdG1lbnRGdW5kVG9rZW4oX3NpZnRDb250cmFjdEFkZHJlc3MpOw0KICAgICAgICBpZiAoc21hcnRJbnZlc3RtZW50RnVuZFRva2VuLmNvbnRyYWN0VmVyc2lvbigpICE9IDUwMDIwMTcwNzE3MTQ0MCkNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICBzaWZ0Q29udHJhY3REZWZpbmVkID0gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKiBHZXRzIHRoZSBjb250cmFjdCB2ZXJzaW9uIGZvciB2YWxpZGF0aW9uICovDQogICAgZnVuY3Rpb24gY29udHJhY3RWZXJzaW9uKCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7DQogICAgICAgIC8qIElDTyBjb250cmFjdCBpZGVudGlmaWVzIGFzIDMwMFlZWVlNTURESEhNTSAqLw0KICAgICAgICByZXR1cm4gMzAwMjAxNzA3MTcxNDQwOw0KICAgIH0NCg0KICAgIC8qIENsb3NlIHRoZSBJQ08gcGhhc2UgYW5kIHRyYW5zaXRpb24gdG8gZXhlY3V0aW9uIHBoYXNlICovDQogICAgZnVuY3Rpb24gY2xvc2UoKSBhZG1pbk9ubHkgb25seUR1cmluZ0ljbyB7DQogICAgICAgIC8vIEZvcmJpZCBjbG9zaW5nIGNvbnRyYWN0IGJlZm9yZSB0aGUgZW5kIG9mIElDTw0KICAgICAgICBpZiAobm93IDw9IGljb0VuZFRpbWUpDQogICAgICAgICAgICB0aHJvdzsNCg0KICAgICAgICAvLyBDbG9zZSB0aGUgSUNPDQogICAgICAgIGljb1BoYXNlID0gZmFsc2U7DQogICAgICAgIEljb0Nsb3NlZCgpOw0KDQogICAgICAgIC8vIFdpdGhkcmF3IGZ1bmRzIHRvIHRoZSBjYWxsZXINCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQodGhpcy5iYWxhbmNlKSkNCiAgICAgICAgICAgIHRocm93Ow0KICAgIH0NCiAgICANCiAgICAvKiBIYW5kbGUgcmVjZWl2aW5nIGV0aGVyIGluIElDTyBwaGFzZSAtIHdlIHdvcmsgb3V0IGhvdyBtdWNoIHRoZSB1c2VyIGhhcyBib3VnaHQsIGFsbG9jYXRlIGEgc3VpdGFibGUgYmFsYW5jZSBhbmQgc2VuZCB0aGVpciBjaGFuZ2UgKi8NCiAgICBmdW5jdGlvbiAoKSBvbmx5RHVyaW5nSWNvIHBheWFibGUgew0KICAgICAgICAvLyBGb3JiaWQgZnVuZGluZyBvdXRzaWRlIG9mIElDTw0KICAgICAgICBpZiAobm93IDwgaWNvU3RhcnRUaW1lIHx8IG5vdyA+IGljb0VuZFRpbWUpDQogICAgICAgICAgICB0aHJvdzsNCg0KICAgICAgICAvKiBEZXRlcm1pbmUgaG93IG11Y2ggdGhleSd2ZSBhY3R1YWxseSBwdXJoY2FzZWQgYW5kIGFueSBldGhlciBjaGFuZ2UgKi8NCiAgICAgICAgdWludDI1NiB0b2tlbnNQdXJjaGFzZWQgPSBtc2cudmFsdWUgLyBpY29Vbml0UHJpY2U7DQogICAgICAgIHVpbnQyNTYgcHVyY2hhc2VUb3RhbFByaWNlID0gdG9rZW5zUHVyY2hhc2VkICogaWNvVW5pdFByaWNlOw0KICAgICAgICB1aW50MjU2IGNoYW5nZSA9IG1zZy52YWx1ZS5zdWIocHVyY2hhc2VUb3RhbFByaWNlKTsNCg0KICAgICAgICAvKiBJbmNyZWFzZSB0aGVpciBuZXcgYmFsYW5jZSBpZiB0aGV5IGFjdHVhbGx5IHB1cmNoYXNlZCBhbnkgKi8NCiAgICAgICAgaWYgKHRva2Vuc1B1cmNoYXNlZCA+IDApDQogICAgICAgICAgICBzbWFydEludmVzdG1lbnRGdW5kVG9rZW4ubWludFRva2Vucyhtc2cuc2VuZGVyLCB0b2tlbnNQdXJjaGFzZWQpOw0KDQogICAgICAgIC8qIFNlbmQgY2hhbmdlIGJhY2sgdG8gcmVjaXBpZW50ICovDQogICAgICAgIGlmIChjaGFuZ2UgPiAwICYmICFtc2cuc2VuZGVyLnNlbmQoY2hhbmdlKSkNCiAgICAgICAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIC8qIEFiYW5kb25zIHRoZSBJQ08gYW5kIHJldHVybnMgZnVuZHMgdG8gc2hhcmVob2xkZXJzLiAgQW55IGZhaWxlZCBmdW5kcyBjYW4gYmUgc2VwYXJhdGVseSB3aXRoZHJhd24gb25jZSB0aGUgSUNPIGlzIGFiYW5kb25lZC4gKi8NCiAgICBmdW5jdGlvbiBhYmFuZG9uKHN0cmluZyBkZXRhaWxzKSBhZG1pbk9ubHkgb25seUR1cmluZ0ljbyB7DQogICAgICAgIC8vIEZvcmJpZCBjbG9zaW5nIGNvbnRyYWN0IGJlZm9yZSB0aGUgZW5kIG9mIElDTw0KICAgICAgICBpZiAobm93IDw9IGljb0VuZFRpbWUpDQogICAgICAgICAgICB0aHJvdzsNCg0KICAgICAgICAvKiBJZiBhbHJlYWR5IGFiYW5kb25lZCB0aHJvdyBhbiBlcnJvciAqLw0KICAgICAgICBpZiAoaWNvQWJhbmRvbmVkKQ0KICAgICAgICAgICAgdGhyb3c7DQoNCiAgICAgICAgLyogV29yayBvdXQgYSByZWZ1bmQgcGVyIHNoYXJlIHBlciBzaGFyZSAqLw0KICAgICAgICB1aW50MjU2IHBheW1lbnRQZXJTaGFyZSA9IHRoaXMuYmFsYW5jZSAvIHNtYXJ0SW52ZXN0bWVudEZ1bmRUb2tlbi50b3RhbFN1cHBseSgpOw0KDQogICAgICAgIC8qIEVudW0gYWxsIGFjY291bnRzIGFuZCBzZW5kIHRoZW0gcmVmdW5kICovDQogICAgICAgIHVpbnQgbnVtYmVyVG9rZW5Ib2xkZXJzID0gc21hcnRJbnZlc3RtZW50RnVuZFRva2VuLnRva2VuSG9sZGVyQ291bnQoKTsNCiAgICAgICAgdWludDI1NiB0b3RhbEFiYW5kb25lZCA9IDA7DQogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IG51bWJlclRva2VuSG9sZGVyczsgaSsrKSB7DQogICAgICAgICAgICAvKiBDYWxjdWxhdGUgaG93IG11Y2ggZ29lcyB0byB0aGlzIHNoYXJlaG9sZGVyICovDQogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBzbWFydEludmVzdG1lbnRGdW5kVG9rZW4udG9rZW5Ib2xkZXIoaSk7DQogICAgICAgICAgICB1aW50MjU2IGV0aGVyVG9TZW5kID0gcGF5bWVudFBlclNoYXJlICogc21hcnRJbnZlc3RtZW50RnVuZFRva2VuLmJhbGFuY2VPZihhZGRyKTsNCiAgICAgICAgICAgIGlmIChldGhlclRvU2VuZCA8IDEpDQogICAgICAgICAgICAgICAgY29udGludWU7DQoNCiAgICAgICAgICAgIC8qIEFsbG9jYXRlIGFwcHJvcHJpYXRlIGFtb3VudCBvZiBmdW5kIHRvIHRoZW0gKi8NCiAgICAgICAgICAgIGFiYW5kb25lZEljb0JhbGFuY2VzW2FkZHJdID0gYWJhbmRvbmVkSWNvQmFsYW5jZXNbYWRkcl0uYWRkKGV0aGVyVG9TZW5kKTsNCiAgICAgICAgICAgIHRvdGFsQWJhbmRvbmVkID0gdG90YWxBYmFuZG9uZWQuYWRkKGV0aGVyVG9TZW5kKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIEF1ZGl0IHRoZSBhYmFuZG9ubWVudCAqLw0KICAgICAgICBpY29BYmFuZG9uZWQgPSB0cnVlOw0KICAgICAgICBJY29BYmFuZG9uZWQoZGV0YWlscyk7DQoNCiAgICAgICAgLy8gVGhlcmUgc2hvdWxkIGJlIG5vIG1vbmV5IGxlZnQsIGJ1dCB3aXRoZHJhdyBqdXN0IGluY2FzZSBmb3IgbWFudWFsIHJlc29sdXRpb24NCiAgICAgICAgdWludDI1NiByZW1haW5kZXIgPSB0aGlzLmJhbGFuY2Uuc3ViKHRvdGFsQWJhbmRvbmVkKTsNCiAgICAgICAgaWYgKHJlbWFpbmRlciA+IDApDQogICAgICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChyZW1haW5kZXIpKQ0KICAgICAgICAgICAgICAgIC8vIEFkZCB0aGlzIHRvIHRoZSBjYWxsZXJzIGJhbGFuY2UgZm9yIGVtZXJnZW5jeSByZWZ1bmRzDQogICAgICAgICAgICAgICAgYWJhbmRvbmVkSWNvQmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBhYmFuZG9uZWRJY29CYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQocmVtYWluZGVyKTsNCiAgICB9DQoNCiAgICAvKiBBbGxvd3MgcGVvcGxlIHRvIHdpdGhkcmF3IGZ1bmRzIHRoYXQgZmFpbGVkIHRvIHNlbmQgZHVyaW5nIHRoZSBhYmFuZG9ubWVudCBvZiB0aGUgSUNPIGZvciBhbnkgcmVhc29uLiAqLw0KICAgIGZ1bmN0aW9uIGFiYW5kb25lZEZ1bmRXaXRoZHJhd2FsKCkgew0KICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uYWxpdHkgb25seSBleGlzdHMgaWYgYW4gSUNPIHdhcyBhYmFuZG9uZWQNCiAgICAgICAgaWYgKCFpY29BYmFuZG9uZWQgfHwgYWJhbmRvbmVkSWNvQmFsYW5jZXNbbXNnLnNlbmRlcl0gPT0gMCkNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICANCiAgICAgICAgLy8gQXR0ZW1wdCB0byBzZW5kIHRoZW0gdG8gZnVuZHMNCiAgICAgICAgdWludDI1NiBmdW5kcyA9IGFiYW5kb25lZEljb0JhbGFuY2VzW21zZy5zZW5kZXJdOw0KICAgICAgICBhYmFuZG9uZWRJY29CYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7DQogICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKGZ1bmRzKSkNCiAgICAgICAgICAgIHRocm93Ow0KICAgIH0NCn0NCg0KLyogVGhlIGF1dGhlbnRpY2F0aW9uIG1hbmFnZXIgZGV0YWlscyB1c2VyIGFjY291bnRzIHRoYXQgaGF2ZSBhY2Nlc3MgdG8gY2VydGFpbiBwcml2aWxlZGdlcyBhbmQga2VlcHMgYSBwZXJtYW5lbnQgbGVkZ2VyIG9mIHdobyBoYXMgYW5kIGhhcyBoYWQgdGhlc2UgcmlnaHRzLiAqLw0KY29udHJhY3QgQXV0aGVudGljYXRpb25NYW5hZ2VyIHsNCiAgICAvKiBNYXAgYWRkcmVzc2VzIHRvIGFkbWlucyAqLw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgYWRtaW5BZGRyZXNzZXM7DQoNCiAgICAvKiBNYXAgYWRkcmVzc2VzIHRvIGFjY291bnQgcmVhZGVycyAqLw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgYWNjb3VudFJlYWRlckFkZHJlc3NlczsNCg0KICAgIC8qIERldGFpbHMgb2YgYWxsIGFkbWlucyB0aGF0IGhhdmUgZXZlciBleGlzdGVkICovDQogICAgYWRkcmVzc1tdIGFkbWluQXVkaXQ7DQoNCiAgICAvKiBEZXRhaWxzIG9mIGFsbCBhY2NvdW50IHJlYWRlcnMgdGhhdCBoYXZlIGV2ZXIgZXhpc3RlZCAqLw0KICAgIGFkZHJlc3NbXSBhY2NvdW50UmVhZGVyQXVkaXQ7DQoNCiAgICAvKiBGaXJlZCB3aGVuZXZlciBhbiBhZG1pbiBpcyBhZGRlZCB0byB0aGUgY29udHJhY3QuICovDQogICAgZXZlbnQgQWRtaW5BZGRlZChhZGRyZXNzIGFkZGVkQnksIGFkZHJlc3MgYWRtaW4pOw0KDQogICAgLyogRmlyZWQgd2hlbmV2ZXIgYW4gYWRtaW4gaXMgcmVtb3ZlZCBmcm9tIHRoZSBjb250cmFjdC4gKi8NCiAgICBldmVudCBBZG1pblJlbW92ZWQoYWRkcmVzcyByZW1vdmVkQnksIGFkZHJlc3MgYWRtaW4pOw0KDQogICAgLyogRmlyZWQgd2hlbmV2ZXIgYW4gYWNjb3VudC1yZWFkZXIgY29udHJhY3QgaXMgYWRkZWQuICovDQogICAgZXZlbnQgQWNjb3VudFJlYWRlckFkZGVkKGFkZHJlc3MgYWRkZWRCeSwgYWRkcmVzcyBhY2NvdW50KTsNCg0KICAgIC8qIEZpcmVkIHdoZW5ldmVyIGFuIGFjY291bnQtcmVhZGVyIGNvbnRyYWN0IGlzIHJlbW92ZWQuICovDQogICAgZXZlbnQgQWNjb3VudFJlYWRlclJlbW92ZWQoYWRkcmVzcyByZW1vdmVkQnksIGFkZHJlc3MgYWNjb3VudCk7DQoNCiAgICAvKiBXaGVuIHRoaXMgY29udHJhY3QgaXMgZmlyc3Qgc2V0dXAgd2UgdXNlIHRoZSBjcmVhdG9yIGFzIHRoZSBmaXJzdCBhZG1pbiAqLyAgICANCiAgICBmdW5jdGlvbiBBdXRoZW50aWNhdGlvbk1hbmFnZXIoKSB7DQogICAgICAgIC8qIFNldCB0aGUgZmlyc3QgYWRtaW4gdG8gYmUgdGhlIHBlcnNvbiBjcmVhdGluZyB0aGUgY29udHJhY3QgKi8NCiAgICAgICAgYWRtaW5BZGRyZXNzZXNbbXNnLnNlbmRlcl0gPSB0cnVlOw0KICAgICAgICBBZG1pbkFkZGVkKDAsIG1zZy5zZW5kZXIpOw0KICAgICAgICBhZG1pbkF1ZGl0Lmxlbmd0aCsrOw0KICAgICAgICBhZG1pbkF1ZGl0W2FkbWluQXVkaXQubGVuZ3RoIC0gMV0gPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KICAgIC8qIEdldHMgdGhlIGNvbnRyYWN0IHZlcnNpb24gZm9yIHZhbGlkYXRpb24gKi8NCiAgICBmdW5jdGlvbiBjb250cmFjdFZlcnNpb24oKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsNCiAgICAgICAgLy8gQWRtaW4gY29udHJhY3QgaWRlbnRpZmllcyBhcyAxMDBZWVlZTU1EREhITU0NCiAgICAgICAgcmV0dXJuIDEwMDIwMTcwNzE3MTUwMzsNCiAgICB9DQoNCiAgICAvKiBHZXRzIHdoZXRoZXIgb3Igbm90IHRoZSBzcGVjaWZpZWQgYWRkcmVzcyBpcyBjdXJyZW50bHkgYW4gYWRtaW4gKi8NCiAgICBmdW5jdGlvbiBpc0N1cnJlbnRBZG1pbihhZGRyZXNzIF9hZGRyZXNzKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiBhZG1pbkFkZHJlc3Nlc1tfYWRkcmVzc107DQogICAgfQ0KDQogICAgLyogR2V0cyB3aGV0aGVyIG9yIG5vdCB0aGUgc3BlY2lmaWVkIGFkZHJlc3MgaGFzIGV2ZXIgYmVlbiBhbiBhZG1pbiAqLw0KICAgIGZ1bmN0aW9uIGlzQ3VycmVudE9yUGFzdEFkbWluKGFkZHJlc3MgX2FkZHJlc3MpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgYWRtaW5BdWRpdC5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgIGlmIChhZG1pbkF1ZGl0W2ldID09IF9hZGRyZXNzKQ0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLyogR2V0cyB3aGV0aGVyIG9yIG5vdCB0aGUgc3BlY2lmaWVkIGFkZHJlc3MgaXMgY3VycmVudGx5IGFuIGFjY291bnQgcmVhZGVyICovDQogICAgZnVuY3Rpb24gaXNDdXJyZW50QWNjb3VudFJlYWRlcihhZGRyZXNzIF9hZGRyZXNzKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiBhY2NvdW50UmVhZGVyQWRkcmVzc2VzW19hZGRyZXNzXTsNCiAgICB9DQoNCiAgICAvKiBHZXRzIHdoZXRoZXIgb3Igbm90IHRoZSBzcGVjaWZpZWQgYWRkcmVzcyBoYXMgZXZlciBiZWVuIGFuIGFkbWluICovDQogICAgZnVuY3Rpb24gaXNDdXJyZW50T3JQYXN0QWNjb3VudFJlYWRlcihhZGRyZXNzIF9hZGRyZXNzKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGFjY291bnRSZWFkZXJBdWRpdC5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgIGlmIChhY2NvdW50UmVhZGVyQXVkaXRbaV0gPT0gX2FkZHJlc3MpDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICAvKiBBZGRzIGEgdXNlciB0byBvdXIgbGlzdCBvZiBhZG1pbnMgKi8NCiAgICBmdW5jdGlvbiBhZGRBZG1pbihhZGRyZXNzIF9hZGRyZXNzKSB7DQogICAgICAgIC8qIEVuc3VyZSB3ZSdyZSBhbiBhZG1pbiAqLw0KICAgICAgICBpZiAoIWlzQ3VycmVudEFkbWluKG1zZy5zZW5kZXIpKQ0KICAgICAgICAgICAgdGhyb3c7DQoNCiAgICAgICAgLy8gRmFpbCBpZiB0aGlzIGFjY291bnQgaXMgYWxyZWFkeSBhZG1pbg0KICAgICAgICBpZiAoYWRtaW5BZGRyZXNzZXNbX2FkZHJlc3NdKQ0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIA0KICAgICAgICAvLyBBZGQgdGhlIHVzZXINCiAgICAgICAgYWRtaW5BZGRyZXNzZXNbX2FkZHJlc3NdID0gdHJ1ZTsNCiAgICAgICAgQWRtaW5BZGRlZChtc2cuc2VuZGVyLCBfYWRkcmVzcyk7DQogICAgICAgIGFkbWluQXVkaXQubGVuZ3RoKys7DQogICAgICAgIGFkbWluQXVkaXRbYWRtaW5BdWRpdC5sZW5ndGggLSAxXSA9IF9hZGRyZXNzOw0KICAgIH0NCg0KICAgIC8qIFJlbW92ZXMgYSB1c2VyIGZyb20gb3VyIGxpc3Qgb2YgYWRtaW5zIGJ1dCBrZWVwcyB0aGVtIGluIHRoZSBoaXN0b3J5IGF1ZGl0ICovDQogICAgZnVuY3Rpb24gcmVtb3ZlQWRtaW4oYWRkcmVzcyBfYWRkcmVzcykgew0KICAgICAgICAvKiBFbnN1cmUgd2UncmUgYW4gYWRtaW4gKi8NCiAgICAgICAgaWYgKCFpc0N1cnJlbnRBZG1pbihtc2cuc2VuZGVyKSkNCiAgICAgICAgICAgIHRocm93Ow0KDQogICAgICAgIC8qIERvbid0IGFsbG93IHJlbW92YWwgb2Ygc2VsZiAqLw0KICAgICAgICBpZiAoX2FkZHJlc3MgPT0gbXNnLnNlbmRlcikNCiAgICAgICAgICAgIHRocm93Ow0KDQogICAgICAgIC8vIEZhaWwgaWYgdGhpcyBhY2NvdW50IGlzIGFscmVhZHkgbm9uLWFkbWluDQogICAgICAgIGlmICghYWRtaW5BZGRyZXNzZXNbX2FkZHJlc3NdKQ0KICAgICAgICAgICAgdGhyb3c7DQoNCiAgICAgICAgLyogUmVtb3ZlIHRoaXMgYWRtaW4gdXNlciAqLw0KICAgICAgICBhZG1pbkFkZHJlc3Nlc1tfYWRkcmVzc10gPSBmYWxzZTsNCiAgICAgICAgQWRtaW5SZW1vdmVkKG1zZy5zZW5kZXIsIF9hZGRyZXNzKTsNCiAgICB9DQoNCiAgICAvKiBBZGRzIGEgdXNlci9jb250cmFjdCB0byBvdXIgbGlzdCBvZiBhY2NvdW50IHJlYWRlcnMgKi8NCiAgICBmdW5jdGlvbiBhZGRBY2NvdW50UmVhZGVyKGFkZHJlc3MgX2FkZHJlc3MpIHsNCiAgICAgICAgLyogRW5zdXJlIHdlJ3JlIGFuIGFkbWluICovDQogICAgICAgIGlmICghaXNDdXJyZW50QWRtaW4obXNnLnNlbmRlcikpDQogICAgICAgICAgICB0aHJvdzsNCg0KICAgICAgICAvLyBGYWlsIGlmIHRoaXMgYWNjb3VudCBpcyBhbHJlYWR5IGluIHRoZSBsaXN0DQogICAgICAgIGlmIChhY2NvdW50UmVhZGVyQWRkcmVzc2VzW19hZGRyZXNzXSkNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICANCiAgICAgICAgLy8gQWRkIHRoZSB1c2VyDQogICAgICAgIGFjY291bnRSZWFkZXJBZGRyZXNzZXNbX2FkZHJlc3NdID0gdHJ1ZTsNCiAgICAgICAgQWNjb3VudFJlYWRlckFkZGVkKG1zZy5zZW5kZXIsIF9hZGRyZXNzKTsNCiAgICAgICAgYWNjb3VudFJlYWRlckF1ZGl0Lmxlbmd0aCsrOw0KICAgICAgICBhY2NvdW50UmVhZGVyQXVkaXRbYWRtaW5BdWRpdC5sZW5ndGggLSAxXSA9IF9hZGRyZXNzOw0KICAgIH0NCg0KICAgIC8qIFJlbW92ZXMgYSB1c2VyL2NvbnRyYWN0cyBmcm9tIG91ciBsaXN0IG9mIGFjY291bnQgcmVhZGVycyBidXQga2VlcHMgdGhlbSBpbiB0aGUgaGlzdG9yeSBhdWRpdCAqLw0KICAgIGZ1bmN0aW9uIHJlbW92ZUFjY291bnRSZWFkZXIoYWRkcmVzcyBfYWRkcmVzcykgew0KICAgICAgICAvKiBFbnN1cmUgd2UncmUgYW4gYWRtaW4gKi8NCiAgICAgICAgaWYgKCFpc0N1cnJlbnRBZG1pbihtc2cuc2VuZGVyKSkNCiAgICAgICAgICAgIHRocm93Ow0KDQogICAgICAgIC8vIEZhaWwgaWYgdGhpcyBhY2NvdW50IGlzIGFscmVhZHkgbm90IGluIHRoZSBsaXN0DQogICAgICAgIGlmICghYWNjb3VudFJlYWRlckFkZHJlc3Nlc1tfYWRkcmVzc10pDQogICAgICAgICAgICB0aHJvdzsNCg0KICAgICAgICAvKiBSZW1vdmUgdGhpcyBhZG1pbiB1c2VyICovDQogICAgICAgIGFjY291bnRSZWFkZXJBZGRyZXNzZXNbX2FkZHJlc3NdID0gZmFsc2U7DQogICAgICAgIEFjY291bnRSZWFkZXJSZW1vdmVkKG1zZy5zZW5kZXIsIF9hZGRyZXNzKTsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IERpdmlkZW5kTWFuYWdlciB7DQogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7DQoNCiAgICAvKiBPdXIgaGFuZGxlIHRvIHRoZSBTSUZUIGNvbnRyYWN0LiAqLw0KICAgIFNtYXJ0SW52ZXN0bWVudEZ1bmRUb2tlbiBzaWZ0Q29udHJhY3Q7DQoNCiAgICAvKiBIYW5kbGUgcGF5bWVudHMgd2UgY291bGRuJ3QgbWFrZS4gKi8NCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkaXZpZGVuZHM7DQoNCiAgICAvKiBJbmRpY2F0ZXMgYSBwYXltZW50IGlzIG5vdyBhdmFpbGFibGUgdG8gYSBzaGFyZWhvbGRlciAqLw0KICAgIGV2ZW50IFBheW1lbnRBdmFpbGFibGUoYWRkcmVzcyBhZGRyLCB1aW50MjU2IGFtb3VudCk7DQoNCiAgICAvKiBJbmRpY2F0ZXMgYSBkaXZpZGVuZCBwYXltZW50IHdhcyBtYWRlLiAqLw0KICAgIGV2ZW50IERpdmlkZW5kUGF5bWVudCh1aW50MjU2IHBheW1lbnRQZXJTaGFyZSwgdWludDI1NiB0aW1lc3RhbXApOw0KDQogICAgLyogQ3JlYXRlIG91ciBjb250cmFjdCB3aXRoIHJlZmVyZW5jZXMgdG8gb3RoZXIgY29udHJhY3RzIGFzIHJlcXVpcmVkLiAqLw0KICAgIGZ1bmN0aW9uIERpdmlkZW5kTWFuYWdlcihhZGRyZXNzIF9zaWZ0Q29udHJhY3RBZGRyZXNzKSB7DQogICAgICAgIC8qIFNldHVwIGFjY2VzcyB0byBvdXIgb3RoZXIgY29udHJhY3RzIGFuZCB2YWxpZGF0ZSB0aGVpciB2ZXJzaW9ucyAqLw0KICAgICAgICBzaWZ0Q29udHJhY3QgPSBTbWFydEludmVzdG1lbnRGdW5kVG9rZW4oX3NpZnRDb250cmFjdEFkZHJlc3MpOw0KICAgICAgICBpZiAoc2lmdENvbnRyYWN0LmNvbnRyYWN0VmVyc2lvbigpICE9IDUwMDIwMTcwNzE3MTQ0MCkNCiAgICAgICAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIC8qIEdldHMgdGhlIGNvbnRyYWN0IHZlcnNpb24gZm9yIHZhbGlkYXRpb24gKi8NCiAgICBmdW5jdGlvbiBjb250cmFjdFZlcnNpb24oKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsNCiAgICAgICAgLyogRGl2aWRlbmQgY29udHJhY3QgaWRlbnRpZmllcyBhcyA2MDBZWVlZTU1EREhITU0gKi8NCiAgICAgICAgcmV0dXJuIDYwMDIwMTcwNzE3MTQ0MDsNCiAgICB9DQoNCiAgICAvKiBNYWtlcyBhIGRpdmlkZW5kIHBheW1lbnQgLSB3ZSBtYWtlIGl0IGF2YWlsYWJsZSB0byBhbGwgc2VuZGVycyB0aGVuIHNlbmQgdGhlIGNoYW5nZSBiYWNrIHRvIHRoZSBjYWxsZXIuICBXZSBkb24ndCBhY3R1YWxseSBzZW5kIHRoZSBwYXltZW50cyB0byBldmVyeW9uZSB0byByZWR1Y2UgZ2FzIGNvc3QgYW5kIGFsc28gdG8gDQogICAgICAgcHJldmVudCBwb3RlbnRpYWxseSBnZXR0aW5nIGludG8gYSBzaXR1YXRpb24gd2hlcmUgd2UgaGF2ZSByZWNpcGllbnRzIHRocm93aW5nIGNhdXNpbmcgZGl2aWRlbmQgZmFpbHVyZXMgYW5kIGhhdmluZyB0byBjb25zb2xpZGF0ZSB0aGVpciBkaXZpZGVuZHMgaW4gYSBzZXBhcmF0ZSBwcm9jZXNzLiAqLw0KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgew0KICAgICAgICBpZiAoc2lmdENvbnRyYWN0LmlzQ2xvc2VkKCkpDQogICAgICAgICAgICB0aHJvdzsNCg0KICAgICAgICAvKiBEZXRlcm1pbmUgaG93IG11Y2ggdG8gcGF5IGVhY2ggc2hhcmVob2xkZXIuICovDQogICAgICAgIHVpbnQyNTYgdmFsaWRTdXBwbHkgPSBzaWZ0Q29udHJhY3QudG90YWxTdXBwbHkoKTsNCiAgICAgICAgdWludDI1NiBwYXltZW50UGVyU2hhcmUgPSBtc2cudmFsdWUgLyB2YWxpZFN1cHBseTsNCiAgICAgICAgaWYgKHBheW1lbnRQZXJTaGFyZSA9PSAwKQ0KICAgICAgICAgICAgdGhyb3c7DQoNCiAgICAgICAgLyogRW51bSBhbGwgYWNjb3VudHMgYW5kIHNlbmQgdGhlbSBwYXltZW50ICovDQogICAgICAgIHVpbnQyNTYgdG90YWxQYWlkT3V0ID0gMDsNCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgc2lmdENvbnRyYWN0LnRva2VuSG9sZGVyQ291bnQoKTsgaSsrKSB7DQogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBzaWZ0Q29udHJhY3QudG9rZW5Ib2xkZXIoaSk7DQogICAgICAgICAgICB1aW50MjU2IGRpdmlkZW5kID0gcGF5bWVudFBlclNoYXJlICogc2lmdENvbnRyYWN0LmJhbGFuY2VPZihhZGRyKTsNCiAgICAgICAgICAgIGRpdmlkZW5kc1thZGRyXSA9IGRpdmlkZW5kc1thZGRyXS5hZGQoZGl2aWRlbmQpOw0KICAgICAgICAgICAgUGF5bWVudEF2YWlsYWJsZShhZGRyLCBkaXZpZGVuZCk7DQogICAgICAgICAgICB0b3RhbFBhaWRPdXQgPSB0b3RhbFBhaWRPdXQuYWRkKGRpdmlkZW5kKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEF0dGVtcHQgdG8gc2VuZCBjaGFuZ2UNCiAgICAgICAgdWludDI1NiByZW1haW5kZXIgPSBtc2cudmFsdWUuc3ViKHRvdGFsUGFpZE91dCk7DQogICAgICAgIGlmIChyZW1haW5kZXIgPiAwICYmICFtc2cuc2VuZGVyLnNlbmQocmVtYWluZGVyKSkgew0KICAgICAgICAgICAgZGl2aWRlbmRzW21zZy5zZW5kZXJdID0gZGl2aWRlbmRzW21zZy5zZW5kZXJdLmFkZChyZW1haW5kZXIpOw0KICAgICAgICAgICAgUGF5bWVudEF2YWlsYWJsZShtc2cuc2VuZGVyLCByZW1haW5kZXIpOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogQXVkaXQgdGhpcyAqLw0KICAgICAgICBEaXZpZGVuZFBheW1lbnQocGF5bWVudFBlclNoYXJlLCBub3cpOw0KICAgIH0NCg0KICAgIC8qIEFsbG93cyBhIHVzZXIgdG8gcmVxdWVzdCBhIHdpdGhkcmF3YWwgb2YgdGhlaXIgZGl2aWRlbmQgaW4gZnVsbC4gKi8NCiAgICBmdW5jdGlvbiB3aXRoZHJhd0RpdmlkZW5kKCkgew0KICAgICAgICAvLyBFbnN1cmUgd2UgaGF2ZSBkaXZpZGVuZHMgYXZhaWxhYmxlDQogICAgICAgIGlmIChkaXZpZGVuZHNbbXNnLnNlbmRlcl0gPT0gMCkNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICANCiAgICAgICAgLy8gRGV0ZXJtaW5lIGhvdyBtdWNoIHdlJ3JlIHNlbmRpbmcgYW5kIHJlc2V0IHRoZSBjb3VudA0KICAgICAgICB1aW50MjU2IGRpdmlkZW5kID0gZGl2aWRlbmRzW21zZy5zZW5kZXJdOw0KICAgICAgICBkaXZpZGVuZHNbbXNnLnNlbmRlcl0gPSAwOw0KDQogICAgICAgIC8vIEF0dGVtcHQgdG8gd2l0aGRyYXcNCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoZGl2aWRlbmQpKQ0KICAgICAgICAgICAgdGhyb3c7DQogICAgfQ0KfQ=='