base 64 content
base64e4RowEscrow1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQovLyB2ZXJzaW9uIChaSykNCg0KDQpjb250cmFjdCBpRTRSb3dFc2Nyb3cgew0KCWZ1bmN0aW9uIGdldE51bUdhbWVzU3RhcnRlZCgpIGNvbnN0YW50IHJldHVybnMgKGludCBuZ2FtZXMpOw0KfQ0KDQoNCmNvbnRyYWN0IEU0Um93RXNjcm93IGlzIGlFNFJvd0VzY3JvdyB7DQoNCmV2ZW50IFN0YXRFdmVudChzdHJpbmcgbXNnKTsNCmV2ZW50IFN0YXRFdmVudEkoc3RyaW5nIG1zZywgdWludCB2YWwpOw0KZXZlbnQgU3RhdEV2ZW50QShzdHJpbmcgbXNnLCBhZGRyZXNzIGFkZHIpOw0KDQoJdWludCBjb25zdGFudCBNQVhfUExBWUVSUyA9IDU7DQoNCgllbnVtIEVuZFJlYXNvbiAge2VyV2lubmVyLCBlclRpbWVPdXQsIGVyQ2FuY2VsfQ0KCWVudW0gU2V0dGluZ1N0YXRlVmFsdWUgIHtkZWJ1ZywgcmVsZWFzZSwgbG9ja2VkUmVsZWFzZX0NCg0KCXN0cnVjdCBnYW1lSW5zdGFuY2Ugew0KCQlhZGRyZXNzWzVdIHBsYXllcnM7DQoJCXVpbnRbNV0gcGxheWVyUG90czsNCgkJdWludCBudW1QbGF5ZXJzOw0KDQoJCWJvb2wgYWN0aXZlOyAvLyBhY3RpdmUNCgkJYm9vbCBhbGxvY2Q7IC8vICBhbGxvY2F0ZWQgYWxyZWFkeS4gDQoJCXVpbnQgc3RhcnRlZDsgLy8gdGltZSBnYW1lIHN0YXJ0ZWQNCgkJdWludCBsYXN0TW92ZWQ7IC8vIHRpbWUgZ2FtZSBsYXN0IG1vdmVkDQoJCXVpbnQgcGF5b3V0OyAvLyBwYXlvdXQgYW1vbnQNCgkJYWRkcmVzcyB3aW5uZXI7IC8vIGFkZHJlc3Mgb2Ygd2lubmVyDQoJCQ0KDQoJCUVuZFJlYXNvbiByZWFzb25FbmRlZDsgLy8gZW51bSByZWFzb24gb2YgZW5kZWQNCgkJDQoJfQ0KCQ0KCXN0cnVjdCBhcmJpdGVyIHsNCgkJbWFwcGluZyAodWludCA9PiB1aW50KSAgZ2FtZUluZGV4ZXM7IC8vIGdhbWUgaGFuZGxlcw0KDQoJCXVpbnQgYXJiVG9rZW47IC8vIDIgYnl0ZXMNCgkJdWludCBnYW1lU2xvdHM7IC8vIGEgY291bnRlciBvZiBhbGxvYydkIGdhbWUgc3RydWN0cyAodGhleSBjYW4gYmUgcmV1c2VkKQ0KCQl1aW50IGdhbWVzU3RhcnRlZDsgLy8gdG90YWwgZ2FtZXMgc3RhcnRlZA0KCQl1aW50IGdhbWVzQ29tcGxldGVkOw0KCQl1aW50IGdhbWVzQ2FuY2VsZWQ7IC8vIGFsc28gdGllZA0KCQl1aW50IGdhbWVzVGltZWRvdXQ7DQoJCXVpbnQgbnVtUGxheWVyczsNCgkJYm9vbCByZWdpc3RlcmVkOyANCgkJYm9vbCBsb2NrZWQ7DQoJfQ0KDQoNCglhZGRyZXNzIHB1YmxpYyAgb3duZXI7IAkvLyBvd25lciBpcyBhZGRyZXNzIHRoYXQgZGVwbG95ZWQgY29udHJhY3QNCglhZGRyZXNzIHB1YmxpYyAgdG9rZW5QYXJ0bmVyOyAJLy8gdGhlIGFkZHJlc3Mgb2YgcGFydG5lciB0aGF0IHJlY2VpdmVzIHJha2UgZmVlcw0KCXVpbnQgcHVibGljIG51bUFyYml0ZXJzOyAJLy8gbnVtYmVyIG9mIGFyYml0ZXJzDQoNCglpbnQgbnVtR2FtZXNTdGFydGVkOwkvLyB0b3RhbCBzdGF0cyBmcm9tIGFsbCBhcmJpdGVycw0KDQoJdWludCBwdWJsaWMgbnVtR2FtZXNDb21wbGV0ZWQ7IC8vIC4uLg0KCXVpbnQgcHVibGljIG51bUdhbWVzQ2FuY2VsZWQ7IAkvLyB0aWVkIGFuZCBjYW5jZWxlZA0KCXVpbnQgcHVibGljIG51bUdhbWVzVGltZWRPdXQ7CS8vIC4uLg0KDQoJdWludCBwdWJsaWMgaG91c2VGZWVIb2xkb3ZlcjsgLy8gaG9sZCBmZWUgdGlsbCB0aHJlc2hvbGQNCgl1aW50IHB1YmxpYyBsYXN0UGF5b3V0VGltZTsgCS8vIHRpbWVzdGFtcCBvZiBsYXN0IHBheW91dCB0aW1lDQoNCg0KCS8vIGNvbmZpZ3VyYWJsZXMNCgl1aW50IHB1YmxpYyBnYW1lVGltZU91dDsNCgl1aW50IHB1YmxpYyByZWdpc3RyYXRpb25GZWU7DQoJdWludCBwdWJsaWMgaG91c2VGZWVUaHJlc2hvbGQ7DQoJdWludCBwdWJsaWMgcGF5b3V0SW50ZXJ2YWw7DQoNCgl1aW50IHJhR2FzOyAvLyBmb3IgcmVnaXN0ZXIgYXJiDQoJdWludCBzZ0dhczsvLyBmb3Igc3RhcnQgZ2FtZQ0KCXVpbnQgd3BHYXM7IC8vIGZvciB3aW5uZXIgcGFpZA0KCXVpbnQgcmZHYXM7IC8vIGZvciByZWZ1bmQNCgl1aW50IGZlZUdhczsgLy8gZm9yIHJha2UgZmVlIHBheW91dA0KDQoJU2V0dGluZ1N0YXRlVmFsdWUgcHVibGljIHNldHRpbmdzU3RhdGUgPSBTZXR0aW5nU3RhdGVWYWx1ZS5kZWJ1ZzsgDQoJDQoNCgltYXBwaW5nIChhZGRyZXNzID0+IGFyYml0ZXIpICBhcmJpdGVyczsNCgltYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpICBhcmJpdGVyVG9rZW5zOw0KCW1hcHBpbmcgKHVpbnQgPT4gYWRkcmVzcykgIGFyYml0ZXJJbmRleGVzOw0KCW1hcHBpbmcgKHVpbnQgPT4gZ2FtZUluc3RhbmNlKSAgZ2FtZXM7DQoNCg0KCWZ1bmN0aW9uIEU0Um93RXNjcm93KCkgcHVibGljDQoJew0KCQlvd25lciA9IG1zZy5zZW5kZXI7DQoJfQ0KDQoNCglmdW5jdGlvbiBhcHBseVNldHRpbmdzKFNldHRpbmdTdGF0ZVZhbHVlIF9zdGF0ZSwgdWludCBfZmVlLCB1aW50IF90aHJlc2hvbGQsIHVpbnQgX3RpbWVvdXQsIHVpbnQgX2ludGVydmFsKQ0KCXsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIA0KCQkJdGhyb3c7DQoNCgkJLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQkvLyB0aGVzZSBpdGVtcyBhcmUgdHdlYWthYmxlIGZvciBnYW1lIG9wdGltaXphdGlvbg0KCQkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJCWhvdXNlRmVlVGhyZXNob2xkID0gX3RocmVzaG9sZDsNCgkJZ2FtZVRpbWVPdXQgPSBfdGltZW91dDsNCgkJcGF5b3V0SW50ZXJ2YWwgPSBfaW50ZXJ2YWw7DQoJDQoJCWlmIChzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZFJlbGVhc2UpIHsNCgkJCVN0YXRFdmVudCgiU2V0dGluZ3MgVHdlYWtlZCIpOw0KCQkJcmV0dXJuOw0KCQl9DQoNCiAJIAlzZXR0aW5nc1N0YXRlID0gX3N0YXRlOw0KCQlyZWdpc3RyYXRpb25GZWUgPSBfZmVlOw0KDQoJCS8vIHNldCBkZWZhdWx0IG9wIGdhcyAtICBhbnkgZnV0aGVyIHNldHRpbmdzIGRvbmUgaW4gc2V0IHVwIGdhcw0KCQlyYUdhcyA9IDE1MDAwMDsgDQoJCXNnR2FzID0gMTEwMDAwOw0KCQl3cEdhcyA9IDIwMDAwOyANCgkJcmZHYXMgPSAyMDAwMDsgDQoJCWZlZUdhcyA9IDM2MDAwMDsgDQoNCgkJU3RhdEV2ZW50KCJTZXR0aW5ncyBDaGFuZ2VkIik7DQoNCgkNCgl9DQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJLy8gcmV0dXJuIGFuIGFyYml0ZXIgdG9rZW4gZnJvbSBhbiBoR2FtZQ0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCglmdW5jdGlvbiBBcmJUb2tGcm9tSEdhbWUodWludCBfaEdhbWUpIHJldHVybnMgKHVpbnQgX3RvaykNCgl7IA0KCQlfdG9rID0gIChfaEdhbWUgLyAoMiAqKiA0OCkpICYgMHhmZmZmOw0KCX0NCg0KDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIHN1aWNpZGUgdGhlIGNvbnRyYWN0LCBub3QgY2FsbGVkIGZvciByZWxlYXNlDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCWZ1bmN0aW9uIEhhcmFLaXJpKCkNCgl7DQoJCWlmICgobXNnLnNlbmRlciA9PSBvd25lcikgJiYgKHNldHRpbmdzU3RhdGUgIT0gU2V0dGluZ1N0YXRlVmFsdWUubG9ja2VkUmVsZWFzZSkpDQoJCQkgIHN1aWNpZGUodG9rZW5QYXJ0bmVyKTsNCgkJZWxzZQ0KCQkJU3RhdEV2ZW50KCJLaWxsIGF0dGVtcHQgZmFpbGVkIik7DQoJfQ0KDQoNCg0KDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIGRlZmF1bHQgZnVuY3Rpb24NCgkvLyB3aG8gYXJlIHdlIHRvIGxvb2sgYSBnaWZ0LWhvcnNlIGluIHRoZSBtb3V0aD8NCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogCWZ1bmN0aW9uKCkgcGF5YWJsZSAgew0KCQlTdGF0RXZlbnQoInRoYW5rcyEiKTsNCiAgCX0NCg0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJLy8gY2hlY2sgYWN0aXZlIGdhbWUgYW5kIHZhbGlkIHBsYXllciwgcmV0dXJuIHBsYXllciBpbmRleA0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCWZ1bmN0aW9uIHZhbGlkUGxheWVyKHVpbnQgX2hHYW1lLCBhZGRyZXNzIF9hZGRyKSAgaW50ZXJuYWwgcmV0dXJucyggYm9vbCBfdmFsaWQsIHVpbnQgX3BpZHgpDQoJew0KCQlfdmFsaWQgPSBmYWxzZTsNCgkJaWYgKGFjdGl2ZUdhbWUoX2hHYW1lKSkgew0KCQkJZm9yICh1aW50IGkgPSAwOyBpIDwgZ2FtZXNbX2hHYW1lXS5udW1QbGF5ZXJzOyBpKyspIHsNCgkJCQlpZiAoZ2FtZXNbX2hHYW1lXS5wbGF5ZXJzW2ldID09IF9hZGRyKSB7DQoJCQkJCV92YWxpZD10cnVlOw0KCQkJCQlfcGlkeCA9IGk7DQoJCQkJCWJyZWFrOw0KCQkJCX0NCgkJCX0NCgkJfQkJCQ0KCX0NCg0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJLy8gY2hlY2sgdmFsaWQgcGxheWVyLCByZXR1cm4gcGxheWVyIGluZGV4DQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJZnVuY3Rpb24gdmFsaWRQbGF5ZXIyKHVpbnQgX2hHYW1lLCBhZGRyZXNzIF9hZGRyKSBpbnRlcm5hbCAgcmV0dXJucyggYm9vbCBfdmFsaWQsIHVpbnQgX3BpZHgpDQoJew0KCQlfdmFsaWQgPSBmYWxzZTsNCgkJZm9yICh1aW50IGkgPSAwOyBpIDwgZ2FtZXNbX2hHYW1lXS5udW1QbGF5ZXJzOyBpKyspIHsNCgkJCWlmIChnYW1lc1tfaEdhbWVdLnBsYXllcnNbaV0gPT0gX2FkZHIpIHsNCgkJCQlfdmFsaWQ9dHJ1ZTsNCgkJCQlfcGlkeCA9IGk7DQoJCQkJYnJlYWs7DQoJCQl9DQoJCX0NCgl9DQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIGNoZWNrIHRoZSBhcmJpdGVyIGlzIHZhbGlkIGJ5IGNvbXBhcmluZyB0b2tlbg0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJZnVuY3Rpb24gdmFsaWRBcmIoYWRkcmVzcyBfYWRkciwgdWludCBfdG9rKSBpbnRlcm5hbCAgcmV0dXJucyggYm9vbCBfdmFsaWQpDQoJew0KCQlfdmFsaWQgPSBmYWxzZTsNCg0KCQlpZiAoKGFyYml0ZXJzW19hZGRyXS5yZWdpc3RlcmVkKQ0KCQkJJiYgKGFyYml0ZXJzW19hZGRyXS5hcmJUb2tlbiA9PSBfdG9rKSkgDQoJCQlfdmFsaWQgPSB0cnVlOw0KCX0NCg0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJLy8gY2hlY2sgdGhlIGFyYml0ZXIgaXMgdmFsaWQgd2l0aG91dCBjb21wYXJpbmcgdG9rZW4NCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCWZ1bmN0aW9uIHZhbGlkQXJiMihhZGRyZXNzIF9hZGRyKSBpbnRlcm5hbCAgcmV0dXJucyggYm9vbCBfdmFsaWQpDQoJew0KCQlfdmFsaWQgPSBmYWxzZTsNCgkJaWYgKGFyYml0ZXJzW19hZGRyXS5yZWdpc3RlcmVkKQ0KCQkJX3ZhbGlkID0gdHJ1ZTsNCgl9DQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIGNoZWNrIGlmIGFyYml0ZXIgaXMgbG9ja2VkIG91dA0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJZnVuY3Rpb24gYXJiTG9ja2VkKGFkZHJlc3MgX2FkZHIpIGludGVybmFsICByZXR1cm5zKCBib29sIF9sb2NrZWQpDQoJew0KCQlfbG9ja2VkID0gZmFsc2U7DQoJCWlmICh2YWxpZEFyYjIoX2FkZHIpKSANCgkJCV9sb2NrZWQgPSBhcmJpdGVyc1tfYWRkcl0ubG9ja2VkOw0KCX0NCg0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJLy8gcmV0dXJuIGlmIGdhbWUgaXMgYWN0aXZlDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCglmdW5jdGlvbiBhY3RpdmVHYW1lKHVpbnQgX2hHYW1lKSBpbnRlcm5hbCAgcmV0dXJucyggYm9vbCBfdmFsaWQpDQoJew0KCQlfdmFsaWQgPSBmYWxzZTsNCgkJaWYgKChfaEdhbWUgPiAwKQ0KCQkJJiYgKGdhbWVzW19oR2FtZV0uYWN0aXZlKSkNCgkJCV92YWxpZCA9IHRydWU7DQoJfQ0KDQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIHJlZ2lzdGVyIGdhbWUgYXJiaXRlciwgbWF4IHBsYXllcnMgb2YgNSwgcGFzcyBpbiBleGFjdCByZWdpc3RyYXRpb24gZmVlDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCglmdW5jdGlvbiByZWdpc3RlckFyYml0ZXIodWludCBfbnVtUGxheWVycywgdWludCBfYXJiVG9rZW4pIHB1YmxpYyBwYXlhYmxlIA0KCXsNCg0KCQlpZiAobXNnLnZhbHVlICE9IHJlZ2lzdHJhdGlvbkZlZSkgew0KCQkJdGhyb3c7ICAvL0luc3VmZmljaWVudCBGZWUNCgkJfQ0KDQoJCWlmIChfYXJiVG9rZW4gPT0gMCkgew0KCQkJdGhyb3c7IC8vIGludmFsaWQgdG9rZW4NCgkJfQ0KDQoJCWlmIChhcmJUb2tlbkV4aXN0cyhfYXJiVG9rZW4gJiAweGZmZmYpKSB7DQoJCQl0aHJvdzsgLy8gVG9rZW4gQWxyZWFkeSBFeGlzdHMNCgkJfQ0KDQoJCWlmIChhcmJpdGVyc1ttc2cuc2VuZGVyXS5yZWdpc3RlcmVkKSB7DQoJCQl0aHJvdzsgLy8gQXJiIEFscmVhZHkgUmVnaXN0ZXJlZA0KCQl9DQoJCQ0KCQlpZiAoX251bVBsYXllcnMgPiBNQVhfUExBWUVSUykgew0KCQkJdGhyb3c7IC8vIEV4Y2VlZHMgTWF4IFBsYXllcnMNCgkJfQ0KDQoJCWFyYml0ZXJzW21zZy5zZW5kZXJdLmdhbWVzU3RhcnRlZCA9IDA7DQoJCWFyYml0ZXJzW21zZy5zZW5kZXJdLmdhbWVzQ29tcGxldGVkID0gMDsNCgkJYXJiaXRlcnNbbXNnLnNlbmRlcl0uZ2FtZXNDYW5jZWxlZCA9IDA7IA0KCQlhcmJpdGVyc1ttc2cuc2VuZGVyXS5nYW1lc1RpbWVkb3V0ID0gMDsNCgkJYXJiaXRlcnNbbXNnLnNlbmRlcl0ubG9ja2VkID0gZmFsc2U7DQoJCWFyYml0ZXJzW21zZy5zZW5kZXJdLmFyYlRva2VuID0gX2FyYlRva2VuICYgMHhmZmZmOw0KCQlhcmJpdGVyc1ttc2cuc2VuZGVyXS5udW1QbGF5ZXJzID0gX251bVBsYXllcnM7DQoJCWFyYml0ZXJzW21zZy5zZW5kZXJdLnJlZ2lzdGVyZWQgPSB0cnVlOw0KDQoJCWFyYml0ZXJUb2tlbnNbKF9hcmJUb2tlbiAmIDB4ZmZmZildID0gbXNnLnNlbmRlcjsNCgkJYXJiaXRlckluZGV4ZXNbbnVtQXJiaXRlcnMrK10gPSBtc2cuc2VuZGVyOw0KCQ0KDQoJCWlmICghdG9rZW5QYXJ0bmVyLmNhbGwuZ2FzKHJhR2FzKS52YWx1ZShtc2cudmFsdWUpKCkpIHsNCgkJCS8vU3RhdHZlbnQoIlNlbmQgRXJyb3IiKTsgLy8gZXZlbnQgbmV2ZXIgcmVnaXN0ZXJzDQoJCSAgICAgICAgdGhyb3c7DQoJCX0NCgkJU3RhdEV2ZW50SSgiQXJiIEFkZGVkIiwgX2FyYlRva2VuKTsNCgl9DQoNCg0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJLy8gc3RhcnQgZ2FtZS4gIHBhc3MgaW4gdmFsaWQgaEdhbWUgY29udGFpbmluZyB0b2tlbiBpbiB0b3AgdHdvIGJ5dGVzDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCglmdW5jdGlvbiBzdGFydEdhbWUodWludCBfaEdhbWUsIGludCBfaGtNYXgsIGFkZHJlc3NbXSBfcGxheWVycykgcHVibGljIA0KDQoJew0KCQl1aW50IG50b2sgPSBBcmJUb2tGcm9tSEdhbWUoX2hHYW1lKTsNCgkJaWYgKCF2YWxpZEFyYihtc2cuc2VuZGVyLCBudG9rICkpIHsNCgkJCVN0YXRFdmVudCgiSW52YWxpZCBBcmIiKTsNCgkJCXJldHVybjsNCgkJfQ0KDQoNCgkJaWYgKGFyYkxvY2tlZChtc2cuc2VuZGVyKSkgew0KCQkJU3RhdEV2ZW50KCJBcmIgTG9ja2VkIik7DQoJCQlyZXR1cm47IA0KCQl9DQoNCgkJYXJiaXRlciB4YXJiID0gYXJiaXRlcnNbbXNnLnNlbmRlcl07DQoJCWlmIChfcGxheWVycy5sZW5ndGggIT0geGFyYi5udW1QbGF5ZXJzKSB7IA0KCQkJU3RhdEV2ZW50KCJJbmNvcnJlY3QgbnVtIHBsYXllcnMiKTsNCgkJCXJldHVybjsgDQoJCX0NCg0KCQlpZiAoZ2FtZXNbX2hHYW1lXS5hY3RpdmUpIHsNCgkJCS8vIGd1YXJkLXJhaWwuIGp1c3QgaW4gY2FzZSB0byByZXR1cm4gZnVuZHMNCgkJCWFib3J0R2FtZShtc2cuc2VuZGVyLCBfaEdhbWUsIEVuZFJlYXNvbi5lckNhbmNlbCk7DQoNCgkJfSBlbHNlIGlmIChfaGtNYXggPiAwKSB7DQoJCQlob3VzZUtlZXAoX2hrTWF4LCBudG9rKTsgDQoJCX0NCg0KCQlpZiAoIWdhbWVzW19oR2FtZV0uYWxsb2NkKSB7DQoJCQlnYW1lc1tfaEdhbWVdLmFsbG9jZCA9IHRydWU7DQoJCQl4YXJiLmdhbWVJbmRleGVzW3hhcmIuZ2FtZVNsb3RzKytdID0gX2hHYW1lOw0KCQl9IA0KCQludW1HYW1lc1N0YXJ0ZWQrKzsgLy8gYWx3YXlzIGluYyB0aGlzIG9uZQ0KCQl4YXJiLmdhbWVzU3RhcnRlZCsrOw0KDQoJCWdhbWVzW19oR2FtZV0uYWN0aXZlID0gdHJ1ZTsNCgkJZ2FtZXNbX2hHYW1lXS5zdGFydGVkID0gbm93OyANCgkJZ2FtZXNbX2hHYW1lXS5sYXN0TW92ZWQgPSBub3c7IA0KCQlnYW1lc1tfaEdhbWVdLnBheW91dCA9IDA7IA0KCQlnYW1lc1tfaEdhbWVdLndpbm5lciA9IGFkZHJlc3MoMCk7DQoNCgkJZ2FtZXNbX2hHYW1lXS5udW1QbGF5ZXJzID0gX3BsYXllcnMubGVuZ3RoOyAvLyB3ZSdsbCBiZSB0aGUganVkZ2Ugb2YgaG93IG1hbnkgdW5pcXVlIHBsYXllcnMNCgkJZm9yICh1aW50IGkgPSAwOyBpPCBfcGxheWVycy5sZW5ndGggJiYgaSA8IE1BWF9QTEFZRVJTOyBpKyspIHsNCgkgICAgICAgICAgICBnYW1lc1tfaEdhbWVdLnBsYXllcnNbaV0gPSBfcGxheWVyc1tpXTsNCgkJICAgIGdhbWVzW19oR2FtZV0ucGxheWVyUG90c1tpXSA9IDA7DQoJCX0NCg0KCQlTdGF0RXZlbnRJKCJHYW1lIEFkZGVkIiwgX2hHYW1lKTsNCgkJDQoNCgl9DQoJDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkvLyBjbGVhbiB1cCBnYW1lLCBzZXQgdG8gaW5hY3RpdmUsIHJlZnVuZCBhbnkgYmFsYW5jZXMNCgkvLyBjYWxsZWQgYnkgaG91c2VrZWVwIE9OTFkNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCWZ1bmN0aW9uIGFib3J0R2FtZShhZGRyZXNzIF9hcmIsIHVpbnQgIF9oR2FtZSwgRW5kUmVhc29uIF9yZWFzb24pIHByaXZhdGUgcmV0dXJucyhib29sIF9zdWNjZXNzKQ0KCXsNCgkgICAgIGdhbWVJbnN0YW5jZSBuR2FtZSA9IGdhbWVzW19oR2FtZV07DQoJICAgICANCgkJLy8gZmluZCBnYW1lIGluIGdhbWUgaWQsIA0KCQlpZiAobkdhbWUuYWN0aXZlKSB7DQoJCQlfc3VjY2VzcyA9IHRydWU7DQoJCQlmb3IgKHVpbnQgaSA9IDA7IGkgPCBuR2FtZS5udW1QbGF5ZXJzOyBpKyspIHsNCgkJCQlpZiAobkdhbWUucGxheWVyUG90c1tpXSA+IDApIHsNCgkJCQkJYWRkcmVzcyBhID0gbkdhbWUucGxheWVyc1tpXTsNCgkJCQkJdWludCBuc2VuZCA9IG5HYW1lLnBsYXllclBvdHNbaV07DQoJCQkJCW5HYW1lLnBsYXllclBvdHNbaV0gPSAwOw0KCQkJCQlpZiAoIWEuY2FsbC5nYXMocmZHYXMpLnZhbHVlKG5zZW5kKSgpKSB7DQoJCQkJCQlob3VzZUZlZUhvbGRvdmVyICs9IG5zZW5kOyAvLyBjYW5ub3QgcmVmdW5kIGR1ZSB0byBlcnJvciwgZ2l2ZSB0byB0aGUgaG91c2UNCgkJCQkJICAgICAgICBTdGF0RXZlbnRBKCJDYW5ub3QgUmVmdW5kIEFkZHJlc3MiLCBhKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0NCgkJCW5HYW1lLmFjdGl2ZSA9IGZhbHNlOw0KCQkJbkdhbWUucmVhc29uRW5kZWQgPSBfcmVhc29uOw0KCQkJaWYgKF9yZWFzb24gPT0gRW5kUmVhc29uLmVyQ2FuY2VsKSB7DQoJCQkJbnVtR2FtZXNDYW5jZWxlZCsrOw0KCQkJCWFyYml0ZXJzW19hcmJdLmdhbWVzQ2FuY2VsZWQrKzsNCgkJCQlTdGF0RXZlbnQoIkdhbWUgY2FuY2VsZWQiKTsNCgkJCX0gZWxzZSBpZiAoX3JlYXNvbiA9PSBFbmRSZWFzb24uZXJUaW1lT3V0KSB7DQoJCQkJbnVtR2FtZXNUaW1lZE91dCsrOw0KCQkJCWFyYml0ZXJzW19hcmJdLmdhbWVzVGltZWRvdXQrKzsNCgkJCQlTdGF0RXZlbnQoIkdhbWUgdGltZWQgb3V0Iik7DQoJCQl9IGVsc2UgDQoJCQkJU3RhdEV2ZW50KCJHYW1lIGFib3J0ZWQiKTsNCgkJfQ0KCX0NCg0KDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkvLyBjYWxsZWQgYnkgYXJiaXRlciB3aGVuIHdpbm5lciBpcyBkZWNpZGVkDQoJLy8gKnBhc3MgaW4gaGlnaCBudW0gZm9yIHdpbm5lcmJhbCBmb3IgdGllIGdhbWVzDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCglmdW5jdGlvbiB3aW5uZXJEZWNpZGVkKHVpbnQgX2hHYW1lLCBhZGRyZXNzIF93aW5uZXIsIHVpbnQgX3dpbm5lckJhbCkgcHVibGljDQoJew0KDQoJCWlmICghdmFsaWRBcmIobXNnLnNlbmRlciwgQXJiVG9rRnJvbUhHYW1lKF9oR2FtZSkpKSB7DQoJCQlTdGF0RXZlbnQoIkludmFsaWQgQXJiIik7CQ0KCQkJcmV0dXJuOyAvLyBubyB0aHJvdyBubyBjaGFuZ2UgbWFkZQ0KCQl9DQoNCgkJdmFyICh2YWxpZCwgcGlkeCkgPSB2YWxpZFBsYXllcihfaEdhbWUsIF93aW5uZXIpOw0KCQlpZiAoIXZhbGlkKSB7DQoJCQlTdGF0RXZlbnQoIkludmFsaWQgUGxheWVyIik7CQ0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJYXJiaXRlciB4YXJiID0gYXJiaXRlcnNbbXNnLnNlbmRlcl07DQoJCWdhbWVJbnN0YW5jZSB4Z2FtZSA9IGdhbWVzW19oR2FtZV07DQoNCgkJdWludCB0b3RhbFBvdCA9IDA7DQoNCgkJaWYgKHhnYW1lLnBsYXllclBvdHNbcGlkeF0gPCBfd2lubmVyQmFsKSB7DQoJCSAgICBhYm9ydEdhbWUobXNnLnNlbmRlciwgX2hHYW1lLCBFbmRSZWFzb24uZXJDYW5jZWwpOw0KICAJCSAgICByZXR1cm47DQoJCX0NCg0KCQlmb3IgKHVpbnQgaSA9IDA7IGkgPCB4Z2FtZS5udW1QbGF5ZXJzOyBpKyspIHsNCgkJCXRvdGFsUG90ICs9IHhnYW1lLnBsYXllclBvdHNbaV07DQoJCX0NCgkJDQoJCXVpbnQgbnBvcnRpb247DQoJCXVpbnQgbnJlbW5hbnQ7DQoJCWlmICh0b3RhbFBvdCA+IDApIHsNCgkJIAlucG9ydGlvbiA9IHRvdGFsUG90LzUwOyAvLyAyIHBlcmNlbnQgZml4ZWQNCgkJCW5yZW1uYW50ID0gdG90YWxQb3QtbnBvcnRpb247DQoJCX0gZWxzZSB7DQoJCQlucG9ydGlvbiA9IDA7DQoJCQlucmVtbmFudCA9IDA7DQoJCX0NCgkJDQoNCgkJeGdhbWUubGFzdE1vdmVkID0gbm93Ow0KCQl4Z2FtZS5hY3RpdmUgPSBmYWxzZTsNCgkJeGdhbWUucmVhc29uRW5kZWQgPSBFbmRSZWFzb24uZXJXaW5uZXI7DQoJCXhnYW1lLndpbm5lciA9IF93aW5uZXI7DQoJCXhnYW1lLnBheW91dCA9IG5yZW1uYW50Ow0KCQkNCgkJaWYgKG5wb3J0aW9uID4gMCkgew0KCQkJaG91c2VGZWVIb2xkb3ZlciArPSBucG9ydGlvbjsNCgkJCWlmICgoaG91c2VGZWVIb2xkb3ZlciA+IGhvdXNlRmVlVGhyZXNob2xkKQ0KCQkJCSYmIChub3cgPiAobGFzdFBheW91dFRpbWUgKyBwYXlvdXRJbnRlcnZhbCkpKSB7DQoJCQkJdWludCBudG1waG8gPSBob3VzZUZlZUhvbGRvdmVyOw0KCQkJCWhvdXNlRmVlSG9sZG92ZXIgPSAwOw0KCQkJCWxhc3RQYXlvdXRUaW1lID0gbm93OyAvLyByZXNldCByZWdhcmRsZXNzIG9mIHN1Y2NlZWQvZmFpbA0KCQkJCWlmICghdG9rZW5QYXJ0bmVyLmNhbGwuZ2FzKGZlZUdhcykudmFsdWUobnRtcGhvKSgpKSB7DQoJCQkJCWhvdXNlRmVlSG9sZG92ZXIgPSBudG1waG87IC8vIHB1dCBpdCBiYWNrDQoJCQkJCVN0YXRFdmVudCgiSG91c2UtRmVlIEVycm9yMSIpOw0KCQkJCX0gDQoJCQl9DQoJCX0NCgkNCgkJZm9yIChpID0gMDsgaSA8IHhnYW1lLm51bVBsYXllcnM7IGkrKykgew0KCQkJeGdhbWUucGxheWVyUG90c1tpXSA9IDA7DQoJCX0NCg0KCQl4YXJiLmdhbWVzQ29tcGxldGVkKys7DQoJCW51bUdhbWVzQ29tcGxldGVkKys7DQoJCWlmIChucmVtbmFudCA+IDApIHsNCgkJCWlmICghX3dpbm5lci5jYWxsLmdhcyh3cEdhcykudmFsdWUodWludChucmVtbmFudCkpKCkpIHsNCgkJCQkvLyBTdGF0RXZlbnQoIlNlbmQgRXJyb3IiKTsNCgkJCSAgICAgICAgdGhyb3c7IC8vIGlmIHlvdSBjYW50IHBheSB0aGUgd2lubmVyIC0gdmVyeSBiYWQNCgkJCX0gZWxzZSB7DQoJCQkJU3RhdEV2ZW50SSgiV2lubmVyIFBhaWQiLCBfaEdhbWUpOwkJDQoJCQl9DQoJCX0NCgl9DQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIGhhbmRsZSBhIGJldCBtYWRlIGJ5IGEgcGxheWVyLCB2YWxpZGF0ZSB0aGUgcGxheWVyIGFuZCBnYW1lDQoJLy8gYWRkIHRvIHBsYXllcnMgYmFsYW5jZQ0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJZnVuY3Rpb24gaGFuZGxlQmV0KHVpbnQgX2hHYW1lKSBwdWJsaWMgcGF5YWJsZSANCgl7DQoJCWFkZHJlc3MgbmFyYiA9IGFyYml0ZXJUb2tlbnNbQXJiVG9rRnJvbUhHYW1lKF9oR2FtZSldOw0KCQlpZiAobmFyYiA9PSBhZGRyZXNzKDApKSB7DQoJCQl0aHJvdzsgLy8gIkludmFsaWQgaEdhbWUiDQoJCX0NCg0KCQl2YXIgKHZhbGlkLCBwaWR4KSA9IHZhbGlkUGxheWVyKF9oR2FtZSwgbXNnLnNlbmRlcik7DQoJCWlmICghdmFsaWQpIHsNCgkJCXRocm93OyAvLyAiSW52YWxpZCBQbGF5ZXIiDQoJCX0NCg0KCQlnYW1lc1tfaEdhbWVdLnBsYXllclBvdHNbcGlkeF0gKz0gbXNnLnZhbHVlOw0KCQlnYW1lc1tfaEdhbWVdLmxhc3RNb3ZlZCA9IG5vdzsNCg0KCQlTdGF0RXZlbnRJKCJCZXQgQWRkZWQiLCBfaEdhbWUpOw0KDQoJfQ0KDQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIHJldHVybiBpZiBhcmIgdG9rZW4gZXhpc3RzDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCglmdW5jdGlvbiBhcmJUb2tlbkV4aXN0cyh1aW50IF90b2spIGNvbnN0YW50IHJldHVybnMgKGJvb2wgX2V4aXN0cykNCgl7DQoJCV9leGlzdHMgPSBmYWxzZTsNCgkJaWYgKChfdG9rID4gMCkNCgkJCSYmIChhcmJpdGVyVG9rZW5zW190b2tdICE9IGFkZHJlc3MoMCkpDQoJCQkmJiBhcmJpdGVyc1thcmJpdGVyVG9rZW5zW190b2tdXS5yZWdpc3RlcmVkKQ0KCQkJX2V4aXN0cyA9IHRydWU7DQoNCgl9DQoNCg0KDQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIGNhbGxlZCBieSBpY28gdG9rZW4gY29udHJhY3QgDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCglmdW5jdGlvbiBnZXROdW1HYW1lc1N0YXJ0ZWQoKSBjb25zdGFudCByZXR1cm5zIChpbnQgX2dhbWVzKSANCgl7DQoJCV9nYW1lcyA9IG51bUdhbWVzU3RhcnRlZDsNCgl9DQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIHJldHVybiBhcmJpdGVyIGdhbWUgc3RhdHMNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCWZ1bmN0aW9uIGdldEFyYkluZm8odWludCBfaWR4KSBjb25zdGFudCAgcmV0dXJucyAoYWRkcmVzcyBfYWRkciwgdWludCBfc3RhcnRlZCwgdWludCBfY29tcGxldGVkLCB1aW50IF9jYW5jZWxlZCwgdWludCBfdGltZWRPdXQpIA0KCXsNCgkJaWYgKF9pZHggPj0gbnVtQXJiaXRlcnMpIHsNCgkJCVN0YXRFdmVudCgiSW52YWxpZCBBcmIiKTsNCgkJCXJldHVybjsNCgkJfQ0KCQlfYWRkciA9IGFyYml0ZXJJbmRleGVzW19pZHhdOw0KCQlpZiAoKF9hZGRyID09IGFkZHJlc3MoMCkpDQoJCQl8fCAoIWFyYml0ZXJzW19hZGRyXS5yZWdpc3RlcmVkKSkgew0KCQkJU3RhdEV2ZW50KCJJbnZhbGlkIEFyYiIpOw0KCQkJcmV0dXJuOw0KCQl9DQoJCWFyYml0ZXIgeGFyYiA9IGFyYml0ZXJzW19hZGRyXTsNCgkJX3N0YXJ0ZWQgPSB4YXJiLmdhbWVzU3RhcnRlZDsNCgkJX2NvbXBsZXRlZCA9IHhhcmIuZ2FtZXNDb21wbGV0ZWQ7DQoJCV90aW1lZE91dCA9IHhhcmIuZ2FtZXNUaW1lZG91dDsNCgkJX2NhbmNlbGVkID0geGFyYi5nYW1lc0NhbmNlbGVkOw0KCX0NCg0KDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkvLyBzY2FuIGZvciBhIGdhbWUgMTAgbWludXRlcyBvbGQNCgkvLyBpZiBmb3VuZCBhYm9ydCB0aGUgZ2FtZSwgY2F1c2luZyBmdW5kcyB0byBiZSByZXR1cm5lZA0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJZnVuY3Rpb24gaG91c2VLZWVwKGludCBfbWF4LCB1aW50IF9hcmJUb2tlbikgcHVibGljDQoJewkNCgkJdWludCBnaTsNCgkJYWRkcmVzcyBhOw0KCQlpbnQgYWJvcnRlZCA9IDA7DQoJCQ0KCQlhcmJpdGVyIHhhcmIgPSBhcmJpdGVyc1ttc2cuc2VuZGVyXTsvLyBoYXZlIHRvIHNldCBpdCB0byBzb21ldGhpbmcNCgkgICAgICAgIA0KICAgICAgICAgDQoJCWlmIChtc2cuc2VuZGVyID09IG93bmVyKSB7DQoJCQlmb3IgKHVpbnQgYXIgPSAwOyAoYXIgPCBudW1BcmJpdGVycykgJiYgKGFib3J0ZWQgPCBfbWF4KSA7IGFyKyspIHsNCgkJCSAgICBhID0gYXJiaXRlckluZGV4ZXNbYXJdOw0KCQkJICAgIHhhcmIgPSBhcmJpdGVyc1thXTsgICAgDQoNCgkJCSAgICBmb3IgKCBnaSA9IDA7IChnaSA8IHhhcmIuZ2FtZVNsb3RzKSAmJiAoYWJvcnRlZCA8IF9tYXgpOyBnaSsrKSB7DQoJCQkJZ2FtZUluc3RhbmNlIG5nYW1lMCA9IGdhbWVzW3hhcmIuZ2FtZUluZGV4ZXNbZ2ldXTsNCgkJCQlpZiAoKG5nYW1lMC5hY3RpdmUpDQoJCQkJICAgICYmICgobm93IC0gbmdhbWUwLmxhc3RNb3ZlZCkgPiBnYW1lVGltZU91dCkpIHsNCgkJCQkJYWJvcnRHYW1lKGEsIHhhcmIuZ2FtZUluZGV4ZXNbZ2ldLCBFbmRSZWFzb24uZXJUaW1lT3V0KTsNCgkJCQkJKythYm9ydGVkOw0KCQkJCX0NCgkJCSAgICB9DQoJCQl9DQoNCgkJfSBlbHNlIHsNCgkJCWlmICghdmFsaWRBcmIobXNnLnNlbmRlciwgX2FyYlRva2VuKSkNCgkJCQlTdGF0RXZlbnQoIkhvdXNla2VlcCBpbnZhbGlkIGFyYml0ZXIiKTsNCgkJCWVsc2Ugew0KCQkJICAgIGEgPSBtc2cuc2VuZGVyOw0KCQkJICAgIHhhcmIgPSBhcmJpdGVyc1thXTsgICAgDQoJCQkgICAgZm9yIChnaSA9IDA7IChnaSA8IHhhcmIuZ2FtZVNsb3RzKSAmJiAoYWJvcnRlZCA8IF9tYXgpOyBnaSsrKSB7DQoJCQkJZ2FtZUluc3RhbmNlIG5nYW1lMSA9IGdhbWVzW3hhcmIuZ2FtZUluZGV4ZXNbZ2ldXTsNCgkJCQlpZiAoKG5nYW1lMS5hY3RpdmUpDQoJCQkJICAgICYmICgobm93IC0gbmdhbWUxLmxhc3RNb3ZlZCkgPiBnYW1lVGltZU91dCkpIHsNCgkJCQkJYWJvcnRHYW1lKGEsIHhhcmIuZ2FtZUluZGV4ZXNbZ2ldLCBFbmRSZWFzb24uZXJUaW1lT3V0KTsNCgkJCQkJKythYm9ydGVkOw0KCQkJCX0NCgkJCSAgICB9DQoNCgkJCX0JDQoJCX0NCgl9DQoNCg0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJLy8gcmV0dXJuIGdhbWUgaW5mbw0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJZnVuY3Rpb24gZ2V0R2FtZUluZm8odWludCBfaEdhbWUpICBjb25zdGFudCAgcmV0dXJucyAoRW5kUmVhc29uIF9yZWFzb24sIHVpbnQgX3BsYXllcnMsIHVpbnQgX3BheW91dCwgYm9vbCBfYWN0aXZlLCBhZGRyZXNzIF93aW5uZXIgKQ0KCXsNCgkJZ2FtZUluc3RhbmNlIG5nYW1lID0gZ2FtZXNbX2hHYW1lXTsNCgkJX2FjdGl2ZSA9IG5nYW1lLmFjdGl2ZTsNCgkJX3BsYXllcnMgPSBuZ2FtZS5udW1QbGF5ZXJzOw0KCQlfd2lubmVyID0gbmdhbWUud2lubmVyOw0KCQlfcGF5b3V0ID0gbmdhbWUucGF5b3V0Ow0KCQlfcmVhc29uID0gbmdhbWUucmVhc29uRW5kZWQ7DQoNCgl9DQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIHJldHVybiBhcmJUb2tlbiBhbmQgbG93IGJ5dGVzIGZyb20gYW4gSEdhbWUNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCWZ1bmN0aW9uIGNoZWNrSEdhbWUodWludCBfaEdhbWUpIGNvbnN0YW50IHJldHVybnModWludCBfYXJiVG9rLCB1aW50IF9sb3dXb3JkcykNCgl7DQoJCV9hcmJUb2sgPSBBcmJUb2tGcm9tSEdhbWUoX2hHYW1lKTsNCgkJX2xvd1dvcmRzID0gX2hHYW1lICYgMHhmZmZmZmZmZmZmZmY7DQoJCQ0KCX0NCg0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJLy8gZ2V0IG9wZXJhdGlvbiBnYXMgYW1vdW50cw0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJZnVuY3Rpb24gZ2V0T3BHYXMoKSBjb25zdGFudCByZXR1cm5zICh1aW50IF9yYSwgdWludCBfc2csIHVpbnQgX3dwLCB1aW50IF9yZiwgdWludCBfZmcpIA0KCXsNCgkJX3JhID0gcmFHYXM7IC8vIHJlZ2lzdGVyIGFyYg0KCQlfc2cgPSBzZ0dhczsgLy8gc3RhcnQgZ2FtZQ0KCQlfd3AgPSB3cEdhczsgLy8gd2lubmVyIHBhaWQNCgkJX3JmID0gcmZHYXM7IC8vIHJlZnVuZA0KCQlfZmcgPSBmZWVHYXM7IC8vIHJha2UgZmVlIGdhcw0KCX0NCg0KDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkvLyBzZXQgb3BlcmF0aW9uIGdhcyBhbW91bnRzIGZvciBmb3J3YWRpbmcgb3BlcmF0aW9ucw0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJZnVuY3Rpb24gc2V0T3BHYXModWludCBfcmEsIHVpbnQgX3NnLCB1aW50IF93cCwgdWludCBfcmYsIHVpbnQgX2ZnKSANCgl7DQoJCWlmIChtc2cuc2VuZGVyICE9IG93bmVyKQ0KCQkJdGhyb3c7DQoNCgkJcmFHYXMgPSBfcmE7DQoJCXNnR2FzID0gX3NnOw0KCQl3cEdhcyA9IF93cDsNCgkJcmZHYXMgPSBfcmY7DQoJCWZlZUdhcyA9IF9mZzsNCgl9DQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIHNldCBhIG1pY2hlaXZvdXMgYXJiaXRlciB0byBsb2NrZWQNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCWZ1bmN0aW9uIHNldEFyYml0ZXJMb2NrZWQoYWRkcmVzcyBfYWRkciwgYm9vbCBfbG9jaykgIHB1YmxpYyANCgl7DQoJCWlmIChvd25lciAhPSBtc2cuc2VuZGVyKSAgew0KCQkJdGhyb3c7IA0KCQl9IGVsc2UgaWYgKCF2YWxpZEFyYjIoX2FkZHIpKSB7DQoJCQlTdGF0RXZlbnQoImludmFsaWQgYXJiIik7DQoJCX0gZWxzZSB7DQoJCQlhcmJpdGVyc1tfYWRkcl0ubG9ja2VkID0gX2xvY2s7DQoJCX0NCgkJDQoJfQ0KDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkvLyBmbHVzaCB0aGUgaG91c2UgZmVlcyB3aGVuZXZlciBjb21tYW5kZWQgdG8uDQoJLy8gaWdub3JlIHRoZSB0aHJlc2hvbGQgYW5kIHRoZSBsYXN0IHBheW91dCB0aW1lDQoJLy8gYnV0IHRoaXMgdGltZSBvbmx5IHJlc2V0IGxhc3RwYXlvdXR0aW1lIHVwb24gc3VjY2Vzcw0KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJZnVuY3Rpb24gZmx1c2hIb3VzZUZlZXMoKQ0KCXsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCgkJCVN0YXRFdmVudCgib25seSBvd25lciBjYWxscyB0aGlzIGZ1bmN0aW9uIik7DQoJCX0gZWxzZSBpZiAoaG91c2VGZWVIb2xkb3ZlciA+IDApIHsNCgkJCXVpbnQgbnRtcGhvID0gaG91c2VGZWVIb2xkb3ZlcjsNCgkJCWhvdXNlRmVlSG9sZG92ZXIgPSAwOw0KCQkJaWYgKCF0b2tlblBhcnRuZXIuY2FsbC5nYXMoZmVlR2FzKS52YWx1ZShudG1waG8pKCkpIHsNCgkJCQlob3VzZUZlZUhvbGRvdmVyID0gbnRtcGhvOyAvLyBwdXQgaXQgYmFjaw0KCQkJCVN0YXRFdmVudCgiSG91c2UtRmVlIEVycm9yMiIpOyANCgkJCX0gZWxzZSB7DQoJCQkJbGFzdFBheW91dFRpbWUgPSBub3c7DQogCQkJCVN0YXRFdmVudCgiSG91c2UtRmVlIFBhaWQiKTsNCgkgCQl9DQoJCX0NCg0KCX0NCg0KDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkvLyBzZXQgdGhlIHRva2VuIHBhcnRuZXINCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCWZ1bmN0aW9uIHNldFRva2VuUGFydG5lcihhZGRyZXNzIF9hZGRyKSBwdWJsaWMNCgl7DQoJCWlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7DQoJCQl0aHJvdzsNCgkJfSANCg0KCQlpZiAoKHNldHRpbmdzU3RhdGUgPT0gU2V0dGluZ1N0YXRlVmFsdWUubG9ja2VkUmVsZWFzZSkgDQoJCQkmJiAodG9rZW5QYXJ0bmVyID09IGFkZHJlc3MoMCkpKSB7DQoJCQl0b2tlblBhcnRuZXIgPSBfYWRkcjsNCgkJCVN0YXRFdmVudCgiVG9rZW4gUGFydG5lciBGaW5hbCEiKTsNCgkJfSBlbHNlIGlmIChzZXR0aW5nc1N0YXRlICE9IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZFJlbGVhc2UpIHsNCgkJCXRva2VuUGFydG5lciA9IF9hZGRyOw0KCQkJU3RhdEV2ZW50KCJUb2tlbiBQYXJ0bmVyIEFzc2lnbmVkISIpOw0KCQl9DQoJCQkNCgl9DQoNCgkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJLy8gc3dhcCBleGVjdXRvcg0KCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCglmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9hZGRyKSANCgl7DQoJCWlmIChtc2cuc2VuZGVyICE9IG93bmVyDQoJCQl8fCBzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZFJlbGVhc2UpDQoJCQkgdGhyb3c7DQoNCgkJb3duZXIgPSBfYWRkcjsNCgl9DQoNCg0KDQp9'