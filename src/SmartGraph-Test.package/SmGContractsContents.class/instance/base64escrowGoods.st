base 64 content
base64escrowGoods
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4wOw0KDQpjb250cmFjdCBFc2Nyb3dHb29kcyB7DQoNCiAgICBzdHJ1Y3QgRXNjcm93SW5mbyB7DQoNCiAgICAgICAgYWRkcmVzcyBidXllcjsNCiAgICAgICAgdWludCBsb2NrZWRGdW5kczsNCiAgICAgICAgdWludCBmcm96ZW5GdW5kczsNCiAgICAgICAgdWludDY0IGZyb3plblRpbWU7DQogICAgICAgIHVpbnQxNiBjb3VudDsNCiAgICAgICAgYm9vbCBidXllck5vOw0KICAgICAgICBib29sIHNlbGxlck5vOw0KICAgIH0NCg0KICAgIC8vZW51bSBHb29kc1N0YXR1cw0KICAgIHVpbnQxNiBjb25zdGFudCBpbnRlcm5hbCBOb25lID0gMDsNCiAgICB1aW50MTYgY29uc3RhbnQgaW50ZXJuYWwgQXZhaWxhYmxlID0gMTsNCiAgICB1aW50MTYgY29uc3RhbnQgaW50ZXJuYWwgQ2FuY2VsZWQgPSAyOw0KDQogICAgLy9lbnVtIEV2ZW50VHlwZXMNCiAgICB1aW50MTYgY29uc3RhbnQgaW50ZXJuYWwgQnV5ID0gMTsNCiAgICB1aW50MTYgY29uc3RhbnQgaW50ZXJuYWwgQWNjZXB0ID0gMjsNCiAgICB1aW50MTYgY29uc3RhbnQgaW50ZXJuYWwgUmVqZWN0ID0gMzsNCiAgICB1aW50MTYgY29uc3RhbnQgaW50ZXJuYWwgQ2FuY2VsID0gNDsNCiAgICB1aW50MTYgY29uc3RhbnQgaW50ZXJuYWwgRGVzY3JpcHRpb24gPSAxMDsNCiAgICB1aW50MTYgY29uc3RhbnQgaW50ZXJuYWwgVW5sb2NrID0gMTE7DQogICAgdWludDE2IGNvbnN0YW50IGludGVybmFsIEZyZWV6ZSA9IDEyOw0KICAgIHVpbnQxNiBjb25zdGFudCBpbnRlcm5hbCBSZXNvbHZlZCA9IDEzOw0KDQogICAgLy9kYXRhDQoNCiAgICB1aW50IGNvbnN0YW50IGFyYml0cmF0aW9uUGVyaW9kID0gMzAgZGF5czsNCiAgICB1aW50IGNvbnN0YW50IHNhZmVHYXMgPSAyNTAwMDsNCg0KICAgIC8vc2VsbGVyL293bmVyIG9mIHRoZSBnb29kcw0KICAgIGFkZHJlc3MgcHVibGljIHNlbGxlcjsNCg0KICAgIC8vZXZlbnQgY291bnRlcnMNCiAgICB1aW50IHB1YmxpYyBjb250ZW50Q291bnQgPSAwOw0KICAgIHVpbnQgcHVibGljIGxvZ3NDb3VudCA9IDA7DQoNCiAgICAvL2VzY3JvdyByZWxhdGVkDQoNCiAgICBhZGRyZXNzIHB1YmxpYyBhcmJpdGVyOw0KDQogICAgdWludCBwdWJsaWMgZnJlZXplUGVyaW9kOw0KICAgIC8vZWFjaCBsb2NrIGZlZSBpbiBwcm9taWxsZXMuDQogICAgdWludCBwdWJsaWMgZmVlUHJvbWlsbGU7DQogICAgLy9yZXdhcmQgaW4gcHJvbWlsbGVzLiBwcm9taWxsZSA9IHBlcmNlbnQgKiAxMCwgZWcgMSw1JSByZXdhcmQgPSAxNSByZXdhcmRQcm9taWxsZQ0KICAgIHVpbnQgcHVibGljIHJld2FyZFByb21pbGxlOw0KDQogICAgdWludCBwdWJsaWMgZmVlRnVuZHM7DQogICAgdWludCBwdWJsaWMgdG90YWxFc2Nyb3dzOw0KDQogICAgbWFwcGluZyAodWludCA9PiBFc2Nyb3dJbmZvKSBwdWJsaWMgZXNjcm93czsNCg0KICAgIC8vZ29vZHMgcmVsYXRlZA0KDQogICAgLy9zdGF0dXMgb2YgdGhlIGdvb2RzOiBzZWUgR29vZHNTdGF0dXMgZW51bQ0KICAgIHVpbnQxNiBwdWJsaWMgc3RhdHVzOw0KICAgIC8vaG93IG1hbnkgZm9yIHNhbGUNCiAgICB1aW50MTYgcHVibGljIGNvdW50Ow0KDQogICAgdWludDE2IHB1YmxpYyBhdmFpbGFibGVDb3VudDsNCiAgICB1aW50MTYgcHVibGljIHBlbmRpbmdDb3VudDsNCg0KICAgIC8vcHJpY2UgcGVyIGl0ZW0NCiAgICB1aW50IHB1YmxpYyBwcmljZTsNCg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGJ1eWVyczsNCg0KICAgIGJvb2wgcHJpdmF0ZSBhdG9taWNMb2NrOw0KDQogICAgLy9ldmVudHMNCg0KICAgIGV2ZW50IExvZ0RlYnVnKHN0cmluZyBtZXNzYWdlKTsNCiAgICBldmVudCBMb2dFdmVudCh1aW50IGluZGV4ZWQgbG9ja0lkLCBzdHJpbmcgZGF0YUluZm8sIHVpbnQgaW5kZXhlZCB2ZXJzaW9uLCB1aW50MTYgZXZlbnRUeXBlLCBhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCB1aW50IGNvdW50LCB1aW50IHBheW1lbnQpOw0KDQogICAgbW9kaWZpZXIgb25seU93bmVyIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gc2VsbGVyKQ0KICAgICAgICAgIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIG9ubHlBcmJpdGVyIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gYXJiaXRlcikNCiAgICAgICAgICB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvL21vZHVsZXMNCg0KICAgIGZ1bmN0aW9uIEVzY3Jvd0dvb2RzKGFkZHJlc3MgX2FyYml0ZXIsIHVpbnQgX2ZyZWV6ZVBlcmlvZCwgdWludCBfZmVlUHJvbWlsbGUsIHVpbnQgX3Jld2FyZFByb21pbGxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MTYgX2NvdW50LCB1aW50IF9wcmljZSkgew0KDQogICAgICAgIHNlbGxlciA9IG1zZy5zZW5kZXI7DQoNCiAgICAgICAgLy8gYWxsIHZhcmlhYmxlcyBhcmUgYWx3YXlzIGluaXRpYWxpemVkIHRvIDAsIHNhdmUgZ2FzDQoNCiAgICAgICAgLy9lc2Nyb3cgcmVsYXRlZA0KDQogICAgICAgIGFyYml0ZXIgPSBfYXJiaXRlcjsNCiAgICAgICAgZnJlZXplUGVyaW9kID0gX2ZyZWV6ZVBlcmlvZDsNCiAgICAgICAgZmVlUHJvbWlsbGUgPSBfZmVlUHJvbWlsbGU7DQogICAgICAgIHJld2FyZFByb21pbGxlID0gX3Jld2FyZFByb21pbGxlOw0KDQogICAgICAgIC8vZ29vZHMgcmVsYXRlZA0KDQogICAgICAgIHN0YXR1cyA9IEF2YWlsYWJsZTsNCiAgICAgICAgY291bnQgPSBfY291bnQ7DQogICAgICAgIHByaWNlID0gX3ByaWNlOw0KDQogICAgICAgIGF2YWlsYWJsZUNvdW50ID0gY291bnQ7DQogICAgfQ0KDQogICAgLy9oZWxwZXJzIGZvciBldmVudHMgd2l0aCBjb3VudGVyDQogICAgZnVuY3Rpb24gbG9nRGVidWcoc3RyaW5nIG1lc3NhZ2UpIGludGVybmFsIHsNCiAgICAgICAgbG9nc0NvdW50Kys7DQogICAgICAgIExvZ0RlYnVnKG1lc3NhZ2UpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGxvZ0V2ZW50KHVpbnQgbG9ja0lkLCBzdHJpbmcgZGF0YUluZm8sIHVpbnQgdmVyc2lvbiwgdWludDE2IGV2ZW50VHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBzZW5kZXIsIHVpbnQgY291bnQsIHVpbnQgcGF5bWVudCkgaW50ZXJuYWwgew0KICAgICAgICBjb250ZW50Q291bnQrKzsNCiAgICAgICAgTG9nRXZlbnQobG9ja0lkLCBkYXRhSW5mbywgdmVyc2lvbiwgZXZlbnRUeXBlLCBzZW5kZXIsIGNvdW50LCBwYXltZW50KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBraWxsKCkgb25seU93bmVyIHsNCg0KICAgICAgICAvL2RvIG5vdCBhbGxvdyBraWxsaW5nIGNvbnRyYWN0IHdpdGggYWN0aXZlIGVzY3Jvd3MNCiAgICAgICAgaWYodG90YWxFc2Nyb3dzID4gMCkgew0KICAgICAgICAgICAgbG9nRGVidWcoInRvdGFsRXNjcm93cyA+IDAiKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICAvL2RvIG5vdCBhbGxvdyBraWxsaW5nIGNvbnRyYWN0IHdpdGggdW5jbGFpbWVkIGVzY3JvdyBmZWVzDQogICAgICAgIGlmKGZlZUZ1bmRzID4gMCkgew0KICAgICAgICAgICAgbG9nRGVidWcoImZlZUZ1bmRzID4gMCIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHN1aWNpZGUobXNnLnNlbmRlcik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc2FmZVNlbmQoYWRkcmVzcyBhZGRyLCB1aW50IHZhbHVlKSBpbnRlcm5hbCB7DQoNCiAgICAgICAgaWYoYXRvbWljTG9jaykgdGhyb3c7DQogICAgICAgIGF0b21pY0xvY2sgPSB0cnVlOw0KICAgICAgICBpZiAoIShhZGRyLmNhbGwuZ2FzKHNhZmVHYXMpLnZhbHVlKHZhbHVlKSgpKSkgew0KICAgICAgICAgICAgYXRvbWljTG9jayA9IGZhbHNlOw0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgYXRvbWljTG9jayA9IGZhbHNlOw0KICAgIH0NCg0KICAgIC8vZXNjcm93IEFQSQ0KDQogICAgLy92b3RlIFlFUyAtIGltbWVkaWF0ZWx5IHNlbmRzIGZ1bmRzIHRvIHRoZSBwZWVyDQogICAgZnVuY3Rpb24geWVzKHVpbnQgX2xvY2tJZCwgc3RyaW5nIF9kYXRhSW5mbywgdWludCBfdmVyc2lvbikgew0KDQogICAgICAgIEVzY3Jvd0luZm8gaW5mbyA9IGVzY3Jvd3NbX2xvY2tJZF07DQoNCiAgICAgICAgaWYoaW5mby5sb2NrZWRGdW5kcyA9PSAwKSB7DQogICAgICAgICAgICBsb2dEZWJ1ZygiaW5mby5sb2NrZWRGdW5kcyA9PSAwIik7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYobXNnLnNlbmRlciAhPSBpbmZvLmJ1eWVyICYmIG1zZy5zZW5kZXIgIT0gc2VsbGVyKSB7DQogICAgICAgICAgICBsb2dEZWJ1ZygibXNnLnNlbmRlciAhPSBpbmZvLmJ1eWVyICYmIG1zZy5zZW5kZXIgIT0gc2VsbGVyIik7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICB1aW50IHBheW1lbnQgPSBpbmZvLmxvY2tlZEZ1bmRzOw0KICAgICAgICBpZihwYXltZW50ID4gdGhpcy5iYWxhbmNlKSB7DQogICAgICAgICAgICAvL0hBQ0s6IHNob3VsZCBub3QgZ2V0IGhlcmUgLSBmdW5kcyBjYW5ub3QgYmUgdW5sb2NrZWQgaW4gdGhpcyBjYXNlDQogICAgICAgICAgICBsb2dEZWJ1ZygicGF5bWVudCA+IHRoaXMuYmFsYW5jZSIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYobXNnLnNlbmRlciA9PSBpbmZvLmJ1eWVyKSB7DQoNCiAgICAgICAgICAgIC8vc2VuZCBmdW5kcyB0byBzZWxsZXINCiAgICAgICAgICAgIHNhZmVTZW5kKHNlbGxlciwgcGF5bWVudCk7DQogICAgICAgIH0gZWxzZSBpZihtc2cuc2VuZGVyID09IHNlbGxlcikgew0KDQogICAgICAgICAgICAvL3NlbmQgZnVuZHMgdG8gYnV5ZXINCiAgICAgICAgICAgIHNhZmVTZW5kKGluZm8uYnV5ZXIsIHBheW1lbnQpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy9IQUNLOiBzaG91bGQgbm90IGdldCBoZXJlDQogICAgICAgICAgICBsb2dEZWJ1ZygidW5rbm93biBtc2cuc2VuZGVyIik7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICAvL3JlbW92ZSByZWNvcmQgZnJvbSBlc2Nyb3dzDQogICAgICAgIGlmKHRvdGFsRXNjcm93cyA+IDApIHRvdGFsRXNjcm93cyAtPSAxOw0KICAgICAgICBpbmZvLmxvY2tlZEZ1bmRzID0gMDsNCg0KICAgICAgICBsb2dFdmVudChfbG9ja0lkLCBfZGF0YUluZm8sIF92ZXJzaW9uLCBVbmxvY2ssIG1zZy5zZW5kZXIsIGluZm8uY291bnQsIHBheW1lbnQpOw0KICAgIH0NCg0KICAgIC8vdm90ZSBOTyAtIGZyZWV6ZSBmdW5kcyBmb3IgYXJiaXRyYXRpb24NCiAgICBmdW5jdGlvbiBubyh1aW50IF9sb2NrSWQsIHN0cmluZyBfZGF0YUluZm8sIHVpbnQgX3ZlcnNpb24pIHsNCg0KICAgICAgICBFc2Nyb3dJbmZvIGluZm8gPSBlc2Nyb3dzW19sb2NrSWRdOw0KDQogICAgICAgIGlmKGluZm8ubG9ja2VkRnVuZHMgPT0gMCkgew0KICAgICAgICAgICAgbG9nRGVidWcoImluZm8ubG9ja2VkRnVuZHMgPT0gMCIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gaW5mby5idXllciAmJiBtc2cuc2VuZGVyICE9IHNlbGxlcikgew0KICAgICAgICAgICAgbG9nRGVidWcoIm1zZy5zZW5kZXIgIT0gaW5mby5idXllciAmJiBtc2cuc2VuZGVyICE9IHNlbGxlciIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgLy9mcmVlemUgZnVuZHMNCiAgICAgICAgLy9vbmx5IGFsbG93IG9uZSB0aW1lIGZyZWV6ZQ0KICAgICAgICBpZihpbmZvLmZyb3plbkZ1bmRzID09IDApIHsNCiAgICAgICAgICAgIGluZm8uZnJvemVuRnVuZHMgPSBpbmZvLmxvY2tlZEZ1bmRzOw0KICAgICAgICAgICAgaW5mby5mcm96ZW5UaW1lID0gdWludDY0KG5vdyk7DQogICAgICAgIH0NCg0KICAgICAgICBpZihtc2cuc2VuZGVyID09IGluZm8uYnV5ZXIpIHsNCiAgICAgICAgICAgIGluZm8uYnV5ZXJObyA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZihtc2cuc2VuZGVyID09IHNlbGxlcikgew0KICAgICAgICAgICAgaW5mby5zZWxsZXJObyA9IHRydWU7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvL0hBQ0s6IHNob3VsZCBub3QgZ2V0IGhlcmUNCiAgICAgICAgICAgIGxvZ0RlYnVnKCJ1bmtub3duIG1zZy5zZW5kZXIiKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIGxvZ0V2ZW50KF9sb2NrSWQsIF9kYXRhSW5mbywgX3ZlcnNpb24sIEZyZWV6ZSwgbXNnLnNlbmRlciwgaW5mby5jb3VudCwgaW5mby5sb2NrZWRGdW5kcyk7DQogICAgfQ0KDQogICAgLy9hcmJpdGVyJ3MgZGVjaXNpb24gb24gdGhlIGNhc2UuDQogICAgLy9hcmJpdGVyIGNhbiBvbmx5IGRlY2lkZSB3aGVuIGJvdGggYnV5ZXIgYW5kIHNlbGxlciB2b3RlZCBOTw0KICAgIC8vYXJiaXRlciBkZWNpZGVzIG9uIGhpcyBvd24gcmV3YXJkIGJ1dCBub3QgYmlnZ2VyIHRoYW4gYW5ub3VuY2VkIHBlcmNlbnRhZ2UgKHJld2FyZFByb21pbGxlKQ0KICAgIGZ1bmN0aW9uIGFyYlllcyh1aW50IF9sb2NrSWQsIGFkZHJlc3MgX3dobywgdWludCBfcGF5bWVudCwgc3RyaW5nIF9kYXRhSW5mbywgdWludCBfdmVyc2lvbikgb25seUFyYml0ZXIgew0KDQogICAgICAgIEVzY3Jvd0luZm8gaW5mbyA9IGVzY3Jvd3NbX2xvY2tJZF07DQoNCiAgICAgICAgaWYoaW5mby5sb2NrZWRGdW5kcyA9PSAwKSB7DQogICAgICAgICAgICBsb2dEZWJ1ZygiaW5mby5sb2NrZWRGdW5kcyA9PSAwIik7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYoaW5mby5mcm96ZW5GdW5kcyA9PSAwKSB7DQogICAgICAgICAgICBsb2dEZWJ1ZygiaW5mby5mcm96ZW5GdW5kcyA9PSAwIik7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICBpZihfd2hvICE9IHNlbGxlciAmJiBfd2hvICE9IGluZm8uYnV5ZXIpIHsNCiAgICAgICAgICAgIGxvZ0RlYnVnKCJfd2hvICE9IHNlbGxlciAmJiBfd2hvICE9IGluZm8uYnV5ZXIiKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICAvL3JlcXVpcmVzIGJvdGggTk8gdG8gYXJiaXRyYXRpb24NCiAgICAgICAgaWYoIWluZm8uYnV5ZXJObyB8fCAhaW5mby5zZWxsZXJObykgew0KICAgICAgICAgICAgbG9nRGVidWcoIiFpbmZvLmJ1eWVyTm8gfHwgIWluZm8uc2VsbGVyTm8iKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmKF9wYXltZW50ID4gaW5mby5sb2NrZWRGdW5kcykgew0KICAgICAgICAgICAgbG9nRGVidWcoIl9wYXltZW50ID4gaW5mby5sb2NrZWRGdW5kcyIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmKF9wYXltZW50ID4gdGhpcy5iYWxhbmNlKSB7DQogICAgICAgICAgICAvL0hBQ0s6IHNob3VsZCBub3QgZ2V0IGhlcmUgLSBmdW5kcyBjYW5ub3QgYmUgdW5sb2NrZWQgaW4gdGhpcyBjYXNlDQogICAgICAgICAgICBsb2dEZWJ1ZygiX3BheW1lbnQgPiB0aGlzLmJhbGFuY2UiKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vbGltaXQgcGF5bWVudA0KICAgICAgICB1aW50IHJld2FyZCA9IChpbmZvLmxvY2tlZEZ1bmRzICogcmV3YXJkUHJvbWlsbGUpIC8gMTAwMDsNCiAgICAgICAgaWYocmV3YXJkID4gKGluZm8ubG9ja2VkRnVuZHMgLSBfcGF5bWVudCkpIHsNCiAgICAgICAgICAgIGxvZ0RlYnVnKCJyZXdhcmQgPiAoaW5mby5sb2NrZWRGdW5kcyAtIF9wYXltZW50KSIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgLy9zZW5kIGZ1bmRzIHRvIHRoZSB3aW5uZXINCiAgICAgICAgc2FmZVNlbmQoX3dobywgX3BheW1lbnQpOw0KDQogICAgICAgIC8vc2VuZCB0aGUgcmVzdCBhcyByZXdhcmQNCiAgICAgICAgaW5mby5sb2NrZWRGdW5kcyAtPSBfcGF5bWVudDsNCiAgICAgICAgZmVlRnVuZHMgKz0gaW5mby5sb2NrZWRGdW5kczsNCiAgICAgICAgaW5mby5sb2NrZWRGdW5kcyA9IDA7DQoNCiAgICAgICAgbG9nRXZlbnQoX2xvY2tJZCwgX2RhdGFJbmZvLCBfdmVyc2lvbiwgUmVzb2x2ZWQsIG1zZy5zZW5kZXIsIGluZm8uY291bnQsIF9wYXltZW50KTsNCiAgICB9DQoNCiAgICAvL2FsbG93IGFyYml0ZXIgdG8gZ2V0IGhpcyBjb2xsZWN0ZWQgZmVlcw0KICAgIGZ1bmN0aW9uIGdldEZlZXMoKSBvbmx5QXJiaXRlciB7DQoNCiAgICAgICAgaWYoZmVlRnVuZHMgPiB0aGlzLmJhbGFuY2UpIHsNCiAgICAgICAgICAgIC8vSEFDSzogc2hvdWxkIG5vdCBnZXQgaGVyZSAtIGZ1bmRzIGNhbm5vdCBiZSB1bmxvY2tlZCBpbiB0aGlzIGNhc2UNCiAgICAgICAgICAgIGxvZ0RlYnVnKCJmZWVGdW5kcyA+IHRoaXMuYmFsYW5jZSIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBzYWZlU2VuZChhcmJpdGVyLCBmZWVGdW5kcyk7DQoNCiAgICAgICAgZmVlRnVuZHMgPSAwOw0KICAgIH0NCg0KICAgIC8vYWxsb3cgYnV5ZXIgb3Igc2VsbGVyIHRvIHRha2UgdGltZW91dGVkIGZ1bmRzLg0KICAgIC8vYnV5ZXIgY2FuIGdldCBmdW5kcyBpZiBzZWxsZXIgaXMgc2lsZW50IGFuZCBzZWxsZXIgY2FuIGdldCBmdW5kcyBpZiBidXllciBpcyBzaWxlbnQgKGFmdGVyIGZyZWV6ZVBlcmlvZCkNCiAgICAvL2J1eWVyIGNhbiBnZXQgYmFjayBmdW5kcyB1bmRlciBhcmJpdHJhdGlvbiBpZiBhcmJpdGVyIGlzIHNpbGVudCAoYWZ0ZXIgYXJiaXRyYXRpb25QZXJpb2QpDQogICAgZnVuY3Rpb24gZ2V0TW9uZXkodWludCBfbG9ja0lkKSB7DQoNCiAgICAgICAgRXNjcm93SW5mbyBpbmZvID0gZXNjcm93c1tfbG9ja0lkXTsNCg0KICAgICAgICBpZihpbmZvLmxvY2tlZEZ1bmRzID09IDApIHsNCiAgICAgICAgICAgIGxvZ0RlYnVnKCJpbmZvLmxvY2tlZEZ1bmRzID09IDAiKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICAvL0hBQ0s6IHRoaXMgY2hlY2sgaXMgbmVjZXNzYXJ5IHNpbmNlIGZyb3plblRpbWUgPT0gMCBhdCBlc2Nyb3cgY3JlYXRpb24NCiAgICAgICAgaWYoaW5mby5mcm96ZW5GdW5kcyA9PSAwKSB7DQogICAgICAgICAgICBsb2dEZWJ1ZygiaW5mby5mcm96ZW5GdW5kcyA9PSAwIik7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICAvL3RpbW91dCBmb3Igdm90aW5nIG5vdCBvdmVyIHlldA0KICAgICAgICBpZihub3cgPCAoaW5mby5mcm96ZW5UaW1lICsgZnJlZXplUGVyaW9kKSkgew0KICAgICAgICAgICAgbG9nRGVidWcoIm5vdyA8IChpbmZvLmZyb3plblRpbWUgKyBmcmVlemVQZXJpb2QpIik7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICB1aW50IHBheW1lbnQgPSBpbmZvLmxvY2tlZEZ1bmRzOw0KICAgICAgICBpZihwYXltZW50ID4gdGhpcy5iYWxhbmNlKSB7DQogICAgICAgICAgICAvL0hBQ0s6IHNob3VsZCBub3QgZ2V0IGhlcmUgLSBmdW5kcyBjYW5ub3QgYmUgdW5sb2NrZWQgaW4gdGhpcyBjYXNlDQogICAgICAgICAgICBsb2dEZWJ1ZygicGF5bWVudCA+IHRoaXMuYmFsYW5jZSIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgLy9ib3RoIGhhcyB2b3RlZCAtIG1vbmV5IGlzIHVuZGVyIGFyYml0cmF0aW9uDQogICAgICAgIGlmKGluZm8uYnV5ZXJObyAmJiBpbmZvLnNlbGxlck5vKSB7DQoNCiAgICAgICAgICAgIC8vYXJiaXRyYXRpb24gdGltZW91dCBpcyBub3Qgb3ZlciB5ZXQNCiAgICAgICAgICAgIGlmKG5vdyA8IChpbmZvLmZyb3plblRpbWUgKyBmcmVlemVQZXJpb2QgKyBhcmJpdHJhdGlvblBlcmlvZCkpIHsNCiAgICAgICAgICAgICAgICBsb2dEZWJ1Zygibm93IDwgKGluZm8uZnJvemVuVGltZSArIGZyZWV6ZVBlcmlvZCArIGFyYml0cmF0aW9uUGVyaW9kKSIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy9hcmJpdGVyIHdhcyBzaWxlbnQgc28gcmVkZWVtIHRoZSBmdW5kcyB0byB0aGUgYnV5ZXINCiAgICAgICAgICAgIHNhZmVTZW5kKGluZm8uYnV5ZXIsIHBheW1lbnQpOw0KDQogICAgICAgICAgICBpbmZvLmxvY2tlZEZ1bmRzID0gMDsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmKGluZm8uYnV5ZXJObykgew0KDQogICAgICAgICAgICBzYWZlU2VuZChpbmZvLmJ1eWVyLCBwYXltZW50KTsNCg0KICAgICAgICAgICAgaW5mby5sb2NrZWRGdW5kcyA9IDA7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYoaW5mby5zZWxsZXJObykgew0KDQogICAgICAgICAgICBzYWZlU2VuZChzZWxsZXIsIHBheW1lbnQpOw0KDQogICAgICAgICAgICBpbmZvLmxvY2tlZEZ1bmRzID0gMDsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vZ29vZHMgQVBJDQoNCiAgICAvL2FkZCBuZXcgZGVzY3JpcHRpb24gdG8gdGhlIGdvb2RzDQogICAgZnVuY3Rpb24gYWRkRGVzY3JpcHRpb24oc3RyaW5nIF9kYXRhSW5mbywgdWludCBfdmVyc2lvbikgb25seU93bmVyIHsNCg0KICAgICAgICAvL0FjY2VwdCBvcmRlciB0byBldmVudCBsb2cNCiAgICAgICAgbG9nRXZlbnQoMCwgX2RhdGFJbmZvLCBfdmVyc2lvbiwgRGVzY3JpcHRpb24sIG1zZy5zZW5kZXIsIDAsIDApOw0KICAgIH0NCg0KICAgIC8vYnV5IHdpdGggZXNjcm93LiBpZCAtIGVzY3JvdyBpbmZvIGlkDQogICAgZnVuY3Rpb24gYnV5KHVpbnQgX2xvY2tJZCwgc3RyaW5nIF9kYXRhSW5mbywgdWludCBfdmVyc2lvbiwgdWludDE2IF9jb3VudCkgcGF5YWJsZSB7DQoNCiAgICAgICAgLy9yZWplY3QgbW9uZXkgdHJhbnNmZXJzIGZvciBiYWQgaXRlbSBzdGF0dXMNCg0KICAgICAgICBpZihzdGF0dXMgIT0gQXZhaWxhYmxlKSB0aHJvdzsNCiAgICAgICAgaWYobXNnLnZhbHVlIDwgKHByaWNlICogX2NvdW50KSkgdGhyb3c7DQogICAgICAgIGlmKF9jb3VudCA+IGF2YWlsYWJsZUNvdW50KSB0aHJvdzsNCiAgICAgICAgaWYoX2NvdW50ID09IDApIHRocm93Ow0KICAgICAgICBpZihmZWVQcm9taWxsZSA+IDEwMDApIHRocm93Ow0KICAgICAgICBpZihyZXdhcmRQcm9taWxsZSA+IDEwMDApIHRocm93Ow0KICAgICAgICBpZigoZmVlUHJvbWlsbGUgKyByZXdhcmRQcm9taWxsZSkgPiAxMDAwKSB0aHJvdzsNCg0KICAgICAgICAvL2NyZWF0ZSBkZWZhdWx0IEVzY3Jvd0luZm8gc3RydWN0IG9yIGFjY2VzcyBleGlzdGluZw0KICAgICAgICBFc2Nyb3dJbmZvIGluZm8gPSBlc2Nyb3dzW19sb2NrSWRdOw0KDQogICAgICAgIC8vbG9jayBvbmx5IG9uY2UgZm9yIGEgZ2l2ZW4gaWQNCiAgICAgICAgaWYoaW5mby5sb2NrZWRGdW5kcyA+IDApIHRocm93Ow0KDQogICAgICAgIC8vbG9jayBmdW5kcw0KDQogICAgICAgIHVpbnQgZmVlID0gKG1zZy52YWx1ZSAqIGZlZVByb21pbGxlKSAvIDEwMDA7DQogICAgICAgIC8vbGltaXQgZmVlcw0KICAgICAgICBpZihmZWUgPiBtc2cudmFsdWUpIHRocm93Ow0KDQogICAgICAgIHVpbnQgZnVuZHMgPSAobXNnLnZhbHVlIC0gZmVlKTsNCiAgICAgICAgZmVlRnVuZHMgKz0gZmVlOw0KICAgICAgICB0b3RhbEVzY3Jvd3MgKz0gMTsNCg0KICAgICAgICBpbmZvLmJ1eWVyID0gbXNnLnNlbmRlcjsNCiAgICAgICAgaW5mby5sb2NrZWRGdW5kcyA9IGZ1bmRzOw0KICAgICAgICBpbmZvLmZyb3plbkZ1bmRzID0gMDsNCiAgICAgICAgaW5mby5idXllck5vID0gZmFsc2U7DQogICAgICAgIGluZm8uc2VsbGVyTm8gPSBmYWxzZTsNCiAgICAgICAgaW5mby5jb3VudCA9IF9jb3VudDsNCg0KICAgICAgICBwZW5kaW5nQ291bnQgKz0gX2NvdW50Ow0KICAgICAgICBidXllcnNbbXNnLnNlbmRlcl0gPSB0cnVlOw0KDQogICAgICAgIC8vQnV5IG9yZGVyIHRvIGV2ZW50IGxvZw0KICAgICAgICBsb2dFdmVudChfbG9ja0lkLCBfZGF0YUluZm8sIF92ZXJzaW9uLCBCdXksIG1zZy5zZW5kZXIsIF9jb3VudCwgbXNnLnZhbHVlKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhY2NlcHQodWludCBfbG9ja0lkLCBzdHJpbmcgX2RhdGFJbmZvLCB1aW50IF92ZXJzaW9uKSBvbmx5T3duZXIgew0KDQogICAgICAgIEVzY3Jvd0luZm8gaW5mbyA9IGVzY3Jvd3NbX2xvY2tJZF07DQogICAgICAgIA0KICAgICAgICBpZihpbmZvLmNvdW50ID4gYXZhaWxhYmxlQ291bnQpIHsNCiAgICAgICAgICAgIGxvZ0RlYnVnKCJpbmZvLmNvdW50ID4gYXZhaWxhYmxlQ291bnQiKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZihpbmZvLmNvdW50ID4gcGVuZGluZ0NvdW50KSB7DQogICAgICAgICAgICBsb2dEZWJ1ZygiaW5mby5jb3VudCA+IHBlbmRpbmdDb3VudCIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgcGVuZGluZ0NvdW50IC09IGluZm8uY291bnQ7DQogICAgICAgIGF2YWlsYWJsZUNvdW50IC09IGluZm8uY291bnQ7DQoNCiAgICAgICAgLy9BY2NlcHQgb3JkZXIgdG8gZXZlbnQgbG9nDQogICAgICAgIGxvZ0V2ZW50KF9sb2NrSWQsIF9kYXRhSW5mbywgX3ZlcnNpb24sIEFjY2VwdCwgbXNnLnNlbmRlciwgaW5mby5jb3VudCwgaW5mby5sb2NrZWRGdW5kcyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcmVqZWN0KHVpbnQgX2xvY2tJZCwgc3RyaW5nIF9kYXRhSW5mbywgdWludCBfdmVyc2lvbikgb25seU93bmVyIHsNCiAgICAgICAgDQogICAgICAgIEVzY3Jvd0luZm8gaW5mbyA9IGVzY3Jvd3NbX2xvY2tJZF07DQoNCiAgICAgICAgaWYoaW5mby5jb3VudCA+IHBlbmRpbmdDb3VudCkgew0KICAgICAgICAgICAgbG9nRGVidWcoImluZm8uY291bnQgPiBwZW5kaW5nQ291bnQiKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHBlbmRpbmdDb3VudCAtPSBpbmZvLmNvdW50Ow0KDQogICAgICAgIC8vc2VuZCBtb25leSBiYWNrDQogICAgICAgIHllcyhfbG9ja0lkLCBfZGF0YUluZm8sIF92ZXJzaW9uKTsNCg0KICAgICAgICAvL1JlamVjdCBvcmRlciB0byBldmVudCBsb2cNCiAgICAgICAgLy9IQUNLOiAieWVzIiBjYWxsIGFib3ZlIG1heSBmYWlsIGFuZCB0aGlzIGV2ZW50IHdpbGwgYmUgbm9uLXJlbGV2YW50LiBEbyBub3QgcmVseSBvbiBpdC4NCiAgICAgICAgbG9nRXZlbnQoX2xvY2tJZCwgX2RhdGFJbmZvLCBfdmVyc2lvbiwgUmVqZWN0LCBtc2cuc2VuZGVyLCBpbmZvLmNvdW50LCBpbmZvLmxvY2tlZEZ1bmRzKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjYW5jZWwoc3RyaW5nIF9kYXRhSW5mbywgdWludCBfdmVyc2lvbikgb25seU93bmVyIHsNCg0KICAgICAgICAvL0NhbmNlbGVkIHN0YXR1cw0KICAgICAgICBzdGF0dXMgPSBDYW5jZWxlZDsNCg0KICAgICAgICAvL0NhbmNlbCBvcmRlciB0byBldmVudCBsb2cNCiAgICAgICAgbG9nRXZlbnQoMCwgX2RhdGFJbmZvLCBfdmVyc2lvbiwgQ2FuY2VsLCBtc2cuc2VuZGVyLCBhdmFpbGFibGVDb3VudCwgMCk7DQogICAgfQ0KDQogICAgLy9yZW1vdmUgYnV5ZXIgZnJvbSB0aGUgd2F0Y2hsaXN0DQogICAgZnVuY3Rpb24gdW5idXkoKSB7DQoNCiAgICAgICAgYnV5ZXJzW21zZy5zZW5kZXJdID0gZmFsc2U7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gKCkgew0KICAgICAgICB0aHJvdzsNCiAgICB9DQp9'