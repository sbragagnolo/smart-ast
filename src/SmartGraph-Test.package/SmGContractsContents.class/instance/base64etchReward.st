base 64 content
base64etchReward
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyoqDQogKiBAdGl0bGUgT3duYWJsZQ0KICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbA0KICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4NCiAqLw0KY29udHJhY3QgT3duYWJsZSB7DQogIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQoNCiAgLyoqDQogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcg0KICAgKiBhY2NvdW50Lg0KICAgKi8NCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsNCiAgICBvd25lciA9IG1zZy5zZW5kZXI7DQogIH0NCg0KDQogIC8qKg0KICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuDQogICAqLw0KICBtb2RpZmllciBvbmx5T3duZXIoKSB7DQogICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCiAgICBfOw0KICB9DQoNCg0KICAvKioNCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4NCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4NCiAgICovDQogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7DQogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsNCiAgICAgIG93bmVyID0gbmV3T3duZXI7DQogICAgfQ0KICB9DQoNCn0NCg0KDQovKioNCiAqIEB0aXRsZSBQYXVzYWJsZQ0KICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLg0KICovDQpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsNCiAgZXZlbnQgUGF1c2UoKTsNCiAgZXZlbnQgVW5wYXVzZSgpOw0KDQogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOw0KDQoNCiAgLyoqDQogICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIHBhdXNlZA0KICAgKi8NCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsNCiAgICBpZiAocGF1c2VkKSB0aHJvdzsNCiAgICBfOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIE5PVCBwYXVzZWQNCiAgICovDQogIG1vZGlmaWVyIHdoZW5QYXVzZWQgew0KICAgIGlmICghcGF1c2VkKSB0aHJvdzsNCiAgICBfOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQ0KICAgKi8NCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7DQogICAgcGF1c2VkID0gdHJ1ZTsNCiAgICBQYXVzZSgpOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQ0KICAgKi8NCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHJldHVybnMgKGJvb2wpIHsNCiAgICBwYXVzZWQgPSBmYWxzZTsNCiAgICBVbnBhdXNlKCk7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCn0NCg0KDQoNCi8qKg0KICogQHRpdGxlIEVSQzIwQmFzaWMNCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQ0KICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQogKi8NCmNvbnRyYWN0IEVSQzIwQmFzaWMgew0KICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSk7DQogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOw0KfQ0KDQoNCi8qKg0KICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcw0KICovDQpsaWJyYXJ5IFNhZmVNYXRoIHsNCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgdWludDI1NiBjID0gYSAqIGI7DQogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMA0KICAgIHVpbnQyNTYgYyA9IGEgLyBiOw0KICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkDQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICBhc3NlcnQoYiA8PSBhKTsNCiAgICByZXR1cm4gYSAtIGI7DQogIH0NCg0KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICB1aW50MjU2IGMgPSBhICsgYjsNCiAgICBhc3NlcnQoYyA+PSBhKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOw0KICB9DQoNCn0NCg0KDQoNCi8qKg0KICogQHRpdGxlIEJhc2ljIHRva2VuDQogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLg0KICovDQpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgew0KICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsNCg0KICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7DQoNCiAgLyoqDQogICAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suDQogICAqLw0KICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludDI1NiBzaXplKSB7DQogICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7DQogICAgICAgdGhyb3c7DQogICAgIH0NCiAgICAgXzsNCiAgfQ0KDQogIC8qKg0KICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MNCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLg0KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4NCiAgKi8NCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7DQogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLg0KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLg0KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuDQogICovDQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogIH0NCg0KfQ0KDQoNCg0KLyoqDQogKiBAdGl0bGUgSGVscHMgY29udHJhY3RzIGd1YXJkIGFnYWlucyByZW50cmFuY3kgYXR0YWNrcy4NCiAqIEBhdXRob3IgUmVtY28gQmxvZW1lbiA8cmVtY29AMs+ALmNvbT4NCiAqIEBub3RpY2UgSWYgeW91IG1hcmsgYSBmdW5jdGlvbiBgbm9uUmVlbnRyYW50YCwgeW91IHNob3VsZCBhbHNvDQogKiBtYXJrIGl0IGBleHRlcm5hbGAuDQogKi8NCmNvbnRyYWN0IFJlZW50cmFuY3lHdWFyZCB7DQoNCiAgLyoqDQogICAqIEBkZXYgV2UgdXNlIGEgc2luZ2xlIGxvY2sgZm9yIHRoZSB3aG9sZSBjb250cmFjdC4NCiAgICovDQogIGJvb2wgcHJpdmF0ZSByZW50cmFuY3lfbG9jayA9IGZhbHNlOw0KDQogIC8qKg0KICAgKiBAZGV2IFByZXZlbnRzIGEgY29udHJhY3QgZnJvbSBjYWxsaW5nIGl0c2VsZiwgZGlyZWN0bHkgb3IgaW5kaXJlY3RseS4NCiAgICogQG5vdGljZSBJZiB5b3UgbWFyayBhIGZ1bmN0aW9uIGBub25SZWVudHJhbnRgLCB5b3Ugc2hvdWxkIGFsc28NCiAgICogbWFyayBpdCBgZXh0ZXJuYWxgLiBDYWxsaW5nIG9uZSBub25SZWVudHJhbnQgZnVuY3Rpb24gZnJvbQ0KICAgKiBhbm90aGVyIGlzIG5vdCBzdXBwb3J0ZWQuIEluc3RlYWQsIHlvdSBjYW4gaW1wbGVtZW50IGENCiAgICogYHByaXZhdGVgIGZ1bmN0aW9uIGRvaW5nIHRoZSBhY3R1YWwgd29yaywgYW5kIGEgYGV4dGVybmFsYA0KICAgKiB3cmFwcGVyIG1hcmtlZCBhcyBgbm9uUmVlbnRyYW50YC4NCiAgICovDQogIG1vZGlmaWVyIG5vblJlZW50cmFudCgpIHsNCiAgICBpZihyZW50cmFuY3lfbG9jayA9PSBmYWxzZSkgew0KICAgICAgcmVudHJhbmN5X2xvY2sgPSB0cnVlOw0KICAgICAgXzsNCiAgICAgIHJlbnRyYW5jeV9sb2NrID0gZmFsc2U7DQogICAgfSBlbHNlIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCiAgfQ0KDQp9DQoNCmNvbnRyYWN0IEV0Y2hSZXdhcmQgaXMgUGF1c2FibGUsIEJhc2ljVG9rZW4sIFJlZW50cmFuY3lHdWFyZCB7DQoNCiAgICAvLyBhZGRyZXNzIHB1YmxpYyBvd25lcjsgICAgICAgICAgICAgICAgLy8gT3duYWJsZQ0KICAgIC8vIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOyAgICAgICAgICAvLyBQYXVzYWJsZQ0KICAgIC8vIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsgICAvLyBCYXNpY1Rva2VuDQogICAgLy8gdWludCBwdWJsaWMgdG90YWxTdXBwbHk7ICAgICAgICAgICAgIC8vIEVSQzIwQmFzaWMNCiAgICAvLyBib29sIHByaXZhdGUgcmVudHJhbmN5X2xvY2sgPSBmYWxzZTsgLy8gUmVlbnRyYW5jeUd1YXJkDQoNCiAgICAvLw0KICAgIC8vIEBkZXYgY29uc3RhbnRzDQogICAgLy8NCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgICA9ICJFdGNoIFJld2FyZCBUb2tlbiI7DQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiRVRDSFIiOw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7DQoNCiAgICAvLw0KICAgIC8vIEBkZXYgdGhlIG1haW4gYWRkcmVzcyB0byBiZSBmb3J3YXJkZWQgYWxsIGV0aGVyDQogICAgLy8NCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBCRU5FRklDSUFSWSA9IDB4NjUxQTM3MzFmNzE3YTE3Nzc3YzlEOGQ2ZjE1MkFhOTI4NDk3OEVhMzsNCg0KICAgIC8vIEBkZXYgbnVtYmVyIG9mIHRva2VucyBvbmUgcmVjZWl2ZXMgZm9yIGV2ZXJ5IDEgZXRoZXIgdGhleSBzZW5kDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFJJQ0UgPSA4Ow0KDQogICAgLy8gYXZnIGJsb2NrIHRpbWUgPSAxNy4yMCBodHRwczovL2V0aGVyc2Nhbi5pbw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEFWR19CTE9DS1NfMjRIID0gNTAyMzsgIC8vIDM2MDAgKiAyNCAvIDE3LjIwDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQVZHX0JMT0NLU18wMlcgPSA3MDMyNTsgLy8gMzYwMCAqIDI0ICogMTQgLyAxNy4yMA0KDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTUFYX0VUSEVSXzI0SCA9IDQwIGV0aGVyOw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEVUSEVSX0NBUCAgICAgPSAyNjYwIGV0aGVyOw0KDQogICAgdWludCBwdWJsaWMgdG90YWxFdGhlciA9IDA7DQogICAgdWludCBwdWJsaWMgYmxvY2tTdGFydCA9IDA7DQogICAgdWludCBwdWJsaWMgYmxvY2syNGggICA9IDA7DQogICAgdWludCBwdWJsaWMgYmxvY2swMncgICA9IDA7DQoNCiAgICAvLyBAZGV2IGFkZHJlc3Mgb2YgdGhlIGFjdHVhbCBJQ08gY29udHJhY3QgdG8gYmUgZGVwbG95ZWQgbGF0ZXINCiAgICBhZGRyZXNzIHB1YmxpYyBpY29Db250cmFjdCA9IDB4MDsNCg0KICAgIC8vDQogICAgLy8gQGRldiBvd25lciBhdXRob3JpemVkIGFkZHJlc3NlcyB0byBwYXJ0aWNpcGF0ZSBpbiB0aGlzIHByZS1pY28NCiAgICAvLw0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBjb250cmlidXRvcnM7DQoNCg0KICAgIC8vIEBkZXYgY29uc3RydWN0b3IgZnVuY3Rpb24NCiAgICBmdW5jdGlvbiBFdGNoUmV3YXJkKHVpbnQgX2Jsb2NrU3RhcnQpIHsNCiAgICAgICAgYmxvY2tTdGFydCAgPSBfYmxvY2tTdGFydDsNCiAgICAgICAgYmxvY2syNGggPSBibG9ja1N0YXJ0ICsgQVZHX0JMT0NLU18yNEg7DQogICAgICAgIGJsb2NrMDJ3ID0gYmxvY2tTdGFydCArIEFWR19CTE9DS1NfMDJXOw0KICAgIH0NCg0KICAgIC8vDQogICAgLy8gQG5vdGljZSB0aGUgYWJpbGl0eSB0byB0cmFuc2ZlciB0b2tlbnMgaXMgZGlzYWJsZWQNCiAgICAvLw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MsIHVpbnQpIHsNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgLy8NCiAgICAvLyBAbm90aWNlIHdlIERPIGFsbG93IHNlbmRpbmcgZXRoZXIgZGlyZWN0bHkgdG8gdGhlIGNvbnRyYWN0IGFkZHJlc3MNCiAgICAvLw0KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgew0KICAgICAgICBidXkoKTsNCiAgICB9DQoNCiAgICAvLw0KICAgIC8vIEBkZXYgbW9kaWZpZXJzDQogICAgLy8NCiAgICBtb2RpZmllciBvbmx5Q29udHJpYnV0b3JzKCkgew0KICAgICAgICBpZihjb250cmlidXRvcnNbbXNnLnNlbmRlcl0gIT0gdHJ1ZSkgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5SWNvQ29udHJhY3QoKSB7DQogICAgICAgIGlmKGljb0NvbnRyYWN0ID09IDB4MCB8fCBtc2cuc2VuZGVyICE9IGljb0NvbnRyYWN0KSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vDQogICAgLy8gQGRldiBjYWxsIHRoaXMgdG8gYXV0aG9yaXplIHBhcnRpY2lwYW50cyB0byB0aGlzIHByZS1pY28gc2FsZQ0KICAgIC8vIEBwYXJhbSB0aGUgYXV0aG9yaXplZCBwYXJ0aWNpcGFudCBhZGRyZXNzDQogICAgLy8NCiAgICBmdW5jdGlvbiBhZGRDb250cmlidXRvcihhZGRyZXNzIF93aG8pIHB1YmxpYyBvbmx5T3duZXIgew0KICAgICAgICBjb250cmlidXRvcnNbX3dob10gPSB0cnVlOw0KICAgIH0NCg0KICAgIC8vIEBkZXYgdXNlZnVsIGZvciBjb250cmlidXRvciB0byBjaGVjayBiZWZvcmUgc2VuZGluZyBldGhlcg0KICAgIGZ1bmN0aW9uIGlzQ29udHJpYnV0b3IoYWRkcmVzcyBfd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhib29sKSB7DQogICAgICAgIHJldHVybiBjb250cmlidXRvcnNbX3dob107DQogICAgfQ0KDQogICAgLy8NCiAgICAvLyBAZGV2IHRoaXMgd2lsbCBiZSBsYXRlciBzZXQgYnkgdGhlIG93bmVyIG9mIHRoaXMgY29udHJhY3QNCiAgICAvLw0KICAgIGZ1bmN0aW9uIHNldEljb0NvbnRyYWN0KGFkZHJlc3MgX2NvbnRyYWN0KSBwdWJsaWMgb25seU93bmVyIHsNCiAgICAgICAgaWNvQ29udHJhY3QgPSBfY29udHJhY3Q7DQogICAgfQ0KDQogICAgLy8NCiAgICAvLyBAZGV2IGZ1bmN0aW9uIGNhbGxlZCBieSB0aGUgSUNPIGNvbnRyYWN0IHRvIHRyYW5zZm9ybSB0aGUgdG9rZW5zIGludG8gRVRDSCB0b2tlbnMNCiAgICAvLw0KICAgIGZ1bmN0aW9uIG1pZ3JhdGUoYWRkcmVzcyBfY29udHJpYnV0b3IpIHB1YmxpYw0KICAgIG9ubHlJY29Db250cmFjdA0KICAgIHdoZW5Ob3RQYXVzZWQgew0KDQogICAgICAgIGlmKGdldEJsb2NrKCkgPCBibG9jazAydykgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoYmFsYW5jZXNbX2NvbnRyaWJ1dG9yXSk7DQogICAgICAgIGJhbGFuY2VzW19jb250cmlidXRvcl0gPSAwOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJ1eSgpIHBheWFibGUNCiAgICBub25SZWVudHJhbnQNCiAgICBvbmx5Q29udHJpYnV0b3JzDQogICAgd2hlbk5vdFBhdXNlZCB7DQoNCiAgICAgICAgYWRkcmVzcyBfcmVjaXBpZW50ID0gbXNnLnNlbmRlcjsNCiAgICAgICAgdWludCBibG9ja05vdyA9IGdldEJsb2NrKCk7DQoNCiAgICAgICAgLy8gYXJlIHdlIGJlZm9yZSBvciBhZnRlciB0aGUgc2FsZSBwZXJpb2Q/DQogICAgICAgIGlmKGJsb2NrTm93IDwgYmxvY2tTdGFydCB8fCBibG9jazAydyA8PSBibG9ja05vdykgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoYmxvY2tOb3cgPCBibG9jazI0aCkgew0KDQogICAgICAgICAgICAvLyBvbmx5IG9uZSB0cmFuc2FjdGlvbiBpcyBhdXRob3JpemVkDQogICAgICAgICAgICBpZiAoYmFsYW5jZXNbX3JlY2lwaWVudF0gPiAwKSB7DQogICAgICAgICAgICAgICAgdGhyb3c7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIG9ubHkgYWxsb3dlZCB0byBidXkgYSBjZXJ0YWluIGFtb3VudA0KICAgICAgICAgICAgaWYgKG1zZy52YWx1ZSA+IE1BWF9FVEhFUl8yNEgpIHsNCiAgICAgICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBkb24ndCBnbyBvdmVyIHRoZSBldGhlciBjYXANCiAgICAgICAgaWYgKHRvdGFsRXRoZXIuYWRkKG1zZy52YWx1ZSkgPiBFVEhFUl9DQVApIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQoNCiAgICAgICAgdWludCB0b2tlbnMgPSBtc2cudmFsdWUubXVsKFBSSUNFKTsNCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG9rZW5zKTsNCg0KICAgICAgICBiYWxhbmNlc1tfcmVjaXBpZW50XSA9IGJhbGFuY2VzW19yZWNpcGllbnRdLmFkZCh0b2tlbnMpOw0KICAgICAgICB0b3RhbEV0aGVyLmFkZChtc2cudmFsdWUpOw0KDQogICAgICAgIGlmICghQkVORUZJQ0lBUlkuc2VuZChtc2cudmFsdWUpKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldEJsb2NrKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgcmV0dXJuIGJsb2NrLm51bWJlcjsNCiAgICB9DQoNCn0='