base 64 content
base64ethHodler
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCi8qKg0KKiBFdGggSG9kbGVyIChmLmsuYS4gSG9kbCBEQU8pIGFuZCBFUkMyMCB0b2tlbg0KKiBBdXRob3I6IEN1cnJlbmN5VHljb29uIG9uIEdpdEh1Yg0KKiBMaWNlbnNlOiBNSVQNCiogRGF0ZTogMjAxNw0KKg0KKiBEZXBsb3kgd2l0aCB0aGUgZm9sbG93aW5nIGFyZ3M6DQoqICJFdGggSG9kbGVyIiwgMTgsICJFSERMIg0KKg0KKi8NCmNvbnRyYWN0IEV0aEhvZGxlciB7DQogICAgLyogRVJDMjAgUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8NCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHZlcnNpb24gPSAnSERBTyAwLjcnOw0KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsNCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsNCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7DQogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7DQoNCiAgICAvKiBFUkMyMCBUaGlzIGNyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgYmFsYW5jZXMgKi8NCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOw0KDQoNCiAgICAvKiBzdG9yZSB0aGUgYmxvY2sgbnVtYmVyIHdoZW4gYSB3aXRoZHJhd2FsIGhhcyBiZWVuIHJlcXVlc3RlZCovDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB3aXRoZHJhd2FsUmVxdWVzdCkgcHVibGljIHdpdGhkcmF3YWxSZXF1ZXN0czsNCiAgICBzdHJ1Y3Qgd2l0aGRyYXdhbFJlcXVlc3Qgew0KICAgIHVpbnQgc2luY2VUaW1lOw0KICAgIHVpbnQyNTYgYW1vdW50Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIGZlZVBvdCBjb2xsZWN0cyBmZWVzIGZyb20gcXVpY2sgd2l0aGRyYXdhbHMuIFRoaXMgZ2V0cyByZS1kaXN0cmlidXRlZCB0byBzbG93LXdpdGhkcmF3YWxzDQogICAgKi8NCiAgICB1aW50MjU2IHB1YmxpYyBmZWVQb3Q7DQoNCiAgICB1aW50IHB1YmxpYyB0aW1lV2FpdCA9IDMwIGRheXM7DQogICAgLy91aW50IHB1YmxpYyB0aW1lV2FpdCA9IDEgbWludXRlczsgLy8gdW5jb21tZW50IGZvciBUZXN0TmV0DQoNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBpbml0aWFsU3VwcGx5ID0gMDsNCg0KICAgIC8qKg0KICAgICAqIEVSQzIwIGV2ZW50cyB0aGVzZSBnZW5lcmF0ZSBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMNCiAgICAqLw0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOw0KDQogICAgZXZlbnQgV2l0aGRyYXdhbFF1aWNrKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludDI1NiBhbW91bnQsIHVpbnQyNTYgZmVlKTsgLy8gcXVpY2sgd2l0aGRyYXdhbCBkb25lDQogICAgZXZlbnQgSW5jb3JyZWN0RmVlKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludDI1NiBmZWVSZXF1aXJlZCk7ICAvLyBpbmNvcnJlY3QgZmVlIHBhaWQgZm9yIHF1aWNrIHdpdGhkcmF3YWwNCiAgICBldmVudCBXaXRoZHJhd2FsU3RhcnRlZChhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgYW1vdW50KTsNCiAgICBldmVudCBXaXRoZHJhd2FsRG9uZShhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgYW1vdW50LCB1aW50MjU2IHJld2FyZCk7IC8vIGFtb3VudCBpcyB0aGUgYW1vdW50IHRoYXQgd2FzIHVzZWQgdG8gY2FsY3VsYXRlIHJld2FyZA0KICAgIGV2ZW50IFdpdGhkcmF3YWxQcmVtYXR1cmUoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50IHRpbWVUb1dhaXQpOyAvLyBOZWVkcyB0byB3YWl0IHRpbWVUb1dhaXQgYmVmb3JlIHdpdGhkcmF3YWwgdW5sb2NrZWQNCiAgICBldmVudCBEZXBvc2l0ZWQoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGFtb3VudCk7DQoNCiAgICAvKioNCiAgICAgKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QNCiAgICAgKiBJbiBvdXIgY2FzZSwgdGhlcmUncyBubyBpbml0aWFsIHN1cHBseS4gVG9rZW5zIHdpbGwgYmUgY3JlYXRlZCBhcyBldGhlciBpcyBzZW50DQogICAgICogdG8gdGhlIGZhbGwtYmFjayBmdW5jdGlvbi4gVGhlbiB0b2tlbnMgYXJlIGJ1cm5lZCB3aGVuIGV0aGVyIGlzIHdpdGhkcmF3bi4NCiAgICAgKi8NCiAgICBmdW5jdGlvbiBFdGhIb2RsZXIoDQogICAgc3RyaW5nIHRva2VuTmFtZSwNCiAgICB1aW50OCBkZWNpbWFsVW5pdHMsDQogICAgc3RyaW5nIHRva2VuU3ltYm9sDQogICAgKSB7DQoNCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIGluaXRpYWwgdG9rZW5zICgwIGluIHRoaXMgY2FzZSkNCiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbCBzdXBwbHkgKDAgaW4gdGhpcyBjYXNlKQ0KICAgICAgICBuYW1lID0gdG9rZW5OYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzDQogICAgICAgIHN5bWJvbCA9IHRva2VuU3ltYm9sOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3Nlcw0KICAgICAgICBkZWNpbWFscyA9IGRlY2ltYWxVbml0czsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5IHB1cnBvc2VzDQogICAgfQ0KDQogICAgLyoqDQogICAgICogbm90UGVuZGluZ1dpdGhkcmF3YWwgbW9kaWZpZXIgZ3VhcmRzIHRoZSBmdW5jdGlvbiBmcm9tIGV4ZWN1dGluZyB3aGVuIGENCiAgICAgKiB3aXRoZHJhd2FsIGhhcyBiZWVuIHJlcXVlc3RlZCBhbmQgaXMgY3VycmVudGx5IHBlbmRpbmcNCiAgICAgKi8NCiAgICBtb2RpZmllciBub3RQZW5kaW5nV2l0aGRyYXdhbCB7DQogICAgICAgIGlmICh3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0uc2luY2VUaW1lID4gMCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLyoqIEVSQzIwIC0gdHJhbnNmZXIgc2VuZHMgdG9rZW5zDQogICAgICogQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgDQogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50DQogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkDQogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QNCiAgICAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG5vdFBlbmRpbmdXaXRoZHJhd2FsIHsNCiAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IF92YWx1ZSkgdGhyb3c7ICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gNCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHRocm93OyAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzDQogICAgICAgIGlmICh3aXRoZHJhd2FsUmVxdWVzdHNbX3RvXS5zaW5jZVRpbWUgPiAwKSB0aHJvdzsgICAgLy8gY2FuJ3QgbW92ZSB0b2tlbnMgd2hlbiBfdG8gaXMgcGVuZGluZyB3aXRoZHJhd2FsDQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyDQogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQNCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdHJhbnNmZXIgdG9vayBwbGFjZQ0KICAgIH0NCg0KICAgIC8qKiBFUkMyMCBhcHByb3ZlIGFsbG93cyBhbm90aGVyIGNvbnRyYWN0IHRvIHNwZW5kIHNvbWUgdG9rZW5zIGluIHlvdXIgYmVoYWxmDQogICAgICogQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMNCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zDQogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXINCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgICAqDQogICAgICoNCiAgICAgKiBOb3RlLCB0aGVyZSBhcmUgc29tZSBlZGdlLWNhc2VzIHdpdGggdGhlIEVSQy0yMCBhcHByb3ZlIG1lY2hhbmlzbS4gSW4gdGhpcyBjYXNlIGEgJ2JvdW5kcyBjaGVjaycNCiAgICAgKiB3YXMgYWRkZWQgdG8gbWFrZSBzdXJlIEFsaWNlIGNhbnQnIGFwcHJvdmUgQm9iIGZvciBtb3JlIHRva2VucyB0aGFuIHNoZSBoYXMuDQogICAgICogVGhlIGFzc3VtcHRpb25zIGFyZSB0aGF0IHRoZXNlIHNjZW5hcmlvcyBjb3VsZCBzdGlsbCBoYXBwZW4gaWYgbm90IG1pdGlnYXRlZCBieSBBbGljZToNCiAgICAgKg0KICAgICAqIFNjZW5hcmlvIDE6DQogICAgICoNCiAgICAgKiBUaGUgZm9sbG93aW5nIHNjZW5hcmlvIGNvdWxkIGJlIHRoZSBleHBlY3RlZCBvdXRjb21lIGJ5IEFsaWNlLCBidXQgaWYgbm90LCBBbGljZSB3b3VsZCBuZWVkIHRvIHNldA0KICAgICAqIGhlciBhcHByb3ZhbCB0byBCb2IgdG8gMCBiZWZvcmUgQWxpY2UgcHVyY2hhc2VzIG1vcmUgdG9rZW5zLg0KICAgICAqDQogICAgICogIDEuIEFsaWNlIGhhcyAxMDAgdG9rZW5zLg0KICAgICAqICAyLiBBbGljZSBhcHByb3ZlcyA1MCB0b2tlbnMgZm9yIEJvYi4NCiAgICAgKiAgMy4gQWxpY2UgYXBwcm92ZXMgMTAwIHRva2VucyBmb3IgQ2hhcmxlcw0KICAgICAqICA0LiBCb2IgY2FsbHMgdHJhbnNmZXJGcm9tIGFuZCByZWNlaXZlcyBoaXMgNTAgdG9rZW5zLg0KICAgICAqICA1LiBDaGFybGVzIGNhbGxzIHRyYW5zZmVyRnJvbSBhbmQgcmVjZWl2ZXMgdGhlIHJlbWFpbmluZyA1MCB0b2tlbnMNCiAgICAgKiAgNi4gQ2hhcmxlcyBzdGlsbCBoYXMgYW4gYXBwcm92YWwgZm9yIDUwIG1vcmUgdG9rZW5zIGZyb20gQWxpY2UsIGV2ZW4gdGhvdWdoIHNoZSBub3cgb3ducyAwIHRva2Vucy4NCiAgICAgKiAgNy4gQWxpY2UgcHVyY2hhc2VzIDUwIG1vcmUgdG9rZW5zDQogICAgICogIDguIENoYXJsZXMgc2VlcyB0aGlzLCBhbmQgaW1tZWRpYXRlbHkgY2FsbHMgdHJhbnNmZXJGcm9tIGFuZCByZWNlaXZlcyB0aG9zZSA1MCB0b2tlbnMuDQogICAgICoNCiAgICAgKiBTY2VuYXJpbyAyOg0KICAgICAqDQogICAgICogVGhpcyBpcyBhIHJhY2UgY29uZGl0aW9uLiBUbyBtaXRpZ2F0ZSB0aGlzIHByb2JsZW0sIEFsaWNlIHNob3VsZCBzZXQgdGhlIGFsbG93YW5jZSB0byAwIGluIHN0ZXAgMiwNCiAgICAgKiB0aGVuIHdhaXQgdW50aWwgaXQncyBtaW5lZCwgdGhlbiBpZiBCb2IgZGlkbid0IHRha2UgdGhlIDEwMCBzaGUgY2FuIHNldCB0byA1MC4gKE90aGVyd2lzZSBCb2IgbWF5DQogICAgICogcG90ZW50aWFsbHkgZ2V0IDE1MCB0b2tlbnMpDQogICAgICoNCiAgICAgKg0KICAgICAqICAxLiBBbGljZSBhcHByb3ZlcyBCb2IgZm9yIDEwMCwNCiAgICAgKiAgMi4gQWxpY2UgY2hhbmdlcyBpdCB0byA1MA0KICAgICAqICAzLiBCb2Igc2VlcyB0aGUgY2hhbmdlIGluIHRoZSBtZW1wb29sIGJlZm9yZSBpdCdzIG1pbmVkLCBhbmQgc2VuZHMgYSBuZXcgdHJhbnNhY3Rpb24NCiAgICAgKiAgICAgdGhhdCB3aWxsIGhvcGVmdWxseSB3aW4gdGhlIHJhY2UgYW5kIHdpdGhkcmF3IHRoZSAxMDAgZmlyc3QsIG1lYW53aGlsZSB0aGUgNTAgd2lsbA0KICAgICAqICAgICBiZSBtaW5lZCBhZnRlciBhbmQgYWxsb3cgQm9iIHRvIHdpdGhkcmF3IGFub3RoZXIgNTAuDQogICAgICoNCiAgICAgKg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIG5vdFBlbmRpbmdXaXRoZHJhd2FsDQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoNCiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBsaW5lIGhhcyBiZWVuIGNvbW1lbnRlZCBvdXQgYWZ0ZXIgcGVlciByZXZpZXcgIzINCiAgICAgICAgLy8gSXQgbWF5IGJlIHBvc3NpYmxlIHRoYXQgQWxpY2UgY2FuIHByZS1hcHByb3ZlIHRoZSByZWNpcGllbnQgaW4gYWR2YW5jZSwgYmVmb3JlIHNoZSBoYXMgYSBiYWxhbmNlLg0KICAgICAgICAvLyBlZy4gQWxpY2UgbWF5IGFwcHJvdmUgYSB0b3RhbCBsaWZldGltZSBhbW91bnQgZm9yIGhlciBjaGlsZCB0byBzcGVuZCwgYnV0IG9ubHkgZnVuZCBoZXIgYWNjb3VudCBtb250aGx5Lg0KICAgICAgICAvLyBJdCBhbHNvIGFsbG93cyBoZXIgdG8gaGF2ZSBtdWx0aXBsZSBlcXVhbCBhcHByb3ZlZXMNCg0KICAgICAgICAvL2lmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldHVybiBmYWxzZTsgLy8gRG9uJ3QgYWxsb3cgbW9yZSB0aGFuIHRoZXkgY3VycmVudGx5IGhhdmUgKGJvdW5kcyBjaGVjaykNCg0KICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzJiMxODA7DQogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLDApYCBpZiBpdCBpcyBub3QNCiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6DQogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQ0KICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7DQogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgcmV0dXJuIGEgYm9vbCBhcyBwYXJ0IG9mIHRoZSBFUkMyMA0KICAgIH0NCg0KDQogICAgLyoqDQogICAgICogRVJDLTIwIEFwcHJvdmVzIGFuZCB0aGVuIGNhbGxzIHRoZSByZWNlaXZpbmcgY29udHJhY3QNCiAgICAqLw0KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSBub3RQZW5kaW5nV2l0aGRyYXdhbA0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KDQogICAgICAgIGlmICghYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIC8vY2FsbCB0aGUgcmVjZWl2ZUFwcHJvdmFsIGZ1bmN0aW9uIG9uIHRoZSBjb250cmFjdCB5b3Ugd2FudCB0byBiZSBub3RpZmllZC4gVGhpcyBjcmFmdHMgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBtYW51YWxseSBzbyBvbmUgZG9lc24ndCBoYXZlIHRvIGluY2x1ZGUgYSBjb250cmFjdCBpbiBoZXJlIGp1c3QgZm9yIHRoaXMuDQogICAgICAgIC8vcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbkNvbnRyYWN0LCBieXRlcyBfZXh0cmFEYXRhKQ0KICAgICAgICAvL2l0IGlzIGFzc3VtZWQgdGhhdCB3aGVuIGRvZXMgdGhpcyB0aGF0IHRoZSBjYWxsICpzaG91bGQqIHN1Y2NlZWQsIG90aGVyd2lzZSBvbmUgd291bGQgdXNlIHZhbmlsbGEgYXBwcm92ZSBpbnN0ZWFkLg0KICAgICAgICBpZighX3NwZW5kZXIuY2FsbChieXRlczQoYnl0ZXMzMihzaGEzKCJyZWNlaXZlQXBwcm92YWwoYWRkcmVzcyx1aW50MjU2LGFkZHJlc3MsYnl0ZXMpIikpKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKSkgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogRVJDMjAgQSBjb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zLiBOb3RlOiBXZSBhcmUgbm90IGFsbG93aW5nIGEgdHJhbnNmZXIgaWYNCiAgICAgKiBlaXRoZXIgdGhlIGZyb20gb3IgdG8gYWRkcmVzcyBpcyBwZW5kaW5nIHdpdGhkcmF3YWwNCiAgICAgKiBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYA0KICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyDQogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50DQogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkDQogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QNCiAgICAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQ0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICAvLyBub3RlIHRoYXQgd2UgY2FuJ3QgdXNlIG5vdFBlbmRpbmdXaXRoZHJhd2FsIG1vZGlmaWVyIGhlcmUgc2luY2UgdGhpcyBmdW5jdGlvbiBkb2VzIGEgdHJhbnNmZXINCiAgICAgICAgLy8gb24gdGhlIGJlaGFsZiBvZiBfZnJvbQ0KICAgICAgICBpZiAod2l0aGRyYXdhbFJlcXVlc3RzW19mcm9tXS5zaW5jZVRpbWUgPiAwKSB0aHJvdzsgICAvLyBjYW4ndCBtb3ZlIHRva2VucyB3aGVuIF9mcm9tIGlzIHBlbmRpbmcgd2l0aGRyYXdhbA0KICAgICAgICBpZiAod2l0aGRyYXdhbFJlcXVlc3RzW190b10uc2luY2VUaW1lID4gMCkgdGhyb3c7ICAgICAvLyBjYW4ndCBtb3ZlIHRva2VucyB3aGVuIF90byBpcyBwZW5kaW5nIHdpdGhkcmF3YWwNCiAgICAgICAgaWYgKGJhbGFuY2VPZltfZnJvbV0gPCBfdmFsdWUpIHRocm93OyAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoDQogICAgICAgIGlmIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA8IGJhbGFuY2VPZltfdG9dKSB0aHJvdzsgIC8vIENoZWNrIGZvciBvdmVyZmxvd3MNCiAgICAgICAgaWYgKF92YWx1ZSA+IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pIHRocm93OyAgICAgLy8gQ2hlY2sgYWxsb3dhbmNlDQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcg0KICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudA0KICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogd2l0aGRyYXdhbEluaXRpYXRlIGluaXRpYXRlcyB0aGUgd2l0aGRyYXdhbCBieSBnb2luZyBpbnRvIGEgd2FpdGluZyBwZXJpb2QNCiAgICAgKiBJdCByZW1lbWJlcnMgdGhlIGJsb2NrIG51bWJlciAmIGFtb3VudCBoZWxkIGF0IHRoZSB0aW1lIG9mIHJlcXVlc3QuDQogICAgICogVG9rZW5zIGNhbm5vdCBiZSBtb3ZlZCBvdXQgZHVyaW5nIHRoZSB3YWl0aW5nIHBlcmlvZCwgbG9ja2luZyB0aGUgdG9rZW5zIHVudGlsIHRoZW4uDQogICAgICogQWZ0ZXIgdGhlIHdhaXRpbmcgcGVyaW9kIGZpbmlzaGVzLCB0aGUgY2FsbCB3aXRoZHJhd2FsQ29tcGxldGUNCiAgICAgKg0KICAgICAqIEdhczogNjQ0OTANCiAgICAgKg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3YWxJbml0aWF0ZSgpIG5vdFBlbmRpbmdXaXRoZHJhd2FsIHsNCiAgICAgICAgV2l0aGRyYXdhbFN0YXJ0ZWQobXNnLnNlbmRlciwgYmFsYW5jZU9mW21zZy5zZW5kZXJdKTsNCiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdID0gd2l0aGRyYXdhbFJlcXVlc3Qobm93LCBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIHdpdGhkcmF3YWxDb21wbGV0ZSBpcyBjYWxsZWQgYWZ0ZXIgdGhlIHdhaXRpbmcgcGVyaW9kLiBUaGUgZXRoZXIgd2lsbCBiZQ0KICAgICAqIHJldHVybmVkIHRvIHRoZSBjYWxsZXIgYW5kIHRoZSB0b2tlbnMgd2lsbCBiZSBidXJuZWQuDQogICAgICogQSByZXdhcmQgd2lsbCBiZSBpc3N1ZWQgYmFzZWQgb24gdGhlIGN1cnJlbnQgYW1vdW50IGluIHRoZSBmZWVQb3QsIHJlbGF0aXZlIHRvIHRoZQ0KICAgICAqIGFtb3VudCB0aGF0IHdhcyByZXF1ZXN0ZWQgZm9yIHdpdGhkcmF3YWwgd2hlbiB3aXRoZHJhd2FsSW5pdGlhdGUoKSB3YXMgY2FsbGVkLg0KICAgICAqDQogICAgICogR2FzOiAzMDk0Ng0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3YWxDb21wbGV0ZSgpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3QgciA9IHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXTsNCiAgICAgICAgaWYgKHIuc2luY2VUaW1lID09IDApIHRocm93Ow0KICAgICAgICBpZiAoKHIuc2luY2VUaW1lICsgdGltZVdhaXQpID4gbm93KSB7DQogICAgICAgICAgICAvLyBob2xkZXIgbmVlZHMgdG8gd2FpdCBzb21lIG1vcmUgYmxvY2tzDQogICAgICAgICAgICBXaXRoZHJhd2FsUHJlbWF0dXJlKG1zZy5zZW5kZXIsIHIuc2luY2VUaW1lICsgdGltZVdhaXQgLSBub3cpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdLmFtb3VudDsNCiAgICAgICAgdWludDI1NiByZXdhcmQgPSBjYWxjdWxhdGVSZXdhcmQoci5hbW91bnQpOw0KICAgICAgICB3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0uc2luY2VUaW1lID0gMDsgICAvLyBUaGlzIHdpbGwgdW5sb2NrIHRoZSBob2xkZXJzIHRva2Vucw0KICAgICAgICB3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0uYW1vdW50ID0gMDsgICAgICAvLyBjbGVhciB0aGUgYW1vdW50IHRoYXQgd2FzIHJlcXVlc3RlZA0KDQogICAgICAgIGlmIChyZXdhcmQgPiAwKSB7DQogICAgICAgICAgICBpZiAoZmVlUG90IC0gcmV3YXJkID4gZmVlUG90KSB7ICAgICAgICAgICAgIC8vIHVuZGVyZmxvdyBjaGVjaw0KICAgICAgICAgICAgICAgIGZlZVBvdCA9IDA7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGZlZVBvdCAtPSByZXdhcmQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZG9XaXRoZHJhd2FsKHJld2FyZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVybiB0aGUgdG9rZW5zIGFuZCBzZW5kIGJhY2sgdGhlIGV0aGVyDQogICAgICAgIFdpdGhkcmF3YWxEb25lKG1zZy5zZW5kZXIsIGFtb3VudCwgcmV3YXJkKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBSZXdhcmQgaXMgYmFzZWQgb24gdGhlIGFtb3VudCBoZWxkLCByZWxhdGl2ZSB0byB0b3RhbCBzdXBwbHkgb2YgdG9rZW5zLg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVJld2FyZCh1aW50MjU2IHYpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICAgICAgdWludDI1NiByZXdhcmQgPSAwOw0KICAgICAgICBpZiAoZmVlUG90ID4gMCkgew0KICAgICAgICAgICAgcmV3YXJkID0gZmVlUG90ICogdiAvIHRvdGFsU3VwcGx5OyAvLyBhc3N1bWluZyB0aGF0IGlmIGZlZVBvdCA+IDAgdGhlbiBhbHNvIHRvdGFsU3VwcGx5ID4gMA0KICAgICAgICB9DQogICAgICAgIHJldHVybiByZXdhcmQ7DQogICAgfQ0KDQogICAgLyoqIGNhbGN1bGF0ZSB0aGUgZmVlIGZvciBxdWljayB3aXRoZHJhd2FsDQogICAgICovDQogICAgZnVuY3Rpb24gY2FsY3VsYXRlRmVlKHVpbnQyNTYgdikgY29uc3RhbnQgcmV0dXJucyAgKHVpbnQyNTYpIHsNCiAgICAgICAgdWludDI1NiBmZWVSZXF1aXJlZCA9IHYgLyAxMDA7IC8vIDElDQogICAgICAgIHJldHVybiBmZWVSZXF1aXJlZDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBRdWljayB3aXRoZHJhd2FsLCBuZWVkcyB0byBzZW5kIGV0aGVyIHRvIHRoaXMgZnVuY3Rpb24gZm9yIHRoZSBmZWUuDQogICAgICoNCiAgICAgKiBHYXMgdXNlOiA/IChpbmNsdWRpbmcgY2FsbCB0byBwcm9jZXNzV2l0aGRyYXdhbCkNCiAgICAqLw0KICAgIGZ1bmN0aW9uIHF1aWNrV2l0aGRyYXcoKSBwYXlhYmxlIG5vdFBlbmRpbmdXaXRoZHJhd2FsIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgdWludDI1NiBhbW91bnQgPSBiYWxhbmNlT2ZbbXNnLnNlbmRlcl07DQogICAgICAgIGlmIChhbW91bnQgPT0gMCkgdGhyb3c7DQogICAgICAgIC8vIGNhbGN1bGF0ZSByZXF1aXJlZCBmZWUNCiAgICAgICAgdWludDI1NiBmZWVSZXF1aXJlZCA9IGNhbGN1bGF0ZUZlZShhbW91bnQpOw0KICAgICAgICBpZiAobXNnLnZhbHVlICE9IGZlZVJlcXVpcmVkKSB7DQogICAgICAgICAgICBJbmNvcnJlY3RGZWUobXNnLnNlbmRlciwgZmVlUmVxdWlyZWQpOyAgIC8vIG5vdGlmeSB0aGUgZXhhY3QgZmVlIHRoYXQgbmVlZHMgdG8gYmUgc2VudA0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgZmVlUG90ICs9IG1zZy52YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGZlZSB0byB0aGUgZmVlUG90DQogICAgICAgIGRvV2l0aGRyYXdhbCgwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGhkcmF3LCAwIHJld2FyZA0KICAgICAgICBXaXRoZHJhd2FsRG9uZShtc2cuc2VuZGVyLCBhbW91bnQsIDApOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBkbyB3aXRoZHJhd2FsDQogICAgICovDQogICAgZnVuY3Rpb24gZG9XaXRoZHJhd2FsKHVpbnQyNTYgZXh0cmEpIGludGVybmFsIHsNCiAgICAgICAgdWludDI1NiBhbW91bnQgPSBiYWxhbmNlT2ZbbXNnLnNlbmRlcl07DQogICAgICAgIGlmIChhbW91bnQgPT0gMCkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbm5vdCB3aXRoZHJhdw0KICAgICAgICBpZiAoYW1vdW50ICsgZXh0cmEgPiB0aGlzLmJhbGFuY2UpIHsNCiAgICAgICAgICAgIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29udHJhY3QgZG9lc24ndCBoYXZlIGVub3VnaCBiYWxhbmNlDQogICAgICAgIH0NCg0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSAwOw0KICAgICAgICBpZiAodG90YWxTdXBwbHkgPCB0b3RhbFN1cHBseSAtIGFtb3VudCkgew0KICAgICAgICAgICAgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBsZXQgaXQgdW5kZXJmbG93IChzaG91bGQgbm90IGhhcHBlbiBzaW5jZSBhbW91bnQgPD0gdG90YWxTdXBwbHkpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0b3RhbFN1cHBseSAtPSBhbW91bnQ7ICAgICAgICAgICAgICAgICAgIC8vIGRlZmxhdGUgdGhlIHN1cHBseSENCiAgICAgICAgfQ0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCAwLCBhbW91bnQpOyAgICAgICAgICAgICAvLyBidXJuIGJhYnkgYnVybg0KICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChhbW91bnQgKyBleHRyYSkpIHRocm93OyAvLyByZXR1cm4gYmFjayB0aGUgZXRoZXIgb3Igcm9sbGJhY2sgaWYgZmFpbGVkDQogICAgfQ0KDQoNCiAgICAvKioNCiAgICAgKiBGYWxsYmFjayBmdW5jdGlvbiB3aGVuIHNlbmRpbmcgZXRoZXIgdG8gdGhlIGNvbnRyYWN0DQogICAgICogR2FzIHVzZTogNjUwNTENCiAgICAqLw0KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgbm90UGVuZGluZ1dpdGhkcmF3YWwgew0KICAgICAgICB1aW50MjU2IGFtb3VudCA9IG1zZy52YWx1ZTsgICAgICAgICAvLyBhbW91bnQgdGhhdCB3YXMgc2VudA0KICAgICAgICBpZiAoYW1vdW50ID09IDApIHRocm93OyAgICAgICAgICAgICAvLyBuZWVkIHRvIHNlbmQgc29tZSBFVEgNCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdICs9IGFtb3VudDsgICAgLy8gbWludCBuZXcgdG9rZW5zDQogICAgICAgIHRvdGFsU3VwcGx5ICs9IGFtb3VudDsgICAgICAgICAgICAgIC8vIHRyYWNrIHRoZSBzdXBwbHkNCiAgICAgICAgVHJhbnNmZXIoMCwgbXNnLnNlbmRlciwgYW1vdW50KTsgICAgLy8gbm90aWZ5IG9mIHRoZSBldmVudA0KICAgICAgICBEZXBvc2l0ZWQobXNnLnNlbmRlciwgYW1vdW50KTsNCiAgICB9DQp9'