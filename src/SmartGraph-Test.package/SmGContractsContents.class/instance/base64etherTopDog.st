base 64 content
base64etherTopDog
	^'Y29udHJhY3QgRXRoZXJUb3BEb2cgew0KDQoJLy8gZnVuZCBmb3IgYmFpbGluZyBvdXQgdW5kZXJkb2dzIHdoZW4gdGhleSBhcmUgcHVzaGVkIG91dA0KCXVpbnQgcHJpdmF0ZSBiYWlsb3V0QmFsYW5jZSA9IDA7DQoNCg0KCS8vID09PSBVbmRlcmRvZyBQYXlpbiBEaXN0cmlidXRpb246ID09PQ0KCQ0KCS8vIHBlcmNlbnQgb2YgdW5kZXJkb2cgZGVwb3NpdCBhbW91bnQgdG8gZ28gaW4gYmFpbG91dCBmdW5kDQoJdWludCBjb25zdGFudCBwcml2YXRlIGJhaWxvdXRGdW5kUGVyY2VudCA9IDcwOw0KDQoJLy8gcGVyY2VudCBvZiB1bmRlcmRvZyBkZXBvc2l0IHRoYXQgZ29lcyB0byB0aGUgdG9wIGRvZydzIGRpdmlkZW5kDQoJdWludCBjb25zdGFudCBwcml2YXRlIHRvcERvZ0RpdmlkZW5kID0gMTU7DQoNCgkvLyBwZXJjZW50IG9mIHVuZGVyZG9nIGRlcG9zaXQgc2VudCBjaGlwIGF3YXkgdG9wIGRvZydzIHN0cmVuZ3RoDQoJdWludCBjb25zdGFudCBwcml2YXRlIHRvcERvZ0RlY2F5UGVyY2VudCA9IDEwOw0KDQoJLy8gcGVyY2VudCBvZiB1bmRlcmRvZyBkZXBvc2lvdCB0aGF0IGdvZXMgdG8gbHVja3kgZG9nJ3MgZGl2aWRlbmQNCgl1aW50IGNvbnN0YW50IHByaXZhdGUgbHVja3lEb2dEaXZpZGVuZCA9IDM7DQoNCgkvLyB2aXNpb24gZG9nIHRha2VzIGEgc21hbGwgZmVlIGZyb20gZWFjaCB1bmRlcmRvZyBkZXBvc2l0DQoJdWludCBjb25zdGFudCBwcml2YXRlIHZpc2lvbkRvZ0ZlZVBlcmNlbnQgPSAyOw0KDQoJLy8gPT09ID09PSA9PT0gPT09ID09PSA9PT0gPT09ID09PSA9PT0NCg0KCQ0KCS8vIHBlcmNlbnRhZ2UgbWFya3VwIGZyb20gcGF5aW4gZm9yIGNhbGN1bGF0aW5nIG5ldyBtaW5pbnVtIFRvcERvZyBwcmljZSB0aHJlc2hvbGQNCgl1aW50IGNvbnN0YW50IHByaXZhdGUgdG9wRG9nTWluTWFya3VwID0gMTI1Ow0KDQoJLy8gbWluaW11bSByZXF1aXJlZCBkZXBvc2l0IHRvIGJlY29tZSB0aGUgbmV4dCBUb3AgRG9nDQoJLy8gKGFrYSBUb3AgRG9nIHN0cmVuZ3RoIC8gbG93ZXN0IHBvc3NpYmxlIHRha2VvdmVyIHRocmVzaG9sZCkNCgkvLyBzdGFydHMgYXQgMTI1JSBvZiBUb3AgRG9nJ3MgZGVwb3NpdCwgc2xvd2x5IGRlY2xpbmVzIGFzIHVuZGVyZG9ncyBqb2luDQoJdWludCBwcml2YXRlIHRvcERvZ01pblByaWNlID0gMTsNCg0KCS8vIHJhbmdlIGFib3ZlIHRoZSB0b3Bkb2cgc3RyZW5ndGggKGFrYSB0b3BEb2dNaW5QcmljZSkgd2l0aGluIHdoaWNoDQoJLy8gdGhlIHJhbmRvbWx5IGdlbmVyYXRlZCByZXF1aXJlZCB0YWtlb3ZlciB0aHJlaG9sZCBpcyBzZXQNCgl1aW50IGNvbnN0YW50IHByaXZhdGUgdG9wRG9nQnV5b3V0UmFuZ2UgPSAxNTA7DQoNCgkvLyBwZXJjZW50YWdlIG9mIHRvcGRvZyBidXlvdXQgZmVlIGdldHMgcGFpZCB0byBjcmVhdG9yDQoJdWludCBjb25zdGFudCBwcml2YXRlIHZpc2lvbkRvZ0J1eVBlcmNlbnQgPSA1Ow0KDQoNCg0KCS8vIHVuZGVyZG9nIHBheW91dCBtYXJrdXAsIGFzIGEgcGVyY2VudGFnZSBvZiB0aGVpciBkZXBvc2l0cw0KCS8vIGdldHMgcmVzZXQgdG8gMTUwJSBhZnRlciBlYWNoIHJvdW5kIHdoZW4gdGhlIHRvcCBkb2cgZ2V0cyByZXBsYWNlZA0KCS8vIGdyYWR1YWxseSBkZWNheXMgdG8gbWluaW51bSBvZiAxMjAlIGFzIHVuZGVyZG9ncyBjaGlwIGF3YXkgYXQgdG9wIGRvZydzIHN0cmVuZ3RoDQoJdWludCBwcml2YXRlIHVuZGVyRG9nTWFya3VwID0gMTUwOw0KDQoJLy8gYXMgdG9wIGRvZyBwcmljZSBkZWNsaW5lcywgdGhlc2Uga2VlcCB0cmFjayBvZiB0aGUgcmFuZ2UNCgkvLyBzbyB1bmRlckRvcE1hcmt1cCBjYW4gc2xvd2x5IGdvIGZyb20gMTUwJSB0byAxMjAlIHJldHVybg0KCS8vIGFzIHRoZSBUb3AgRG9nIG1pbmludW0gcHJpY2Ugc3RhcnRzIGF0IHRoZSBwcmljZSBjZWlsaW5nLA0KCS8vIGFuZCBkZWNsaW5lcyB1bnRpbCBpdCByZWFjaGVzIHRoZSBmbG9vciAob3IgbG93ZXIpDQoJdWludCBwcml2YXRlIHRvcERvZ1ByaWNlQ2VpbGluZyA9IDA7DQoJdWludCBwcml2YXRlIHRvcERvZ1ByaWNlRmxvb3IgPSAwOw0KDQoJLy8gdG90YWwgY29sbGVjdGVkIGZlZXMgZnJvbSB1bmRlcmRvZ3MsIHBhaWQgb3V0IHdoZW5ldmVyIFRvcCBEb2cgaXMgYm91Z2h0IG91dA0KCXVpbnQgcHJpdmF0ZSB2aXNpb25GZWVzID0gMDsNCg0KCS8vIGN1cnJlbnQgdG9wIGRvZw0KCWFkZHJlc3MgcHJpdmF0ZSB0b3BEb2cgPSAweDA7DQoNCgkvLyB1bmRlcmRvZyBlbnRyaWVzDQoJc3RydWN0IFVuZGVyZG9nIHsNCgkJYWRkcmVzcyBhZGRyOw0KCQl1aW50IGRlcG9zaXQ7DQoJCXVpbnQgcGF5b3V0Ow0KCQl1aW50IGJhaWxvdXRzOw0KCX0NCglVbmRlcmRvZ1tdIHByaXZhdGUgVW5kZXJkb2dzOw0KDQoJLy8gcGxheWVyIG5hbWVzIGZvciBmdW4NCgltYXBwaW5nIChhZGRyZXNzID0+IHN0cmluZykgZG9nTmFtZXM7DQoNCgkvLyBjdXJyZW50IGx1Y2t5IGRvZyAoaWYgZXhpc3RzKSB3aWxsIHJlY2VpdmUgMyUgb2YgdW5kZXJkb2cgcGF5aW5zDQoJLy8gc3BlY2lmaWVkIGFzIGluZGV4IGluIFVuZGVyZG9ncyBhcnJheQ0KCS8vIDAgPSBub2JvZHkgKHRoZSB2ZXJ5IGZpcnN0IHVuZGVyZG9nIHRvIGpvaW4gdGhlIGdhbWUgaXMgcHJlY2x1ZGVkIGZyb20gYmVjb21pbmcgdGhlIEx1Y2t5IERvZykNCgl1aW50IHByaXZhdGUgbHVja3lEb2cgPSAwOw0KDQoJLy8gaW5kZXggb2YgbmV4dCB1bmRlcmRvZyB0byBiZSBwYWlkIA0KCXVpbnQgcHJpdmF0ZSBwYXlvdXRJbmRleCA9IDA7DQoNCgkvLyBjb3VudCBwYXlvdXRzIG1hZGUgYnkgdW5kZXJkb2dzIGN1cnJlbnRseSBpbiB0aGUgZ2FtZQ0KCS8vIHNvIHdlIGNhbiBoYXZlIGEgYmFzZWxpbmUgZm9yIGRpdmlkaW5nIHRoZSBzY3JhcHMNCgl1aW50IHByaXZhdGUgcGF5b3V0Q291bnQgPSAwOw0KDQoJLy8gYWRkcmVzcyBvZiB0aGUgY3JlYXRvcg0KCWFkZHJlc3MgcHJpdmF0ZSB2aXNpb25Eb2c7DQoNCglmdW5jdGlvbiBFdGhlclRvcERvZygpIHsNCgkJdmlzaW9uRG9nID0gbXNnLnNlbmRlcjsNCgl9DQoNCg0KCS8vID09PT0gR2FtZSBJbmZvIERpc3BsYXkgQUJJIGZ1bmN0aW9uczogPT09PQ0KCWZ1bmN0aW9uIHVuZGVyZG9nUGF5b3V0RnVuZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsNCgkJYmFsYW5jZSA9IGJhaWxvdXRCYWxhbmNlOw0KCX0NCg0KCWZ1bmN0aW9uIG5leHRVbmRlcmRvZ1BheW91dCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7DQoJCWlmIChVbmRlcmRvZ3MubGVuZ3RoIC0gcGF5b3V0SW5kZXggPj0gMSkgew0KCQkJcmV0dXJuIFVuZGVyZG9nc1twYXlvdXRJbmRleF0ucGF5b3V0Ow0KCQl9DQoJfQ0KCQ0KDQoJZnVuY3Rpb24gdW5kZXJkb2dQYXlvdXRNYXJrdXAoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgew0KCQlyZXR1cm4gdW5kZXJEb2dNYXJrdXA7DQoJfQ0KDQoJZnVuY3Rpb24gdG9wRG9nSW5mbygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgbmFtZSwgdWludCBzdHJlbmd0aCkgew0KCQlpZiAodG9wRG9nICE9IGFkZHJlc3MoMHgwKSkgew0KCQkJbmFtZSA9IGdldERvZ05hbWUodG9wRG9nKTsNCgkJfSBlbHNlIHsNCgkJCW5hbWUgPSAiW25vdCBzZXRdIjsNCgkJfQ0KCQlzdHJlbmd0aCA9IHRvcERvZ01pblByaWNlOw0KCX0NCglmdW5jdGlvbiBsdWNreURvZ0luZm8oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIG5hbWUpIHsNCgkJaWYgKGx1Y2t5RG9nID4gMCkgew0KCQkJbmFtZSA9IGdldERvZ05hbWUoVW5kZXJkb2dzW2x1Y2t5RG9nXS5hZGRyKTsNCgkJfSBlbHNlIHsNCgkJCW5hbWUgPSAiW25vYm9keV0iOw0KCQl9DQoJfQ0KDQoJZnVuY3Rpb24gdW5kZXJkb2dDb3VudCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsNCgkJcmV0dXJuIFVuZGVyZG9ncy5sZW5ndGggLSBwYXlvdXRJbmRleDsNCgl9IA0KDQoJZnVuY3Rpb24gdW5kZXJkb2dJbmZvKHVpbnQgbGluZVBvc2l0aW9uKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgbmFtZSwgYWRkcmVzcyBkb2dBZGRyZXNzLCB1aW50IGRlcG9zaXQsIHVpbnQgcGF5b3V0LCB1aW50IHNjcmFwQm9udXMpIHsNCgkJaWYgKGxpbmVQb3NpdGlvbiA+IDAgJiYgbGluZVBvc2l0aW9uIDw9IFVuZGVyZG9ncy5sZW5ndGggLSBwYXlvdXRJbmRleCkgew0KDQoJCQlVbmRlcmRvZyB0aGVkb2cgPSBVbmRlcmRvZ3NbcGF5b3V0SW5kZXggKyAobGluZVBvc2l0aW9uIC0gMSldOw0KCQkJbmFtZSA9IGdldERvZ05hbWUodGhlZG9nLmFkZHIpOw0KCQkJZG9nQWRkcmVzcyA9IHRoZWRvZy5hZGRyOw0KCQkJZGVwb3NpdCA9IHRoZWRvZy5kZXBvc2l0Ow0KCQkJcGF5b3V0PSB0aGVkb2cucGF5b3V0Ow0KCQkJc2NyYXBCb251cyA9IHRoZWRvZy5iYWlsb3V0czsNCgkJfQ0KCX0NCg0KCS8vID09PT0gRW5kIEFCSSBGdW5jdGlvbnMgPT09PQ0KDQoNCg0KCS8vID09PT0gUHVibGljIHRyYW5zYWN0aW9uIGZ1bmN0aW9uczogPT09PQ0KDQoJLy8gZGVmYXVsdCBmYWxsYmFjayA6IHBsYXkgYSByb3VuZA0KCWZ1bmN0aW9uKCkgew0KCQlkb2dGaWdodCgpOw0KCX0NCgkNCgkvLyBzZXRzIG5hbWUsIG9wdGlvbmFsbHkgcGxheXMgYSByb3VuZCBpZiBFdGhlciB3YXMgc2VudA0KCWZ1bmN0aW9uIHNldE5hbWUoc3RyaW5nIERvZ05hbWUpIHsNCgkJaWYgKGJ5dGVzKERvZ05hbWUpLmxlbmd0aCA+PSAyICYmIGJ5dGVzKERvZ05hbWUpLmxlbmd0aCA8PSAxNikNCgkJCWRvZ05hbWVzW21zZy5zZW5kZXJdID0gRG9nTmFtZTsNCg0KCQkvLyBpZiBhIGRlcG9zaXQgd2FzIHNlbnQsIHBsYXkgaXQhDQoJCWlmIChtc2cudmFsdWUgPiAwKSB7DQoJCQlkb2dGaWdodCgpOw0KCQl9DQoJCQ0KCX0NCg0KCWZ1bmN0aW9uIGRvZ0ZpZ2h0KCkgcHVibGljIHsNCgkJLy8gbWluaW11bSAxIEVUSCByZXF1aXJlZCB0byBwbGF5DQoJCWlmIChtc2cudmFsdWUgPCAxIGV0aGVyKSB7DQoJCQltc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlKTsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCS8vIGRvZXMgYSB0b3Bkb2cgZXhpc3QgPw0KCQlpZiAodG9wRG9nICE9IGFkZHJlc3MoMHgwKSkgew0KDQoJCQkvLyB0aGUgYWN0dWFsIGFtb3VudCByZXF1aXJlZCB0byBrbm9jayBvdXQgdGhlIHRvcCBkaWcgaXMgcmFuZG9tIHdpdGhpbiB0aGUgYnV5b3V0IHJhbmdlDQoJCQl1aW50IHRvcERvZ1ByaWNlID0gdG9wRG9nTWluUHJpY2UgKyByYW5kSW50KCAodG9wRG9nTWluUHJpY2UgKiB0b3BEb2dCdXlvdXRSYW5nZSAvIDEwMCkgLSB0b3BEb2dNaW5QcmljZSwgNDMyMSk7DQoNCgkJCS8vIENhbGN1bGF0ZSB0aGUgdG9wIGRvZyBwcmljZQ0KCQkJaWYgKG1zZy52YWx1ZSA+PSB0b3BEb2dQcmljZSkgew0KCQkJCS8vIFRoZXkgYm91Z2h0IG91dCB0aGUgdG9wIGRvZyENCgkJCQlidXlUb3BEb2codG9wRG9nUHJpY2UsIG1zZy52YWx1ZSAtIHRvcERvZ1ByaWNlKTsNCgkJCX0gZWxzZSB7DQoJCQkJLy8gZGlkbid0IGJ1eSB0aGUgdG9wIGRvZywgdGhpcyBwYXJ0aWNpcGFudCBiZWNvbWVzIGFuIHVuZGVyZG9nIQ0KCQkJCWFkZFVuZGVyRG9nKG1zZy52YWx1ZSk7DQoJCQl9DQoJCX0gZWxzZSB7DQoJCQkvLyBubyB0b3AgZG9nIGV4aXN0cyB5ZXQsIHRoZSBnYW1lIG11c3QgYmUganVzdCBnZXR0aW5nIHN0YXJ0ZWQNCgkJCS8vIHB1dCB0aGUgZmlyc3QgZGVwb3NpdCBpbiB0aGUgYmFpbG91dCBmdW5kLCBpbml0aWFsaXplIHRoZSBnYW1lDQoNCgkJCS8vIHNldCBmaXJzdCB0b3BEb2cgDQoJCQl0b3BEb2cgPSBtc2cuc2VuZGVyOw0KDQoJCQl0b3BEb2dQcmljZUZsb29yID0gdG9wRG9nTWluUHJpY2U7DQoNCgkJCWJhaWxvdXRCYWxhbmNlICs9IG1zZy52YWx1ZTsNCgkJCXRvcERvZ01pblByaWNlID0gbXNnLnZhbHVlICogdG9wRG9nTWluTWFya3VwIC8gMTAwOw0KDQoJCQl0b3BEb2dQcmljZUNlaWxpbmcgPSB0b3BEb2dNaW5QcmljZTsNCg0KCQl9DQoJfQ0KDQoJLy8gPT09PSBFbmQgUHVibGljIEZ1bmN0aW9ucyA9PT09DQoNCg0KDQoJLy8gPT09PSBQcml2YXRlIEZ1bmN0aW9uczogPT09PQ0KCWZ1bmN0aW9uIGFkZFVuZGVyRG9nKHVpbnQgYnV5aW4pIHByaXZhdGUgew0KDQoJCXVpbnQgYmFpbGNvdW50ID0gMDsNCg0KCQkvLyBhbW91bnQgdGhpcyBkZXBvc2l0b3Igd2lsbCBiZSBwYWlkIHdoZW4gdGhlIGZ1bmQgYWxsb3dzDQoJCXVpbnQgcGF5b3V0dmFsID0gYnV5aW4gKiB1bmRlckRvZ01hcmt1cCAvIDEwMDsNCg0KCQkvLyBhZGQgcG9ydGlvbiBvZiBkZXBvc2l0IHRvIGJhaWxvdXQgZnVuZCANCgkJYmFpbG91dEJhbGFuY2UgKz0gYnV5aW4gKiBiYWlsb3V0RnVuZFBlcmNlbnQgLyAxMDA7DQoNCgkJLy8gdG9wIGRvZyAvIGx1Y2t5IGRvZyBkaXZpZGVuZHMNCgkJdWludCB0b3BkaXZpZGVuZCA9IGJ1eWluICogdG9wRG9nRGl2aWRlbmQgLyAxMDA7DQoJCXVpbnQgbHVja3lkaXZpZGVuZCA9IGJ1eWluICogbHVja3lEb2dEaXZpZGVuZCAvIDEwMDsNCg0KCQkvLyBpcyB0aGVyZSBhIGx1Y2t5IGRvZz8NCgkJaWYgKGx1Y2t5RG9nICE9IDAgJiYgbHVja3lEb2cgPj0gcGF5b3V0SW5kZXgpIHsNCgkJCS8vIHBheSBsdWNreSBkb2cgZGl2aWRlbmRzDQoJCQlVbmRlcmRvZ3NbbHVja3lEb2ddLmFkZHIuc2VuZChsdWNreWRpdmlkZW5kKTsNCgkJfSBlbHNlIHsNCgkJCS8vIG5vIGx1Y2t5IGRvZyBleGlzdHMsIGFsbCBkaXZpZGVuZHMgZ28gdG8gdG9wIGRvZw0KCQkJdG9wZGl2aWRlbmQgKz0gbHVja3lkaXZpZGVuZDsNCgkJfQ0KDQoJCS8vIHBheSB0b3AgZG9nIGRpdmlkZW5kcw0KCQl0b3BEb2cuc2VuZCh0b3BkaXZpZGVuZCk7DQoNCg0KCQkvLyBjaGlwIGF3YXkgYXQgdGhlIHRvcCBkb2cncyBzdHJlbmd0aA0KCQl1aW50IHRvcGRlY2F5ID0gKGJ1eWluICogdG9wRG9nRGVjYXlQZXJjZW50IC8gMTAwKTsNCgkJdG9wRG9nTWluUHJpY2UgLT0gdG9wZGVjYXk7DQoNCgkJLy8gdXBkYXRlIHVuZGVyZG9nIG1hcmt1cCAlIGZvciBuZXh0IHJvdW5kDQoNCgkJLy8gc3BlY2lmaWVkIGFzIG4vMTAwMDAwIHRvIGF2b2lkIGZsb2F0aW5nIHBvaW50IG1hdGgNCgkJdWludCBkZWNheWZhY3RvciA9IDA7DQoNCgkJLy8gY2FsY3VsYXRlIHRoZSBwYXlvdXQgbWFya3VwIGZvciBuZXh0IHVuZGVyZG9nDQoJCWlmICh0b3BEb2dNaW5QcmljZSA+IHRvcERvZ1ByaWNlRmxvb3IpIHsNCgkJCXVpbnQgZGVjYXlyYW5nZSA9ICh0b3BEb2dQcmljZUNlaWxpbmcgLSB0b3BEb2dQcmljZUZsb29yKTsNCgkJCWRlY2F5ZmFjdG9yID0gMTAwMDAwICogKHRvcERvZ1ByaWNlQ2VpbGluZyAtIHRvcERvZ01pblByaWNlKSAvIGRlY2F5cmFuZ2U7DQoJCX0gZWxzZSB7DQoJCQlkZWNheWZhY3RvciA9IDEwMDAwMDsNCgkJfQ0KCQkvLyBtYXJrdXAgd2lsbCBiZSBiZXR3ZWVuIDEyMC0xNTAlIGNvcnJlc3BvbmRpbmcgdG8gY3VycmVudCB0b3AgZG9nIHByaWNlIGRlY2xpbmUgKDE1MCUgLSAzMCUgPSAxMjAlKQ0KCQl1bmRlckRvZ01hcmt1cCA9IDE1MCAtIChkZWNheWZhY3RvciAqIDMwIC8gMTAwMDAwKTsNCg0KDQoNCgkJLy8gY3JlYXRvciB0YWtlcyBhIHNsaWNlDQoJCXZpc2lvbkZlZXMgKz0gKGJ1eWluICogdmlzaW9uRG9nRmVlUGVyY2VudCAvIDEwMCk7DQoJCQ0KDQoJCS8vIHBheW91dCBhcyBtYW55IHByZXZpb3VzIHVuZGVyZG9ncyBhcyB0aGUgZnVuZCBjYW4gYWZmb3JkDQoJCXdoaWxlIChwYXlvdXRJbmRleCA8IFVuZGVyZG9ncy5sZW5ndGggJiYgYmFpbG91dEJhbGFuY2UgPj0gVW5kZXJkb2dzW3BheW91dEluZGV4XS5wYXlvdXQgKSB7DQoJCQlwYXlvdXRDb3VudCAtPSBVbmRlcmRvZ3NbcGF5b3V0SW5kZXhdLmJhaWxvdXRzOw0KCQkJYmFpbG91dEJhbGFuY2UgLT0gVW5kZXJkb2dzW3BheW91dEluZGV4XS5wYXlvdXQ7DQoJCQlVbmRlcmRvZ3NbcGF5b3V0SW5kZXhdLmFkZHIuc2VuZChVbmRlcmRvZ3NbcGF5b3V0SW5kZXhdLnBheW91dCk7DQoNCg0KCQkJLy8gaWYgdGhlIGx1Y2t5IGRvZyB3YXMgYmFpbGVkIG91dCwgdGhlIHVzZXIgd2hvIGRpZCBpdCBub3cgYmVjb21lcyB0aGUgbHVja3kgZG9nDQoJCQlpZiAocGF5b3V0SW5kZXggPT0gbHVja3lEb2cgJiYgbHVja3lEb2cgIT0gMCkNCgkJCQlsdWNreURvZyA9IFVuZGVyZG9ncy5sZW5ndGg7DQoNCgkJCXBheW91dEluZGV4Kys7DQoJCQliYWlsY291bnQrKzsNCgkJCXBheW91dENvdW50Kys7DQoJCX0NCg0KCQkNCgkJLy8gYWRkIHRoZSBuZXcgdW5kZXJkb2cgdG8gdGhlIHF1ZXVlDQoJCVVuZGVyZG9ncy5wdXNoKFVuZGVyZG9nKG1zZy5zZW5kZXIsIGJ1eWluLCBwYXlvdXR2YWwsIGJhaWxjb3VudCkpOw0KDQoJfQ0KDQoJZnVuY3Rpb24gYnV5VG9wRG9nKHVpbnQgYnV5cHJpY2UsIHVpbnQgc3VycGx1cykgcHJpdmF0ZSB7DQoNCgkJLy8gdGFrZSBvdXQgdml6aW9uRG9nIGZlZQ0KCQl1aW50IHZmZWUgPSBidXlwcmljZSAqIHZpc2lvbkRvZ0J1eVBlcmNlbnQgLyAxMDA7DQoNCgkJdWludCBkb2dwYXlvZmYgPSAoYnV5cHJpY2UgLSB2ZmVlKTsNCg0KCQkvLyBwYXlvdXQgcHJldmlvdXMgdG9wIGRvZw0KCQl0b3BEb2cuc2VuZChkb2dwYXlvZmYpOw0KDQoJCXZpc2lvbkZlZXMgKz0gdmZlZTsNCg0KCQkvLyBzZW5kIGJ1eSBmZWUgKHBsdXMgcHJldmlvdXMgY29sbGVjdGVkIHVuZGVyZG9nIGZlZXMpIHRvIHZpc2lvbkRvZw0KCQl2aXNpb25Eb2cuc2VuZCh2aXNpb25GZWVzKTsNCgkJdmlzaW9uRmVlcyA9IDA7DQoNCgkJLy8gcmVjb3JkIGEgcHJpY2UgZmxvb3IgZm9yIHVuZGVyZG9nIG1hcmt1cCBkZWNheSBjYWxjdWxhdGlvbiBkdXJpbmcgdGhlIG5leHQgcm91bmQ6DQoJCS8vIHRoZSBtaW5pbnVtIHB1cmNoYXNlIHByaWNlIGJlZm9yZSBidXlvdXQNCgkJdG9wRG9nUHJpY2VGbG9vciA9IHRvcERvZ01pblByaWNlOw0KDQoJCS8vIHNldCB0aGUgaW5pdGlhbCBtaW5pbXVtIGJ1eSBwcmljZSBmb3IgdGhlIG5leHQgdG9wIGRvZw0KCQl0b3BEb2dNaW5QcmljZSA9IG1zZy52YWx1ZSAqIHRvcERvZ01pbk1hcmt1cCAvIDEwMDsNCg0KCQkvLyB0aGUgcHJpY2UgY2VpbGluZyBmb3IgY2FsY3VsYXRpbmcgdGhlIHVuZGVyZG9nIG1hcmt1cCBkZWNheSBpcyB0aGUgbmV3IG1pbmltdW0gcHJpY2UNCgkJdG9wRG9nUHJpY2VDZWlsaW5nID0gdG9wRG9nTWluUHJpY2U7DQoNCg0KCQkvLyBjaGVjayBmb3IgZWxpZ2libGUgbHVja3kgZG9nLi4uDQovLwkJaWYgKFVuZGVyZG9ncy5sZW5ndGggLSBwYXlvdXRJbmRleCA+IDApIHsNCgkJCS8vIGx1Y2t5IGRvZyBpcyBtb3N0IHJlY2VudCB1bmRlcmRvZyB0byBtYWtlIGFuIGVudHJ5DQovLwkJCWx1Y2t5RG9nID0gVW5kZXJkb2dzLmxlbmd0aCAtIDE7DQovLwkJfSBlbHNlIHsNCgkJCS8vIG5vIGRvZ3Mgd2FpdGluZyBpbiBsaW5lPyAgYWxsIGRpdmlkZW5kcyB3aWxsIGdvIHRvIHRvcCBkb2cgdGhpcyByb3VuZA0KLy8JCQlsdWNreURvZyA9IDA7DQovLwkJfQ0KCQkNCg0KCQkvLyByZXNldCB1bmRlcmRvZyBtYXJrdXAgZm9yIG5leHQgcm91bmQNCgkJdW5kZXJEb2dNYXJrdXAgPSAxNTA7DQoNCgkJLy8gaG93IG1hbnkgZG9ncyBhcmUgd2FpdGluZz8NCgkJdWludCBsaW5lbGVuZ3RoID0gVW5kZXJkb2dzLmxlbmd0aCAtIHBheW91dEluZGV4Ow0KDQoJCS8vIHN1cnBsdXMgZ29lcyB0byBwYXkgc2NyYXBzIHRvIHJhbmRvbSB1bmRlcmRvZ3MNCgkJLy8gY2FsY3VsYXRlIGFuZCBwYXkgc2NyYXBzDQoNCg0KCQkvLyBhcmUgdGhlcmUgdW5kZXJkb2dzIGFyb3VuZCB0byByZWNlaXZlIHRoZSBzY3JhcHM/DQoJCWlmIChzdXJwbHVzID4gMCAmJiBsaW5lbGVuZ3RoID4gMCApIHsNCgkJCXRocm93U2NyYXBzKHN1cnBsdXMpOw0KCQl9DQoNCg0KCQkvLyBpZiB0aGVyZSBhcmUgYW55IHVuZGVyZG9ncyBpbiBsaW5lLCB0aGUgbHVja3kgZG9nIHdpbGwgYmUgcGlja2VkIGZyb20gYW1vbmcgdGhlbQkNCgkJaWYgKGxpbmVsZW5ndGggPiAwKSB7DQoNCgkJCS8vIHJhbmRvbWx5IHBpY2sgYSBuZXcgbHVja3kgZG9nLCB3aXRoIGx1Y2sgd2VpZ2h0ZWQgdG93YXJkIG1vcmUgcmVjZW50IGVudHJpZXMNCg0KCQkJLy8gd2VpZ2h0aW5nIHdvcmtzIGxpa2UgdGhpczoNCgkJCS8vIAlGb3IgZXhhbXBsZSwgaWYgdGhlIGxpbmUgbGVuZ3RoIGlzIDYsIHRoZSBtb3N0IHJlY2VudCBlbnRyeSB3aWxsDQoJCQkvLwliZSA2IHRpbWVzIG1vcmUgbGlrZWx5IHRoYW4gdGhlIG9sZGVzdCAoNi8yMSBvZGRzKSwNCgkJCS8vCXRoZSBzZWNvbmQgbW9zdCByZWNlbnQgd2lsbCBiZSA1IHRpbWVzIG1vcmUgbGlrZWx5IHRoYW4gdGhlIG9sZGVzdCAoNS8yMSBvZGRzKQ0KCQkJLy8JdGhlIHRoaXJkIG1vc3QgcmVjZW50IHdpbGwgYmUgNCB0aW1lcyBhcyBsaWtlbHkgYXMgdGhlIG9sZGVzdCAoNC8yMSBvZGRzKSwNCgkJCS8vCWV0Yy4uLg0KDQoJCQkvLwlvZiBjb3Vyc2UsIHRoZSBwbGF5ZXIgdGhhdCBoYXMgYmVlbiBpbiBsaW5lIGxvbmdlc3QgaXMNCgkJCS8vCWxlYXN0IGxpa2VseSB0byBiZSBsdWNreSAoMS8yMSBvZGRzIGluIHRoaXMgZXhhbXBsZSkNCgkJCS8vCWFuZCB3aWxsIGJlIGdldHRpbmcgc2VudCBvdXQgb2YgdGhlIGdhbWUgc29vbmVzdCBhbnl3YXkNCg0KCQkJdWludCBsdWNreXBpY2tsaW5lID0gKGxpbmVsZW5ndGggJSAyID09IDEpID8NCgkJCQkoIGxpbmVsZW5ndGggLyAyICsgMSApICsgKGxpbmVsZW5ndGggKyAxKSAqIChsaW5lbGVuZ3RoIC8gMikgOiAgLy8gb2RkDQoJCQkJKCAobGluZWxlbmd0aCArIDEpICogKGxpbmVsZW5ndGggLyAyKSAgKTsgLy8gZXZlbg0KDQoJCQl1aW50IGx1Y2t5cGljayA9IHJhbmRJbnQobHVja3lwaWNrbGluZSwgNjkpOw0KCQ0KCQkJdWludCBwaWNrcG9zID0gbHVja3lwaWNrbGluZSAtIGxpbmVsZW5ndGg7DQoJCQl1aW50IGxpbmVwb3MgPSAxOw0KDQoJCQl3aGlsZSAocGlja3BvcyA+PSBsdWNreXBpY2sgJiYgbGluZXBvcyA8IGxpbmVsZW5ndGgpIHsNCgkJCQlwaWNrcG9zIC09IChsaW5lbGVuZ3RoIC0gbGluZXBvcyk7DQoJCQkJbGluZXBvcysrOw0KCQkJfQ0KDQoJCQlsdWNreURvZyA9IFVuZGVyZG9ncy5sZW5ndGggLSBsaW5lcG9zOw0KCQl9IGVsc2Ugew0KCQkJLy8gbm8gdW5kZXJkb2dzIGluIGxpbmU/ICBubyBsdWNreSBkb2cgdGhpcyByb3VuZC4NCgkJCS8vIChzaG91bGQgb25seSBwb3NzaWJseSBoYXBwZW4gd2hlbiBnYW1lIHN0YXJ0cykNCgkJCWx1Y2t5RG9nID0gMDsNCgkJfQ0KCQkNCg0KCQkvLyB0aGUgbmV3IHRvcCBkb2cgaXMgY3Jvd25lZCENCgkJdG9wRG9nID0gbXNnLnNlbmRlcjsNCgl9DQoNCglmdW5jdGlvbiB0aHJvd1NjcmFwcyh1aW50IHRvdGFsc2NyYXB2YWx1ZSkgcHJpdmF0ZSB7DQoNCgkJLy8gaG93IG1hbnkgZG9ncyBhcmUgd2FpdGluZz8NCgkJdWludCBsaW5lbGVuZ3RoID0gVW5kZXJkb2dzLmxlbmd0aCAtIHBheW91dEluZGV4Ow0KDQoJCS8vIHRvIGtlZXAgZnJvbSBoYXZpbmcgdG9vIG1hbnkgdHJhbnNhY3Rpb25zLCBtYWtlIHN1cmUgd2UgbmV2ZXIgaGF2ZSBtb3JlIHRoYW4gNyBzY3JhcHMuDQoJCS8vIHRoZSBtb3JlIGRvZ3MgaW4gbGluZSwgdGhlIG1vcmUgd2UganVtcCBvdmVyIHdoZW4gc2NyYXBzIGdldCBzY2F0dGVyZWQNCgkJdWludCBza2lwc3RlcCA9IChsaW5lbGVuZ3RoIC8gNykgKyAxOw0KDQoJCS8vIGhvdyBtYW55IHBpZWNlcyB0byBkaXZpZGUgKHJvdWdobHksIHJhbmRvbWl6YXRpb24gbWlnaHQgbWFrZSBpdCBtb3JlIG9yIGxlc3MpDQoJCXVpbnQgcGllY2VzID0gbGluZWxlbmd0aCAvIHNraXBzdGVwOw0KDQoJCS8vIGhvdyBmYXIgZnJvbSB0aGUgZW5kIG9mIHRoZSBxdWV1ZSB0byBzdGFydCB0aHJvd2luZyB0aGUgZmlyc3Qgc2NyYXAgKHNlbWktcmFuZG9tKQ0KCQl1aW50IHN0YXJ0b2Zmc2V0ID0gcmFuZEludChza2lwc3RlcCwgNDIpIC0gMTsNCg0KCQkvLyBiYXNlIHNpemUgZm9yIHNjcmFwcy4uLiAgDQoJCXVpbnQgc2NyYXBiYXNlc2l6ZSA9IHRvdGFsc2NyYXB2YWx1ZSAvIChwaWVjZXMgKyBwYXlvdXRDb3VudCk7DQoNCgkJLy8gbWluaW11bSBiYXNlIHNjcmFwIHNpemUgb2YgMC41IGV0aA0KCQlpZiAoc2NyYXBiYXNlc2l6ZSA8IDUwMCBmaW5uZXkpIHsNCgkJCXNjcmFwYmFzZXNpemUgPSA1MDAgZmlubmV5Ow0KCQl9DQoNCgkJdWludCBzY3JhcHNpemU7DQoJCXVpbnQgc3B0ciA9IFVuZGVyZG9ncy5sZW5ndGggLSAxIC0gc3RhcnRvZmZzZXQ7DQoNCgkJdWludCBzY3JhcHZhbHVlbGVmdCA9IHRvdGFsc2NyYXB2YWx1ZTsNCg0KCQl3aGlsZSAocGllY2VzID4gMCAmJiBzY3JhcHZhbHVlbGVmdCA+IDAgJiYgc3B0ciA+PSBwYXlvdXRJbmRleCkgew0KCQkJLy8gdGhvc2Ugd2hvIGJhaWxlZCBvdXQgb3RoZXIgZG9ncyBnZXQgYmlnZ2VyIHNjcmFwcw0KCQkJLy8gc2l6ZSBvZiB0aGUgc2NyYXAgaXMgbXVsdGlwbGllZCBieSAjIG9mIG90aGVyIGRvZ3MgdGhlIHVzZXIgYmFpbGVkIG91dA0KCQkJc2NyYXBzaXplID0gc2NyYXBiYXNlc2l6ZSAqIChVbmRlcmRvZ3Nbc3B0cl0uYmFpbG91dHMgKyAxKTsNCg0KDQoJCQkvLyBzY3JhcHMgY2FuIG5ldmVyIGJlIG1vcmUgdGhhbiB3aGF0J3MgaW4gdGhlIHBpbGUNCgkJCWlmIChzY3JhcHNpemUgPCBzY3JhcHZhbHVlbGVmdCkgew0KCQkJCXNjcmFwdmFsdWVsZWZ0IC09IHNjcmFwc2l6ZTsNCgkJCX0gZWxzZSB7DQoJCQkJc2NyYXBzaXplID0gc2NyYXB2YWx1ZWxlZnQ7DQoJCQkJc2NyYXB2YWx1ZWxlZnQgPSAwOw0KCQkJfQ0KDQoJCQkvLyBwYXkgaXQNCgkJCVVuZGVyZG9nc1tzcHRyXS5hZGRyLnNlbmQoc2NyYXBzaXplKTsNCgkJCXBpZWNlcy0tOw0KCQkJc3B0ciAtPSBza2lwc3RlcDsNCgkJfQ0KDQoJCS8vIGFueSBzY3JhcHMgbGVmdCB1bmNhdWdodD8gcHV0IHRoZW0gaW4gdGhlIGJhaWxvdXQgZnVuZCBmb3IgdGhlIHVuZGVyZG9ncw0KCQlpZiAoc2NyYXB2YWx1ZWxlZnQgPiAwKSB7DQoJCQliYWlsb3V0QmFsYW5jZSArPSBzY3JhcHZhbHVlbGVmdDsNCgkJfQ0KCX0NCg0KCWZ1bmN0aW9uIGdldERvZ05hbWUoYWRkcmVzcyBhZHIpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIHRoZW5hbWUpIHsNCgkJaWYgKGJ5dGVzKGRvZ05hbWVzW2Fkcl0pLmxlbmd0aCA+IDApDQoJCQl0aGVuYW1lID0gZG9nTmFtZXNbYWRyXTsNCgkJZWxzZQ0KCQkJdGhlbmFtZSA9ICdVbm5hbWVkIE11dHQnOw0KCX0NCgkNCgkvLyBHZW5lcmF0ZSBwc2V1ZG8gc2VtaS1yYW5kb20gbnVtYmVyIGJldHdlZW4gMSAtIG1heCANCglmdW5jdGlvbiByYW5kSW50KHVpbnQgbWF4LCB1aW50IHNlZWRzd2l0Y2gpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAodWludCByYW5kb21OdW1iZXIpIHsNCgkJcmV0dXJuKCB1aW50KHNoYTMoYmxvY2suYmxvY2toYXNoKGJsb2NrLm51bWJlci0xKSwgYmxvY2sudGltZXN0YW1wICsgc2VlZHN3aXRjaCkgKSAlIG1heCArIDEgKTsNCgl9DQp9'