base 64 content
base64etherboard
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMzsNCg0KY29udHJhY3QgRXRoZXJib2FyZCB7DQogICAgLy8gQ29udHJhY3Qgb3duZXINCiAgICBhZGRyZXNzIG93bmVyOw0KICAgIC8vIEJpZCBtdXN0IGJlIG11bHRpcGxlcyBvZiBtaW5CaWQNCiAgICB1aW50MjU2IHB1YmxpYyBtaW5CaWQ7DQogICAgLy8gTWF4IG51bSBvZiBsZWFkZXJzIG9uIHRoZSBib2FyZA0KICAgIHVpbnQgcHVibGljIG1heExlYWRlcnM7DQogICAgDQogICAgLy8gTGlua2VkIGxpc3Qgb2YgbGVhZGVycyBvbiB0aGUgYm9hcmQNCiAgICB1aW50IHB1YmxpYyBudW1MZWFkZXJzOw0KICAgIGFkZHJlc3MgcHVibGljIGhlYWQ7DQogICAgYWRkcmVzcyBwdWJsaWMgdGFpbDsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IExlYWRlcikgcHVibGljIGxlYWRlcnM7DQogICAgDQogICAgc3RydWN0IExlYWRlciB7DQogICAgICAgIC8vIERhdGENCiAgICAgICAgdWludDI1NiBhbW91bnQ7DQogICAgICAgIHN0cmluZyB1cmw7DQogICAgICAgIHN0cmluZyBpbWdfdXJsOw0KICAgICAgICANCiAgICAgICAgLy8gUG9pbnRlciB0byBuZXh0IGFuZCBwcmV2IGVsZW1lbnQgaW4gbGlua2VkIGxpc3QNCiAgICAgICAgYWRkcmVzcyBuZXh0Ow0KICAgICAgICBhZGRyZXNzIHByZXZpb3VzOw0KICAgIH0NCiAgICANCiAgICANCiAgICAvLyBTZXQgaW5pdGlhbCBwYXJhbWV0ZXJzDQogICAgZnVuY3Rpb24gRXRoZXJib2FyZCgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgICAgICBtaW5CaWQgPSAwLjAwMSBldGhlcjsNCiAgICAgICAgbnVtTGVhZGVycyA9IDA7DQogICAgICAgIG1heExlYWRlcnMgPSAxMDsNCiAgICB9DQogICAgDQogICAgDQogICAgLyoNCiAgICAgICAgRGVmYXVsdCBmdW5jdGlvbiwgbWFrZSBhIG5ldyBiaWQgb3IgYWRkIHRvIGJpZCBieSBzZW5kaW5nIEV0aCB0byBjb250cmFjdA0KICAgICovDQogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7DQogICAgICAgIC8vIEJpZCBtdXN0IGJlIGxhcmdlciB0aGFuIG1pbkJpZA0KICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBtaW5CaWQpOw0KICAgICAgICANCiAgICAgICAgLy8gQmlkIG11c3QgYmUgbXVsdGlwbGUgb2YgbWluQmlkLiBSZW1haW5kZXIgaXMgc2VudCBiYWNrLg0KICAgICAgICB1aW50MjU2IHJlbWFpbmRlciAgPSBtc2cudmFsdWUgJSBtaW5CaWQ7DQogICAgICAgIHVpbnQyNTYgYmlkX2Ftb3VudCA9IG1zZy52YWx1ZSAtIHJlbWFpbmRlcjsNCiAgICAgICAgDQogICAgICAgIC8vIElmIGxlYWRlcmJvYXJkIGlzIGZ1bGwsIGJpZCBuZWVkcyB0byBiZSBsYXJnZXIgdGhhbiB0aGUgbG93ZXN0IHBsYWNlZCBsZWFkZXINCiAgICAgICAgcmVxdWlyZSghKChudW1MZWFkZXJzID09IG1heExlYWRlcnMpICYmIChiaWRfYW1vdW50IDw9IGxlYWRlcnNbdGFpbF0uYW1vdW50KSkpOw0KICAgICAgICANCiAgICAgICAgLy8gR2V0IGxlYWRlcg0KICAgICAgICBMZWFkZXIgbWVtb3J5IGxlYWRlciA9IHBvcExlYWRlcihtc2cuc2VuZGVyKTsNCiAgICAgICAgDQogICAgICAgIC8vIEFkZCB0byBsZWFkZXIncyBiaWQNCiAgICAgICAgbGVhZGVyLmFtb3VudCArPSBiaWRfYW1vdW50Ow0KICAgICAgICANCiAgICAgICAgLy8gSW5zZXJ0IGxlYWRlciBpbiBhcHByb3ByaWF0ZSBwb3NpdGlvbg0KICAgICAgICBpbnNlcnRMZWFkZXIobGVhZGVyKTsNCiAgICAgICAgDQogICAgICAgIC8vIElmIGxlYWRlcmJvYXJkIGlzIGZ1bGwsIGRyb3AgbGFzdCBsZWFkZXINCiAgICAgICAgaWYgKG51bUxlYWRlcnMgPiBtYXhMZWFkZXJzKSB7DQogICAgICAgICAgICBkcm9wTGFzdCgpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBSZXR1cm4gcmVtYWluZGVyIHRvIHNlbmRlcg0KICAgICAgICBpZiAocmVtYWluZGVyID4gMCkgbXNnLnNlbmRlci50cmFuc2ZlcihyZW1haW5kZXIpOw0KICAgIH0NCiAgICANCiAgICANCiAgICAvKg0KICAgICAgICBTZXQgdGhlIHVybHMgZm9yIHRoZSBsaW5rIGFuZCBpbWFnZQ0KICAgICovDQogICAgZnVuY3Rpb24gc2V0VXJscyhzdHJpbmcgdXJsLCBzdHJpbmcgaW1nX3VybCkgew0KICAgICAgICB2YXIgbGVhZGVyID0gbGVhZGVyc1ttc2cuc2VuZGVyXTsNCiAgICAgICAgDQogICAgICAgIHJlcXVpcmUobGVhZGVyLmFtb3VudCA+IDApOw0KICAgICAgICANCiAgICAgICAgLy8gU2V0IGxlYWRlcidzIHVybCBpZiBpdCBpcyBub3QgYW4gZW1wdHkgc3RyaW5nDQogICAgICAgIGJ5dGVzIG1lbW9yeSB0bXBfdXJsID0gYnl0ZXModXJsKTsNCiAgICAgICAgaWYgKHRtcF91cmwubGVuZ3RoICE9IDApIHsNCiAgICAgICAgICAgIC8vIFNldCB1cmwNCiAgICAgICAgICAgIGxlYWRlci51cmwgPSB1cmw7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIFNldCBsZWFkZXIncyBpbWdfdXJsIGlmIGl0IGlzIG5vdCBhbiBlbXB0eSBzdHJpbmcNCiAgICAgICAgYnl0ZXMgbWVtb3J5IHRtcF9pbWdfdXJsID0gYnl0ZXMoaW1nX3VybCk7DQogICAgICAgIGlmICh0bXBfaW1nX3VybC5sZW5ndGggIT0gMCkgew0KICAgICAgICAgICAgLy8gU2V0IGltYWdlIHVybA0KICAgICAgICAgICAgbGVhZGVyLmltZ191cmwgPSBpbWdfdXJsOw0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIA0KICAgIC8qDQogICAgICAgIEFsbG93IHVzZXIgdG8gcmVzZXQgdXJscyBpZiBoZSB3YW50cyBub3RoaW5nIHRvIHNob3cgb24gdGhlIGJvYXJkDQogICAgKi8NCiAgICBmdW5jdGlvbiByZXNldFVybHMoYm9vbCB1cmwsIGJvb2wgaW1nX3VybCkgew0KICAgICAgICB2YXIgbGVhZGVyID0gbGVhZGVyc1ttc2cuc2VuZGVyXTsNCiAgICAgICAgDQogICAgICAgIHJlcXVpcmUobGVhZGVyLmFtb3VudCA+IDApOw0KICAgICAgICANCiAgICAgICAgLy8gUmVzZXQgdXJscw0KICAgICAgICBpZiAodXJsKSBsZWFkZXIudXJsID0gIiI7DQogICAgICAgIGlmIChpbWdfdXJsKSBsZWFkZXIuaW1nX3VybCA9ICIiOw0KICAgIH0NCiAgICANCiAgICANCiAgICAvKg0KICAgICAgICBHZXQgYSBsZWFkZXIgYXQgcG9zaXRpb24NCiAgICAqLw0KICAgIGZ1bmN0aW9uIGdldExlYWRlcihhZGRyZXNzIGtleSkgY29uc3RhbnQgcmV0dXJucyAodWludCBhbW91bnQsIHN0cmluZyB1cmwsIHN0cmluZyBpbWdfdXJsLCBhZGRyZXNzIG5leHQpIHsNCiAgICAgICAgYW1vdW50ICA9IGxlYWRlcnNba2V5XS5hbW91bnQ7DQogICAgICAgIHVybCAgICAgPSBsZWFkZXJzW2tleV0udXJsOw0KICAgICAgICBpbWdfdXJsID0gbGVhZGVyc1trZXldLmltZ191cmw7DQogICAgICAgIG5leHQgICAgPSBsZWFkZXJzW2tleV0ubmV4dDsNCiAgICB9DQogICAgDQogICAgDQogICAgLyoNCiAgICAgICAgUmVtb3ZlIGZyb20gbGVhZGVyYm9hcmQgTEwNCiAgICAqLw0KICAgIGZ1bmN0aW9uIHBvcExlYWRlcihhZGRyZXNzIGtleSkgaW50ZXJuYWwgcmV0dXJucyAoTGVhZGVyIGxlYWRlcikgew0KICAgICAgICBsZWFkZXIgPSBsZWFkZXJzW2tleV07DQogICAgICAgIA0KICAgICAgICAvLyBJZiBubyBsZWFkZXIgLSByZXR1cm4NCiAgICAgICAgaWYgKGxlYWRlci5hbW91bnQgPT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuIGxlYWRlcjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgaWYgKG51bUxlYWRlcnMgPT0gMSkgew0KICAgICAgICAgICAgdGFpbCA9IDB4MDsNCiAgICAgICAgICAgIGhlYWQgPSAweDA7DQogICAgICAgIH0gZWxzZSBpZiAoa2V5ID09IGhlYWQpIHsNCiAgICAgICAgICAgIGhlYWQgPSBsZWFkZXIubmV4dDsNCiAgICAgICAgICAgIGxlYWRlcnNbaGVhZF0ucHJldmlvdXMgPSAweDA7DQogICAgICAgIH0gZWxzZSBpZiAoa2V5ID09IHRhaWwpIHsNCiAgICAgICAgICAgIHRhaWwgPSBsZWFkZXIucHJldmlvdXM7DQogICAgICAgICAgICBsZWFkZXJzW3RhaWxdLm5leHQgPSAweDA7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBsZWFkZXJzW2xlYWRlci5wcmV2aW91c10ubmV4dCA9IGxlYWRlci5uZXh0Ow0KICAgICAgICAgICAgbGVhZGVyc1tsZWFkZXIubmV4dF0ucHJldmlvdXMgPSBsZWFkZXIucHJldmlvdXM7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIG51bUxlYWRlcnMtLTsNCiAgICAgICAgcmV0dXJuIGxlYWRlcjsNCiAgICB9DQogICAgDQogICAgDQogICAgLyoNCiAgICAgICAgSW5zZXJ0IGluIGxlYWRlcmJvYXJkIExpbmtlZExpc3QNCiAgICAqLw0KICAgIGZ1bmN0aW9uIGluc2VydExlYWRlcihMZWFkZXIgbGVhZGVyKSBpbnRlcm5hbCB7DQogICAgICAgIGlmIChudW1MZWFkZXJzID09IDApIHsNCiAgICAgICAgICAgIGhlYWQgPSBtc2cuc2VuZGVyOw0KICAgICAgICAgICAgdGFpbCA9IG1zZy5zZW5kZXI7DQogICAgICAgIH0gZWxzZSBpZiAobGVhZGVyLmFtb3VudCA8PSBsZWFkZXJzW3RhaWxdLmFtb3VudCkgew0KICAgICAgICAgICAgbGVhZGVyc1t0YWlsXS5uZXh0ID0gbXNnLnNlbmRlcjsNCiAgICAgICAgICAgIHRhaWwgPSBtc2cuc2VuZGVyOw0KICAgICAgICB9IGVsc2UgaWYgKGxlYWRlci5hbW91bnQgPiBsZWFkZXJzW2hlYWRdLmFtb3VudCkgew0KICAgICAgICAgICAgbGVhZGVyLm5leHQgPSBoZWFkOw0KICAgICAgICAgICAgbGVhZGVyc1toZWFkXS5wcmV2aW91cyA9IG1zZy5zZW5kZXI7DQogICAgICAgICAgICBoZWFkID0gbXNnLnNlbmRlcjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHZhciBjdXJyZW50X2FkZHIgPSBoZWFkOw0KICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBsZWFkZXJzW2N1cnJlbnRfYWRkcl07DQogICAgICAgICAgICANCiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50LmFtb3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICBpZiAobGVhZGVyLmFtb3VudCA+IGN1cnJlbnQuYW1vdW50KSB7DQogICAgICAgICAgICAgICAgICAgIGxlYWRlci5uZXh0ID0gY3VycmVudF9hZGRyOw0KICAgICAgICAgICAgICAgICAgICBsZWFkZXIucHJldmlvdXMgPSBjdXJyZW50LnByZXZpb3VzOw0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50LnByZXZpb3VzID0gbXNnLnNlbmRlcjsNCiAgICAgICAgICAgICAgICAgICAgbGVhZGVyc1tjdXJyZW50LnByZXZpb3VzXS5uZXh0ID0gbXNnLnNlbmRlcjsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkciA9IGN1cnJlbnQubmV4dDsNCiAgICAgICAgICAgICAgICBjdXJyZW50ID0gbGVhZGVyc1tjdXJyZW50X2FkZHJdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBsZWFkZXJzW21zZy5zZW5kZXJdID0gbGVhZGVyOw0KICAgICAgICBudW1MZWFkZXJzKys7DQogICAgfQ0KICAgIA0KICAgIA0KICAgIC8qDQogICAgICAgIERyb3AgbGFzdCBsZWFkZXIgZnJvbSBib2FyZCBhbmQgcmV0dXJuIGhpcy9oZXIgZnVuZHMNCiAgICAqLw0KICAgIGZ1bmN0aW9uIGRyb3BMYXN0KCkgaW50ZXJuYWwgew0KICAgICAgICAvLyBHZXQgbGFzdCBsZWFkZXINCiAgICAgICAgYWRkcmVzcyBsZWFkZXJfYWRkciA9IHRhaWw7DQogICAgICAgIHZhciBsZWFkZXIgPSBwb3BMZWFkZXIobGVhZGVyX2FkZHIpOw0KICAgICAgICANCiAgICAgICAgdWludDI1NiByZWZ1bmRfYW1vdW50ID0gbGVhZGVyLmFtb3VudDsNCiAgICAgICAgDQogICAgICAgIC8vIERlbGV0ZSBsZWFkZXIgZnJvbSBib2FyZA0KICAgICAgICBkZWxldGUgbGVhZGVyOw0KICAgICAgICANCiAgICAgICAgLy8gUmV0dXJuIGZ1bmRzIHRvIGxlYWRlcg0KICAgICAgICBsZWFkZXJfYWRkci50cmFuc2ZlcihyZWZ1bmRfYW1vdW50KTsNCiAgICB9DQoNCiAgICANCiAgICAvKg0KICAgICAgICBNb2RpZmllciB0aGF0IG9ubHkgYWxsb3dzIHRoZSBvd25lciB0byBjYWxsIGNlcnRhaW4gZnVuY3Rpb25zDQogICAgKi8NCiAgICBtb2RpZmllciBvbmx5T3duZXIgew0KICAgICAgICByZXF1aXJlKG93bmVyID09IG1zZy5zZW5kZXIpOw0KICAgICAgICBfOw0KICAgIH0NCg0KDQogICAgLyoNCiAgICAgICAgTGV0cyBvd25lciB3aXRoZHJhdyBFdGggZnJvbSB0aGUgY29udHJhY3QuIE93bmVyIGNhbiB3aXRoZHJhdyBhbGwgZnVuZHMsDQogICAgICAgIGJlY2F1c2UgbGVhZGVycyB3aG8gZmFsbCBvZiB0aGUgYm9hcmQgY2FuIGFsd2F5cyBiZSByZWZ1bmRlZCB3aXRoIHRoZSBuZXcNCiAgICAgICAgYmlkOiAobmV3QmlkID4gcmVmdW5kKS4NCiAgICAqLw0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgb25seU93bmVyIHsNCiAgICAgICAgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsNCiAgICB9DQogICAgDQogICAgDQogICAgLyoNCiAgICAgICAgU2V0IG5ldyBtYXhpbXVtIGZvciBhbW91bnQgb2YgbGVhZGVycw0KICAgICovDQogICAgZnVuY3Rpb24gc2V0TWF4TGVhZGVycyh1aW50IG5ld01heCkgb25seU93bmVyIHsNCiAgICAgICAgbWF4TGVhZGVycyA9IG5ld01heDsNCiAgICB9DQp9'