base 64 content
base64etherollCrowdfund
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4yOw0KDQovKg0KKiAgQG5vdGljZSB0aGUgdG9rZW4gY29udHJhY3QgdXNlZCBhcyByZXdhcmQgDQoqLw0KY29udHJhY3QgdG9rZW4gew0KDQogICAgLyoNCiAgICAqICBAbm90aWNlIGV4cG9zZXMgdGhlIHRyYW5zZmVyIG1ldGhvZCBvZiB0aGUgdG9rZW4gY29udHJhY3QNCiAgICAqICBAcGFyYW0gX3JlY2VpdmVyIGFkZHJlc3MgcmVjZWl2aW5nIHRva2Vucw0KICAgICogIEBwYXJhbSBfYW1vdW50IG51bWJlciBvZiB0b2tlbnMgYmVpbmcgdHJhbnNmZXJyZWQgICAgICAgDQogICAgKi8gICAgDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfcmVjZWl2ZXIsIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7IH0NCg0KICAgIC8qDQogICAgKiAgQG5vdGljZSBleHBvc2VzIHRoZSBwcml2aWxlZGdlZEFkZHJlc3NCdXJuVW5zb2xkQ29pbnMgbWV0aG9kIG9mIHRoZSB0b2tlbiBjb250cmFjdA0KICAgICogIGJ1cm5zIGFsbCB1bnNvbGQgY29pbnMgIA0KICAgICovICAgICANCiAgICBmdW5jdGlvbiBwcml2aWxlZGdlZEFkZHJlc3NCdXJuVW5zb2xkQ29pbnMoKXsgfQ0KDQp9DQoNCi8qDQpgKiBpcyBvd25lZA0KKi8NCmNvbnRyYWN0IG93bmVkIHsNCg0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQogICAgZnVuY3Rpb24gb3duZWQoKSB7DQogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5T3duZXIgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgZnVuY3Rpb24gb3duZXJUcmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKQ0KICAgICAgICBvbmx5T3duZXINCiAgICB7DQogICAgICAgIG93bmVyID0gbmV3T3duZXI7DQogICAgfQ0KDQp9DQoNCi8qDQoqIHNhZmUgbWF0aA0KKi8NCmNvbnRyYWN0IERTU2FmZUFkZFN1YiB7DQoNCiAgICBmdW5jdGlvbiBzYWZlVG9BZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgcmV0dXJuIChhICsgYiA+PSBhKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIGlmICghc2FmZVRvQWRkKGEsIGIpKSB0aHJvdzsNCiAgICAgICAgcmV0dXJuIGEgKyBiOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNhZmVUb1N1YnRyYWN0KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiAoYiA8PSBhKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIGlmICghc2FmZVRvU3VidHJhY3QoYSwgYikpIHRocm93Ow0KICAgICAgICByZXR1cm4gYSAtIGI7DQogICAgfSANCg0KfQ0KDQovKiANCiogIEV0aGVyb2xsQ3Jvd2RmdW5kIGNvbnRyYWN0DQoqICBGdW5kcyBzZW50IHRvIHRoaXMgYWRkcmVzcyB0cmFuc2ZlciBhIGN1c3RvbWl6ZWQgRVJDMjAgdG9rZW4gdG8gbXNnLnNlbmRlciBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBjcm93ZGZ1bmQNCiogIERlcGxveW1lbnQgb3JkZXI6DQoqICBFdGhlcm9sbFRva2VuLCBFdGhlcm9sbENyb3dkZnVuZA0KKiAgMSkgU2VuZCB0b2tlbnMgdG8gdGhpcw0KKiAgMikgQXNzaWduIHRoaXMgYXMgcHJpdmlsZWRnZWRBZGRyZXNzIGluIEV0aGVyb2xsVG9rZW4NCiogIDMpIENhbGwgdXBkYXRlVG9rZW5TdGF0dXMgaW4gRXRoZXJvbGxUb2tlbiANCiogIC0tIGNyb3dkZnVuZCBpcyBvcGVuIC0tDQoqICA0KSBzYWZlV2l0aGRyYXcgb25seUFmdGVyRGVhZGxpbmUgaW4gdGhpcw0KKiAgNSkgb3duZXJCdXJuVW5zb2xkVG9rZW5zIG9ubHlBZnRlckRlYWRsaW5lIGluIHRoaXMNCiogIDYpIHVwZGF0ZVRva2VuU3RhdHVzIGluIEV0aGVyb2xsVG9rZW4gZnJlZXplcy90aGF3cyB0b2tlbnMNCiovDQpjb250cmFjdCBFdGhlcm9sbENyb3dkZnVuZCBpcyBvd25lZCwgRFNTYWZlQWRkU3ViIHsNCg0KICAgIC8qDQogICAgKiAgY2hlY2tzIG9ubHkgYWZ0ZXIgY3Jvd2RmdW5kIGRlYWRsaW5lDQogICAgKi8gICAgDQogICAgbW9kaWZpZXIgb25seUFmdGVyRGVhZGxpbmUoKSB7IA0KICAgICAgICBpZiAobm93IDwgZGVhZGxpbmUpIHRocm93Ow0KICAgICAgICBfOyANCiAgICB9DQoNCiAgICAvKg0KICAgICogIGNoZWNrcyBvbmx5IGluIGVtZXJnZW5jeQ0KICAgICovICAgIA0KICAgIG1vZGlmaWVyIGlzRW1lcmdlbmN5KCkgeyANCiAgICAgICAgaWYgKCFlbWVyZ2VuY3kpIHRocm93Ow0KICAgICAgICBfOyANCiAgICB9IA0KDQogICAgLyogdGhlIGNyb3dkZnVuZCBnb2FsICovDQogICAgdWludCBwdWJsaWMgZnVuZGluZ0dvYWw7DQogICAgLyogMSB3ZWVrIGNvdW50ZG93biB0byBwcmljZSBpbmNyZWFzZSAqLw0KICAgIHVpbnQgcHVibGljIHdlZWtUd29QcmljZVJpc2VCZWdpbiA9IG5vdyArIDEwMDgwICogMSBtaW51dGVzOyAgICANCiAgICAvKiA4MCUgdG8gc3RhbmRhcmQgbXVsdGktc2lnIHdhbGxldCBjb250cmFjdCBpcyBob3VzZSBiYW5rcm9sbCAgKi8NCiAgICBhZGRyZXNzIHB1YmxpYyBiYW5rUm9sbEJlbmVmaWNpYXJ5OyAgICAgIA0KICAgIC8qIDIwJSB0byBldGhlcm9sbCB3YWxsZXQqLw0KICAgIGFkZHJlc3MgcHVibGljIGV0aGVyb2xsQmVuZWZpY2lhcnk7ICAgICAgICAgDQogICAgLyogdG90YWwgYW1vdW50IG9mIGV0aGVyIHJhaXNlZCAqLw0KICAgIHVpbnQgcHVibGljIGFtb3VudFJhaXNlZDsNCiAgICAvKiB0d28gd2Vla3MgKi8NCiAgICB1aW50IHB1YmxpYyBkZWFkbGluZTsNCiAgICAvKiAwLjAxIEVUSCBwZXIgdG9rZW4gYmFzZSBwcmljZSAqLw0KICAgIHVpbnQgcHVibGljIHByaWNlID0gMTAwMDAwMDAwMDAwMDAwMDA7DQogICAgLyogYWRkcmVzcyBvZiB0b2tlbiB1c2VkIGFzIHJld2FyZCAqLw0KICAgIHRva2VuIHB1YmxpYyB0b2tlblJld2FyZDsNCiAgICAvKiBjcm93ZHNhbGUgaXMgb3BlbiAqLw0KICAgIGJvb2wgcHVibGljIGNyb3dkc2FsZUNsb3NlZCA9IGZhbHNlOyAgDQogICAgLyogODAlIG9mIGZ1bmRzIHJhaXNlZCAqLw0KICAgIHVpbnQgcHVibGljIGJhbmtyb2xsQmVuZWZpY2lhcnlBbW91bnQ7DQogICAgLyogMjAlIG9mIGZ1bmRzIHJhaXNlZCAqLyAgICANCiAgICB1aW50IHB1YmxpYyBldGhlcm9sbEJlbmVmaWNpYXJ5QW1vdW50Ow0KICAgIC8qIG1hcCBiYWxhbmNlIG9mIGFkZHJlc3MgKi8NCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBiYWxhbmNlT2Y7IA0KICAgIC8qIGZ1bmRpbmcgZ29hbCBoYXMgbm90IGJlZW4gcmVhY2hlZCAqLyANCiAgICBib29sIHB1YmxpYyBmdW5kaW5nR29hbFJlYWNoZWQgPSBmYWxzZTsgICANCiAgICAvKiBlc2NhcGUgaGF0Y2ggZm9yIGFsbCBpbiBlbWVyZ2VuY3kgKi8NCiAgICBib29sIHB1YmxpYyBlbWVyZ2VuY3kgPSBmYWxzZTsgDQoNCiAgICAvKiBsb2cgZXZlbnRzICovDQogICAgZXZlbnQgTG9nRnVuZFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBCYWNrZXIsIHVpbnQgaW5kZXhlZCBBbW91bnQsIGJvb2wgaW5kZXhlZCBJc0NvbnRyaWJ1dGlvbik7ICANCiAgICBldmVudCBMb2dHb2FsUmVhY2hlZChhZGRyZXNzIGluZGV4ZWQgQmVuZWZpY2lhcnksIHVpbnQgaW5kZXhlZCBBbW91bnRSYWlzZWQpOyAgICAgICANCg0KICAgIC8qDQogICAgKiAgQHBhcmFtIF9pZlN1Y2Nlc3NmdWxTZW5kVG9CZW5lZmljaWFyeSByZWNlaXZlcyA4MCUgb2YgZXRoZXIgcmFpc2VkIGVuZCBvZiBjcm93ZGZ1bmQNCiAgICAqICBAcGFyYW0gX2lmU3VjY2Vzc2Z1bFNlbmRUb0V0aGVyb2xsIHJlY2VpdmVzIDIwJSBvZiBldGhlciByYWlzZWQgZW5kIG9mIGNyb3dkZnVuZA0KICAgICogIEBwYXJhbSBfZnVuZGluZ0dvYWxJbkV0aGVycyB0aGUgZnVuZGluZyBnb2FsIG9mIHRoZSBjcm93ZGZ1bmQNCiAgICAqICBAcGFyYW0gX2R1cmF0aW9uSW5NaW51dGVzIHRoZSBsZW5ndGggb2YgdGhlIGNyb3dkZnVuZCBpbiBtaW51dGVzDQogICAgKiAgQHBhcmFtIF9hZGRyZXNzT2ZUb2tlblVzZWRBc1Jld2FyZCB0aGUgdG9rZW4gYWRkcmVzcyAgIA0KICAgICovICANCiAgICBmdW5jdGlvbiBFdGhlcm9sbENyb3dkZnVuZCgNCiAgICAgICAgLyogbXVsdGktc2lnIGFkZHJlc3MgdG8gc2VuZCA4MCUgKi8gICAgICAgIA0KICAgICAgICBhZGRyZXNzIF9pZlN1Y2Nlc3NmdWxTZW5kVG9CZW5lZmljaWFyeSwNCiAgICAgICAgLyogYWRkcmVzcyB0byBzZW5kIDIwJSAqLw0KICAgICAgICBhZGRyZXNzIF9pZlN1Y2Nlc3NmdWxTZW5kVG9FdGhlcm9sbCwNCiAgICAgICAgLyogZnVuZGluZyBnb2FsICovDQogICAgICAgIHVpbnQgX2Z1bmRpbmdHb2FsSW5FdGhlcnMsDQogICAgICAgIC8qIHR3byB3ZWVrczogMjAxNjAgbWludXRlcyovDQogICAgICAgIHVpbnQgX2R1cmF0aW9uSW5NaW51dGVzLA0KICAgICAgICAvKiB0b2tlbiAqLw0KICAgICAgICB0b2tlbiBfYWRkcmVzc09mVG9rZW5Vc2VkQXNSZXdhcmQNCiAgICApIHsNCiAgICAgICAgYmFua1JvbGxCZW5lZmljaWFyeSA9IF9pZlN1Y2Nlc3NmdWxTZW5kVG9CZW5lZmljaWFyeTsNCiAgICAgICAgZXRoZXJvbGxCZW5lZmljaWFyeSA9IF9pZlN1Y2Nlc3NmdWxTZW5kVG9FdGhlcm9sbDsNCiAgICAgICAgZnVuZGluZ0dvYWwgPSBfZnVuZGluZ0dvYWxJbkV0aGVycyAqIDEgZXRoZXI7DQogICAgICAgIGRlYWRsaW5lID0gbm93ICsgX2R1cmF0aW9uSW5NaW51dGVzICogMSBtaW51dGVzOw0KICAgICAgICB0b2tlblJld2FyZCA9IHRva2VuKF9hZGRyZXNzT2ZUb2tlblVzZWRBc1Jld2FyZCk7DQogICAgfQ0KICANCiAgICAvKg0KICAgICogIEBub3RpY2UgcHVibGljIGZ1bmN0aW9uDQogICAgKiAgZGVmYXVsdCBmdW5jdGlvbiBpcyBwYXlhYmxlDQogICAgKiAgcmVzcG9uc2libGUgZm9yIHRyYW5zZmVyIG9mIHRva2VucyBiYXNlZCBvbiBwcmljZSwgbXNnLnNlbmRlciBhbmQgbXNnLnZhbHVlDQogICAgKiAgdHJhY2tzIGludmVzdG1lbnQgdG90YWwgb2YgbXNnLnNlbmRlciANCiAgICAqICByZWZ1bmRzIGFueSBzcGFyZSBjaGFuZ2UNCiAgICAqLyAgICAgIA0KICAgIGZ1bmN0aW9uICgpDQogICAgICAgIHBheWFibGUNCiAgICB7DQoNCiAgICAgICAgLyogY3Jvd2RmdW5kIHBlcmlvZCBpcyBvdmVyICovDQogICAgICAgIGlmKG5vdyA+IGRlYWRsaW5lKSBjcm93ZHNhbGVDbG9zZWQgPSB0cnVlOyAgDQoNCiAgICAgICAgLyogY3Jvd2RzYWxlIGlzIGNsb3NlZCAqLw0KICAgICAgICBpZiAoY3Jvd2RzYWxlQ2xvc2VkKSB0aHJvdzsNCg0KICAgICAgICAvKiBkbyBub3QgYWxsb3cgY3JlYXRpbmcgMCAqLyAgICAgICAgDQogICAgICAgIGlmIChtc2cudmFsdWUgPT0gMCkgdGhyb3c7ICAgICAgDQoNCiAgICAgICAgLyogDQogICAgICAgICogIHRyYW5zZmVyIHRva2Vucw0KICAgICAgICAqICBjaGVjay9zZXQgd2VlayB0d28gcHJpY2UgcmlzZQ0KICAgICAgICAqLw0KICAgICAgICBpZihub3cgPCB3ZWVrVHdvUHJpY2VSaXNlQmVnaW4pIHsNCiAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIC8qIHdlZWsgMSBwb3dlciB0b2tlbiBjb252ZXJzaW9uICogMjogMSBFVEggPSAyMDAgdG9rZW5zICovDQogICAgICAgICAgICBpZih0b2tlblJld2FyZC50cmFuc2Zlcihtc2cuc2VuZGVyLCAoKG1zZy52YWx1ZSpwcmljZSkvcHJpY2UpKjIpKSB7DQogICAgICAgICAgICAgICAgTG9nRnVuZFRyYW5zZmVyKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgdHJ1ZSk7IA0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgIC8qIHdlZWsgMiBjb252ZXJzaW9uOiAxIEVUSCA9IDEwMCB0b2tlbnMgKi8NCiAgICAgICAgICAgIGlmKHRva2VuUmV3YXJkLnRyYW5zZmVyKG1zZy5zZW5kZXIsIChtc2cudmFsdWUqcHJpY2UpL3ByaWNlKSkgew0KICAgICAgICAgICAgICAgIExvZ0Z1bmRUcmFuc2Zlcihtc2cuc2VuZGVyLCBtc2cudmFsdWUsIHRydWUpOyANCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhyb3c7DQogICAgICAgICAgICB9ICAgICAgICAgICAgDQoNCiAgICAgICAgfSANCg0KICAgICAgICAvKiBhZGQgdG8gYW1vdW50UmFpc2VkICovDQogICAgICAgIGFtb3VudFJhaXNlZCA9IHNhZmVBZGQoYW1vdW50UmFpc2VkLCBtc2cudmFsdWUpOyAgICAgICAgICANCg0KICAgICAgICAvKiB0cmFjayBFVEggYmFsYW5jZU9mIGFkZHJlc3MgaW4gY2FzZSBlbWVyZ2VuY3kgcmVmdW5kIGlzIHJlcXVpcmVkICovICANCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gc2FmZUFkZChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0sIG1zZy52YWx1ZSk7DQoNCiAgICB9ICAgIA0KDQogICAgLyoNCiAgICAqICBAbm90aWNlIHB1YmxpYyBmdW5jdGlvbg0KICAgICogIG9ubHlBZnRlckRlYWRsaW5lDQogICAgKiAgbW92ZXMgZXRoZXIgdG8gYmVuZWZpY2lhcnkgY29udHJhY3RzIGlmIGdvYWwgcmVhY2hlZA0KICAgICogIGlmIGdvYWwgbm90IHJlYWNoZWQgbXNnLnNlbmRlciBjYW4gd2l0aGRyYXcgdGhlaXIgZGVwb3NpdA0KICAgICovICAgICANCiAgICBmdW5jdGlvbiBzYWZlV2l0aGRyYXcoKSBwdWJsaWMNCiAgICAgICAgb25seUFmdGVyRGVhZGxpbmUNCiAgICB7DQoNCiAgICAgICAgaWYgKGFtb3VudFJhaXNlZCA+PSBmdW5kaW5nR29hbCl7DQogICAgICAgICAgICAvKiBhbGxvd3MgZnVuZHMgdG8gYmUgbW92ZWQgdG8gYmVuZWZpY2lhcnkgKi8NCiAgICAgICAgICAgIGZ1bmRpbmdHb2FsUmVhY2hlZCA9IHRydWU7DQogICAgICAgICAgICAvKiBsb2cgZXZlbnQgKi8gICAgICAgICAgICANCiAgICAgICAgICAgIExvZ0dvYWxSZWFjaGVkKGJhbmtSb2xsQmVuZWZpY2lhcnksIGFtb3VudFJhaXNlZCk7ICAgICAgICAgICANCiAgICAgICAgfSAgICANCiAgICAgICAgICAgIA0KICAgICAgICAvKiBjbG9zZSBjcm93ZHNhbGUgKi8NCiAgICAgICAgY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsgIA0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgIC8qIA0KICAgICAgICAqICBwdWJsaWMgDQogICAgICAgICogIGZ1bmRpbmcgZ29hbCBub3QgcmVhY2hlZCANCiAgICAgICAgKiAgbWFudWFsIHJlZnVuZHMNCiAgICAgICAgKi8NCiAgICAgICAgaWYgKCFmdW5kaW5nR29hbFJlYWNoZWQpIHsNCiAgICAgICAgICAgIGNhbGNSZWZ1bmQobXNnLnNlbmRlcik7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8qIA0KICAgICAgICAqICBvbmx5T3duZXIgY2FuIGNhbGwNCiAgICAgICAgKiAgZnVuZGluZyBnb2FsIHJlYWNoZWQgDQogICAgICAgICogIG1vdmUgZnVuZHMgdG8gYmVuZWZpY2lhcnkgYWRkcmVzc2VzDQogICAgICAgICovICAgICAgICANCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gb3duZXIgJiYgZnVuZGluZ0dvYWxSZWFjaGVkKSB7DQoNCiAgICAgICAgICAgIC8qIG11bHRpLXNpZyBiYW5rcm9sbEJlbmVmaWNpYXJ5IHJlY2VpdmVzIDgwJSAqLw0KICAgICAgICAgICAgYmFua3JvbGxCZW5lZmljaWFyeUFtb3VudCA9ICh0aGlzLmJhbGFuY2UqODApLzEwMDsgICANCg0KICAgICAgICAgICAgLyogc2VuZCB0byB0cnVzdGVkIGFkZHJlc3MgYmFua1JvbGxCZW5lZmljaWFyeSA4MCUgKi8gICAgICANCiAgICAgICAgICAgIGlmIChiYW5rUm9sbEJlbmVmaWNpYXJ5LnNlbmQoYmFua3JvbGxCZW5lZmljaWFyeUFtb3VudCkpIHsgIA0KDQogICAgICAgICAgICAgICAgLyogbG9nIGV2ZW50ICovICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBMb2dGdW5kVHJhbnNmZXIoYmFua1JvbGxCZW5lZmljaWFyeSwgYmFua3JvbGxCZW5lZmljaWFyeUFtb3VudCwgZmFsc2UpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLyogZXRoZXJvbGxCZW5lZmljaWFyeSByZWNlaXZlcyByZW1haW5kZXIgKi8NCiAgICAgICAgICAgICAgICBldGhlcm9sbEJlbmVmaWNpYXJ5QW1vdW50ID0gdGhpcy5iYWxhbmNlOyAgICAgICAgICAgICAgICAgIA0KDQogICAgICAgICAgICAgICAgLyogc2VuZCB0byB0cnVzdGVkIGFkZHJlc3MgZXRoZXJvbGxCZW5lZmljaWFyeSB0aGUgcmVtYWluZGVyICovDQogICAgICAgICAgICAgICAgaWYoIWV0aGVyb2xsQmVuZWZpY2lhcnkuc2VuZChldGhlcm9sbEJlbmVmaWNpYXJ5QW1vdW50KSkgdGhyb3c7DQoNCiAgICAgICAgICAgICAgICAvKiBsb2cgZXZlbnQgKi8gICAgICAgIA0KICAgICAgICAgICAgICAgIExvZ0Z1bmRUcmFuc2ZlcihldGhlcm9sbEJlbmVmaWNpYXJ5LCBldGhlcm9sbEJlbmVmaWNpYXJ5QW1vdW50LCBmYWxzZSk7ICAgICAgICAgICAgICAgICANCg0KICAgICAgICAgICAgfSBlbHNlIHsNCg0KICAgICAgICAgICAgICAgIC8qIGFsbG93IG1hbnVhbCByZWZ1bmRzIHZpYSBzYWZlV2l0aGRyYXdhbCAqLw0KICAgICAgICAgICAgICAgIGZ1bmRpbmdHb2FsUmVhY2hlZCA9IGZhbHNlOw0KDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9ICANCg0KICAgIC8qDQogICAgKiAgQG5vdGljZSBpbnRlcm5hbCBmdW5jdGlvbg0KICAgICogIEBwYXJhbSBfYWRkcmVzc1RvUmVmdW5kIHRoZSBhZGRyZXNzIGJlaW5nIHJlZnVuZGVkDQogICAgKiAgYWNjZXNzZWQgdmlhIHB1YmxpYyBmdW5jdGlvbnMgZW1lcmdlbmN5V2l0aGRyYXcgYW5kIHNhZmVXaXRoZHJhdw0KICAgICogIGNhbGN1bGF0ZXMgcmVmdW5kIGFtb3VudCBhdmFpbGFibGUgZm9yIGFuIGFkZHJlc3MgIA0KICAgICovICAgICANCiAgICBmdW5jdGlvbiBjYWxjUmVmdW5kKGFkZHJlc3MgX2FkZHJlc3NUb1JlZnVuZCkgaW50ZXJuYWwNCiAgICB7DQogICAgICAgIC8qIGFzc2lnbnMgdmFyIGFtb3VudCB0byBiYWxhbmNlIG9mIF9hZGRyZXNzVG9SZWZ1bmQgKi8NCiAgICAgICAgdWludCBhbW91bnQgPSBiYWxhbmNlT2ZbX2FkZHJlc3NUb1JlZnVuZF07DQogICAgICAgIC8qIHNldHMgYmFsYW5jZSB0byAwICovDQogICAgICAgIGJhbGFuY2VPZltfYWRkcmVzc1RvUmVmdW5kXSA9IDA7DQogICAgICAgIC8qIGlzIHRoZXJlIGFueSBiYWxhbmNlPyAqLw0KICAgICAgICBpZiAoYW1vdW50ID4gMCkgew0KICAgICAgICAgICAgLyogY2FsbCB0byB1bnRydXN0ZWQgYWRkcmVzcyAqLw0KICAgICAgICAgICAgaWYgKF9hZGRyZXNzVG9SZWZ1bmQuY2FsbC52YWx1ZShhbW91bnQpKCkpIHsNCiAgICAgICAgICAgICAgICAvKiBsb2cgZXZlbnQgKi8NCiAgICAgICAgICAgICAgICBMb2dGdW5kVHJhbnNmZXIoX2FkZHJlc3NUb1JlZnVuZCwgYW1vdW50LCBmYWxzZSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8qIHVuc3VjY2Vzc2Z1bCBzZW5kIHNvIHJlc2V0IHRoZSBiYWxhbmNlICovDQogICAgICAgICAgICAgICAgYmFsYW5jZU9mW19hZGRyZXNzVG9SZWZ1bmRdID0gYW1vdW50Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9IA0KICAgIH0gICAgIA0KICAgDQoNCiAgICAvKg0KICAgICogIEBub3RpY2UgcHVibGljIGZ1bmN0aW9uDQogICAgKiAgZW1lcmdlbmN5IG1hbnVhbCByZWZ1bmRzDQogICAgKi8gICAgIA0KICAgIGZ1bmN0aW9uIGVtZXJnZW5jeVdpdGhkcmF3KCkgcHVibGljDQogICAgICAgIGlzRW1lcmdlbmN5ICAgIA0KICAgIHsNCiAgICAgICAgLyogbWFudWFsIHJlZnVuZHMgKi8NCiAgICAgICAgY2FsY1JlZnVuZChtc2cuc2VuZGVyKTsNCiAgICB9ICAgICAgICANCg0KICAgIC8qDQogICAgKiAgQG5vdGljZSBvd25lciByZXN0cmljdGVkIGZ1bmN0aW9uICAgDQogICAgKiAgQHBhcmFtIF9uZXdFbWVyZ2VuY3lTdGF0dXMgYm9vbGVhbg0KICAgICogIHNldHMgY29udHJhY3QgbW9kZSB0byBlbWVyZ2VuY3kgc3RhdHVzIHRvIGFsbG93IGluZGl2aWR1YWwgd2l0aGRyYXcgdmlhIGVtZXJnZW5jeVdpdGhkcmF3KCkNCiAgICAqLyAgICANCiAgICBmdW5jdGlvbiBvd25lclNldEVtZXJnZW5jeVN0YXR1cyhib29sIF9uZXdFbWVyZ2VuY3lTdGF0dXMpIHB1YmxpYw0KICAgICAgICBvbmx5T3duZXIgDQogICAgeyAgICAgICAgDQogICAgICAgIC8qIGNsb3NlIGNyb3dkc2FsZSAqLw0KICAgICAgICBjcm93ZHNhbGVDbG9zZWQgPSBfbmV3RW1lcmdlbmN5U3RhdHVzOw0KICAgICAgICAvKiBhbGxvdyBtYW51YWwgcmVmdW5kcyB2aWEgZW1lcmdlbmN5V2l0aGRyYXcgKi8NCiAgICAgICAgZW1lcmdlbmN5ID0gX25ld0VtZXJnZW5jeVN0YXR1czsgICAgICAgIA0KICAgIH0gDQoNCiAgICAvKg0KICAgICogIEBub3RpY2UgIG93bmVyIHJlc3RyaWN0ZWQgZnVuY3Rpb24gDQogICAgKiAgYnVybnMgYW55IHVuc29sZCB0b2tlbnMgYXQgZW5kIG9mIGNyb3dkZnVuZA0KICAgICovICAgICAgDQogICAgZnVuY3Rpb24gb3duZXJCdXJuVW5zb2xkVG9rZW5zKCkNCiAgICAgICAgb25seU93bmVyDQogICAgICAgIG9ubHlBZnRlckRlYWRsaW5lDQogICAgew0KICAgICAgICB0b2tlblJld2FyZC5wcml2aWxlZGdlZEFkZHJlc3NCdXJuVW5zb2xkQ29pbnMoKTsNCiAgICB9ICAgICAgICAgDQoNCg0KfQ=='