base 64 content
base64ethsMePresale
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyoqDQogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzDQogKi8NCmxpYnJhcnkgU2FmZU1hdGggew0KICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICB1aW50IGMgPSBhICogYjsNCiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwDQogICAgdWludCBjID0gYSAvIGI7DQogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIGFzc2VydChiIDw9IGEpOw0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKyBiOw0KICAgIGFzc2VydChjID49IGEpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsNCiAgICBpZiAoIWFzc2VydGlvbikgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICB9DQp9DQoNCi8qKg0KICogQHRpdGxlIEVSQzIwQmFzaWMNCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQ0KICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQogKi8NCmNvbnRyYWN0IEVSQzIwQmFzaWMgew0KICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7DQogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOw0KfQ0KDQovKioNCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UNCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICovDQpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsNCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7DQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOw0KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSk7DQogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KfQ0KDQovKioNCiAqIEB0aXRsZSBCYXNpYyB0b2tlbg0KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gDQogKi8NCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7DQogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50Ow0KDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsNCg0KICAvKioNCiAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4NCiAgICovDQogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsNCiAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsNCiAgICAgICB0aHJvdzsNCiAgICAgfQ0KICAgICBfOw0KICB9DQoNCiAgLyoqDQogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcw0KICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uDQogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLg0KICAqLw0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsNCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOw0KICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgfQ0KDQogIC8qKg0KICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuDQogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIA0KICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuDQogICovDQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7DQogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogIH0NCg0KfQ0KDQoNCi8qKg0KICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuDQogKg0KICogQGRldiBJbXBsZW1hbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcnQgdG9rZW4uDQogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbA0KICovDQpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIwIHsNCg0KICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7DQoNCg0KICAvKioNCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyDQogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20NCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvDQogICAqIEBwYXJhbSBfdmFsdWUgdWludCB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQNCiAgICovDQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsNCiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOw0KDQogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0DQogICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93Ow0KDQogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7DQogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOw0KICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsNCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVhaGxmIG9mIG1zZy5zZW5kZXIuDQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4NCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4NCiAgICovDQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsNCg0KICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgDQogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QNCiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToNCiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkNCiAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93Ow0KDQogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGFuIGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLg0KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuDQogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLg0KICAgKiBAcmV0dXJuIEEgdWludCBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuDQogICAqLw0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7DQogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogIH0NCg0KfQ0KDQoNCg0KDQovLyBFUkMyMCB0b2tlbiBpbnRlcmZhY2UgaXMgaW1wbGVtZW50ZWQgb25seSBwYXJ0aWFsbHkuDQovLyBUb2tlbiB0cmFuc2ZlciBpcyBwcm9oaWJpdGVkIGR1ZSB0byBzcGVjIChzZWUgUFJFU0FMRS1TUEVDLm1kKSwNCi8vIGhlbmNlIHNvbWUgZnVuY3Rpb25zIGFyZSBsZWZ0IHVuZGVmaW5lZDoNCi8vICAtIHRyYW5zZmVyLCB0cmFuc2ZlckZyb20sDQovLyAgLSBhcHByb3ZlLCBhbGxvd2FuY2UuDQoNCg0KY29udHJhY3QgRXRoc01lUHJlc2FsZSBpcyBTdGFuZGFyZFRva2VuIHsNCg0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJFdGhzTWUgUHJlc2FsZSB0b2tlbiI7DQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiRVRNRSI7DQogICAgdWludDI1NiAgIHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4Ow0KDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUFJJQ0UgPSAxMDAwOyAvLyAxMDAwIEV0aHNNZSBwZXIgRXRoZXINCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9TVVBQTFlfTElNSVQgPSAyNTAwICogMTAwMDAgKiAoMSBldGhlciAvIDEgd2VpKTsNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBTRUNVUklUWV9FVEhFUl9DQVAgPSAzNSBldGhlcjsNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDA7IA0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsRVRIUmFpc2VkOw0KDQogICAgZW51bSBQaGFzZSB7DQogICAgICAgIENyZWF0ZWQsDQogICAgICAgIFJ1bm5pbmcsDQogICAgICAgIFBhdXNlZCwNCiAgICAgICAgTWlncmF0aW5nLA0KICAgICAgICBNaWdyYXRlZA0KICAgIH0NCg0KICAgIFBoYXNlIHB1YmxpYyBjdXJyZW50UGhhc2UgPSBQaGFzZS5SdW5uaW5nOw0KICAgIA0KICAgIGFkZHJlc3MgcHVibGljIHRva2VuTWFuYWdlcjsNCiAgICBhZGRyZXNzIHB1YmxpYyBlc2Nyb3c7DQogICAgYWRkcmVzcyBwdWJsaWMgY3Jvd2RzYWxlTWFuYWdlcjsNCg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBiYWxhbmNlOw0KDQogICAgbW9kaWZpZXIgb25seVRva2VuTWFuYWdlcigpICAgICB7IGlmKG1zZy5zZW5kZXIgIT0gdG9rZW5NYW5hZ2VyKSB0aHJvdzsgXzsgfQ0KICAgIG1vZGlmaWVyIG9ubHlDcm93ZHNhbGVNYW5hZ2VyKCkgeyBpZihtc2cuc2VuZGVyICE9IGNyb3dkc2FsZU1hbmFnZXIpIHRocm93OyBfOyB9DQoNCiAgICBldmVudCBMb2dCdXkoYWRkcmVzcyBpbmRleGVkIG93bmVyLCB1aW50IHZhbHVlKTsNCiAgICBldmVudCBMb2dCdXJuKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludCB2YWx1ZSk7DQogICAgZXZlbnQgTG9nUGhhc2VTd2l0Y2goUGhhc2UgbmV3UGhhc2UpOw0KDQoNCiAgICBmdW5jdGlvbiBFdGhzTWVQcmVzYWxlKGFkZHJlc3MgX3Rva2VuTWFuYWdlciwgYWRkcmVzcyBfZXNjcm93KSB7DQogICAgICAgIHRva2VuTWFuYWdlciA9IF90b2tlbk1hbmFnZXI7DQogICAgICAgIGVzY3JvdyA9IF9lc2Nyb3c7DQogICAgICAgIHRvdGFsRVRIUmFpc2VkID0gMDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbigpIHBheWFibGUgew0KICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgTGV0cyBidXkgeW91IHNvbWUgdG9rZW5zLg0KICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIF9idXllcikgcHVibGljIHBheWFibGUgew0KDQogICAgICAgIHVpbnQyNTYgbmV3RXRoZXJCYWxhbmNlID0gdG90YWxFVEhSYWlzZWQuYWRkKG1zZy52YWx1ZSk7DQogICAgICAgIGlmKGN1cnJlbnRQaGFzZSAhPSBQaGFzZS5SdW5uaW5nKSB0aHJvdzsNCgkJaWYgKG5ld0V0aGVyQmFsYW5jZSA+IFNFQ1VSSVRZX0VUSEVSX0NBUCkgdGhyb3c7IA0KICAgICAgICBpZihtc2cudmFsdWUgPT0gMCkgdGhyb3c7DQogICAgICAgIHVpbnQgbmV3VG9rZW5zID0gbXNnLnZhbHVlICogUFJJQ0U7DQogICAgICAgIGlmICh0b3RhbFN1cHBseSArIG5ld1Rva2VucyA+IFRPS0VOX1NVUFBMWV9MSU1JVCkgdGhyb3c7DQogICAgICAgIGJhbGFuY2VbX2J1eWVyXSArPSBuZXdUb2tlbnM7DQogICAgICAgIHRvdGFsU3VwcGx5ICs9IG5ld1Rva2VuczsNCiAgICAgICAgdG90YWxFVEhSYWlzZWQgPSBuZXdFdGhlckJhbGFuY2U7DQogICAgICAgIExvZ0J1eShfYnV5ZXIsIG5ld1Rva2Vucyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYnVyblRva2VucyhhZGRyZXNzIF9vd25lcikgcHVibGljDQogICAgICAgIG9ubHlDcm93ZHNhbGVNYW5hZ2VyDQogICAgew0KICAgICAgICAvLyBBdmFpbGFibGUgb25seSBkdXJpbmcgbWlncmF0aW9uIHBoYXNlDQogICAgICAgIGlmKGN1cnJlbnRQaGFzZSAhPSBQaGFzZS5NaWdyYXRpbmcpIHRocm93Ow0KDQogICAgICAgIHVpbnQgdG9rZW5zID0gYmFsYW5jZVtfb3duZXJdOw0KICAgICAgICBpZih0b2tlbnMgPT0gMCkgdGhyb3c7DQogICAgICAgIGJhbGFuY2VbX293bmVyXSA9IDA7DQogICAgICAgIHRvdGFsU3VwcGx5IC09IHRva2VuczsNCiAgICAgICAgTG9nQnVybihfb3duZXIsIHRva2Vucyk7DQoNCiAgICAgICAgaWYodG90YWxTdXBwbHkgPT0gMCkgew0KICAgICAgICAgICAgY3VycmVudFBoYXNlID0gUGhhc2UuTWlncmF0ZWQ7DQogICAgICAgICAgICBMb2dQaGFzZVN3aXRjaChQaGFzZS5NaWdyYXRlZCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICAgICAgcmV0dXJuIGJhbGFuY2VbX293bmVyXTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzZXRQcmVzYWxlUGhhc2UoUGhhc2UgX25leHRQaGFzZSkgcHVibGljDQogICAgICAgIG9ubHlUb2tlbk1hbmFnZXINCiAgICB7DQogICAgICAgIGJvb2wgY2FuU3dpdGNoUGhhc2UNCiAgICAgICAgICAgID0gIChjdXJyZW50UGhhc2UgPT0gUGhhc2UuQ3JlYXRlZCAmJiBfbmV4dFBoYXNlID09IFBoYXNlLlJ1bm5pbmcpDQogICAgICAgICAgICB8fCAoY3VycmVudFBoYXNlID09IFBoYXNlLlJ1bm5pbmcgJiYgX25leHRQaGFzZSA9PSBQaGFzZS5QYXVzZWQpDQogICAgICAgICAgICAgICAgLy8gc3dpdGNoIHRvIG1pZ3JhdGlvbiBwaGFzZSBvbmx5IGlmIGNyb3dkc2FsZSBtYW5hZ2VyIGlzIHNldA0KICAgICAgICAgICAgfHwgKChjdXJyZW50UGhhc2UgPT0gUGhhc2UuUnVubmluZyB8fCBjdXJyZW50UGhhc2UgPT0gUGhhc2UuUGF1c2VkKQ0KICAgICAgICAgICAgICAgICYmIF9uZXh0UGhhc2UgPT0gUGhhc2UuTWlncmF0aW5nDQogICAgICAgICAgICAgICAgJiYgY3Jvd2RzYWxlTWFuYWdlciAhPSAweDApDQogICAgICAgICAgICB8fCAoY3VycmVudFBoYXNlID09IFBoYXNlLlBhdXNlZCAmJiBfbmV4dFBoYXNlID09IFBoYXNlLlJ1bm5pbmcpDQogICAgICAgICAgICAgICAgLy8gc3dpdGNoIHRvIG1pZ3JhdGVkIG9ubHkgaWYgZXZlcnl0aW5nIGlzIG1pZ3JhdGVkDQogICAgICAgICAgICB8fCAoY3VycmVudFBoYXNlID09IFBoYXNlLk1pZ3JhdGluZyAmJiBfbmV4dFBoYXNlID09IFBoYXNlLk1pZ3JhdGVkDQogICAgICAgICAgICAgICAgJiYgdG90YWxTdXBwbHkgPT0gMCk7DQoNCiAgICAgICAgaWYoIWNhblN3aXRjaFBoYXNlKSB0aHJvdzsNCiAgICAgICAgY3VycmVudFBoYXNlID0gX25leHRQaGFzZTsNCiAgICAgICAgTG9nUGhhc2VTd2l0Y2goX25leHRQaGFzZSk7DQogICAgfQ0KDQoNCiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKCkgcHVibGljDQogICAgICAgIG9ubHlUb2tlbk1hbmFnZXINCiAgICB7DQogICAgICAgIC8vIEF2YWlsYWJsZSBhdCBhbnkgcGhhc2UuDQogICAgICAgIGlmKHRoaXMuYmFsYW5jZSA+IDApIHsNCiAgICAgICAgICAgIGlmKCFlc2Nyb3cuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsNCiAgICAgICAgfQ0KICAgIH0NCg0KDQogICAgZnVuY3Rpb24gc2V0Q3Jvd2RzYWxlTWFuYWdlcihhZGRyZXNzIF9tZ3IpIHB1YmxpYw0KICAgICAgICBvbmx5VG9rZW5NYW5hZ2VyDQogICAgew0KICAgICAgICAvLyBZb3UgY2FuJ3QgY2hhbmdlIGNyb3dkc2FsZSBjb250cmFjdCB3aGVuIG1pZ3JhdGlvbiBpcyBpbiBwcm9ncmVzcy4NCiAgICAgICAgaWYoY3VycmVudFBoYXNlID09IFBoYXNlLk1pZ3JhdGluZykgdGhyb3c7DQogICAgICAgIGNyb3dkc2FsZU1hbmFnZXIgPSBfbWdyOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHsNCgkJc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOw0KCX0NCgkNCglmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB7DQoJCXN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOw0KCX0NCn0='