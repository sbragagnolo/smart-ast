base 64 content
base64expiringMarket1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQovLyBUb2tlbiBzdGFuZGFyZCBBUEkNCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KDQpjb250cmFjdCBFUkMyMCB7DQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50IHN1cHBseSk7DQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKCBhZGRyZXNzIHdobyApIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdmFsdWUpOw0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZSggYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyICkgY29uc3RhbnQgcmV0dXJucyAodWludCBfYWxsb3dhbmNlKTsNCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7DQogICAgZnVuY3Rpb24gYXBwcm92ZSggYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlICkgcmV0dXJucyAoYm9vbCBvayk7DQoNCiAgICBldmVudCBUcmFuc2ZlciggYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7DQogICAgZXZlbnQgQXBwcm92YWwoIGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KfQ0KDQpjb250cmFjdCBFdmVudGZ1bE1hcmtldCB7DQogICAgZXZlbnQgSXRlbVVwZGF0ZSggdWludCBpZCApOw0KICAgIGV2ZW50IFRyYWRlKCB1aW50IHNlbGxfaG93X211Y2gsIGFkZHJlc3MgaW5kZXhlZCBzZWxsX3doaWNoX3Rva2VuLA0KICAgICAgICAgICAgICAgICB1aW50IGJ1eV9ob3dfbXVjaCwgYWRkcmVzcyBpbmRleGVkIGJ1eV93aGljaF90b2tlbiApOw0KDQogICAgZXZlbnQgTG9nTWFrZSgNCiAgICAgICAgYnl0ZXMzMiAgaW5kZXhlZCAgaWQsDQogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIHBhaXIsDQogICAgICAgIGFkZHJlc3MgIGluZGV4ZWQgIG1ha2VyLA0KICAgICAgICBFUkMyMCAgICAgICAgICAgICBoYXZlVG9rZW4sDQogICAgICAgIEVSQzIwICAgICAgICAgICAgIHdhbnRUb2tlbiwNCiAgICAgICAgdWludDEyOCAgICAgICAgICAgaGF2ZUFtb3VudCwNCiAgICAgICAgdWludDEyOCAgICAgICAgICAgd2FudEFtb3VudCwNCiAgICAgICAgdWludDY0ICAgICAgICAgICAgdGltZXN0YW1wDQogICAgKTsNCg0KICAgIGV2ZW50IExvZ1Rha2UoDQogICAgICAgIGJ5dGVzMzIgICAgICAgICAgIGlkLA0KICAgICAgICBieXRlczMyICBpbmRleGVkICBwYWlyLA0KICAgICAgICBhZGRyZXNzICBpbmRleGVkICBtYWtlciwNCiAgICAgICAgRVJDMjAgICAgICAgICAgICAgaGF2ZVRva2VuLA0KICAgICAgICBFUkMyMCAgICAgICAgICAgICB3YW50VG9rZW4sDQogICAgICAgIGFkZHJlc3MgIGluZGV4ZWQgIHRha2VyLA0KICAgICAgICB1aW50MTI4ICAgICAgICAgICB0YWtlQW1vdW50LA0KICAgICAgICB1aW50MTI4ICAgICAgICAgICBnaXZlQW1vdW50LA0KICAgICAgICB1aW50NjQgICAgICAgICAgICB0aW1lc3RhbXANCiAgICApOw0KDQogICAgZXZlbnQgTG9nS2lsbCgNCiAgICAgICAgYnl0ZXMzMiAgaW5kZXhlZCAgaWQsDQogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIHBhaXIsDQogICAgICAgIGFkZHJlc3MgIGluZGV4ZWQgIG1ha2VyLA0KICAgICAgICBFUkMyMCAgICAgICAgICAgICBoYXZlVG9rZW4sDQogICAgICAgIEVSQzIwICAgICAgICAgICAgIHdhbnRUb2tlbiwNCiAgICAgICAgdWludDEyOCAgICAgICAgICAgaGF2ZUFtb3VudCwNCiAgICAgICAgdWludDEyOCAgICAgICAgICAgd2FudEFtb3VudCwNCiAgICAgICAgdWludDY0ICAgICAgICAgICAgdGltZXN0YW1wDQogICAgKTsNCn0NCg0KY29udHJhY3QgU2ltcGxlTWFya2V0IGlzIEV2ZW50ZnVsTWFya2V0IHsNCiAgICBib29sIGxvY2tlZDsNCg0KICAgIG1vZGlmaWVyIHN5bmNocm9uaXplZCB7DQogICAgICAgIGFzc2VydCghbG9ja2VkKTsNCiAgICAgICAgbG9ja2VkID0gdHJ1ZTsNCiAgICAgICAgXzsNCiAgICAgICAgbG9ja2VkID0gZmFsc2U7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgeCkgaW50ZXJuYWwgew0KICAgICAgICBpZiAoIXgpIHRocm93Ow0KICAgIH0NCg0KICAgIHN0cnVjdCBPZmZlckluZm8gew0KICAgICAgICB1aW50ICAgICBzZWxsX2hvd19tdWNoOw0KICAgICAgICBFUkMyMCAgICBzZWxsX3doaWNoX3Rva2VuOw0KICAgICAgICB1aW50ICAgICBidXlfaG93X211Y2g7DQogICAgICAgIEVSQzIwICAgIGJ1eV93aGljaF90b2tlbjsNCiAgICAgICAgYWRkcmVzcyAgb3duZXI7DQogICAgICAgIGJvb2wgICAgIGFjdGl2ZTsNCiAgICB9DQoNCiAgICBtYXBwaW5nICh1aW50ID0+IE9mZmVySW5mbykgcHVibGljIG9mZmVyczsNCg0KICAgIHVpbnQgcHVibGljIGxhc3Rfb2ZmZXJfaWQ7DQoNCiAgICBmdW5jdGlvbiBuZXh0X2lkKCkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgICBsYXN0X29mZmVyX2lkKys7IHJldHVybiBsYXN0X29mZmVyX2lkOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIGNhbl9vZmZlciB7DQogICAgICAgIF87DQogICAgfQ0KICAgIG1vZGlmaWVyIGNhbl9idXkodWludCBpZCkgew0KICAgICAgICBhc3NlcnQoaXNBY3RpdmUoaWQpKTsNCiAgICAgICAgXzsNCiAgICB9DQogICAgbW9kaWZpZXIgY2FuX2NhbmNlbCh1aW50IGlkKSB7DQogICAgICAgIGFzc2VydChpc0FjdGl2ZShpZCkpOw0KICAgICAgICBhc3NlcnQoZ2V0T3duZXIoaWQpID09IG1zZy5zZW5kZXIpOw0KICAgICAgICBfOw0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0FjdGl2ZSh1aW50IGlkKSBjb25zdGFudCByZXR1cm5zIChib29sIGFjdGl2ZSkgew0KICAgICAgICByZXR1cm4gb2ZmZXJzW2lkXS5hY3RpdmU7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldE93bmVyKHVpbnQgaWQpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsNCiAgICAgICAgcmV0dXJuIG9mZmVyc1tpZF0ub3duZXI7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldE9mZmVyKCB1aW50IGlkICkgY29uc3RhbnQgcmV0dXJucyAodWludCwgRVJDMjAsIHVpbnQsIEVSQzIwKSB7DQogICAgICB2YXIgb2ZmZXIgPSBvZmZlcnNbaWRdOw0KICAgICAgcmV0dXJuIChvZmZlci5zZWxsX2hvd19tdWNoLCBvZmZlci5zZWxsX3doaWNoX3Rva2VuLA0KICAgICAgICAgICAgICBvZmZlci5idXlfaG93X211Y2gsIG9mZmVyLmJ1eV93aGljaF90b2tlbik7DQogICAgfQ0KDQogICAgLy8gbm9uIHVuZGVyZmxvd2luZyBzdWJ0cmFjdGlvbg0KICAgIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgICAgIHJldHVybiBhIC0gYjsNCiAgICB9DQogICAgLy8gbm9uIG92ZXJmbG93aW5nIG11bHRpcGxpY2F0aW9uDQogICAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCBjKSB7DQogICAgICAgIGMgPSBhICogYjsNCiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFkZSggYWRkcmVzcyBzZWxsZXIsIHVpbnQgc2VsbF9ob3dfbXVjaCwgRVJDMjAgc2VsbF93aGljaF90b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBidXllciwgIHVpbnQgYnV5X2hvd19tdWNoLCAgRVJDMjAgYnV5X3doaWNoX3Rva2VuICkNCiAgICAgICAgaW50ZXJuYWwNCiAgICB7DQogICAgICAgIHZhciBzZWxsZXJfcGFpZF9vdXQgPSBidXlfd2hpY2hfdG9rZW4udHJhbnNmZXJGcm9tKCBidXllciwgc2VsbGVyLCBidXlfaG93X211Y2ggKTsNCiAgICAgICAgYXNzZXJ0KHNlbGxlcl9wYWlkX291dCk7DQogICAgICAgIHZhciBidXllcl9wYWlkX291dCA9IHNlbGxfd2hpY2hfdG9rZW4udHJhbnNmZXIoIGJ1eWVyLCBzZWxsX2hvd19tdWNoICk7DQogICAgICAgIGFzc2VydChidXllcl9wYWlkX291dCk7DQogICAgICAgIFRyYWRlKCBzZWxsX2hvd19tdWNoLCBzZWxsX3doaWNoX3Rva2VuLCBidXlfaG93X211Y2gsIGJ1eV93aGljaF90b2tlbiApOw0KICAgIH0NCg0KICAgIC8vIC0tLS0gUHVibGljIGVudHJ5cG9pbnRzIC0tLS0gLy8NCg0KICAgIGZ1bmN0aW9uIG1ha2UoDQogICAgICAgIEVSQzIwICAgIGhhdmVUb2tlbiwNCiAgICAgICAgRVJDMjAgICAgd2FudFRva2VuLA0KICAgICAgICB1aW50MTI4ICBoYXZlQW1vdW50LA0KICAgICAgICB1aW50MTI4ICB3YW50QW1vdW50DQogICAgKSByZXR1cm5zIChieXRlczMyIGlkKSB7DQogICAgICAgIHJldHVybiBieXRlczMyKG9mZmVyKGhhdmVBbW91bnQsIGhhdmVUb2tlbiwgd2FudEFtb3VudCwgd2FudFRva2VuKSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdGFrZShieXRlczMyIGlkLCB1aW50MTI4IG1heFRha2VBbW91bnQpIHsNCiAgICAgICAgYXNzZXJ0KGJ1eSh1aW50MjU2KGlkKSwgbWF4VGFrZUFtb3VudCkpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGtpbGwoYnl0ZXMzMiBpZCkgew0KICAgICAgICBhc3NlcnQoY2FuY2VsKHVpbnQyNTYoaWQpKSk7DQogICAgfQ0KDQogICAgLy8gTWFrZSBhIG5ldyBvZmZlci4gVGFrZXMgZnVuZHMgZnJvbSB0aGUgY2FsbGVyIGludG8gbWFya2V0IGVzY3Jvdy4NCiAgICBmdW5jdGlvbiBvZmZlciggdWludCBzZWxsX2hvd19tdWNoLCBFUkMyMCBzZWxsX3doaWNoX3Rva2VuDQogICAgICAgICAgICAgICAgICAsIHVpbnQgYnV5X2hvd19tdWNoLCAgRVJDMjAgYnV5X3doaWNoX3Rva2VuICkNCiAgICAgICAgY2FuX29mZmVyDQogICAgICAgIHN5bmNocm9uaXplZA0KICAgICAgICByZXR1cm5zICh1aW50IGlkKQ0KICAgIHsNCiAgICAgICAgYXNzZXJ0KHVpbnQxMjgoc2VsbF9ob3dfbXVjaCkgPT0gc2VsbF9ob3dfbXVjaCk7DQogICAgICAgIGFzc2VydCh1aW50MTI4KGJ1eV9ob3dfbXVjaCkgPT0gYnV5X2hvd19tdWNoKTsNCiAgICAgICAgYXNzZXJ0KHNlbGxfaG93X211Y2ggPiAwKTsNCiAgICAgICAgYXNzZXJ0KHNlbGxfd2hpY2hfdG9rZW4gIT0gRVJDMjAoMHgwKSk7DQogICAgICAgIGFzc2VydChidXlfaG93X211Y2ggPiAwKTsNCiAgICAgICAgYXNzZXJ0KGJ1eV93aGljaF90b2tlbiAhPSBFUkMyMCgweDApKTsNCiAgICAgICAgYXNzZXJ0KHNlbGxfd2hpY2hfdG9rZW4gIT0gYnV5X3doaWNoX3Rva2VuKTsNCg0KICAgICAgICBPZmZlckluZm8gbWVtb3J5IGluZm87DQogICAgICAgIGluZm8uc2VsbF9ob3dfbXVjaCA9IHNlbGxfaG93X211Y2g7DQogICAgICAgIGluZm8uc2VsbF93aGljaF90b2tlbiA9IHNlbGxfd2hpY2hfdG9rZW47DQogICAgICAgIGluZm8uYnV5X2hvd19tdWNoID0gYnV5X2hvd19tdWNoOw0KICAgICAgICBpbmZvLmJ1eV93aGljaF90b2tlbiA9IGJ1eV93aGljaF90b2tlbjsNCiAgICAgICAgaW5mby5vd25lciA9IG1zZy5zZW5kZXI7DQogICAgICAgIGluZm8uYWN0aXZlID0gdHJ1ZTsNCiAgICAgICAgaWQgPSBuZXh0X2lkKCk7DQogICAgICAgIG9mZmVyc1tpZF0gPSBpbmZvOw0KDQogICAgICAgIHZhciBzZWxsZXJfcGFpZCA9IHNlbGxfd2hpY2hfdG9rZW4udHJhbnNmZXJGcm9tKCBtc2cuc2VuZGVyLCB0aGlzLCBzZWxsX2hvd19tdWNoICk7DQogICAgICAgIGFzc2VydChzZWxsZXJfcGFpZCk7DQoNCiAgICAgICAgSXRlbVVwZGF0ZShpZCk7DQogICAgICAgIExvZ01ha2UoDQogICAgICAgICAgICBieXRlczMyKGlkKSwNCiAgICAgICAgICAgIHNoYTMoc2VsbF93aGljaF90b2tlbiwgYnV5X3doaWNoX3Rva2VuKSwNCiAgICAgICAgICAgIG1zZy5zZW5kZXIsDQogICAgICAgICAgICBzZWxsX3doaWNoX3Rva2VuLA0KICAgICAgICAgICAgYnV5X3doaWNoX3Rva2VuLA0KICAgICAgICAgICAgdWludDEyOChzZWxsX2hvd19tdWNoKSwNCiAgICAgICAgICAgIHVpbnQxMjgoYnV5X2hvd19tdWNoKSwNCiAgICAgICAgICAgIHVpbnQ2NChub3cpDQogICAgICAgICk7DQogICAgfQ0KDQogICAgLy8gQWNjZXB0IGdpdmVuIGBxdWFudGl0eWAgb2YgYW4gb2ZmZXIuIFRyYW5zZmVycyBmdW5kcyBmcm9tIGNhbGxlciB0bw0KICAgIC8vIG9mZmVyIG1ha2VyLCBhbmQgZnJvbSBtYXJrZXQgdG8gY2FsbGVyLg0KICAgIGZ1bmN0aW9uIGJ1eSggdWludCBpZCwgdWludCBxdWFudGl0eSApDQogICAgICAgIGNhbl9idXkoaWQpDQogICAgICAgIHN5bmNocm9uaXplZA0KICAgICAgICByZXR1cm5zICggYm9vbCBzdWNjZXNzICkNCiAgICB7DQogICAgICAgIGFzc2VydCh1aW50MTI4KHF1YW50aXR5KSA9PSBxdWFudGl0eSk7DQoNCiAgICAgICAgLy8gcmVhZC1vbmx5IG9mZmVyLiBNb2RpZnkgYW4gb2ZmZXIgYnkgZGlyZWN0bHkgYWNjZXNzaW5nIG9mZmVyc1tpZF0NCiAgICAgICAgT2ZmZXJJbmZvIG1lbW9yeSBvZmZlciA9IG9mZmVyc1tpZF07DQoNCiAgICAgICAgLy8gaW5mZXJyZWQgcXVhbnRpdHkgdGhhdCB0aGUgYnV5ZXIgd2lzaGVzIHRvIHNwZW5kDQogICAgICAgIHVpbnQgc3BlbmQgPSBzYWZlTXVsKHF1YW50aXR5LCBvZmZlci5idXlfaG93X211Y2gpIC8gb2ZmZXIuc2VsbF9ob3dfbXVjaDsNCiAgICAgICAgYXNzZXJ0KHVpbnQxMjgoc3BlbmQpID09IHNwZW5kKTsNCg0KICAgICAgICBpZiAoIHNwZW5kID4gb2ZmZXIuYnV5X2hvd19tdWNoIHx8IHF1YW50aXR5ID4gb2ZmZXIuc2VsbF9ob3dfbXVjaCApIHsNCiAgICAgICAgICAgIC8vIGJ1eWVyIHdhbnRzIG1vcmUgdGhhbiBpcyBhdmFpbGFibGUNCiAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmICggc3BlbmQgPT0gb2ZmZXIuYnV5X2hvd19tdWNoICYmIHF1YW50aXR5ID09IG9mZmVyLnNlbGxfaG93X211Y2ggKSB7DQogICAgICAgICAgICAvLyBidXllciB3YW50cyBleGFjdGx5IHdoYXQgaXMgYXZhaWxhYmxlDQogICAgICAgICAgICBkZWxldGUgb2ZmZXJzW2lkXTsNCg0KICAgICAgICAgICAgdHJhZGUoIG9mZmVyLm93bmVyLCBxdWFudGl0eSwgb2ZmZXIuc2VsbF93aGljaF90b2tlbiwNCiAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLCBzcGVuZCwgb2ZmZXIuYnV5X3doaWNoX3Rva2VuICk7DQoNCiAgICAgICAgICAgIEl0ZW1VcGRhdGUoaWQpOw0KICAgICAgICAgICAgTG9nVGFrZSgNCiAgICAgICAgICAgICAgICBieXRlczMyKGlkKSwNCiAgICAgICAgICAgICAgICBzaGEzKG9mZmVyLnNlbGxfd2hpY2hfdG9rZW4sIG9mZmVyLmJ1eV93aGljaF90b2tlbiksDQogICAgICAgICAgICAgICAgb2ZmZXIub3duZXIsDQogICAgICAgICAgICAgICAgb2ZmZXIuc2VsbF93aGljaF90b2tlbiwNCiAgICAgICAgICAgICAgICBvZmZlci5idXlfd2hpY2hfdG9rZW4sDQogICAgICAgICAgICAgICAgbXNnLnNlbmRlciwNCiAgICAgICAgICAgICAgICB1aW50MTI4KG9mZmVyLnNlbGxfaG93X211Y2gpLA0KICAgICAgICAgICAgICAgIHVpbnQxMjgob2ZmZXIuYnV5X2hvd19tdWNoKSwNCiAgICAgICAgICAgICAgICB1aW50NjQobm93KQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgc3VjY2VzcyA9IHRydWU7DQogICAgICAgIH0gZWxzZSBpZiAoIHNwZW5kID4gMCAmJiBxdWFudGl0eSA+IDAgKSB7DQogICAgICAgICAgICAvLyBidXllciB3YW50cyBhIGZyYWN0aW9uIG9mIHdoYXQgaXMgYXZhaWxhYmxlDQogICAgICAgICAgICBvZmZlcnNbaWRdLnNlbGxfaG93X211Y2ggPSBzYWZlU3ViKG9mZmVyLnNlbGxfaG93X211Y2gsIHF1YW50aXR5KTsNCiAgICAgICAgICAgIG9mZmVyc1tpZF0uYnV5X2hvd19tdWNoID0gc2FmZVN1YihvZmZlci5idXlfaG93X211Y2gsIHNwZW5kKTsNCg0KICAgICAgICAgICAgdHJhZGUoIG9mZmVyLm93bmVyLCBxdWFudGl0eSwgb2ZmZXIuc2VsbF93aGljaF90b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgbXNnLnNlbmRlciwgc3BlbmQsIG9mZmVyLmJ1eV93aGljaF90b2tlbiApOw0KDQogICAgICAgICAgICBJdGVtVXBkYXRlKGlkKTsNCiAgICAgICAgICAgIExvZ1Rha2UoDQogICAgICAgICAgICAgICAgYnl0ZXMzMihpZCksDQogICAgICAgICAgICAgICAgc2hhMyhvZmZlci5zZWxsX3doaWNoX3Rva2VuLCBvZmZlci5idXlfd2hpY2hfdG9rZW4pLA0KICAgICAgICAgICAgICAgIG9mZmVyLm93bmVyLA0KICAgICAgICAgICAgICAgIG9mZmVyLnNlbGxfd2hpY2hfdG9rZW4sDQogICAgICAgICAgICAgICAgb2ZmZXIuYnV5X3doaWNoX3Rva2VuLA0KICAgICAgICAgICAgICAgIG1zZy5zZW5kZXIsDQogICAgICAgICAgICAgICAgdWludDEyOChxdWFudGl0eSksDQogICAgICAgICAgICAgICAgdWludDEyOChzcGVuZCksDQogICAgICAgICAgICAgICAgdWludDY0KG5vdykNCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gYnV5ZXIgd2FudHMgYW4gdW5zYXRpc2ZpYWJsZSBhbW91bnQgKGxlc3MgdGhhbiAxIGludGVnZXIpDQogICAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBDYW5jZWwgYW4gb2ZmZXIuIFJlZnVuZHMgb2ZmZXIgbWFrZXIuDQogICAgZnVuY3Rpb24gY2FuY2VsKCB1aW50IGlkICkNCiAgICAgICAgY2FuX2NhbmNlbChpZCkNCiAgICAgICAgc3luY2hyb25pemVkDQogICAgICAgIHJldHVybnMgKCBib29sIHN1Y2Nlc3MgKQ0KICAgIHsNCiAgICAgICAgLy8gcmVhZC1vbmx5IG9mZmVyLiBNb2RpZnkgYW4gb2ZmZXIgYnkgZGlyZWN0bHkgYWNjZXNzaW5nIG9mZmVyc1tpZF0NCiAgICAgICAgT2ZmZXJJbmZvIG1lbW9yeSBvZmZlciA9IG9mZmVyc1tpZF07DQogICAgICAgIGRlbGV0ZSBvZmZlcnNbaWRdOw0KDQogICAgICAgIHZhciBzZWxsZXJfcmVmdW5kZWQgPSBvZmZlci5zZWxsX3doaWNoX3Rva2VuLnRyYW5zZmVyKCBvZmZlci5vd25lciAsIG9mZmVyLnNlbGxfaG93X211Y2ggKTsNCiAgICAgICAgYXNzZXJ0KHNlbGxlcl9yZWZ1bmRlZCk7DQoNCiAgICAgICAgSXRlbVVwZGF0ZShpZCk7DQogICAgICAgIExvZ0tpbGwoDQogICAgICAgICAgICBieXRlczMyKGlkKSwNCiAgICAgICAgICAgIHNoYTMob2ZmZXIuc2VsbF93aGljaF90b2tlbiwgb2ZmZXIuYnV5X3doaWNoX3Rva2VuKSwNCiAgICAgICAgICAgIG9mZmVyLm93bmVyLA0KICAgICAgICAgICAgb2ZmZXIuc2VsbF93aGljaF90b2tlbiwNCiAgICAgICAgICAgIG9mZmVyLmJ1eV93aGljaF90b2tlbiwNCiAgICAgICAgICAgIHVpbnQxMjgob2ZmZXIuc2VsbF9ob3dfbXVjaCksDQogICAgICAgICAgICB1aW50MTI4KG9mZmVyLmJ1eV9ob3dfbXVjaCksDQogICAgICAgICAgICB1aW50NjQobm93KQ0KICAgICAgICApOw0KDQogICAgICAgIHN1Y2Nlc3MgPSB0cnVlOw0KICAgIH0NCn0NCg0KLy8gU2ltcGxlIE1hcmtldCB3aXRoIGEgbWFya2V0IGxpZmV0aW1lLiBXaGVuIHRoZSBsaWZldGltZSBoYXMgZWxhcHNlZCwNCi8vIG9mZmVycyBjYW4gb25seSBiZSBjYW5jZWxsZWQgKG9mZmVyIGFuZCBidXkgd2lsbCB0aHJvdykuDQoNCmNvbnRyYWN0IEV4cGlyaW5nTWFya2V0IGlzIFNpbXBsZU1hcmtldCB7DQogICAgdWludCBwdWJsaWMgbGlmZXRpbWU7DQogICAgdWludCBwdWJsaWMgY2xvc2VfdGltZTsNCg0KICAgIGZ1bmN0aW9uIEV4cGlyaW5nTWFya2V0KHVpbnQgbGlmZXRpbWVfKSB7DQogICAgICAgIGxpZmV0aW1lID0gbGlmZXRpbWVfOw0KICAgICAgICBjbG9zZV90aW1lID0gZ2V0VGltZSgpICsgbGlmZXRpbWVfOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFRpbWUoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIHJldHVybiBibG9jay50aW1lc3RhbXA7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGlzQ2xvc2VkKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBjbG9zZWQpIHsNCiAgICAgICAgcmV0dXJuIChnZXRUaW1lKCkgPiBjbG9zZV90aW1lKTsNCiAgICB9DQoNCiAgICAvLyBhZnRlciBtYXJrZXQgbGlmZXRpbWUgaGFzIGVsYXBzZWQsIG5vIG5ldyBvZmZlcnMgYXJlIGFsbG93ZWQNCiAgICBtb2RpZmllciBjYW5fb2ZmZXIgew0KICAgICAgICBhc3NlcnQoIWlzQ2xvc2VkKCkpOw0KICAgICAgICBfOw0KICAgIH0NCiAgICAvLyBhZnRlciBjbG9zZSwgbm8gbmV3IGJ1eXMgYXJlIGFsbG93ZWQNCiAgICBtb2RpZmllciBjYW5fYnV5KHVpbnQgaWQpIHsNCiAgICAgICAgYXNzZXJ0KGlzQWN0aXZlKGlkKSk7DQogICAgICAgIGFzc2VydCghaXNDbG9zZWQoKSk7DQogICAgICAgIF87DQogICAgfQ0KICAgIC8vIGFmdGVyIGNsb3NlLCBhbnlvbmUgY2FuIGNhbmNlbCBhbiBvZmZlcg0KICAgIG1vZGlmaWVyIGNhbl9jYW5jZWwodWludCBpZCkgew0KICAgICAgICBhc3NlcnQoaXNBY3RpdmUoaWQpKTsNCiAgICAgICAgYXNzZXJ0KGlzQ2xvc2VkKCkgfHwgKG1zZy5zZW5kZXIgPT0gZ2V0T3duZXIoaWQpKSk7DQogICAgICAgIF87DQogICAgfQ0KfQ=='