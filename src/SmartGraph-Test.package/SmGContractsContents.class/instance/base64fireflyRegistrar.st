base 64 content
base64fireflyRegistrar
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4wOw0KDQpjb250cmFjdCBBYnN0cmFjdEVOUyB7DQogICAgZnVuY3Rpb24gb3duZXIoYnl0ZXMzMiBub2RlKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpOw0KICAgIGZ1bmN0aW9uIHJlc29sdmVyKGJ5dGVzMzIgbm9kZSkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKTsNCiAgICBmdW5jdGlvbiBzZXRPd25lcihieXRlczMyIG5vZGUsIGFkZHJlc3Mgb3duZXIpOw0KICAgIGZ1bmN0aW9uIHNldFN1Ym5vZGVPd25lcihieXRlczMyIG5vZGUsIGJ5dGVzMzIgbGFiZWwsIGFkZHJlc3Mgb3duZXIpOw0KICAgIGZ1bmN0aW9uIHNldFJlc29sdmVyKGJ5dGVzMzIgbm9kZSwgYWRkcmVzcyByZXNvbHZlcik7DQp9DQoNCmNvbnRyYWN0IFJlc29sdmVyIHsNCiAgICBmdW5jdGlvbiBzZXRBZGRyKGJ5dGVzMzIgbm9kZUhhc2gsIGFkZHJlc3MgYWRkcik7DQp9DQpjb250cmFjdCBSZXZlcnNlUmVnaXN0cmFyIHsNCiAgICBmdW5jdGlvbiBjbGFpbShhZGRyZXNzIG93bmVyKSByZXR1cm5zIChieXRlczMyIG5vZGUpOw0KfQ0KDQoNCi8qKg0KICogIEZpcmVmbHlSZWdpc3RyYXINCiAqDQogKiAgVGhpcyByZWdpc3RyYXIgYWxsb3dzIGFyYml0cmFyeSBsYWJlbHMgYmVsb3cgdGhlIHJvb3Qgbm9kZSBmb3IgYSBmaXhlZCBtaW5pbXVtIGZlZS4NCiAqICBMYWJlbHMgbXVzdCBjb25mb3JtIHRvIHRoZSByZWdleCAvXlthLXowLTktXXs0LCAyMH0kLy4NCiAqDQogKiAgQWRtaW4gcHJpdmlsZWRnZXM6DQogKiAgICAtIGNoYW5nZSB0aGUgYWRtaW4NCiAqICAgIC0gY2hhbmdlIHRoZSBmZWUNCiAqICAgIC0gY2hhbmdlIHRoZSBkZWZhdWx0IHJlc29sdmVyDQogKiAgICAtIHdpdGhkcmF3bCBmdW5kcw0KICoNCiAqICBUaGlzIHJlc29sdmVyIHNob3VsZCBpcyBkZXNpZ25lZCB0byBiZSBzZWxmLWNvbnRhaW5lZCwgc28gdGhhdCBpbiB0aGUgZnV0dXJlDQogKiAgc3dpdGNoaW5nIHRvIGEgbmV3IFJlc29sdmVyIHNob3VsZCBub3QgaW1wYWN0IHRoaXMgb25lLg0KICoNCiAqLw0KY29udHJhY3QgRmlyZWZseVJlZ2lzdHJhciB7DQogICAgIC8vIG5hbWVoYXNoKCdhZGRyLnJldmVyc2UnKQ0KICAgICBieXRlczMyIGNvbnN0YW50IFJSX05PREUgPSAweDkxZDE3Nzc3ODE4ODRkMDNhNjc1N2E4MDM5OTZlMzhkZTJhNDI5NjdmYjM3ZWVhY2E3MjcyOTI3MTAyNWE5ZTI7DQoNCiAgICAvLyBBZG1pbiB0cmlnZ2VyZWQgZXZlbnRzDQogICAgZXZlbnQgYWRtaW5DaGFuZ2VkKGFkZHJlc3Mgb2xkQWRtaW4sIGFkZHJlc3MgbmV3QWRtaW4pOw0KICAgIGV2ZW50IGZlZUNoYW5nZWQodWludDI1NiBvbGRGZWUsIHVpbnQyNTYgbmV3RmVlKTsNCiAgICBldmVudCBkZWZhdWx0UmVzb2x2ZXJDaGFuZ2VkKGFkZHJlc3Mgb2xkUmVzb2x2ZXIsIGFkZHJlc3MgbmV3UmVzb2x2ZXIpOw0KICAgIGV2ZW50IGRpZFdpdGhkcmF3KGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IGFtb3VudCk7DQoNCiAgICAvLyBSZWdpc3RyYXRpb24NCiAgICBldmVudCBuYW1lUmVnaXN0ZXJlZChieXRlczMyIGluZGV4ZWQgbm9kZUhhc2gsIGFkZHJlc3Mgb3duZXIsIHVpbnQyNTYgZmVlKTsNCg0KICAgIC8vIERvbmF0aW9ucw0KICAgIGV2ZW50IGRvbmF0aW9uKGJ5dGVzMzIgaW5kZXhlZCBub2RlSGFzaCwgdWludDI1NiBhbW91bnQpOw0KDQogICAgQWJzdHJhY3RFTlMgX2VuczsNCiAgICBSZXNvbHZlciBfZGVmYXVsdFJlc29sdmVyOw0KDQogICAgYWRkcmVzcyBfYWRtaW47DQogICAgYnl0ZXMzMiBfbm9kZUhhc2g7DQoNCiAgICB1aW50MjU2IF9mZWU7DQoNCiAgICB1aW50MjU2IF90b3RhbFBhaWQgPSAwOw0KICAgIHVpbnQyNTYgX25hbWVDb3VudCA9IDA7DQoNCiAgICBtYXBwaW5nIChieXRlczMyID0+IHVpbnQyNTYpIF9kb25hdGlvbnM7DQoNCiAgICBmdW5jdGlvbiBGaXJlZmx5UmVnaXN0cmFyKGFkZHJlc3MgZW5zLCBieXRlczMyIG5vZGVIYXNoLCBhZGRyZXNzIGRlZmF1bHRSZXNvbHZlcikgew0KICAgICAgICBfZW5zID0gQWJzdHJhY3RFTlMoZW5zKTsNCiAgICAgICAgX25vZGVIYXNoID0gbm9kZUhhc2g7DQogICAgICAgIF9kZWZhdWx0UmVzb2x2ZXIgPSBSZXNvbHZlcihkZWZhdWx0UmVzb2x2ZXIpOw0KDQogICAgICAgIF9hZG1pbiA9IG1zZy5zZW5kZXI7DQoNCiAgICAgICAgX2ZlZSA9IDAuMSBldGhlcjsNCg0KICAgICAgICAvLyBHaXZlIHRoZSBhZG1pbiBhY2Nlc3MgdG8gdGhlIHJldmVyc2UgZW50cnkNCiAgICAgICAgUmV2ZXJzZVJlZ2lzdHJhcihfZW5zLm93bmVyKFJSX05PREUpKS5jbGFpbShfYWRtaW4pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqICBzZXRBZG1pbihhZG1pbikNCiAgICAgKg0KICAgICAqICBDaGFuZ2UgdGhlIGFkbWluIG9mIHRoaXMgY29udHJhY3QuIFRoaXMgc2hvdWxkIGJlIHVzZWQgc2hvcnRseSBhZnRlcg0KICAgICAqICBkZXBsb3ltZW50IGFuZCBsaXZlIHRlc3RpbmcgdG8gc3dpdGNoIHRvIGEgbXVsdGktc2lnIGNvbnRyYWN0Lg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNldEFkbWluKGFkZHJlc3MgYWRtaW4pIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gX2FkbWluKSB7IHRocm93OyB9DQoNCiAgICAgICAgYWRtaW5DaGFuZ2VkKF9hZG1pbiwgYWRtaW4pOw0KICAgICAgICBfYWRtaW4gPSBhZG1pbjsNCg0KICAgICAgICAvLyBHaXZlIHRoZSBhZG1pbiBhY2Nlc3MgdG8gdGhlIHJldmVyc2UgZW50cnkNCiAgICAgICAgUmV2ZXJzZVJlZ2lzdHJhcihfZW5zLm93bmVyKFJSX05PREUpKS5jbGFpbShhZG1pbik7DQoNCiAgICAgICAgLy8gUG9pbnQgdGhlIHJlc29sdmVkIGFkZHIgdG8gdGhlIG5ldyBhZG1pbg0KICAgICAgICBSZXNvbHZlcihfZW5zLnJlc29sdmVyKF9ub2RlSGFzaCkpLnNldEFkZHIoX25vZGVIYXNoLCBfYWRtaW4pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqICBzZXRGZWUoZmVlKQ0KICAgICAqDQogICAgICogIFRoaXMgaXMgdXNlZnVsIGlmIHRoZSBwcmljZSBvZiBldGhlciBza3ktcm9ja2V0cyBvciBwbHVtbWV0cywgYnV0DQogICAgICogIGZvciB0aGUgbW9zdCBwYXJ0IHNob3VsZCByZW1haW4gdW51c2VkDQogICAgICovDQogICAgZnVuY3Rpb24gc2V0RmVlKHVpbnQyNTYgZmVlKSB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IF9hZG1pbikgeyB0aHJvdzsgfQ0KICAgICAgICBmZWVDaGFuZ2VkKF9mZWUsIGZlZSk7DQogICAgICAgIF9mZWUgPSBmZWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogIHNldERlZmF1bHRSZXNvbHZlcihyZXNvbHZlcikNCiAgICAgKg0KICAgICAqICBBbGxvdyB0aGUgYWRtaW4gdG8gY2hhbmdlIHRoZSBkZWZhdWx0IHJlc29sdmVyIHRoYXQgaXMgc2V0dXAgd2l0aA0KICAgICAqICBuZXcgbmFtZSByZWdpc3RyYXRpb25zLg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNldERlZmF1bHRSZXNvbHZlcihhZGRyZXNzIGRlZmF1bHRSZXNvbHZlcikgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBfYWRtaW4pIHsgdGhyb3c7IH0NCiAgICAgICAgZGVmYXVsdFJlc29sdmVyQ2hhbmdlZChfZGVmYXVsdFJlc29sdmVyLCBkZWZhdWx0UmVzb2x2ZXIpOw0KICAgICAgICBfZGVmYXVsdFJlc29sdmVyID0gUmVzb2x2ZXIoZGVmYXVsdFJlc29sdmVyKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiAgd2l0aGRyYXcodGFyZ2V0LCBhbW91bnQpDQogICAgICoNCiAgICAgKiAgQWxsb3cgdGhlIGFkbWluIHRvIHdpdGhkcmF3bCBmdW5kcy4NCiAgICAgKi8NCiAgICBmdW5jdGlvbiB3aXRoZHJhdyhhZGRyZXNzIHRhcmdldCwgdWludDI1NiBhbW91bnQpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gX2FkbWluKSB7IHRocm93OyB9DQogICAgICAgIGlmICghdGFyZ2V0LnNlbmQoYW1vdW50KSkgeyB0aHJvdzsgfQ0KICAgICAgICBkaWRXaXRoZHJhdyh0YXJnZXQsIGFtb3VudCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogIHJlZ2lzdGVyKGxhYmVsKQ0KICAgICAqDQogICAgICogIEFsbG93cyBhbnlvbmUgdG8gc2VuZCAqZmVlKiBldGhlciB0byB0aGUgY29udHJhY3Qgd2l0aCBhIG5hbWUgdG8gcmVnaXN0ZXIuDQogICAgICoNCiAgICAgKiAgTm90ZTogQSBuYW1lIG11c3QgbWF0Y2ggdGhlIHJlZ2V4IC9eW2EtejAtOS1dezQsMjB9JC8NCiAgICAgKi8NCiAgICBmdW5jdGlvbiByZWdpc3RlcihzdHJpbmcgbGFiZWwpIHBheWFibGUgew0KDQogICAgICAgIC8vIENoZWNrIHRoZSBsYWJlbCBpcyBsZWdhbA0KICAgICAgICB1aW50MjU2IHBvc2l0aW9uOw0KICAgICAgICB1aW50MjU2IGxlbmd0aDsNCiAgICAgICAgYXNzZW1ibHkgew0KICAgICAgICAgICAgLy8gVGhlIGZpcnN0IHdvcmQgb2YgYSBzdHJpbmcgaXMgaXRzIGxlbmd0aA0KICAgICAgICAgICAgbGVuZ3RoIDo9IG1sb2FkKGxhYmVsKQ0KDQogICAgICAgICAgICAvLyBUaGUgZmlyc3QgY2hhcmFjdGVyIHBvc2l0aW9uIGlzIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNlY29uZCB3b3JkDQogICAgICAgICAgICBwb3NpdGlvbiA6PSBhZGQobGFiZWwsIDEpDQogICAgICAgIH0NCg0KICAgICAgICAvLyBMYWJlbHMgbXVzdCBiZSBhdCBsZWFzdCA0IGNoYXJhY3RlcnMgYW5kIGF0IG1vc3QgMjAgY2hhcmFjdGVycw0KICAgICAgICBpZiAobGVuZ3RoIDwgNCB8fCBsZW5ndGggPiAyMCkgeyB0aHJvdzsgfQ0KDQogICAgICAgIC8vIE9ubHkgYWxsb3cgL15bYS16MC05LV0qJC8NCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHVpbnQ4IGM7DQogICAgICAgICAgICBhc3NlbWJseSB7IGMgOj0gYW5kKG1sb2FkKHBvc2l0aW9uKSwgMHhGRikgfQ0KICAgICAgICAgICAgLy8gICAgICAgJ2EnICAgICAgICAgJ3onICAgICAgICAgICAnMCcgICAgICAgICAnOScgICAgICAgICAgICctJw0KICAgICAgICAgICAgaWYgKChjIDwgMHg2MSB8fCBjID4gMHg3YSkgJiYgKGMgPCAweDMwIHx8IGMgPiAweDM5KSAmJiBjICE9IDB4MmQpIHsNCiAgICAgICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHBvc2l0aW9uKys7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBQYWlkIHRvbyBsaXR0bGU7IHBhcnRpY2lwYW50cyBtYXkgcGF5IG1vcmUgKGFzIGEgZG9uYXRpb24pDQogICAgICAgIGlmIChtc2cudmFsdWUgPCBfZmVlKSB7IHRocm93OyB9DQoNCiAgICAgICAgLy8gQ29tcHV0ZSB0aGUgbGFiZWwgYW5kIG5vZGUgaGFzaA0KICAgICAgICB2YXIgbGFiZWxIYXNoID0gc2hhMyhsYWJlbCk7DQogICAgICAgIHZhciBub2RlSGFzaCA9IHNoYTMoX25vZGVIYXNoLCBsYWJlbEhhc2gpOw0KDQogICAgICAgIC8vIFRoaXMgaXMgYWxyZWFkeSBvd25lZCBpbiBFTlMNCiAgICAgICAgaWYgKF9lbnMub3duZXIobm9kZUhhc2gpICE9IGFkZHJlc3MoMCkpIHsgdGhyb3c7IH0NCg0KICAgICAgICAvLyBNYWtlIHRoaXMgcmVnaXN0cmFyIHRoZSBvd25lciAoc28gd2UgY2FuIHNldCBpdCB1cCBiZWZvcmUgZ2l2aW5nIGl0IGF3YXkpDQogICAgICAgIF9lbnMuc2V0U3Vibm9kZU93bmVyKF9ub2RlSGFzaCwgbGFiZWxIYXNoLCB0aGlzKTsNCg0KICAgICAgICAvLyBTZXQgdXAgdGhlIGRlZmF1bHQgcmVzb2x2ZXIgYW5kIHBvaW50IHRvIHRoZSBzZW5kZXINCiAgICAgICAgX2Vucy5zZXRSZXNvbHZlcihub2RlSGFzaCwgX2RlZmF1bHRSZXNvbHZlcik7DQogICAgICAgIF9kZWZhdWx0UmVzb2x2ZXIuc2V0QWRkcihub2RlSGFzaCwgbXNnLnNlbmRlcik7DQoNCiAgICAgICAgLy8gTm93IGdpdmUgaXQgdG8gdGhlIHNlbmRlcg0KICAgICAgICBfZW5zLnNldE93bmVyKG5vZGVIYXNoLCBtc2cuc2VuZGVyKTsNCg0KICAgICAgICBfdG90YWxQYWlkICs9IG1zZy52YWx1ZTsNCiAgICAgICAgX25hbWVDb3VudCsrOw0KDQogICAgICAgIF9kb25hdGlvbnNbbm9kZUhhc2hdICs9IG1zZy52YWx1ZTsNCg0KICAgICAgICBuYW1lUmVnaXN0ZXJlZChub2RlSGFzaCwgbXNnLnNlbmRlciwgbXNnLnZhbHVlKTsNCiAgICAgICAgZG9uYXRpb24obm9kZUhhc2gsIG1zZy52YWx1ZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogIGRvbmF0ZShub2RlSGFzaCkNCiAgICAgKg0KICAgICAqICBBbGxvdyBhIHJlZ2lzdGVyZWQgbmFtZSB0byBkb25hdGUgbW9yZSBhbmQgZ2V0IGF0dHJpYnV0aW9uLiBUaGlzIG1heQ0KICAgICAqICBiZSB1c2VmdWwgaWYgc3BlY2lhbCBsaW1pdGVkIGVkaXRpb24gRmlyZWZseSBkZXZpY2VzIGFyZSBhd2FyZGVkIHRvDQogICAgICogIGNlcnRhaW4gdGllcnMgb2YgZG9ub3JzIG9yIHN1Y2guDQogICAgICovDQogICAgZnVuY3Rpb24gZG9uYXRlKGJ5dGVzMzIgbm9kZUhhc2gpIHBheWFibGUgew0KICAgICAgICBfZG9uYXRpb25zW25vZGVIYXNoXSArPSBtc2cudmFsdWU7DQogICAgICAgIGRvbmF0aW9uKG5vZGVIYXNoLCBtc2cudmFsdWUpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqICBjb25maWcoKQ0KICAgICAqDQogICAgICogIEdldCB0aGUgY29uZmlndXJhdGlvbiBvZiB0aGlzIHJlZ2lzdHJhci4NCiAgICAgKi8NCiAgICBmdW5jdGlvbiBjb25maWcoKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzIGVucywgYnl0ZXMzMiBub2RlSGFzaCwgYWRkcmVzcyBhZG1pbiwgdWludDI1NiBmZWUsIGFkZHJlc3MgZGVmYXVsdFJlc29sdmVyKSB7DQogICAgICAgIGVucyA9IF9lbnM7DQogICAgICAgIG5vZGVIYXNoID0gX25vZGVIYXNoOw0KICAgICAgICBhZG1pbiA9IF9hZG1pbjsNCiAgICAgICAgZmVlID0gX2ZlZTsNCiAgICAgICAgZGVmYXVsdFJlc29sdmVyID0gX2RlZmF1bHRSZXNvbHZlcjsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiAgc3RhdHMoKQ0KICAgICAqDQogICAgICogIEdldCBzb21lIHN0YXRpc3RpY3MgZm9yIHRoaXMgcmVnaXN0cmFyLg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHN0YXRzKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBuYW1lQ291bnQsIHVpbnQyNTYgdG90YWxQYWlkLCB1aW50MjU2IGJhbGFuY2UpIHsNCiAgICAgICAgbmFtZUNvdW50ID0gX25hbWVDb3VudDsNCiAgICAgICAgdG90YWxQYWlkID0gX3RvdGFsUGFpZDsNCiAgICAgICAgYmFsYW5jZSA9IHRoaXMuYmFsYW5jZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiAgZG9uYXRpb25zKG5vZGVIYXNoKQ0KICAgICAqDQogICAgICogIFJldHVybnMgdGhlIGFtb3VudCBvZiBkb25hdGlvbnMgYSBub2RlSGFzaCBoYXMgcHJvdmlkZWQuDQogICAgICovDQogICAgZnVuY3Rpb24gZG9uYXRpb25zKGJ5dGVzMzIgbm9kZUhhc2gpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgZG9uYXRpb24pIHsNCiAgICAgICAgcmV0dXJuIF9kb25hdGlvbnNbbm9kZUhhc2hdOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqICBmZWUoKQ0KICAgICAqDQogICAgICogIFRoZSBjdXJyZW50IGZlZSBmb3JyZWdpc3RlcmluZyBhIG5hbWUuDQogICAgICovDQogICAgZnVuY3Rpb24gZmVlKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBmZWUpIHsNCiAgICAgICAgcmV0dXJuIF9mZWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogIEFsbG93IGFub255bW91cyBkb25hdGlvbnMuDQogICAgICovDQogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7DQogICAgICAgIF9kb25hdGlvbnNbMF0gKz0gbXNnLnZhbHVlOw0KICAgICAgICBkb25hdGlvbigwLCBtc2cudmFsdWUpOw0KICAgIH0NCn0='