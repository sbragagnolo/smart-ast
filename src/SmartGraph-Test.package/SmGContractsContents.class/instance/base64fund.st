base 64 content
base64fund
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC42Ow0KDQpjb250cmFjdCBTdGFuZGFyZFRva2VuIHsNCg0KICAgIC8qDQogICAgICogIERhdGEgc3RydWN0dXJlcw0KICAgICAqLw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOw0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Ow0KDQogICAgLyoNCiAgICAgKiAgRXZlbnRzDQogICAgICovDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7DQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7DQoNCiAgICAvKg0KICAgICAqICBSZWFkIGFuZCB3cml0ZSBzdG9yYWdlIGZ1bmN0aW9ucw0KICAgICAqLw0KICAgIC8vLyBAZGV2IFRyYW5zZmVycyBzZW5kZXIncyB0b2tlbnMgdG8gYSBnaXZlbiBhZGRyZXNzLiBSZXR1cm5zIHN1Y2Nlc3MuDQogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiB0b2tlbiByZWNlaXZlci4NCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBOdW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyLg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgew0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7DQogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vLyBAZGV2IEFsbG93cyBhbGxvd2VkIHRoaXJkIHBhcnR5IHRvIHRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3MgZnJvbSB3aGVyZSB0b2tlbnMgYXJlIHdpdGhkcmF3bi4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIHRvIHdoZXJlIHRva2VucyBhcmUgc2VudC4NCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBOdW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyLg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgew0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7DQogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8vIEBkZXYgUmV0dXJucyBudW1iZXIgb2YgdG9rZW5zIG93bmVkIGJ5IGdpdmVuIGFkZHJlc3MuDQogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgew0KICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCiAgICB9DQoNCiAgICAvLy8gQGRldiBTZXRzIGFwcHJvdmVkIGFtb3VudCBvZiB0b2tlbnMgZm9yIHNwZW5kZXIuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgYWxsb3dlZCBhY2NvdW50Lg0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIE51bWJlciBvZiBhcHByb3ZlZCB0b2tlbnMuDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoNCiAgICAgKiBSZWFkIHN0b3JhZ2UgZnVuY3Rpb25zDQogICAgICovDQogICAgLy8vIEBkZXYgUmV0dXJucyBudW1iZXIgb2YgYWxsb3dlZCB0b2tlbnMgZm9yIGdpdmVuIGFkZHJlc3MuDQogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgdG9rZW4gc3BlbmRlci4NCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7DQogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgICB9DQoNCn0NCg0KDQovLy8gQHRpdGxlIFRva2VuIGNvbnRyYWN0IC0gSW1wbGVtZW50cyBTdGFuZGFyZCBUb2tlbiBJbnRlcmZhY2UgZm9yIFRva2VuRnVuZC4NCi8vLyBAYXV0aG9yIEV2Z2VueSBZdXJ0YWV2IC0gPGV2Z2VueUBldGhlcmlvbmxhYi5jb20+DQpjb250cmFjdCBUb2tlbkZ1bmQgaXMgU3RhbmRhcmRUb2tlbiB7DQoNCiAgICAvKg0KICAgICAqIEV4dGVybmFsIGNvbnRyYWN0cw0KICAgICAqLw0KICAgIGFkZHJlc3MgcHVibGljIGVtaXNzaW9uQ29udHJhY3RBZGRyZXNzID0gMHgwOw0KDQogICAgLyoNCiAgICAgKiBUb2tlbiBtZXRhIGRhdGENCiAgICAgKi8NCiAgICBzdHJpbmcgY29uc3RhbnQgcHVibGljIG5hbWUgPSAiVGhlVG9rZW4gRnVuZCI7DQogICAgc3RyaW5nIGNvbnN0YW50IHB1YmxpYyBzeW1ib2wgPSAiVEtOIjsNCiAgICB1aW50OCBjb25zdGFudCBwdWJsaWMgZGVjaW1hbHMgPSA4Ow0KDQogICAgLyoNCiAgICAgKiBTdG9yYWdlDQogICAgICovDQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXIgPSAweDA7DQogICAgYm9vbCBwdWJsaWMgZW1pc3Npb25FbmFibGVkID0gdHJ1ZTsNCiAgICBib29sIHRyYW5zZmVyc0VuYWJsZWQgPSB0cnVlOw0KDQogICAgLyoNCiAgICAgKiBNb2RpZmllcnMNCiAgICAgKi8NCg0KICAgIG1vZGlmaWVyIGlzQ3Jvd2RmdW5kaW5nQ29udHJhY3QoKSB7DQogICAgICAgIC8vIE9ubHkgZW1pc3Npb24gYWRkcmVzcyBpcyBhbGxvd2VkIHRvIHByb2NlZWQuDQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGVtaXNzaW9uQ29udHJhY3RBZGRyZXNzKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsNCiAgICAgICAgLy8gT25seSBvd25lciBpcyBhbGxvd2VkIHRvIGRvIHRoaXMgYWN0aW9uLg0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvKg0KICAgICAqIENvbnRyYWN0IGZ1bmN0aW9ucw0KICAgICAqLw0KDQogICAgIC8vLyBAZGV2IFRva2VuRnVuZCBlbWlzc2lvbiBmdW5jdGlvbi4NCiAgICAvLy8gQHBhcmFtIF9mb3IgQWRkcmVzcyBvZiByZWNlaXZlci4NCiAgICAvLy8gQHBhcmFtIHRva2VuQ291bnQgTnVtYmVyIG9mIHRva2VucyB0byBpc3N1ZS4NCiAgICBmdW5jdGlvbiBpc3N1ZVRva2VucyhhZGRyZXNzIF9mb3IsIHVpbnQgdG9rZW5Db3VudCkNCiAgICAgICAgZXh0ZXJuYWwNCiAgICAgICAgaXNDcm93ZGZ1bmRpbmdDb250cmFjdA0KICAgICAgICByZXR1cm5zIChib29sKQ0KICAgIHsNCiAgICAgICAgaWYgKGVtaXNzaW9uRW5hYmxlZCA9PSBmYWxzZSkgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCg0KICAgICAgICBiYWxhbmNlc1tfZm9yXSArPSB0b2tlbkNvdW50Ow0KICAgICAgICB0b3RhbFN1cHBseSArPSB0b2tlbkNvdW50Ow0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLy8gQGRldiBXaXRoZHJhd3MgdG9rZW5zIGZvciBtc2cuc2VuZGVyLg0KICAgIC8vLyBAcGFyYW0gdG9rZW5Db3VudCBOdW1iZXIgb2YgdG9rZW5zIHRvIHdpdGhkcmF3Lg0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW5zKHVpbnQgdG9rZW5Db3VudCkNCiAgICAgICAgcHVibGljDQogICAgICAgIHJldHVybnMgKGJvb2wpDQogICAgew0KICAgICAgICB1aW50IGJhbGFuY2UgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsNCiAgICAgICAgaWYgKGJhbGFuY2UgPCB0b2tlbkNvdW50KSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gdG9rZW5Db3VudDsNCiAgICAgICAgdG90YWxTdXBwbHkgLT0gdG9rZW5Db3VudDsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgRnVuY3Rpb24gdG8gY2hhbmdlIGFkZHJlc3MgdGhhdCBpcyBhbGxvd2VkIHRvIGRvIGVtaXNzaW9uLg0KICAgIC8vLyBAcGFyYW0gbmV3QWRkcmVzcyBBZGRyZXNzIG9mIG5ldyBlbWlzc2lvbiBjb250cmFjdC4NCiAgICBmdW5jdGlvbiBjaGFuZ2VFbWlzc2lvbkNvbnRyYWN0QWRkcmVzcyhhZGRyZXNzIG5ld0FkZHJlc3MpDQogICAgICAgIGV4dGVybmFsDQogICAgICAgIG9ubHlPd25lcg0KICAgICAgICByZXR1cm5zIChib29sKQ0KICAgIHsNCiAgICAgICAgZW1pc3Npb25Db250cmFjdEFkZHJlc3MgPSBuZXdBZGRyZXNzOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IEZ1bmN0aW9uIHRoYXQgZW5hYmxlcy9kaXNhYmxlcyB0cmFuc2ZlcnMgb2YgdG9rZW4uDQogICAgLy8vIEBwYXJhbSB2YWx1ZSBUcnVlL0ZhbHNlDQogICAgZnVuY3Rpb24gZW5hYmxlVHJhbnNmZXJzKGJvb2wgdmFsdWUpDQogICAgICAgIGV4dGVybmFsDQogICAgICAgIG9ubHlPd25lcg0KICAgIHsNCiAgICAgICAgdHJhbnNmZXJzRW5hYmxlZCA9IHZhbHVlOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IEZ1bmN0aW9uIHRoYXQgZW5hYmxlcy9kaXNhYmxlcyB0b2tlbiBlbWlzc2lvbi4NCiAgICAvLy8gQHBhcmFtIHZhbHVlIFRydWUvRmFsc2UNCiAgICBmdW5jdGlvbiBlbmFibGVFbWlzc2lvbihib29sIHZhbHVlKQ0KICAgICAgICBleHRlcm5hbA0KICAgICAgICBvbmx5T3duZXINCiAgICB7DQogICAgICAgIGVtaXNzaW9uRW5hYmxlZCA9IHZhbHVlOw0KICAgIH0NCg0KICAgIC8qDQogICAgICogT3ZlcnJpZGluZyBFUkMyMCBzdGFuZGFyZCB0b2tlbiBmdW5jdGlvbnMgdG8gc3VwcG9ydCB0cmFuc2ZlciBsb2NrDQogICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQ0KICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpDQogICAgew0KICAgICAgICBpZiAodHJhbnNmZXJzRW5hYmxlZCA9PSB0cnVlKSB7DQogICAgICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQ0KICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpDQogICAgew0KICAgICAgICBpZiAodHJhbnNmZXJzRW5hYmxlZCA9PSB0cnVlKSB7DQogICAgICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KDQogICAgLy8vIEBkZXYgQ29udHJhY3QgY29uc3RydWN0b3IgZnVuY3Rpb24gc2V0cyBpbml0aWFsIHRva2VuIGJhbGFuY2VzLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdGhlIG93bmVyIG9mIFRva2VuRnVuZC4NCiAgICBmdW5jdGlvbiBUb2tlbkZ1bmQoYWRkcmVzcyBfb3duZXIpDQogICAgew0KICAgICAgICB0b3RhbFN1cHBseSA9IDA7DQogICAgICAgIG93bmVyID0gX293bmVyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7DQogICAgICAgIG93bmVyID0gbmV3T3duZXI7DQogICAgfQ0KfQ0KDQpjb250cmFjdCBvd25lZCB7DQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQoNCiAgICBmdW5jdGlvbiBvd25lZCgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIG9ubHlPd25lciB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgew0KICAgICAgICBvd25lciA9IG5ld093bmVyOw0KICAgIH0NCn0NCg0KDQpjb250cmFjdCBGdW5kIGlzIG93bmVkIHsNCg0KCS8qDQogICAgICogRXh0ZXJuYWwgY29udHJhY3RzDQogICAgICovDQogICAgVG9rZW5GdW5kIHB1YmxpYyB0b2tlbkZ1bmQ7DQoNCgkvKg0KICAgICAqIFN0b3JhZ2UNCiAgICAgKi8NCiAgICBhZGRyZXNzIHB1YmxpYyBldGhBZGRyZXNzOw0KICAgIGFkZHJlc3MgcHVibGljIG11bHRpc2lnOw0KICAgIGFkZHJlc3MgcHVibGljIHN1cHBvcnRBZGRyZXNzOw0KICAgIHVpbnQgcHVibGljIHRva2VuUHJpY2UgPSAxIGZpbm5leTsgLy8gMC4wMDEgRVRIDQoNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGFkZHJlc3MpIHB1YmxpYyByZWZlcnJhbHM7DQoNCiAgICAvKg0KICAgICAqIENvbnRyYWN0IGZ1bmN0aW9ucw0KICAgICAqLw0KDQoJLy8vIEBkZXYgV2l0aGRyYXdzIHRva2VucyBmb3IgbXNnLnNlbmRlci4NCiAgICAvLy8gQHBhcmFtIHRva2VuQ291bnQgTnVtYmVyIG9mIHRva2VucyB0byB3aXRoZHJhdy4NCiAgICBmdW5jdGlvbiB3aXRoZHJhd1Rva2Vucyh1aW50IHRva2VuQ291bnQpDQogICAgICAgIHB1YmxpYw0KICAgICAgICByZXR1cm5zIChib29sKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHRva2VuRnVuZC53aXRoZHJhd1Rva2Vucyh0b2tlbkNvdW50KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc3N1ZVRva2VucyhhZGRyZXNzIF9mb3IsIHVpbnQgdG9rZW5Db3VudCkNCiAgICAJcHJpdmF0ZQ0KICAgIAlyZXR1cm5zIChib29sKQ0KICAgIHsNCiAgICAJaWYgKHRva2VuQ291bnQgPT0gMCkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIHZhciBwZXJjZW50ID0gdG9rZW5Db3VudCAvIDEwMDsNCg0KICAgICAgLy8gMSUgZ29lcyB0byB0aGUgZnVuZCBtYW5hZ2Vycw0KICAgICAgaWYgKCF0b2tlbkZ1bmQuaXNzdWVUb2tlbnMobXVsdGlzaWcsIHBlcmNlbnQpKSB7DQogICAgICAgIC8vIFRva2VucyBjb3VsZCBub3QgYmUgaXNzdWVkLg0KICAgICAgICB0aHJvdzsNCiAgICAgIH0NCg0KCQkgIC8vIDElIGdvZXMgdG8gdGhlIHN1cHBvcnQgdGVhbQ0KICAgICAgaWYgKCF0b2tlbkZ1bmQuaXNzdWVUb2tlbnMoc3VwcG9ydEFkZHJlc3MsIHBlcmNlbnQpKSB7DQogICAgICAgIC8vIFRva2VucyBjb3VsZCBub3QgYmUgaXNzdWVkLg0KICAgICAgICB0aHJvdzsNCiAgICAgIH0NCg0KICAgICAgaWYgKHJlZmVycmFsc1tfZm9yXSAhPSAwKSB7DQogICAgICAJLy8gMyUgZ29lcyB0byB0aGUgcmVmZXJyYWwNCiAgICAgIAlpZiAoIXRva2VuRnVuZC5pc3N1ZVRva2VucyhyZWZlcnJhbHNbX2Zvcl0sIDMgKiBwZXJjZW50KSkgew0KICAgICAgICAgIC8vIFRva2VucyBjb3VsZCBub3QgYmUgaXNzdWVkLg0KICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgCS8vIGlmIHRoZXJlIGlzIG5vIHJlZmVycmFsLCAzJSBnb2VzIHRvIHRoZSBmdW5kIG1hbmFnZXJzDQogICAgICAJaWYgKCF0b2tlbkZ1bmQuaXNzdWVUb2tlbnMobXVsdGlzaWcsIDMgKiBwZXJjZW50KSkgew0KICAgICAgICAgIC8vIFRva2VucyBjb3VsZCBub3QgYmUgaXNzdWVkLg0KICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGlmICghdG9rZW5GdW5kLmlzc3VlVG9rZW5zKF9mb3IsIHRva2VuQ291bnQgLSA1ICogcGVyY2VudCkpIHsNCiAgICAgICAgLy8gVG9rZW5zIGNvdWxkIG5vdCBiZSBpc3N1ZWQuDQogICAgICAgIHRocm93Ow0KCSAgICB9DQoNCgkgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgSXNzdWVzIHRva2VucyBmb3IgdXNlcnMgd2hvIG1hZGUgaW52ZXN0bWVudC4NCiAgICAvLy8gQHBhcmFtIGJlbmVmaWNpYXJ5IEFkZHJlc3MgdGhlIHRva2VucyB3aWxsIGJlIGlzc3VlZCB0by4NCiAgICAvLy8gQHBhcmFtIHZhbHVlSW5XZWkgaW52ZXN0bWVudCBpbiB3ZWkNCiAgICBmdW5jdGlvbiBhZGRJbnZlc3RtZW50KGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQgdmFsdWVJbldlaSkNCiAgICAgICAgZXh0ZXJuYWwNCiAgICAgICAgb25seU93bmVyDQogICAgICAgIHJldHVybnMgKGJvb2wpDQogICAgew0KICAgICAgICB1aW50IHRva2VuQ291bnQgPSBjYWxjdWxhdGVUb2tlbnModmFsdWVJbldlaSk7DQogICAgCXJldHVybiBpc3N1ZVRva2VucyhiZW5lZmljaWFyeSwgdG9rZW5Db3VudCk7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgSXNzdWVzIHRva2VucyBmb3IgdXNlcnMgd2hvIG1hZGUgZGlyZWN0IEVUSCBwYXltZW50Lg0KICAgIGZ1bmN0aW9uIGZ1bmQoKQ0KICAgICAgICBwdWJsaWMNCiAgICAgICAgcGF5YWJsZQ0KICAgICAgICByZXR1cm5zIChib29sKQ0KICAgIHsNCiAgICAgICAgLy8gVG9rZW4gY291bnQgaXMgcm91bmRlZCBkb3duLiBTZW50IEVUSCBzaG91bGQgYmUgbXVsdGlwbGVzIG9mIGJhc2VUb2tlblByaWNlLg0KICAgICAgICBhZGRyZXNzIGJlbmVmaWNpYXJ5ID0gbXNnLnNlbmRlcjsNCiAgICAgICAgdWludCB0b2tlbkNvdW50ID0gY2FsY3VsYXRlVG9rZW5zKG1zZy52YWx1ZSk7DQogICAgICAgIHVpbnQgcm91bmRlZEludmVzdG1lbnQgPSB0b2tlbkNvdW50ICogdG9rZW5QcmljZSAvIDEwMDAwMDAwMDsNCg0KICAgICAgICAvLyBTZW5kIGNoYW5nZSBiYWNrIHRvIHVzZXIuDQogICAgICAgIGlmIChtc2cudmFsdWUgPiByb3VuZGVkSW52ZXN0bWVudCAmJiAhYmVuZWZpY2lhcnkuc2VuZChtc2cudmFsdWUgLSByb3VuZGVkSW52ZXN0bWVudCkpIHsNCiAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICAvLyBTZW5kIG1vbmV5IHRvIHRoZSBmdW5kIGV0aGVyZXVtIGFkZHJlc3MNCiAgICAgICAgaWYgKCFldGhBZGRyZXNzLnNlbmQocm91bmRlZEludmVzdG1lbnQpKSB7DQogICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGlzc3VlVG9rZW5zKGJlbmVmaWNpYXJ5LCB0b2tlbkNvdW50KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVUb2tlbnModWludCB2YWx1ZUluV2VpKQ0KICAgICAgICBwdWJsaWMNCiAgICAgICAgY29uc3RhbnQNCiAgICAgICAgcmV0dXJucyAodWludCkNCiAgICB7DQogICAgICAgIHJldHVybiB2YWx1ZUluV2VpICogMTAwMDAwMDAwIC8gdG9rZW5QcmljZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBlc3RpbWF0ZVRva2Vucyh1aW50IHZhbHVlSW5XZWkpDQogICAgICAgIHB1YmxpYw0KICAgICAgICBjb25zdGFudA0KICAgICAgICByZXR1cm5zICh1aW50KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHZhbHVlSW5XZWkgKiA5NTAwMDAwMCAvIHRva2VuUHJpY2U7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc2V0UmVmZXJyYWwoYWRkcmVzcyBjbGllbnQsIGFkZHJlc3MgcmVmZXJyYWwpDQogICAgICAgIHB1YmxpYw0KICAgICAgICBvbmx5T3duZXINCiAgICB7DQogICAgICAgIHJlZmVycmFsc1tjbGllbnRdID0gcmVmZXJyYWw7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0UmVmZXJyYWwoYWRkcmVzcyBjbGllbnQpDQogICAgICAgIHB1YmxpYw0KICAgICAgICBjb25zdGFudA0KICAgICAgICByZXR1cm5zIChhZGRyZXNzKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHJlZmVycmFsc1tjbGllbnRdOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IFNldHMgdG9rZW4gcHJpY2UgKFRLTi9FVEgpIGluIFdlaS4NCiAgICAvLy8gQHBhcmFtIHZhbHVlSW5XZWkgTmV3IHZhbHVlLg0KICAgIGZ1bmN0aW9uIHNldFRva2VuUHJpY2UodWludCB2YWx1ZUluV2VpKQ0KICAgICAgICBwdWJsaWMNCiAgICAgICAgb25seU93bmVyDQogICAgew0KICAgICAgICB0b2tlblByaWNlID0gdmFsdWVJbldlaTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRUb2tlblByaWNlKCkNCiAgICAgICAgcHVibGljDQogICAgICAgIGNvbnN0YW50DQogICAgICAgIHJldHVybnMgKHVpbnQpDQogICAgew0KICAgICAgICByZXR1cm4gdG9rZW5QcmljZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjaGFuZ2VNdWx0aXNpZyhhZGRyZXNzIG5ld011bHRpc2lnKQ0KICAgICAgICBvbmx5T3duZXINCiAgICB7DQogICAgICAgIG11bHRpc2lnID0gbmV3TXVsdGlzaWc7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2hhbmdlRXRoQWRkcmVzcyhhZGRyZXNzIG5ld0V0aEFkZHJlc3MpDQogICAgICAgIG9ubHlPd25lcg0KICAgIHsNCiAgICAgICAgZXRoQWRkcmVzcyA9IG5ld0V0aEFkZHJlc3M7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgQ29udHJhY3QgY29uc3RydWN0b3IgZnVuY3Rpb24NCiAgICAvLy8gQHBhcmFtIF9ldGhBZGRyZXNzIEV0aGVyZXVtIGFkZHJlc3Mgb2YgdGhlIFRva2VuRnVuZC4NCiAgICAvLy8gQHBhcmFtIF9tdWx0aXNpZyBBZGRyZXNzIG9mIHRoZSBvd25lciBvZiBUb2tlbkZ1bmQuDQogICAgLy8vIEBwYXJhbSBfc3VwcG9ydEFkZHJlc3MgQWRkcmVzcyBvZiB0aGUgZGV2ZWxvcGVycyB0ZWFtLg0KICAgIC8vLyBAcGFyYW0gX3Rva2VuQWRkcmVzcyBBZGRyZXNzIG9mIHRoZSB0b2tlbiBjb250cmFjdC4NCiAgICBmdW5jdGlvbiBGdW5kKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9ldGhBZGRyZXNzLCBhZGRyZXNzIF9tdWx0aXNpZywgYWRkcmVzcyBfc3VwcG9ydEFkZHJlc3MsIGFkZHJlc3MgX3Rva2VuQWRkcmVzcykNCiAgICB7DQogICAgICAgIG93bmVyID0gX293bmVyOw0KICAgICAgICBldGhBZGRyZXNzID0gX2V0aEFkZHJlc3M7DQogICAgICAgIG11bHRpc2lnID0gX211bHRpc2lnOw0KICAgICAgICBzdXBwb3J0QWRkcmVzcyA9IF9zdXBwb3J0QWRkcmVzczsNCiAgICAgICAgdG9rZW5GdW5kID0gVG9rZW5GdW5kKF90b2tlbkFkZHJlc3MpOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IEZhbGxiYWNrIGZ1bmN0aW9uLiBDYWxscyBmdW5kKCkgZnVuY3Rpb24gdG8gY3JlYXRlIHRva2Vucy4NCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICAgICAgZnVuZCgpOw0KICAgIH0NCn0='