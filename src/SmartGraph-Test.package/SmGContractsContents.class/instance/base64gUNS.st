base 64 content
base64gUNS
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyoNCiAgICBDb3B5cmlnaHQgMjAxNywgU2hhdW4gU2h1bGwNCg0KICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5DQogICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkNCiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcg0KICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uDQoNCiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwNCiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZg0KICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUNCiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLg0KDQogICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UNCiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4NCiAqLw0KDQovLy8gQHRpdGxlIEdVTlMgQ3Jvd2RzYWxlIENvbnRyYWN0IC0gR2VvRm91bmRlcnMuY29tDQovLy8gQGF1dGhvciBTaGF1biBTaHVsbA0KLy8vIEBkZXYgU2ltcGxlIHNpbmdsZSBjcm93ZHNhbGUgY29udHJhY3QgZm9yIGZpeGVkIHN1cHBseSwgc2luZ2xlLXJhdGUsIA0KLy8vICBibG9jay1yYW5nZSBjcm93ZHNhbGUuIEFkZGl0aW9uYWwgdG9rZW4gY2xlYW51cCBmdW5jdGlvbmFsaXR5Lg0KDQoNCi8vLyBAZGV2IEdlbmVyaWMgRVJDMjAgVG9rZW4gSW50ZXJmYWNlLCB0b3RhbFN1cHBseSBtYWRlIHRvIHZhciBmb3IgY29tcGlsZXINCmNvbnRyYWN0IFRva2VuIHsNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7DQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCn0NCg0KDQovLy8gQGRldiBFUkMyMCBTdGFuZGFyZCBUb2tlbiBDb250cmFjdA0KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsNCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOw0KICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsNCiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOw0KICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsNCiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsNCiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogICAgfQ0KDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7DQp9DQoNCg0KLy8vIEBkZXYgUHJpbWFyeSBUb2tlbiBDb250cmFjdA0KY29udHJhY3QgR1VOUyBpcyBTdGFuZGFyZFRva2VuIHsNCg0KICAgIC8vIG1ldGFkYXRhDQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkdlb1VuaXRzIjsNCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJHVU5TIjsNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4Ow0KICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICIxLjAiOw0KDQogICAgLy8gY29udHJhY3RzDQogICAgYWRkcmVzcyBwdWJsaWMgaG9zdEFjY291bnQ7ICAgICAgIC8vIGFkZHJlc3MgdGhhdCBraWNrcyBvZmYgdGhlIGNyb3dkc2FsZQ0KICAgIGFkZHJlc3MgcHVibGljIGV0aEZ1bmREZXBvc2l0OyAgICAvLyBkZXBvc2l0IGFkZHJlc3MgZm9yIEVUSCBmb3IgR2VvRm91bmRlcnMNCiAgICBhZGRyZXNzIHB1YmxpYyBndW5zRnVuZERlcG9zaXQ7ICAgLy8gZGVwb3NpdCBhZGRyZXNzIGZvciBHZW9Gb3VuZGVycyBUb2tlbnMgLSBHZW9Vbml0cyAoR1VOUykNCg0KICAgIC8vIGNyb3dkc2FsZSBwYXJhbWV0ZXJzDQogICAgYm9vbCBwdWJsaWMgaXNGaW5hbGl6ZWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmFsc2UgdW50aWwgY3Jvd2RzYWxlIGZpbmFsaXplZA0KICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdTdGFydEJsb2NrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGJsb2NrDQogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ0VuZEJsb2NrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5kIGJsb2NrDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZ3Vuc0Z1bmQgPSAzNSAqICgxMCoqNikgKiAxMCoqZGVjaW1hbHM7ICAgICAgICAgICAgICAgLy8gMzVtIEdVTlMgcmVzZXJ2ZWQgZm9yIGRldnMNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbkV4Y2hhbmdlUmF0ZSA9IDEwMDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxMDAwIEdVTlMgcGVyIDEgRVRIDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5DcmVhdGlvbkNhcCA9ICAxMDAgKiAoMTAqKjYpICogMTAqKmRlY2ltYWxzOyAgICAgLy8gMTAwbSBHVU5TIGZpeGVkIHN1cHBseQ0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuQ3JlYXRpb25NaW4gPSAgMSAqICgxMCoqNikgKiAxMCoqZGVjaW1hbHM7ICAgICAgIC8vIDFtIG1pbmltdW0gbXVzdCBiZSBpbiBzdXBwbHkgKGxlZ2FjeSBjb2RlKQ0KDQogICAgLy8gZXZlbnRzDQogICAgZXZlbnQgTG9nUmVmdW5kKGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsgICAvLyBldmVudCBmb3IgcmVmdW5kDQogICAgZXZlbnQgQ3JlYXRlR1VOUyhhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7ICAvLyBldmVudCBmb3IgdG9rZW4gY3JlYXRpb24NCg0KICAgIC8vIHNhZmVseSBhZGQNCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQyNTYgeCwgdWludDI1NiB5KSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsNCiAgICAgICAgdWludDI1NiB6ID0geCArIHk7DQogICAgICAgIGFzc2VydCgoeiA+PSB4KSAmJiAoeiA+PSB5KSk7DQogICAgICAgIHJldHVybiB6Ow0KICAgIH0NCg0KICAgIC8vIHNhZmVseSBzdWJ0cmFjdA0KICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7DQogICAgICBhc3NlcnQoeCA+PSB5KTsNCiAgICAgIHVpbnQyNTYgeiA9IHggLSB5Ow0KICAgICAgcmV0dXJuIHo7DQogICAgfQ0KDQogICAgLy8gc2FmZWx5IG11bHRpcGx5DQogICAgZnVuY3Rpb24gc2FmZU11bHQodWludDI1NiB4LCB1aW50MjU2IHkpIGludGVybmFsIHJldHVybnModWludDI1Nikgew0KICAgICAgdWludDI1NiB6ID0geCAqIHk7DQogICAgICBhc3NlcnQoKHggPT0gMCl8fCh6L3ggPT0geSkpOw0KICAgICAgcmV0dXJuIHo7DQogICAgfQ0KDQogICAgLy8gY29uc3RydWN0b3INCiAgICBmdW5jdGlvbiBHVU5TKCkge30NCg0KICAgIC8vIGluaXRpYWxpemUgZGVwbG95ZWQgY29udHJhY3QNCiAgICBmdW5jdGlvbiBpbml0aWFsaXplKA0KICAgICAgICBhZGRyZXNzIF9ldGhGdW5kRGVwb3NpdCwNCiAgICAgICAgYWRkcmVzcyBfZ3Vuc0Z1bmREZXBvc2l0LA0KICAgICAgICB1aW50MjU2IF9mdW5kaW5nU3RhcnRCbG9jaywNCiAgICAgICAgdWludDI1NiBfZnVuZGluZ0VuZEJsb2NrDQogICAgKSBwdWJsaWMgew0KICAgICAgICByZXF1aXJlKGFkZHJlc3MoaG9zdEFjY291bnQpID09IDB4MCk7ICAgICAvLyBvbmUgdGltZSBpbml0aWFsaXplDQogICAgICAgIGhvc3RBY2NvdW50ID0gbXNnLnNlbmRlcjsgICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBpbml0aWFsaXplciB2YXINCiAgICAgICAgaXNGaW5hbGl6ZWQgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgLy8gY3Jvd2RzYWxlIHN0YXRlDQogICAgICAgIGV0aEZ1bmREZXBvc2l0ID0gX2V0aEZ1bmREZXBvc2l0OyAgICAgICAgIC8vIHNldCBmaW5hbCBFVEggZGVwb3NpdCBhZGRyZXNzDQogICAgICAgIGd1bnNGdW5kRGVwb3NpdCA9IF9ndW5zRnVuZERlcG9zaXQ7ICAgICAgIC8vIHNldCBmaW5hbCBHVU5TIGRldiBkZXBvc2l0IGFkZHJlc3MNCiAgICAgICAgZnVuZGluZ1N0YXJ0QmxvY2sgPSBfZnVuZGluZ1N0YXJ0QmxvY2s7ICAgLy8gYmxvY2sgbnVtYmVyIHRvIHN0YXJ0IGNyb3dkc2FsZQ0KICAgICAgICBmdW5kaW5nRW5kQmxvY2sgPSBfZnVuZGluZ0VuZEJsb2NrOyAgICAgICAvLyBibG9jayBudW1iZXIgdG8gZW5kIGNyb3dkc2FsZQ0KICAgICAgICB0b3RhbFN1cHBseSA9IGd1bnNGdW5kOyAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdG90YWxTdXBwbHkgdG8gcmVzZXJ2ZQ0KICAgICAgICBiYWxhbmNlc1tndW5zRnVuZERlcG9zaXRdID0gZ3Vuc0Z1bmQ7ICAgICAvLyBkZXBvc2l0IHJlc2VydmUgdG9rZW5zIHRvIGRldiBhZGRyZXNzDQogICAgICAgIENyZWF0ZUdVTlMoZ3Vuc0Z1bmREZXBvc2l0LCBndW5zRnVuZCk7ICAgIC8vIGxvZ3MgdG9rZW4gY3JlYXRpb24gZXZlbnQNCiAgICB9DQoNCiAgICAvLyBlbmFibGUgcGVvcGxlIHRvIHBheSBjb250cmFjdCBkaXJlY3RseQ0KICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsNCiAgICAgICAgcmVxdWlyZShhZGRyZXNzKGhvc3RBY2NvdW50KSAhPSAweDApOyAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvbiBjaGVjaw0KDQogICAgICAgIGlmIChpc0ZpbmFsaXplZCkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3Jvd2RzYWxlIHN0YXRlIGNoZWNrDQogICAgICAgIGlmIChibG9jay5udW1iZXIgPCBmdW5kaW5nU3RhcnRCbG9jaykgdGhyb3c7ICAgICAgICAgICAgICAgLy8gd2l0aGluIHN0YXJ0IGJsb2NrIGNoZWNrDQogICAgICAgIGlmIChibG9jay5udW1iZXIgPiBmdW5kaW5nRW5kQmxvY2spIHRocm93OyAgICAgICAgICAgICAgICAgLy8gd2l0aGluIGVuZCBibG9jayBjaGVjaw0KICAgICAgICBpZiAobXNnLnZhbHVlID09IDApIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBlcnNvbiBhY3R1YWxseSBzZW50IEVUSCBjaGVjaw0KDQogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gc2FmZU11bHQobXNnLnZhbHVlLCB0b2tlbkV4Y2hhbmdlUmF0ZSk7ICAgLy8gY2FsY3VsYXRlIG51bSBvZiB0b2tlbnMgcHVyY2hhc2VkDQogICAgICAgIHVpbnQyNTYgY2hlY2tlZFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIHRva2Vucyk7ICAgICAgLy8gY2FsY3VsYXRlIHRvdGFsIHN1cHBseSBpZiBwdXJjaGFzZWQNCg0KICAgICAgICBpZiAodG9rZW5DcmVhdGlvbkNhcCA8IGNoZWNrZWRTdXBwbHkpIHRocm93OyAgICAgICAgICAgICAgIC8vIGlmIGV4Y2VlZGluZyB0b2tlbiBtYXgsIGNhbmNlbCBvcmRlcg0KDQogICAgICAgIHRvdGFsU3VwcGx5ID0gY2hlY2tlZFN1cHBseTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRvdGFsU3VwcGx5DQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IHRva2VuczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRva2VuIGJhbGFuY2UgZm9yIHBheWVyDQogICAgICAgIENyZWF0ZUdVTlMobXNnLnNlbmRlciwgdG9rZW5zKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9ncyB0b2tlbiBjcmVhdGlvbiBldmVudA0KICAgIH0NCg0KICAgIC8vIGdlbmVyaWMgZnVuY3Rpb24gdG8gcGF5IHRoaXMgY29udHJhY3QNCiAgICBmdW5jdGlvbiBlbWVyZ2VuY3lQYXkoKSBleHRlcm5hbCBwYXlhYmxlIHt9DQoNCiAgICAvLyB3cmFwIHVwIGNyb3dkc2FsZSBhZnRlciBlbmQgYmxvY2sNCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIGV4dGVybmFsIHsNCiAgICAgICAgLy9pZiAoaXNGaW5hbGl6ZWQpIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgY3Jvd2RzYWxlIHN0YXRlIGlzIGZhbHNlDQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGV0aEZ1bmREZXBvc2l0KSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGNhbGxlciBpcyBFVEggZGVwb3NpdCBhZGRyZXNzDQogICAgICAgIC8vaWYgKHRvdGFsU3VwcGx5IDwgdG9rZW5DcmVhdGlvbk1pbikgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIG1pbmltdW0gaXMgbWV0DQogICAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ0VuZEJsb2NrICYmIHRvdGFsU3VwcGx5IDwgdG9rZW5DcmVhdGlvbkNhcCkgdGhyb3c7ICAgIC8vIGNoZWNrIHBhc3QgZW5kIGJsb2NrIHVubGVzcyBhdCBjcmVhdGlvbiBjYXANCg0KICAgICAgICBpZiAoIWV0aEZ1bmREZXBvc2l0LnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIGFjY291bnQgYmFsYW5jZSB0byBFVEggZGVwb3NpdCBhZGRyZXNzDQogICAgICAgIA0KICAgICAgICB1aW50MjU2IHJlbWFpbmluZ1N1cHBseSA9IHNhZmVTdWJ0cmFjdCh0b2tlbkNyZWF0aW9uQ2FwLCB0b3RhbFN1cHBseSk7ICAgICAgICAgICAvLyBjYWxjdWxhdGUgcmVtYWluaW5nIHRva2VucyB0byByZWFjaCBmaXhlZCBzdXBwbHkNCiAgICAgICAgaWYgKHJlbWFpbmluZ1N1cHBseSA+IDApIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVtYWluaW5nIHN1cHBseSBsZWZ0DQogICAgICAgICAgICB1aW50MjU2IHVwZGF0ZWRTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCByZW1haW5pbmdTdXBwbHkpOyAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0b3RhbCBzdXBwbHkgd2l0aCByZW1haW5pbmcgc3VwcGx5DQogICAgICAgICAgICB0b3RhbFN1cHBseSA9IHVwZGF0ZWRTdXBwbHk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0b3RhbFN1cHBseQ0KICAgICAgICAgICAgYmFsYW5jZXNbZ3Vuc0Z1bmREZXBvc2l0XSArPSByZW1haW5pbmdTdXBwbHk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYW51YWxseSB1cGRhdGUgZGV2cyB0b2tlbiBiYWxhbmNlDQogICAgICAgICAgICBDcmVhdGVHVU5TKGd1bnNGdW5kRGVwb3NpdCwgcmVtYWluaW5nU3VwcGx5KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvZ3MgdG9rZW4gY3JlYXRpb24gZXZlbnQNCiAgICAgICAgfQ0KDQogICAgICAgIGlzRmluYWxpemVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjcm93ZHNhbGUgc3RhdGUgdG8gdHJ1ZQ0KICAgIH0NCg0KICAgIC8vIGxlZ2FjeSBjb2RlIHRvIGVuYWJsZSByZWZ1bmRzIGlmIG1pbiB0b2tlbiBzdXBwbHkgbm90IG1ldCAobm90IHBvc3NpYmxlIHdpdGggZml4ZWQgc3VwcGx5KQ0KICAgIGZ1bmN0aW9uIHJlZnVuZCgpIGV4dGVybmFsIHsNCiAgICAgICAgaWYgKGlzRmluYWxpemVkKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgY3Jvd2RzYWxlIHN0YXRlIGlzIGZhbHNlDQogICAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ0VuZEJsb2NrKSB0aHJvdzsgICAgICAgICAgIC8vIGNoZWNrIGNyb3dkc2FsZSBzdGlsbCBydW5uaW5nDQogICAgICAgIGlmICh0b3RhbFN1cHBseSA+PSB0b2tlbkNyZWF0aW9uTWluKSB0aHJvdzsgICAgICAgICAgIC8vIGNoZWNrIGNyZWF0aW9uIG1pbiB3YXMgbm90IG1ldA0KICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBndW5zRnVuZERlcG9zaXQpIHRocm93OyAgICAgICAgICAgICAvLyBkbyBub3QgYWxsb3cgZGV2IHJlZnVuZA0KDQogICAgICAgIHVpbnQyNTYgZ3Vuc1ZhbCA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOyAgICAgICAgICAgICAgIC8vIGdldCBjYWxsZXJzIHRva2VuIGJhbGFuY2UNCiAgICAgICAgaWYgKGd1bnNWYWwgPT0gMCkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgY2FsbGVyIGhhcyB0b2tlbnMNCg0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY2FsbGVycyB0b2tlbnMgdG8gemVybw0KICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVTdWJ0cmFjdCh0b3RhbFN1cHBseSwgZ3Vuc1ZhbCk7ICAgICAvLyBzdWJ0cmFjdCBjYWxsZXJzIGJhbGFuY2UgZnJvbSB0b3RhbCBzdXBwbHkNCiAgICAgICAgdWludDI1NiBldGhWYWwgPSBndW5zVmFsIC8gdG9rZW5FeGNoYW5nZVJhdGU7ICAgICAgICAgLy8gY2FsY3VsYXRlIEVUSCBmcm9tIHRva2VuIGV4Y2hhbmdlIHJhdGUNCiAgICAgICAgTG9nUmVmdW5kKG1zZy5zZW5kZXIsIGV0aFZhbCk7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9nIHJlZnVuZCBldmVudA0KDQogICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKGV0aFZhbCkpIHRocm93OyAgICAgICAgICAgICAgICAgIC8vIHNlbmQgY2FsbGVyIHRoZWlyIHJlZnVuZA0KICAgIH0NCg0KICAgIC8vIGNsZWFuIHVwIG1pc3Rha2VuIHRva2VucyBzZW50IHRvIHRoaXMgY29udHJhY3QNCiAgICAvLyBhbHNvIGNoZWNrIGVtcHR5IGFkZHJlc3MgZm9yIHRva2VucyBhbmQgY2xlYW4gb3V0DQogICAgLy8gKEdVTlMgb25seSwgZG9lcyBub3Qgc3VwcG9ydCAzcmQgcGFydHkgdG9rZW5zKQ0KICAgIGZ1bmN0aW9uIG1pc3Rha2VuVG9rZW5zKCkgZXh0ZXJuYWwgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBldGhGdW5kRGVwb3NpdCkgdGhyb3c7ICAgICAgICAgICAgICAgIC8vIGNoZWNrIGNhbGxlciBpcyBFVEggZGVwb3NpdCBhZGRyZXNzDQogICAgICAgIA0KICAgICAgICBpZiAoYmFsYW5jZXNbdGhpc10gPiAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNvbnRyYWN0IGhhcyB0b2tlbnMNCiAgICAgICAgICAgIFRyYW5zZmVyKHRoaXMsIGd1bnNGdW5kRGVwb3NpdCwgYmFsYW5jZXNbdGhpc10pOyAgICAvLyBsb2cgdHJhbnNmZXIgZXZlbnQNCiAgICAgICAgICAgIGJhbGFuY2VzW2d1bnNGdW5kRGVwb3NpdF0gKz0gYmFsYW5jZXNbdGhpc107ICAgICAgICAvLyBzZW5kIHRva2VucyB0byBkZXYgdG9rZW5zIGFkZHJlc3MNCiAgICAgICAgICAgIGJhbGFuY2VzW3RoaXNdID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB6ZXJvIG91dCBjb250cmFjdCB0b2tlbiBiYWxhbmNlDQogICAgICAgIH0NCg0KICAgICAgICBpZiAoYmFsYW5jZXNbMHgwXSA+IDApIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVtcHR5IGFkZHJlc3MgaGFzIHRva2Vucw0KICAgICAgICAgICAgVHJhbnNmZXIoMHgwLCBndW5zRnVuZERlcG9zaXQsIGJhbGFuY2VzWzB4MF0pOyAgICAgIC8vIGxvZyB0cmFuc2ZlciBldmVudA0KICAgICAgICAgICAgYmFsYW5jZXNbZ3Vuc0Z1bmREZXBvc2l0XSArPSBiYWxhbmNlc1sweDBdOyAgICAgICAgIC8vIHNlbmQgdG9rZW5zIHRvIGRldiB0b2tlbnMgYWRkcmVzcw0KICAgICAgICAgICAgYmFsYW5jZXNbMHgwXSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHplcm8gb3V0IGVtcHR5IGFkZHJlc3MgdG9rZW4gYmFsYW5jZQ0KICAgICAgICB9DQogICAgfQ0KDQp9'