base 64 content
base64gamePlayerCoin
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQoNCi8qKg0KICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcw0KICogQnkgT3BlblplcHBlbGluOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy9TYWZlTWF0aC5zb2wNCiAqLw0KbGlicmFyeSBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOw0KICAgIGlmKCEoYSA9PSAwIHx8IGMgLyBhID09IGIpKSB0aHJvdzsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMA0KICAgIHVpbnQyNTYgYyA9IGEgLyBiOw0KICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkDQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICBpZighKGIgPD0gYSkpIHRocm93Ow0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKyBiOw0KICAgIGlmKCEoYyA+PSBhKSkgdGhyb3c7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQp9DQoNCmNvbnRyYWN0IENvbnRyYWN0UmVjZWl2ZXJ7DQogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgIF9kYXRhKSBleHRlcm5hbDsNCn0NCg0KDQovL0Jhc2ljIEVSQzIzIHRva2VuLCBiYWNrd2FyZCBjb21wYXRpYmxlIHdpdGggRVJDMjAgdHJhbnNmZXIgZnVuY3Rpb24uDQovL0Jhc2VkIGluIHBhcnQgb24gY29kZSBieSBvcGVuLXplcHBlbGluOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5LmdpdA0KY29udHJhY3QgRVJDMjNCYXNpY1Rva2VuIHsNCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7DQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7DQogICAgDQoNCiAgICAvKg0KICAgICAgICogRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2sgIA0KICAgICAgKi8NCiAgICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsNCiAgICAgICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7DQogICAgICAgICAgIHRocm93Ow0KICAgICAgICAgfQ0KICAgICAgICAgXzsNCiAgICAgIH0NCg0KDQogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgIF9kYXRhKSBleHRlcm5hbCB7DQogICAgICAgIF9mcm9tOw0KICAgICAgICBfdmFsdWU7DQogICAgICAgIF9kYXRhOw0KICAgICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoNCiAgICAgICAgLy9TdGFuZGFyZCBFUkMyMyB0cmFuc2ZlciBmdW5jdGlvbg0KDQogICAgICAgIGlmKGlzQ29udHJhY3QoX3RvKSkgew0KICAgICAgICAgICAgdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBfZGF0YSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgX2RhdGEpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgew0KDQogICAgICAgIC8vc3RhbmRhcmQgZnVuY3Rpb24gdHJhbnNmZXIgc2ltaWxhciB0byBFUkMyMCB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhDQogICAgICAgIC8vYWRkZWQgZHVlIHRvIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnMNCg0KICAgICAgICBieXRlcyBtZW1vcnkgZW1wdHk7DQogICAgICAgIGlmKGlzQ29udHJhY3QoX3RvKSkgew0KICAgICAgICAgICAgdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBlbXB0eSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgZW1wdHkpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0FkZHJlc3MoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgIGludGVybmFsIHsNCiAgICAgICAgX2RhdGE7DQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7DQogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9Db250cmFjdChhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSAgaW50ZXJuYWwgew0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YiggX3ZhbHVlKTsNCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKCBfdmFsdWUpOw0KICAgICAgICBDb250cmFjdFJlY2VpdmVyIHJlY2VpdmVyID0gQ29udHJhY3RSZWNlaXZlcihfdG8pOw0KICAgICAgICByZWNlaXZlci50b2tlbkZhbGxiYWNrKG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOw0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7ICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICAgIH0NCg0KICAgIC8vYXNzZW1ibGUgdGhlIGdpdmVuIGFkZHJlc3MgYnl0ZWNvZGUuIElmIGJ5dGVjb2RlIGV4aXN0cyB0aGVuIHRoZSBfYWRkciBpcyBhIGNvbnRyYWN0Lg0KICAgIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgcmV0dXJucyAoYm9vbCBpc19jb250cmFjdCkgew0KICAgICAgICAgICAgX2FkZHI7DQogICAgICAgICAgdWludDI1NiBsZW5ndGg7DQogICAgICAgICAgYXNzZW1ibHkgew0KICAgICAgICAgICAgICAvL3JldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBjb2RlIG9uIHRhcmdldCBhZGRyZXNzLCB0aGlzIG5lZWRzIGFzc2VtYmx5DQogICAgICAgICAgICAgIGxlbmd0aCA6PSBleHRjb2Rlc2l6ZShfYWRkcikNCiAgICAgICAgICB9DQogICAgICAgICAgaWYobGVuZ3RoPjApIHsNCiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgfQ0KICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KICAgIH0NCn0NCg0KY29udHJhY3QgRVJDMjNTdGFuZGFyZFRva2VuIGlzIEVSQzIzQmFzaWNUb2tlbiB7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOw0KICAgIGV2ZW50IEFwcHJvdmFsIChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsNCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsNCiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsNCg0KICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQNCiAgICAgICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93Ow0KDQogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7DQogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsNCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7DQoNCiAgICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2ANCiAgICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QNCiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6DQogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQ0KICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93Ow0KDQogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7DQogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOw0KICAgIH0NCg0KfQ0KDQoNCg0KDQovLyBCYXNlZCBpbiBwYXJ0IG9uIGNvZGUgYnkgT3Blbi1aZXBwZWxpbjogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS5naXQNCi8vIEJhc2VkIGluIHBhcnQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wNCmNvbnRyYWN0IEdhbWVQbGF5ZXJDb2luIGlzIEVSQzIzU3RhbmRhcmRUb2tlbiB7DQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkdhbWUgUGxheWVyIENvaW4iOw0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkdQQyI7DQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsNCiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZz1hZGRyZXNzKDB4MDAzZjY5Zjg1YmI5N0UyMjE3OTVmNGMyNzA4RUEwMDRDNzMzNzhGYSk7IC8vbXVsdGlzaWcgd2FsbGV0LCB0byB3aGljaCBhbGwgY29udHJpYnV0aW9ucyB3aWxsIGJlIHNlbnQNCiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGF0aW9uOyAvL293bmVyIGFkZHJlc3MNCiAgICBhZGRyZXNzIHB1YmxpYyBjYW5kaWRhdGU7IC8vb3duZXIgY2FuZGlkYXRlIGluIDItcGhhc2Ugb3duZXJzaGlwIHRyYW5zZmVyDQogICAgdWludDI1NiBwdWJsaWMgaG91cl9ibG9ja3MgPSAyMTI7IC8vIGV2ZXJ5IGhvdXIgYmxvY2tzIA0KICAgIHVpbnQyNTYgcHVibGljIGRheV9ibG9ja3MgPSBob3VyX2Jsb2NrcyAqIDI0IDsgLy8gZXZlcnkgZGF5IGJsb2NrcyANCg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgY29udHJpYnV0aW9uczsgLy9rZWVwcyB0cmFjayBvZiBldGhlciBjb250cmlidXRpb25zIGluIFdlaSBvZiBlYWNoIGNvbnRyaWJ1dG9yIGFkZHJlc3MNCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydEJsb2NrID0gNDA0NzUwMDsgLy9wcmUtY3Jvd2RzYWxlIHN0YXJ0IGJsb2NrIA0KICAgIHVpbnQyNTYgcHVibGljIHByZUVuZEJsb2NrID0gc3RhcnRCbG9jayArIGRheV9ibG9ja3MgKiA3OyAvLyB3ZWVrIDEgcHJlLWNyb3dkc2FsZSBlbmQgYmxvY2sNCiAgICB1aW50MjU2IHB1YmxpYyBwaGFzZTFTdGFydEJsb2NrID0gcHJlRW5kQmxvY2s7IC8vQ3Jvd2RzYWxlIHN0YXJ0IGJsb2NrDQogICAgdWludDI1NiBwdWJsaWMgcGhhc2UxRW5kQmxvY2sgPSBwaGFzZTFTdGFydEJsb2NrICsgZGF5X2Jsb2NrcyAqIDc7IC8vV2VlayAyIGVuZCBibG9jayAoZXN0aW1hdGUpDQogICAgdWludDI1NiBwdWJsaWMgcGhhc2UyRW5kQmxvY2sgPSBwaGFzZTFFbmRCbG9jayArIGRheV9ibG9ja3MgKiA3OyAvL1dlZWsgMyBlbmQgYmxvY2sgKGVzdGltYXRlKQ0KICAgIHVpbnQyNTYgcHVibGljIHBoYXNlM0VuZEJsb2NrID0gcGhhc2UyRW5kQmxvY2sgKyAgZGF5X2Jsb2NrcyAqIDcgOyAvL1dlZWsgNCBlbmQgYmxvY2sgKGVzdGltYXRlKQ0KICAgIHVpbnQyNTYgcHVibGljIGVuZEJsb2NrID0gc3RhcnRCbG9jayArIGRheV9ibG9ja3MgKiAxODQ7IC8vIHdob2xlIGNyb3dkc2FsZSBlbmQgYmxvY2sgKDE4NCBkYXlzICwgNiBtb250aCkNCiAgICB1aW50MjU2IHB1YmxpYyBjcm93ZHNhbGVUb2tlblN1cHBseSA9IDcwICogKDEwKio2KSAqICgxMCoqMTgpOyAvL0Ftb3VudCBvZiB0b2tlbnMgZm9yIHNhbGUgZHVyaW5nIGNyb3dkc2FsZQ0KICAgIHVpbnQyNTYgcHVibGljIGJvdW50eVRva2VuU3VwcGx5ID0gMTAgKiAoMTAqKjYpICogKDEwKioxOCk7IC8vVG9rZW5zIGZvciBib3VudHkNCiAgICB1aW50MjU2IHB1YmxpYyBmb3VuZGF0aW9uVG9rZW5TdXBwbHkgPSAyMCAqICgxMCoqNikgKiAoMTAqKjE4KTsgLy9Ub2tlbnMgZm9yIEdhbWVwbGF5ZXJjb2luIHRlYW0NCiAgICB1aW50MjU2IHB1YmxpYyBjcm93ZHNhbGVUb2tlblNvbGQgPSAwOyAvL0tlZXBzIHRyYWNrIG9mIHRoZSBhbW91bnQgb2YgdG9rZW5zIHNvbGQgZHVyaW5nIHRoZSBjcm93ZHNhbGUNCiAgICB1aW50MjU2IHB1YmxpYyBwcmVzYWxlRXRoZXJSYWlzZWQgPSAwOyAvL0tlZXBzIHRyYWNrIG9mIHRoZSBFdGhlciByYWlzZWQgZHVyaW5nIHRoZSBjcm93ZHNhbGUNCiAgICANCiAgICBib29sIHB1YmxpYyBoYWx0ZWQgPSBmYWxzZTsgLy9IYWx0IGNyb3dkc2FsZSBpbiBlbWVyZ2VuY3kNCiAgICBldmVudCBIYWx0KCk7IC8vSGFsdCBldmVudA0KICAgIGV2ZW50IFVuaGFsdCgpOyAvL1VuaGFsdCBldmVudA0KDQogICAgbW9kaWZpZXIgb25seUZvdW5kYXRpb24oKSB7DQogICAgICAgIC8vb25seSBkbyBpZiBjYWxsIGlzIGZyb20gb3duZXIgbW9kaWZpZXINCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gZm91bmRhdGlvbikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQoNCiAgICBtb2RpZmllciB3aGVuTm90SGFsdGVkKCkgew0KICAgICAgICAvLyBvbmx5IGRvIHdoZW4gbm90IGhhbHRlZCBtb2RpZmllcg0KICAgICAgICBpZiAoaGFsdGVkKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvL0NvbnN0cnVjdG9yOiBzZXQgbXVsdGlzaWcgY3Jvd2RzYWxlIHJlY2lwaWVudCB3YWxsZXQgYWRkcmVzcyBhbmQgZnVuZCB0aGUgZm91bmRhdGlvbg0KICAgIC8vSW5pdGlhbGl6ZSB0b3RhbCBzdXBwbHkgYW5kIGFsbG9jYXRlIGVjb3N5c3RlbSAmIGZvdW5kYXRpb24gdG9rZW5zDQogIAlmdW5jdGlvbiBHYW1lUGxheWVyQ29pbigpIHsNCiAgICAgICAgZm91bmRhdGlvbiA9IG1zZy5zZW5kZXI7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gYm91bnR5VG9rZW5TdXBwbHkuYWRkKGZvdW5kYXRpb25Ub2tlblN1cHBseSk7DQogICAgICAgIGJhbGFuY2VzW2ZvdW5kYXRpb25dID0gdG90YWxTdXBwbHk7DQogIAl9DQoNCiAgICAvL0ZhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gcmVjZWl2aW5nIEV0aGVyLg0KICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7DQogICAgICAgIGJ1eSgpOw0KICAgIH0NCg0KDQogICAgLy9IYWx0IElDTyBpbiBjYXNlIG9mIGVtZXJnZW5jeS4NCiAgICBmdW5jdGlvbiBoYWx0KCkgb25seUZvdW5kYXRpb24gew0KICAgICAgICBoYWx0ZWQgPSB0cnVlOw0KICAgICAgICBIYWx0KCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdW5oYWx0KCkgb25seUZvdW5kYXRpb24gew0KICAgICAgICBoYWx0ZWQgPSBmYWxzZTsNCiAgICAgICAgVW5oYWx0KCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYnV5KCkgcGF5YWJsZSB7DQogICAgICAgIGJ1eVJlY2lwaWVudChtc2cuc2VuZGVyKTsNCiAgICB9DQoNCiAgICAvL0FsbG93IGFkZHJlc3NlcyB0byBidXkgdG9rZW4gZm9yIGFub3RoZXIgYWNjb3VudA0KICAgIGZ1bmN0aW9uIGJ1eVJlY2lwaWVudChhZGRyZXNzIHJlY2lwaWVudCkgcHVibGljIHBheWFibGUgd2hlbk5vdEhhbHRlZCB7DQogICAgICAgIGlmKG1zZy52YWx1ZSA9PSAwKSB0aHJvdzsNCiAgICAgICAgaWYoIShwcmVDcm93ZHNhbGVPbigpfHxjcm93ZHNhbGVPbigpKSkgdGhyb3c7Ly9vbmx5IGFsbG93cyBkdXJpbmcgcHJlc2FsZS9jcm93ZHNhbGUNCiAgICAgICAgaWYoY29udHJpYnV0aW9uc1tyZWNpcGllbnRdLmFkZChtc2cudmFsdWUpPnBlckFkZHJlc3NDYXAoKSkgdGhyb3c7Ly9wZXIgYWRkcmVzcyBjYXANCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBtc2cudmFsdWUubXVsKHJldHVyblJhdGUoKSk7IC8vZGVjaW1hbHM9MTgsIHNvIG5vIG5lZWQgdG8gYWRqdXN0IGZvciB1bml0DQogICAgICAgIGlmKGNyb3dkc2FsZVRva2VuU29sZC5hZGQodG9rZW5zKT5jcm93ZHNhbGVUb2tlblN1cHBseSkgdGhyb3c7Ly9tYXggc3VwcGx5IGxpbWl0DQoNCiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IGJhbGFuY2VzW3JlY2lwaWVudF0uYWRkKHRva2Vucyk7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKHRva2Vucyk7DQogICAgICAgIHByZXNhbGVFdGhlclJhaXNlZCA9IHByZXNhbGVFdGhlclJhaXNlZC5hZGQobXNnLnZhbHVlKTsNCiAgICAgICAgY29udHJpYnV0aW9uc1tyZWNpcGllbnRdID0gY29udHJpYnV0aW9uc1tyZWNpcGllbnRdLmFkZChtc2cudmFsdWUpOw0KICAgICAgICBjcm93ZHNhbGVUb2tlblNvbGQgPSBjcm93ZHNhbGVUb2tlblNvbGQuYWRkKHRva2Vucyk7DQogICAgICAgIGlmKGNyb3dkc2FsZVRva2VuU29sZCA9PSBjcm93ZHNhbGVUb2tlblN1cHBseSApew0KICAgICAgICAgICAgLy9JZiBjcm93ZHNhbGUgdG9rZW4gc29sZCBvdXQsIGVuZCBjcm93ZHNhbGUNCiAgICAgICAgICAgIGlmKGJsb2NrLm51bWJlciA8IHByZUVuZEJsb2NrKSB7DQogICAgICAgICAgICAgICAgcHJlRW5kQmxvY2sgPSBibG9jay5udW1iZXI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbmRCbG9jayA9IGJsb2NrLm51bWJlcjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIW11bHRpc2lnLnNlbmQobXNnLnZhbHVlKSkgdGhyb3c7IC8vaW1tZWRpYXRlbHkgc2VuZCBFdGhlciB0byBtdWx0aXNpZyBhZGRyZXNzDQogICAgICAgIFRyYW5zZmVyKHRoaXMsIHJlY2lwaWVudCwgdG9rZW5zKTsNCiAgICB9DQoNCiAgICAvL0J1cm5zIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBmcm9tIHRoZSBmb3VuZGF0aW9uDQogICAgLy9Vc2VkIHRvIGJ1cm4gdW5zcGVudCBmdW5kcyBpbiBmb3VuZGF0aW9uIERBTw0KICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIGV4dGVybmFsIG9ubHlGb3VuZGF0aW9uIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsNCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsNCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgYWRkcmVzcygwKSwgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8yLXBoYXNlIG93bmVyc2hpcCB0cmFuc2ZlcjsNCiAgICAvL3ByZXZlbnQgdHJhbnNmZXJyaW5nIG93bmVyc2hpcCB0byBub24tZXhpc3RlbnQgYWRkcmVzc2VzIGJ5IGFjY2lkZW50Lg0KICAgIGZ1bmN0aW9uIHByb3Bvc2VGb3VuZGF0aW9uVHJhbnNmZXIoYWRkcmVzcyBuZXdGb3VuZGF0aW9uKSBleHRlcm5hbCBvbmx5Rm91bmRhdGlvbiB7DQogICAgICAgIC8vcHJvcG9zZSBuZXcgb3duZXINCiAgICAgICAgY2FuZGlkYXRlID0gbmV3Rm91bmRhdGlvbjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjYW5jZWxGb3VuZGF0aW9uVHJhbnNmZXIoKSBleHRlcm5hbCBvbmx5Rm91bmRhdGlvbiB7DQogICAgICAgIGNhbmRpZGF0ZSA9IGFkZHJlc3MoMCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWNjZXB0Rm91bmRhdGlvblRyYW5zZmVyKCkgZXh0ZXJuYWwgew0KICAgICAgICAvL25ldyBvd25lciBhY2NlcHQgdHJhbnNmZXIgdG8gY29tcGxldGUgdHJhbnNmZXINCiAgICAgICAgaWYobXNnLnNlbmRlciAhPSBjYW5kaWRhdGUpIHRocm93Ow0KICAgICAgICBmb3VuZGF0aW9uID0gY2FuZGlkYXRlOw0KICAgICAgICBjYW5kaWRhdGUgPSBhZGRyZXNzKDApOw0KICAgIH0NCg0KICAgIC8vQWxsb3cgdG8gY2hhbmdlIHRoZSByZWNpcGllbnQgbXVsdGlzaWcgYWRkcmVzcw0KICAgIGZ1bmN0aW9uIHNldE11bHRpc2lnKGFkZHJlc3MgYWRkcikgZXh0ZXJuYWwgb25seUZvdW5kYXRpb24gew0KICAgICAgCWlmIChhZGRyID09IGFkZHJlc3MoMCkpIHRocm93Ow0KICAgICAgCW11bHRpc2lnID0gYWRkcjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUsIF9kYXRhKTsNCiAgICB9DQoNCgkgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljICB7DQogICAgICAgIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsNCgkgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyAgew0KICAgICAgICBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICB9DQoNCiAgICAvL1JldHVybiByYXRlIG9mIHRva2VuIGFnYWluc3QgZXRoZXIuDQogICAgZnVuY3Rpb24gcmV0dXJuUmF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsNCiAgICAgICAgaWYgKGJsb2NrLm51bWJlcj49c3RhcnRCbG9jayAmJiBibG9jay5udW1iZXI8PXByZUVuZEJsb2NrKSByZXR1cm4gMzAwMDsgLy8gV2VlayAxIFByZS1jcm93ZHNhbGUgLCA1MCUgYm91bnR5DQogICAgICAgIGlmIChibG9jay5udW1iZXI+PXBoYXNlMVN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1waGFzZTFFbmRCbG9jaykgcmV0dXJuIDI4MDA7IC8vV2VlayAyIENyb3dkc2FsZSBwaGFzZTEgNDAlIGJvdW50eQ0KICAgICAgICBpZiAoYmxvY2subnVtYmVyPnBoYXNlMUVuZEJsb2NrICYmIGJsb2NrLm51bWJlcjw9cGhhc2UyRW5kQmxvY2spIHJldHVybiAyNjAwOyAvL1dlZWsgMyBQaGFzZTIgMzAlIGJvdW50eQ0KICAgICAgICBpZiAoYmxvY2subnVtYmVyPnBoYXNlMkVuZEJsb2NrICYmIGJsb2NrLm51bWJlcjw9cGhhc2UzRW5kQmxvY2spIHJldHVybiAyNDAwOyAvL1dlZWsgNCBQaGFzZTMgMjAlIGJvdW50eQ0KICAgICAgICByZXR1cm4gMjAwMDsvLyByZXN0IGRheXMgLCBub3JtYWwgDQogICAgfQ0KDQogICAgLy9wZXIgYWRkcmVzcyBjYXAgaW4gV2VpOiAxMDAwIGV0aGVyICsgMSUgb2YgZXRoZXIgcmVjZWl2ZWQgYXQgdGhlIGdpdmVuIHRpbWUuDQogICAgZnVuY3Rpb24gcGVyQWRkcmVzc0NhcCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsNCiAgICAgICAgdWludDI1NiBiYXNlbGluZSA9IDEwMDAgKiAoMTAqKjE4KTsNCiAgICAgICAgcmV0dXJuIGJhc2VsaW5lLmFkZChwcmVzYWxlRXRoZXJSYWlzZWQuZGl2KDEwMCkpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHByZUNyb3dkc2FsZU9uKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgLy9yZXR1cm4gd2hldGhlciBwcmVzYWxlIGlzIG9uIGFjY29yZGluZyB0byBibG9jayBudW1iZXINCiAgICAgICAgcmV0dXJuIChibG9jay5udW1iZXI+PXN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1wcmVFbmRCbG9jayk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY3Jvd2RzYWxlT24oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICAvL3JldHVybiB3aGV0aGVyIGNyb3dkc2FsZSBpcyBvbiBhY2NvcmRpbmcgdG8gYmxvY2sgbnVtYmVyDQogICAgICAgIHJldHVybiAoYmxvY2subnVtYmVyPj1waGFzZTFTdGFydEJsb2NrICYmIGJsb2NrLm51bWJlcjw9ZW5kQmxvY2spOw0KICAgIH0NCg0KDQogICAgZnVuY3Rpb24gZ2V0RXRoZXJSYWlzZWQoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICAgIC8vZ2V0dGVyIGZ1bmN0aW9uIGZvciBldGhlclJhaXNlZA0KICAgICAgICByZXR1cm4gcHJlc2FsZUV0aGVyUmFpc2VkOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFRva2VuU29sZCgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICAgICAgLy9nZXR0ZXIgZnVuY3Rpb24gZm9yIGNyb3dkc2FsZVRva2VuU29sZA0KICAgICAgICByZXR1cm4gY3Jvd2RzYWxlVG9rZW5Tb2xkOw0KICAgIH0NCg0KfQ=='