base 64 content
base64hodlDAO
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCi8qKg0KKiBIb2RsZCBEQU8gYW5kIEVSQzIwIHRva2VuDQoqIEF1dGhvcjogQ3VycmVuY3lUeWNvb24gb24gR2l0SHViDQoqIExpY2Vuc2U6IE1JVA0KKiBEYXRlOiAyMDE3DQoqDQoqIERlcGxveSB3aXRoIHRoZSBmb2xsb3dpbmcgYXJnczoNCiogIkhvZGwgREFPIiwgMTgsICJIREFPIg0KKg0KKi8NCmNvbnRyYWN0IEhvZGxEQU8gew0KICAgIC8qIEVSQzIwIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovDQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCB2ZXJzaW9uID0gJ0hEQU8gMC42JzsNCiAgICBzdHJpbmcgcHVibGljIG5hbWU7DQogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7DQogICAgdWludDggcHVibGljIGRlY2ltYWxzOw0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Ow0KICAgIA0KICAgIC8qIEVSQzIwIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcyAqLw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2FuY2U7DQoNCg0KICAgIC8qIHN0b3JlIHRoZSBibG9jayBudW1iZXIgd2hlbiBhIHdpdGhkcmF3YWwgaGFzIGJlZW4gcmVxdWVzdGVkKi8NCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHdpdGhkcmF3YWxSZXF1ZXN0KSBwdWJsaWMgd2l0aGRyYXdhbFJlcXVlc3RzOw0KICAgIHN0cnVjdCB3aXRoZHJhd2FsUmVxdWVzdCB7DQogICAgdWludCBzaW5jZVRpbWU7DQogICAgdWludDI1NiBhbW91bnQ7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogZmVlUG90IGNvbGxlY3RzIGZlZXMgZnJvbSBxdWljayB3aXRoZHJhd2Fscy4gVGhpcyBnZXRzIHJlLWRpc3RyaWJ1dGVkIHRvIHNsb3ctd2l0aGRyYXdhbHMNCiAgICAqLw0KICAgIHVpbnQyNTYgcHVibGljIGZlZVBvdDsNCg0KICAgIHVpbnQgcHVibGljIHRpbWVXYWl0ID0gMzAgZGF5czsNCiAgICAvL3VpbnQgcHVibGljIHRpbWVXYWl0ID0gMSBtaW51dGVzOyAvLyB1bmNvbW1lbnQgZm9yIFRlc3ROZXQNCg0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGluaXRpYWxTdXBwbHkgPSAwOw0KDQogICAgLyoqDQogICAgICogRVJDMjAgZXZlbnRzIHRoZXNlIGdlbmVyYXRlIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cw0KICAgICovDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7DQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7DQoNCiAgICBldmVudCBXaXRoZHJhd2FsUXVpY2soYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGFtb3VudCwgdWludDI1NiBmZWUpOyAvLyBxdWljayB3aXRoZHJhd2FsIGRvbmUNCiAgICBldmVudCBJbmNvcnJlY3RGZWUoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGZlZVJlcXVpcmVkKTsgIC8vIGluY29ycmVjdCBmZWUgcGFpZCBmb3IgcXVpY2sgd2l0aGRyYXdhbA0KICAgIGV2ZW50IFdpdGhkcmF3YWxTdGFydGVkKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludDI1NiBhbW91bnQpOw0KICAgIGV2ZW50IFdpdGhkcmF3YWxEb25lKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludDI1NiBhbW91bnQsIHVpbnQyNTYgcmV3YXJkKTsgLy8gYW1vdW50IGlzIHRoZSBhbW91bnQgdGhhdCB3YXMgdXNlZCB0byBjYWxjdWxhdGUgcmV3YXJkDQogICAgZXZlbnQgV2l0aGRyYXdhbFByZW1hdHVyZShhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQgdGltZVRvV2FpdCk7IC8vIE5lZWRzIHRvIHdhaXQgdGltZVRvV2FpdCBiZWZvcmUgd2l0aGRyYXdhbCB1bmxvY2tlZA0KICAgIGV2ZW50IERlcG9zaXRlZChhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgYW1vdW50KTsNCg0KICAgIC8qKg0KICAgICAqIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdA0KICAgICAqIEluIG91ciBjYXNlLCB0aGVyZSdzIG5vIGluaXRpYWwgc3VwcGx5LiBUb2tlbnMgd2lsbCBiZSBjcmVhdGVkIGFzIGV0aGVyIGlzIHNlbnQNCiAgICAgKiB0byB0aGUgZmFsbC1iYWNrIGZ1bmN0aW9uLiBUaGVuIHRva2VucyBhcmUgYnVybmVkIHdoZW4gZXRoZXIgaXMgd2l0aGRyYXduLg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIEhvZGxEQU8oDQogICAgc3RyaW5nIHRva2VuTmFtZSwNCiAgICB1aW50OCBkZWNpbWFsVW5pdHMsDQogICAgc3RyaW5nIHRva2VuU3ltYm9sDQogICAgKSB7DQoNCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIGluaXRpYWwgdG9rZW5zICgwIGluIHRoaXMgY2FzZSkNCiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbCBzdXBwbHkgKDAgaW4gdGhpcyBjYXNlKQ0KICAgICAgICBuYW1lID0gdG9rZW5OYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzDQogICAgICAgIHN5bWJvbCA9IHRva2VuU3ltYm9sOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3Nlcw0KICAgICAgICBkZWNpbWFscyA9IGRlY2ltYWxVbml0czsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5IHB1cnBvc2VzDQogICAgfQ0KDQogICAgLyoqDQogICAgICogbm90UGVuZGluZ1dpdGhkcmF3YWwgbW9kaWZpZXIgZ3VhcmRzIHRoZSBmdW5jdGlvbiBmcm9tIGV4ZWN1dGluZyB3aGVuIGENCiAgICAgKiB3aXRoZHJhd2FsIGhhcyBiZWVuIHJlcXVlc3RlZCBhbmQgaXMgY3VycmVudGx5IHBlbmRpbmcNCiAgICAgKi8NCiAgICBtb2RpZmllciBub3RQZW5kaW5nV2l0aGRyYXdhbCB7DQogICAgICAgIGlmICh3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0uc2luY2VUaW1lID4gMCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLyoqIEVSQzIwIC0gdHJhbnNmZXIgc2VuZHMgdG9rZW5zDQogICAgICogQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgDQogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50DQogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkDQogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QNCiAgICAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG5vdFBlbmRpbmdXaXRoZHJhd2FsIHsNCiAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IF92YWx1ZSkgdGhyb3c7ICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gNCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHRocm93OyAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzDQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyDQogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQNCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdHJhbnNmZXIgdG9vayBwbGFjZQ0KICAgIH0NCg0KICAgIC8qKiBFUkMyMCBhcHByb3ZlIGFsbG93cyBhbm90aGVyIGNvbnRyYWN0IHRvIHNwZW5kIHNvbWUgdG9rZW5zIGluIHlvdXIgYmVoYWxmDQogICAgICogQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMNCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zDQogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXINCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgICAqDQogICAgICoNCiAgICAgKiBOb3RlLCB0aGVyZSBhcmUgc29tZSBlZGdlLWNhc2VzIHdpdGggdGhlIEVSQy0yMCBhcHByb3ZlIG1lY2hhbmlzbS4gSW4gdGhpcyBjYXNlIGEgJ2JvdW5kcyBjaGVjaycNCiAgICAgKiB3YXMgYWRkZWQgdG8gbWFrZSBzdXJlIEFsaWNlIGNhbnQnIGFwcHJvdmUgQm9iIGZvciBtb3JlIHRva2VucyB0aGFuIHNoZSBoYXMuDQogICAgICogVGhlIGFzc3VtcHRpb25zIGFyZSB0aGF0IHRoZXNlIHNjZW5hcmlvcyBjb3VsZCBzdGlsbCBoYXBwZW4gaWYgbm90IG1pdGlnYXRlZCBieSBBbGljZToNCiAgICAgKg0KICAgICAqIFNjZW5hcmlvIDE6DQogICAgICoNCiAgICAgKiBUaGUgZm9sbG93aW5nIHNjZW5hcmlvIGNvdWxkIGJlIHRoZSBleHBlY3RlZCBvdXRjb21lIGJ5IEFsaWNlLCBidXQgaWYgbm90LCBBbGljZSB3b3VsZCBuZWVkIHRvIHNldA0KICAgICAqIGhlciBhcHByb3ZhbCB0byBCb2IgdG8gMCBiZWZvcmUgQWxpY2UgcHVyY2hhc2VzIG1vcmUgdG9rZW5zLg0KICAgICAqDQogICAgICogIDEuIEFsaWNlIGhhcyAxMDAgdG9rZW5zLg0KICAgICAqICAyLiBBbGljZSBhcHByb3ZlcyA1MCB0b2tlbnMgZm9yIEJvYi4NCiAgICAgKiAgMy4gQWxpY2UgYXBwcm92ZXMgMTAwIHRva2VucyBmb3IgQ2hhcmxlcw0KICAgICAqICA0LiBCb2IgY2FsbHMgdHJhbnNmZXJGcm9tIGFuZCByZWNlaXZlcyBoaXMgNTAgdG9rZW5zLg0KICAgICAqICA1LiBDaGFybGVzIGNhbGxzIHRyYW5zZmVyRnJvbSBhbmQgcmVjZWl2ZXMgdGhlIHJlbWFpbmluZyA1MCB0b2tlbnMNCiAgICAgKiAgNi4gQ2hhcmxlcyBzdGlsbCBoYXMgYW4gYXBwcm92YWwgZm9yIDUwIG1vcmUgdG9rZW5zIGZyb20gQWxpY2UsIGV2ZW4gdGhvdWdoIHNoZSBub3cgb3ducyAwIHRva2Vucy4NCiAgICAgKiAgNy4gQWxpY2UgcHVyY2hhc2VzIDUwIG1vcmUgdG9rZW5zDQogICAgICogIDguIENoYXJsZXMgc2VlcyB0aGlzLCBhbmQgaW1tZWRpYXRlbHkgY2FsbHMgdHJhbnNmZXJGcm9tIGFuZCByZWNlaXZlcyB0aG9zZSA1MCB0b2tlbnMuDQogICAgICoNCiAgICAgKiBTY2VuYXJpbyAyOg0KICAgICAqDQogICAgICogVGhpcyBpcyBhIHJhY2UgY29uZGl0aW9uLiBUbyBtaXRpZ2F0ZSB0aGlzIHByb2JsZW0sIEFsaWNlIHNob3VsZCBzZXQgdGhlIGFsbG93YW5jZSB0byAwIGluIHN0ZXAgMiwNCiAgICAgKiB0aGVuIHdhaXQgdW50aWwgaXQncyBtaW5lZCwgdGhlbiBpZiBCb2IgZGlkbid0IHRha2UgdGhlIDEwMCBzaGUgY2FuIHNldCB0byA1MC4gKE90aGVyd2lzZSBCb2IgbWF5DQogICAgICogcG90ZW50aWFsbHkgZ2V0IDE1MCB0b2tlbnMpDQogICAgICoNCiAgICAgKg0KICAgICAqICAxLiBBbGljZSBhcHByb3ZlcyBCb2IgZm9yIDEwMCwNCiAgICAgKiAgMi4gQWxpY2UgY2hhbmdlcyBpdCB0byA1MA0KICAgICAqICAzLiBCb2Igc2VlcyB0aGUgY2hhbmdlIGluIHRoZSBtZW1wb29sIGJlZm9yZSBpdCdzIG1pbmVkLCBhbmQgc2VuZHMgYSBuZXcgdHJhbnNhY3Rpb24NCiAgICAgKiAgICAgdGhhdCB3aWxsIGhvcGVmdWxseSB3aW4gdGhlIHJhY2UgYW5kIHdpdGhkcmF3IHRoZSAxMDAgZmlyc3QsIG1lYW53aGlsZSB0aGUgNTAgd2lsbA0KICAgICAqICAgICBiZSBtaW5lZCBhZnRlciBhbmQgYWxsb3cgQm9iIHRvIHdpdGhkcmF3IGFub3RoZXIgNTAuDQogICAgICoNCiAgICAgKg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIG5vdFBlbmRpbmdXaXRoZHJhd2FsDQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoNCiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBsaW5lIGhhcyBiZWVuIGNvbW1lbnRlZCBvdXQgYWZ0ZXIgcGVlciByZXZpZXcgIzINCiAgICAgICAgLy8gSXQgbWF5IGJlIHBvc3NpYmxlIHRoYXQgQWxpY2UgY2FuIHByZS1hcHByb3ZlIHRoZSByZWNpcGllbnQgaW4gYWR2YW5jZSwgYmVmb3JlIHNoZSBoYXMgYSBiYWxhbmNlLg0KICAgICAgICAvLyBlZy4gQWxpY2UgbWF5IGFwcHJvdmUgYSB0b3RhbCBsaWZldGltZSBhbW91bnQgZm9yIGhlciBjaGlsZCB0byBzcGVuZCwgYnV0IG9ubHkgZnVuZCBoZXIgYWNjb3VudCBtb250aGx5Lg0KICAgICAgICAvLyBJdCBhbHNvIGFsbG93cyBoZXIgdG8gaGF2ZSBtdWx0aXBsZSBlcXVhbCBhcHByb3ZlZXMNCg0KICAgICAgICAvL2lmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldHVybiBmYWxzZTsgLy8gRG9uJ3QgYWxsb3cgbW9yZSB0aGFuIHRoZXkgY3VycmVudGx5IGhhdmUgKGJvdW5kcyBjaGVjaykNCg0KICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzJiMxODA7DQogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLDApYCBpZiBpdCBpcyBub3QNCiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6DQogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQ0KICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7DQogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgcmV0dXJuIGEgYm9vbCBhcyBwYXJ0IG9mIHRoZSBFUkMyMA0KICAgIH0NCg0KDQogICAgLyoqDQogICAgICogRVJDLTIwIEFwcHJvdmVzIGFuZCB0aGVuIGNhbGxzIHRoZSByZWNlaXZpbmcgY29udHJhY3QNCiAgICAqLw0KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSBub3RQZW5kaW5nV2l0aGRyYXdhbA0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KDQogICAgICAgIGlmICghYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIC8vY2FsbCB0aGUgcmVjZWl2ZUFwcHJvdmFsIGZ1bmN0aW9uIG9uIHRoZSBjb250cmFjdCB5b3Ugd2FudCB0byBiZSBub3RpZmllZC4gVGhpcyBjcmFmdHMgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBtYW51YWxseSBzbyBvbmUgZG9lc24ndCBoYXZlIHRvIGluY2x1ZGUgYSBjb250cmFjdCBpbiBoZXJlIGp1c3QgZm9yIHRoaXMuDQogICAgICAgIC8vcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbkNvbnRyYWN0LCBieXRlcyBfZXh0cmFEYXRhKQ0KICAgICAgICAvL2l0IGlzIGFzc3VtZWQgdGhhdCB3aGVuIGRvZXMgdGhpcyB0aGF0IHRoZSBjYWxsICpzaG91bGQqIHN1Y2NlZWQsIG90aGVyd2lzZSBvbmUgd291bGQgdXNlIHZhbmlsbGEgYXBwcm92ZSBpbnN0ZWFkLg0KICAgICAgICBpZighX3NwZW5kZXIuY2FsbChieXRlczQoYnl0ZXMzMihzaGEzKCJyZWNlaXZlQXBwcm92YWwoYWRkcmVzcyx1aW50MjU2LGFkZHJlc3MsYnl0ZXMpIikpKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKSkgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogRVJDMjAgQSBjb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zLiBOb3RlOiBXZSBhcmUgbm90IGFsbG93aW5nIGEgdHJhbnNmZXIgaWYNCiAgICAgKiBlaXRoZXIgdGhlIGZyb20gb3IgdG8gYWRkcmVzcyBpcyBwZW5kaW5nIHdpdGhkcmF3YWwNCiAgICAgKiBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYA0KICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyDQogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50DQogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkDQogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QNCiAgICAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQ0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICAvLyBub3RlIHRoYXQgd2UgY2FuJ3QgdXNlIG5vdFBlbmRpbmdXaXRoZHJhd2FsIG1vZGlmaWVyIGhlcmUgc2luY2UgdGhpcyBmdW5jdGlvbiBkb2VzIGEgdHJhbnNmZXINCiAgICAgICAgLy8gb24gdGhlIGJlaGFsZiBvZiBfZnJvbQ0KICAgICAgICBpZiAod2l0aGRyYXdhbFJlcXVlc3RzW19mcm9tXS5zaW5jZVRpbWUgPiAwKSB0aHJvdzsgICAvLyBjYW4ndCBtb3ZlIHRva2VucyB3aGVuIF9mcm9tIGlzIHBlbmRpbmcgd2l0aGRyYXdhbA0KICAgICAgICBpZiAod2l0aGRyYXdhbFJlcXVlc3RzW190b10uc2luY2VUaW1lID4gMCkgdGhyb3c7ICAgICAvLyBjYW4ndCBtb3ZlIHRva2VucyB3aGVuIF90byBpcyBwZW5kaW5nIHdpdGhkcmF3YWwNCiAgICAgICAgaWYgKGJhbGFuY2VPZltfZnJvbV0gPCBfdmFsdWUpIHRocm93OyAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoDQogICAgICAgIGlmIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA8IGJhbGFuY2VPZltfdG9dKSB0aHJvdzsgIC8vIENoZWNrIGZvciBvdmVyZmxvd3MNCiAgICAgICAgaWYgKF92YWx1ZSA+IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pIHRocm93OyAgICAgLy8gQ2hlY2sgYWxsb3dhbmNlDQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcg0KICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudA0KICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogd2l0aGRyYXdhbEluaXRpYXRlIGluaXRpYXRlcyB0aGUgd2l0aGRyYXdhbCBieSBnb2luZyBpbnRvIGEgd2FpdGluZyBwZXJpb2QNCiAgICAgKiBJdCByZW1lbWJlcnMgdGhlIGJsb2NrIG51bWJlciAmIGFtb3VudCBoZWxkIGF0IHRoZSB0aW1lIG9mIHJlcXVlc3QuDQogICAgICogVG9rZW5zIGNhbm5vdCBiZSBtb3ZlZCBvdXQgZHVyaW5nIHRoZSB3YWl0aW5nIHBlcmlvZCwgbG9ja2luZyB0aGUgdG9rZW5zIHVudGlsIHRoZW4uDQogICAgICogQWZ0ZXIgdGhlIHdhaXRpbmcgcGVyaW9kIGZpbmlzaGVzLCB0aGUgY2FsbCB3aXRoZHJhd2FsQ29tcGxldGUNCiAgICAgKg0KICAgICAqIEdhczogNjQ0OTANCiAgICAgKg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3YWxJbml0aWF0ZSgpIG5vdFBlbmRpbmdXaXRoZHJhd2FsIHsNCiAgICAgICAgV2l0aGRyYXdhbFN0YXJ0ZWQobXNnLnNlbmRlciwgYmFsYW5jZU9mW21zZy5zZW5kZXJdKTsNCiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdID0gd2l0aGRyYXdhbFJlcXVlc3Qobm93LCBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIHdpdGhkcmF3YWxDb21wbGV0ZSBpcyBjYWxsZWQgYWZ0ZXIgdGhlIHdhaXRpbmcgcGVyaW9kLiBUaGUgZXRoZXIgd2lsbCBiZQ0KICAgICAqIHJldHVybmVkIHRvIHRoZSBjYWxsZXIgYW5kIHRoZSB0b2tlbnMgd2lsbCBiZSBidXJuZWQuDQogICAgICogQSByZXdhcmQgd2lsbCBiZSBpc3N1ZWQgYmFzZWQgb24gdGhlIGN1cnJlbnQgYW1vdW50IGluIHRoZSBmZWVQb3QsIHJlbGF0aXZlIHRvIHRoZQ0KICAgICAqIGFtb3VudCB0aGF0IHdhcyByZXF1ZXN0ZWQgZm9yIHdpdGhkcmF3YWwgd2hlbiB3aXRoZHJhd2FsSW5pdGlhdGUoKSB3YXMgY2FsbGVkLg0KICAgICAqDQogICAgICogR2FzOiAzMDk0Ng0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3YWxDb21wbGV0ZSgpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3QgciA9IHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXTsNCiAgICAgICAgaWYgKHIuc2luY2VUaW1lID09IDApIHRocm93Ow0KICAgICAgICBpZiAoKHIuc2luY2VUaW1lICsgdGltZVdhaXQpID4gbm93KSB7DQogICAgICAgICAgICAvLyBob2xkZXIgbmVlZHMgdG8gd2FpdCBzb21lIG1vcmUgYmxvY2tzDQogICAgICAgICAgICBXaXRoZHJhd2FsUHJlbWF0dXJlKG1zZy5zZW5kZXIsIHIuc2luY2VUaW1lICsgdGltZVdhaXQgLSBub3cpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdLmFtb3VudDsNCiAgICAgICAgdWludDI1NiByZXdhcmQgPSBjYWxjdWxhdGVSZXdhcmQoci5hbW91bnQpOw0KICAgICAgICB3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0uc2luY2VUaW1lID0gMDsgICAvLyBUaGlzIHdpbGwgdW5sb2NrIHRoZSBob2xkZXJzIHRva2Vucw0KICAgICAgICB3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0uYW1vdW50ID0gMDsgICAgICAvLyBjbGVhciB0aGUgYW1vdW50IHRoYXQgd2FzIHJlcXVlc3RlZA0KDQogICAgICAgIGlmIChyZXdhcmQgPiAwKSB7DQogICAgICAgICAgICBpZiAoZmVlUG90IC0gcmV3YXJkID4gZmVlUG90KSB7DQogICAgICAgICAgICAgICAgZmVlUG90ID0gMDsgLy8gb3ZlcmZsb3cNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZmVlUG90IC09IHJld2FyZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBkb1dpdGhkcmF3YWwocmV3YXJkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBidXJuIHRoZSB0b2tlbnMgYW5kIHNlbmQgYmFjayB0aGUgZXRoZXINCiAgICAgICAgV2l0aGRyYXdhbERvbmUobXNnLnNlbmRlciwgYW1vdW50LCByZXdhcmQpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJld2FyZCBpcyBiYXNlZCBvbiB0aGUgYW1vdW50IGhlbGQsIHJlbGF0aXZlIHRvIHRvdGFsIHN1cHBseSBvZiB0b2tlbnMuDQogICAgICovDQogICAgZnVuY3Rpb24gY2FsY3VsYXRlUmV3YXJkKHVpbnQyNTYgdikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgICB1aW50MjU2IHJld2FyZCA9IDA7DQogICAgICAgIGlmIChmZWVQb3QgPiAwKSB7DQogICAgICAgICAgICByZXdhcmQgPSBmZWVQb3QgKiB2IC8gdG90YWxTdXBwbHk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJld2FyZDsNCiAgICB9DQoNCiAgICAvKiogY2FsY3VsYXRlIHRoZSBmZWUgZm9yIHF1aWNrIHdpdGhkcmF3YWwNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVGZWUodWludDI1NiB2KSBjb25zdGFudCByZXR1cm5zICAodWludDI1Nikgew0KICAgICAgICB1aW50MjU2IGZlZVJlcXVpcmVkID0gdiAvIDEwMDsgLy8gMSUNCiAgICAgICAgcmV0dXJuIGZlZVJlcXVpcmVkOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFF1aWNrIHdpdGhkcmF3YWwsIG5lZWRzIHRvIHNlbmQgZXRoZXIgdG8gdGhpcyBmdW5jdGlvbiBmb3IgdGhlIGZlZS4NCiAgICAgKg0KICAgICAqIEdhcyB1c2U6ID8gKGluY2x1ZGluZyBjYWxsIHRvIHByb2Nlc3NXaXRoZHJhd2FsKQ0KICAgICovDQogICAgZnVuY3Rpb24gcXVpY2tXaXRoZHJhdygpIHBheWFibGUgbm90UGVuZGluZ1dpdGhkcmF3YWwgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICB1aW50MjU2IGFtb3VudCA9IGJhbGFuY2VPZlttc2cuc2VuZGVyXTsNCiAgICAgICAgaWYgKGFtb3VudCA8PSAwKSB0aHJvdzsNCiAgICAgICAgLy8gY2FsY3VsYXRlIHJlcXVpcmVkIGZlZQ0KICAgICAgICB1aW50MjU2IGZlZVJlcXVpcmVkID0gY2FsY3VsYXRlRmVlKGFtb3VudCk7DQogICAgICAgIGlmIChtc2cudmFsdWUgIT0gZmVlUmVxdWlyZWQpIHsNCiAgICAgICAgICAgIEluY29ycmVjdEZlZShtc2cuc2VuZGVyLCBmZWVSZXF1aXJlZCk7ICAgLy8gbm90aWZ5IHRoZSBleGFjdCBmZWUgdGhhdCBuZWVkcyB0byBiZSBzZW50DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICBmZWVQb3QgKz0gbXNnLnZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZmVlIHRvIHRoZSBmZWVQb3QNCiAgICAgICAgZG9XaXRoZHJhd2FsKDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2l0aGRyYXcsIDAgcmV3YXJkDQogICAgICAgIFdpdGhkcmF3YWxEb25lKG1zZy5zZW5kZXIsIGFtb3VudCwgMCk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIGRvIHdpdGhkcmF3YWwNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBkb1dpdGhkcmF3YWwodWludDI1NiBleHRyYSkgaW50ZXJuYWwgew0KICAgICAgICB1aW50MjU2IGFtb3VudCA9IGJhbGFuY2VPZlttc2cuc2VuZGVyXTsNCiAgICAgICAgaWYgKGFtb3VudCA8PSAwKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgLy8gY2Fubm90IHdpdGhkcmF3DQogICAgICAgIGlmIChhbW91bnQgKyBleHRyYSA+IHRoaXMuYmFsYW5jZSkgew0KICAgICAgICAgICAgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250cmFjdCBkb2Vzbid0IGhhdmUgZW5vdWdoIGJhbGFuY2UNCiAgICAgICAgfQ0KDQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IDA7DQogICAgICAgIGlmICh0b3RhbFN1cHBseSA8IHRvdGFsU3VwcGx5IC0gYW1vdW50KSB7DQogICAgICAgICAgICB0b3RhbFN1cHBseSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGxldCBpdCBvdmVyZmxvdw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdG90YWxTdXBwbHkgLT0gYW1vdW50OyAgICAgICAgICAgICAgICAgICAvLyBkZWZsYXRlIHRoZSBzdXBwbHkhDQogICAgICAgIH0NCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMCwgYW1vdW50KTsgICAgICAgICAgICAgLy8gYnVybiBiYWJ5IGJ1cm4NCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoYW1vdW50ICsgZXh0cmEpKSB0aHJvdzsgLy8gcmV0dXJuIGJhY2sgdGhlIGV0aGVyIG9yIHJvbGxiYWNrIGlmIGZhaWxlZA0KICAgIH0NCg0KDQogICAgLyoqDQogICAgICogRmFsbGJhY2sgZnVuY3Rpb24gd2hlbiBzZW5kaW5nIGV0aGVyIHRvIHRoZSBjb250cmFjdA0KICAgICAqIEdhcyB1c2U6IDY1MDUxDQogICAgKi8NCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIG5vdFBlbmRpbmdXaXRoZHJhd2FsIHsNCiAgICAgICAgdWludDI1NiBhbW91bnQgPSBtc2cudmFsdWU7ICAgICAgICAgLy8gYW1vdW50IHRoYXQgd2FzIHNlbnQNCiAgICAgICAgaWYgKGFtb3VudCA8PSAwKSB0aHJvdzsgICAgICAgICAgICAgLy8gbmVlZCB0byBzZW5kIHNvbWUgRVRIDQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSBhbW91bnQ7ICAgIC8vIG1pbnQgbmV3IHRva2Vucw0KICAgICAgICB0b3RhbFN1cHBseSArPSBhbW91bnQ7ICAgICAgICAgICAgICAvLyB0cmFjayB0aGUgc3VwcGx5DQogICAgICAgIFRyYW5zZmVyKDAsIG1zZy5zZW5kZXIsIGFtb3VudCk7ICAgIC8vIG5vdGlmeSBvZiB0aGUgZXZlbnQNCiAgICAgICAgRGVwb3NpdGVkKG1zZy5zZW5kZXIsIGFtb3VudCk7DQogICAgfQ0KfQ=='