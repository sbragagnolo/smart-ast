base 64 content
base64hodlDAO2
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMDsNCi8qKg0KKiBIb2RsZCBEQU8gYW5kIEVSQzIwIHRva2VuDQoqIEF1dGhvcjogQ3VycmVuY3lUeWNvb24gb24gR2l0SHViDQoqIExpY2Vuc2U6IE1JVA0KKiBEYXRlOiAyMDE3DQoqDQoqIERlcGxveSB3aXRoIHRoZSBmb2xsb3dpbmcgYXJnczoNCiogIkhvZGwgREFPIiwgMTgsICJIT0RMIg0KKg0KKi8NCmNvbnRyYWN0IEhvZGxEQU8gew0KICAgIC8qIEVSQzIwIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovDQogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJ0hEQU8gMC40JzsNCiAgICBzdHJpbmcgcHVibGljIG5hbWU7DQogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7DQogICAgdWludDggcHVibGljIGRlY2ltYWxzOw0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Ow0KDQogICAgLyogRVJDMjAgVGhpcyBjcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGJhbGFuY2VzICovDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsNCg0KDQogICAgLyogc3RvcmUgdGhlIGJsb2NrIG51bWJlciB3aGVuIGEgd2l0aGRyYXdhbCBoYXMgYmVlbiByZXF1ZXN0ZWQqLw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gd2l0aGRyYXdhbFJlcXVlc3QpIHB1YmxpYyB3aXRoZHJhd2FsUmVxdWVzdHM7DQogICAgc3RydWN0IHdpdGhkcmF3YWxSZXF1ZXN0IHsNCiAgICB1aW50IHNpbmNlQmxvY2s7DQogICAgdWludDI1NiBhbW91bnQ7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogZmVlUG90IGNvbGxlY3RzIGZlZXMgZnJvbSBxdWljayB3aXRoZHJhd2Fscy4gVGhpcyBnZXRzIHJlLWRpc3RyaWJ1dGVkIHRvIHNsb3ctd2l0aGRyYXdhbHMNCiAgICAqLw0KICAgIHVpbnQyNTYgcHVibGljIGZlZVBvdDsNCg0KICAgIHVpbnQzMiBwdWJsaWMgY29uc3RhbnQgYmxvY2tXYWl0ID0gMTcyODAwOyAvLyByb3VnaGx5IDMwIGRheXMsICAoMjU5MjAwMCAvIDE1KSAtIGFzc3VtaW5nIGJsb2NrIHRpbWUgaXMgfjE1IHNlYy4NCiAgICAvL3VpbnQgcHVibGljIGNvbnN0YW50IGJsb2NrV2FpdCA9IDg7IC8vIHJvdWdobHkgYXNzdW1pbmcgYmxvY2sgdGltZSBpcyB+MTUgc2VjLiAodW5jb21tZW50IHdoZW4gdGVzdGluZyBvbiB0ZXN0bmV0KQ0KDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgaW5pdGlhbFN1cHBseSA9IDA7DQoNCiAgICAvKioNCiAgICAgKiBFUkMyMCBldmVudHMgdGhlc2UgZ2VuZXJhdGUgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzDQogICAgKi8NCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCg0KICAgIGV2ZW50IFdpdGhkcmF3YWxRdWljayhhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgYW1vdW50LCB1aW50MjU2IGZlZSk7IC8vIHF1aWNrIHdpdGhkcmF3YWwgZG9uZQ0KICAgIGV2ZW50IEluY29ycmVjdEZlZShhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgZmVlUmVxdWlyZWQpOyAgLy8gaW5jb3JyZWN0IGZlZSBwYWlkIGZvciBxdWljayB3aXRoZHJhd2FsDQogICAgZXZlbnQgV2l0aGRyYXdhbFN0YXJ0ZWQoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGFtb3VudCk7DQogICAgZXZlbnQgV2l0aGRyYXdhbERvbmUoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGFtb3VudCwgdWludDI1NiByZXdhcmQpOyAvLyBhbW91bnQgaXMgdGhlIGFtb3VudCB0aGF0IHdhcyB1c2VkIHRvIGNhbGN1bGF0ZSByZXdhcmQNCiAgICBldmVudCBXaXRoZHJhd2FsUHJlbWF0dXJlKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludCBibG9ja3NUb1dhaXQpOyAvLyBOZWVkcyB0byB3YWl0IGJsb2Nrc1RvV2FpdCBiZWZvcmUgd2l0aGRyYXdhbCB1bmxvY2tlZA0KICAgIGV2ZW50IERlcG9zaXRlZChhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgYW1vdW50KTsNCg0KICAgIC8qKg0KICAgICAqIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdA0KICAgICAqIEluIG91ciBjYXNlLCB0aGVyZSdzIG5vIGluaXRpYWwgc3VwcGx5LiBUb2tlbnMgd2lsbCBiZSBjcmVhdGVkIGFzIGV0aGVyIGlzIHNlbnQNCiAgICAgKiB0byB0aGUgZmFsbC1iYWNrIGZ1bmN0aW9uLiBUaGVuIHRva2VucyBhcmUgYnVybmVkIHdoZW4gZXRoZXIgaXMgd2l0aGRyYXduLg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIEhvZGxEQU8oDQogICAgc3RyaW5nIHRva2VuTmFtZSwNCiAgICB1aW50OCBkZWNpbWFsVW5pdHMsDQogICAgc3RyaW5nIHRva2VuU3ltYm9sDQogICAgKSB7DQoNCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIGluaXRpYWwgdG9rZW5zICgwIGluIHRoaXMgY2FzZSkNCiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbCBzdXBwbHkgKDAgaW4gdGhpcyBjYXNlKQ0KICAgICAgICBuYW1lID0gdG9rZW5OYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzDQogICAgICAgIHN5bWJvbCA9IHRva2VuU3ltYm9sOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3Nlcw0KICAgICAgICBkZWNpbWFscyA9IGRlY2ltYWxVbml0czsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5IHB1cnBvc2VzDQogICAgfQ0KDQogICAgLyoqDQogICAgICogbm90UGVuZGluZ1dpdGhkcmF3YWwgbW9kaWZpZXIgZ3VhcmRzIHRoZSBmdW5jdGlvbiBmcm9tIGV4ZWN1dGluZyB3aGVuIGENCiAgICAgKiB3aXRoZHJhd2FsIGhhcyBiZWVuIHJlcXVlc3RlZCBhbmQgaXMgY3VycmVudGx5IHBlbmRpbmcNCiAgICAgKi8NCiAgICBtb2RpZmllciBub3RQZW5kaW5nV2l0aGRyYXdhbCB7DQogICAgICAgIGlmICh3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0uc2luY2VCbG9jayA+IDApIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8qKiBFUkMyMCAtIHRyYW5zZmVyIHNlbmRzIHRva2Vucw0KICAgICAqIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYA0KICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudA0KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZA0KICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBub3RQZW5kaW5nV2l0aGRyYXdhbCB7DQogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHRocm93OyAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoDQogICAgICAgIGlmIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA8IGJhbGFuY2VPZltfdG9dKSB0aHJvdzsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cw0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcg0KICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UNCiAgICB9DQoNCiAgICAvKiogRVJDMjAgYXBwcm92ZSBhbGxvd3MgYW5vdGhlciBjb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBpbiB5b3VyIGJlaGFsZg0KICAgICAqIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zDQogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2Vucw0KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyDQogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QNCiAgICAgKg0KICAgICAqDQogICAgICogTm90ZSwgdGhlcmUgYXJlIHNvbWUgZWRnZS1jYXNlcyB3aXRoIHRoZSBFUkMtMjAgYXBwcm92ZSBtZWNoYW5pc20uIEluIHRoaXMgY2FzZSBhICdib3VuZHMgY2hlY2snDQogICAgICogd2FzIGFkZGVkIHRvIG1ha2Ugc3VyZSBBbGljZSBjYW50JyBhcHByb3ZlIEJvYiBmb3IgbW9yZSB0b2tlbnMgdGhhbiBzaGUgaGFzLg0KICAgICAqIFRoZSBhc3N1bXB0aW9ucyBhcmUgdGhhdCB0aGVzZSBzY2VuYXJpb3MgY291bGQgc3RpbGwgaGFwcGVuIGlmIG5vdCBtaXRpZ2F0ZWQgYnkgQWxpY2U6DQogICAgICoNCiAgICAgKiBTY2VuYXJpbyAxOg0KICAgICAqDQogICAgICogVGhlIGZvbGxvd2luZyBzY2VuYXJpbyBjb3VsZCBiZSB0aGUgZXhwZWN0ZWQgb3V0Y29tZSBieSBBbGljZSwgYnV0IGlmIG5vdCwgQWxpY2Ugd291bGQgbmVlZCB0byBzZXQNCiAgICAgKiBoZXIgYXBwcm92YWwgdG8gQm9iIHRvIDAgYmVmb3JlIEFsaWNlIHB1cmNoYXNlcyBtb3JlIHRva2Vucy4NCiAgICAgKg0KICAgICAqICAxLiBBbGljZSBoYXMgMTAwIHRva2Vucy4NCiAgICAgKiAgMi4gQWxpY2UgYXBwcm92ZXMgNTAgdG9rZW5zIGZvciBCb2IuDQogICAgICogIDMuIEFsaWNlIGFwcHJvdmVzIDEwMCB0b2tlbnMgZm9yIENoYXJsZXMNCiAgICAgKiAgNC4gQm9iIGNhbGxzIHRyYW5zZmVyRnJvbSBhbmQgcmVjZWl2ZXMgaGlzIDUwIHRva2Vucy4NCiAgICAgKiAgNS4gQ2hhcmxlcyBjYWxscyB0cmFuc2ZlckZyb20gYW5kIHJlY2VpdmVzIHRoZSByZW1haW5pbmcgNTAgdG9rZW5zDQogICAgICogIDYuIENoYXJsZXMgc3RpbGwgaGFzIGFuIGFwcHJvdmFsIGZvciA1MCBtb3JlIHRva2VucyBmcm9tIEFsaWNlLCBldmVuIHRob3VnaCBzaGUgbm93IG93bnMgMCB0b2tlbnMuDQogICAgICogIDcuIEFsaWNlIHB1cmNoYXNlcyA1MCBtb3JlIHRva2Vucw0KICAgICAqICA4LiBDaGFybGVzIHNlZXMgdGhpcywgYW5kIGltbWVkaWF0ZWx5IGNhbGxzIHRyYW5zZmVyRnJvbSBhbmQgcmVjZWl2ZXMgdGhvc2UgNTAgdG9rZW5zLg0KICAgICAqDQogICAgICogU2NlbmFyaW8gMjoNCiAgICAgKg0KICAgICAqIFRoaXMgaXMgYSByYWNlIGNvbmRpdGlvbi4gVG8gbWl0aWdhdGUgdGhpcyBwcm9ibGVtLCBBbGljZSBzaG91bGQgc2V0IHRoZSBhbGxvd2FuY2UgdG8gMCBpbiBzdGVwIDIsDQogICAgICogdGhlbiB3YWl0IHVudGlsIGl0J3MgbWluZWQsIHRoZW4gaWYgQm9iIGRpZG4ndCB0YWtlIHRoZSAxMDAgc2hlIGNhbiBzZXQgdG8gNTAuIChPdGhlcndpc2UgQm9iIG1heQ0KICAgICAqIHBvdGVudGlhbGx5IGdldCAxNTAgdG9rZW5zKQ0KICAgICAqDQogICAgICoNCiAgICAgKiAgMS4gQWxpY2UgYXBwcm92ZXMgQm9iIGZvciAxMDAsDQogICAgICogIDIuIEFsaWNlIGNoYW5nZXMgaXQgdG8gNTANCiAgICAgKiAgMy4gQm9iIHNlZXMgdGhlIGNoYW5nZSBpbiB0aGUgbWVtcG9vbCBiZWZvcmUgaXQncyBtaW5lZCwgYW5kIHNlbmRzIGEgbmV3IHRyYW5zYWN0aW9uDQogICAgICogICAgIHRoYXQgd2lsbCBob3BlZnVsbHkgd2luIHRoZSByYWNlIGFuZCB3aXRoZHJhdyB0aGUgMTAwIGZpcnN0LCBtZWFud2hpbGUgdGhlIDUwIHdpbGwNCiAgICAgKiAgICAgYmUgbWluZWQgYWZ0ZXIgYW5kIGFsbG93IEJvYiB0byB3aXRoZHJhdyBhbm90aGVyIDUwLg0KICAgICAqDQogICAgICoNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBub3RQZW5kaW5nV2l0aGRyYXdhbA0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KDQogICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgbGluZSBoYXMgYmVlbiBjb21tZW50ZWQgb3V0IGFmdGVyIHBlZXIgcmV2aWV3ICMyDQogICAgICAgIC8vIEl0IG1heSBiZSBwb3NzaWJsZSB0aGF0IEFsaWNlIGNhbiBwcmUtYXBwcm92ZSB0aGUgcmVjaXBpZW50IGluIGFkdmFuY2UsIGJlZm9yZSBzaGUgaGFzIGEgYmFsYW5jZS4NCiAgICAgICAgLy8gZWcuIEFsaWNlIG1heSBhcHByb3ZlIGEgdG90YWwgbGlmZXRpbWUgYW1vdW50IGZvciBoZXIgY2hpbGQgdG8gc3BlbmQsIGJ1dCBvbmx5IGZ1bmQgaGVyIGFjY291bnQgbW9udGhseS4NCiAgICAgICAgLy8gSXQgYWxzbyBhbGxvd3MgaGVyIHRvIGhhdmUgbXVsdGlwbGUgZXF1YWwgYXBwcm92ZWVzDQoNCiAgICAgICAgLy9pZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSByZXR1cm4gZmFsc2U7IC8vIERvbid0IGFsbG93IG1vcmUgdGhhbiB0aGV5IGN1cnJlbnRseSBoYXZlIChib3VuZHMgY2hlY2spDQoNCiAgICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3NlcyYjMTgwOw0KICAgICAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwwKWAgaWYgaXQgaXMgbm90DQogICAgICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOg0KICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkNCiAgICAgICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93Ow0KICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBtdXN0IHJldHVybiBhIGJvb2wgYXMgcGFydCBvZiB0aGUgRVJDMjANCiAgICB9DQoNCg0KICAgIC8qKg0KICAgICAqIEVSQy0yMCBBcHByb3ZlcyBhbmQgdGhlbiBjYWxscyB0aGUgcmVjZWl2aW5nIGNvbnRyYWN0DQogICAgKi8NCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgbm90UGVuZGluZ1dpdGhkcmF3YWwNCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCg0KICAgICAgICBpZiAoIWFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHJldHVybiBmYWxzZTsNCg0KICAgICAgICAvL2NhbGwgdGhlIHJlY2VpdmVBcHByb3ZhbCBmdW5jdGlvbiBvbiB0aGUgY29udHJhY3QgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQuIFRoaXMgY3JhZnRzIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgbWFudWFsbHkgc28gb25lIGRvZXNuJ3QgaGF2ZSB0byBpbmNsdWRlIGEgY29udHJhY3QgaW4gaGVyZSBqdXN0IGZvciB0aGlzLg0KICAgICAgICAvL3JlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW5Db250cmFjdCwgYnl0ZXMgX2V4dHJhRGF0YSkNCiAgICAgICAgLy9pdCBpcyBhc3N1bWVkIHRoYXQgd2hlbiBkb2VzIHRoaXMgdGhhdCB0aGUgY2FsbCAqc2hvdWxkKiBzdWNjZWVkLCBvdGhlcndpc2Ugb25lIHdvdWxkIHVzZSB2YW5pbGxhIGFwcHJvdmUgaW5zdGVhZC4NCiAgICAgICAgaWYoIV9zcGVuZGVyLmNhbGwoYnl0ZXM0KGJ5dGVzMzIoc2hhMygicmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MsdWludDI1NixhZGRyZXNzLGJ5dGVzKSIpKSksIG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSkpIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEVSQzIwIEEgY29udHJhY3QgYXR0ZW1wdHMgdG8gZ2V0IHRoZSBjb2lucy4gTm90ZTogV2UgYXJlIG5vdCBhbGxvd2luZyBhIHRyYW5zZmVyIGlmDQogICAgICogZWl0aGVyIHRoZSBmcm9tIG9yIHRvIGFkZHJlc3MgaXMgcGVuZGluZyB3aXRoZHJhd2FsDQogICAgICogQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWANCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcg0KICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudA0KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZA0KICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkNCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgLy8gbm90ZSB0aGF0IHdlIGNhbid0IHVzZSBub3RQZW5kaW5nV2l0aGRyYXdhbCBtb2RpZmllciBoZXJlIHNpbmNlIHRoaXMgZnVuY3Rpb24gZG9lcyBhIHRyYW5zZmVyDQogICAgICAgIC8vIG9uIHRoZSBiZWhhbGYgb2YgX2Zyb20NCiAgICAgICAgaWYgKHdpdGhkcmF3YWxSZXF1ZXN0c1tfZnJvbV0uc2luY2VCbG9jayA+IDApIHRocm93OyAgLy8gY2FuJ3QgbW92ZSB0b2tlbnMgd2hlbiBfZnJvbSBpcyBwZW5kaW5nIHdpdGhkcmF3YWwNCiAgICAgICAgaWYgKHdpdGhkcmF3YWxSZXF1ZXN0c1tfdG9dLnNpbmNlQmxvY2sgPiAwKSB0aHJvdzsgICAgLy8gY2FuJ3QgbW92ZSB0b2tlbnMgd2hlbiBfdG8gaXMgcGVuZGluZyB3aXRoZHJhd2FsDQogICAgICAgIGlmIChiYWxhbmNlT2ZbX2Zyb21dIDwgX3ZhbHVlKSB0aHJvdzsgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaA0KICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgdGhyb3c7ICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzDQogICAgICAgIGlmIChfdmFsdWUgPiBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKSB0aHJvdzsgICAgIC8vIENoZWNrIGFsbG93YW5jZQ0KICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXINCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQNCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIHdpdGhkcmF3YWxJbml0aWF0ZSBpbml0aWF0ZXMgdGhlIHdpdGhkcmF3YWwgYnkgZ29pbmcgaW50byBhIHdhaXRpbmcgcGVyaW9kDQogICAgICogSXQgcmVtZW1iZXJzIHRoZSBibG9jayBudW1iZXIgJiBhbW91bnQgaGVsZCBhdCB0aGUgdGltZSBvZiByZXF1ZXN0Lg0KICAgICAqIFRva2VucyBjYW5ub3QgYmUgbW92ZWQgb3V0IGR1cmluZyB0aGUgd2FpdGluZyBwZXJpb2QsIGxvY2tpbmcgdGhlIHRva2VucyB1bnRpbCB0aGVuLg0KICAgICAqIEFmdGVyIHRoZSB3YWl0aW5nIHBlcmlvZCBmaW5pc2hlcywgdGhlIGNhbGwgd2l0aGRyYXdhbENvbXBsZXRlDQogICAgICoNCiAgICAgKiBHYXM6IDY0NDkwDQogICAgICoNCiAgICAgKi8NCiAgICBmdW5jdGlvbiB3aXRoZHJhd2FsSW5pdGlhdGUoKSBub3RQZW5kaW5nV2l0aGRyYXdhbCB7DQogICAgICAgIFdpdGhkcmF3YWxTdGFydGVkKG1zZy5zZW5kZXIsIGJhbGFuY2VPZlttc2cuc2VuZGVyXSk7DQogICAgICAgIHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXSA9IHdpdGhkcmF3YWxSZXF1ZXN0KGJsb2NrLm51bWJlciwgYmFsYW5jZU9mW21zZy5zZW5kZXJdKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiB3aXRoZHJhd2FsQ29tcGxldGUgaXMgY2FsbGVkIGFmdGVyIHRoZSB3YWl0aW5nIHBlcmlvZC4gVGhlIGV0aGVyIHdpbGwgYmUNCiAgICAgKiByZXR1cm5lZCB0byB0aGUgY2FsbGVyIGFuZCB0aGUgdG9rZW5zIHdpbGwgYmUgYnVybmVkLg0KICAgICAqIEEgcmV3YXJkIHdpbGwgYmUgaXNzdWVkIGJhc2VkIG9uIHRoZSBjdXJyZW50IGFtb3VudCBpbiB0aGUgZmVlUG90LCByZWxhdGl2ZSB0byB0aGUNCiAgICAgKiBhbW91bnQgdGhhdCB3YXMgcmVxdWVzdGVkIGZvciB3aXRoZHJhd2FsIHdoZW4gd2l0aGRyYXdhbEluaXRpYXRlKCkgd2FzIGNhbGxlZC4NCiAgICAgKg0KICAgICAqIEdhczogMzA5NDYNCiAgICAgKi8NCiAgICBmdW5jdGlvbiB3aXRoZHJhd2FsQ29tcGxldGUoKSByZXR1cm5zIChib29sKSB7DQogICAgICAgIHdpdGhkcmF3YWxSZXF1ZXN0IHIgPSB3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl07DQogICAgICAgIGlmIChyLnNpbmNlQmxvY2sgPT0gMCkgdGhyb3c7DQogICAgICAgIGlmICgoci5zaW5jZUJsb2NrICsgYmxvY2tXYWl0KSA+IGJsb2NrLm51bWJlcikgew0KICAgICAgICAgICAgLy8gaG9sZGVyIG5lZWRzIHRvIHdhaXQgc29tZSBtb3JlIGJsb2Nrcw0KICAgICAgICAgICAgV2l0aGRyYXdhbFByZW1hdHVyZShtc2cuc2VuZGVyLCByLnNpbmNlQmxvY2sgKyBibG9ja1dhaXQgLSBibG9jay5udW1iZXIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdLmFtb3VudDsNCiAgICAgICAgdWludDI1NiByZXdhcmQgPSBjYWxjdWxhdGVSZXdhcmQoci5hbW91bnQpOw0KICAgICAgICB3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0uc2luY2VCbG9jayA9IDA7ICAvLyBUaGlzIHdpbGwgdW5sb2NrIHRoZSBob2xkZXJzIHRva2Vucw0KICAgICAgICB3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0uYW1vdW50ID0gMDsgICAgICAvLyBjbGVhciB0aGUgYW1vdW50IHRoYXQgd2FzIHJlcXVlc3RlZA0KDQogICAgICAgIGlmIChyZXdhcmQgPiAwKSB7DQogICAgICAgICAgICBpZiAoZmVlUG90IC0gcmV3YXJkID4gZmVlUG90KSB7DQogICAgICAgICAgICAgICAgZmVlUG90ID0gMDsgLy8gb3ZlcmZsb3cNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZmVlUG90IC09IHJld2FyZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBkb1dpdGhkcmF3YWwocmV3YXJkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBidXJuIHRoZSB0b2tlbnMgYW5kIHNlbmQgYmFjayB0aGUgZXRoZXINCiAgICAgICAgV2l0aGRyYXdhbERvbmUobXNnLnNlbmRlciwgYW1vdW50LCByZXdhcmQpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJld2FyZCBpcyBiYXNlZCBvbiB0aGUgYW1vdW50IGhlbGQsIHJlbGF0aXZlIHRvIHRvdGFsIHN1cHBseSBvZiB0b2tlbnMuDQogICAgICovDQogICAgZnVuY3Rpb24gY2FsY3VsYXRlUmV3YXJkKHVpbnQyNTYgdikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgICB1aW50MjU2IHJld2FyZCA9IDA7DQogICAgICAgIGlmIChmZWVQb3QgPiAwKSB7DQogICAgICAgICAgICByZXdhcmQgPSBmZWVQb3QgKiB2IC8gdG90YWxTdXBwbHk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJld2FyZDsNCiAgICB9DQoNCiAgICAvKiogY2FsY3VsYXRlIHRoZSBmZWUgZm9yIHF1aWNrIHdpdGhkcmF3YWwNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVGZWUodWludDI1NiB2KSBjb25zdGFudCByZXR1cm5zICAodWludDI1Nikgew0KICAgICAgICB1aW50MjU2IGZlZVJlcXVpcmVkID0gdiAvIDEwMDsgLy8gMSUNCiAgICAgICAgcmV0dXJuIGZlZVJlcXVpcmVkOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFF1aWNrIHdpdGhkcmF3YWwsIG5lZWRzIHRvIHNlbmQgZXRoZXIgdG8gdGhpcyBmdW5jdGlvbiBmb3IgdGhlIGZlZS4NCiAgICAgKg0KICAgICAqIEdhcyB1c2U6ID8gKGluY2x1ZGluZyBjYWxsIHRvIHByb2Nlc3NXaXRoZHJhd2FsKQ0KICAgICovDQogICAgZnVuY3Rpb24gcXVpY2tXaXRoZHJhdygpIHBheWFibGUgbm90UGVuZGluZ1dpdGhkcmF3YWwgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICB1aW50MjU2IGFtb3VudCA9IGJhbGFuY2VPZlttc2cuc2VuZGVyXTsNCiAgICAgICAgaWYgKGFtb3VudCA8PSAwKSB0aHJvdzsNCiAgICAgICAgLy8gY2FsY3VsYXRlIHJlcXVpcmVkIGZlZQ0KICAgICAgICB1aW50MjU2IGZlZVJlcXVpcmVkID0gY2FsY3VsYXRlRmVlKGFtb3VudCk7DQogICAgICAgIGlmIChtc2cudmFsdWUgIT0gZmVlUmVxdWlyZWQpIHsNCiAgICAgICAgICAgIEluY29ycmVjdEZlZShtc2cuc2VuZGVyLCBmZWVSZXF1aXJlZCk7ICAgLy8gbm90aWZ5IHRoZSBleGFjdCBmZWUgdGhhdCBuZWVkcyB0byBiZSBzZW50DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICBmZWVQb3QgKz0gbXNnLnZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZmVlIHRvIHRoZSBmZWVQb3QNCiAgICAgICAgZG9XaXRoZHJhd2FsKDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2l0aGRyYXcsIDAgcmV3YXJkDQogICAgICAgIFdpdGhkcmF3YWxEb25lKG1zZy5zZW5kZXIsIGFtb3VudCwgMCk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIGRvIHdpdGhkcmF3YWwNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBkb1dpdGhkcmF3YWwodWludDI1NiBleHRyYSkgaW50ZXJuYWwgew0KICAgICAgICB1aW50MjU2IGFtb3VudCA9IGJhbGFuY2VPZlttc2cuc2VuZGVyXTsNCiAgICAgICAgaWYgKGFtb3VudCA8PSAwKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgLy8gY2Fubm90IHdpdGhkcmF3DQogICAgICAgIGlmIChhbW91bnQgKyBleHRyYSA+IHRoaXMuYmFsYW5jZSkgew0KICAgICAgICAgICAgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250cmFjdCBkb2Vzbid0IGhhdmUgZW5vdWdoIGJhbGFuY2UNCiAgICAgICAgfQ0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSAwOw0KICAgICAgICBpZiAodG90YWxTdXBwbHkgPiB0b3RhbFN1cHBseSAtIGFtb3VudCkgew0KICAgICAgICAgICAgdG90YWxTdXBwbHkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBsZXQgaXQgb3ZlcmZsb3cNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRvdGFsU3VwcGx5IC09IGFtb3VudDsgICAgICAgICAgICAgICAgICAgLy8gZGVmbGF0ZSB0aGUgc3VwcGx5IQ0KICAgICAgICB9DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDAsIGFtb3VudCk7ICAgICAgICAgICAgIC8vIGJ1cm4gYmFieSBidXJuDQogICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKGFtb3VudCArIGV4dHJhKSkgdGhyb3c7IC8vIHJldHVybiBiYWNrIHRoZSBldGhlciBvciByb2xsYmFjayBpZiBmYWlsZWQNCiAgICB9DQoNCg0KICAgIC8qKg0KICAgICAqIEZhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gc2VuZGluZyBldGhlciB0byB0aGUgY29udHJhY3QNCiAgICAgKiBHYXMgdXNlOiA2NTA1MQ0KICAgICovDQogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSBub3RQZW5kaW5nV2l0aGRyYXdhbCB7DQogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gbXNnLnZhbHVlOyAgICAgICAgIC8vIGFtb3VudCB0aGF0IHdhcyBzZW50DQogICAgICAgIGlmIChhbW91bnQgPD0gMCkgdGhyb3c7ICAgICAgICAgICAgIC8vIG5lZWQgdG8gc2VuZCBzb21lIEVUSA0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gKz0gYW1vdW50OyAgICAvLyBtaW50IG5ldyB0b2tlbnMNCiAgICAgICAgdG90YWxTdXBwbHkgKz0gYW1vdW50OyAgICAgICAgICAgICAgLy8gdHJhY2sgdGhlIHN1cHBseQ0KICAgICAgICBUcmFuc2ZlcigwLCBtc2cuc2VuZGVyLCBhbW91bnQpOyAgICAvLyBub3RpZnkgb2YgdGhlIGV2ZW50DQogICAgICAgIERlcG9zaXRlZChtc2cuc2VuZGVyLCBhbW91bnQpOw0KICAgIH0NCn0='