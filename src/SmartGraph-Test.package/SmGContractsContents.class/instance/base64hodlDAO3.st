base 64 content
base64hodlDAO3
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMDsNCi8qKg0KKiBIb2RsZCBEQU8gYW5kIEVSQzIwIHRva2VuDQoqIEF1dGhvcjogQ3VycmVuY3lUeWNvb24gb24gR2l0SHViDQoqIExpY2Vuc2U6IE1JVA0KKiBEYXRlOiAyMDE3DQoqDQoqIERlcGxveSB3aXRoIHRoZSBmb2xsb3dpbmcgYXJnczoNCiogMCwgIkhvZGwgREFPIiwgMTgsICJIT0RMIg0KKg0KKi8NCmNvbnRyYWN0IEhvZGxEQU8gew0KICAgIC8qIEVSQzIwIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovDQogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJ0hEQU8gMC4zJzsNCiAgICBzdHJpbmcgcHVibGljIG5hbWU7DQogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7DQogICAgdWludDggcHVibGljIGRlY2ltYWxzOw0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Ow0KDQogICAgLyogRVJDMjAgVGhpcyBjcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGJhbGFuY2VzICovDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsNCg0KDQogICAgLyogc3RvcmUgdGhlIGJsb2NrIG51bWJlciB3aGVuIGEgd2l0aGRyYXdhbCBoYXMgYmVlbiByZXF1ZXN0ZWQqLw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gd2l0aGRyYXdhbFJlcXVlc3QpIHB1YmxpYyB3aXRoZHJhd2FsUmVxdWVzdHM7DQogICAgc3RydWN0IHdpdGhkcmF3YWxSZXF1ZXN0IHsNCiAgICAgICAgdWludCBzaW5jZUJsb2NrOw0KICAgICAgICB1aW50MjU2IGFtb3VudDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBmZWVQb3QgY29sbGVjdHMgZmVlcyBmcm9tIHF1aWNrIHdpdGhkcmF3YWxzLiBUaGlzIGdldHMgcmUtZGlzdHJpYnV0ZWQgdG8gc2xvdy13aXRoZHJhd2Fscw0KICAgICovDQogICAgdWludDI1NiBwdWJsaWMgZmVlUG90Ow0KDQogICAgdWludDMyIHB1YmxpYyBjb25zdGFudCBibG9ja1dhaXQgPSAxNzI4MDA7IC8vIHJvdWdobHkgMzAgZGF5cywgICgyNTkyMDAwIC8gMTUpIC0gYXNzdW1pbmcgYmxvY2sgdGltZSBpcyB+MTUgc2VjLg0KICAgIC8vdWludCBwdWJsaWMgY29uc3RhbnQgYmxvY2tXYWl0ID0gODsgLy8gcm91Z2hseSBhc3N1bWluZyBibG9jayB0aW1lIGlzIH4xNSBzZWMuICh1bmNvbW1lbnQgd2hlbiB0ZXN0aW5nIG9uIHRlc3RuZXQpDQoNCg0KICAgIC8qKg0KICAgICAqIEVSQzIwIGV2ZW50cyB0aGVzZSBnZW5lcmF0ZSBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMNCiAgICAqLw0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOw0KDQogICAgZXZlbnQgV2l0aGRyYXdhbFF1aWNrKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludDI1NiBhbW91bnQsIHVpbnQyNTYgZmVlKTsgLy8gcXVpY2sgd2l0aGRyYXdhbCBkb25lDQogICAgZXZlbnQgSW5zdWZmaWNpZW50RmVlKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludDI1NiBmZWVSZXF1aXJlZCk7ICAvLyBub3QgZW5vdWdoIGZlZSBwYWlkIGZvciBxdWljayB3aXRoZHJhd2FsDQogICAgZXZlbnQgV2l0aGRyYXdhbFN0YXJ0ZWQoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGFtb3VudCk7DQogICAgZXZlbnQgV2l0aGRyYXdhbERvbmUoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGFtb3VudCwgdWludDI1NiByZXdhcmQpOyAvLyBhbW91bnQgaXMgdGhlIGFtb3VudCB0aGF0IHdhcyB1c2VkIHRvIGNhbGN1bGF0ZSByZXdhcmQNCiAgICBldmVudCBXaXRoZHJhd2FsUHJlbWF0dXJlKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludCBibG9ja3NUb1dhaXQpOyAvLyBOZWVkcyB0byB3YWl0IGJsb2Nrc1RvV2FpdCBiZWZvcmUgd2l0aGRyYXdhbCB1bmxvY2tlZA0KICAgIGV2ZW50IERlcG9zaXRlZChhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgYW1vdW50KTsNCg0KICAgIC8qKg0KICAgICAqIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdA0KICAgICAqIEluIG91ciBjYXNlLCB0aGVyZSdzIG5vIGluaXRpYWwgc3VwcGx5LiBUb2tlbnMgd2lsbCBiZSBjcmVhdGVkIGFzIGV0aGVyIGlzIHNlbnQNCiAgICAgKiB0byB0aGUgZmFsbC1iYWNrIGZ1bmN0aW9uLiBUaGVuIHRva2VucyBhcmUgYnVybmVkIHdoZW4gZXRoZXIgaXMgd2l0aGRyYXduLg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIEhvZGxEQU8oDQogICAgICAgIHVpbnQyNTYgaW5pdGlhbFN1cHBseSwNCiAgICAgICAgc3RyaW5nIHRva2VuTmFtZSwNCiAgICAgICAgdWludDggZGVjaW1hbFVuaXRzLA0KICAgICAgICBzdHJpbmcgdG9rZW5TeW1ib2wNCiAgICApIHsNCg0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgLy8gR2l2ZSB0aGUgY3JlYXRvciBhbGwgaW5pdGlhbCB0b2tlbnMNCiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbCBzdXBwbHkNCiAgICAgICAgbmFtZSA9IHRva2VuTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3Nlcw0KICAgICAgICBzeW1ib2wgPSB0b2tlblN5bWJvbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBzeW1ib2wgZm9yIGRpc3BsYXkgcHVycG9zZXMNCiAgICAgICAgZGVjaW1hbHMgPSBkZWNpbWFsVW5pdHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3Nlcw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIG5vdFBlbmRpbmdXaXRoZHJhd2FsIG1vZGlmaWVyIGd1YXJkcyB0aGUgZnVuY3Rpb24gZnJvbSBleGVjdXRpbmcgd2hlbiBhDQogICAgICogd2l0aGRyYXdhbCBoYXMgYmVlbiByZXF1ZXN0ZWQgYW5kIGlzIGN1cnJlbnRseSBwZW5kaW5nDQogICAgICovDQogICAgbW9kaWZpZXIgbm90UGVuZGluZ1dpdGhkcmF3YWwgew0KICAgICAgICBpZiAod2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdLnNpbmNlQmxvY2sgPiAwKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvKiogRVJDMjAgLSB0cmFuc2ZlciBzZW5kcyB0b2tlbnMNCiAgICAgKiBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmANCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQNCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQNCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgbm90UGVuZGluZ1dpdGhkcmF3YWwgew0KICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB0aHJvdzsgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaA0KICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgdGhyb3c7IC8vIENoZWNrIGZvciBvdmVyZmxvd3MNCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXINCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudA0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgIC8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyB0cmFuc2ZlciB0b29rIHBsYWNlDQogICAgfQ0KDQogICAgLyoqIEVSQzIwIGFwcHJvdmUgYWxsb3dzIGFub3RoZXIgY29udHJhY3QgdG8gc3BlbmQgc29tZSB0b2tlbnMgaW4geW91ciBiZWhhbGYNCiAgICAgKiBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2Vucw0KICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMNCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2Zlcg0KICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgICoNCiAgICAgKg0KICAgICAqIE5vdGUsIHRoZXJlIGFyZSBzb21lIGVkZ2UtY2FzZXMgd2l0aCB0aGUgRVJDLTIwIGFwcHJvdmUgbWVjaGFuaXNtLiBJbiB0aGlzIGNhc2UgYSAnYm91bmRzIGNoZWNrJw0KICAgICAqIHdhcyBhZGRlZCB0byBtYWtlIHN1cmUgQWxpY2UgY2FudCcgYXBwcm92ZSBCb2IgZm9yIG1vcmUgdG9rZW5zIHRoYW4gc2hlIGhhcy4NCiAgICAgKiBUaGUgYXNzdW1wdGlvbnMgYXJlIHRoYXQgdGhlc2Ugc2NlbmFyaW9zIGNvdWxkIHN0aWxsIGhhcHBlbiBpZiBub3QgbWl0aWdhdGVkIGJ5IEFsaWNlOg0KICAgICAqDQogICAgICogU2NlbmFyaW8gMToNCiAgICAgKg0KICAgICAqIFRoZSBmb2xsb3dpbmcgc2NlbmFyaW8gY291bGQgYmUgdGhlIGV4cGVjdGVkIG91dGNvbWUgYnkgQWxpY2UsIGJ1dCBpZiBub3QsIEFsaWNlIHdvdWxkIG5lZWQgdG8gc2V0DQogICAgICogaGVyIGFwcHJvdmFsIHRvIEJvYiB0byAwIGJlZm9yZSBBbGljZSBwdXJjaGFzZXMgbW9yZSB0b2tlbnMuDQogICAgICoNCiAgICAgKiAgMS4gQWxpY2UgaGFzIDEwMCB0b2tlbnMuDQogICAgICogIDIuIEFsaWNlIGFwcHJvdmVzIDUwIHRva2VucyBmb3IgQm9iLg0KICAgICAqICAzLiBBbGljZSBhcHByb3ZlcyAxMDAgdG9rZW5zIGZvciBDaGFybGVzDQogICAgICogIDQuIEJvYiBjYWxscyB0cmFuc2ZlckZyb20gYW5kIHJlY2VpdmVzIGhpcyA1MCB0b2tlbnMuDQogICAgICogIDUuIENoYXJsZXMgY2FsbHMgdHJhbnNmZXJGcm9tIGFuZCByZWNlaXZlcyB0aGUgcmVtYWluaW5nIDUwIHRva2Vucw0KICAgICAqICA2LiBDaGFybGVzIHN0aWxsIGhhcyBhbiBhcHByb3ZhbCBmb3IgNTAgbW9yZSB0b2tlbnMgZnJvbSBBbGljZSwgZXZlbiB0aG91Z2ggc2hlIG5vdyBvd25zIDAgdG9rZW5zLg0KICAgICAqICA3LiBBbGljZSBwdXJjaGFzZXMgNTAgbW9yZSB0b2tlbnMNCiAgICAgKiAgOC4gQ2hhcmxlcyBzZWVzIHRoaXMsIGFuZCBpbW1lZGlhdGVseSBjYWxscyB0cmFuc2ZlckZyb20gYW5kIHJlY2VpdmVzIHRob3NlIDUwIHRva2Vucy4NCiAgICAgKg0KICAgICAqIFNjZW5hcmlvIDI6DQogICAgICoNCiAgICAgKiBUaGlzIGlzIGEgcmFjZSBjb25kaXRpb24uIFRvIG1pdGlnYXRlIHRoaXMgcHJvYmxlbSwgQWxpY2Ugc2hvdWxkIHNldCB0aGUgYWxsb3dhbmNlIHRvIDAgaW4gc3RlcCAyLA0KICAgICAqIHRoZW4gd2FpdCB1bnRpbCBpdCdzIG1pbmVkLCB0aGVuIGlmIEJvYiBkaWRuJ3QgdGFrZSB0aGUgMTAwIHNoZSBjYW4gc2V0IHRvIDUwLiAoT3RoZXJ3aXNlIEJvYiBtYXkNCiAgICAgKiBwb3RlbnRpYWxseSBnZXQgMTUwIHRva2VucykNCiAgICAgKg0KICAgICAqDQogICAgICogIDEuIEFsaWNlIGFwcHJvdmVzIEJvYiBmb3IgMTAwLA0KICAgICAqICAyLiBBbGljZSBjaGFuZ2VzIGl0IHRvIDUwDQogICAgICogIDMuIEJvYiBzZWVzIHRoZSBjaGFuZ2UgaW4gdGhlIG1lbXBvb2wgYmVmb3JlIGl0J3MgbWluZWQsIGFuZCBzZW5kcyBhIG5ldyB0cmFuc2FjdGlvbg0KICAgICAqICAgICB0aGF0IHdpbGwgaG9wZWZ1bGx5IHdpbiB0aGUgcmFjZSBhbmQgd2l0aGRyYXcgdGhlIDEwMCBmaXJzdCwgbWVhbndoaWxlIHRoZSA1MCB3aWxsDQogICAgICogICAgIGJlIG1pbmVkIGFmdGVyIGFuZCBhbGxvdyBCb2IgdG8gd2l0aGRyYXcgYW5vdGhlciA1MC4NCiAgICAgKg0KICAgICAqDQogICAgICovDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgbm90UGVuZGluZ1dpdGhkcmF3YWwNCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IF92YWx1ZSkgcmV0dXJuIGZhbHNlOyAvLyBEb24ndCBhbGxvdyBtb3JlIHRoYW4gdGhleSBjdXJyZW50bHkgaGF2ZSAoYm91bmRzIGNoZWNrKQ0KICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzJiMxODA7DQogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLDApYCBpZiBpdCBpcyBub3QNCiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6DQogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQ0KICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7DQogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgcmV0dXJuIGEgYm9vbCBhcyBwYXJ0IG9mIHRoZSBFUkMyMA0KICAgIH0NCg0KDQogICAgLyoqDQogICAgICogRVJDLTIwIEFwcHJvdmVzIGFuZCB0aGVuIGNhbGxzIHRoZSByZWNlaXZpbmcgY29udHJhY3QNCiAgICAqLw0KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSBub3RQZW5kaW5nV2l0aGRyYXdhbA0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCg0KICAgICAgICAvL2NhbGwgdGhlIHJlY2VpdmVBcHByb3ZhbCBmdW5jdGlvbiBvbiB0aGUgY29udHJhY3QgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQuIFRoaXMgY3JhZnRzIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgbWFudWFsbHkgc28gb25lIGRvZXNuJ3QgaGF2ZSB0byBpbmNsdWRlIGEgY29udHJhY3QgaW4gaGVyZSBqdXN0IGZvciB0aGlzLg0KICAgICAgICAvL3JlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW5Db250cmFjdCwgYnl0ZXMgX2V4dHJhRGF0YSkNCiAgICAgICAgLy9pdCBpcyBhc3N1bWVkIHRoYXQgd2hlbiBkb2VzIHRoaXMgdGhhdCB0aGUgY2FsbCAqc2hvdWxkKiBzdWNjZWVkLCBvdGhlcndpc2Ugb25lIHdvdWxkIHVzZSB2YW5pbGxhIGFwcHJvdmUgaW5zdGVhZC4NCiAgICAgICAgaWYoIV9zcGVuZGVyLmNhbGwoYnl0ZXM0KGJ5dGVzMzIoc2hhMygicmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MsdWludDI1NixhZGRyZXNzLGJ5dGVzKSIpKSksIG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSkpIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEVSQzIwIEEgY29udHJhY3QgYXR0ZW1wdHMgdG8gZ2V0IHRoZSBjb2lucw0KICAgICAqIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gDQogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXINCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQNCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQNCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpDQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIC8vIG5vdGUgdGhhdCB3ZSBjYW4ndCB1c2Ugbm90UGVuZGluZ1dpdGhkcmF3YWwgbW9kaWZpZXIgaGVyZSBzaW5jZSB0aGlzIGZ1bmN0aW9uIGRvZXMgYSB0cmFuc2Zlcg0KICAgICAgICAvLyBvbiB0aGUgYmVoYWxmIG9mIF9mcm9tDQogICAgICAgIGlmICh3aXRoZHJhd2FsUmVxdWVzdHNbX2Zyb21dLnNpbmNlQmxvY2sgPiAwKSB0aHJvdzsgIC8vIGNhbid0IG1vdmUgdG9rZW5zIHdoZW4gX2Zyb20gaXMgcGVuZGluZyB3aXRoZHJhd2FsDQogICAgICAgIGlmICh3aXRoZHJhd2FsUmVxdWVzdHNbX3RvXS5zaW5jZUJsb2NrID4gMCkgdGhyb3c7ICAgIC8vIGNhbid0IG1vdmUgdG9rZW5zIHdoZW4gX3RvIGlzIHBlbmRpbmcgd2l0aGRyYXdhbA0KICAgICAgICBpZiAoYmFsYW5jZU9mW19mcm9tXSA8IF92YWx1ZSkgdGhyb3c7ICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gNCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHRocm93OyAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cw0KICAgICAgICBpZiAoX3ZhbHVlID4gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSkgdGhyb3c7ICAgICAvLyBDaGVjayBhbGxvd2FuY2UNCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyDQogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50DQogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiB3aXRoZHJhd2FsSW5pdGlhdGUgaW5pdGlhdGVzIHRoZSB3aXRoZHJhd2FsIGJ5IGdvaW5nIGludG8gYSB3YWl0aW5nIHBlcmlvZA0KICAgICAqIEl0IHJlbWVtYmVycyB0aGUgYmxvY2sgbnVtYmVyICYgYW1vdW50IGhlbGQgYXQgdGhlIHRpbWUgb2YgcmVxdWVzdC4NCiAgICAgKiBUb2tlbnMgY2Fubm90IGJlIG1vdmVkIG91dCBkdXJpbmcgdGhlIHdhaXRpbmcgcGVyaW9kLCBsb2NraW5nIHRoZSB0b2tlbnMgdW50aWwgdGhlbi4NCiAgICAgKiBBZnRlciB0aGUgd2FpdGluZyBwZXJpb2QgZmluaXNoZXMsIHRoZSBjYWxsIHdpdGhkcmF3YWxDb21wbGV0ZQ0KICAgICAqDQogICAgICogR2FzOiA2NDQ5MA0KICAgICAqDQogICAgICovDQogICAgZnVuY3Rpb24gd2l0aGRyYXdhbEluaXRpYXRlKCkgbm90UGVuZGluZ1dpdGhkcmF3YWwgew0KICAgICAgICBXaXRoZHJhd2FsU3RhcnRlZChtc2cuc2VuZGVyLCBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0pOw0KICAgICAgICB3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0gPSB3aXRoZHJhd2FsUmVxdWVzdChibG9jay5udW1iZXIsIGJhbGFuY2VPZlttc2cuc2VuZGVyXSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogd2l0aGRyYXdhbENvbXBsZXRlIGlzIGNhbGxlZCBhZnRlciB0aGUgd2FpdGluZyBwZXJpb2QuIFRoZSBldGhlciB3aWxsIGJlDQogICAgICogcmV0dXJuZWQgdG8gdGhlIGNhbGxlciBhbmQgdGhlIHRva2VucyB3aWxsIGJlIGJ1cm5lZC4NCiAgICAgKiBBIHJld2FyZCB3aWxsIGJlIGlzc3VlZCBiYXNlZCBvbiB0aGUgY3VycmVudCBhbW91bnQgaW4gdGhlIGZlZVBvdCwgcmVsYXRpdmUgdG8gdGhlDQogICAgICogYW1vdW50IHRoYXQgd2FzIHJlcXVlc3RlZCBmb3Igd2l0aGRyYXdhbCB3aGVuIHdpdGhkcmF3YWxJbml0aWF0ZSgpIHdhcyBjYWxsZWQuDQogICAgICoNCiAgICAgKiBHYXM6IDMwOTQ2DQogICAgICovDQogICAgZnVuY3Rpb24gd2l0aGRyYXdhbENvbXBsZXRlKCkgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICB3aXRoZHJhd2FsUmVxdWVzdCByID0gd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdOw0KICAgICAgICBpZiAoci5zaW5jZUJsb2NrID09IDApIHRocm93Ow0KICAgICAgICBpZiAoKHIuc2luY2VCbG9jayArIGJsb2NrV2FpdCkgPiBibG9jay5udW1iZXIpIHsNCiAgICAgICAgICAgIC8vIGhvbGRlciBuZWVkcyB0byB3YWl0IHNvbWUgbW9yZSBibG9ja3MNCiAgICAgICAgICAgIFdpdGhkcmF3YWxQcmVtYXR1cmUobXNnLnNlbmRlciwgci5zaW5jZUJsb2NrICsgYmxvY2tXYWl0IC0gYmxvY2subnVtYmVyKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICB1aW50MjU2IGFtb3VudCA9IHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXS5hbW91bnQ7DQogICAgICAgIHVpbnQyNTYgcmV3YXJkID0gY2FsY3VsYXRlUmV3YXJkKHIuYW1vdW50KTsNCiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdLnNpbmNlQmxvY2sgPSAwOyAgLy8gVGhpcyB3aWxsIHVubG9jayB0aGUgaG9sZGVycyB0b2tlbnMNCiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdLmFtb3VudCA9IDA7ICAgICAgLy8gY2xlYXIgdGhlIGFtb3VudCB0aGF0IHdhcyByZXF1ZXN0ZWQNCg0KICAgICAgICBpZiAocmV3YXJkID4gMCkgew0KICAgICAgICAgICAgaWYgKGZlZVBvdCAtIHJld2FyZCA+IGZlZVBvdCkgew0KICAgICAgICAgICAgICAgIGZlZVBvdCA9IDA7IC8vIG92ZXJmbG93DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGZlZVBvdCAtPSByZXdhcmQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZG9XaXRoZHJhd2FsKHJld2FyZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVybiB0aGUgdG9rZW5zIGFuZCBzZW5kIGJhY2sgdGhlIGV0aGVyDQogICAgICAgIFdpdGhkcmF3YWxEb25lKG1zZy5zZW5kZXIsIGFtb3VudCwgcmV3YXJkKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBSZXdhcmQgaXMgYmFzZWQgb24gdGhlIGFtb3VudCBoZWxkLCByZWxhdGl2ZSB0byB0b3RhbCBzdXBwbHkgb2YgdG9rZW5zLg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVJld2FyZCh1aW50MjU2IHYpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICAgICAgdWludDI1NiByZXdhcmQgPSAwOw0KICAgICAgICBpZiAoZmVlUG90ID4gMCkgew0KICAgICAgICAgICAgcmV3YXJkID0gZmVlUG90ICogdiAvIHRvdGFsU3VwcGx5Ow0KICAgICAgICB9DQogICAgICAgIHJldHVybiByZXdhcmQ7DQogICAgfQ0KDQogICAgLyoqIGNhbGN1bGF0ZSB0aGUgZmVlIGZvciBxdWljayB3aXRoZHJhd2FsDQogICAgICovDQogICAgZnVuY3Rpb24gY2FsY3VsYXRlRmVlKHVpbnQyNTYgdikgY29uc3RhbnQgcmV0dXJucyAgKHVpbnQyNTYpIHsNCiAgICAgICAgdWludDI1NiBmZWVSZXF1aXJlZCA9IHYgLyAxMDA7IC8vIDElDQogICAgICAgIHJldHVybiBmZWVSZXF1aXJlZDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBRdWljayB3aXRoZHJhd2FsLCBuZWVkcyB0byBzZW5kIGV0aGVyIHRvIHRoaXMgZnVuY3Rpb24gZm9yIHRoZSBmZWUuDQogICAgICoNCiAgICAgKiBHYXMgdXNlOiAzNTM4NCAoaW5jbHVkaW5nIGNhbGwgdG8gcHJvY2Vzc1dpdGhkcmF3YWwpDQogICAgKi8NCiAgICBmdW5jdGlvbiBxdWlja1dpdGhkcmF3KCkgcGF5YWJsZSBub3RQZW5kaW5nV2l0aGRyYXdhbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIC8vIGNhbGN1bGF0ZSByZXF1aXJlZCBmZWUNCiAgICAgICAgdWludDI1NiBhbW91bnQgPSBiYWxhbmNlT2ZbbXNnLnNlbmRlcl07DQogICAgICAgIGlmIChhbW91bnQgPD0gMCkgdGhyb3c7DQogICAgICAgIHVpbnQyNTYgZmVlUmVxdWlyZWQgPSBjYWxjdWxhdGVGZWUoYW1vdW50KTsNCiAgICAgICAgaWYgKG1zZy52YWx1ZSA8IGZlZVJlcXVpcmVkKSB7DQogICAgICAgICAgICBJbnN1ZmZpY2llbnRGZWUobXNnLnNlbmRlciwgZmVlUmVxdWlyZWQpOyAvLyBub3QgZW5vdWdoIGZlZXMgc2VudA0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIHVpbnQyNTYgb3ZlckFtb3VudCA9IG1zZy52YWx1ZSAtIGZlZVJlcXVpcmVkOyAvLyBjYWxjdWxhdGUgYW55IG92ZXItcGF5bWVudA0KDQogICAgICAgIGZlZVBvdCArPSBtc2cudmFsdWUgLSBvdmVyQW1vdW50OyAgICAgICAgICAgICAvLyBhZGQgZmVlIHRvIHRoZSBmZWVQb3QsIGV4Y2x1ZGluZyBhbnkgb3Zlci1wYXltZW50DQoNCiAgICAgICAgZG9XaXRoZHJhd2FsKG92ZXJBbW91bnQpOyAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGhkcmF3ICsgcmV0dXJuIGFueSBvdmVyIHBheW1lbnQNCiAgICAgICAgV2l0aGRyYXdhbERvbmUobXNnLnNlbmRlciwgYW1vdW50LCAwKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogZG8gd2l0aGRyYXdhbA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGRvV2l0aGRyYXdhbCh1aW50MjU2IGV4dHJhKSBpbnRlcm5hbCB7DQogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gYmFsYW5jZU9mW21zZy5zZW5kZXJdOw0KICAgICAgICBpZiAoYW1vdW50IDw9IDApIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAvLyBjYW5ub3Qgd2l0aGRyYXcNCiAgICAgICAgaWYgKGFtb3VudCArIGV4dHJhID4gdGhpcy5iYWxhbmNlKSB7DQogICAgICAgICAgICB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRyYWN0IGRvZXNuJ3QgaGF2ZSBlbm91Z2ggYmFsYW5jZQ0KICAgICAgICB9DQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IDA7DQogICAgICAgIGlmICh0b3RhbFN1cHBseSA+IHRvdGFsU3VwcGx5IC0gYW1vdW50KSB7DQogICAgICAgICAgICB0b3RhbFN1cHBseSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGxldCBpdCBvdmVyZmxvdw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdG90YWxTdXBwbHkgLT0gYW1vdW50OyAgICAgICAgICAgICAgICAgICAvLyBkZWZsYXRlIHRoZSBzdXBwbHkhDQogICAgICAgIH0NCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMCwgYW1vdW50KTsgICAgICAgICAgICAgLy8gYnVybiBiYWJ5IGJ1cm4NCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoYW1vdW50ICsgZXh0cmEpKSB0aHJvdzsgLy8gcmV0dXJuIGJhY2sgdGhlIGV0aGVyIG9yIHJvbGxiYWNrIGlmIGZhaWxlZA0KICAgIH0NCg0KDQogICAgLyoqDQogICAgICogRmFsbGJhY2sgZnVuY3Rpb24gd2hlbiBzZW5kaW5nIGV0aGVyIHRvIHRoZSBjb250cmFjdA0KICAgICAqIEdhcyB1c2U6IDY1MDUxDQogICAgKi8NCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIG5vdFBlbmRpbmdXaXRoZHJhd2FsIHsNCiAgICAgICAgdWludDI1NiBhbW91bnQgPSBtc2cudmFsdWU7ICAgICAgICAgLy8gYW1vdW50IHRoYXQgd2FzIHNlbnQNCiAgICAgICAgaWYgKGFtb3VudCA8PSAwKSB0aHJvdzsgICAgICAgICAgICAgLy8gbmVlZCB0byBzZW5kIHNvbWUgRVRIDQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSBhbW91bnQ7ICAgIC8vIG1pbnQgbmV3IHRva2Vucw0KICAgICAgICB0b3RhbFN1cHBseSArPSBhbW91bnQ7ICAgICAgICAgICAgICAvLyB0cmFjayB0aGUgc3VwcGx5DQogICAgICAgIFRyYW5zZmVyKDAsIG1zZy5zZW5kZXIsIGFtb3VudCk7ICAgIC8vIG5vdGlmeSBvZiB0aGUgZXZlbnQNCiAgICAgICAgRGVwb3NpdGVkKG1zZy5zZW5kZXIsIGFtb3VudCk7DQogICAgfQ0KfQ=='