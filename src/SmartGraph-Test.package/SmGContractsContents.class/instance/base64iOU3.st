base 64 content
base64iOU3
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KY29udHJhY3QgUFRPWVRva2VuIHsNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOw0KfQ0KDQpjb250cmFjdCBJT1Ugew0KICAvLyBTdG9yZSB0aGUgYW1vdW50IG9mIElPVXMgcHVyY2hhc2VkIGJ5IGEgYnV5ZXINCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgaW91X3B1cmNoYXNlZDsNCg0KICAvLyBTdG9yZSB0aGUgYW1vdW50IG9mIEVUSCBzZW50IGluIGJ5IGEgYnV5ZXINCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgZXRoX3NlbnQ7DQoNCiAgLy8gVG90YWwgSU9VcyBhdmFpbGFibGUgdG8gc2VsbA0KICB1aW50MjU2IHB1YmxpYyB0b3RhbF9pb3VfYXZhaWxhYmxlID0gNDAwMDAwMDAwOw0KDQogIC8vIFRvdGFsIElPVXMgcHVyY2hhc2VkIGJ5IGFsbCBidXllcnMNCiAgdWludDI1NiBwdWJsaWMgdG90YWxfaW91X3B1cmNoYXNlZDsNCg0KICAvLyBUb3RhbCBJT1Ugd2l0aGRyYXduIGJ5IGFsbCBidXllcnMgKGtlZXAgdHJhY2sgdG8gcHJvdGVjdCBidXllcnMpDQogIHVpbnQyNTYgcHVibGljIHRvdGFsX2lvdV93aXRoZHJhd247DQoNCiAgdWludDI1NiBwdWJsaWMgcHJpY2VfaW5fd2VpID0gMTAwMDAwMDAwMDAwMDAwOw0KDQogIC8vICBNVEwgdG9rZW4gY29udHJhY3QgYWRkcmVzcyAoSU9VIG9mZmVyaW5nKQ0KICBQVE9ZVG9rZW4gcHVibGljIHRva2VuID0gUFRPWVRva2VuKDB4OEFlNEJGMkMzM2E4ZTY2N2RlMzRCNTQ5MzhCMGNjRDAzRWI4Q0MwNik7DQoNCiAgLy8gVGhlIHNlbGxlcidzIGFkZHJlc3MgKHRvIHJlY2VpdmUgRVRIIHVwb24gZGlzdHJpYnV0aW9uLCBhbmQgZm9yIGF1dGhpbmcgc2FmZXRpZXMpDQogIGFkZHJlc3Mgc2VsbGVyID0gMHgwMDZGRWQ5NWFEMzk3Nzc5MzhBYUUwQmFBQTExYjRjQjMzZEYwRjVhOw0KDQogIC8vIEhhbHQgZnVydGhlciBwdXJjaGFzZSBhYmlsaXR5IGp1c3QgaW4gY2FzZQ0KICBib29sIHB1YmxpYyBoYWx0X3B1cmNoYXNlczsNCg0KICBtb2RpZmllciBwd25lcigpIHsgaWYobXNnLnNlbmRlciAhPSBzZWxsZXIpIHRocm93OyBfOyB9DQoNCiAgLyoNCiAgICBTYWZldHkgdG8gd2l0aGRyYXcgdW5ib3VnaHQgdG9rZW5zIGJhY2sgdG8gc2VsbGVyLiBFbnN1cmVzIHRoZSBhbW91bnQNCiAgICB0aGF0IGJ1eWVycyBzdGlsbCBuZWVkIHRvIHdpdGhkcmF3IHJlbWFpbnMgYXZhaWxhYmxlDQogICovDQogIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW5zKCkgcHduZXIgew0KICAgIHRva2VuLnRyYW5zZmVyKHNlbGxlciwgdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpIC0gKHRvdGFsX2lvdV9wdXJjaGFzZWQgLSB0b3RhbF9pb3Vfd2l0aGRyYXduKSk7DQogIH0NCg0KICAvKg0KICAgIFNhZmV0eSB0byBwcmV2ZW50IGFueW1vcmUgcHVyY2hhc2VzL3NhbGVzIGZyb20gb2NjdXJyaW5nIGluIHRoZSBldmVudCBvZg0KICAgIHVuZm9yZXNlZW4gaXNzdWUuIEJ1eWVyIHdpdGhkcmF3YWxzIHN0aWxsIHJlbWFpbiBlbmFibGVkLg0KICAqLw0KICBmdW5jdGlvbiBoYWx0UHVyY2hhc2VzKCkgcHduZXIgew0KICAgIGhhbHRfcHVyY2hhc2VzID0gdHJ1ZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHJlc3VtZVB1cmNoYXNlcygpIHB3bmVyIHsNCiAgICBoYWx0X3B1cmNoYXNlcyA9IGZhbHNlOw0KICB9DQoNCiAgLyoNCiAgICBVcGRhdGUgYXZhaWxhYmxlIElPVSB0byBwdXJjaGFzZQ0KICAqLw0KICBmdW5jdGlvbiB1cGRhdGVBdmFpbGFiaWxpdHkodWludDI1NiBfaW91X2Ftb3VudCkgcHduZXIgew0KICAgIGlmKF9pb3VfYW1vdW50IDwgdG90YWxfaW91X3B1cmNoYXNlZCkgdGhyb3c7DQoNCiAgICB0b3RhbF9pb3VfYXZhaWxhYmxlID0gX2lvdV9hbW91bnQ7DQogIH0NCg0KICAvKg0KICAgIFVwZGF0ZSBJT1UgcHJpY2UNCiAgKi8NCiAgZnVuY3Rpb24gdXBkYXRlUHJpY2UodWludDI1NiBfcHJpY2UpIHB3bmVyIHsNCiAgICBwcmljZV9pbl93ZWkgPSBfcHJpY2U7DQogIH0NCg0KICAvKg0KICAgIFJlbGVhc2UgYnV5ZXIncyBFVEggdG8gc2VsbGVyIE9OTFkgaWYgYW1vdW50IG9mIGNvbnRyYWN0J3MgdG9rZW5zIGJhbGFuY2UNCiAgICBpcyA+PSB0byB0aGUgYW1vdW50IHRoYXQgc3RpbGwgbmVlZHMgdG8gYmUgd2l0aGRyYXduLiBQcm90ZWN0cyBidXllci4NCg0KICAgIFRoZSBzZWxsZXIgbXVzdCBjYWxsIHRoaXMgZnVuY3Rpb24gbWFudWFsbHkgYWZ0ZXIgZGVwb3NpdGluZyB0aGUgYWRlcXVhdGUNCiAgICBhbW91bnQgb2YgdG9rZW5zIGZvciBhbGwgYnV5ZXJzIHRvIGNvbGxlY3QNCg0KICAgIFRoaXMgZWZmZWN0aXZlbHkgZW5kcyB0aGUgc2FsZSwgYnV0IHdpdGhkcmF3YWxzIHJlbWFpbiBvcGVuDQogICovDQogIGZ1bmN0aW9uIHBheVNlbGxlcigpIHB3bmVyIHsNCiAgICAvLyBub3QgZW5vdWdoIHRva2VucyBpbiBiYWxhbmNlIHRvIHJlbGVhc2UgRVRILCBwcm90ZWN0IGJ1eWVyIGFuZCBhYm9ydA0KICAgIGlmKHRva2VuLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKSA8ICh0b3RhbF9pb3VfcHVyY2hhc2VkIC0gdG90YWxfaW91X3dpdGhkcmF3bikpIHRocm93Ow0KDQogICAgLy8gSGFsdCBmdXJ0aGVyIHB1cmNoYXNlcyB0byBwcmV2ZW50IGFjY2lkZW50YWwgb3Zlci1zZWxsaW5nDQogICAgaGFsdF9wdXJjaGFzZXMgPSB0cnVlOw0KDQogICAgLy8gUmVsZWFzZSBidXllcidzIEVUSCB0byB0aGUgc2VsbGVyDQogICAgc2VsbGVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7DQogIH0NCg0KICBmdW5jdGlvbiB3aXRoZHJhdygpIHBheWFibGUgew0KICAgIC8qDQogICAgICBNYWluIG1lY2hhbmlzbSB0byBlbnN1cmUgYSBidXllcidzIHB1cmNoYXNlL0VUSC9JT1UgaXMgc2FmZS4NCg0KICAgICAgUmVmdW5kIHRoZSBidXllcidzIEVUSCBpZiB3ZSdyZSBiZXlvbmQgdGhlIGN1dC1vZmYgZGF0ZSBvZiBvdXIgZGlzdHJpYnV0aW9uDQogICAgICBwcm9taXNlIEFORCBpZiB0aGUgY29udHJhY3QgZG9lc24ndCBoYXZlIGFuIGFkZXF1YXRlIGFtb3VudCBvZiB0b2tlbnMNCiAgICAgIHRvIGRpc3RyaWJ1dGUgdG8gdGhlIGJ1eWVyLiBUaW1lLXNlbnNpdGl2ZSBidXllci9FVEggcHJvdGVjdGlvbiBpcyBvbmx5DQogICAgICBhcHBsaWNhYmxlIGlmIHRoZSBjb250cmFjdCBkb2Vzbid0IGhhdmUgYWRlcXVhdGUgdG9rZW5zIGZvciB0aGUgYnV5ZXIuDQoNCiAgICAgIFRoZSAiYWRlcXVhY3kiIGNoZWNrIHByZXZlbnRzIHRoZSBzZWxsZXIgYW5kL29yIHRoaXJkIHBhcnR5IGF0dGFja2VyDQogICAgICBmcm9tIGxvY2tpbmcgZG93biBidXllcnMnIEVUSCBieSBzZW5kaW5nIGluIGFuIGFyYml0cmFyeSBhbW91bnQgb2YgdG9rZW5zLg0KDQogICAgICBJZiBmb3Igd2hhdGV2ZXIgcmVhc29uIHRoZSB0b2tlbnMgcmVtYWluIGxvY2tlZCBmb3IgYW4gdW5leHBlY3RlZCBwZXJpb2QNCiAgICAgIGJleW9uZCB0aGUgdGltZSBkZWZpbmVkIGJ5IGJsb2NrLm51bWJlciwgcGF0aWVudCBidXllcnMgbWF5IHN0aWxsIHdhaXQgdW50aWwNCiAgICAgIHRoZSBjb250cmFjdCBpcyBmaWxsZWQgd2l0aCB0aGVpciBwdXJjaGFzZWQgSU9Vcy90b2tlbnMuIE9uY2UgdGhlIHRva2Vucw0KICAgICAgYXJlIGhlcmUsIHRoZXkgY2FuIGluaXRpYXRlIGEgd2l0aGRyYXcoKSB0byByZXRyaWV2ZSB0aGVpciB0b2tlbnMuIEF0dGVtcHRpbmcNCiAgICAgIHRvIHdpdGhkcmF3IGFueSBzb29uZXIgKGFmdGVyIHRoZSBibG9jayBoYXMgYmVlbiBtaW5lZCwgYnV0IHRva2VucyBub3QgYXJyaXZlZCkNCiAgICAgIHdpbGwgcmVzdWx0IGluIGEgcmVmdW5kIG9mIGJ1eWVyJ3MgRVRILg0KICAgICovDQogICAgaWYoYmxvY2subnVtYmVyID4gNDE5OTk5OSAmJiBpb3VfcHVyY2hhc2VkW21zZy5zZW5kZXJdID4gdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpKSB7DQogICAgICAvLyBXZSBkaWRuJ3QgZnVsZmlsbCBvdXIgcHJvbWlzZSB0byBoYXZlIGFkZXF1YXRlIHRva2VucyB3aXRoZHJhd2FibGUgYXQgeHggdGltZQ0KICAgICAgLy8gUmVmdW5kIHRoZSBidXllcidzIEVUSCBhdXRvbWF0aWNhbGx5IGluc3RlYWQNCiAgICAgIHVpbnQyNTYgZXRoX3RvX3JlZnVuZCA9IGV0aF9zZW50W21zZy5zZW5kZXJdOw0KDQogICAgICAvLyBJZiB0aGUgdXNlciBkb2Vzbid0IGhhdmUgYW55IEVUSCBvciB0b2tlbnMgdG8gd2l0aGRyYXcsIGdldCBvdXQgQVNBUA0KICAgICAgaWYoZXRoX3RvX3JlZnVuZCA9PSAwIHx8IGlvdV9wdXJjaGFzZWRbbXNnLnNlbmRlcl0gPT0gMCkgdGhyb3c7DQoNCiAgICAgIC8vIEFkanVzdCB0b3RhbCBwdXJjaGFzZWQgc28gb3RoZXJzIGNhbiBidXksIGFuZCBzbyBudW1iZXJzIGFsaWduIHdpdGggdG90YWxfaW91X3dpdGhkcmF3bg0KICAgICAgdG90YWxfaW91X3B1cmNoYXNlZCAtPSBpb3VfcHVyY2hhc2VkW21zZy5zZW5kZXJdOw0KDQogICAgICAvLyBDbGVhciByZWNvcmQgb2YgYnV5ZXIncyBFVEggYW5kIElPVSBiYWxhbmNlIGJlZm9yZSByZWZ1bmRpbmcNCiAgICAgIGV0aF9zZW50W21zZy5zZW5kZXJdID0gMDsNCiAgICAgIGlvdV9wdXJjaGFzZWRbbXNnLnNlbmRlcl0gPSAwOw0KDQogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aF90b19yZWZ1bmQpOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIC8qDQogICAgICBDaGVjayBpZiB0aGVyZSBpcyBhbiBhZGVxdWF0ZSBhbW91bnQgb2YgdG9rZW5zIGluIHRoZSBjb250cmFjdCB5ZXQNCiAgICAgIGFuZCBhbGxvdyB0aGUgYnV5ZXIgdG8gd2l0aGRyYXcgdG9rZW5zDQogICAgKi8NCiAgICBpZih0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkgPT0gMCB8fCBpb3VfcHVyY2hhc2VkW21zZy5zZW5kZXJdID4gdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpKSB0aHJvdzsNCg0KICAgIHVpbnQyNTYgaW91X3RvX3dpdGhkcmF3ID0gaW91X3B1cmNoYXNlZFttc2cuc2VuZGVyXTsNCg0KICAgIC8vIElmIHRoZSB1c2VyIGRvZXNuJ3QgaGF2ZSBhbnkgSU9VcyB0byB3aXRoZHJhdywgZ2V0IG91dCBBU0FQDQogICAgaWYoaW91X3RvX3dpdGhkcmF3ID09IDApIHRocm93Ow0KDQogICAgLy8gQ2xlYXIgcmVjb3JkIG9mIGJ1eWVyJ3MgSU9VIGFuZCBFVEggYmFsYW5jZSBiZWZvcmUgdHJhbnNmZXJyaW5nIG91dA0KICAgIGlvdV9wdXJjaGFzZWRbbXNnLnNlbmRlcl0gPSAwOw0KICAgIGV0aF9zZW50W21zZy5zZW5kZXJdID0gMDsNCg0KICAgIHRvdGFsX2lvdV93aXRoZHJhd24gKz0gaW91X3RvX3dpdGhkcmF3Ow0KDQogICAgLy8gRGlzdHJpYnV0ZSB0b2tlbnMgdG8gdGhlIGJ1eWVyDQogICAgdG9rZW4udHJhbnNmZXIobXNnLnNlbmRlciwgaW91X3RvX3dpdGhkcmF3KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHB1cmNoYXNlKCkgcGF5YWJsZSB7DQogICAgaWYoaGFsdF9wdXJjaGFzZXMpIHRocm93Ow0KICAgIGlmKG1zZy52YWx1ZSA9PSAwKSB0aHJvdzsNCg0KICAgIC8vIERldGVybWluZSBhbW91bnQgb2YgdG9rZW5zIHVzZXIgd2FudHMgdG8vY2FuIGJ1eQ0KICAgIHVpbnQyNTYgaW91X3RvX3B1cmNoYXNlID0gKG1zZy52YWx1ZSAqIDEwKio4KSAvIHByaWNlX2luX3dlaTsNCg0KICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgZW5vdWdoIElPVXMgbGVmdCB0byBzZWxsDQogICAgaWYoKHRvdGFsX2lvdV9wdXJjaGFzZWQgKyBpb3VfdG9fcHVyY2hhc2UpID4gdG90YWxfaW91X2F2YWlsYWJsZSkgdGhyb3c7DQoNCiAgICAvLyBVcGRhdGUgdGhlIGFtb3VudCBvZiBJT1VzIHB1cmNoYXNlZCBieSB1c2VyLiBBbHNvIGtlZXAgdHJhY2sgb2YgdGhlIHRvdGFsIEVUSCB0aGV5IHNlbnQgaW4NCiAgICBpb3VfcHVyY2hhc2VkW21zZy5zZW5kZXJdICs9IGlvdV90b19wdXJjaGFzZTsNCiAgICBldGhfc2VudFttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7DQoNCiAgICAvLyBVcGRhdGUgdGhlIHRvdGFsIGFtb3VudCBvZiBJT1VzIHB1cmNoYXNlZCBieSBhbGwgYnV5ZXJzDQogICAgdG90YWxfaW91X3B1cmNoYXNlZCArPSBpb3VfdG9fcHVyY2hhc2U7DQogIH0NCg0KICAvLyBGYWxsYmFjayBmdW5jdGlvbi9lbnRyeSBwb2ludA0KICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICBpZihtc2cudmFsdWUgPT0gMCkgew0KICAgICAgd2l0aGRyYXcoKTsNCiAgICB9DQogICAgZWxzZSB7DQogICAgICBwdXJjaGFzZSgpOw0KICAgIH0NCiAgfQ0KfQ=='