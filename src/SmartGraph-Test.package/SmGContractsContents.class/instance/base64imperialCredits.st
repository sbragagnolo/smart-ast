base 64 content
base64imperialCredits
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KY29udHJhY3QgRXJjMjBUb2tlbiB7DQogICAgLyogTWFwIGFsbCBvdXIgb3VyIGJhbGFuY2VzIGZvciBpc3N1ZWQgdG9rZW5zICovDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsNCg0KICAgIC8qIE1hcCBiZXR3ZWVuIHVzZXJzIGFuZCB0aGVpciBhcHByb3ZhbCBhZGRyZXNzZXMgYW5kIGFtb3VudHMgKi8NCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCg0KICAgIC8qIExpc3Qgb2YgYWxsIHRva2VuIGhvbGRlcnMgKi8NCiAgICBhZGRyZXNzW10gYWxsVG9rZW5Ib2xkZXJzOw0KDQogICAgLyogVGhlIG5hbWUgb2YgdGhlIGNvbnRyYWN0ICovDQogICAgc3RyaW5nIHB1YmxpYyBuYW1lOw0KDQogICAgLyogVGhlIHN5bWJvbCBmb3IgdGhlIGNvbnRyYWN0ICovDQogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7DQoNCiAgICAvKiBIb3cgbWFueSBEUHMgYXJlIGluIHVzZSBpbiB0aGlzIGNvbnRyYWN0ICovDQogICAgdWludDggcHVibGljIGRlY2ltYWxzOw0KDQogICAgLyogRGVmaW5lcyB0aGUgY3VycmVudCBzdXBwbHkgb2YgdGhlIHRva2VuIGluIGl0cyBvd24gdW5pdHMgKi8NCiAgICB1aW50MjU2IHRvdGFsU3VwcGx5QW1vdW50ID0gMDsNCg0KICAgIC8qIE91ciB0cmFuc2ZlciBldmVudCB0byBmaXJlIHdoZW5ldmVyIHdlIHNoaWZ0IFNNUlQgYXJvdW5kICovDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7DQoNCiAgICAvKiBPdXIgYXBwcm92YWwgZXZlbnQgd2hlbiBvbmUgdXNlciBhcHByb3ZlcyBhbm90aGVyIHRvIGNvbnRyb2wgKi8NCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCg0KICAgIC8qIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgdG9rZW4gd2l0aCB0aGUgc3BlY2lmaWVkIGRldGFpbHMuICovDQogICAgZnVuY3Rpb24gRXJjMjBUb2tlbihzdHJpbmcgX25hbWUsIHN0cmluZyBfc3ltYm9sLCB1aW50OCBfZGVjaW1hbHMpIHsNCiAgICAgICAgbmFtZSA9IF9uYW1lOw0KICAgICAgICBzeW1ib2wgPSBfc3ltYm9sOw0KICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsNCiAgICB9DQoNCiAgICAgLyogVHJhbnNmZXIgZnVuZHMgYmV0d2VlbiB0d28gYWRkcmVzc2VzIHRoYXQgYXJlIG5vdCB0aGUgY3VycmVudCBtc2cuc2VuZGVyIC0gdGhpcyByZXF1aXJlcyBhcHByb3ZhbCB0byBoYXZlIGJlZW4gc2V0IHNlcGFyYXRlbHkgYW5kIGZvbGxvd3Mgc3RhbmRhcmQgRVJDMjAgZ3VpZGVsaW5lcyAqLw0KICAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudCAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICYmIF9hbW91bnQgPiAwICYmIGJhbGFuY2VzW190b10gKyBfYW1vdW50ID4gYmFsYW5jZXNbX3RvXSkgew0KICAgICAgICAgICAgYm9vbCBpc05ldyA9IGJhbGFuY2VzW190b10gPCAxOw0KICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF9hbW91bnQ7DQogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfYW1vdW50Ow0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfYW1vdW50Ow0KICAgICAgICAgICAgaWYgKGlzTmV3KQ0KICAgICAgICAgICAgICAgIHRva2VuT3duZXJBZGQoX3RvKTsNCiAgICAgICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPCAxKQ0KICAgICAgICAgICAgICAgIHRva2VuT3duZXJSZW1vdmUoX2Zyb20pOw0KICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLyogQWRkcyBhbiBhcHByb3ZhbCBmb3IgdGhlIHNwZWNpZmllZCBhY2NvdW50IHRvIHNwZW5kIG1vbmV5IG9mIHRoZSBtZXNzYWdlIHNlbmRlciB1cCB0byB0aGUgZGVmaW5lZCBsaW1pdCAqLw0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfYW1vdW50Ow0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qIEdldHMgdGhlIGN1cnJlbnQgYWxsb3dhbmNlIHRoYXQgaGFzIGJlZW4gYXBwcm92ZWQgZm9yIHRoZSBzcGVjaWZpZWQgc3BlbmRlciBvZiB0aGUgb3duZXIgYWRkcmVzcyAqLw0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsNCiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogICAgfQ0KDQogICAgLyogR2V0cyB0aGUgdG90YWwgc3VwcGx5IGF2YWlsYWJsZSBvZiB0aGlzIHRva2VuICovDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICAgIHJldHVybiB0b3RhbFN1cHBseUFtb3VudDsNCiAgICB9DQoNCiAgICAvKiBHZXRzIHRoZSBiYWxhbmNlIG9mIGEgc3BlY2lmaWVkIGFjY291bnQgKi8NCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgew0KICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCiAgICB9DQoNCiAgICAvKiBUcmFuc2ZlciB0aGUgYmFsYW5jZSBmcm9tIG93bmVyJ3MgYWNjb3VudCB0byBhbm90aGVyIGFjY291bnQgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgLyogQ2hlY2sgaWYgc2VuZGVyIGhhcyBiYWxhbmNlIGFuZCBmb3Igb3ZlcmZsb3dzICovDQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IF9hbW91bnQgfHwgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPCBiYWxhbmNlc1tfdG9dKQ0KICAgICAgICAgICAgdGhyb3c7DQoNCiAgICAgICAgLyogRG8gYSBjaGVjayB0byBzZWUgaWYgdGhleSBhcmUgbmV3LCBpZiBzbyB3ZSdsbCB3YW50IHRvIGFkZCBpdCB0byBvdXIgYXJyYXkgKi8NCiAgICAgICAgYm9vbCBpc1JlY2lwaWVudE5ldyA9IGJhbGFuY2VzW190b10gPCAxOw0KDQogICAgICAgIC8qIEFkZCBhbmQgc3VidHJhY3QgbmV3IGJhbGFuY2VzICovDQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7DQogICAgICAgIGJhbGFuY2VzW190b10gKz0gX2Ftb3VudDsNCg0KICAgICAgICAvKiBDb25zb2xpZGF0ZSBhcnJheXMgaWYgdGhleSBhcmUgbmV3IG9yIGlmIHNlbmRlciBub3cgaGFzIGVtcHR5IGJhbGFuY2UgKi8NCiAgICAgICAgaWYgKGlzUmVjaXBpZW50TmV3KQ0KICAgICAgICAgICAgdG9rZW5Pd25lckFkZChfdG8pOw0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCAxKQ0KICAgICAgICAgICAgdG9rZW5Pd25lclJlbW92ZShtc2cuc2VuZGVyKTsNCg0KICAgICAgICAvKiBGaXJlIG5vdGlmaWNhdGlvbiBldmVudCAqLw0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOw0KICAgICAgICBzdWNjZXNzID0gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKiBJZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MgaXMgbm90IGluIG91ciBvd25lciBsaXN0LCBhZGQgdGhlbSAtIHRoaXMgY2FuIGJlIGNhbGxlZCBieSBkZXNjZW5kZW50cyB0byBlbnN1cmUgdGhlIGRhdGFiYXNlIGlzIGtlcHQgdXAgdG8gZGF0ZS4gKi8NCiAgICBmdW5jdGlvbiB0b2tlbk93bmVyQWRkKGFkZHJlc3MgX2FkZHIpIGludGVybmFsIHsNCiAgICAgICAgLyogRmlyc3QgY2hlY2sgaWYgdGhleSBhbHJlYWR5IGV4aXN0ICovDQogICAgICAgIHVpbnQyNTYgdG9rZW5Ib2xkZXJDb3VudCA9IGFsbFRva2VuSG9sZGVycy5sZW5ndGg7DQogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IHRva2VuSG9sZGVyQ291bnQ7IGkrKykNCiAgICAgICAgICAgIGlmIChhbGxUb2tlbkhvbGRlcnNbaV0gPT0gX2FkZHIpDQogICAgICAgICAgICAgICAgLyogQWxyZWFkeSBmb3VuZCBzbyB3ZSBjYW4gYWJvcnQgbm93ICovDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIC8qIFRoZXkgZG9uJ3Qgc2VlbSB0byBleGlzdCwgc28gbGV0J3MgYWRkIHRoZW0gKi8NCiAgICAgICAgYWxsVG9rZW5Ib2xkZXJzLmxlbmd0aCsrOw0KICAgICAgICBhbGxUb2tlbkhvbGRlcnNbYWxsVG9rZW5Ib2xkZXJzLmxlbmd0aCAtIDFdID0gX2FkZHI7DQogICAgfQ0KDQogICAgLyogSWYgdGhlIHNwZWNpZmllZCBhZGRyZXNzIGlzIGluIG91ciBvd25lciBsaXN0LCByZW1vdmUgdGhlbSAtIHRoaXMgY2FuIGJlIGNhbGxlZCBieSBkZXNjZW5kZW50cyB0byBlbnN1cmUgdGhlIGRhdGFiYXNlIGlzIGtlcHQgdXAgdG8gZGF0ZS4gKi8NCiAgICBmdW5jdGlvbiB0b2tlbk93bmVyUmVtb3ZlKGFkZHJlc3MgX2FkZHIpIGludGVybmFsIHsNCiAgICAgICAgLyogRmluZCBvdXQgd2hlcmUgaW4gb3VyIGFycmF5IHRoZXkgYXJlICovDQogICAgICAgIHVpbnQyNTYgdG9rZW5Ib2xkZXJDb3VudCA9IGFsbFRva2VuSG9sZGVycy5sZW5ndGg7DQogICAgICAgIHVpbnQyNTYgZm91bmRJbmRleCA9IDA7DQogICAgICAgIGJvb2wgZm91bmQgPSBmYWxzZTsNCiAgICAgICAgdWludDI1NiBpOw0KICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdG9rZW5Ib2xkZXJDb3VudDsgaSsrKQ0KICAgICAgICAgICAgaWYgKGFsbFRva2VuSG9sZGVyc1tpXSA9PSBfYWRkcikgew0KICAgICAgICAgICAgICAgIGZvdW5kSW5kZXggPSBpOw0KICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAvKiBJZiB3ZSBkaWRuJ3QgZmluZCB0aGVtIGp1c3QgcmV0dXJuICovDQogICAgICAgIGlmICghZm91bmQpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgLyogV2Ugbm93IG5lZWQgdG8gc2h1ZmZsZSBkb3duIHRoZSBhcnJheSAqLw0KICAgICAgICBmb3IgKGkgPSBmb3VuZEluZGV4OyBpIDwgdG9rZW5Ib2xkZXJDb3VudCAtIDE7IGkrKykNCiAgICAgICAgICAgIGFsbFRva2VuSG9sZGVyc1tpXSA9IGFsbFRva2VuSG9sZGVyc1tpICsgMV07DQogICAgICAgIGFsbFRva2VuSG9sZGVycy5sZW5ndGgtLTsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IEltcGVyaWFsQ3JlZGl0cyBpcyBFcmMyMFRva2VuKCJJbXBlcmlhbCBDcmVkaXRzIiwgIlhJQyIsIDApIHsNCiAgICBhZGRyZXNzIG93bmVyOw0KICAgIGJvb2wgcHVibGljIGlzSWNvICA9IHRydWU7DQoNCiAgICBmdW5jdGlvbiBpY29XaXRoZHJhdygpIHsNCiAgICAgIGlmICh0aGlzLmJhbGFuY2UgPT0gMCB8fCBtc2cuc2VuZGVyICE9IG93bmVyKQ0KICAgICAgICB0aHJvdzsNCiAgICAgIGlmICghb3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKQ0KICAgICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpY29DbG9zZSgpIHsNCiAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyIHx8ICFpc0ljbykNCiAgICAgICAgdGhyb3c7DQogICAgICBpZiAodGhpcy5iYWxhbmNlID4gMCkNCiAgICAgICAgaWYgKCFvd25lci5zZW5kKHRoaXMuYmFsYW5jZSkpDQogICAgICAgICAgdGhyb3c7DQogICAgICB1aW50MjU2IHJlbWFpbmluZyA9IDEwMDAwMDAwMDAgLSB0b3RhbFN1cHBseUFtb3VudDsNCiAgICAgIGlmIChyZW1haW5pbmcgPiAwKSB7DQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IHJlbWFpbmluZzsNCiAgICAgICAgdG90YWxTdXBwbHlBbW91bnQgPSAxMDAwMDAwMDAwOw0KICAgICAgfQ0KICAgICAgaXNJY28gPSBmYWxzZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBkZXN0cm95Q3JlZGl0cyh1aW50MjU2IGFtb3VudCkgew0KICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdIDwgYW1vdW50KQ0KICAgICAgICB0aHJvdzsNCiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IGFtb3VudDsNCiAgICAgIHRvdGFsU3VwcGx5QW1vdW50IC09IGFtb3VudDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBJbXBlcmlhbENyZWRpdHMoKSB7DQogICAgICBvd25lcj1tc2cuc2VuZGVyOw0KICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAxMDAwMDA7DQogICAgICB0b3RhbFN1cHBseUFtb3VudCA9IDEwMDAwMDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICAgICAgaWYgKHRvdGFsU3VwcGx5QW1vdW50ID49IDEwMDAwMDAwMDAgfHwgIWlzSWNvKQ0KICAgICAgICAgIHRocm93Ow0KICAgICAgICB1aW50MjU2IG1pbnRBbW91bnQgPSBtc2cudmFsdWUgLyAxMDAwMDAwMDAwMDAwMDA7DQogICAgICAgIHVpbnQyNTYgbWF4TWludCA9IDEwMDAwMDAwMDAgLSB0b3RhbFN1cHBseUFtb3VudDsNCiAgICAgICAgaWYgKG1pbnRBbW91bnQgPiBtYXhNaW50KQ0KICAgICAgICAgIG1pbnRBbW91bnQgPSBtYXhNaW50Ow0KICAgICAgICB1aW50MjU2IGNoYW5nZSA9IG1zZy52YWx1ZSAtICgxMDAwMDAwMDAwMDAwMDAgKiBtaW50QW1vdW50KTsNCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoY2hhbmdlKSkNCiAgICAgICAgICB0aHJvdzsNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gbWludEFtb3VudDsNCiAgICAgICAgdG90YWxTdXBwbHlBbW91bnQgKz0gbWludEFtb3VudDsNCiAgICB9DQp9'