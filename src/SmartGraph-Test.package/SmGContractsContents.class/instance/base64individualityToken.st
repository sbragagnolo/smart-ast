base 64 content
base64individualityToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4wOw0KDQpsaWJyYXJ5IFRva2VuRXZlbnRMaWIgew0KICAgIC8qDQogICAgICogV2hlbiB1bmRlcmx5aW5nIHNvbGlkaXR5IGlzc3VlIGlzIGZpeGVkIHRoaXMgbGlicmFyeSB3aWxsIG5vdCBiZSBuZWVkZWQuDQogICAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL3NvbGlkaXR5L2lzc3Vlcy8xMjE1DQogICAgICovDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLA0KICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfdG8pOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsDQogICAgICAgICAgICAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyKTsNCg0KICAgIGZ1bmN0aW9uIF9UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgaW50ZXJuYWwgew0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfQXBwcm92YWwoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGludGVybmFsIHsNCiAgICAgICAgQXBwcm92YWwoX293bmVyLCBfc3BlbmRlcik7DQogICAgfQ0KfQ0KDQpjb250cmFjdCBUb2tlbkludGVyZmFjZSB7DQogICAgLyoNCiAgICAgKiAgRXZlbnRzDQogICAgICovDQogICAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgX293bmVyKTsNCiAgICBldmVudCBEZXN0cm95KGFkZHJlc3MgX293bmVyKTsNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBNaW50ZXJBZGRlZChhZGRyZXNzIHdobyk7DQogICAgZXZlbnQgTWludGVyUmVtb3ZlZChhZGRyZXNzIHdobyk7DQoNCiAgICAvKg0KICAgICAqICBNaW50aW5nDQogICAgICovDQogICAgLy8vIEBkZXYgTWludHMgYSBuZXcgdG9rZW4uDQogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX293bmVyKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KDQogICAgLy8vIEBkZXYgRGVzdHJveSBhIHRva2VuDQogICAgLy8vIEBwYXJhbSBfb3duZXIgQnl0ZXMzMiBpZCBvZiB0aGUgb3duZXIgb2YgdGhlIHRva2VuDQogICAgZnVuY3Rpb24gZGVzdHJveShhZGRyZXNzIF9vd25lcikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAZGV2IEFkZCBhIG5ldyBtaW50ZXINCiAgICAvLy8gQHBhcmFtIHdobyBBZGRyZXNzIHRoZSBhZGRyZXNzIHRoYXQgY2FuIG5vdyBtaW50IHRva2Vucy4NCiAgICBmdW5jdGlvbiBhZGRNaW50ZXIoYWRkcmVzcyB3aG8pIHJldHVybnMgKGJvb2wpOw0KDQogICAgLy8vIEBkZXYgUmVtb3ZlIGEgbWludGVyDQogICAgLy8vIEBwYXJhbSB3aG8gQWRkcmVzcyB0aGUgYWRkcmVzcyB0aGF0IHdpbGwgbm8gbG9uZ2VyIGJlIGEgbWludGVyLg0KICAgIGZ1bmN0aW9uIHJlbW92ZU1pbnRlcihhZGRyZXNzIHdobykgcmV0dXJucyAoYm9vbCk7DQoNCiAgICAvKg0KICAgICAqICBSZWFkIGFuZCB3cml0ZSBzdG9yYWdlIGZ1bmN0aW9ucw0KICAgICAqLw0KDQogICAgLy8vIEBkZXYgUmV0dXJuIHRoZSBudW1iZXIgb2YgdG9rZW5zDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50IHN1cHBseSk7DQoNCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyIHRva2VuIHRvIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQoNCiAgICAvLy8gQGRldiBBbGxvd3MgYWxsb3dlZCB0aGlyZCBwYXJ0eSB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyLiBSZXR1cm5zIHN1Y2Nlc3MuDQogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIG9mIHRva2VuIG93bmVyLg0KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgbmV3IHRva2VuIG93bmVyLg0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdGhlIHRva2VuIHRvIHRyYW5zZmVyLg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQoNCiAgICAvLy8gQGRldiBTZXRzIGFwcHJvdmFsIHNwZW5kZXIgdG8gdHJhbnNmZXIgb3duZXJzaGlwIG9mIHRva2VuLiBSZXR1cm5zIHN1Y2Nlc3MuDQogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHNwZW5kZXIuLg0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdG9rZW4gdGhhdCBjYW4gYmUgc3BlbmQuDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8qDQogICAgICogUmVhZCBzdG9yYWdlIGZ1bmN0aW9ucw0KICAgICAqLw0KICAgIC8vLyBAZGV2IFJldHVybnMgaWQgb2YgdG9rZW4gb3duZWQgYnkgZ2l2ZW4gYWRkcmVzcyAoZW5jb2RlZCBhcyBhbiBpbnRlZ2VyKS4NCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsNCg0KICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIHRva2VuIGlkIHRoYXQgbWF5IHRyYW5zZmVyIGZyb20gX293bmVyIGFjY291bnQgYnkgX3NwZW5kZXIuLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHRva2VuIHNwZW5kZXIuDQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7DQoNCiAgICAvKg0KICAgICAqICBFeHRyYSBub24gRVJDMjAgZnVuY3Rpb25zDQogICAgICovDQogICAgLy8vIEBkZXYgUmV0dXJucyB3aGV0aGVyIHRoZSBhZGRyZXNzIG93bnMgYSB0b2tlbi4NCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIHRvIGNoZWNrLg0KICAgIGZ1bmN0aW9uIGlzVG9rZW5Pd25lcihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7DQp9DQoNCmNvbnRyYWN0IEluZGl2aWR1YWxpdHlUb2tlbkludGVyZmFjZSB7DQogICAgLyoNCiAgICAgKiBSZWFkIHN0b3JhZ2UgZnVuY3Rpb25zDQogICAgICovDQoNCiAgICAvLy8gQGRldiBSZXR1cm5zIGlkIG9mIHRva2VuIG93bmVkIGJ5IGdpdmVuIGFkZHJlc3MgKGVuY29kZWQgYXMgYW4gaW50ZWdlcikuDQogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7DQoNCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSB0b2tlbiBpZCB0aGF0IG1heSB0cmFuc2ZlciBmcm9tIF9vd25lciBhY2NvdW50IGJ5IF9zcGVuZGVyLi4NCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLg0KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiB0b2tlbiBzcGVuZGVyLg0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOw0KDQogICAgLyoNCiAgICAgKiAgV3JpdGUgc3RvcmFnZSBmdW5jdGlvbnMNCiAgICAgKi8NCg0KICAgIC8vLyBAZGV2IFRyYW5zZmVycyBzZW5kZXIgdG9rZW4gdG8gZ2l2ZW4gYWRkcmVzcy4gUmV0dXJucyBzdWNjZXNzLg0KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgbmV3IHRva2VuIG93bmVyLg0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdGhlIHRva2VuIHRvIHRyYW5zZmVyLg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8pIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KDQogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLg0KICAgIC8vLyBAcGFyYW0gX2Zyb20gQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KDQogICAgLy8vIEBkZXYgU2V0cyBhcHByb3ZhbCBzcGVuZGVyIHRvIHRyYW5zZmVyIG93bmVyc2hpcCBvZiB0b2tlbi4gUmV0dXJucyBzdWNjZXNzLg0KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiBzcGVuZGVyLi4NCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRva2VuIHRoYXQgY2FuIGJlIHNwZW5kLg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQoNCiAgICAvKg0KICAgICAqICBFeHRyYSBub24gRVJDMjAgZnVuY3Rpb25zDQogICAgICovDQoNCiAgICAvLy8gQGRldiBSZXR1cm5zIHdoZXRoZXIgdGhlIGFkZHJlc3Mgb3ducyBhIHRva2VuLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3MgdG8gY2hlY2suDQogICAgZnVuY3Rpb24gaXNUb2tlbk93bmVyKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zIChib29sKTsNCn0NCg0KDQpjb250cmFjdCBJbmRpdmlkdWFsaXR5VG9rZW4gaXMgVG9rZW5JbnRlcmZhY2UsIEluZGl2aWR1YWxpdHlUb2tlbkludGVyZmFjZSB7DQogICAgZnVuY3Rpb24gSW5kaXZpZHVhbGl0eVRva2VuKCkgew0KICAgICAgICBtaW50ZXJzW21zZy5zZW5kZXJdID0gdHJ1ZTsNCiAgICAgICAgTWludGVyQWRkZWQobXNnLnNlbmRlcik7DQogICAgfQ0KDQogICAgbW9kaWZpZXIgbWludGVyT25seSB7DQogICAgICAgIGlmKCFtaW50ZXJzW21zZy5zZW5kZXJdKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvLyBhZGRyZXNzID0+IGNhbm1pbnQNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIG1pbnRlcnM7DQogICAgDQogICAgLy8gb3duZXIgPT4gYmFsYW5jZQ0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7DQoNCiAgICAvLyBvd25lciA9PiBzcGVuZGVyID0+IGJhbGFuY2UNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFwcHJvdmFsczsNCg0KICAgIHVpbnQgbnVtVG9rZW5zOw0KDQogICAgLy8vIEBkZXYgTWludHMgYSBuZXcgdG9rZW4uDQogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvKSBtaW50ZXJPbmx5IHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgdG9rZW4gb3duZXIgZG9lc24ndCBhbHJlYWR5IG93biBhIHRva2VuLg0KICAgICAgICBpZiAoYmFsYW5jZXNbX3RvXSAhPSAweDApIHJldHVybiBmYWxzZTsNCg0KICAgICAgICBiYWxhbmNlc1tfdG9dID0gMTsNCg0KICAgICAgICAvLyBsb2cgdGhlIG1pbnRpbmcgb2YgdGhpcyB0b2tlbi4NCiAgICAgICAgTWludChfdG8pOw0KICAgICAgICBUcmFuc2ZlcigweDAsIF90bywgMSk7DQogICAgICAgIFRva2VuRXZlbnRMaWIuX1RyYW5zZmVyKDB4MCwgX3RvKTsNCg0KICAgICAgICAvLyBpbmNyZWFzZSB0aGUgc3VwcGx5Lg0KICAgICAgICBudW1Ub2tlbnMgKz0gMTsNCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQogICAgDQogICAgLy8gQGRldiBNaW50IG1hbnkgbmV3IHRva2Vucw0KICAgIGZ1bmN0aW9uIG1pbnQoYWRkcmVzc1tdIF90bykgbWludGVyT25seSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBfdG8ubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGlmKGJhbGFuY2VzW190b1tpXV0gIT0gMHgwKSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICBiYWxhbmNlc1tfdG9baV1dID0gMTsNCiAgICAgICAgICAgIE1pbnQoX3RvW2ldKTsNCiAgICAgICAgICAgIFRyYW5zZmVyKDB4MCwgX3RvW2ldLCAxKTsNCiAgICAgICAgICAgIFRva2VuRXZlbnRMaWIuX1RyYW5zZmVyKDB4MCwgX3RvW2ldKTsNCiAgICAgICAgfQ0KICAgICAgICBudW1Ub2tlbnMgKz0gX3RvLmxlbmd0aDsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgRGVzdHJveSBhIHRva2VuDQogICAgLy8vIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBvd25lciBvZiB0aGUgdG9rZW4gdG8gZGVzdHJveQ0KICAgIGZ1bmN0aW9uIGRlc3Ryb3koYWRkcmVzcyBfb3duZXIpIG1pbnRlck9ubHkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGlmKGJhbGFuY2VzW19vd25lcl0gIT0gMSkgdGhyb3c7DQogICAgICAgIA0KICAgICAgICBiYWxhbmNlc1tfb3duZXJdID0gMDsNCiAgICAgICAgbnVtVG9rZW5zIC09IDE7DQogICAgICAgIERlc3Ryb3koX293bmVyKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgQWRkIGEgbmV3IG1pbnRlcg0KICAgIC8vLyBAcGFyYW0gd2hvIEFkZHJlc3MgdGhlIGFkZHJlc3MgdGhhdCBjYW4gbm93IG1pbnQgdG9rZW5zLg0KICAgIGZ1bmN0aW9uIGFkZE1pbnRlcihhZGRyZXNzIHdobykgbWludGVyT25seSByZXR1cm5zIChib29sKSB7DQogICAgICAgIG1pbnRlcnNbd2hvXSA9IHRydWU7DQogICAgICAgIE1pbnRlckFkZGVkKHdobyk7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgUmVtb3ZlIGEgbWludGVyDQogICAgLy8vIEBwYXJhbSB3aG8gQWRkcmVzcyB0aGUgYWRkcmVzcyB0aGF0IHdpbGwgbm8gbG9uZ2VyIGJlIGEgbWludGVyLg0KICAgIGZ1bmN0aW9uIHJlbW92ZU1pbnRlcihhZGRyZXNzIHdobykgbWludGVyT25seSByZXR1cm5zIChib29sKSB7DQogICAgICAgIG1pbnRlcnNbd2hvXSA9IGZhbHNlOw0KICAgICAgICBNaW50ZXJSZW1vdmVkKHdobyk7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgUmV0dXJuIHRoZSBudW1iZXIgb2YgdG9rZW5zDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50IHN1cHBseSkgew0KICAgICAgICByZXR1cm4gbnVtVG9rZW5zOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IFJldHVybnMgaWQgb2YgdG9rZW4gb3duZWQgYnkgZ2l2ZW4gYWRkcmVzcyAoZW5jb2RlZCBhcyBhbiBpbnRlZ2VyKS4NCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogICAgICAgIGlmIChfb3duZXIgPT0gMHgwKSB7DQogICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgdG9rZW4gaWQgdGhhdCBtYXkgdHJhbnNmZXIgZnJvbSBfb3duZXIgYWNjb3VudCBieSBfc3BlbmRlci4uDQogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgdG9rZW4gc3BlbmRlci4NCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsDQogICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7DQogICAgICAgIHJldHVybiBhcHByb3ZhbHNbX293bmVyXVtfc3BlbmRlcl07DQogICAgfQ0KDQogICAgLy8vIEBkZXYgVHJhbnNmZXJzIHNlbmRlciB0b2tlbiB0byBnaXZlbiBhZGRyZXNzLiBSZXR1cm5zIHN1Y2Nlc3MuDQogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sDQogICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKF92YWx1ZSAhPSAxKSB7DQogICAgICAgICAgICAvLyAxIGlzIHRoZSBvbmx5IHZhbHVlIHRoYXQgbWFrZXMgYW55IHNlbnNlIGhlcmUuDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAoX3RvID09IDB4MCkgew0KICAgICAgICAgICAgLy8gY2Fubm90IHRyYW5zZmVyIHRvIHRoZSBudWxsIGFkZHJlc3MuDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPT0gMHgwKSB7DQogICAgICAgICAgICAvLyBtc2cuc2VuZGVyIGlzIG5vdCBhIHRva2VuIG93bmVyDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAoYmFsYW5jZXNbX3RvXSAhPSAweDApIHsNCiAgICAgICAgICAgIC8vIGNhbm5vdCB0cmFuc2ZlciB0byBhbiBhZGRyZXNzIHRoYXQgYWxyZWFkeSBvd25zIGEgdG9rZW4uDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7DQogICAgICAgIGJhbGFuY2VzW190b10gPSAxOw0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIDEpOw0KICAgICAgICBUb2tlbkV2ZW50TGliLl9UcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8pOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IFRyYW5zZmVycyBzZW5kZXIgdG9rZW4gdG8gZ2l2ZW4gYWRkcmVzcy4gUmV0dXJucyBzdWNjZXNzLg0KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgbmV3IHRva2VuIG93bmVyLg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIHJldHVybiB0cmFuc2ZlcihfdG8sIDEpOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IEFsbG93cyBhbGxvd2VkIHRoaXJkIHBhcnR5IHRvIHRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sDQogICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgX3RvLA0KICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZiAoX3ZhbHVlICE9IDEpIHsNCiAgICAgICAgICAgIC8vIENhbm5vdCB0cmFuc2ZlciBhbnl0aGluZyBvdGhlciB0aGFuIDEgdG9rZW4uDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAoX3RvID09IDB4MCkgew0KICAgICAgICAgICAgLy8gQ2Fubm90IHRyYW5zZmVyIHRvIHRoZSBudWxsIGFkZHJlc3MNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmIChiYWxhbmNlc1tfZnJvbV0gPT0gMHgwKSB7DQogICAgICAgICAgICAvLyBDYW5ub3QgdHJhbnNmZXIgaWYgX2Zyb20gaXMgbm90IGEgdG9rZW4gb3duZXINCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmIChiYWxhbmNlc1tfdG9dICE9IDB4MCkgew0KICAgICAgICAgICAgLy8gQ2Fubm90IHRyYW5zZmVyIHRvIGFuIGV4aXN0aW5nIHRva2VuIG93bmVyDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAoYXBwcm92YWxzW19mcm9tXVttc2cuc2VuZGVyXSA9PSAwKSB7DQogICAgICAgICAgICAvLyBUaGUgYXBwcm92ZWQgdG9rZW4gZG9lc24ndCBtYXRjaCB0aGUgdG9rZW4gYmVpbmcgdHJhbnNmZXJyZWQuDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBudWxsIG91dCB0aGUgYXBwcm92YWwNCiAgICAgICAgYXBwcm92YWxzW19mcm9tXVttc2cuc2VuZGVyXSA9IDB4MDsNCg0KICAgICAgICAvLyByZW1vdmUgdGhlIHRva2VuIGZyb20gdGhlIHNlbmRlci4NCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gMDsNCg0KICAgICAgICAvLyBhc3NpZ24gdGhlIHRva2VuIHRvIHRoZSBuZXcgb3duZXINCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IDE7DQoNCiAgICAgICAgLy8gbG9nIHRoZSB0cmFuc2Zlcg0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCAxKTsNCiAgICAgICAgVG9rZW5FdmVudExpYi5fVHJhbnNmZXIoX2Zyb20sIF90byk7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLg0KICAgIC8vLyBAcGFyYW0gX2Zyb20gQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgcmV0dXJuIHRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCAxKTsNCiAgICB9DQoNCiAgICAvLy8gQGRldiBTZXRzIGFwcHJvdmFsIHNwZW5kZXIgdG8gdHJhbnNmZXIgb3duZXJzaGlwIG9mIHRva2VuLiBSZXR1cm5zIHN1Y2Nlc3MuDQogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHNwZW5kZXIuLg0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdG9rZW4gdGhhdCBjYW4gYmUgc3BlbmQuDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLA0KICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKF92YWx1ZSAhPSAxKSB7DQogICAgICAgICAgICAvLyBjYW5ub3QgYXBwcm92ZSBhbnkgdmFsdWUgb3RoZXIgdGhhbiAxDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAoX3NwZW5kZXIgPT0gMHgwKSB7DQogICAgICAgICAgICAvLyBjYW5ub3QgYXBwcm92ZSB0aGUgbnVsbCBhZGRyZXNzIGFzIGEgc3BlbmRlci4NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA9PSAweDApIHsNCiAgICAgICAgICAgIC8vIGNhbm5vdCBhcHByb3ZlIGlmIG5vdCBhIHRva2VuIG93bmVyLg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgYXBwcm92YWxzW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDE7DQoNCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIDEpOw0KICAgICAgICBUb2tlbkV2ZW50TGliLl9BcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlcik7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgU2V0cyBhcHByb3ZhbCBzcGVuZGVyIHRvIHRyYW5zZmVyIG93bmVyc2hpcCBvZiB0b2tlbi4gUmV0dXJucyBzdWNjZXNzLg0KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiBzcGVuZGVyLi4NCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgcmV0dXJuIGFwcHJvdmUoX3NwZW5kZXIsIDEpOw0KICAgIH0NCg0KICAgIC8qDQogICAgICogIEV4dHJhIG5vbiBFUkMyMCBmdW5jdGlvbnMNCiAgICAgKi8NCiAgICAvLy8gQGRldiBSZXR1cm5zIHdoZXRoZXIgdGhlIGFkZHJlc3Mgb3ducyBhIHRva2VuLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3MgdG8gY2hlY2suDQogICAgZnVuY3Rpb24gaXNUb2tlbk93bmVyKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdICE9IDA7DQogICAgfQ0KfQ=='