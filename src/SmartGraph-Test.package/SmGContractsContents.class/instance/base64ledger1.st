base 64 content
base64ledger1
	^'cHJhZ21hIHNvbGlkaXR5ID49MC40LjQ7DQoNCi8vZnJvbSBaZXBwZWxpbg0KY29udHJhY3QgU2FmZU1hdGggew0KICAgIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgdWludCBjID0gYSAqIGI7DQogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgICAgIHJldHVybiBjOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgICAgIHJldHVybiBhIC0gYjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIHVpbnQgYyA9IGEgKyBiOw0KICAgICAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsNCiAgICAgICAgcmV0dXJuIGM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7DQogICAgICAgIGlmICghYXNzZXJ0aW9uKSB0aHJvdzsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IE93bmVkIHsNCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCg0KICAgIGZ1bmN0aW9uIE93bmVkKCkgew0KICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7DQogICAgfQ0KDQogICAgbW9kaWZpZXIgb25seU93bmVyKCkgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgYWRkcmVzcyBuZXdPd25lcjsNCg0KICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgew0KICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyID09IG5ld093bmVyKSB7DQogICAgICAgICAgICBvd25lciA9IG5ld093bmVyOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQpjb250cmFjdCBGaW5hbGl6YWJsZSBpcyBPd25lZCB7DQogICAgYm9vbCBwdWJsaWMgZmluYWxpemVkOw0KDQogICAgZnVuY3Rpb24gZmluYWxpemUoKSBvbmx5T3duZXIgew0KICAgICAgICBmaW5hbGl6ZWQgPSB0cnVlOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIG5vdEZpbmFsaXplZCgpIHsNCiAgICAgICAgaWYgKGZpbmFsaXplZCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KfQ0KDQpjb250cmFjdCBJVG9rZW4gew0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCk7DQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgb3duZXIpIHJldHVybnModWludCk7DQp9DQoNCmNvbnRyYWN0IFRva2VuUmVjZWl2YWJsZSBpcyBPd25lZCB7DQogICAgZXZlbnQgbG9nVG9rZW5UcmFuc2ZlcihhZGRyZXNzIHRva2VuLCBhZGRyZXNzIHRvLCB1aW50IGFtb3VudCk7DQoNCiAgICBmdW5jdGlvbiBjbGFpbVRva2VucyhhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfdG8pIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7DQogICAgICAgIElUb2tlbiB0b2tlbiA9IElUb2tlbihfdG9rZW4pOw0KICAgICAgICB1aW50IGJhbGFuY2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7DQogICAgICAgIGlmICh0b2tlbi50cmFuc2ZlcihfdG8sIGJhbGFuY2UpKSB7DQogICAgICAgICAgICBsb2dUb2tlblRyYW5zZmVyKF90b2tlbiwgX3RvLCBiYWxhbmNlKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IEV2ZW50RGVmaW5pdGlvbnMgew0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KfQ0KDQpjb250cmFjdCBUb2tlbiBpcyBGaW5hbGl6YWJsZSwgVG9rZW5SZWNlaXZhYmxlLCBTYWZlTWF0aCwgRXZlbnREZWZpbml0aW9ucyB7DQoNCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiRnVuRmFpciI7DQogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gODsNCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJGVU4iOw0KDQogICAgQ29udHJvbGxlciBjb250cm9sbGVyOw0KICAgIGFkZHJlc3Mgb3duZXI7DQoNCiAgICBmdW5jdGlvbiBzZXRDb250cm9sbGVyKGFkZHJlc3MgX2MpIG9ubHlPd25lciBub3RGaW5hbGl6ZWQgew0KICAgICAgICBjb250cm9sbGVyID0gQ29udHJvbGxlcihfYyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgYSkgY29uc3RhbnQgcmV0dXJucyAodWludCkgew0KICAgICAgICByZXR1cm4gY29udHJvbGxlci5iYWxhbmNlT2YoYSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIHJldHVybiBjb250cm9sbGVyLnRvdGFsU3VwcGx5KCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIHJldHVybiBjb250cm9sbGVyLmFsbG93YW5jZShfb3duZXIsIF9zcGVuZGVyKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpDQogICAgb25seVBheWxvYWRTaXplKDIpDQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgc3VjY2VzcyA9IGNvbnRyb2xsZXIudHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KICAgICAgICBpZiAoc3VjY2Vzcykgew0KICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkNCiAgICBvbmx5UGF5bG9hZFNpemUoMykNCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICBzdWNjZXNzID0gY29udHJvbGxlci50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICAgICAgaWYgKHN1Y2Nlc3MpIHsNCiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKQ0KICAgIG9ubHlQYXlsb2FkU2l6ZSgyKQ0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICAvL3Byb21vdGUgc2FmZSB1c2VyIGJlaGF2aW9yDQogICAgICAgIGlmIChjb250cm9sbGVyLmFsbG93YW5jZShtc2cuc2VuZGVyLCBfc3BlbmRlcikgPiAwKSB0aHJvdzsNCg0KICAgICAgICBzdWNjZXNzID0gY29udHJvbGxlci5hcHByb3ZlKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgICAgICBpZiAoc3VjY2Vzcykgew0KICAgICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKQ0KICAgIG9ubHlQYXlsb2FkU2l6ZSgyKQ0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBzdWNjZXNzID0gY29udHJvbGxlci5pbmNyZWFzZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYWRkZWRWYWx1ZSk7DQogICAgICAgIGlmIChzdWNjZXNzKSB7DQogICAgICAgICAgICB1aW50IG5ld3ZhbCA9IGNvbnRyb2xsZXIuYWxsb3dhbmNlKG1zZy5zZW5kZXIsIF9zcGVuZGVyKTsNCiAgICAgICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBuZXd2YWwpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKQ0KICAgIG9ubHlQYXlsb2FkU2l6ZSgyKQ0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBzdWNjZXNzID0gY29udHJvbGxlci5kZWNyZWFzZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfc3VidHJhY3RlZFZhbHVlKTsNCiAgICAgICAgaWYgKHN1Y2Nlc3MpIHsNCiAgICAgICAgICAgIHVpbnQgbmV3dmFsID0gY29udHJvbGxlci5hbGxvd2FuY2UobXNnLnNlbmRlciwgX3NwZW5kZXIpOw0KICAgICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIG5ld3ZhbCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBudW13b3Jkcykgew0KICAgIGFzc2VydChtc2cuZGF0YS5sZW5ndGggPT0gbnVtd29yZHMgKiAzMiArIDQpOw0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJ1cm4odWludCBfYW1vdW50KSB7DQogICAgICAgIGNvbnRyb2xsZXIuYnVybihtc2cuc2VuZGVyLCBfYW1vdW50KTsNCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwLCBfYW1vdW50KTsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IENvbnRyb2xsZXIgaXMgT3duZWQsIEZpbmFsaXphYmxlIHsNCiAgICBMZWRnZXIgcHVibGljIGxlZGdlcjsNCiAgICBhZGRyZXNzIHB1YmxpYyB0b2tlbjsNCg0KICAgIGZ1bmN0aW9uIHNldFRva2VuKGFkZHJlc3MgX3Rva2VuKSBvbmx5T3duZXIgew0KICAgICAgICB0b2tlbiA9IF90b2tlbjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzZXRMZWRnZXIoYWRkcmVzcyBfbGVkZ2VyKSBvbmx5T3duZXIgew0KICAgICAgICBsZWRnZXIgPSBMZWRnZXIoX2xlZGdlcik7DQogICAgfQ0KDQogICAgbW9kaWZpZXIgb25seVRva2VuKCkgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSB0b2tlbikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIHJldHVybiBsZWRnZXIudG90YWxTdXBwbHkoKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfYSkgb25seVRva2VuIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgcmV0dXJuIExlZGdlcihsZWRnZXIpLmJhbGFuY2VPZihfYSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKQ0KICAgIG9ubHlUb2tlbiBjb25zdGFudCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIHJldHVybiBsZWRnZXIuYWxsb3dhbmNlKF9vd25lciwgX3NwZW5kZXIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkNCiAgICBvbmx5VG9rZW4NCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgcmV0dXJuIGxlZGdlci50cmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9zcGVuZGVyLCBhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpDQogICAgb25seVRva2VuDQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIHJldHVybiBsZWRnZXIudHJhbnNmZXJGcm9tKF9zcGVuZGVyLCBfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKQ0KICAgIG9ubHlUb2tlbg0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICByZXR1cm4gbGVkZ2VyLmFwcHJvdmUoX293bmVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkNCiAgICBvbmx5VG9rZW4NCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgcmV0dXJuIGxlZGdlci5pbmNyZWFzZUFwcHJvdmFsKF9vd25lciwgX3NwZW5kZXIsIF9hZGRlZFZhbHVlKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKQ0KICAgIG9ubHlUb2tlbg0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICByZXR1cm4gbGVkZ2VyLmRlY3JlYXNlQXBwcm92YWwoX293bmVyLCBfc3BlbmRlciwgX3N1YnRyYWN0ZWRWYWx1ZSk7DQogICAgfQ0KDQoNCiAgICBmdW5jdGlvbiBidXJuKGFkZHJlc3MgX293bmVyLCB1aW50IF9hbW91bnQpIG9ubHlUb2tlbiB7DQogICAgICAgIGxlZGdlci5idXJuKF9vd25lciwgX2Ftb3VudCk7DQogICAgfQ0KfQ0KDQpjb250cmFjdCBMZWRnZXIgaXMgT3duZWQsIFNhZmVNYXRoLCBGaW5hbGl6YWJsZSB7DQogICAgYWRkcmVzcyBwdWJsaWMgY29udHJvbGxlcjsNCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VPZjsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIHB1YmxpYyBhbGxvd2FuY2U7DQogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7DQoNCiAgICBmdW5jdGlvbiBzZXRDb250cm9sbGVyKGFkZHJlc3MgX2NvbnRyb2xsZXIpIG9ubHlPd25lciBub3RGaW5hbGl6ZWQgew0KICAgICAgICBjb250cm9sbGVyID0gX2NvbnRyb2xsZXI7DQogICAgfQ0KDQogICAgbW9kaWZpZXIgb25seUNvbnRyb2xsZXIoKSB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNvbnRyb2xsZXIpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkNCiAgICBvbmx5Q29udHJvbGxlcg0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZiAoYmFsYW5jZU9mW19mcm9tXSA8IF92YWx1ZSkgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VPZltfZnJvbV0sIF92YWx1ZSk7DQogICAgICAgIGJhbGFuY2VPZltfdG9dID0gc2FmZUFkZChiYWxhbmNlT2ZbX3RvXSwgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX3NwZW5kZXIsIGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkNCiAgICBvbmx5Q29udHJvbGxlcg0KICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZiAoYmFsYW5jZU9mW19mcm9tXSA8IF92YWx1ZSkgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIHZhciBhbGxvd2VkID0gYWxsb3dhbmNlW19mcm9tXVtfc3BlbmRlcl07DQogICAgICAgIGlmIChhbGxvd2VkIDwgX3ZhbHVlKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgYmFsYW5jZU9mW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZltfdG9dLCBfdmFsdWUpOw0KICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlT2ZbX2Zyb21dLCBfdmFsdWUpOw0KICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW19zcGVuZGVyXSA9IHNhZmVTdWIoYWxsb3dlZCwgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpDQogICAgb25seUNvbnRyb2xsZXINCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgLy9yZXF1aXJlIHVzZXIgdG8gc2V0IHRvIHplcm8gYmVmb3JlIHJlc2V0dGluZyB0byBub256ZXJvDQogICAgICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2FuY2VbX293bmVyXVtfc3BlbmRlcl0gIT0gMCkpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGFsbG93YW5jZVtfb3duZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpDQogICAgb25seUNvbnRyb2xsZXINCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgdWludCBvbGRWYWx1ZSA9IGFsbG93YW5jZVtfb3duZXJdW19zcGVuZGVyXTsNCiAgICAgICAgYWxsb3dhbmNlW19vd25lcl1bX3NwZW5kZXJdID0gc2FmZUFkZChvbGRWYWx1ZSwgX2FkZGVkVmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKQ0KICAgIG9ubHlDb250cm9sbGVyDQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2FuY2VbX293bmVyXVtfc3BlbmRlcl07DQogICAgICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsNCiAgICAgICAgICAgIGFsbG93YW5jZVtfb3duZXJdW19zcGVuZGVyXSA9IDA7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBhbGxvd2FuY2VbX293bmVyXVtfc3BlbmRlcl0gPSBzYWZlU3ViKG9sZFZhbHVlLCBfc3VidHJhY3RlZFZhbHVlKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBldmVudCBMb2dNaW50KGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludCBhbW91bnQpOw0KICAgIGV2ZW50IExvZ01pbnRpbmdTdG9wcGVkKCk7DQoNCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX2EsIHVpbnQgX2Ftb3VudCkgb25seU93bmVyIG1pbnRpbmdBY3RpdmUgew0KICAgICAgICBiYWxhbmNlT2ZbX2FdICs9IF9hbW91bnQ7DQogICAgICAgIHRvdGFsU3VwcGx5ICs9IF9hbW91bnQ7DQogICAgICAgIExvZ01pbnQoX2EsIF9hbW91bnQpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG11bHRpTWludCh1aW50W10gYml0cykgb25seU93bmVyIG1pbnRpbmdBY3RpdmUgew0KICAgICAgICBmb3IgKHVpbnQgaT0wOyBpPGJpdHMubGVuZ3RoOyBpKyspIHsNCgkgICAgYWRkcmVzcyBhID0gYWRkcmVzcyhiaXRzW2ldPj45Nik7DQoJICAgIHVpbnQgYW1vdW50ID0gYml0c1tpXSYoKDE8PDk2KSAtIDEpOw0KCSAgICBtaW50KGEsIGFtb3VudCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBib29sIHB1YmxpYyBtaW50aW5nU3RvcHBlZDsNCg0KICAgIGZ1bmN0aW9uIHN0b3BNaW50aW5nKCkgb25seU93bmVyIHsNCiAgICAgICAgbWludGluZ1N0b3BwZWQgPSB0cnVlOw0KICAgICAgICBMb2dNaW50aW5nU3RvcHBlZCgpOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIG1pbnRpbmdBY3RpdmUoKSB7DQogICAgICAgIGlmIChtaW50aW5nU3RvcHBlZCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYnVybihhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSBvbmx5Q29udHJvbGxlciB7DQogICAgICAgIGJhbGFuY2VPZltfb3duZXJdID0gc2FmZVN1YihiYWxhbmNlT2ZbX293bmVyXSwgX2Ftb3VudCk7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZVN1Yih0b3RhbFN1cHBseSwgX2Ftb3VudCk7DQogICAgfQ0KfQ=='