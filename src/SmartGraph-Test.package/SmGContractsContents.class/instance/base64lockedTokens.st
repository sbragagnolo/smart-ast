base 64 content
base64lockedTokens
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gT0FYICdvcGVuQU5YIFRva2VuJyBjcm93ZGZ1bmRpbmcgY29udHJhY3QNCi8vDQovLyBSZWZlciB0byBodHRwOi8vb3BlbmFueC5vcmcvIGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLg0KLy8NCi8vIEVuam95LiAoYykgb3BlbkFOWCBhbmQgQm9ra3lQb29CYWggLyBCb2sgQ29uc3VsdGluZyBQdHkgTHRkIDIwMTcuIA0KLy8gVGhlIE1JVCBMaWNlbmNlLg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQoNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIE9BWCAnb3BlbkFOWCBUb2tlbicgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0IC0gRVJDMjAgVG9rZW4gSW50ZXJmYWNlDQovLw0KLy8gUmVmZXIgdG8gaHR0cDovL29wZW5hbngub3JnLyBmb3IgZnVydGhlciBpbmZvcm1hdGlvbi4NCi8vDQovLyBFbmpveS4gKGMpIG9wZW5BTlggYW5kIEJva2t5UG9vQmFoIC8gQm9rIENvbnN1bHRpbmcgUHR5IEx0ZCAyMDE3LiANCi8vIFRoZSBNSVQgTGljZW5jZS4NCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBFUkMgVG9rZW4gU3RhbmRhcmQgIzIwIEludGVyZmFjZQ0KLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpjb250cmFjdCBFUkMyMEludGVyZmFjZSB7DQogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7DQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSANCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgDQogICAgICAgIHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX3ZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIA0KICAgICAgICB1aW50IF92YWx1ZSk7DQp9DQoNCg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gT0FYICdvcGVuQU5YIFRva2VuJyBjcm93ZGZ1bmRpbmcgY29udHJhY3QgLSBPd25lZCBjb250cmFjdHMNCi8vDQovLyBSZWZlciB0byBodHRwOi8vb3BlbmFueC5vcmcvIGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLg0KLy8NCi8vIEVuam95LiAoYykgb3BlbkFOWCBhbmQgQm9ra3lQb29CYWggLyBCb2sgQ29uc3VsdGluZyBQdHkgTHRkIDIwMTcuIA0KLy8gVGhlIE1JVCBMaWNlbmNlLg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBPd25lZCBjb250cmFjdA0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KY29udHJhY3QgT3duZWQgew0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gQ3VycmVudCBvd25lciwgYW5kIHByb3Bvc2VkIG5ldyBvd25lcg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOw0KICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOw0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gQ29uc3RydWN0b3IgLSBhc3NpZ24gY3JlYXRvciBhcyB0aGUgb3duZXINCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiBPd25lZCgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gTW9kaWZpZXIgdG8gbWFyayB0aGF0IGEgZnVuY3Rpb24gY2FuIG9ubHkgYmUgZXhlY3V0ZWQgYnkgdGhlIG93bmVyDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgbW9kaWZpZXIgb25seU93bmVyIHsNCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsNCiAgICAgICAgXzsNCiAgICB9DQoNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIE93bmVyIGNhbiBpbml0aWF0ZSB0cmFuc2ZlciBvZiBjb250cmFjdCB0byBhIG5ldyBvd25lcg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgew0KICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsNCiAgICB9DQoNCiANCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBOZXcgb3duZXIgaGFzIHRvIGFjY2VwdCB0cmFuc2ZlciBvZiBjb250cmFjdA0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHsNCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG5ld093bmVyKTsNCiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsNCiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICB9DQogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvKTsNCn0NCg0KDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBPQVggJ29wZW5BTlggVG9rZW4nIGNyb3dkZnVuZGluZyBjb250cmFjdA0KLy8NCi8vIFJlZmVyIHRvIGh0dHA6Ly9vcGVuYW54Lm9yZy8gZm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24uDQovLw0KLy8gRW5qb3kuIChjKSBvcGVuQU5YIGFuZCBCb2treVBvb0JhaCAvIEJvayBDb25zdWx0aW5nIFB0eSBMdGQgMjAxNy4gDQovLyBUaGUgTUlUIExpY2VuY2UuDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gU2FmZSBtYXRocywgYm9ycm93ZWQgZnJvbSBPcGVuWmVwcGVsaW4NCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmxpYnJhcnkgU2FmZU1hdGggew0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gQWRkIGEgbnVtYmVyIHRvIGFub3RoZXIgbnVtYmVyLCBjaGVja2luZyBmb3Igb3ZlcmZsb3dzDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIHVpbnQgYyA9IGEgKyBiOw0KICAgICAgICBhc3NlcnQoYyA+PSBhICYmIGMgPj0gYik7DQogICAgICAgIHJldHVybiBjOw0KICAgIH0NCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIFN1YnRyYWN0IGEgbnVtYmVyIGZyb20gYW5vdGhlciBudW1iZXIsIGNoZWNraW5nIGZvciB1bmRlcmZsb3dzDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIGFzc2VydChiIDw9IGEpOw0KICAgICAgICByZXR1cm4gYSAtIGI7DQogICAgfQ0KfQ0KDQoNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIE9BWCAnb3BlbkFOWCBUb2tlbicgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0IC0gQ29uZmlndXJhdGlvbg0KLy8NCi8vIFJlZmVyIHRvIGh0dHA6Ly9vcGVuYW54Lm9yZy8gZm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24uDQovLw0KLy8gRW5qb3kuIChjKSBvcGVuQU5YIGFuZCBCb2treVBvb0JhaCAvIEJvayBDb25zdWx0aW5nIFB0eSBMdGQgMjAxNy4gDQovLyBUaGUgTUlUIExpY2VuY2UuDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIG9wZW5BTlggY3Jvd2RzYWxlIHRva2VuIHNtYXJ0IGNvbnRyYWN0IC0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpjb250cmFjdCBPcGVuQU5YVG9rZW5Db25maWcgew0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gVG9rZW4gc3ltYm9sKCksIG5hbWUoKSBhbmQgZGVjaW1hbHMoKQ0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIk9BWCI7DQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBOQU1FID0gIm9wZW5BTlggVG9rZW4iOw0KICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBERUNJTUFMUyA9IDE4Ow0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBEZWNpbWFsIGZhY3RvciBmb3IgbXVsdGlwbGljYXRpb25zIGZyb20gT0FYIHVuaXQgdG8gT0FYIG5hdHVyYWwgdW5pdA0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IERFQ0lNQUxTRkFDVE9SID0gMTAqKnVpbnQoREVDSU1BTFMpOw0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gVHJhbmNoZSAxIHNvZnQgY2FwIGFuZCBoYXJkIGNhcCwgYW5kIHRvdGFsIHRva2Vucw0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19TT0ZUX0NBUCA9IDEzMDAwMDAwICogREVDSU1BTFNGQUNUT1I7DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5TX0hBUkRfQ0FQID0gMzAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTlNfVE9UQUwgPSAxMDAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIFRyYW5jaGUgMSBjcm93ZHNhbGUgc3RhcnQgZGF0ZSBhbmQgZW5kIGRhdGUNCiAgICAvLyBEbyBub3QgdXNlIHRoZSBgbm93YCBmdW5jdGlvbiBoZXJlDQogICAgLy8gU3RhcnQgLSBUaHVyc2RheSwgMjItSnVuLTE3IDEzOjAwOjAwIFVUQyAvIDFwbSBHTVQgMjIgSnVuZSAyMDE3DQogICAgLy8gRW5kIC0gU2F0dXJkYXksIDIyLUp1bC0xNyAxMzowMDowMCBVVEMgLyAxcG0gR01UIDIyIEp1bHkgMjAxNyANCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBTVEFSVF9EQVRFID0gMTQ5ODEzNjQwMDsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBFTkRfREFURSA9IDE1MDA3Mjg0MDA7DQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyAxIHllYXIgYW5kIDIgeWVhciBkYXRlcyBmb3IgbG9ja2VkIHRva2Vucw0KICAgIC8vIERvIG5vdCB1c2UgdGhlIGBub3dgIGZ1bmN0aW9uIGhlcmUgDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTE9DS0VEXzFZX0RBVEUgPSBTVEFSVF9EQVRFICsgMzY1IGRheXM7DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTE9DS0VEXzJZX0RBVEUgPSBTVEFSVF9EQVRFICsgMiAqIDM2NSBkYXlzOw0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gSW5kaXZpZHVhbCB0cmFuc2FjdGlvbiBjb250cmlidXRpb24gbWluIGFuZCBtYXggYW1vdW50cw0KICAgIC8vIFNldCB0byAwIHRvIHN3aXRjaCBvZmYsIG9yIGB4IGV0aGVyYA0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIHVpbnQgcHVibGljIENPTlRSSUJVVElPTlNfTUlOID0gMCBldGhlcjsNCiAgICB1aW50IHB1YmxpYyBDT05UUklCVVRJT05TX01BWCA9IDAgZXRoZXI7DQp9DQoNCg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gT0FYICdvcGVuQU5YIFRva2VuJyBjcm93ZGZ1bmRpbmcgY29udHJhY3QgLSBsb2NrZWQgdG9rZW5zDQovLw0KLy8gUmVmZXIgdG8gaHR0cDovL29wZW5hbngub3JnLyBmb3IgZnVydGhlciBpbmZvcm1hdGlvbi4NCi8vDQovLyBFbmpveS4gKGMpIG9wZW5BTlggYW5kIEJva2t5UG9vQmFoIC8gQm9rIENvbnN1bHRpbmcgUHR5IEx0ZCAyMDE3LiANCi8vIFRoZSBNSVQgTGljZW5jZS4NCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQoNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIENvbnRyYWN0IHRoYXQgaG9sZHMgdGhlIDFZIGFuZCAyWSBsb2NrZWQgdG9rZW4gaW5mb3JtYXRpb24NCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmNvbnRyYWN0IExvY2tlZFRva2VucyBpcyBPcGVuQU5YVG9rZW5Db25maWcgew0KICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50Ow0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gMXkgYW5kIDJ5IGxvY2tlZCB0b3RhbHMsIG5vdCBpbmNsdWRpbmcgdW5zb2xkIHRyYW5jaGUxIGFuZCBhbGwgdHJhbmNoZTINCiAgICAvLyB0b2tlbnMNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTlNfTE9DS0VEXzFZX1RPVEFMID0gMTQwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTlNfTE9DS0VEXzJZX1RPVEFMID0gMjYwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsNCiAgICANCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBUb2tlbnMgbG9ja2VkIGZvciAxIHllYXIgZm9yIHNhbGUgMiBpbiB0aGUgZm9sbG93aW5nIGFjY291bnQNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBhZGRyZXNzIHB1YmxpYyBUUkFOQ0hFMl9BQ0NPVU5UID0gMHg4MTM3MDNFYjY3NmYzQjZDNzZkQTc1Y0JhMGNiQzQ5RGRiQ0E3QjM3Ow0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gQ3VycmVudCB0b3RhbFN1cHBseSBvZiAxeSBhbmQgMnkgbG9ja2VkIHRva2Vucw0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5TG9ja2VkMVk7DQogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHlMb2NrZWQyWTsNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIExvY2tlZCB0b2tlbnMgbWFwcGluZw0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VzTG9ja2VkMVk7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYmFsYW5jZXNMb2NrZWQyWTsNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIEFkZHJlc3Mgb2Ygb3BlbkFOWCBjcm93ZHNhbGUgdG9rZW4gY29udHJhY3QNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBFUkMyMEludGVyZmFjZSBwdWJsaWMgdG9rZW5Db250cmFjdDsNCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gQ29uc3RydWN0b3IgLSBjYWxsZWQgYnkgY3Jvd2RzYWxlIHRva2VuIGNvbnRyYWN0DQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gTG9ja2VkVG9rZW5zKGFkZHJlc3MgX3Rva2VuQ29udHJhY3QpIHsNCiAgICAgICAgdG9rZW5Db250cmFjdCA9IEVSQzIwSW50ZXJmYWNlKF90b2tlbkNvbnRyYWN0KTsNCg0KICAgICAgICAvLyAtLS0gMXkgbG9ja2VkIHRva2VucyAtLS0NCg0KICAgICAgICAvLyBDb25maXJtIDFZIHRvdGFscyAgICAgICAgDQogICAgICAgIGFkZDFZKDB4NGJlRTA4OGVmREJDQzYxMEVFRWExMDFkZWQ3MjA0MTUwQUYxQzhiOSwxMDAwMDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweDgzOTU1MTIwMWY4NjY5MDdFYjUwMTdiRTc5Y0VCNDhhRGE1ODY1MGMsOTI1MDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweGE5MmQ0Q2QzNDEyODYyMzg2YzIzNEJlNTcyRmU0QThGQTRCQjA5YzYsOTI1MDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweEVDZjJCNWZjZTMzMDA3RTU2NjlENjNkZTM5YTRjNjYzZTU2OTU4ZEQsOTI1MDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweEQ2Qjc2OTViYzc0RTJDOTUwZWI5NTMzMTYzNTlFYWIyODNDNUJkYTgsOTI1MDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweEJFMzQ2M0VhZTI2Mzk4RDU1YTcxMTg2ODMwNzkyNjRCY0YzYWIyNEIsMTUwMDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweGY0NzQyOEZiOUE2MWM5ZjMzMTJjQjAzNUFFRTA0OUZCYTc2YmE2MmEsMTUwMDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweGZDY2M3NzE2NUQ4MjJFZjkwMDQ3MTRkODI5YkRDMjY3Qzc0MzY1OGEsNTAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7DQogICAgICAgIGFkZDFZKDB4YWY4ZGYyYUNBZWMzZDVkOTJkRTQyYTZjMTlkNzcwNkE0RjNFOEQ4Yiw1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsNCiAgICAgICAgYWRkMVkoMHgyMmE2Zjk2OTM4NTYzNzRCRjI5MjJjZDgzN2QwN0Y2NjcwRTdGQTRkLDI1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsNCiAgICAgICAgYWRkMVkoMHgzRjcyMENhOEZmRjU5OEYwMGE1MURFMzJBOENiNThDYTczZjIyYURlLDUwMDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweEJkMEQxOTU0QjMwMUU0MTRGMGI1RDA4MjdBNjlFQzVkRDU1OWU1MEIsNTAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7DQogICAgICAgIGFkZDFZKDB4MmFkNkIwMTFGRWNERTgzMGM5Y2M0ZGMwZDBiNzdGMDU1RDZiNTk5MCw1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsNCiAgICAgICAgYWRkMVkoMHgwYzVjRDBFOTcxY0ExOGEwRjBFMGQ1ODFmNEI5M0ZhRDMxRDYwOEIwLDIwMDAwODUgKiBERUNJTUFMU0ZBQ1RPUik7DQogICAgICAgIGFkZDFZKDB4RmFhREM0ZDgwRWFmNDMwQWI2MDQzMzdDQjY3ZDc3ZUM3NjNEM2UyMywyMDAyNDggKiBERUNJTUFMU0ZBQ1RPUik7DQogICAgICAgIGFkZDFZKDB4REFlZjQ2Zjg5YzI2NDE4MkNkODdDZTkzQjYyMEI2M2M3QWZCMTRmNywxNjE2OTIwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweDE5Y2M1OUMzMGNFNTQ3MDY2MzNkQzI5RWRFYkFFMWVmRjE3NTdiMjUsMjI0OTgwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweGExMzBmRTVEMzk5MTA0Q0E1QUYxNjhmYmJCQmUxOUY5NWQ3Mzk3NDEsNzQ1OTE4ICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweEMwY0QxYmY2RjI5MzkwOTVhNTZCMERGYTA4NUJhMjg4NmI4NEU3ZDEsNzQ1OTE4ICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweGYyQzI2ZTc5ZUQyNjRCMEUzZTVBNURGYjFEZDkxRUE2MWY1MTJDNmUsNzQ1OTE4ICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweDVGODc2YThBNUYxQjY2ZmJmM0QwRDExOTA3NWI2MmFGNDM4NmUzMTksNzQ1OTE4ICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweGI4RTA0NjU3MDgwMERkNzY3MjBhRjZkNDJkM2NDYWU0NTFGNTRmMTUsNzQ1OTIwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweEE1MjRmYTY1QWFjNDY0N2ZhN2JBMmMyMEQyMkY2NDQ1MGMzNTFiQmQsNzE0Mjg2ICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQxWSgweDI3MjA5YjI3NkMxNWE5MzZCQ0UwOEQ3RDcwZjBjOTdhZWIzQ0U4YzMsMTM4ODkgKiBERUNJTUFMU0ZBQ1RPUik7DQoNCiAgICAgICAgYXNzZXJ0KHRvdGFsU3VwcGx5TG9ja2VkMVkgPT0gVE9LRU5TX0xPQ0tFRF8xWV9UT1RBTCk7DQoNCiAgICAgICAgLy8gLS0tIDJ5IGxvY2tlZCB0b2tlbnMgLS0tDQogICAgICAgIGFkZDJZKDB4NGJlRTA4OGVmREJDQzYxMEVFRWExMDFkZWQ3MjA0MTUwQUYxQzhiOSwxMDAwMDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQyWSgweDgzOTU1MTIwMWY4NjY5MDdFYjUwMTdiRTc5Y0VCNDhhRGE1ODY1MGMsOTI1MDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQyWSgweGE5MmQ0Q2QzNDEyODYyMzg2YzIzNEJlNTcyRmU0QThGQTRCQjA5YzYsOTI1MDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQyWSgweEVDZjJCNWZjZTMzMDA3RTU2NjlENjNkZTM5YTRjNjYzZTU2OTU4ZEQsOTI1MDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQyWSgweEQ2Qjc2OTViYzc0RTJDOTUwZWI5NTMzMTYzNTlFYWIyODNDNUJkYTgsOTI1MDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQyWSgweEJFMzQ2M0VhZTI2Mzk4RDU1YTcxMTg2ODMwNzkyNjRCY0YzYWIyNEIsMTUwMDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQyWSgweGY0NzQyOEZiOUE2MWM5ZjMzMTJjQjAzNUFFRTA0OUZCYTc2YmE2MmEsMTUwMDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQyWSgweGZDY2M3NzE2NUQ4MjJFZjkwMDQ3MTRkODI5YkRDMjY3Qzc0MzY1OGEsNTAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7DQogICAgICAgIGFkZDJZKDB4REFlZjQ2Zjg5YzI2NDE4MkNkODdDZTkzQjYyMEI2M2M3QWZCMTRmNyw1MDAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7DQogICAgICAgIGFkZDJZKDB4YWY4ZGYyYUNBZWMzZDVkOTJkRTQyYTZjMTlkNzcwNkE0RjNFOEQ4Yiw1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsNCiAgICAgICAgYWRkMlkoMHgyMmE2Zjk2OTM4NTYzNzRCRjI5MjJjZDgzN2QwN0Y2NjcwRTdGQTRkLDI1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsNCiAgICAgICAgYWRkMlkoMHgzRjcyMENhOEZmRjU5OEYwMGE1MURFMzJBOENiNThDYTczZjIyYURlLDUwMDAwICogREVDSU1BTFNGQUNUT1IpOw0KICAgICAgICBhZGQyWSgweEJkMEQxOTU0QjMwMUU0MTRGMGI1RDA4MjdBNjlFQzVkRDU1OWU1MEIsNTAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7DQogICAgICAgIGFkZDJZKDB4MmFkNkIwMTFGRWNERTgzMGM5Y2M0ZGMwZDBiNzdGMDU1RDZiNTk5MCw1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsNCg0KICAgICAgICAvL3RyZWFzdXJ5DQogICAgICAgIGFkZDJZKDB4OTkwYTJEMTcyMzk4MDA3ZmNiZDUwNzhEODQ2OTZCZEQ4Y0NEZjdiMiwyMDAwMDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsNCg0KICAgICAgICBhc3NlcnQodG90YWxTdXBwbHlMb2NrZWQyWSA9PSBUT0tFTlNfTE9DS0VEXzJZX1RPVEFMKTsNCiAgICB9DQoNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIEFkZCByZW1haW5pbmcgdG9rZW5zIHRvIGxvY2tlZCAxeSBiYWxhbmNlcw0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIGFkZFJlbWFpbmluZ1Rva2VucygpIHsNCiAgICAgICAgLy8gT25seSB0aGUgY3Jvd2RzYWxlIGNvbnRyYWN0IGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24NCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkZHJlc3ModG9rZW5Db250cmFjdCkpOw0KICAgICAgICAvLyBUb3RhbCB0b2tlbnMgdG8gYmUgY3JlYXRlZA0KICAgICAgICB1aW50IHJlbWFpbmluZ1Rva2VucyA9IFRPS0VOU19UT1RBTDsNCiAgICAgICAgLy8gTWludXMgcHJlY29tbWl0bWVudHMgYW5kIHB1YmxpYyBjcm93ZHNhbGUgdG9rZW5zDQogICAgICAgIHJlbWFpbmluZ1Rva2VucyA9IHJlbWFpbmluZ1Rva2Vucy5zdWIodG9rZW5Db250cmFjdC50b3RhbFN1cHBseSgpKTsNCiAgICAgICAgLy8gTWludXMgMXkgbG9ja2VkIHRva2Vucw0KICAgICAgICByZW1haW5pbmdUb2tlbnMgPSByZW1haW5pbmdUb2tlbnMuc3ViKHRvdGFsU3VwcGx5TG9ja2VkMVkpOw0KICAgICAgICAvLyBNaW51cyAyeSBsb2NrZWQgdG9rZW5zDQogICAgICAgIHJlbWFpbmluZ1Rva2VucyA9IHJlbWFpbmluZ1Rva2Vucy5zdWIodG90YWxTdXBwbHlMb2NrZWQyWSk7DQogICAgICAgIC8vIFVuc29sZCB0cmFuY2hlMSBhbmQgdHJhbmNoZTIgdG9rZW5zIHRvIGJlIGxvY2tlZCBmb3IgMXkgDQogICAgICAgIGFkZDFZKFRSQU5DSEUyX0FDQ09VTlQsIHJlbWFpbmluZ1Rva2Vucyk7DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBBZGQgdG8gMXkgbG9ja2VkIGJhbGFuY2VzIGFuZCB0b3RhbFN1cHBseQ0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIGFkZDFZKGFkZHJlc3MgYWNjb3VudCwgdWludCB2YWx1ZSkgcHJpdmF0ZSB7DQogICAgICAgIGJhbGFuY2VzTG9ja2VkMVlbYWNjb3VudF0gPSBiYWxhbmNlc0xvY2tlZDFZW2FjY291bnRdLmFkZCh2YWx1ZSk7DQogICAgICAgIHRvdGFsU3VwcGx5TG9ja2VkMVkgPSB0b3RhbFN1cHBseUxvY2tlZDFZLmFkZCh2YWx1ZSk7DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBBZGQgdG8gMnkgbG9ja2VkIGJhbGFuY2VzIGFuZCB0b3RhbFN1cHBseQ0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIGFkZDJZKGFkZHJlc3MgYWNjb3VudCwgdWludCB2YWx1ZSkgcHJpdmF0ZSB7DQogICAgICAgIGJhbGFuY2VzTG9ja2VkMllbYWNjb3VudF0gPSBiYWxhbmNlc0xvY2tlZDJZW2FjY291bnRdLmFkZCh2YWx1ZSk7DQogICAgICAgIHRvdGFsU3VwcGx5TG9ja2VkMlkgPSB0b3RhbFN1cHBseUxvY2tlZDJZLmFkZCh2YWx1ZSk7DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyAxeSBsb2NrZWQgYmFsYW5jZXMgZm9yIGFuIGFjY291bnQNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiBiYWxhbmNlT2ZMb2NrZWQxWShhZGRyZXNzIGFjY291bnQpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgew0KICAgICAgICByZXR1cm4gYmFsYW5jZXNMb2NrZWQxWVthY2NvdW50XTsNCiAgICB9DQoNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIDJ5IGxvY2tlZCBiYWxhbmNlcyBmb3IgYW4gYWNjb3VudA0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZkxvY2tlZDJZKGFkZHJlc3MgYWNjb3VudCkgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7DQogICAgICAgIHJldHVybiBiYWxhbmNlc0xvY2tlZDJZW2FjY291bnRdOw0KICAgIH0NCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gMXkgYW5kIDJ5IGxvY2tlZCBiYWxhbmNlcyBmb3IgYW4gYWNjb3VudA0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZkxvY2tlZChhZGRyZXNzIGFjY291bnQpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgew0KICAgICAgICByZXR1cm4gYmFsYW5jZXNMb2NrZWQxWVthY2NvdW50XS5hZGQoYmFsYW5jZXNMb2NrZWQyWVthY2NvdW50XSk7DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyAxeSBhbmQgMnkgbG9ja2VkIHRvdGFsIHN1cHBseQ0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5TG9ja2VkKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgew0KICAgICAgICByZXR1cm4gdG90YWxTdXBwbHlMb2NrZWQxWSArIHRvdGFsU3VwcGx5TG9ja2VkMlk7DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBBbiBhY2NvdW50IGNhbiB1bmxvY2sgdGhlaXIgMXkgbG9ja2VkIHRva2VucyAxeSBhZnRlciB0b2tlbiBsYXVuY2ggZGF0ZQ0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIHVubG9jazFZKCkgew0KICAgICAgICByZXF1aXJlKG5vdyA+PSBMT0NLRURfMVlfREFURSk7DQogICAgICAgIHVpbnQgYW1vdW50ID0gYmFsYW5jZXNMb2NrZWQxWVttc2cuc2VuZGVyXTsNCiAgICAgICAgcmVxdWlyZShhbW91bnQgPiAwKTsNCiAgICAgICAgYmFsYW5jZXNMb2NrZWQxWVttc2cuc2VuZGVyXSA9IDA7DQogICAgICAgIHRvdGFsU3VwcGx5TG9ja2VkMVkgPSB0b3RhbFN1cHBseUxvY2tlZDFZLnN1YihhbW91bnQpOw0KICAgICAgICBpZiAoIXRva2VuQ29udHJhY3QudHJhbnNmZXIobXNnLnNlbmRlciwgYW1vdW50KSkgdGhyb3c7DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBBbiBhY2NvdW50IGNhbiB1bmxvY2sgdGhlaXIgMnkgbG9ja2VkIHRva2VucyAyeSBhZnRlciB0b2tlbiBsYXVuY2ggZGF0ZQ0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIHVubG9jazJZKCkgew0KICAgICAgICByZXF1aXJlKG5vdyA+PSBMT0NLRURfMllfREFURSk7DQogICAgICAgIHVpbnQgYW1vdW50ID0gYmFsYW5jZXNMb2NrZWQyWVttc2cuc2VuZGVyXTsNCiAgICAgICAgcmVxdWlyZShhbW91bnQgPiAwKTsNCiAgICAgICAgYmFsYW5jZXNMb2NrZWQyWVttc2cuc2VuZGVyXSA9IDA7DQogICAgICAgIHRvdGFsU3VwcGx5TG9ja2VkMlkgPSB0b3RhbFN1cHBseUxvY2tlZDJZLnN1YihhbW91bnQpOw0KICAgICAgICBpZiAoIXRva2VuQ29udHJhY3QudHJhbnNmZXIobXNnLnNlbmRlciwgYW1vdW50KSkgdGhyb3c7DQogICAgfQ0KfQ0KDQoNCg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gRVJDMjAgVG9rZW4sIHdpdGggdGhlIGFkZGl0aW9uIG9mIHN5bWJvbCwgbmFtZSBhbmQgZGVjaW1hbHMNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmNvbnRyYWN0IEVSQzIwVG9rZW4gaXMgRVJDMjBJbnRlcmZhY2UsIE93bmVkIHsNCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIHN5bWJvbCgpLCBuYW1lKCkgYW5kIGRlY2ltYWxzKCkNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsNCiAgICBzdHJpbmcgcHVibGljIG5hbWU7DQogICAgdWludDggcHVibGljIGRlY2ltYWxzOw0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gQmFsYW5jZXMgZm9yIGVhY2ggYWNjb3VudA0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIE93bmVyIG9mIGFjY291bnQgYXBwcm92ZXMgdGhlIHRyYW5zZmVyIG9mIGFuIGFtb3VudCB0byBhbm90aGVyIGFjY291bnQNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsNCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gQ29uc3RydWN0b3INCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiBFUkMyMFRva2VuKA0KICAgICAgICBzdHJpbmcgX3N5bWJvbCwgDQogICAgICAgIHN0cmluZyBfbmFtZSwgDQogICAgICAgIHVpbnQ4IF9kZWNpbWFscywgDQogICAgICAgIHVpbnQgX3RvdGFsU3VwcGx5DQogICAgKSBPd25lZCgpIHsNCiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsNCiAgICAgICAgbmFtZSA9IF9uYW1lOw0KICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsNCiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7DQogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IF90b3RhbFN1cHBseTsNCiAgICB9DQoNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIEdldCB0aGUgYWNjb3VudCBiYWxhbmNlIG9mIGFub3RoZXIgYWNjb3VudCB3aXRoIGFkZHJlc3MgX293bmVyDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsNCiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBUcmFuc2ZlciB0aGUgYmFsYW5jZSBmcm9tIG93bmVyJ3MgYWNjb3VudCB0byBhbm90aGVyIGFjY291bnQNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQgICAgICAgICAgICAgLy8gVXNlciBoYXMgYmFsYW5jZQ0KICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb24temVybyB0cmFuc2Zlcg0KICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dICAvLyBPdmVyZmxvdyBjaGVjaw0KICAgICAgICApIHsNCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOw0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOw0KICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBBbGxvdyBfc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIHlvdXIgYWNjb3VudCwgbXVsdGlwbGUgdGltZXMsIHVwIHRvIHRoZQ0KICAgIC8vIF92YWx1ZSBhbW91bnQuIElmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIGl0IG92ZXJ3cml0ZXMgdGhlDQogICAgLy8gY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gYXBwcm92ZSgNCiAgICAgICAgYWRkcmVzcyBfc3BlbmRlciwNCiAgICAgICAgdWludCBfYW1vdW50DQogICAgKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfYW1vdW50Ow0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gU3BlbmRlciBvZiB0b2tlbnMgdHJhbnNmZXIgYW4gYW1vdW50IG9mIHRva2VucyBmcm9tIHRoZSB0b2tlbiBvd25lcidzDQogICAgLy8gYmFsYW5jZSB0byBhbm90aGVyIGFjY291bnQuIFRoZSBvd25lciBvZiB0aGUgdG9rZW5zIG11c3QgYWxyZWFkeQ0KICAgIC8vIGhhdmUgYXBwcm92ZSguLi4pLWQgdGhpcyB0cmFuc2Zlcg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgNCiAgICAgICAgYWRkcmVzcyBfZnJvbSwNCiAgICAgICAgYWRkcmVzcyBfdG8sDQogICAgICAgIHVpbnQgX2Ftb3VudA0KICAgICkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudCAgICAgICAgICAgICAgICAgIC8vIEZyb20gYS9jIGhhcyBiYWxhbmNlDQogICAgICAgICAgICAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICAgIC8vIFRyYW5zZmVyIGFwcHJvdmVkDQogICAgICAgICAgICAmJiBfYW1vdW50ID4gMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vbi16ZXJvIHRyYW5zZmVyDQogICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10gIC8vIE92ZXJmbG93IGNoZWNrDQogICAgICAgICkgew0KICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfYW1vdW50KTsNCiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOw0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOw0KICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gUmV0dXJucyB0aGUgYW1vdW50IG9mIHRva2VucyBhcHByb3ZlZCBieSB0aGUgb3duZXIgdGhhdCBjYW4gYmUNCiAgICAvLyB0cmFuc2ZlcnJlZCB0byB0aGUgc3BlbmRlcidzIGFjY291bnQNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoDQogICAgICAgIGFkZHJlc3MgX293bmVyLCANCiAgICAgICAgYWRkcmVzcyBfc3BlbmRlcg0KICAgICkgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsNCiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogICAgfQ0KfQ0KDQoNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIG9wZW5BTlggY3Jvd2RzYWxlIHRva2VuIHNtYXJ0IGNvbnRyYWN0DQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpjb250cmFjdCBPcGVuQU5YVG9rZW4gaXMgRVJDMjBUb2tlbiwgT3BlbkFOWFRva2VuQ29uZmlnIHsNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIEhhcyB0aGUgY3Jvd2RzYWxlIGJlZW4gZmluYWxpc2VkPw0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGJvb2wgcHVibGljIGZpbmFsaXNlZCA9IGZhbHNlOw0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gTnVtYmVyIG9mIHRva2VucyBwZXIgMSwwMDAgRVRIDQogICAgLy8gVGhpcyBjYW4gYmUgYWRqdXN0ZWQgYXMgdGhlIEVUSC9VU0QgcmF0ZSBjaGFuZ2VzDQogICAgLy8NCiAgICAvLyBJbmRpY2F0aXZlIHJhdGUgb2YgRVRIIHBlciB0b2tlbiBvZiAwLjAwMjkwOTIzIGF0IDggSnVuZSAyMDE3DQogICAgLy8gDQogICAgLy8gVGhpcyBpcyB0aGUgc2FtZSBhcyAxIC8gMC4wMDI5MDkyMyA9IDM0My43MzM1NjUyMzg5MTIwMTUgT0FYIHBlciBFVEgNCiAgICAvLw0KICAgIC8vIHRva2Vuc1BlckV0aGVyICA9IDM0My43MzM1NjUyMzg5MTIwMTUNCiAgICAvLyB0b2tlbnNQZXJLRXRoZXIgPSAzNDMsNzMzLjU2NTIzODkxMjAxNQ0KICAgIC8vIHRva2Vuc1BlcktFdGhlciA9IDM0Myw3MzQgcm91bmRlZCB0byBhbiB1aW50LCBzaXggc2lnbmlmaWNhbnQgZmlndXJlcw0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIHVpbnQgcHVibGljIHRva2Vuc1BlcktFdGhlciA9IDM0MzczNDsNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIExvY2tlZCBUb2tlbnMgLSBob2xkcyB0aGUgMXkgYW5kIDJ5IGxvY2tlZCB0b2tlbnMgaW5mb3JtYXRpb24NCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBMb2NrZWRUb2tlbnMgcHVibGljIGxvY2tlZFRva2VuczsNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIFdhbGxldCByZWNlaXZpbmcgdGhlIHJhaXNlZCBmdW5kcyANCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7DQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBDcm93ZHNhbGUgcGFydGljaXBhbnQncyBhY2NvdW50cyBuZWVkIHRvIGJlIEtZQyB2ZXJpZmllZCBLWUMgYmVmb3JlDQogICAgLy8gdGhlIHBhcnRpY2lwYW50IGNhbiBtb3ZlIHRoZWlyIHRva2Vucw0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMga3ljUmVxdWlyZWQ7DQoNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIENvbnN0cnVjdG9yDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gT3BlbkFOWFRva2VuKGFkZHJlc3MgX3dhbGxldCkgDQogICAgICAgIEVSQzIwVG9rZW4oU1lNQk9MLCBOQU1FLCBERUNJTUFMUywgMCkNCiAgICB7DQogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7DQogICAgICAgIGxvY2tlZFRva2VucyA9IG5ldyBMb2NrZWRUb2tlbnModGhpcyk7DQogICAgICAgIHJlcXVpcmUoYWRkcmVzcyhsb2NrZWRUb2tlbnMpICE9IDB4MCk7DQogICAgfQ0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gb3BlbkFOWCBjYW4gY2hhbmdlIHRoZSBjcm93ZHNhbGUgd2FsbGV0IGFkZHJlc3MNCiAgICAvLyBDYW4gYmUgc2V0IGF0IGFueSB0aW1lIGJlZm9yZSBvciBkdXJpbmcgdGhlIGNyb3dkc2FsZQ0KICAgIC8vIE5vdCByZWxldmFudCBhZnRlciB0aGUgY3Jvd2RzYWxlIGlzIGZpbmFsaXNlZCBhcyBubyBtb3JlIGNvbnRyaWJ1dGlvbnMNCiAgICAvLyBhcmUgYWNjZXB0ZWQNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiBzZXRXYWxsZXQoYWRkcmVzcyBfd2FsbGV0KSBvbmx5T3duZXIgew0KICAgICAgICB3YWxsZXQgPSBfd2FsbGV0Ow0KICAgICAgICBXYWxsZXRVcGRhdGVkKHdhbGxldCk7DQogICAgfQ0KICAgIGV2ZW50IFdhbGxldFVwZGF0ZWQoYWRkcmVzcyBuZXdXYWxsZXQpOw0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBvcGVuQU5YIGNhbiBzZXQgbnVtYmVyIG9mIHRva2VucyBwZXIgMSwwMDAgRVRIDQogICAgLy8gQ2FuIG9ubHkgYmUgc2V0IGJlZm9yZSB0aGUgc3RhcnQgb2YgdGhlIGNyb3dkc2FsZQ0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIHNldFRva2Vuc1BlcktFdGhlcih1aW50IF90b2tlbnNQZXJLRXRoZXIpIG9ubHlPd25lciB7DQogICAgICAgIHJlcXVpcmUobm93IDwgU1RBUlRfREFURSk7DQogICAgICAgIHJlcXVpcmUoX3Rva2Vuc1BlcktFdGhlciA+IDApOw0KICAgICAgICB0b2tlbnNQZXJLRXRoZXIgPSBfdG9rZW5zUGVyS0V0aGVyOw0KICAgICAgICBUb2tlbnNQZXJLRXRoZXJVcGRhdGVkKHRva2Vuc1BlcktFdGhlcik7DQogICAgfQ0KICAgIGV2ZW50IFRva2Vuc1BlcktFdGhlclVwZGF0ZWQodWludCB0b2tlbnNQZXJLRXRoZXIpOw0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBBY2NlcHQgZXRoZXJzIHRvIGJ1eSB0b2tlbnMgZHVyaW5nIHRoZSBjcm93ZHNhbGUNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICAgICAgcHJveHlQYXltZW50KG1zZy5zZW5kZXIpOw0KICAgIH0NCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gQWNjZXB0IGV0aGVycyBmcm9tIG9uZSBhY2NvdW50IGZvciB0b2tlbnMgdG8gYmUgY3JlYXRlZCBmb3IgYW5vdGhlcg0KICAgIC8vIGFjY291bnQuIENhbiBiZSB1c2VkIGJ5IGV4Y2hhbmdlcyB0byBwdXJjaGFzZSB0b2tlbnMgb24gYmVoYWxmIG9mIA0KICAgIC8vIGl0J3MgdXNlcg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIHByb3h5UGF5bWVudChhZGRyZXNzIHBhcnRpY2lwYW50KSBwYXlhYmxlIHsNCiAgICAgICAgLy8gTm8gY29udHJpYnV0aW9ucyBhZnRlciB0aGUgY3Jvd2RzYWxlIGlzIGZpbmFsaXNlZA0KICAgICAgICByZXF1aXJlKCFmaW5hbGlzZWQpOw0KDQogICAgICAgIC8vIE5vIGNvbnRyaWJ1dGlvbnMgYmVmb3JlIHRoZSBzdGFydCBvZiB0aGUgY3Jvd2RzYWxlDQogICAgICAgIHJlcXVpcmUobm93ID49IFNUQVJUX0RBVEUpOw0KICAgICAgICAvLyBObyBjb250cmlidXRpb25zIGFmdGVyIHRoZSBlbmQgb2YgdGhlIGNyb3dkc2FsZQ0KICAgICAgICByZXF1aXJlKG5vdyA8PSBFTkRfREFURSk7DQoNCiAgICAgICAgLy8gTm8gY29udHJpYnV0aW9ucyBiZWxvdyB0aGUgbWluaW11bSAoY2FuIGJlIDAgRVRIKQ0KICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBDT05UUklCVVRJT05TX01JTik7DQogICAgICAgIC8vIE5vIGNvbnRyaWJ1dGlvbnMgYWJvdmUgYSBtYXhpbXVtIChpZiBtYXhpbXVtIGlzIHNldCB0byBub24tMCkNCiAgICAgICAgcmVxdWlyZShDT05UUklCVVRJT05TX01BWCA9PSAwIHx8IG1zZy52YWx1ZSA8IENPTlRSSUJVVElPTlNfTUFYKTsNCg0KICAgICAgICAvLyBDYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucyBmb3IgY29udHJpYnV0ZWQgRVRIDQogICAgICAgIC8vIGAxOGAgaXMgdGhlIEVUSCBkZWNpbWFscw0KICAgICAgICAvLyBgLSBkZWNpbWFsc2AgaXMgdGhlIHRva2VuIGRlY2ltYWxzDQogICAgICAgIC8vIGArIDNgIGZvciB0aGUgdG9rZW5zIHBlciAxLDAwMCBFVEggZmFjdG9yDQogICAgICAgIHVpbnQgdG9rZW5zID0gbXNnLnZhbHVlICogdG9rZW5zUGVyS0V0aGVyIC8gMTAqKnVpbnQoMTggLSBkZWNpbWFscyArIDMpOw0KDQogICAgICAgIC8vIENoZWNrIGlmIHRoZSBoYXJkIGNhcCB3aWxsIGJlIGV4Y2VlZGVkDQogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgKyB0b2tlbnMgPD0gVE9LRU5TX0hBUkRfQ0FQKTsNCg0KICAgICAgICAvLyBBZGQgdG9rZW5zIHB1cmNoYXNlZCB0byBhY2NvdW50J3MgYmFsYW5jZSBhbmQgdG90YWwgc3VwcGx5DQogICAgICAgIGJhbGFuY2VzW3BhcnRpY2lwYW50XSA9IGJhbGFuY2VzW3BhcnRpY2lwYW50XS5hZGQodG9rZW5zKTsNCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG9rZW5zKTsNCg0KICAgICAgICAvLyBMb2cgdGhlIHRva2VucyBwdXJjaGFzZWQgDQogICAgICAgIFRyYW5zZmVyKDB4MCwgcGFydGljaXBhbnQsIHRva2Vucyk7DQogICAgICAgIFRva2Vuc0JvdWdodChwYXJ0aWNpcGFudCwgbXNnLnZhbHVlLCB0aGlzLmJhbGFuY2UsIHRva2VucywNCiAgICAgICAgICAgICB0b3RhbFN1cHBseSwgdG9rZW5zUGVyS0V0aGVyKTsNCg0KICAgICAgICAvLyBLWUMgdmVyaWZpY2F0aW9uIHJlcXVpcmVkIGJlZm9yZSBwYXJ0aWNpcGFudCBjYW4gdHJhbnNmZXIgdGhlIHRva2Vucw0KICAgICAgICBreWNSZXF1aXJlZFtwYXJ0aWNpcGFudF0gPSB0cnVlOw0KDQogICAgICAgIC8vIFRyYW5zZmVyIHRoZSBjb250cmlidXRlZCBldGhlcnMgdG8gdGhlIGNyb3dkc2FsZSB3YWxsZXQNCiAgICAgICAgaWYgKCF3YWxsZXQuc2VuZChtc2cudmFsdWUpKSB0aHJvdzsNCiAgICB9DQogICAgZXZlbnQgVG9rZW5zQm91Z2h0KGFkZHJlc3MgaW5kZXhlZCBidXllciwgdWludCBldGhlcnMsIA0KICAgICAgICB1aW50IG5ld0V0aGVyQmFsYW5jZSwgdWludCB0b2tlbnMsIHVpbnQgbmV3VG90YWxTdXBwbHksIA0KICAgICAgICB1aW50IHRva2Vuc1BlcktFdGhlcik7DQoNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIG9wZW5BTlggdG8gZmluYWxpc2UgdGhlIGNyb3dkc2FsZSAtIHRvIGFkZGluZyB0aGUgbG9ja2VkIHRva2VucyB0byANCiAgICAvLyB0aGlzIGNvbnRyYWN0IGFuZCB0aGUgdG90YWwgc3VwcGx5DQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gZmluYWxpc2UoKSBvbmx5T3duZXIgew0KICAgICAgICAvLyBDYW4gb25seSBmaW5hbGlzZSBpZiByYWlzZWQgPiBzb2Z0IGNhcCBvciBhZnRlciB0aGUgZW5kIGRhdGUNCiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA+PSBUT0tFTlNfU09GVF9DQVAgfHwgbm93ID4gRU5EX0RBVEUpOw0KDQogICAgICAgIC8vIENhbiBvbmx5IGZpbmFsaXNlIG9uY2UNCiAgICAgICAgcmVxdWlyZSghZmluYWxpc2VkKTsNCg0KICAgICAgICAvLyBDYWxjdWxhdGUgYW5kIGFkZCByZW1haW5pbmcgdG9rZW5zIHRvIGxvY2tlZCBiYWxhbmNlcw0KICAgICAgICBsb2NrZWRUb2tlbnMuYWRkUmVtYWluaW5nVG9rZW5zKCk7DQoNCiAgICAgICAgLy8gQWxsb2NhdGUgbG9ja2VkIGFuZCBwcmVtaW5lZCB0b2tlbnMNCiAgICAgICAgYmFsYW5jZXNbYWRkcmVzcyhsb2NrZWRUb2tlbnMpXSA9IGJhbGFuY2VzW2FkZHJlc3MobG9ja2VkVG9rZW5zKV0uDQogICAgICAgICAgICBhZGQobG9ja2VkVG9rZW5zLnRvdGFsU3VwcGx5TG9ja2VkKCkpOw0KICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChsb2NrZWRUb2tlbnMudG90YWxTdXBwbHlMb2NrZWQoKSk7DQoNCiAgICAgICAgLy8gQ2FuIG9ubHkgZmluYWxpc2Ugb25jZQ0KICAgICAgICBmaW5hbGlzZWQgPSB0cnVlOw0KICAgIH0NCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gb3BlbkFOWCB0byBhZGQgcHJlY29tbWl0bWVudCBmdW5kaW5nIHRva2VuIGJhbGFuY2UgYmVmb3JlIHRoZSBjcm93ZHNhbGUNCiAgICAvLyBjb21tZW5jZXMNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiBhZGRQcmVjb21taXRtZW50KGFkZHJlc3MgcGFydGljaXBhbnQsIHVpbnQgYmFsYW5jZSkgb25seU93bmVyIHsNCiAgICAgICAgcmVxdWlyZShub3cgPCBTVEFSVF9EQVRFKTsNCiAgICAgICAgcmVxdWlyZShiYWxhbmNlID4gMCk7DQogICAgICAgIGJhbGFuY2VzW3BhcnRpY2lwYW50XSA9IGJhbGFuY2VzW3BhcnRpY2lwYW50XS5hZGQoYmFsYW5jZSk7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKGJhbGFuY2UpOw0KICAgICAgICBUcmFuc2ZlcigweDAsIHBhcnRpY2lwYW50LCBiYWxhbmNlKTsNCiAgICB9DQogICAgZXZlbnQgUHJlY29tbWl0bWVudEFkZGVkKGFkZHJlc3MgaW5kZXhlZCBwYXJ0aWNpcGFudCwgdWludCBiYWxhbmNlKTsNCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gVHJhbnNmZXIgdGhlIGJhbGFuY2UgZnJvbSBvd25lcidzIGFjY291bnQgdG8gYW5vdGhlciBhY2NvdW50LCB3aXRoIEtZQw0KICAgIC8vIHZlcmlmaWNhdGlvbiBjaGVjayBmb3IgdGhlIGNyb3dkc2FsZSBwYXJ0aWNpcGFudCdzIGZpcnN0IHRyYW5zZmVyDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIC8vIENhbm5vdCB0cmFuc2ZlciBiZWZvcmUgY3Jvd2RzYWxlIGVuZHMNCiAgICAgICAgcmVxdWlyZShmaW5hbGlzZWQpOw0KICAgICAgICAvLyBDYW5ub3QgdHJhbnNmZXIgaWYgS1lDIHZlcmlmaWNhdGlvbiBpcyByZXF1aXJlZA0KICAgICAgICByZXF1aXJlKCFreWNSZXF1aXJlZFttc2cuc2VuZGVyXSk7DQogICAgICAgIC8vIFN0YW5kYXJkIHRyYW5zZmVyDQogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF9hbW91bnQpOw0KICAgIH0NCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gU3BlbmRlciBvZiB0b2tlbnMgdHJhbnNmZXIgYW4gYW1vdW50IG9mIHRva2VucyBmcm9tIHRoZSB0b2tlbiBvd25lcidzDQogICAgLy8gYmFsYW5jZSB0byBhbm90aGVyIGFjY291bnQsIHdpdGggS1lDIHZlcmlmaWNhdGlvbiBjaGVjayBmb3IgdGhlDQogICAgLy8gY3Jvd2RzYWxlIHBhcnRpY2lwYW50J3MgZmlyc3QgdHJhbnNmZXINCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgDQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykNCiAgICB7DQogICAgICAgIC8vIENhbm5vdCB0cmFuc2ZlciBiZWZvcmUgY3Jvd2RzYWxlIGVuZHMNCiAgICAgICAgcmVxdWlyZShmaW5hbGlzZWQpOw0KICAgICAgICAvLyBDYW5ub3QgdHJhbnNmZXIgaWYgS1lDIHZlcmlmaWNhdGlvbiBpcyByZXF1aXJlZA0KICAgICAgICByZXF1aXJlKCFreWNSZXF1aXJlZFtfZnJvbV0pOw0KICAgICAgICAvLyBTdGFuZGFyZCB0cmFuc2ZlckZyb20NCiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfYW1vdW50KTsNCiAgICB9DQoNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIG9wZW5BTlggdG8gS1lDIHZlcmlmeSB0aGUgcGFydGljaXBhbnQncyBhY2NvdW50DQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24ga3ljVmVyaWZ5KGFkZHJlc3MgcGFydGljaXBhbnQpIG9ubHlPd25lciB7DQogICAgICAgIGt5Y1JlcXVpcmVkW3BhcnRpY2lwYW50XSA9IGZhbHNlOw0KICAgICAgICBLeWNWZXJpZmllZChwYXJ0aWNpcGFudCk7DQogICAgfQ0KICAgIGV2ZW50IEt5Y1ZlcmlmaWVkKGFkZHJlc3MgaW5kZXhlZCBwYXJ0aWNpcGFudCk7DQoNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIEFueSBhY2NvdW50IGNhbiBidXJuIF9mcm9tJ3MgdG9rZW5zIGFzIGxvbmcgYXMgdGhlIF9mcm9tIGFjY291bnQgaGFzIA0KICAgIC8vIGFwcHJvdmVkIHRoZSBfYW1vdW50IHRvIGJlIGJ1cm50IHVzaW5nDQogICAgLy8gICBhcHByb3ZlKDB4MCwgX2Ftb3VudCkNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiBidXJuRnJvbSgNCiAgICAgICAgYWRkcmVzcyBfZnJvbSwNCiAgICAgICAgdWludCBfYW1vdW50DQogICAgKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50ICAgICAgICAgICAgICAgICAgLy8gRnJvbSBhL2MgaGFzIGJhbGFuY2UNCiAgICAgICAgICAgICYmIGFsbG93ZWRbX2Zyb21dWzB4MF0gPj0gX2Ftb3VudCAgICAgICAgICAgLy8gVHJhbnNmZXIgYXBwcm92ZWQNCiAgICAgICAgICAgICYmIF9hbW91bnQgPiAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9uLXplcm8gdHJhbnNmZXINCiAgICAgICAgICAgICYmIGJhbGFuY2VzWzB4MF0gKyBfYW1vdW50ID4gYmFsYW5jZXNbMHgwXSAgLy8gT3ZlcmZsb3cgY2hlY2sNCiAgICAgICAgKSB7DQogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF9hbW91bnQpOw0KICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bMHgwXSA9IGFsbG93ZWRbX2Zyb21dWzB4MF0uc3ViKF9hbW91bnQpOw0KICAgICAgICAgICAgYmFsYW5jZXNbMHgwXSA9IGJhbGFuY2VzWzB4MF0uYWRkKF9hbW91bnQpOw0KICAgICAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX2Ftb3VudCk7DQogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgMHgwLCBfYW1vdW50KTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyAxeSBsb2NrZWQgYmFsYW5jZXMgZm9yIGFuIGFjY291bnQNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiBiYWxhbmNlT2ZMb2NrZWQxWShhZGRyZXNzIGFjY291bnQpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgew0KICAgICAgICByZXR1cm4gbG9ja2VkVG9rZW5zLmJhbGFuY2VPZkxvY2tlZDFZKGFjY291bnQpOw0KICAgIH0NCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gMnkgbG9ja2VkIGJhbGFuY2VzIGZvciBhbiBhY2NvdW50DQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gYmFsYW5jZU9mTG9ja2VkMlkoYWRkcmVzcyBhY2NvdW50KSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsNCiAgICAgICAgcmV0dXJuIGxvY2tlZFRva2Vucy5iYWxhbmNlT2ZMb2NrZWQyWShhY2NvdW50KTsNCiAgICB9DQoNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIDF5IGFuZCAyeSBsb2NrZWQgYmFsYW5jZXMgZm9yIGFuIGFjY291bnQNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiBiYWxhbmNlT2ZMb2NrZWQoYWRkcmVzcyBhY2NvdW50KSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsNCiAgICAgICAgcmV0dXJuIGxvY2tlZFRva2Vucy5iYWxhbmNlT2ZMb2NrZWQoYWNjb3VudCk7DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyAxeSBsb2NrZWQgdG90YWwgc3VwcGx5DQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHlMb2NrZWQxWSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgaWYgKGZpbmFsaXNlZCkgew0KICAgICAgICAgICAgcmV0dXJuIGxvY2tlZFRva2Vucy50b3RhbFN1cHBseUxvY2tlZDFZKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgfQ0KICAgIH0NCg0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gMnkgbG9ja2VkIHRvdGFsIHN1cHBseQ0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5TG9ja2VkMlkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIGlmIChmaW5hbGlzZWQpIHsNCiAgICAgICAgICAgIHJldHVybiBsb2NrZWRUb2tlbnMudG90YWxTdXBwbHlMb2NrZWQyWSgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0NCiAgICB9DQoNCg0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vIDF5IGFuZCAyeSBsb2NrZWQgdG90YWwgc3VwcGx5DQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHlMb2NrZWQoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7DQogICAgICAgIGlmIChmaW5hbGlzZWQpIHsNCiAgICAgICAgICAgIHJldHVybiBsb2NrZWRUb2tlbnMudG90YWxTdXBwbHlMb2NrZWQoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBVbmxvY2tlZCB0b3RhbCBzdXBwbHkNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseVVubG9ja2VkKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgew0KICAgICAgICBpZiAoZmluYWxpc2VkICYmIHRvdGFsU3VwcGx5ID49IGxvY2tlZFRva2Vucy50b3RhbFN1cHBseUxvY2tlZCgpKSB7DQogICAgICAgICAgICByZXR1cm4gdG90YWxTdXBwbHkuc3ViKGxvY2tlZFRva2Vucy50b3RhbFN1cHBseUxvY2tlZCgpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9DQogICAgfQ0KDQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBvcGVuQU5YIGNhbiB0cmFuc2ZlciBvdXQgYW55IGFjY2lkZW50YWxseSBzZW50IEVSQzIwIHRva2Vucw0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW55RVJDMjBUb2tlbihhZGRyZXNzIHRva2VuQWRkcmVzcywgdWludCBhbW91bnQpDQogICAgICBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSANCiAgICB7DQogICAgICAgIHJldHVybiBFUkMyMEludGVyZmFjZSh0b2tlbkFkZHJlc3MpLnRyYW5zZmVyKG93bmVyLCBhbW91bnQpOw0KICAgIH0NCn0='