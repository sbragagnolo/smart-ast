base 64 content
base64lookRevToken1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyoNCiogTE9LICdMb29rUmV2IFRva2VuJyBjcm93ZGZ1bmRpbmcgY29udHJhY3QNCioNCiogUmVmZXIgdG8gaHR0cHM6Ly9sb29rcmV2LmNvbS8gZm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24uDQoqIA0KKiBEZXZlbG9wZXI6IExvb2tSZXYgKFRNKSAyMDE3Lg0KKg0KKiBBdWRpdGVkIGJ5IEJva2t5UG9vQmFoIC8gQm9rIENvbnN1bHRpbmcgUHR5IEx0ZCAyMDE3Lg0KKiANCiogVGhlIE1JVCBMaWNlbnNlLg0KKg0KKi8NCg0KLyoNCiAqIEVSQzIwIFRva2VuIFN0YW5kYXJkDQogKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjANCiAqDQogKi8NCmNvbnRyYWN0IEVSQzIwIHsNCiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7DQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF93aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7DQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpOw0KDQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7DQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOw0KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIG9rKTsNCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7DQogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOw0KfQ0KDQovKioNCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MNCiAqLw0KY29udHJhY3QgU2FmZU1hdGggew0KICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSArIGI7DQogICAgYXNzZXJ0KGMgPj0gYSAmJiBjID49IGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIGFzc2VydChiIDw9IGEpOw0KICAgIHVpbnQgYyA9IGEgLSBiOw0KICAgIGFzc2VydChjIDw9IGEpOw0KICAgIHJldHVybiBjOw0KICB9DQp9DQoNCmNvbnRyYWN0IE93bmFibGUgew0KICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCiAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7DQoNCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsNCiAgICBvd25lciA9IG1zZy5zZW5kZXI7DQogIH0NCg0KICBtb2RpZmllciBvbmx5T3duZXIgew0KICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7DQogICAgXzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgew0KICAgIGlmIChfbmV3T3duZXIgIT0gYWRkcmVzcygwKSkgew0KICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgew0KICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7DQogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsNCiAgICBvd25lciA9IG5ld093bmVyOw0KICB9DQogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7DQp9DQoNCi8qKg0KICogU3RhbmRhcmQgRVJDMjAgdG9rZW4gd2l0aCBTaG9ydCBIYW5kIEF0dGFjayBhbmQgYXBwcm92ZSgpIHJhY2UgY29uZGl0aW9uIG1pdGlnYXRpb24uDQogKg0KICogQmFzZWQgb24gY29kZSBieSBJbnZlc3RTZWVkDQogKi8NCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIE93bmFibGUsIFNhZmVNYXRoIHsNCg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOw0KDQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsNCiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50DQogICAgICAgICAgICAmJiBfYW1vdW50ID4gMA0KICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7DQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sX2Ftb3VudCk7DQogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLF9hbW91bnQpOw0KICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQNCiAgICAgICAgICAgICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQNCiAgICAgICAgICAgICYmIF9hbW91bnQgPiAwDQogICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10pIHsNCiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLF9hbW91bnQpOw0KICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLF9hbW91bnQpOw0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfYW1vdW50KTsNCiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCg0KICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYA0KICAgICAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdA0KICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToNCiAgICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5DQogICAgICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgew0KICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgfQ0KDQogICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsNCiAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgICAgfQ0KfQ0KDQovKioNCiAqIExvb2tSZXYgdG9rZW4gaW5pdGlhbCBvZmZlcmluZy4NCiAqDQogKiBUb2tlbiBzdXBwbHkgaXMgY3JlYXRlZCBpbiB0aGUgdG9rZW4gY29udHJhY3QgY3JlYXRpb24gYW5kIGFsbG9jYXRlZCB0byBvd25lci4NCiAqDQogKi8NCmNvbnRyYWN0IExvb2tSZXZUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsNCg0KICAgIC8qDQogICAgKiAgVG9rZW4gbWV0YSBkYXRhDQogICAgKi8NCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiTG9va1JldiI7DQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiTE9LIjsNCiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsNCiAgICBzdHJpbmcgcHVibGljIFZFUlNJT04gPSAnTE9LMS4wJzsNCiAgICBib29sIHB1YmxpYyBmaW5hbGlzZWQgPSBmYWxzZTsNCiAgICANCiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7DQoNCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGt5Y1JlcXVpcmVkOw0KDQogICAgLy8gU3RhcnQgLSBXZWRuZXNkYXksIEF1Z3VzdCAxNiwgMjAxNyAxMDowMDowMCBBTSBHTVQtMDc6MDAgRFNUDQogICAgLy8gRW5kIC0gU2F0dXJkYXksIFNlcHRlbWJlciAxNiwgMjAxNyAxMDowMDowMCBBTSBHTVQtMDc6MDAgRFNUDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgU1RBUlRfREFURSA9IDE1MDI5MDI4MDA7DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgRU5EX0RBVEUgPSAxNTA1NTgxMjAwOw0KDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgREVDSU1BTFNGQUNUT1IgPSAxMCoqdWludChkZWNpbWFscyk7DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5TX1NPRlRfQ0FQID0gICAxMDAwMDAwMCAqIERFQ0lNQUxTRkFDVE9SOw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19IQVJEX0NBUCA9IDIwMDAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTlNfVE9UQUwgPSAgICA0MDAwMDAwMDAwICogREVDSU1BTFNGQUNUT1I7DQoNCiAgICAvLyAxIEtFVEhFUiA9IDIsNDAwLDAwMCB0b2tlbnMNCiAgICAvLyAxIEVUSCA9IDIsNDAwIHRva2Vucw0KICAgIC8vIFByZXNhbGUgMjAlIGRpc2NvdW50IDEgRVRIID0gMywwMDAgdG9rZW5zDQogICAgLy8gUHJlc2FsZSAxMCUgZGlzY291bnQgMSBFVEggPSAyLDY2NyB0b2tlbnMNCiAgICB1aW50IHB1YmxpYyB0b2tlbnNQZXJLRXRoZXIgPSAzMDAwMDAwOw0KICAgIHVpbnQgcHVibGljIENPTlRSSUJVVElPTlNfTUlOID0gMCBldGhlcjsNCiAgICB1aW50IHB1YmxpYyBDT05UUklCVVRJT05TX01BWCA9IDAgZXRoZXI7DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgS1lDX1RIUkVTSE9MRCA9IDEwMDAwICogREVDSU1BTFNGQUNUT1I7DQoNCiAgICBmdW5jdGlvbiBMb29rUmV2VG9rZW4oYWRkcmVzcyBfd2FsbGV0LCB1aW50IF9pbml0aWFsU3VwcGx5KSB7DQogICAgICB3YWxsZXQgPSBfd2FsbGV0Ow0KICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgICAgdG90YWxTdXBwbHkgPSBfaW5pdGlhbFN1cHBseTsNCiAgICAgIGJhbGFuY2VzW293bmVyXSA9IHRvdGFsU3VwcGx5Ow0KICAgIH0NCg0KICAgLy8gTG9va1JldiBjYW4gY2hhbmdlIHRoZSBjcm93ZHNhbGUgd2FsbGV0IGFkZHJlc3MNCiAgIGZ1bmN0aW9uIHNldFdhbGxldChhZGRyZXNzIF93YWxsZXQpIG9ubHlPd25lciB7DQogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7DQogICAgICAgIFdhbGxldFVwZGF0ZWQod2FsbGV0KTsNCiAgICB9DQogICAgZXZlbnQgV2FsbGV0VXBkYXRlZChhZGRyZXNzIG5ld1dhbGxldCk7DQoNCiAgICAvLyBDYW4gb25seSBiZSBzZXQgYmVmb3JlIHRoZSBzdGFydCBvZiB0aGUgY3Jvd2RzYWxlDQogICAgLy8gT3duZXIgY2FuIGNoYW5nZSB0aGUgcmF0ZSBiZWZvcmUgdGhlIGNyb3dkc2FsZSBzdGFydHMNCiAgICBmdW5jdGlvbiBzZXRUb2tlbnNQZXJLRXRoZXIodWludCBfdG9rZW5zUGVyS0V0aGVyKSBvbmx5T3duZXIgew0KICAgICAgICByZXF1aXJlKG5vdyA8IFNUQVJUX0RBVEUpOw0KICAgICAgICByZXF1aXJlKF90b2tlbnNQZXJLRXRoZXIgPiAwKTsNCiAgICAgICAgdG9rZW5zUGVyS0V0aGVyID0gX3Rva2Vuc1BlcktFdGhlcjsNCiAgICAgICAgVG9rZW5zUGVyS0V0aGVyVXBkYXRlZCh0b2tlbnNQZXJLRXRoZXIpOw0KICAgIH0NCiAgICBldmVudCBUb2tlbnNQZXJLRXRoZXJVcGRhdGVkKHVpbnQgdG9rZW5zUGVyS0V0aGVyKTsNCg0KICAgIC8vIEFjY2VwdCBldGhlcnMgdG8gYnV5IHRva2VucyBkdXJpbmcgdGhlIGNyb3dkc2FsZQ0KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgew0KICAgICAgICBwcm94eVBheW1lbnQobXNnLnNlbmRlcik7DQogICAgfQ0KDQogICAgLy8gQWNjZXB0IGV0aGVycyBhbmQgZXhjaGFuZ2VzIHRvIHB1cmNoYXNlIHRva2VucyBvbiBiZWhhbGYgb2YgdXNlcg0KICAgIC8vIG1zZy52YWx1ZSAoaW4gdW5pdHMgb2Ygd2VpKQ0KICAgIGZ1bmN0aW9uIHByb3h5UGF5bWVudChhZGRyZXNzIHBhcnRpY2lwYW50KSBwYXlhYmxlIHsNCg0KICAgICAgICByZXF1aXJlKCFmaW5hbGlzZWQpOw0KDQogICAgICAgIHJlcXVpcmUobm93IDw9IEVORF9EQVRFKTsNCg0KICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IENPTlRSSUJVVElPTlNfTUlOKTsNCiAgICAgICAgcmVxdWlyZShDT05UUklCVVRJT05TX01BWCA9PSAwIHx8IG1zZy52YWx1ZSA8IENPTlRSSUJVVElPTlNfTUFYKTsNCg0KICAgICAgICAgLy8gQ2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMgZm9yIGNvbnRyaWJ1dGVkIEVUSA0KICAgICAgICAgLy8gYDE4YCBpcyB0aGUgRVRIIGRlY2ltYWxzDQogICAgICAgICAvLyBgLSBkZWNpbWFsc2AgaXMgdGhlIHRva2VuIGRlY2ltYWxzDQogICAgICAgICB1aW50IHRva2VucyA9IG1zZy52YWx1ZSAqIHRva2Vuc1BlcktFdGhlciAvIDEwKip1aW50KDE4IC0gZGVjaW1hbHMgKyAzKTsNCg0KICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGhhcmQgY2FwIHdpbGwgYmUgZXhjZWVkZWQNCiAgICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgKyB0b2tlbnMgPD0gVE9LRU5TX0hBUkRfQ0FQKTsNCg0KICAgICAgICAgLy8gQWRkIHRva2VucyBwdXJjaGFzZWQgdG8gYWNjb3VudCdzIGJhbGFuY2UgYW5kIHRvdGFsIHN1cHBseQ0KICAgICAgICAgYmFsYW5jZXNbcGFydGljaXBhbnRdID0gc2FmZUFkZChiYWxhbmNlc1twYXJ0aWNpcGFudF0sdG9rZW5zKTsNCiAgICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSx0b2tlbnMpOw0KDQogICAgICAgICAvLyBMb2cgdGhlIHRva2VucyBwdXJjaGFzZWQgDQogICAgICAgICBUcmFuc2ZlcigweDAsIHBhcnRpY2lwYW50LCB0b2tlbnMpOw0KICAgICAgICAgLy8gLSBidXllciA9IHBhcnRpY2lwYW50DQogICAgICAgICAvLyAtIGV0aGVycyA9IG1zZy52YWx1ZQ0KICAgICAgICAgLy8gLSBwYXJ0aWNpcGFudFRva2VuQmFsYW5jZSA9IGJhbGFuY2VzW3BhcnRpY2lwYW50XQ0KICAgICAgICAgLy8gLSB0b2tlbnMgPSB0b2tlbnMNCiAgICAgICAgIC8vIC0gbmV3VG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseQ0KICAgICAgICAgLy8gLSB0b2tlbnNQZXJLRXRoZXIgPSB0b2tlbnNQZXJLRXRoZXINCiAgICAgICAgIFRva2Vuc0JvdWdodChwYXJ0aWNpcGFudCwgbXNnLnZhbHVlLCBiYWxhbmNlc1twYXJ0aWNpcGFudF0sIHRva2VucywNCiAgICAgICAgICAgICAgdG90YWxTdXBwbHksIHRva2Vuc1BlcktFdGhlcik7DQoNCiAgICAgICAgIGlmIChtc2cudmFsdWUgPiBLWUNfVEhSRVNIT0xEKSB7DQogICAgICAgICAgICAgLy8gS1lDIHZlcmlmaWNhdGlvbiByZXF1aXJlZCBiZWZvcmUgcGFydGljaXBhbnQgY2FuIHRyYW5zZmVyIHRoZSB0b2tlbnMNCiAgICAgICAgICAgICBreWNSZXF1aXJlZFtwYXJ0aWNpcGFudF0gPSB0cnVlOw0KICAgICAgICAgfQ0KDQogICAgICAgICAvLyBUcmFuc2ZlciB0aGUgY29udHJpYnV0ZWQgZXRoZXJzIHRvIHRoZSBjcm93ZHNhbGUgd2FsbGV0DQogICAgICAgICAvLyB0aHJvdyBpcyBkZXByZWNhdGVkIHN0YXJ0aW5nIGZyb20gRXRoZXJldW0gdjAuOS4wDQogICAgICAgICB3YWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsNCiAgICB9DQoNCiAgICBldmVudCBUb2tlbnNCb3VnaHQoYWRkcmVzcyBpbmRleGVkIGJ1eWVyLCB1aW50IGV0aGVycywgDQogICAgICAgIHVpbnQgcGFydGljaXBhbnRUb2tlbkJhbGFuY2UsIHVpbnQgdG9rZW5zLCB1aW50IG5ld1RvdGFsU3VwcGx5LCANCiAgICAgICAgdWludCB0b2tlbnNQZXJLRXRoZXIpOw0KDQogICAgZnVuY3Rpb24gZmluYWxpc2UoKSBvbmx5T3duZXIgew0KICAgICAgICAvLyBDYW4gb25seSBmaW5hbGlzZSBpZiByYWlzZWQgPiBzb2Z0IGNhcCBvciBhZnRlciB0aGUgZW5kIGRhdGUNCiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA+PSBUT0tFTlNfU09GVF9DQVAgfHwgbm93ID4gRU5EX0RBVEUpOw0KDQogICAgICAgIHJlcXVpcmUoIWZpbmFsaXNlZCk7DQoNCiAgICAgICAgZmluYWxpc2VkID0gdHJ1ZTsNCiAgICB9DQoNCiAgIGZ1bmN0aW9uIGFkZFByZWNvbW1pdG1lbnQoYWRkcmVzcyBwYXJ0aWNpcGFudCwgdWludCBiYWxhbmNlKSBvbmx5T3duZXIgew0KICAgICAgICByZXF1aXJlKG5vdyA8IFNUQVJUX0RBVEUpOw0KICAgICAgICByZXF1aXJlKGJhbGFuY2UgPiAwKTsNCiAgICAgICAgYmFsYW5jZXNbcGFydGljaXBhbnRdID0gc2FmZUFkZChiYWxhbmNlc1twYXJ0aWNpcGFudF0sYmFsYW5jZSk7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSxiYWxhbmNlKTsNCiAgICAgICAgVHJhbnNmZXIoMHgwLCBwYXJ0aWNpcGFudCwgYmFsYW5jZSk7DQogICAgICAgIFByZWNvbW1pdG1lbnRBZGRlZChwYXJ0aWNpcGFudCwgYmFsYW5jZSk7DQogICAgfQ0KICAgIGV2ZW50IFByZWNvbW1pdG1lbnRBZGRlZChhZGRyZXNzIGluZGV4ZWQgcGFydGljaXBhbnQsIHVpbnQgYmFsYW5jZSk7DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgLy8gQ2Fubm90IHRyYW5zZmVyIGJlZm9yZSBjcm93ZHNhbGUgZW5kcw0KICAgICAgICAvLyBBbGxvdyBhd2FyZGluZyB0ZWFtIG1lbWJlcnMgYmVmb3JlLCBkdXJpbmcgYW5kIGFmdGVyIGNyb3dkc2FsZQ0KICAgICAgICByZXF1aXJlKGZpbmFsaXNlZCB8fCBtc2cuc2VuZGVyID09IG93bmVyKTsNCiAgICAgICAgcmVxdWlyZSgha3ljUmVxdWlyZWRbbXNnLnNlbmRlcl0pOw0KICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfYW1vdW50KTsNCiAgICB9DQoNCiAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpDQogICAgew0KICAgICAgICAvLyBDYW5ub3QgdHJhbnNmZXIgYmVmb3JlIGNyb3dkc2FsZSBlbmRzDQogICAgICAgIHJlcXVpcmUoZmluYWxpc2VkKTsNCiAgICAgICAgcmVxdWlyZSgha3ljUmVxdWlyZWRbX2Zyb21dKTsNCiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfYW1vdW50KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBreWNWZXJpZnkoYWRkcmVzcyBwYXJ0aWNpcGFudCwgYm9vbCBfcmVxdWlyZWQpIG9ubHlPd25lciB7DQogICAgICAgIGt5Y1JlcXVpcmVkW3BhcnRpY2lwYW50XSA9IF9yZXF1aXJlZDsNCiAgICAgICAgS3ljVmVyaWZpZWQocGFydGljaXBhbnQsIGt5Y1JlcXVpcmVkW3BhcnRpY2lwYW50XSk7DQogICAgfQ0KICAgIGV2ZW50IEt5Y1ZlcmlmaWVkKGFkZHJlc3MgaW5kZXhlZCBwYXJ0aWNpcGFudCwgYm9vbCByZXF1aXJlZCk7DQoNCiAgICAvLyBBbnkgYWNjb3VudCBjYW4gYnVybiBfZnJvbSdzIHRva2VucyBhcyBsb25nIGFzIHRoZSBfZnJvbSBhY2NvdW50IGhhcw0KICAgIC8vIGFwcHJvdmVkIHRoZSBfYW1vdW50IHRvIGJlIGJ1cm50IHVzaW5nIGFwcHJvdmUoMHgwLCBfYW1vdW50KQ0KICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgPj0gX2Ftb3VudCk7DQoNCiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50DQogICAgICAgICAgICAmJiBhbGxvd2VkW19mcm9tXVsweDBdID49IF9hbW91bnQNCiAgICAgICAgICAgICYmIF9hbW91bnQgPiAwDQogICAgICAgICAgICAmJiBiYWxhbmNlc1sweDBdICsgX2Ftb3VudCA+IGJhbGFuY2VzWzB4MF0NCiAgICAgICAgKSB7DQogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSxfYW1vdW50KTsNCiAgICAgICAgICAgIGJhbGFuY2VzWzB4MF0gPSBzYWZlQWRkKGJhbGFuY2VzWzB4MF0sX2Ftb3VudCk7DQogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVsweDBdID0gc2FmZVN1YihhbGxvd2VkW19mcm9tXVsweDBdLF9hbW91bnQpOw0KICAgICAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlU3ViKHRvdGFsU3VwcGx5LF9hbW91bnQpOw0KICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIDB4MCwgX2Ftb3VudCk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIExvb2tSZXYgY2FuIHRyYW5zZmVyIG91dCBhbnkgYWNjaWRlbnRhbGx5IHNlbnQgRVJDMjAgdG9rZW5zDQogICAgZnVuY3Rpb24gdHJhbnNmZXJBbnlFUkMyMFRva2VuKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50IGFtb3VudCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgDQogICAgew0KICAgICAgICByZXR1cm4gRVJDMjAodG9rZW5BZGRyZXNzKS50cmFuc2Zlcihvd25lciwgYW1vdW50KTsNCiAgICB9DQp9'