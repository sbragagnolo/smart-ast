base 64 content
base64mainnetIndividualityTokenRoot
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4wOw0KDQoNCmxpYnJhcnkgRUNWZXJpZnlMaWIgew0KICAgIC8vIEZyb206IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2F4aWMvNWIzMzkxMmM2ZjYxYWU2ZmQ5NmQ2YzRhNDdhZmRlNmQNCiAgICAvLyBEdXBsaWNhdGUgU29saWRpdHkncyBlY3JlY292ZXIsIGJ1dCBjYXRjaGluZyB0aGUgQ0FMTCByZXR1cm4gdmFsdWUNCiAgICBmdW5jdGlvbiBzYWZlcl9lY3JlY292ZXIoYnl0ZXMzMiBoYXNoLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCwgYWRkcmVzcykgew0KICAgICAgICAvLyBXZSBkbyBvdXIgb3duIG1lbW9yeSBtYW5hZ2VtZW50IGhlcmUuIFNvbGlkaXR5IHVzZXMgbWVtb3J5IG9mZnNldA0KICAgICAgICAvLyAweDQwIHRvIHN0b3JlIHRoZSBjdXJyZW50IGVuZCBvZiBtZW1vcnkuIFdlIHdyaXRlIHBhc3QgaXQgKGFzDQogICAgICAgIC8vIHdyaXRlcyBhcmUgbWVtb3J5IGV4dGVuc2lvbnMpLCBidXQgZG9uJ3QgdXBkYXRlIHRoZSBvZmZzZXQgc28NCiAgICAgICAgLy8gU29saWRpdHkgd2lsbCByZXVzZSBpdC4gVGhlIG1lbW9yeSB1c2VkIGhlcmUgaXMgb25seSBuZWVkZWQgZm9yDQogICAgICAgIC8vIHRoaXMgY29udGV4dC4NCg0KICAgICAgICAvLyBGSVhNRTogaW5saW5lIGFzc2VtYmx5IGNhbid0IGFjY2VzcyByZXR1cm4gdmFsdWVzDQogICAgICAgIGJvb2wgcmV0Ow0KICAgICAgICBhZGRyZXNzIGFkZHI7DQoNCiAgICAgICAgYXNzZW1ibHkgew0KICAgICAgICAgICAgbGV0IHNpemUgOj0gbWxvYWQoMHg0MCkNCiAgICAgICAgICAgIG1zdG9yZShzaXplLCBoYXNoKQ0KICAgICAgICAgICAgbXN0b3JlKGFkZChzaXplLCAzMiksIHYpDQogICAgICAgICAgICBtc3RvcmUoYWRkKHNpemUsIDY0KSwgcikNCiAgICAgICAgICAgIG1zdG9yZShhZGQoc2l6ZSwgOTYpLCBzKQ0KDQogICAgICAgICAgICAvLyBOT1RFOiB3ZSBjYW4gcmV1c2UgdGhlIHJlcXVlc3QgbWVtb3J5IGJlY2F1c2Ugd2UgZGVhbCB3aXRoDQogICAgICAgICAgICAvLyAgICAgICB0aGUgcmV0dXJuIGNvZGUNCiAgICAgICAgICAgIHJldCA6PSBjYWxsKDMwMDAsIDEsIDAsIHNpemUsIDEyOCwgc2l6ZSwgMzIpDQogICAgICAgICAgICBhZGRyIDo9IG1sb2FkKHNpemUpDQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gKHJldCwgYWRkcik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZWNyZWNvdmVyeShieXRlczMyIGhhc2gsIGJ5dGVzIHNpZykgcmV0dXJucyAoYm9vbCwgYWRkcmVzcykgew0KICAgICAgICBieXRlczMyIHI7DQogICAgICAgIGJ5dGVzMzIgczsNCiAgICAgICAgdWludDggdjsNCg0KICAgICAgICBpZiAoc2lnLmxlbmd0aCAhPSA2NSkNCiAgICAgICAgICByZXR1cm4gKGZhbHNlLCAwKTsNCg0KICAgICAgICAvLyBUaGUgc2lnbmF0dXJlIGZvcm1hdCBpcyBhIGNvbXBhY3QgZm9ybSBvZjoNCiAgICAgICAgLy8gICB7Ynl0ZXMzMiByfXtieXRlczMyIHN9e3VpbnQ4IHZ9DQogICAgICAgIC8vIENvbXBhY3QgbWVhbnMsIHVpbnQ4IGlzIG5vdCBwYWRkZWQgdG8gMzIgYnl0ZXMuDQogICAgICAgIGFzc2VtYmx5IHsNCiAgICAgICAgICAgIHIgOj0gbWxvYWQoYWRkKHNpZywgMzIpKQ0KICAgICAgICAgICAgcyA6PSBtbG9hZChhZGQoc2lnLCA2NCkpDQoNCiAgICAgICAgICAgIC8vIEhlcmUgd2UgYXJlIGxvYWRpbmcgdGhlIGxhc3QgMzIgYnl0ZXMuIFdlIGV4cGxvaXQgdGhlIGZhY3QgdGhhdA0KICAgICAgICAgICAgLy8gJ21sb2FkJyB3aWxsIHBhZCB3aXRoIHplcm9lcyBpZiB3ZSBvdmVycmVhZC4NCiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vICdtbG9hZDgnIHRvIGRvIHRoaXMsIGJ1dCB0aGF0IHdvdWxkIGJlIG5pY2VyLg0KICAgICAgICAgICAgdiA6PSBieXRlKDAsIG1sb2FkKGFkZChzaWcsIDk2KSkpDQoNCiAgICAgICAgICAgIC8vIEFsdGVybmF0aXZlIHNvbHV0aW9uOg0KICAgICAgICAgICAgLy8gJ2J5dGUnIGlzIG5vdCB3b3JraW5nIGR1ZSB0byB0aGUgU29saWRpdHkgcGFyc2VyLCBzbyBsZXRzDQogICAgICAgICAgICAvLyB1c2UgdGhlIHNlY29uZCBiZXN0IG9wdGlvbiwgJ2FuZCcNCiAgICAgICAgICAgIC8vIHYgOj0gYW5kKG1sb2FkKGFkZChzaWcsIDY1KSksIDI1NSkNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGFsYmVpdCBub24tdHJhbnNhY3Rpb25hbCBzaWduYXR1cmVzIGFyZSBub3Qgc3BlY2lmaWVkIGJ5IHRoZSBZUCwgb25lIHdvdWxkIGV4cGVjdCBpdA0KICAgICAgICAvLyB0byBtYXRjaCB0aGUgWVAgcmFuZ2Ugb2YgWzI3LCAyOF0NCiAgICAgICAgLy8NCiAgICAgICAgLy8gZ2V0aCB1c2VzIFswLCAxXSBhbmQgc29tZSBjbGllbnRzIGhhdmUgZm9sbG93ZWQuIFRoaXMgbWlnaHQgY2hhbmdlLCBzZWU6DQogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vZ28tZXRoZXJldW0vaXNzdWVzLzIwNTMNCiAgICAgICAgaWYgKHYgPCAyNykNCiAgICAgICAgICB2ICs9IDI3Ow0KDQogICAgICAgIGlmICh2ICE9IDI3ICYmIHYgIT0gMjgpDQogICAgICAgICAgICByZXR1cm4gKGZhbHNlLCAwKTsNCg0KICAgICAgICByZXR1cm4gc2FmZXJfZWNyZWNvdmVyKGhhc2gsIHYsIHIsIHMpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGVjdmVyaWZ5KGJ5dGVzMzIgaGFzaCwgYnl0ZXMgc2lnLCBhZGRyZXNzIHNpZ25lcikgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICBib29sIHJldDsNCiAgICAgICAgYWRkcmVzcyBhZGRyOw0KICAgICAgICAocmV0LCBhZGRyKSA9IGVjcmVjb3ZlcnkoaGFzaCwgc2lnKTsNCiAgICAgICAgcmV0dXJuIHJldCA9PSB0cnVlICYmIGFkZHIgPT0gc2lnbmVyOw0KICAgIH0NCn0NCg0KDQpjb250cmFjdCBJbmRpdmlkdWFsaXR5VG9rZW5JbnRlcmZhY2Ugew0KICAgIC8qDQogICAgICogIEV2ZW50cw0KICAgICAqLw0KICAgIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYnl0ZXMzMiBfdG9rZW5JRCk7DQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7DQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7DQoNCiAgICAvKg0KICAgICAqIFJlYWQgc3RvcmFnZSBmdW5jdGlvbnMNCiAgICAgKi8NCg0KICAgIC8vLyBAZGV2IFJldHVybiB0aGUgbnVtYmVyIG9mIHRva2Vucw0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOw0KDQogICAgLy8vIEBkZXYgUmV0dXJucyBpZCBvZiB0b2tlbiBvd25lZCBieSBnaXZlbiBhZGRyZXNzIChlbmNvZGVkIGFzIGFuIGludGVnZXIpLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOw0KDQogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgdG9rZW4gaWQgdGhhdCBtYXkgdHJhbnNmZXIgZnJvbSBfb3duZXIgYWNjb3VudCBieSBfc3BlbmRlci4uDQogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgdG9rZW4gc3BlbmRlci4NCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsNCg0KICAgIC8qDQogICAgICogIFdyaXRlIHN0b3JhZ2UgZnVuY3Rpb25zDQogICAgICovDQoNCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyIHRva2VuIHRvIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAZGV2IEFsbG93cyBhbGxvd2VkIHRoaXJkIHBhcnR5IHRvIHRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAZGV2IFNldHMgYXBwcm92YWwgc3BlbmRlciB0byB0cmFuc2ZlciBvd25lcnNoaXAgb2YgdG9rZW4uIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2Ygc3BlbmRlci4uDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0b2tlbiB0aGF0IGNhbiBiZSBzcGVuZC4NCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KDQogICAgLyoNCiAgICAgKiAgRXh0cmEgbm9uIEVSQzIwIGZ1bmN0aW9ucw0KICAgICAqLw0KDQogICAgLy8vIEBkZXYgUmV0dXJucyB3aGV0aGVyIHRoZSBhZGRyZXNzIG93bnMgYSB0b2tlbi4NCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIHRvIGNoZWNrLg0KICAgIGZ1bmN0aW9uIGlzVG9rZW5Pd25lcihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7DQoNCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBhZGRyZXNzIG9mIHRoZSBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4gaWQuDQogICAgLy8vIEBwYXJhbSBfdG9rZW5JRCBCeXRlczMyIGlkIG9mIHRva2VuIHRvIGxvb2t1cC4NCiAgICBmdW5jdGlvbiBvd25lck9mKGJ5dGVzMzIgX3Rva2VuSUQpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpOw0KDQogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgdG9rZW4gSUQgZm9yIHRoZSBnaXZlbiBhZGRyZXNzIG9yIDB4MCBpZiB0aGV5IGFyZSBub3QgYSB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRoZSBvd25lciB0byBsb29rdXAuDQogICAgZnVuY3Rpb24gdG9rZW5JZChhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMiB0b2tlbklEKTsNCn0NCg0KDQpjb250cmFjdCBJbmRpdmlkdWFsaXR5VG9rZW5Sb290SW50ZXJmYWNlIGlzIEluZGl2aWR1YWxpdHlUb2tlbkludGVyZmFjZSB7DQogICAgLy8vIEBkZXYgSW1wb3J0cyBhIHRva2VuIGZyb20gdGhlIERldmNvbjJUb2tlbiBjb250cmFjdC4NCiAgICBmdW5jdGlvbiB1cGdyYWRlKCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQoNCiAgICAvLy8gQGRldiBVcGdyYWRlcyBhIHRva2VuIGZyb20gdGhlIHByZXZpb3VzIGNvbnRyYWN0DQogICAgLy8vIEBwYXJhbSBfb3duZXIgdGhlIGFkZHJlc3Mgb2YgdGhlIG93bmVyIG9mIHRoZSB0b2tlbiBvbiB0aGUgb3JpZ2luYWwgY29udHJhY3QNCiAgICAvLy8gQHBhcmFtIF9uZXdPd25lciB0aGUgYWRkcmVzcyB0aGF0IHNob3VsZCBvd24gdGhlIHRva2VuIG9uIHRoZSBuZXcgY29udHJhY3QuDQogICAgLy8vIEBwYXJhbSBzaWduYXR1cmUgNjUgYnl0ZSBzaWduYXR1cmUgb2YgdGhlIHRpZ2h0bHkgcGFja2VkIGJ5dGVzIChhZGRyZXNzKHRoaXMpICsgX293bmVyICsgX25ld093bmVyKSwgc2lnbmVkIGJ5IF9vd25lcg0KICAgIGZ1bmN0aW9uIHByb3h5VXBncmFkZShhZGRyZXNzIF9vd25lciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBfbmV3T3duZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzIHNpZ25hdHVyZSkgcHVibGljIHJldHVybnMgKGJvb2wpOw0KDQogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGF0IGhhdmUgYmVlbiB1cGdyYWRlZC4NCiAgICBmdW5jdGlvbiB1cGdyYWRlQ291bnQoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGFtb3VudCk7DQoNCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdG9rZW5zIHRoYXQgaGF2ZSBiZWVuIHVwZ3JhZGVkLg0KICAgIC8vLyBAcGFyYW0gX3Rva2VuSUQgdGhlIGlkIG9mIHRoZSB0b2tlbiB0byBxdWVyeQ0KICAgIGZ1bmN0aW9uIGlzVG9rZW5VcGdyYWRlZChieXRlczMyIF90b2tlbklEKSBjb25zdGFudCByZXR1cm5zIChib29sIGlzVXBncmFkZWQpOw0KfQ0KDQoNCmxpYnJhcnkgVG9rZW5FdmVudExpYiB7DQogICAgLyoNCiAgICAgKiBXaGVuIHVuZGVybHlpbmcgc29saWRpdHkgaXNzdWUgaXMgZml4ZWQgdGhpcyBsaWJyYXJ5IHdpbGwgbm90IGJlIG5lZWRlZC4NCiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vc29saWRpdHkvaXNzdWVzLzEyMTUNCiAgICAgKi8NCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sDQogICAgICAgICAgICAgICAgICAgYWRkcmVzcyBpbmRleGVkIF90bywNCiAgICAgICAgICAgICAgICAgICBieXRlczMyIGluZGV4ZWQgX3Rva2VuSUQpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsDQogICAgICAgICAgICAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLA0KICAgICAgICAgICAgICAgICAgIGJ5dGVzMzIgaW5kZXhlZCBfdG9rZW5JRCk7DQoNCiAgICBmdW5jdGlvbiBfVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIGJ5dGVzMzIgX3Rva2VuSUQpIHB1YmxpYyB7DQogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklEKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfQXBwcm92YWwoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIsIGJ5dGVzMzIgX3Rva2VuSUQpIHB1YmxpYyB7DQogICAgICAgIEFwcHJvdmFsKF9vd25lciwgX3NwZW5kZXIsIF90b2tlbklEKTsNCiAgICB9DQp9DQoNCg0KY29udHJhY3QgVG9rZW5JbnRlcmZhY2Ugew0KICAgIC8qDQogICAgICogIEV2ZW50cw0KICAgICAqLw0KICAgIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIF90bywgYnl0ZXMzMiBfaWQpOw0KICAgIGV2ZW50IERlc3Ryb3koYnl0ZXMzMiBfaWQpOw0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOw0KICAgIGV2ZW50IE1pbnRlckFkZGVkKGFkZHJlc3Mgd2hvKTsNCiAgICBldmVudCBNaW50ZXJSZW1vdmVkKGFkZHJlc3Mgd2hvKTsNCg0KICAgIC8qDQogICAgICogIE1pbnRpbmcNCiAgICAgKi8NCiAgICAvLy8gQGRldiBNaW50cyBhIG5ldyB0b2tlbi4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIHRva2VuIG93bmVyLg0KICAgIC8vLyBAcGFyYW0gX2lkZW50aXR5IFN0cmluZyBmb3Igb3duZXIgaWRlbnRpdHkuDQogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgc3RyaW5nIF9pZGVudGl0eSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAZGV2IERlc3Ryb3kgYSB0b2tlbg0KICAgIC8vLyBAcGFyYW0gX2lkIEJ5dGVzMzIgaWQgb2YgdGhlIHRva2VuIHRvIGRlc3Ryb3kuDQogICAgZnVuY3Rpb24gZGVzdHJveShieXRlczMyIF9pZCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAZGV2IEFkZCBhIG5ldyBtaW50ZXINCiAgICAvLy8gQHBhcmFtIHdobyBBZGRyZXNzIHRoZSBhZGRyZXNzIHRoYXQgY2FuIG5vdyBtaW50IHRva2Vucy4NCiAgICBmdW5jdGlvbiBhZGRNaW50ZXIoYWRkcmVzcyB3aG8pIHJldHVybnMgKGJvb2wpOw0KDQogICAgLy8vIEBkZXYgUmVtb3ZlIGEgbWludGVyDQogICAgLy8vIEBwYXJhbSB3aG8gQWRkcmVzcyB0aGUgYWRkcmVzcyB0aGF0IHdpbGwgbm8gbG9uZ2VyIGJlIGEgbWludGVyLg0KICAgIGZ1bmN0aW9uIHJlbW92ZU1pbnRlcihhZGRyZXNzIHdobykgcmV0dXJucyAoYm9vbCk7DQoNCiAgICAvKg0KICAgICAqICBSZWFkIGFuZCB3cml0ZSBzdG9yYWdlIGZ1bmN0aW9ucw0KICAgICAqLw0KDQogICAgLy8vIEBkZXYgUmV0dXJuIHRoZSBudW1iZXIgb2YgdG9rZW5zDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSByZXR1cm5zICh1aW50IHN1cHBseSk7DQoNCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyIHRva2VuIHRvIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIGJ5dGVzMzIgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KDQogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLg0KICAgIC8vLyBAcGFyYW0gX2Zyb20gQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgYnl0ZXMzMiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQoNCiAgICAvLy8gQGRldiBTZXRzIGFwcHJvdmFsIHNwZW5kZXIgdG8gdHJhbnNmZXIgb3duZXJzaGlwIG9mIHRva2VuLiBSZXR1cm5zIHN1Y2Nlc3MuDQogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHNwZW5kZXIuLg0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdG9rZW4gdGhhdCBjYW4gYmUgc3BlbmQuDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIGJ5dGVzMzIgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KDQogICAgLyoNCiAgICAgKiBSZWFkIHN0b3JhZ2UgZnVuY3Rpb25zDQogICAgICovDQogICAgLy8vIEBkZXYgUmV0dXJucyBpZCBvZiB0b2tlbiBvd25lZCBieSBnaXZlbiBhZGRyZXNzIChlbmNvZGVkIGFzIGFuIGludGVnZXIpLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOw0KDQogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgdG9rZW4gaWQgdGhhdCBtYXkgdHJhbnNmZXIgZnJvbSBfb3duZXIgYWNjb3VudCBieSBfc3BlbmRlci4uDQogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgdG9rZW4gc3BlbmRlci4NCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsNCg0KICAgIC8qDQogICAgICogIEV4dHJhIG5vbiBFUkMyMCBmdW5jdGlvbnMNCiAgICAgKi8NCiAgICAvLy8gQGRldiBSZXR1cm5zIHdoZXRoZXIgdGhlIGFkZHJlc3Mgb3ducyBhIHRva2VuLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3MgdG8gY2hlY2suDQogICAgZnVuY3Rpb24gaXNUb2tlbk93bmVyKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zIChib29sKTsNCg0KICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIGlkZW50aXR5IG9mIHRoZSBnaXZlbiB0b2tlbiBpZC4NCiAgICAvLy8gQHBhcmFtIF9pZCBCeXRlczMyIGlkIG9mIHRva2VuIHRvIGxvb2t1cC4NCiAgICBmdW5jdGlvbiBpZGVudGl0eU9mKGJ5dGVzMzIgX2lkKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgaWRlbnRpdHkpOw0KDQogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgYWRkcmVzcyBvZiB0aGUgb3duZXIgb2YgdGhlIGdpdmVuIHRva2VuIGlkLg0KICAgIC8vLyBAcGFyYW0gX2lkIEJ5dGVzMzIgaWQgb2YgdG9rZW4gdG8gbG9va3VwLg0KICAgIGZ1bmN0aW9uIG93bmVyT2YoYnl0ZXMzMiBfaWQpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpOw0KfQ0KDQoNCmNvbnRyYWN0IEluZGl2aWR1YWxpdHlUb2tlblJvb3QgaXMgSW5kaXZpZHVhbGl0eVRva2VuUm9vdEludGVyZmFjZSB7DQogICAgVG9rZW5JbnRlcmZhY2UgcHVibGljIGRldmNvbjJUb2tlbjsNCg0KICAgIGZ1bmN0aW9uIEluZGl2aWR1YWxpdHlUb2tlblJvb3QoYWRkcmVzcyBfZGV2Y29uMlRva2VuKSB7DQogICAgICAgIGRldmNvbjJUb2tlbiA9IFRva2VuSW50ZXJmYWNlKF9kZXZjb24yVG9rZW4pOw0KICAgIH0NCg0KICAgIC8vIG93bmVyID0+IHRva2VuDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBieXRlczMyKSBvd25lclRvVG9rZW47DQoNCiAgICAvLyB0b2tlbiA9PiBvd25lcg0KICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gYWRkcmVzcykgdG9rZW5Ub093bmVyOw0KDQogICAgLy8gb3duZXIgPT4gc3BlbmRlciA9PiB0b2tlbg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiBieXRlczMyKSkgYXBwcm92YWxzOw0KDQogICAgdWludCBfdXBncmFkZUNvdW50Ow0KDQogICAgLyoNCiAgICAgKiBJbnRlcm5hbCBIZWxwZXJzDQogICAgICovDQogICAgZnVuY3Rpb24gaXNFbGlnaWJsZUZvclVwZ3JhZGUoYWRkcmVzcyBfb3duZXIpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgaWYgKG93bmVyVG9Ub2tlbltfb3duZXJdICE9IDB4MCkgew0KICAgICAgICAgICAgLy8gYWxyZWFkeSBhIHRva2VuIG93bmVyDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAoIWRldmNvbjJUb2tlbi5pc1Rva2VuT3duZXIoX293bmVyKSkgew0KICAgICAgICAgICAgLy8gbm90IGEgdG9rZW4gb3duZXIgb24gdGhlIG9yaWdpbmFsIGRldmNvbjJUb2tlbiBjb250cmFjdC4NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmIChpc1Rva2VuVXBncmFkZWQoYnl0ZXMzMihkZXZjb24yVG9rZW4uYmFsYW5jZU9mKF9vd25lcikpKSkgew0KICAgICAgICAgICAgLy8gdGhlIHRva2VuIGhhcyBhbHJlYWR5IGJlZW4gdXBncmFkZWQuDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qDQogICAgICogQW55IGZ1bmN0aW9uIG1vZGlmaWVkIHdpdGggdGhpcyB3aWxsIHBlcmZvcm0gdGhlIGB1cGdyYWRlYCBjYWxsIHByaW9yIHRvDQogICAgICogZXhlY3V0aW9uIHdoaWNoIGFsbG93cyBwZW9wbGUgdG8gdXNlIHRoaXMgY29udHJhY3QgYXMtaWYgdGhleSBoYWQNCiAgICAgKiBhbHJlYWR5IHByb2Nlc3NlZCB0aGUgdXBncmFkZS4NCiAgICAgKi8NCiAgICBtb2RpZmllciBzaWxlbnRVcGdyYWRlIHsNCiAgICAgICAgaWYgKGlzRWxpZ2libGVGb3JVcGdyYWRlKG1zZy5zZW5kZXIpKSB7DQogICAgICAgICAgICB1cGdyYWRlKCk7DQogICAgICAgIH0NCiAgICAgICAgXzsNCiAgICB9DQoNCg0KICAgIC8vLyBAZGV2IFJldHVybiB0aGUgbnVtYmVyIG9mIHRva2Vucw0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgICByZXR1cm4gZGV2Y29uMlRva2VuLnRvdGFsU3VwcGx5KCk7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgUmV0dXJucyBpZCBvZiB0b2tlbiBvd25lZCBieSBnaXZlbiBhZGRyZXNzIChlbmNvZGVkIGFzIGFuIGludGVnZXIpLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsNCiAgICAgICAgaWYgKF9vd25lciA9PSAweDApIHsNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9IGVsc2UgaWYgKG93bmVyVG9Ub2tlbltfb3duZXJdID09IDB4MCkgew0KICAgICAgICAgICAgLy8gbm90IGEgY3VycmVudCB0b2tlbiBvd25lci4gIENoZWNrIHdoZXRoZXIgdGhleSBhcmUgb24gdGhlDQogICAgICAgICAgICAvLyBvcmlnaW5hbCBjb250cmFjdC4NCiAgICAgICAgICAgIGlmIChkZXZjb24yVG9rZW4uaXNUb2tlbk93bmVyKF9vd25lcikpIHsNCiAgICAgICAgICAgICAgICAvLyBwdWxsIHRoZSB0b2tlbklEDQogICAgICAgICAgICAgICAgdmFyIHRva2VuSUQgPSBieXRlczMyKGRldmNvbjJUb2tlbi5iYWxhbmNlT2YoX293bmVyKSk7DQoNCiAgICAgICAgICAgICAgICBpZiAodG9rZW5Ub093bmVyW3Rva2VuSURdID09IDB4MCkgew0KICAgICAgICAgICAgICAgICAgICAvLyB0aGUgdG9rZW4gaGFzbid0IHlldCBiZWVuIHVwZ3JhZGVkIHNvIHdlIGNhbiByZXR1cm4gMS4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gMTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIHRva2VuIGlkIHRoYXQgbWF5IHRyYW5zZmVyIGZyb20gX293bmVyIGFjY291bnQgYnkgX3NwZW5kZXIuLg0KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHRva2VuIHNwZW5kZXIuDQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLA0KICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgew0KICAgICAgICB2YXIgYXBwcm92ZWRUb2tlbklEID0gYXBwcm92YWxzW19vd25lcl1bX3NwZW5kZXJdOw0KDQogICAgICAgIGlmIChhcHByb3ZlZFRva2VuSUQgPT0gMHgwKSB7DQogICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgfSBlbHNlIGlmIChfb3duZXIgPT0gMHgwIHx8IF9zcGVuZGVyID09IDB4MCkgew0KICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0gZWxzZSBpZiAodG9rZW5Ub093bmVyW2FwcHJvdmVkVG9rZW5JRF0gPT0gX293bmVyKSB7DQogICAgICAgICAgICByZXR1cm4gMTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8vIEBkZXYgVHJhbnNmZXJzIHNlbmRlciB0b2tlbiB0byBnaXZlbiBhZGRyZXNzLiBSZXR1cm5zIHN1Y2Nlc3MuDQogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sDQogICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBzaWxlbnRVcGdyYWRlIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZiAoX3ZhbHVlICE9IDEpIHsNCiAgICAgICAgICAgIC8vIDEgaXMgdGhlIG9ubHkgdmFsdWUgdGhhdCBtYWtlcyBhbnkgc2Vuc2UgaGVyZS4NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmIChfdG8gPT0gMHgwKSB7DQogICAgICAgICAgICAvLyBjYW5ub3QgdHJhbnNmZXIgdG8gdGhlIG51bGwgYWRkcmVzcy4NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmIChvd25lclRvVG9rZW5bbXNnLnNlbmRlcl0gPT0gMHgwKSB7DQogICAgICAgICAgICAvLyBtc2cuc2VuZGVyIGlzIG5vdCBhIHRva2VuIG93bmVyDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAob3duZXJUb1Rva2VuW190b10gIT0gMHgwKSB7DQogICAgICAgICAgICAvLyBjYW5ub3QgdHJhbnNmZXIgdG8gYW4gYWRkcmVzcyB0aGF0IGFscmVhZHkgb3ducyBhIHRva2VuLg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGVsc2UgaWYgKGlzRWxpZ2libGVGb3JVcGdyYWRlKF90bykpIHsNCiAgICAgICAgICAgIC8vIGNhbm5vdCB0cmFuc2ZlciB0byBhbiBhY2NvdW50IHdoaWNoIGlzIHN0aWxsIGhvbGRpbmcgdGhlaXIgdG9rZW4NCiAgICAgICAgICAgIC8vIGluIHRoZSBvbGQgc3lzdGVtLg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gcHVsbCB0aGUgdG9rZW4gaWQuDQogICAgICAgIHZhciB0b2tlbklEID0gb3duZXJUb1Rva2VuW21zZy5zZW5kZXJdOw0KDQogICAgICAgIC8vIHJlbW92ZSB0aGUgdG9rZW4gZnJvbSB0aGUgc2VuZGVyLg0KICAgICAgICBvd25lclRvVG9rZW5bbXNnLnNlbmRlcl0gPSAweDA7DQoNCiAgICAgICAgLy8gYXNzaWduIHRoZSB0b2tlbiB0byB0aGUgbmV3IG93bmVyDQogICAgICAgIG93bmVyVG9Ub2tlbltfdG9dID0gdG9rZW5JRDsNCiAgICAgICAgdG9rZW5Ub093bmVyW3Rva2VuSURdID0gX3RvOw0KDQogICAgICAgIC8vIGxvZyB0aGUgdHJhbnNmZXINCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCAxKTsNCiAgICAgICAgVG9rZW5FdmVudExpYi5fVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCB0b2tlbklEKTsNCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyIHRva2VuIHRvIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICByZXR1cm4gdHJhbnNmZXIoX3RvLCAxKTsNCiAgICB9DQoNCiAgICAvLy8gQGRldiBBbGxvd3MgYWxsb3dlZCB0aGlyZCBwYXJ0eSB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyLiBSZXR1cm5zIHN1Y2Nlc3MuDQogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIG9mIHRva2VuIG93bmVyLg0KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgbmV3IHRva2VuIG93bmVyLg0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdGhlIHRva2VuIHRvIHRyYW5zZmVyLg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIF90bywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKF92YWx1ZSAhPSAxKSB7DQogICAgICAgICAgICAvLyBDYW5ub3QgdHJhbnNmZXIgYW55dGhpbmcgb3RoZXIgdGhhbiAxIHRva2VuLg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGVsc2UgaWYgKF90byA9PSAweDApIHsNCiAgICAgICAgICAgIC8vIENhbm5vdCB0cmFuc2ZlciB0byB0aGUgbnVsbCBhZGRyZXNzDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAob3duZXJUb1Rva2VuW19mcm9tXSA9PSAweDApIHsNCiAgICAgICAgICAgIC8vIENhbm5vdCB0cmFuc2ZlciBpZiBfZnJvbSBpcyBub3QgYSB0b2tlbiBvd25lcg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGVsc2UgaWYgKG93bmVyVG9Ub2tlbltfdG9dICE9IDB4MCkgew0KICAgICAgICAgICAgLy8gQ2Fubm90IHRyYW5zZmVyIHRvIGFuIGV4aXN0aW5nIHRva2VuIG93bmVyDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAoYXBwcm92YWxzW19mcm9tXVttc2cuc2VuZGVyXSAhPSBvd25lclRvVG9rZW5bX2Zyb21dKSB7DQogICAgICAgICAgICAvLyBUaGUgYXBwcm92ZWQgdG9rZW4gZG9lc24ndCBtYXRjaCB0aGUgdG9rZW4gYmVpbmcgdHJhbnNmZXJyZWQuDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAoaXNFbGlnaWJsZUZvclVwZ3JhZGUoX3RvKSkgew0KICAgICAgICAgICAgLy8gY2Fubm90IHRyYW5zZmVyIHRvIGFuIGFjY291bnQgd2hpY2ggaXMgc3RpbGwgaG9sZGluZyB0aGVpciB0b2tlbg0KICAgICAgICAgICAgLy8gaW4gdGhlIG9sZCBzeXN0ZW0uDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBwdWxsIHRoZSB0b2tlbklEDQogICAgICAgIHZhciB0b2tlbklEID0gb3duZXJUb1Rva2VuW19mcm9tXTsNCg0KICAgICAgICAvLyBudWxsIG91dCB0aGUgYXBwcm92YWwNCiAgICAgICAgYXBwcm92YWxzW19mcm9tXVttc2cuc2VuZGVyXSA9IDB4MDsNCg0KICAgICAgICAvLyByZW1vdmUgdGhlIHRva2VuIGZyb20gdGhlIHNlbmRlci4NCiAgICAgICAgb3duZXJUb1Rva2VuW19mcm9tXSA9IDB4MDsNCg0KICAgICAgICAvLyBhc3NpZ24gdGhlIHRva2VuIHRvIHRoZSBuZXcgb3duZXINCiAgICAgICAgb3duZXJUb1Rva2VuW190b10gPSB0b2tlbklEOw0KICAgICAgICB0b2tlblRvT3duZXJbdG9rZW5JRF0gPSBfdG87DQoNCiAgICAgICAgLy8gbG9nIHRoZSB0cmFuc2Zlcg0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCAxKTsNCiAgICAgICAgVG9rZW5FdmVudExpYi5fVHJhbnNmZXIoX2Zyb20sIF90bywgdG9rZW5JRCk7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLg0KICAgIC8vLyBAcGFyYW0gX2Zyb20gQWRkcmVzcyBvZiB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgcmV0dXJuIHRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCAxKTsNCiAgICB9DQoNCiAgICAvLy8gQGRldiBTZXRzIGFwcHJvdmFsIHNwZW5kZXIgdG8gdHJhbnNmZXIgb3duZXJzaGlwIG9mIHRva2VuLiBSZXR1cm5zIHN1Y2Nlc3MuDQogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHNwZW5kZXIuLg0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdG9rZW4gdGhhdCBjYW4gYmUgc3BlbmQuDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLA0KICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBzaWxlbnRVcGdyYWRlIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZiAoX3ZhbHVlICE9IDEpIHsNCiAgICAgICAgICAgIC8vIGNhbm5vdCBhcHByb3ZlIGFueSB2YWx1ZSBvdGhlciB0aGFuIDENCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmIChfc3BlbmRlciA9PSAweDApIHsNCiAgICAgICAgICAgIC8vIGNhbm5vdCBhcHByb3ZlIHRoZSBudWxsIGFkZHJlc3MgYXMgYSBzcGVuZGVyLg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGVsc2UgaWYgKG93bmVyVG9Ub2tlblttc2cuc2VuZGVyXSA9PSAweDApIHsNCiAgICAgICAgICAgIC8vIGNhbm5vdCBhcHByb3ZlIGlmIG5vdCBhIHRva2VuIG93bmVyLg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIHRva2VuSUQgPSBvd25lclRvVG9rZW5bbXNnLnNlbmRlcl07DQogICAgICAgIGFwcHJvdmFsc1ttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSB0b2tlbklEOw0KDQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCAxKTsNCiAgICAgICAgVG9rZW5FdmVudExpYi5fQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIHRva2VuSUQpOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vLyBAZGV2IFNldHMgYXBwcm92YWwgc3BlbmRlciB0byB0cmFuc2ZlciBvd25lcnNoaXAgb2YgdG9rZW4uIFJldHVybnMgc3VjY2Vzcy4NCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2Ygc3BlbmRlci4uDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIHJldHVybiBhcHByb3ZlKF9zcGVuZGVyLCAxKTsNCiAgICB9DQoNCiAgICAvKg0KICAgICAqICBFeHRyYSBub24gRVJDMjAgZnVuY3Rpb25zDQogICAgICovDQogICAgLy8vIEBkZXYgUmV0dXJucyB3aGV0aGVyIHRoZSBhZGRyZXNzIG93bnMgYSB0b2tlbi4NCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIHRvIGNoZWNrLg0KICAgIGZ1bmN0aW9uIGlzVG9rZW5Pd25lcihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICBpZiAoX293bmVyID09IDB4MCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGVsc2UgaWYgKG93bmVyVG9Ub2tlbltfb3duZXJdID09IDB4MCkgew0KICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG93bmVyIGhhcyBhIHRva2VuIG9uIHRoZSBtYWluIGRldmNvbjJUb2tlbiBjb250cmFjdC4NCiAgICAgICAgICAgIGlmIChkZXZjb24yVG9rZW4uaXNUb2tlbk93bmVyKF9vd25lcikpIHsNCiAgICAgICAgICAgICAgICAvLyBwdWxsIHRoZSB0b2tlbiBJRA0KICAgICAgICAgICAgICAgIHZhciB0b2tlbklEID0gYnl0ZXMzMihkZXZjb24yVG9rZW4uYmFsYW5jZU9mKF9vd25lcikpOw0KDQogICAgICAgICAgICAgICAgaWYgKHRva2VuVG9Pd25lclt0b2tlbklEXSA9PSAweDApIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gVGhleSBvd24gYW4gdW4tdHJhbnNmZXJlZCB0b2tlbiBpbiB0aGUgcGFyZW50DQogICAgICAgICAgICAgICAgICAgIC8vIGRldmNvbjJUb2tlbiBjb250cmFjdC4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBhZGRyZXNzIG9mIHRoZSBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4gaWQuDQogICAgLy8vIEBwYXJhbSBfdG9rZW5JRCBCeXRlczMyIGlkIG9mIHRva2VuIHRvIGxvb2t1cC4NCiAgICBmdW5jdGlvbiBvd25lck9mKGJ5dGVzMzIgX3Rva2VuSUQpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsNCiAgICAgICAgaWYgKF90b2tlbklEID09IDB4MCkgew0KICAgICAgICAgICAgcmV0dXJuIDB4MDsNCiAgICAgICAgfSBlbHNlIGlmICh0b2tlblRvT3duZXJbX3Rva2VuSURdICE9IDB4MCkgew0KICAgICAgICAgICAgcmV0dXJuIHRva2VuVG9Pd25lcltfdG9rZW5JRF07DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZGV2Y29uMlRva2VuLm93bmVyT2YoX3Rva2VuSUQpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgdG9rZW4gSUQgZm9yIHRoZSBnaXZlbiBhZGRyZXNzIG9yIDB4MCBpZiB0aGV5IGFyZSBub3QgYSB0b2tlbiBvd25lci4NCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRoZSBvd25lciB0byBsb29rdXAuDQogICAgZnVuY3Rpb24gdG9rZW5JZChhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMiB0b2tlbklEKSB7DQogICAgICAgIGlmIChfb3duZXIgPT0gMHgwKSB7DQogICAgICAgICAgICByZXR1cm4gMHgwOw0KICAgICAgICB9IGVsc2UgaWYgKG93bmVyVG9Ub2tlbltfb3duZXJdICE9IDB4MCkgew0KICAgICAgICAgICAgcmV0dXJuIG93bmVyVG9Ub2tlbltfb3duZXJdOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdG9rZW5JRCA9IGJ5dGVzMzIoZGV2Y29uMlRva2VuLmJhbGFuY2VPZihfb3duZXIpKTsNCiAgICAgICAgICAgIGlmICh0b2tlblRvT3duZXJbdG9rZW5JRF0gPT0gMHgwKSB7DQogICAgICAgICAgICAgICAgLy8gdGhpcyB0b2tlbiBoYXMgbm90IGJlZW4gdHJhbnNmZXJlZCB5ZXQgc28gcmV0dXJuIHRoZSBwcm94aWVkDQogICAgICAgICAgICAgICAgLy8gdmFsdWUuDQogICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuSUQ7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIFRoZSB0b2tlbiBoYXMgYWxyZWFkeSBiZWVuIHRyYW5zZmVycmVkIHNvIGlnbm9yZSB0aGUgcGFyZW50DQogICAgICAgICAgICAgICAgLy8gY29udHJhY3QgZGF0YS4NCiAgICAgICAgICAgICAgICByZXR1cm4gMHgwOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8vIEBkZXYgVXBncmFkZXMgYSB0b2tlbiBmcm9tIHRoZSBwcmV2aW91cyBjb250cmFjdA0KICAgIGZ1bmN0aW9uIHVwZ3JhZGUoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGlmICghZGV2Y29uMlRva2VuLmlzVG9rZW5Pd25lcihtc2cuc2VuZGVyKSkgew0KICAgICAgICAgICAgLy8gbm90IGEgdG9rZW4gb3duZXIuDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAob3duZXJUb1Rva2VuW21zZy5zZW5kZXJdICE9IDB4MCkgew0KICAgICAgICAgICAgLy8gYWxyZWFkeSBvd25zIGEgdG9rZW4NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gcHVsbCB0aGUgdG9rZW4gSUQNCiAgICAgICAgdmFyIHRva2VuSUQgPSBieXRlczMyKGRldmNvbjJUb2tlbi5iYWxhbmNlT2YobXNnLnNlbmRlcikpOw0KDQogICAgICAgIGlmICh0b2tlbklEID09IDB4MCkgew0KICAgICAgICAgICAgLy8gKHNob3VsZCBub3QgYmUgcG9zc2libGUgYnV0IGhlcmUgYXMgYSBzYW5pdHkgY2hlY2spDQogICAgICAgICAgICAvLyBudWxsIHRva2VuIGlzIGludmFsaWQuDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAodG9rZW5Ub093bmVyW3Rva2VuSURdICE9IDB4MCkgew0KICAgICAgICAgICAgLy8gYWxyZWFkeSB1cGdyYWRlZC4NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmIChkZXZjb24yVG9rZW4ub3duZXJPZih0b2tlbklEKSAhPSBtc2cuc2VuZGVyKSB7DQogICAgICAgICAgICAvLyAoc2hvdWxkIG5vdCBiZSBwb3NzaWJsZSBidXQgaGVyZSBhcyBhIHNhbml0eSBjaGVjaykNCiAgICAgICAgICAgIC8vIG5vdCB0aGUgb3duZXIgb2YgdGhlIHRva2VuLg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQXNzaWduIHRoZSBuZXcgb3duZXJzaGlwLg0KICAgICAgICBvd25lclRvVG9rZW5bbXNnLnNlbmRlcl0gPSB0b2tlbklEOw0KICAgICAgICB0b2tlblRvT3duZXJbdG9rZW5JRF0gPSBtc2cuc2VuZGVyOw0KDQogICAgICAgIC8vIGluY3JlbWVudCB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGF0IGhhdmUgYmVlbiB1cGdyYWRlZC4NCiAgICAgICAgX3VwZ3JhZGVDb3VudCArPSAxOw0KDQogICAgICAgIC8vIExvZyBpdA0KICAgICAgICBNaW50KG1zZy5zZW5kZXIsIHRva2VuSUQpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLy8gQGRldiBVcGdyYWRlcyBhIHRva2VuIGZyb20gdGhlIHByZXZpb3VzIGNvbnRyYWN0DQogICAgLy8vIEBwYXJhbSBfb3duZXIgdGhlIGFkZHJlc3Mgb2YgdGhlIG93bmVyIG9mIHRoZSB0b2tlbiBvbiB0aGUgb3JpZ2luYWwgY29udHJhY3QNCiAgICAvLy8gQHBhcmFtIF9uZXdPd25lciB0aGUgYWRkcmVzcyB0aGF0IHNob3VsZCBvd24gdGhlIHRva2VuIG9uIHRoZSBuZXcgY29udHJhY3QuDQogICAgLy8vIEBwYXJhbSBzaWduYXR1cmUgNjUgYnl0ZSBzaWduYXR1cmUgb2YgdGhlIHRpZ2h0bHkgcGFja2VkIGJ5dGVzIChhZGRyZXNzKHRoaXMpICsgX293bmVyICsgX25ld093bmVyKSwgc2lnbmVkIGJ5IF9vd25lcg0KICAgIGZ1bmN0aW9uIHByb3h5VXBncmFkZShhZGRyZXNzIF9vd25lciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBfbmV3T3duZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzIHNpZ25hdHVyZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgaWYgKF9vd25lciA9PSAweDAgfHwgX25ld093bmVyID09IDB4MCkgew0KICAgICAgICAgICAgLy8gY2Fubm90IHdvcmsgd2l0aCBudWxsIGFkZHJlc3Nlcy4NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmICghZGV2Y29uMlRva2VuLmlzVG9rZW5Pd25lcihfb3duZXIpKSB7DQogICAgICAgICAgICAvLyBub3QgYSB0b2tlbiBvd25lciBvbiB0aGUgb3JpZ2luYWwgZGV2Y29uMlRva2VuIGNvbnRyYWN0Lg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgYnl0ZXMzMiB0b2tlbklEID0gYnl0ZXMzMihkZXZjb24yVG9rZW4uYmFsYW5jZU9mKF9vd25lcikpOw0KDQogICAgICAgIGlmICh0b2tlbklEID09IDB4MCkgew0KICAgICAgICAgICAgLy8gKHNob3VsZCBub3QgYmUgcG9zc2libGUgc2luY2Ugd2UgYWxyZWFkeSBjaGVja2VkIGlzVG9rZW5Pd25lcg0KICAgICAgICAgICAgLy8gYnV0IEkgbGlrZSBiZWluZyBleHBsaWNpdCkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSBlbHNlIGlmIChpc1Rva2VuVXBncmFkZWQodG9rZW5JRCkpIHsNCiAgICAgICAgICAgIC8vIHRoZSB0b2tlbiBoYXMgYWxyZWFkeSBiZWVuIHVwZ3JhZGVkLg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGVsc2UgaWYgKG93bmVyVG9Ub2tlbltfbmV3T3duZXJdICE9IDB4MCkgew0KICAgICAgICAgICAgLy8gbmV3IG93bmVyIGFscmVhZHkgb3ducyBhIHRva2VuDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSBpZiAoX293bmVyICE9IF9uZXdPd25lciAmJiBpc0VsaWdpYmxlRm9yVXBncmFkZShfbmV3T3duZXIpKSB7DQogICAgICAgICAgICAvLyBjYW5ub3QgdXBncmFkZSB0byBhY2NvdW50IHRoYXQgaXMgc3RpbGwgaGFzIGFuIHVwZ3JhZGFibGUgdG9rZW4NCiAgICAgICAgICAgIC8vIG9uIHRoZSBvbGQgc3lzdGVtLg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgYnl0ZXMzMiBzaWduYXR1cmVIYXNoID0gc2hhMyhhZGRyZXNzKHRoaXMpLCBfb3duZXIsIF9uZXdPd25lcik7DQoNCiAgICAgICAgaWYgKCFFQ1ZlcmlmeUxpYi5lY3ZlcmlmeShzaWduYXR1cmVIYXNoLCBzaWduYXR1cmUsIF9vd25lcikpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEFzc2lnbiB0aGUgbmV3IHRva2VuDQogICAgICAgIHRva2VuVG9Pd25lclt0b2tlbklEXSA9IF9uZXdPd25lcjsNCiAgICAgICAgb3duZXJUb1Rva2VuW19uZXdPd25lcl0gPSB0b2tlbklEOw0KDQogICAgICAgIC8vIGluY3JlbWVudCB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGF0IGhhdmUgYmVlbiB1cGdyYWRlZC4NCiAgICAgICAgX3VwZ3JhZGVDb3VudCArPSAxOw0KDQogICAgICAgIC8vIExvZyBpdA0KICAgICAgICBNaW50KF9uZXdPd25lciwgdG9rZW5JRCk7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGF0IGhhdmUgYmVlbiB1cGdyYWRlZC4NCiAgICBmdW5jdGlvbiB1cGdyYWRlQ291bnQoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9hbW91bnQpIHsNCiAgICAgICAgcmV0dXJuIF91cGdyYWRlQ291bnQ7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGF0IGhhdmUgYmVlbiB1cGdyYWRlZC4NCiAgICAvLy8gQHBhcmFtIF90b2tlbklEIHRoZSBpZCBvZiB0aGUgdG9rZW4gdG8gcXVlcnkNCiAgICBmdW5jdGlvbiBpc1Rva2VuVXBncmFkZWQoYnl0ZXMzMiBfdG9rZW5JRCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBpc1VwZ3JhZGVkKSB7DQogICAgICAgIHJldHVybiAodG9rZW5Ub093bmVyW190b2tlbklEXSAhPSAweDApOw0KICAgIH0NCn0NCg0KDQpjb250cmFjdCBNYWlubmV0SW5kaXZpZHVhbGl0eVRva2VuUm9vdCBpcyANCiAgICAgICAgIEluZGl2aWR1YWxpdHlUb2tlblJvb3QoMHgwYTQzZWRmZTEwNmQyOTVlN2MxZTU5MWE0YjA0YjU1OThhZjk0NzRjKSB7DQp9'