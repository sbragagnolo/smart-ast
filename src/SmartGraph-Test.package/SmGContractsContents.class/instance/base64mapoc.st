base 64 content
base64mapoc
	^'Y29udHJhY3QgTWFwb2Mgew0KICAgIGFkZHJlc3MgX293bmVyOw0KICAgIGFkZHJlc3MgX2ZpbGlhdGU7DQoNCiAgICBtYXBwaW5nIChzdHJpbmcgPT4gdWludCkgcHJpdmF0ZSBtYXBFeGVjczsNCiAgICBFeGVjdXRpb25bXSBwcml2YXRlIGV4ZWN1dGlvbnM7DQogICAgZXZlbnQgRXhlY3V0ZWQoc3RyaW5nIEhhc2gpOw0KICAgIGV2ZW50IFZhbGlkYXRlZChzdHJpbmcgSGFzaCk7DQogICAgDQogICAgc3RydWN0IEV4ZWN1dGlvbiB7DQogICAgICAgIHVpbnQgZGF0ZUNyZWF0ZWQ7DQogICAgICAgIHN0cmluZyBoYXNoOw0KICAgICAgICBib29sIHZhbGlkYXRlZDsNCiAgICAgICAgdWludCBkYXRlVmFsaWRhdGVkOw0KICAgIH0NCiAgICANCiAgICANCiAgICAvKiBDT05TVFJVQ1RPUiAqLw0KICAgIGZ1bmN0aW9uIE1hcG9jKC8qYWRkcmVzcyBmaWxpYXRlKi8pIHsNCiAgICAgICAgX293bmVyID0gbXNnLnNlbmRlcjsNCiAgICAgICAgX2ZpbGlhdGUgPSBtc2cuc2VuZGVyOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBraWxsKCkgb3duZXJBbGxvd2VkKCkgew0KICAgICAgICBzdWljaWRlKF9vd25lcik7DQogICAgfQ0KICAgIA0KICAgIC8qIE1BUFBJTkcgKi8NCiAgICBmdW5jdGlvbiBtYXAoc3RyaW5nIGhhc2gpIGludGVybmFsIHJldHVybnModWludCkgew0KICAgICAgICB1aW50IHJldCA9IG1hcEV4ZWNzW2hhc2hdOw0KICAgICAgICBpZihyZXQgPj0gZXhlY3V0aW9ucy5sZW5ndGggfHwgIXN0ckVxdWFsKGV4ZWN1dGlvbnNbcmV0XS5oYXNoLCBoYXNoKSkgdGhyb3c7DQogICAgICAgIHJldHVybiByZXQ7DQogICAgfQ0KICAgIA0KICAgIC8qIE1PRElGSUVSUyAqLw0KICAgIG1vZGlmaWVyIGJvdGhBbGxvd2VkKCkgew0KICAgICAgICBpZihtc2cuc2VuZGVyICE9IF9vd25lciAmJiBtc2cuc2VuZGVyICE9IF9maWxpYXRlKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQogICAgDQogICAgbW9kaWZpZXIgb3duZXJBbGxvd2VkKCkgew0KICAgICAgICBpZihtc2cuc2VuZGVyICE9IF9vd25lcikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KICAgIA0KICAgIG1vZGlmaWVyIGZpbGlhdGVBbGxvd2VkKCkgew0KICAgICAgICBpZihtc2cuc2VuZGVyICE9IF9maWxpYXRlKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQogICAgDQogICAgbW9kaWZpZXIgbm90WWV0RXhpc3Qoc3RyaW5nIGhhc2gpIHsNCiAgICAgICAgdWludCBudW0gPSBtYXBFeGVjc1toYXNoXTsNCiAgICAgICAgaWYobnVtIDwgZXhlY3V0aW9ucy5sZW5ndGggJiYgc3RyRXF1YWwoZXhlY3V0aW9uc1tudW1dLmhhc2gsIGhhc2gpKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQogICAgDQogICAgbW9kaWZpZXIgbm90WWV0VmFsaWRhdGVkKHN0cmluZyBoYXNoKSB7DQogICAgICAgIEV4ZWN1dGlvbiBlID0gZXhlY3V0aW9uc1ttYXAoaGFzaCldOw0KICAgICAgICBpZihlLnZhbGlkYXRlZCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KICAgIA0KICAgIG1vZGlmaWVyIG9yZGVyRXhpc3Qoc3RyaW5nIGhhc2gpIHsNCiAgICAgICAgRXhlY3V0aW9uIGUgPSBleGVjdXRpb25zW21hcChoYXNoKV07DQogICAgICAgIGlmKCFzdHJFcXVhbChlLmhhc2gsIGhhc2gpKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQogICAgDQogICAgLyogRk9OQ1RJT05TICovDQogICAgZnVuY3Rpb24gQWRkRXhlYyhzdHJpbmcgSGFzaCkgcHVibGljIG93bmVyQWxsb3dlZCgpIG5vdFlldEV4aXN0KEhhc2gpIHsNCiAgICAgICAgdWludCBudW0gPSBleGVjdXRpb25zLmxlbmd0aCsrOw0KICAgICAgICBtYXBFeGVjc1tIYXNoXSA9IG51bTsNCiAgICAgICAgRXhlY3V0aW9uIGUgPSBleGVjdXRpb25zW251bV07DQogICAgICAgIGUuZGF0ZUNyZWF0ZWQgPSBub3c7DQogICAgICAgIGUuaGFzaCA9IEhhc2g7DQogICAgICAgIEV4ZWN1dGVkKEhhc2gpOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBWYWxpZGF0ZUV4ZWMoc3RyaW5nIEhhc2gpIHB1YmxpYyBmaWxpYXRlQWxsb3dlZCgpIG5vdFlldFZhbGlkYXRlZChIYXNoKSB7DQogICAgICAgIEV4ZWN1dGlvbiBlID0gZXhlY3V0aW9uc1ttYXAoSGFzaCldOw0KICAgICAgICBlLnZhbGlkYXRlZCA9IHRydWU7DQogICAgICAgIGUuZGF0ZVZhbGlkYXRlZCA9IG5vdzsNCiAgICAgICAgVmFsaWRhdGVkKEhhc2gpOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBDaGVja0V4ZWN1dGlvbihzdHJpbmcgSGFzaCkgcHVibGljIGJvdGhBbGxvd2VkKCkgY29uc3RhbnQgcmV0dXJucyhib29sIElzRXhpc3QsIHVpbnQgRGF0ZUNyZWF0ZWQsIGJvb2wgVmFsaWRhdGVkLCB1aW50IERhdGVWYWxpZGF0ZWQpew0KICAgICAgICB1aW50IHJldCA9IG1hcEV4ZWNzW0hhc2hdOw0KICAgICAgICBpZihyZXQgPj0gZXhlY3V0aW9ucy5sZW5ndGggfHwgIXN0ckVxdWFsKGV4ZWN1dGlvbnNbcmV0XS5oYXNoLCBIYXNoKSkgcmV0dXJuIChmYWxzZSwgMCwgZmFsc2UsIDApOw0KICAgICAgICBFeGVjdXRpb24gZSA9IGV4ZWN1dGlvbnNbcmV0XTsNCiAgICAgICAgcmV0dXJuICh0cnVlLCBlLmRhdGVDcmVhdGVkLCBlLnZhbGlkYXRlZCwgZS5kYXRlVmFsaWRhdGVkKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gSXNWYWxpZGF0ZWQoc3RyaW5nIEhhc2gpIHB1YmxpYyBib3RoQWxsb3dlZCgpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgew0KICAgICAgICBFeGVjdXRpb24gZSA9IGV4ZWN1dGlvbnNbbWFwKEhhc2gpXTsNCiAgICAgICAgcmV0dXJuIGUudmFsaWRhdGVkOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBMYXN0RXhlY3V0ZWQoKSBwdWJsaWMgYm90aEFsbG93ZWQoKSBjb25zdGFudCByZXR1cm5zKHN0cmluZyBIYXNoLCB1aW50IERhdGVDcmVhdGVkKSB7DQogICAgICAgIERhdGVDcmVhdGVkID0gMDsNCiAgICAgICAgaWYoZXhlY3V0aW9ucy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICBpZighZXhlY3V0aW9uc1swXS52YWxpZGF0ZWQpIHsNCiAgICAgICAgICAgICAgICBIYXNoID0gZXhlY3V0aW9uc1swXS5oYXNoOw0KICAgICAgICAgICAgICAgIERhdGVDcmVhdGVkID0gZXhlY3V0aW9uc1swXS5kYXRlQ3JlYXRlZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvcih1aW50IGkgPSBleGVjdXRpb25zLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHsNCiAgICAgICAgICAgICAgICBpZighZXhlY3V0aW9uc1tpXS52YWxpZGF0ZWQgJiYgZXhlY3V0aW9uc1tpXS5kYXRlQ3JlYXRlZCA+IERhdGVDcmVhdGVkKSB7DQogICAgICAgICAgICAgICAgICAgIEhhc2ggPSBleGVjdXRpb25zW2ldLmhhc2g7DQogICAgICAgICAgICAgICAgICAgIERhdGVDcmVhdGVkID0gZXhlY3V0aW9uc1tpXS5kYXRlQ3JlYXRlZDsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiAoSGFzaCwgRGF0ZUNyZWF0ZWQpOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBMYXN0VmFsaWRhdGVkKCkgcHVibGljIGJvdGhBbGxvd2VkKCkgY29uc3RhbnQgcmV0dXJucyhzdHJpbmcgSGFzaCwgdWludCBEYXRlVmFsaWRhdGVkKSB7DQogICAgICAgIERhdGVWYWxpZGF0ZWQgPSAwOw0KICAgICAgICBmb3IodWludCBpID0gMDsgaSA8IGV4ZWN1dGlvbnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGlmKGV4ZWN1dGlvbnNbaV0udmFsaWRhdGVkICYmIGV4ZWN1dGlvbnNbaV0uZGF0ZVZhbGlkYXRlZCA+IERhdGVWYWxpZGF0ZWQpIHsNCiAgICAgICAgICAgICAgICBIYXNoID0gZXhlY3V0aW9uc1tpXS5oYXNoOw0KICAgICAgICAgICAgICAgIERhdGVWYWxpZGF0ZWQgPSBleGVjdXRpb25zW2ldLmRhdGVWYWxpZGF0ZWQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIChIYXNoLCBEYXRlVmFsaWRhdGVkKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gQ291bnRFeGVjcygpIHB1YmxpYyBib3RoQWxsb3dlZCgpIGNvbnN0YW50IHJldHVybnModWludCBUb3RhbCwgdWludCBOb3RWYWwpIHsNCiAgICAgICAgdWludCBuYk5vdFZhbCA9IDA7DQogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgZXhlY3V0aW9ucy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYoIWV4ZWN1dGlvbnNbaV0udmFsaWRhdGVkKSBuYk5vdFZhbCsrOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiAoZXhlY3V0aW9ucy5sZW5ndGgsIG5iTm90VmFsKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gTm90VmFsU2luY2UodWludCB0aW1lc3RhbXBGcm9tKSBwdWJsaWMgYm90aEFsbG93ZWQoKSBjb25zdGFudCByZXR1cm5zKHVpbnQgQ291bnQsIHN0cmluZyBGaXJzdCwgdWludCBEYXRlRmlyc3QsIHN0cmluZyBMYXN0LCB1aW50IERhdGVMYXN0KSB7DQogICAgICAgIENvdW50ID0gMDsNCiAgICAgICAgRGF0ZUZpcnN0ID0gbm93Ow0KICAgICAgICBEYXRlTGFzdCA9IDA7DQogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgZXhlY3V0aW9ucy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYoIWV4ZWN1dGlvbnNbaV0udmFsaWRhdGVkICYmIGV4ZWN1dGlvbnNbaV0uZGF0ZUNyZWF0ZWQgPj0gdGltZXN0YW1wRnJvbSkgew0KICAgICAgICAgICAgICAgIENvdW50Kys7DQogICAgICAgICAgICAgICAgaWYoZXhlY3V0aW9uc1tpXS5kYXRlQ3JlYXRlZCA8IERhdGVGaXJzdCkgew0KICAgICAgICAgICAgICAgICAgICBGaXJzdCA9IGV4ZWN1dGlvbnNbaV0uaGFzaDsNCiAgICAgICAgICAgICAgICAgICAgRGF0ZUZpcnN0ID0gZXhlY3V0aW9uc1tpXS5kYXRlQ3JlYXRlZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZihleGVjdXRpb25zW2ldLmRhdGVDcmVhdGVkID4gRGF0ZUxhc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgTGFzdCA9IGV4ZWN1dGlvbnNbaV0uaGFzaDsNCiAgICAgICAgICAgICAgICAgICAgRGF0ZUxhc3QgPSBleGVjdXRpb25zW2ldLmRhdGVDcmVhdGVkOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKENvdW50LCBGaXJzdCwgRGF0ZUZpcnN0LCBMYXN0LCBEYXRlTGFzdCk7DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIExpc3ROb3RWYWxTaW5jZSh1aW50IHRpbWVzdGFtcEZyb20pIHB1YmxpYyBib3RoQWxsb3dlZCgpIGNvbnN0YW50IHJldHVybnModWludCBDb3VudCwgc3RyaW5nIExpc3QsIHVpbnQgT2xkZXN0VGltZSkgew0KICAgICAgICBDb3VudCA9IDA7DQogICAgICAgIExpc3QgPSAiXG4iOw0KICAgICAgICBPbGRlc3RUaW1lID0gbm93Ow0KICAgICAgICBmb3IodWludCBpID0gMDsgaSA8IGV4ZWN1dGlvbnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGlmKCFleGVjdXRpb25zW2ldLnZhbGlkYXRlZCAmJiBleGVjdXRpb25zW2ldLmRhdGVDcmVhdGVkID49IHRpbWVzdGFtcEZyb20pIHsNCiAgICAgICAgICAgICAgICBDb3VudCsrOw0KICAgICAgICAgICAgICAgIExpc3QgPSBzdHJDb25jYXQoTGlzdCwgZXhlY3V0aW9uc1tpXS5oYXNoLCAiIDtcbiIpOw0KICAgICAgICAgICAgICAgIGlmKGV4ZWN1dGlvbnNbaV0uZGF0ZUNyZWF0ZWQgPCBPbGRlc3RUaW1lKQ0KICAgICAgICAgICAgICAgICAgICBPbGRlc3RUaW1lID0gZXhlY3V0aW9uc1tpXS5kYXRlQ3JlYXRlZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKENvdW50LCBMaXN0LCBPbGRlc3RUaW1lKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gTGlzdEFsbFNpbmNlKHVpbnQgdGltZXN0YW1wRnJvbSkgcHVibGljIGJvdGhBbGxvd2VkKCkgY29uc3RhbnQgcmV0dXJucyh1aW50IENvdW50LCBzdHJpbmcgTGlzdCkgew0KICAgICAgICBMaXN0ID0gIlxuIjsNCiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBleGVjdXRpb25zLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBzdHJpbmcgbWVtb3J5IHZhbDsNCiAgICAgICAgICAgIGlmKGV4ZWN1dGlvbnNbaV0udmFsaWRhdGVkKQ0KICAgICAgICAgICAgICAgIHZhbCA9ICJjb25maXJtZWRcbiI7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdmFsID0gInB1Ymxpc2hlZFxuIjsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIExpc3QgPSBzdHJDb25jYXQoTGlzdCwgZXhlY3V0aW9uc1tpXS5oYXNoLCAiIDogIiwgdmFsKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKGV4ZWN1dGlvbnMubGVuZ3RoLCBMaXN0KTsNCiAgICB9DQogICAgDQogICAgLyogVVRJTFMgKi8NCiAgICBmdW5jdGlvbiBzdHJFcXVhbChzdHJpbmcgX2EsIHN0cmluZyBfYikgaW50ZXJuYWwgcmV0dXJucyhib29sKSB7DQoJCWJ5dGVzIG1lbW9yeSBhID0gYnl0ZXMoX2EpOw0KCQlieXRlcyBtZW1vcnkgYiA9IGJ5dGVzKF9iKTsNCgkJaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKQ0KCQkJcmV0dXJuIGZhbHNlOw0KDQoJCWZvciAodWludCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpICsrKQ0KCQkJaWYgKGFbaV0gIT0gYltpXSkNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCXJldHVybiB0cnVlOw0KCX0NCgkNCglmdW5jdGlvbiBzdHJDb25jYXQoc3RyaW5nIF9hLCBzdHJpbmcgX2IsIHN0cmluZyBfYywgc3RyaW5nIF9kLCBzdHJpbmcgX2UpIGludGVybmFsIHJldHVybnMoc3RyaW5nKSB7DQogICAgICAgIGJ5dGVzIG1lbW9yeSBfYmEgPSBieXRlcyhfYSk7DQogICAgICAgIGJ5dGVzIG1lbW9yeSBfYmIgPSBieXRlcyhfYik7DQogICAgICAgIGJ5dGVzIG1lbW9yeSBfYmMgPSBieXRlcyhfYyk7DQogICAgICAgIGJ5dGVzIG1lbW9yeSBfYmQgPSBieXRlcyhfZCk7DQogICAgICAgIGJ5dGVzIG1lbW9yeSBfYmUgPSBieXRlcyhfZSk7DQogICAgICAgIHN0cmluZyBtZW1vcnkgYWJjZGUgPSBuZXcgc3RyaW5nKF9iYS5sZW5ndGggKyBfYmIubGVuZ3RoICsgX2JjLmxlbmd0aCArIF9iZC5sZW5ndGggKyBfYmUubGVuZ3RoKTsNCiAgICAgICAgYnl0ZXMgbWVtb3J5IGJhYmNkZSA9IGJ5dGVzKGFiY2RlKTsNCiAgICAgICAgdWludCBrID0gMDsNCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX2JhLmxlbmd0aDsgaSsrKSBiYWJjZGVbaysrXSA9IF9iYVtpXTsNCiAgICAgICAgZm9yIChpID0gMDsgaSA8IF9iYi5sZW5ndGg7IGkrKykgYmFiY2RlW2srK10gPSBfYmJbaV07DQogICAgICAgIGZvciAoaSA9IDA7IGkgPCBfYmMubGVuZ3RoOyBpKyspIGJhYmNkZVtrKytdID0gX2JjW2ldOw0KICAgICAgICBmb3IgKGkgPSAwOyBpIDwgX2JkLmxlbmd0aDsgaSsrKSBiYWJjZGVbaysrXSA9IF9iZFtpXTsNCiAgICAgICAgZm9yIChpID0gMDsgaSA8IF9iZS5sZW5ndGg7IGkrKykgYmFiY2RlW2srK10gPSBfYmVbaV07DQogICAgICAgIHJldHVybiBzdHJpbmcoYmFiY2RlKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gc3RyQ29uY2F0KHN0cmluZyBfYSwgc3RyaW5nIF9iLCBzdHJpbmcgX2MsIHN0cmluZyBfZCkgaW50ZXJuYWwgcmV0dXJucyhzdHJpbmcpIHsNCiAgICAgICAgcmV0dXJuIHN0ckNvbmNhdChfYSwgX2IsIF9jLCBfZCwgIiIpOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBzdHJDb25jYXQoc3RyaW5nIF9hLCBzdHJpbmcgX2IsIHN0cmluZyBfYykgaW50ZXJuYWwgcmV0dXJucyhzdHJpbmcpIHsNCiAgICAgICAgcmV0dXJuIHN0ckNvbmNhdChfYSwgX2IsIF9jLCAiIiwgIiIpOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBzdHJDb25jYXQoc3RyaW5nIF9hLCBzdHJpbmcgX2IpIGludGVybmFsIHJldHVybnMoc3RyaW5nKSB7DQogICAgICAgIHJldHVybiBzdHJDb25jYXQoX2EsIF9iLCAiIiwgIiIsICIiKTsNCiAgICB9DQogICAgDQp9'