base 64 content
base64marchMadness1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQovLy8gQHRpdGxlIE9yYWNsZSBjb250cmFjdCB3aGVyZSBtIG9mIG4gcHJlZGV0ZXJtaW5lZCB2b3RlcnMgZGV0ZXJtaW5lIGEgdmFsdWUNCmNvbnRyYWN0IEZlZGVyYXRlZE9yYWNsZUJ5dGVzOCB7DQogICAgc3RydWN0IFZvdGVyIHsNCiAgICAgICAgYm9vbCBpc1ZvdGVyOw0KICAgICAgICBib29sIGhhc1ZvdGVkOw0KICAgIH0NCg0KICAgIGV2ZW50IFZvdGVyQWRkZWQoYWRkcmVzcyBhY2NvdW50KTsNCiAgICBldmVudCBWb3RlU3VibWl0dGVkKGFkZHJlc3MgYWNjb3VudCwgYnl0ZXM4IHZhbHVlKTsNCiAgICBldmVudCBWYWx1ZUZpbmFsaXplZChieXRlczggdmFsdWUpOw0KDQogICAgbWFwcGluZyhhZGRyZXNzID0+IFZvdGVyKSBwdWJsaWMgdm90ZXJzOw0KICAgIG1hcHBpbmcoYnl0ZXM4ID0+IHVpbnQ4KSBwdWJsaWMgdm90ZXM7DQoNCiAgICB1aW50OCBwdWJsaWMgbTsNCiAgICB1aW50OCBwdWJsaWMgbjsNCiAgICBieXRlczggcHVibGljIGZpbmFsVmFsdWU7DQoNCiAgICB1aW50OCBwcml2YXRlIHZvdGVyQ291bnQ7DQogICAgYWRkcmVzcyBwcml2YXRlIGNyZWF0b3I7DQoNCiAgICBmdW5jdGlvbiBGZWRlcmF0ZWRPcmFjbGVCeXRlczgodWludDggbV8sIHVpbnQ4IG5fKSB7DQogICAgICAgIGNyZWF0b3IgPSBtc2cuc2VuZGVyOw0KICAgICAgICBtID0gbV87DQogICAgICAgIG4gPSBuXzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhZGRWb3RlcihhZGRyZXNzIGFjY291bnQpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY3JlYXRvcikgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHZvdGVyQ291bnQgPT0gbikgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgdm90ZXIgPSB2b3RlcnNbYWNjb3VudF07DQogICAgICAgIGlmICh2b3Rlci5pc1ZvdGVyKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvdGVyLmlzVm90ZXIgPSB0cnVlOw0KICAgICAgICB2b3RlckNvdW50Kys7DQogICAgICAgIFZvdGVyQWRkZWQoYWNjb3VudCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc3VibWl0VmFsdWUoYnl0ZXM4IHZhbHVlKSB7DQogICAgICAgIHZhciB2b3RlciA9IHZvdGVyc1ttc2cuc2VuZGVyXTsNCiAgICAgICAgaWYgKCF2b3Rlci5pc1ZvdGVyKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodm90ZXIuaGFzVm90ZWQpIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQoNCiAgICAgICAgdm90ZXIuaGFzVm90ZWQgPSB0cnVlOw0KICAgICAgICB2b3Rlc1t2YWx1ZV0rKzsNCiAgICAgICAgVm90ZVN1Ym1pdHRlZChtc2cuc2VuZGVyLCB2YWx1ZSk7DQoNCiAgICAgICAgaWYgKHZvdGVzW3ZhbHVlXSA9PSBtKSB7DQogICAgICAgICAgICBmaW5hbFZhbHVlID0gdmFsdWU7DQogICAgICAgICAgICBWYWx1ZUZpbmFsaXplZCh2YWx1ZSk7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCi8vIFRoaXMgbGlicmFyeSBjYW4gYmUgdXNlZCB0byBzY29yZSBieXRlIGJyYWNrZXRzLiBCeXRlIGJyYWNrZXRzIGFyZSBhIHN1Y2NpbmN0IGVuY29kaW5nIG9mIGENCi8vIDY0IHRlYW0gYnJhY2tldCBpbnRvIGFuIDgtYnl0ZSBhcnJheS4gVGhlIHRvdXJuYW1lbnQgcmVzdWx0cyBhcmUgZW5jb2RlZCBpbiB0aGUgc2FtZSBmb3JtYXQgYW5kDQovLyBjb21wYXJlZCBhZ2FpbnN0IHRoZSBicmFja2V0IHBpY2tzLiBUbyByZWR1Y2UgdGhlIGNvbXB1dGF0aW9uIHRpbWUgb2Ygc2NvcmluZyBhIGJyYWNrZXQsIGEgNjQtYml0DQovLyB2YWx1ZSBjYWxsZWQgdGhlICJzY29yaW5nIG1hc2siIGlzIGZpcnN0IGNvbXB1dGVkIG9uY2UgZm9yIGEgcGFydGljdWxhciByZXN1bHQgc2V0IGFuZCB1c2VkIHRvDQovLyBzY29yZSBhbGwgYnJhY2tldHMuDQovLw0KLy8gQWxnb3JpdGhtIGRlc2NyaXB0aW9uOiBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vZmlsZS9kLzBCeEhiYmdydWNDeDJOMU14Y25BMVpFMVdRVzgvdmlldw0KLy8gUmVmZXJlbmNlIGltcGxlbWVudGF0aW9uOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wdXJzdWluZ3BhcmV0by9iMTVmMTE5N2Q5NmIxYTJiYmM0OA0KbGlicmFyeSBCeXRlQnJhY2tldCB7DQogICAgZnVuY3Rpb24gZ2V0QnJhY2tldFNjb3JlKGJ5dGVzOCBicmFja2V0LCBieXRlczggcmVzdWx0cywgdWludDY0IGZpbHRlcikNCiAgICAgICAgY29uc3RhbnQNCiAgICAgICAgcmV0dXJucyAodWludDggcG9pbnRzKQ0KICAgIHsNCiAgICAgICAgdWludDggcm91bmROdW0gPSAwOw0KICAgICAgICB1aW50OCBudW1HYW1lcyA9IDMyOw0KICAgICAgICB1aW50NjQgYmxhY2tsaXN0ID0gKHVpbnQ2NCgxKSA8PCBudW1HYW1lcykgLSAxOw0KICAgICAgICB1aW50NjQgb3ZlcmxhcCA9IHVpbnQ2NCh+KGJyYWNrZXQgXiByZXN1bHRzKSk7DQoNCiAgICAgICAgd2hpbGUgKG51bUdhbWVzID4gMCkgew0KICAgICAgICAgICAgdWludDY0IHNjb3JlcyA9IG92ZXJsYXAgJiBibGFja2xpc3Q7DQogICAgICAgICAgICBwb2ludHMgKz0gcG9wY291bnQoc2NvcmVzKSA8PCByb3VuZE51bTsNCiAgICAgICAgICAgIGJsYWNrbGlzdCA9IHBhaXJ3aXNlT3Ioc2NvcmVzICYgZmlsdGVyKTsNCiAgICAgICAgICAgIG92ZXJsYXAgPj49IG51bUdhbWVzOw0KICAgICAgICAgICAgZmlsdGVyID4+PSBudW1HYW1lczsNCiAgICAgICAgICAgIG51bUdhbWVzIC89IDI7DQogICAgICAgICAgICByb3VuZE51bSsrOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0U2NvcmluZ01hc2soYnl0ZXM4IHJlc3VsdHMpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCBtYXNrKSB7DQogICAgICAgIC8vIEZpbHRlciBmb3IgdGhlIHNlY29uZCBtb3N0IHNpZ25pZmljYW50IGJpdCBzaW5jZSBNU0IgaXMgaWdub3JlZC4NCiAgICAgICAgYnl0ZXM4IGJpdFNlbGVjdG9yID0gMSA8PCA2MjsNCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgMzE7IGkrKykgew0KICAgICAgICAgICAgbWFzayA8PD0gMjsNCiAgICAgICAgICAgIGlmIChyZXN1bHRzICYgYml0U2VsZWN0b3IgIT0gMCkgew0KICAgICAgICAgICAgICAgIG1hc2sgfD0gMTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbWFzayB8PSAyOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmVzdWx0cyA8PD0gMTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIFJldHVybnMgYSBiaXRzdHJpbmcgb2YgaGFsZiB0aGUgbGVuZ3RoIGJ5IHRha2luZyBiaXRzIHR3byBhdCBhIHRpbWUgYW5kIE9SaW5nIHRoZW0uDQogICAgLy8NCiAgICAvLyBTZXBhcmF0ZXMgdGhlIGV2ZW4gYW5kIG9kZCBiaXRzIGJ5IHJlcGVhdGVkbHkNCiAgICAvLyBzaHVmZmxpbmcgc21hbGxlciBzZWdtZW50cyBvZiBhIGJpdHN0cmluZy4NCiAgICBmdW5jdGlvbiBwYWlyd2lzZU9yKHVpbnQ2NCBiaXRzKSBpbnRlcm5hbCByZXR1cm5zICh1aW50NjQpIHsNCiAgICAgICAgdWludDY0IHRtcDsNCiAgICAgICAgdG1wID0gKGJpdHMgXiAoYml0cyA+PiAxKSkgJiAweDIyMjIyMjIyOw0KICAgICAgICBiaXRzIF49ICh0bXAgXiAodG1wIDw8IDEpKTsNCiAgICAgICAgdG1wID0gKGJpdHMgXiAoYml0cyA+PiAyKSkgJiAweDBjMGMwYzBjOw0KICAgICAgICBiaXRzIF49ICh0bXAgXiAodG1wIDw8IDIpKTsNCiAgICAgICAgdG1wID0gKGJpdHMgXiAoYml0cyA+PiA0KSkgJiAweDAwZjAwMGYwOw0KICAgICAgICBiaXRzIF49ICh0bXAgXiAodG1wIDw8IDQpKTsNCiAgICAgICAgdG1wID0gKGJpdHMgXiAoYml0cyA+PiA4KSkgJiAweDAwMDBmZjAwOw0KICAgICAgICBiaXRzIF49ICh0bXAgXiAodG1wIDw8IDgpKTsNCiAgICAgICAgdWludDY0IGV2ZW5zID0gYml0cyA+PiAxNjsNCiAgICAgICAgdWludDY0IG9kZHMgPSBiaXRzICUgMHgxMDAwMDsNCiAgICAgICAgcmV0dXJuIGV2ZW5zIHwgb2RkczsNCiAgICB9DQoNCiAgICAvLyBDb3VudHMgdGhlIG51bWJlciBvZiAxcyBpbiBhIGJpdHN0cmluZy4NCiAgICBmdW5jdGlvbiBwb3Bjb3VudCh1aW50NjQgYml0cykgaW50ZXJuYWwgcmV0dXJucyAodWludDgpIHsNCiAgICAgICAgYml0cyAtPSAoYml0cyA+PiAxKSAmIDB4NTU1NTU1NTU1NTU1NTU1NTsNCiAgICAgICAgYml0cyA9IChiaXRzICYgMHgzMzMzMzMzMzMzMzMzMzMzKSArICgoYml0cyA+PiAyKSAmIDB4MzMzMzMzMzMzMzMzMzMzMyk7DQogICAgICAgIGJpdHMgPSAoYml0cyArIChiaXRzID4+IDQpKSAmIDB4MGYwZjBmMGYwZjBmMGYwZjsNCiAgICAgICAgcmV0dXJuIHVpbnQ4KCgoYml0cyAqIDB4MDEwMTAxMDEwMTAxMDEwMSkgJiAweGZmZmZmZmZmZmZmZmZmZmYpID4+IDU2KTsNCiAgICB9DQp9DQoNCi8qKg0KICogQHRpdGxlIE1hcmNoIE1hZG5lc3MgYnJhY2tldCBwb29sIHNtYXJ0IGNvbnRyYWN0DQogKg0KICogVGhlIGNvbnRyYWN0IGhhcyBmb3VyIHBoYXNlczogc3VibWlzc2lvbiwgdG91cm5hbWVudCwgc2NvcmluZywgdGhlbiB0aGUgY29udGVzdCBpcyBvdmVyLiBEdXJpbmcNCiAqIHRoZSBzdWJtaXNzaW9uIHBoYXNlLCBlbnRyYW50cyBzdWJtaXQgYSBjcnlwdG9ncmFwaGljIGNvbW1pdG1lbnQgdG8gdGhlaXIgYnJhY2tldCBwaWNrcy4gRWFjaA0KICogYWRkcmVzcyBtYXkgb25seSBtYWtlIG9uZSBzdWJtaXNzaW9uLiBFbnRyYW50cyBtYXkgcmV2ZWFsIHRoZWlyIGJyYWNrZXRzIGF0IGFueSB0aW1lIGFmdGVyIG1ha2luZw0KICogdGhlIGNvbW1pdG1lbnQuIE9uY2UgdGhlIHRvdXJuYW1lbnQgc3RhcnRzLCBubyBmdXJ0aGVyIHN1Ym1pc3Npb25zIGFyZSBhbGxvd2VkLiBXaGVuIHRoZQ0KICogdG91cm5hbWVudCBlbmRzLCB0aGUgcmVzdWx0cyBhcmUgc3VibWl0dGVkIGJ5IHRoZSBvcmFjbGVzIGFuZCB0aGUgc2NvcmluZyBwZXJpb2QgYmVnaW5zLiBEdXJpbmcNCiAqIHRoZSBzY29yaW5nIHBlcmlvZCwgZW50cmFudHMgbWF5IHJldmVhbCB0aGVpciBicmFja2V0IHBpY2tzIGFuZCBzY29yZSB0aGVpciBicmFja2V0cy4gVGhlIGhpZ2hlc3QNCiAqIHNjb3JpbmcgYnJhY2tldCByZXZlYWxlZCBpcyByZWNvcmRlZC4gQWZ0ZXIgdGhlIHNjb3JpbmcgcGVyaW9kIGVuZHMsIGFsbCBlbnRyYW50cyB3aXRoIGEgaGlnaGVzdA0KICogc2NvcmluZyBicmFja2V0IHNwbGl0IHRoZSBwb3QgYW5kIG1heSB3aXRoZHJhdyB0aGVpciB3aW5uaW5ncy4NCiAqDQogKiBJbiB0aGUgZXZlbnQgdGhhdCB0aGUgb3JhY2xlcyBkbyBub3Qgc3VibWl0IHJlc3VsdHMgb3IgZmFpbCB0byByZWFjaCBjb25zZW5zdXMgYWZ0ZXIgYSBjZXJ0YWluDQogKiBhbW91bnQgb2YgdGltZSwgZW50cnkgZmVlcyB3aWxsIGJlIHJldHVybmVkIHRvIGVudHJhbnRzLg0KICovDQpjb250cmFjdCBNYXJjaE1hZG5lc3Mgew0KICAgIHN0cnVjdCBTdWJtaXNzaW9uIHsNCiAgICAgICAgYnl0ZXMzMiBjb21taXRtZW50Ow0KICAgICAgICBieXRlczggYnJhY2tldDsNCiAgICAgICAgdWludDggc2NvcmU7DQogICAgICAgIGJvb2wgY29sbGVjdGVkV2lubmluZ3M7DQogICAgICAgIGJvb2wgY29sbGVjdGVkRW50cnlGZWU7DQogICAgfQ0KDQogICAgZXZlbnQgU3VibWlzc2lvbkFjY2VwdGVkKGFkZHJlc3MgYWNjb3VudCk7DQogICAgZXZlbnQgTmV3V2lubmVyKGFkZHJlc3Mgd2lubmVyLCB1aW50OCBzY29yZSk7DQogICAgZXZlbnQgVG91cm5hbWVudE92ZXIoKTsNCg0KICAgIEZlZGVyYXRlZE9yYWNsZUJ5dGVzOCByZXN1bHRzT3JhY2xlOw0KDQoJbWFwcGluZyhhZGRyZXNzID0+IFN1Ym1pc3Npb24pIHN1Ym1pc3Npb25zOw0KDQogICAgLy8gQW1vdW50IHRoYXQgd2lubmVycyB3aWxsIGNvbGxlY3QNCiAgICB1aW50IHB1YmxpYyB3aW5uaW5nczsNCg0KICAgIC8vIE51bWJlciBvZiBzdWJtaXNzaW9ucyB3aXRoIGEgd2lubmluZyBzY29yZQ0KICAgIHVpbnQgcHVibGljIG51bVdpbm5lcnM7DQoNCiAgICAvLyBEYXRhIGRlcml2ZWQgZnJvbSByZXN1bHRzIHVzZWQgYnkgYnJhY2tldCBzY29yaW5nIGFsZ29yaXRobQ0KICAgIHVpbnQ2NCBwcml2YXRlIHNjb3JpbmdNYXNrOw0KDQogICAgLy8gRmVlIGluIHdlaSByZXF1aXJlZCB0byBlbnRlciBhIGJyYWNrZXQNCiAgICB1aW50IHB1YmxpYyBlbnRyeUZlZTsNCg0KICAgIC8vIER1cmF0aW9uIGluIHNlY29uZHMgb2YgdGhlIHNjb3JpbmcgcGhhc2UNCiAgICB1aW50IHB1YmxpYyBzY29yaW5nRHVyYXRpb247DQoNCiAgICAvLyBUaW1lc3RhbXAgb2YgdGhlIHN0YXJ0IG9mIHRoZSB0b3VybmFtZW50IHBoYXNlDQogICAgdWludCBwdWJsaWMgdG91cm5hbWVudFN0YXJ0VGltZTsNCg0KICAgIC8vIEluIGNhc2UgdGhlIG9yYWNsZXMgZmFpbCB0byBzdWJtaXQgdGhlIHJlc3VsdHMgb3IgcmVhY2ggY29uc2Vuc3VzLCB0aGUgYW1vdW50IG9mIHRpbWUgYWZ0ZXINCiAgICAvLyB0aGUgdG91cm5hbWVudCBoYXMgc3RhcnRlZCBhZnRlciB3aGljaCB0byByZXR1cm4gZW50cnkgZmVlcyB0byB1c2Vycy4NCiAgICB1aW50IHB1YmxpYyBub0NvbnRlc3RUaW1lOw0KDQogICAgLy8gVGltZXN0YW1wIG9mIHRoZSBlbmQgb2YgdGhlIHNjb3JpbmcgcGhhc2UNCiAgICB1aW50IHB1YmxpYyBjb250ZXN0T3ZlclRpbWU7DQoNCiAgICAvLyBCeXRlIGJyYWNrZXQgcmVwcmVzZW50YXRpb24gb2YgdGhlIHRvdXJuYW1lbnQgcmVzdWx0cw0KICAgIGJ5dGVzOCBwdWJsaWMgcmVzdWx0czsNCg0KICAgIC8vIFRoZSBoaWdoZXN0IHNjb3JlIG9mIGEgYnJhY2tldCBzY29yZWQgc28gZmFyDQogICAgdWludDggcHVibGljIHdpbm5pbmdTY29yZTsNCg0KICAgIC8vIFRoZSBtYXhpbXVtIGFsbG93ZWQgbnVtYmVyIG9mIHN1Ym1pc3Npb25zDQogICAgdWludDMyIHB1YmxpYyBtYXhTdWJtaXNzaW9uczsNCg0KICAgIC8vIFRoZSBudW1iZXIgb2YgYnJhY2tldHMgc3VibWl0dGVkIHNvIGZhcg0KICAgIHVpbnQzMiBwdWJsaWMgbnVtU3VibWlzc2lvbnM7DQoNCiAgICAvLyBJUEZTIGhhc2ggb2YgSlNPTiBmaWxlIGNvbnRhaW5pbmcgdG91cm5hbWVudCBpbmZvcm1hdGlvbiAoZWcuIHRlYW1zLCByZWdpb25zLCBldGMpDQogICAgc3RyaW5nIHB1YmxpYyB0b3VybmFtZW50RGF0YUlQRlNIYXNoOw0KDQoJZnVuY3Rpb24gTWFyY2hNYWRuZXNzKA0KICAgICAgICB1aW50IGVudHJ5RmVlXywNCiAgICAgICAgdWludCB0b3VybmFtZW50U3RhcnRUaW1lXywNCiAgICAgICAgdWludCBub0NvbnRlc3RUaW1lXywNCiAgICAgICAgdWludCBzY29yaW5nRHVyYXRpb25fLA0KICAgICAgICB1aW50MzIgbWF4U3VibWlzc2lvbnNfLA0KICAgICAgICBzdHJpbmcgdG91cm5hbWVudERhdGFJUEZTSGFzaF8sDQogICAgICAgIGFkZHJlc3Mgb3JhY2xlQWRkcmVzcw0KICAgICkgew0KCQllbnRyeUZlZSA9IGVudHJ5RmVlXzsNCiAgICAgICAgdG91cm5hbWVudFN0YXJ0VGltZSA9IHRvdXJuYW1lbnRTdGFydFRpbWVfOw0KICAgICAgICBzY29yaW5nRHVyYXRpb24gPSBzY29yaW5nRHVyYXRpb25fOw0KICAgICAgICBub0NvbnRlc3RUaW1lID0gbm9Db250ZXN0VGltZV87DQogICAgICAgIG1heFN1Ym1pc3Npb25zID0gbWF4U3VibWlzc2lvbnNfOw0KICAgICAgICB0b3VybmFtZW50RGF0YUlQRlNIYXNoID0gdG91cm5hbWVudERhdGFJUEZTSGFzaF87DQogICAgICAgIHJlc3VsdHNPcmFjbGUgPSBGZWRlcmF0ZWRPcmFjbGVCeXRlczgob3JhY2xlQWRkcmVzcyk7DQoJfQ0KDQogICAgZnVuY3Rpb24gc3VibWl0QnJhY2tldChieXRlczMyIGNvbW1pdG1lbnQpIHBheWFibGUgew0KICAgICAgICBpZiAobXNnLnZhbHVlICE9IGVudHJ5RmVlKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobm93ID49IHRvdXJuYW1lbnRTdGFydFRpbWUpIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQogICAgICAgIGlmIChudW1TdWJtaXNzaW9ucyA+PSBtYXhTdWJtaXNzaW9ucykgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgc3VibWlzc2lvbiA9IHN1Ym1pc3Npb25zW21zZy5zZW5kZXJdOw0KICAgICAgICBpZiAoc3VibWlzc2lvbi5jb21taXRtZW50ICE9IDApIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQoNCiAgICAgICAgc3VibWlzc2lvbi5jb21taXRtZW50ID0gY29tbWl0bWVudDsNCiAgICAgICAgbnVtU3VibWlzc2lvbnMrKzsNCiAgICAgICAgU3VibWlzc2lvbkFjY2VwdGVkKG1zZy5zZW5kZXIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHN0YXJ0U2NvcmluZygpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgaWYgKHJlc3VsdHMgIT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmIChub3cgPCB0b3VybmFtZW50U3RhcnRUaW1lKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG5vdyA+IG5vQ29udGVzdFRpbWUpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGJ5dGVzOCBvcmFjbGVWYWx1ZSA9IHJlc3VsdHNPcmFjbGUuZmluYWxWYWx1ZSgpOw0KICAgICAgICBpZiAob3JhY2xlVmFsdWUgPT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmVzdWx0cyA9IG9yYWNsZVZhbHVlOw0KICAgICAgICBzY29yaW5nTWFzayA9IEJ5dGVCcmFja2V0LmdldFNjb3JpbmdNYXNrKHJlc3VsdHMpOw0KICAgICAgICBjb250ZXN0T3ZlclRpbWUgPSBub3cgKyBzY29yaW5nRHVyYXRpb247DQogICAgICAgIFRvdXJuYW1lbnRPdmVyKCk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJldmVhbEJyYWNrZXQoYnl0ZXM4IGJyYWNrZXQsIGJ5dGVzMTYgc2FsdCkgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICB2YXIgc3VibWlzc2lvbiA9IHN1Ym1pc3Npb25zW21zZy5zZW5kZXJdOw0KICAgICAgICBpZiAoc2hhMyhtc2cuc2VuZGVyLCBicmFja2V0LCBzYWx0KSAhPSBzdWJtaXNzaW9uLmNvbW1pdG1lbnQpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN1Ym1pc3Npb24uYnJhY2tldCA9IGJyYWNrZXQ7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNjb3JlQnJhY2tldChhZGRyZXNzIGFjY291bnQpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgaWYgKHJlc3VsdHMgPT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmIChub3cgPj0gY29udGVzdE92ZXJUaW1lKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgc3VibWlzc2lvbiA9IHN1Ym1pc3Npb25zW2FjY291bnRdOw0KICAgICAgICBpZiAoc3VibWlzc2lvbi5icmFja2V0ID09IDApIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoc3VibWlzc2lvbi5zY29yZSAhPSAwKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBzdWJtaXNzaW9uLnNjb3JlID0gQnl0ZUJyYWNrZXQuZ2V0QnJhY2tldFNjb3JlKHN1Ym1pc3Npb24uYnJhY2tldCwgcmVzdWx0cywgc2NvcmluZ01hc2spOw0KDQogICAgICAgIGlmIChzdWJtaXNzaW9uLnNjb3JlID4gd2lubmluZ1Njb3JlKSB7DQogICAgICAgICAgICB3aW5uaW5nU2NvcmUgPSBzdWJtaXNzaW9uLnNjb3JlOw0KICAgICAgICAgICAgbnVtV2lubmVycyA9IDA7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHN1Ym1pc3Npb24uc2NvcmUgPT0gd2lubmluZ1Njb3JlKSB7DQogICAgICAgICAgICBudW1XaW5uZXJzKys7DQogICAgICAgICAgICB3aW5uaW5ncyA9IHRoaXMuYmFsYW5jZSAvIG51bVdpbm5lcnM7DQogICAgICAgICAgICBOZXdXaW5uZXIoYWNjb3VudCwgc3VibWlzc2lvbi5zY29yZSk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjb2xsZWN0V2lubmluZ3MoKSByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmIChub3cgPCBjb250ZXN0T3ZlclRpbWUpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBzdWJtaXNzaW9uID0gc3VibWlzc2lvbnNbbXNnLnNlbmRlcl07DQogICAgICAgIGlmIChzdWJtaXNzaW9uLnNjb3JlICE9IHdpbm5pbmdTY29yZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmIChzdWJtaXNzaW9uLmNvbGxlY3RlZFdpbm5pbmdzKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBzdWJtaXNzaW9uLmNvbGxlY3RlZFdpbm5pbmdzID0gdHJ1ZTsNCg0KICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZCh3aW5uaW5ncykpIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY29sbGVjdEVudHJ5RmVlKCkgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICBpZiAobm93IDwgbm9Db250ZXN0VGltZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmIChyZXN1bHRzICE9IDApIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBzdWJtaXNzaW9uID0gc3VibWlzc2lvbnNbbXNnLnNlbmRlcl07DQogICAgICAgIGlmIChzdWJtaXNzaW9uLmNvbW1pdG1lbnQgPT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmIChzdWJtaXNzaW9uLmNvbGxlY3RlZEVudHJ5RmVlKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBzdWJtaXNzaW9uLmNvbGxlY3RlZEVudHJ5RmVlID0gdHJ1ZTsNCg0KICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChlbnRyeUZlZSkpIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0QnJhY2tldFNjb3JlKGJ5dGVzOCBicmFja2V0KSBjb25zdGFudCByZXR1cm5zICh1aW50OCkgew0KICAgICAgICBpZiAocmVzdWx0cyA9PSAwKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gQnl0ZUJyYWNrZXQuZ2V0QnJhY2tldFNjb3JlKGJyYWNrZXQsIHJlc3VsdHMsIHNjb3JpbmdNYXNrKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRCcmFja2V0KGFkZHJlc3MgYWNjb3VudCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXM4KSB7DQogICAgICAgIHJldHVybiBzdWJtaXNzaW9uc1thY2NvdW50XS5icmFja2V0Ow0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFNjb3JlKGFkZHJlc3MgYWNjb3VudCkgY29uc3RhbnQgcmV0dXJucyAodWludDgpIHsNCiAgICAgICAgcmV0dXJuIHN1Ym1pc3Npb25zW2FjY291bnRdLnNjb3JlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldENvbW1pdG1lbnQoYWRkcmVzcyBhY2NvdW50KSBjb25zdGFudCByZXR1cm5zIChieXRlczMyKSB7DQogICAgICAgIHJldHVybiBzdWJtaXNzaW9uc1thY2NvdW50XS5jb21taXRtZW50Ow0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGhhc0NvbGxlY3RlZFdpbm5pbmdzKGFkZHJlc3MgYWNjb3VudCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICByZXR1cm4gc3VibWlzc2lvbnNbYWNjb3VudF0uY29sbGVjdGVkV2lubmluZ3M7DQogICAgfQ0KfQ=='