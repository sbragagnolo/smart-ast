base 64 content
base64metrumcoinShares
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQoNCi8vIE1ldHJ1bWNvaW4gTHRkLiB3d3cubWV0cnVtY29pbi5jb20gDQoNCi8vICdpbnRlcmZhY2UnOg0KLy8gIHRoaXMgaXMgZXhwZWN0ZWQgZnJvbSBhbm90aGVyIGNvbnRyYWN0LA0KLy8gIGlmIGl0IHdhbnRzIHRvIHNwZW5kIHRva2VucyAoc2hhcmVzKSBvZiBiZWhhbGYgb2YgdGhlIHRva2VuIG93bmVyDQovLyAgaW4gb3VyIGNvbnRyYWN0DQpjb250cmFjdCB0b2tlblJlY2lwaWVudCB7DQogICAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIC8vIHNoYXJlaG9kZXINCiAgICB1aW50MjU2IF92YWx1ZSwgLy8gbnVtYmVyIG9mIHNoYXJlcw0KICAgIGFkZHJlc3MgX3NoYXJlLCAvLyAtIHdpbGwgYmUgdGhpcyBjb250cmFjdA0KICAgIGJ5dGVzIF9leHRyYURhdGEpOyAvLw0KfQ0KDQoNCmNvbnRyYWN0IE1ldHJ1bWNvaW5TaGFyZXMgew0KDQogICAgLyogU3RhbmRhcmQgcHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8NCg0KICAgIC8vIHN0cmluZyBwdWJsaWMgc3RhbmRhcmQgPSAnRVJDMjAgVG9rZW4nOyAvLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjANCg0KICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJNZXRydW1jb2luIEx0ZC4iOw0KDQogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiU2hhcmVzIjsNCg0KICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDA7DQoNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDUwMDAwOw0KDQogICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLSBDb3Jwb3JhdGUgU3RvY2sgTGVkZ2VyIC0tLS0tLS0tLS0gKi8NCiAgICAvLyBTaGFyZXMsIHNoYXJlaG9sZGVycywgYmFsYW5jZXMgZWN0Lg0KDQogICAgLy8gbGlzdCBvZiBhbGwgc2hhcmVob2xkZXJzIChyZXByZXNlbnRlZCBieSBFdGhlcmV1bSBhY2NvdW50cykNCiAgICAvLyBpbiB0aGlzIENvcnBvcmF0aW9uJ3MgaGlzdG9yeSwgIyBpcyBJRA0KICAgIGFkZHJlc3NbXSBwdWJsaWMgc2hhcmVob2xkZXI7DQoNCiAgICAvLyB0aGlzIGhlbHBzIHRvIGZpbmQgYWRkcmVzcyBieSBJRCB3aXRob3V0IGxvb3ANCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBzaGFyZWhvbGRlcklEOw0KDQogICAgLy8gbGlzdCBvZiBhZGRyZXNzZXMsIHdobyBjdXJyZW50bHkgb3duIGF0IGxlYXN0IG9uZSBzaGFyZQ0KICAgIGFkZHJlc3NbXSBwdWJsaWMgYWN0aXZlU2hhcmVob2xkZXJzQXJyYXk7DQoNCiAgICAvLyBtYWtlcyBwb3NzaWJsZSB0byBpdGVyYXRlIHRocm91Z2ggYW4gYXJyYXkgZnJvbSBEYXBwDQogICAgdWludDI1NiBwdWJsaWMgYWN0aXZlU2hhcmVob2xkZXJzQXJyYXlMZW5ndGg7DQoNCiAgICAvLyBiYWxhbmNlczoNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7DQoNCiAgICAvLyBzaGFyZXMgdGhhdCBoYXZlIHRvIGJlIG1hbmFnZWQgYnkgZXh0ZXJuYWwgY29udHJhY3QNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2FuY2U7DQoNCiAgICAvKiAtLS0tLS0tIFV0aWxpdGllczogICovDQogICAgLy8gdW5pdmVyc2FsIGV2ZW50cw0KICAgIGV2ZW50IFJlc3VsdChhZGRyZXNzIHRyYW5zYWN0aW9uSW5pdGlhdGVkQnksIHN0cmluZyBtZXNzYWdlKTsNCg0KICAgIGV2ZW50IE1lc3NhZ2Uoc3RyaW5nIG1lc3NhZ2UpOw0KDQogICAgLyogIC0tLS0tLS0tLS0tLS0tLSBDb25zdHJ1Y3RvciAtLS0tLS0tLS0gKi8NCiAgICAvLyBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QNCiAgICBmdW5jdGlvbiBNZXRydW1jb2luU2hhcmVzKCkgey8vIC0gdHJ1ZmZsZSBjb21waWxlcyBvbmx5IG5vIGFyZ3MgQ29uc3RydWN0b3INCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7DQogICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIGluaXRpYWwNCiAgICAgICAgLy8gLS0gc3RhcnQgY29ycG9yYXRlIHN0b2NrIGxlZGdlcg0KICAgICAgICAvLyAocHVzaCAtIHJldHVybnMgdGhlIG5ldyBsZW5ndGgpOw0KICAgICAgICBzaGFyZWhvbGRlcklEW3RoaXNdID0gc2hhcmVob2xkZXIucHVzaCh0aGlzKSAtIDE7DQogICAgICAgIC8vICMgMA0KICAgICAgICBzaGFyZWhvbGRlcklEW21zZy5zZW5kZXJdID0gc2hhcmVob2xkZXIucHVzaChtc2cuc2VuZGVyKSAtIDE7DQogICAgICAgIC8vICMxDQogICAgICAgIGFjdGl2ZVNoYXJlaG9sZGVyc0FycmF5LnB1c2gobXNnLnNlbmRlcik7DQogICAgICAgIC8vIGFkZCB0byBhY3RpdmUgc2hhcmVob2xkZXJzDQogICAgICAgIC8vIHVwZGF0ZSBBY3RpdmVTaGFyZWhvbGRlcnNBcnJheSAoYXJyYXkgb2Ygc2hhcmVob2xkZXJzIGhhdmluZyBhdCBsZWFzdCBvbmUgc2hhcmUpDQogICAgICAgIHJlZnJlc2hBY3RpdmVTaGFyZWhvbGRlcnNBcnJheSgpOw0KDQogICAgfQ0KDQogICAgLyogLS0tLS0tLS0tLS0tLS0tIFNoYXJlcyBtYW5hZ2VtZW50IC0tLS0tLSAqLw0KDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7DQoNCiAgICBmdW5jdGlvbiByZWZyZXNoQWN0aXZlU2hhcmVob2xkZXJzQXJyYXkoKSByZXR1cm5zIChhZGRyZXNzW10pIHsNCiAgICAgICAgZGVsZXRlIGFjdGl2ZVNoYXJlaG9sZGVyc0FycmF5Ow0KICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBzaGFyZWhvbGRlci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYgKGJhbGFuY2VPZltzaGFyZWhvbGRlcltpXV0gPiAwKSB7DQogICAgICAgICAgICAgICAgYWN0aXZlU2hhcmVob2xkZXJzQXJyYXkucHVzaChzaGFyZWhvbGRlcltpXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgYWN0aXZlU2hhcmVob2xkZXJzQXJyYXlMZW5ndGggPSBhY3RpdmVTaGFyZWhvbGRlcnNBcnJheS5sZW5ndGg7DQogICAgICAgIHJldHVybiBhY3RpdmVTaGFyZWhvbGRlcnNBcnJheTsNCiAgICB9DQoNCiAgICAvLyBjb25zdGFudA0KICAgIGZ1bmN0aW9uIGdldFNoYXJlaG9sZGVyQXJyYXkoKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzW10pew0KICAgICAgICByZXR1cm4gc2hhcmVob2xkZXI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0U2hhcmVob2xkZXJBcnJheUxlbmd0aCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpew0KICAgICAgICByZXR1cm4gc2hhcmVob2xkZXIubGVuZ3RoOw0KICAgIH0NCg0KICAgIC8qIC0tLS0gVHJhbnNmZXIgc2hhcmVzIHRvIGFub3RoZXIgYWRkcmVzcyAtLS0tKi8NCiAgICAvLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIC8vIGNoZWNrIGFyZ3VtZW50czoNCiAgICAgICAgaWYgKF92YWx1ZSA8IDEpIHRocm93Ow0KICAgICAgICBpZiAodGhpcyA9PSBfdG8pIHRocm93Ow0KICAgICAgICAvLyBkbyBub3Qgc2VuZCBzaGFyZXMgdG8gY29udHJhY3QgaXRzZWxmOw0KICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB0aHJvdzsNCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoDQoNCiAgICAgICAgLy8gbWFrZSB0cmFuc2FjdGlvbg0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXINCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOw0KICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudA0KDQogICAgICAgIC8vIGlmIG5ldyBhZGRyZXNzLCBhZGQgaXQgdG8gc2hhcmVob2xkZXJzIGhpc3RvcnkgKHN0b2NrIGxlZGdlcik6DQogICAgICAgIGlmIChzaGFyZWhvbGRlcklEW190b10gPT0gMCkgey8vIC0tLS0tLS0tLS0tIGNoZWNrIGlmIHdvcmtzDQogICAgICAgICAgICBzaGFyZWhvbGRlcklEW190b10gPSBzaGFyZWhvbGRlci5wdXNoKF90bykgLSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gdXBkYXRlIEFjdGl2ZVNoYXJlaG9sZGVyc0FycmF5IChhcnJheSBvZiBzaGFyZWhvbGRlcnMgaGF2aW5nIGF0IGxlYXN0IG9uZSBzaGFyZSkNCiAgICAgICAgcmVmcmVzaEFjdGl2ZVNoYXJlaG9sZGVyc0FycmF5KCk7DQoNCiAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UNCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgIH0gLy8gZW5kIG9mIHRyYW5zZmVyKCkNCg0KICAgIC8qIEFsbG93IGFub3RoZXIgY29udHJhY3QgdG8gc3BlbmQgc29tZSBzaGFyZXMgaW4geW91ciBiZWhhbGYNCiAgICAoc2hhcmVob2xkZXIgY2FsbHMgdGhpcykgKi8NCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCAvLyBhbm90aGVyIGNvbnRyYWN0J3MgYWRyZXNzDQogICAgdWludDI1NiBfdmFsdWUsIC8vIG51bWJlciBvZiBzaGFyZXMNCiAgICBieXRlcyBfZXh0cmFEYXRhKSAvLyBkYXRhIGZvciBhbm90aGVyIGNvbnRyYWN0DQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIC8vIG1zZy5zZW5kZXIgLSBhY2NvdW50IG93bmVyIHdobyBnaXZlcyBhbGxvd2FuY2UNCiAgICAgICAgLy8gX3NwZW5kZXIgICAtIGFkZHJlc3Mgb2YgYW5vdGhlciBjb250cmFjdA0KICAgICAgICAvLyBpdCB3cml0ZXMgaW4gImFsbG93YW5jZSIgdGhhdCB0aGlzIG93bmVyIGFsbG93cyBhbm90aGVyDQogICAgICAgIC8vIGNvbnRyYWN0IChfc3BlbmRlcikgdG8gc3BlbmQgdGhpcyBhbW91bnQgKF92YWx1ZSkgb2Ygc2hhcmVzDQogICAgICAgIC8vIGluIGhpcyBiZWhhbGYNCiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICAgICAgLy8gJ3NwZW5kZXInIGlzIGFub3RoZXIgY29udHJhY3QgdGhhdCBpbXBsZW1lbnRzIGNvZGUNCiAgICAgICAgLy8gIHByZXNjcmliZWQgaW4gJ3NoYXJlUmVjaXBpZW50JyBhYm92ZQ0KICAgICAgICB0b2tlblJlY2lwaWVudCBzcGVuZGVyID0gdG9rZW5SZWNpcGllbnQoX3NwZW5kZXIpOw0KICAgICAgICAvLyB0aGlzIGNvbnRyYWN0IGNhbGxzICdyZWNlaXZlQXBwcm92YWwnIGZ1bmN0aW9uDQogICAgICAgIC8vIG9mIGFub3RoZXIgY29udHJhY3QgdG8gc2VuZCBpbmZvcm1hdGlvbiBhYm91dA0KICAgICAgICAvLyBhbGxvd2FuY2UNCiAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgLy8gc2hhcmVzIG93bmVyDQogICAgICAgIF92YWx1ZSwgLy8gbnVtYmVyIG9mIHNoYXJlcw0KICAgICAgICB0aGlzLCAvLyB0aGlzIGNvbnRyYWN0J3MgYWRyZXNzDQogICAgICAgIF9leHRyYURhdGEpOw0KICAgICAgICAvLyBkYXRhIGZyb20gc2hhcmVzIG93bmVyDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qIHRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBmcm9tIGFub3RoZXIgY29udHJhY3QsIGFmdGVyIGl0DQogICAgaGF2ZSBhbGxvd2FuY2UgdG8gdHJhbnNmZXIgc2hhcmVzIGluIGJlaGFsZiBvZiBzaGFyZWhvbGRlciAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwNCiAgICBhZGRyZXNzIF90bywNCiAgICB1aW50MjU2IF92YWx1ZSkNCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCg0KICAgICAgICAvLyBDaGVjayBhcmd1bWVudHM6DQogICAgICAgIC8vIHNob3VsZCBvbmUgc2hhcmUgb3IgbW9yZQ0KICAgICAgICBpZiAoX3ZhbHVlIDwgMSkgdGhyb3c7DQogICAgICAgIC8vIGRvIG5vdCBzZW5kIHNoYXJlcyB0byB0aGlzIGNvbnRyYWN0IGl0c2VsZjsNCiAgICAgICAgaWYgKHRoaXMgPT0gX3RvKSB0aHJvdzsNCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoDQogICAgICAgIGlmIChiYWxhbmNlT2ZbX2Zyb21dIDwgX3ZhbHVlKSB0aHJvdzsNCg0KICAgICAgICAvLyBDaGVjayBhbGxvd2FuY2UNCiAgICAgICAgaWYgKF92YWx1ZSA+IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pIHRocm93Ow0KDQogICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcg0KICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsNCiAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQNCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOw0KDQogICAgICAgIC8vIENoYW5nZSBhbGxvd2FuY2VzIGNvcnJlc3BvbmRpbmdseQ0KICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCg0KICAgICAgICAvLyBpZiB0cmFuc2ZlciB0byBuZXcgYWRkcmVzcyAtLSBhZGQgaGltIHRvIGxlZGdlcg0KICAgICAgICBpZiAoc2hhcmVob2xkZXJJRFtfdG9dID09IDApIHsNCiAgICAgICAgICAgIHNoYXJlaG9sZGVySURbX3RvXSA9IHNoYXJlaG9sZGVyLnB1c2goX3RvKSAtIDE7DQogICAgICAgICAgICAvLyBwdXNoIGZ1bmN0aW9uIHJldHVybnMgdGhlIG5ldyBsZW5ndGgNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIHVwZGF0ZSBBY3RpdmVTaGFyZWhvbGRlcnNBcnJheSAoYXJyYXkgb2Ygc2hhcmVob2xkZXJzIGhhdmluZyBhdCBsZWFzdCBvbmUgc2hhcmUpDQogICAgICAgIHJlZnJlc2hBY3RpdmVTaGFyZWhvbGRlcnNBcnJheSgpOw0KDQogICAgICAgIC8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyB0cmFuc2ZlciB0b29rIHBsYWNlDQogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyogIC0tLS0tLS0tLSBWb3RpbmcgIC0tLS0tLS0tLS0tLS0tICAqLw0KICAgIC8vIHdlIG9ubHkgY291bnQgJ3llcycgdm90ZXMsIG5vdCB2b3RpbmcgJ3llcycNCiAgICAvLyBjb25zaWRlcmVkIGFzIHZvdGluZyAnbm8nIChhcyBzdGF0ZWQgaW4gQnlsYXdzKQ0KDQogICAgLy8gZWFjaCBwcm9wb3NhbCBzaG91bGQgY29udGFpbiBpdCdzIHRleHQNCiAgICAvLyBpbmRleCBvZiB0ZXh0IGluIHRoaXMgYXJyYXkgaXMgYSBwcm9wb3NhbCBJRA0KICAgIHN0cmluZ1tdIHB1YmxpYyBwcm9wb3NhbFRleHQ7DQoNCiAgICAvLyBwcm9wb3NhbElEID0+IChzaGFyZWhvbGRlciA9PiAiaWYgYWxyZWFkeSB2b3RlZCBmb3IgdGhpcyBwcm9wb3NhbCIpDQogICAgbWFwcGluZyAodWludDI1NiA9PiBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpKSB2b3RlZDsNCg0KICAgIC8vIHByb3Bvc2FsSUQgPT4gYWRkcmVzc2VzIHZvdGVkICd5ZXMnDQogICAgLy8gZXhhY3QgbnVtYmVyIG9mIHZvdGVzIGFjY29yZGluZyB0byBzaGFyZXMgd2lsbCBiZSBjb3VudGVkDQogICAgLy8gYWZ0ZXIgZGVhZGxpbmUNCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3NbXSkgcHVibGljIHZvdGVzOw0KDQogICAgLy8gcHJvcG9zYWxJRCA9PiBkZWFkbGluZQ0KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHVibGljIGRlYWRsaW5lOw0KDQogICAgLy8gcHJvcG9zYWxJRCA9PiBmaW5hbCAneWVzJyB2b3Rlcw0KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHVibGljIHJlc3VsdHM7DQoNCiAgICAvLyBwcm9wb3NhbHMgb2YgZXZlcnkgc2hhcmVob2xkZXINCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTZbXSkgcHVibGljIHByb3Bvc2Fsc0J5U2hhcmVob2xkZXI7DQoNCiAgICAvLyB1c2VmdWwgZm9yIERhcHAsIHRvIGdldCBhcnJheSB1c2luZyBsb29wDQogICAgZnVuY3Rpb24gZ2V0UHJvcG9zYWxUZXh0QXJyYXlMZW5ndGgoKSBjb25zdGFudCByZXR1cm5zICh1aW50KXsNCiAgICAgICAgcmV0dXJuIHByb3Bvc2FsVGV4dC5sZW5ndGg7DQogICAgfQ0KDQogICAgZXZlbnQgUHJvcG9zYWxBZGRlZCh1aW50MjU2IHByb3Bvc2FsSUQsDQogICAgYWRkcmVzcyBpbml0aWF0b3IsDQogICAgc3RyaW5nIGRlc2NyaXB0aW9uLA0KICAgIHVpbnQyNTYgZGVhZGxpbmUpOw0KDQogICAgZXZlbnQgVm90aW5nRmluaXNoZWQodWludDI1NiBwcm9wb3NhbElELCB1aW50MjU2IHZvdGVzKTsNCg0KICAgIGZ1bmN0aW9uIG1ha2VOZXdQcm9wb3NhbChzdHJpbmcgX3Byb3Bvc2FsRGVzY3JpcHRpb24sDQogICAgdWludDI1NiBfZGViYXRpbmdQZXJpb2RJbk1pbnV0ZXMpDQogICAgcmV0dXJucyAodWludDI1Nil7DQogICAgICAgIC8vIG9ubHkgc2hhcmVob2xkZXIgd2l0aCBvbmUgb3IgbW9yZSBzaGFyZXMgY2FuIG1ha2UgYSBwcm9wb3NhbA0KICAgICAgICAvLyAhISEhIGNhbiBiZSBtb3JlIHRoZW4gb25lIHNoYXJlIHJlcXVpcmVkDQogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCAxKSB0aHJvdzsNCg0KICAgICAgICBpZiAoX2RlYmF0aW5nUGVyaW9kSW5NaW51dGVzIDwgMSkgdGhyb3c7DQoNCiAgICAgICAgdWludDI1NiBpZCA9IHByb3Bvc2FsVGV4dC5wdXNoKF9wcm9wb3NhbERlc2NyaXB0aW9uKSAtIDE7DQogICAgICAgIGRlYWRsaW5lW2lkXSA9IG5vdyArIF9kZWJhdGluZ1BlcmlvZEluTWludXRlcyAqIDEgbWludXRlczsNCg0KICAgICAgICAvLyBhZGQgdG8gcHJvcG9zYWxzIG9mIHRoaXMgc2hhcmVob2xkZXI6DQogICAgICAgIHByb3Bvc2Fsc0J5U2hhcmVob2xkZXJbbXNnLnNlbmRlcl0ucHVzaChpZCk7DQoNCiAgICAgICAgLy8gaW5pdGlhdG9yIGFsd2F5cyB2b3RlcyAneWVzJw0KICAgICAgICB2b3Rlc1tpZF0ucHVzaChtc2cuc2VuZGVyKTsNCiAgICAgICAgdm90ZWRbaWRdW21zZy5zZW5kZXJdID0gdHJ1ZTsNCg0KICAgICAgICBQcm9wb3NhbEFkZGVkKGlkLCBtc2cuc2VuZGVyLCBfcHJvcG9zYWxEZXNjcmlwdGlvbiwgZGVhZGxpbmVbaWRdKTsNCg0KICAgICAgICByZXR1cm4gaWQ7DQogICAgICAgIC8vIHJldHVybnMgcHJvcG9zYWwgaWQNCiAgICB9DQoNCiAgICAvLyA+Pj4gbm90IGZyb20gV2FsbGV0IChuZWVkcyBtc2cuc2VuZGVyKSwgZnJvbSBEYXBwDQogICAgZnVuY3Rpb24gZ2V0TXlQcm9wb3NhbHMoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2W10pew0KICAgICAgICByZXR1cm4gcHJvcG9zYWxzQnlTaGFyZWhvbGRlclttc2cuc2VuZGVyXTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB2b3RlRm9yUHJvcG9zYWwodWludDI1NiBfcHJvcG9zYWxJRCkgcmV0dXJucyAoc3RyaW5nKSB7DQoNCiAgICAgICAgLy8gaWYgbm8gc2hhcmVzIGN1cnJlbnRseSBvd25lZCAtIG5vIHJpZ2h0IHRvIHZvdGUNCiAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IDEpIHJldHVybiAibm8gc2hhcmVzLCB2b3RlIG5vdCBhY2NlcHRlZCI7DQoNCiAgICAgICAgLy8gaWYgYWxyZWFkeSB2b3RlZCAtIHRocm93LCBlbHNlIHZvdGluZyBjYW4gYmUgc3BhbW1lZA0KICAgICAgICBpZiAodm90ZWRbX3Byb3Bvc2FsSURdW21zZy5zZW5kZXJdKSB7DQogICAgICAgICAgICByZXR1cm4gImFscmVhZHkgdm90ZWQsIHZvdGUgbm90IGFjY2VwdGVkIjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIG5vIHZvdGVzIGFmdGVyIGRlYWRsaW5lDQogICAgICAgIGlmIChub3cgPiBkZWFkbGluZVtfcHJvcG9zYWxJRF0pIHsNCiAgICAgICAgICAgIHJldHVybiAidm90ZSBub3QgYWNjZXB0ZWQgYWZ0ZXIgZGVhZGxpbmUiOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gYWRkIHRvIGxpc3Qgb2Ygdm90ZWQgJ3llcycNCiAgICAgICAgdm90ZXNbX3Byb3Bvc2FsSURdLnB1c2gobXNnLnNlbmRlcik7DQogICAgICAgIHZvdGVkW19wcm9wb3NhbElEXVttc2cuc2VuZGVyXSA9IHRydWU7DQogICAgICAgIHJldHVybiAidm90ZSBhY2NlcHRlZCI7DQogICAgfQ0KDQogICAgLy8gdG8gY291bnQgdm90ZXMgdGhpcyB0cmFuc2FjdGlvbiBzaG91bGQgYmUgc3RhcnRlZCBtYW51YWxseQ0KICAgIC8vIGZyb20gX2FueV8gRXRoZXJldW0gYWRkcmVzcyBhZnRlciBkZWFkbGluZQ0KICAgIGZ1bmN0aW9uIGNvdW50Vm90ZXModWludDI1NiBfcHJvcG9zYWxJRCkgcmV0dXJucyAodWludDI1Nil7DQoNCiAgICAgICAgLy8gaWYgbm90IGFmdGVyIGRlYWRsaW5lIC0gdGhyb3cNCiAgICAgICAgaWYgKG5vdyA8IGRlYWRsaW5lW19wcm9wb3NhbElEXSkgdGhyb3c7DQoNCiAgICAgICAgLy8gaWYgYWxyZWFkeSBjb3VudGVkIHJldHVybiByZXN1bHQ7DQogICAgICAgIGlmIChyZXN1bHRzW19wcm9wb3NhbElEXSA+IDApIHJldHVybiByZXN1bHRzW19wcm9wb3NhbElEXTsNCg0KICAgICAgICAvLyBlbHNlIHNob3VsZCBjb3VudCByZXN1bHRzIGFuZCBzdG9yZSBpbiBwdWJsaWMgdmFyaWFibGUNCiAgICAgICAgdWludDI1NiByZXN1bHQgPSAwOw0KICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCB2b3Rlc1tfcHJvcG9zYWxJRF0ubGVuZ3RoOyBpKyspIHsNCg0KICAgICAgICAgICAgYWRkcmVzcyB2b3RlciA9IHZvdGVzW19wcm9wb3NhbElEXVtpXTsNCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIGJhbGFuY2VPZlt2b3Rlcl07DQogICAgICAgIH0NCiAgICAgICAgLy8gLS0tLS0+Pj4gISEhIGltcG9ydGFudA0KICAgICAgICAvLyBzdG9yZSByZXN1bHQNCiAgICAgICAgcmVzdWx0c1tfcHJvcG9zYWxJRF0gPSByZXN1bHQ7DQoNCiAgICAgICAgLy8gTG9nIGFuZCBub3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdm90aW5nIGZpbmlzaGVkDQogICAgICAgIC8vIHdpdGggJ3Jlc3VsdCcgLSBudW1iZXIgb2YgJ3llcycgdm90ZXMNCiAgICAgICAgVm90aW5nRmluaXNoZWQoX3Byb3Bvc2FsSUQsIHJlc3VsdCk7DQoNCiAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICB9DQoNCn0='