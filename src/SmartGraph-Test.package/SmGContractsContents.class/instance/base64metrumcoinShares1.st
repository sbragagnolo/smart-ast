base 64 content
base64metrumcoinShares1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQoNCi8vIE1ldHJ1bUNvaW4gTHRkLiBDcnlwdG9TaGFyZXMNCg0KLy8gJ2ludGVyZmFjZSc6DQovLyAgdGhpcyBpcyBleHBlY3RlZCBmcm9tIGFub3RoZXIgY29udHJhY3QsDQovLyAgaWYgaXQgd2FudHMgdG8gc3BlbmQgdG9rZW5zIChzaGFyZXMpIG9mIGJlaGFsZiBvZiB0aGUgdG9rZW4gb3duZXINCi8vICBpbiBvdXIgY29udHJhY3QNCmNvbnRyYWN0IHRva2VuUmVjaXBpZW50IHsNCiAgICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgLy8gc2hhcmVob2Rlcg0KICAgIHVpbnQyNTYgX3ZhbHVlLCAvLyBudW1iZXIgb2Ygc2hhcmVzDQogICAgYWRkcmVzcyBfc2hhcmUsIC8vIC0gd2lsbCBiZSB0aGlzIGNvbnRyYWN0DQogICAgYnl0ZXMgX2V4dHJhRGF0YSk7IC8vDQp9DQoNCg0KY29udHJhY3QgTWV0cnVtY29pblNoYXJlcyB7DQoNCiAgICAvKiBTdGFuZGFyZCBwdWJsaWMgdmFyaWFibGVzIG9mIHRoZSB0b2tlbiAqLw0KDQogICAgLy8gc3RyaW5nIHB1YmxpYyBzdGFuZGFyZCA9ICdFUkMyMCBUb2tlbic7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KDQogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIk1ldHJ1bWNvaW4gU2hhcmVzIjsNCg0KICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIk1ldHJ1bWNvaW4gU2hhcmVzIjsNCg0KICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDA7DQoNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDUwMDAwOw0KDQogICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLSBDb3Jwb3JhdGUgU3RvY2sgTGVkZ2VyIC0tLS0tLS0tLS0gKi8NCiAgICAvLyBTaGFyZXMsIHNoYXJlaG9sZGVycywgYmFsYW5jZXMgZWN0Lg0KDQogICAgLy8gbGlzdCBvZiBhbGwgc2hhcmVob2xkZXJzIChyZXByZXNlbnRlZCBieSBFdGhlcmV1bSBhY2NvdW50cykNCiAgICAvLyBpbiB0aGlzIENvcnBvcmF0aW9uJ3MgaGlzdG9yeSwgIyBpcyBJRA0KICAgIGFkZHJlc3NbXSBwdWJsaWMgc2hhcmVob2xkZXI7DQogICAgLy8gdGhpcyBoZWxwcyB0byBmaW5kIGFkZHJlc3MgYnkgSUQgd2l0aG91dCBsb29wDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgc2hhcmVob2xkZXJJRDsNCiAgICAvLyBsaXN0IG9mIGFkcmVzc2VzLCB0aGF0IHdobyBjdXJyZW50bHkgb3duIGF0IGxlYXN0IG9uZSBzaGFyZQ0KICAgIGFkZHJlc3NbXSBwdWJsaWMgYWN0aXZlU2hhcmVob2xkZXJzQXJyYXk7DQogICAgLy8gYmFsYW5jZXM6DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOw0KICAgIC8vIHNoYXJlcyB0aGF0IGhhdmUgdG8gYmUgbWFuYWdlZCBieSBleHRlcm5hbCBjb250cmFjdA0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsNCg0KICAgIC8qIC0tLS0tLS0gVXRpbGl0aWVzOiAgKi8NCiAgICAvLyB1bml2ZXJzYWwgZXZlbnRzDQogICAgZXZlbnQgUmVzdWx0KGFkZHJlc3MgdHJhbnNhY3Rpb25Jbml0aWF0ZWRCeSwgc3RyaW5nIG1lc3NhZ2UpOw0KDQogICAgZXZlbnQgTWVzc2FnZShzdHJpbmcgbWVzc2FnZSk7DQoNCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tIENvbnN0cnVjdG9yIC0tLS0tLS0tLSAqLw0KICAgIC8vIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdA0KICAgIGZ1bmN0aW9uIE1ldHJ1bWNvaW5TaGFyZXMoKSB7Ly8gLSB0cnVmZmxlIGNvbXBpbGVzIG9ubHkgbm8gYXJncyBDb25zdHJ1Y3Rvcg0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSB0b3RhbFN1cHBseTsNCiAgICAgICAgLy8gR2l2ZSB0aGUgY3JlYXRvciBhbGwgaW5pdGlhbA0KICAgICAgICAvLyAtLSBzdGFydCBjb3Jwb3JhdGUgc3RvY2sgbGVkZ2VyDQogICAgICAgIC8vIChwdXNoIC0gcmV0dXJucyB0aGUgbmV3IGxlbmd0aCk7DQogICAgICAgIHNoYXJlaG9sZGVySURbdGhpc10gPSBzaGFyZWhvbGRlci5wdXNoKHRoaXMpIC0gMTsNCiAgICAgICAgLy8gIyAwDQogICAgICAgIHNoYXJlaG9sZGVySURbbXNnLnNlbmRlcl0gPSBzaGFyZWhvbGRlci5wdXNoKG1zZy5zZW5kZXIpIC0gMTsNCiAgICAgICAgLy8gIzENCiAgICAgICAgYWN0aXZlU2hhcmVob2xkZXJzQXJyYXkucHVzaChtc2cuc2VuZGVyKTsNCiAgICAgICAgLy8gYWRkIHRvIGFjdGl2ZSBzaGFyZWhvbGRlcnMNCiAgICB9DQoNCiAgICAvKiAtLS0tLS0tLS0tLS0tLS0gU2hhcmVzIG1hbmFnZW1lbnQgLS0tLS0tICovDQoNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsNCg0KICAgIGZ1bmN0aW9uIHJlZnJlc2hBY3RpdmVTaGFyZWhvbGRlcnNBcnJheSgpIHJldHVybnMgKGFkZHJlc3NbXSkgew0KICAgICAgICBkZWxldGUgYWN0aXZlU2hhcmVob2xkZXJzQXJyYXk7DQogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IHNoYXJlaG9sZGVyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAoYmFsYW5jZU9mW3NoYXJlaG9sZGVyW2ldXSA+IDApIHsNCiAgICAgICAgICAgICAgICBhY3RpdmVTaGFyZWhvbGRlcnNBcnJheS5wdXNoKHNoYXJlaG9sZGVyW2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gYWN0aXZlU2hhcmVob2xkZXJzQXJyYXk7DQogICAgfQ0KDQogICAgLy8gY29uc3RhbnQNCiAgICBmdW5jdGlvbiBnZXRBY3RpdmVTaGFyZWhvbGRlcnNBcnJheSgpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3NbXSl7DQogICAgICAgIHJldHVybiBhY3RpdmVTaGFyZWhvbGRlcnNBcnJheTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRBY3RpdmVTaGFyZWhvbGRlcnNBcnJheUxlbmd0aCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpew0KICAgICAgICByZXR1cm4gYWN0aXZlU2hhcmVob2xkZXJzQXJyYXkubGVuZ3RoOw0KICAgIH0NCg0KICAgIC8vIGNvbnN0YW50DQogICAgZnVuY3Rpb24gZ2V0U2hhcmVob2xkZXJBcnJheSgpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3NbXSl7DQogICAgICAgIHJldHVybiBzaGFyZWhvbGRlcjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRTaGFyZWhvbGRlckFycmF5TGVuZ3RoKCkgY29uc3RhbnQgcmV0dXJucyAodWludCl7DQogICAgICAgIHJldHVybiBzaGFyZWhvbGRlci5sZW5ndGg7DQogICAgfQ0KDQogICAgLyogLS0tLSBUcmFuc2ZlciBzaGFyZXMgdG8gYW5vdGhlciBhZHJlc3MgLS0tLSovDQogICAgLy8gc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjANCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICAvLyBjaGVjayBhcmd1bWVudHM6DQogICAgICAgIGlmIChfdmFsdWUgPCAxKSB0aHJvdzsNCiAgICAgICAgaWYgKHRoaXMgPT0gX3RvKSB0aHJvdzsNCiAgICAgICAgLy8gZG8gbm90IHNlbmQgc2hhcmVzIHRvIGNvbnRyYWN0IGl0c2VsZjsNCiAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IF92YWx1ZSkgdGhyb3c7DQogICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaA0KDQogICAgICAgIC8vIG1ha2UgdHJhbnNhY3Rpb24NCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyDQogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsNCiAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQNCg0KICAgICAgICAvLyBpZiBuZXcgYWRkcmVzcywgYWRkIGl0IHRvIHNoYXJlaG9sZGVycyBoaXN0b3J5IChzdG9jayBsZWRnZXIpOg0KICAgICAgICBpZiAoc2hhcmVob2xkZXJJRFtfdG9dID09IDApIHsvLyAtLS0tLS0tLS0tLSBjaGVjayBpZiB3b3Jrcw0KICAgICAgICAgICAgc2hhcmVob2xkZXJJRFtfdG9dID0gc2hhcmVob2xkZXIucHVzaChfdG8pIC0gMTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBOb3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdHJhbnNmZXIgdG9vayBwbGFjZQ0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KDQogICAgfSAvLyBlbmQgb2YgdHJhbnNmZXIoKQ0KDQogICAgLyogQWxsb3cgYW5vdGhlciBjb250cmFjdCB0byBzcGVuZCBzb21lIHNoYXJlcyBpbiB5b3VyIGJlaGFsZg0KICAgIChzaGFyZWhvbGRlciBjYWxscyB0aGlzKSAqLw0KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIC8vIGFub3RoZXIgY29udHJhY3QncyBhZHJlc3MNCiAgICB1aW50MjU2IF92YWx1ZSwgLy8gbnVtYmVyIG9mIHNoYXJlcw0KICAgIGJ5dGVzIF9leHRyYURhdGEpIC8vIGRhdGEgZm9yIGFub3RoZXIgY29udHJhY3QNCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgLy8gbXNnLnNlbmRlciAtIGFjY291bnQgb3duZXIgd2hvIGdpdmVzIGFsbG93YW5jZQ0KICAgICAgICAvLyBfc3BlbmRlciAgIC0gYWRkcmVzcyBvZiBhbm90aGVyIGNvbnRyYWN0DQogICAgICAgIC8vIGl0IHdyaXRlcyBpbiAiYWxsb3dhbmNlIiB0aGF0IHRoaXMgb3duZXIgYWxsb3dzIGFub3RoZXINCiAgICAgICAgLy8gY29udHJhY3QgKF9zcGVuZGVyKSB0byBzcGVuZCB0aGkgYW1vbnQgKF92YWx1ZSkgb2Ygc2hhcmVzDQogICAgICAgIC8vIGluIGhpcyBiZWhhbGYNCiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICAgICAgLy8gJ3NwZW5kZXInIGlzIGFub3RoZXIgY29udHJhY3QgdGhhdCBpbXBsZW1lbnRzIGNvZGUNCiAgICAgICAgLy8gIHByZXNjcmliZWQgaW4gJ3NoYXJlUmVjaXBpZW50JyBhYm92ZQ0KICAgICAgICB0b2tlblJlY2lwaWVudCBzcGVuZGVyID0gdG9rZW5SZWNpcGllbnQoX3NwZW5kZXIpOw0KICAgICAgICAvLyB0aGlzIGNvbnRyYWN0IGNhbGxzICdyZWNlaXZlQXBwcm92YWwnIGZ1bmN0aW9uDQogICAgICAgIC8vIG9mIGFub3RoZXIgY29udHJhY3QgdG8gc2VuZCBpbmZvcm1hdGlvbiBhYm91dA0KICAgICAgICAvLyBhbGxvd2FuY2UNCiAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgLy8gc2hhcmVzIG93bmVyDQogICAgICAgIF92YWx1ZSwgLy8gbnVtYmVyIG9mIHNoYXJlcw0KICAgICAgICB0aGlzLCAvLyB0aGlzIGNvbnRyYWN0J3MgYWRyZXNzDQogICAgICAgIF9leHRyYURhdGEpOw0KICAgICAgICAvLyBkYXRhIGZyb20gc2hhcmVzIG93bmVyDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qIHRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBmcm9tIGFub3RoZXIgY29udHJhY3QsIGFmdGVyIGl0DQogICAgaGF2ZSBhbGxvd2FuY2UgdG8gdHJhbnNmZXIgc2hhcmVzIGluIGJlaGFsZiBvZiBzaGFyZWhvbGRlciAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwNCiAgICBhZGRyZXNzIF90bywNCiAgICB1aW50MjU2IF92YWx1ZSkNCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCg0KICAgICAgICAvLyBDaGVjayBhcmd1bWVudHM6DQogICAgICAgIC8vIHNob3VsZCBvbmUgc2hhcmUgb3IgbW9yZQ0KICAgICAgICBpZiAoX3ZhbHVlIDwgMSkgdGhyb3c7DQogICAgICAgIC8vIGRvIG5vdCBzZW5kIHNoYXJlcyB0byB0aGlzIGNvbnRyYWN0IGl0c2VsZjsNCiAgICAgICAgaWYgKHRoaXMgPT0gX3RvKSB0aHJvdzsNCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoDQogICAgICAgIGlmIChiYWxhbmNlT2ZbX2Zyb21dIDwgX3ZhbHVlKSB0aHJvdzsNCg0KICAgICAgICAvLyBDaGVjayBhbGxvd2FuY2UNCiAgICAgICAgaWYgKF92YWx1ZSA+IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pIHRocm93Ow0KDQogICAgICAgIC8vIGlmIHRyYW5zZmVyIHRvIG5ldyBhZGRyZXNzIC0tIGFkZCBoaW0gdG8gbGVkZ2VyDQogICAgICAgIGlmIChzaGFyZWhvbGRlcklEW190b10gPT0gMCkgew0KICAgICAgICAgICAgc2hhcmVob2xkZXJJRFtfdG9dID0gc2hhcmVob2xkZXIucHVzaChfdG8pIC0gMTsNCiAgICAgICAgICAgIC8vIHB1c2ggZnVuY3Rpb24gcmV0dXJucyB0aGUgbmV3IGxlbmd0aA0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyDQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOw0KICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudA0KICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7DQoNCiAgICAgICAgLy8gQ2hhbmdlIGFsbG93YW5jZXMgY29ycmVzcG9uZGluZ2x5DQogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICAvLyBOb3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdHJhbnNmZXIgdG9vayBwbGFjZQ0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qICAtLS0tLS0tLS0gVm90aW5nICAtLS0tLS0tLS0tLS0tLSAgKi8NCiAgICAvLyB3ZSBvbmx5IGNvdW50ICd5ZXMnIHZvdGVzLCBub3Qgdm90aW5nICd5ZXMnDQogICAgLy8gY29uc2lkZXJlZCBhcyB2b3RpbmcgJ25vJyAoYXMgc3RhdGVkIGluIEJ5bGF3cykNCg0KICAgIC8vIGVhY2ggcHJvcG9zYWwgc2hvdWxkIGNvbnRhaW4gaXQncyB0ZXh0DQogICAgLy8gaW5kZXggb2YgdGV4dCBpbiB0aGlzIGFycmF5IGlzIGEgcHJvcG9zYWwgSUQNCiAgICBzdHJpbmdbXSBwdWJsaWMgcHJvcG9zYWxUZXh0Ow0KICAgIC8vIHByb3Bvc2FsSUQgPT4gKHNoYXJlaG9sZGVyID0+ICJpZiBhbHJlYWR5IHZvdGVkIGZvciB0aGlzIHByb3Bvc2FsIikNCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkpIHZvdGVkOw0KICAgIC8vIHByb3Bvc2FsSUQgPT4gYWRkcmVzc2VzIHZvdGVkICd5ZXMnDQogICAgLy8gZXhhY3QgbnVtYmVyIG9mIHZvdGVzIGFjY29yZGluZyB0byBzaGFyZXMgd2lsbCBiZSBjb3VudGVkDQogICAgLy8gYWZ0ZXIgZGVhZGxpbmUNCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3NbXSkgcHVibGljIHZvdGVzOw0KICAgIC8vIHByb3Bvc2FsSUQgPT4gZGVhZGxpbmUNCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHB1YmxpYyBkZWFkbGluZTsNCiAgICAvLyBwcm9wb3NhbElEID0+IGZpbmFsICd5ZXMnIHZvdGVzDQogICAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwdWJsaWMgcmVzdWx0czsNCiAgICAvLyBwcm9wb3NhbHMgb2YgZXZlcnkgc2hhcmVob2xkZXINCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTZbXSkgcHVibGljIHByb3Bvc2Fsc0J5U2hhcmVob2xkZXI7DQoNCiAgICBmdW5jdGlvbiBnZXRQcm9wb3NhbFRleHRBcnJheUxlbmd0aCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpew0KICAgICAgICByZXR1cm4gcHJvcG9zYWxUZXh0Lmxlbmd0aDsNCiAgICB9DQoNCiAgICBldmVudCBQcm9wb3NhbEFkZGVkKHVpbnQyNTYgcHJvcG9zYWxJRCwNCiAgICBhZGRyZXNzIGluaXRpYXRvciwNCiAgICBzdHJpbmcgZGVzY3JpcHRpb24sDQogICAgdWludDI1NiBkZWFkbGluZSk7DQoNCiAgICBldmVudCBWb3RpbmdGaW5pc2hlZCh1aW50MjU2IHByb3Bvc2FsSUQsIHVpbnQyNTYgdm90ZXMpOw0KDQogICAgZnVuY3Rpb24gbWFrZU5ld1Byb3Bvc2FsKHN0cmluZyBfcHJvcG9zYWxEZXNjcmlwdGlvbiwNCiAgICB1aW50MjU2IF9kZWJhdGluZ1BlcmlvZEluTWludXRlcykNCiAgICByZXR1cm5zICh1aW50MjU2KXsNCiAgICAgICAgLy8gb25seSBzaGFyZWhvbGRlciB3aXRoIG9uZSBvciBtb3JlIHNoYXJlcyBjYW4gbWFrZSBhIHByb3Bvc2FsDQogICAgICAgIC8vICEhISEgY2FuIGJlIG1vcmUgdGhlbiBvbmUgc2hhcmUgcmVxdWlyZWQNCiAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IDEpIHRocm93Ow0KDQogICAgICAgIGlmIChfZGViYXRpbmdQZXJpb2RJbk1pbnV0ZXMgPCAxKSB0aHJvdzsNCg0KICAgICAgICB1aW50MjU2IGlkID0gcHJvcG9zYWxUZXh0LnB1c2goX3Byb3Bvc2FsRGVzY3JpcHRpb24pIC0gMTsNCiAgICAgICAgZGVhZGxpbmVbaWRdID0gbm93ICsgX2RlYmF0aW5nUGVyaW9kSW5NaW51dGVzICogMSBtaW51dGVzOw0KDQogICAgICAgIC8vIGFkZCB0byBwcm9wb3NhbHMgb2YgdGhpcyBzaGFyZWhvbGRlcjoNCiAgICAgICAgcHJvcG9zYWxzQnlTaGFyZWhvbGRlclttc2cuc2VuZGVyXS5wdXNoKGlkKTsNCg0KICAgICAgICAvLyBpbml0aWF0b3IgYWx3YXlzIHZvdGVzICd5ZXMnDQogICAgICAgIHZvdGVzW2lkXS5wdXNoKG1zZy5zZW5kZXIpOw0KICAgICAgICB2b3RlZFtpZF1bbXNnLnNlbmRlcl0gPSB0cnVlOw0KDQogICAgICAgIFByb3Bvc2FsQWRkZWQoaWQsIG1zZy5zZW5kZXIsIF9wcm9wb3NhbERlc2NyaXB0aW9uLCBkZWFkbGluZVtpZF0pOw0KDQogICAgICAgIHJldHVybiBpZDsNCiAgICAgICAgLy8gcmV0dXJucyBwcm9wb3NhbCBpZA0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldE15UHJvcG9zYWxzKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NltdKXsNCiAgICAgICAgcmV0dXJuIHByb3Bvc2Fsc0J5U2hhcmVob2xkZXJbbXNnLnNlbmRlcl07DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdm90ZUZvclByb3Bvc2FsKHVpbnQyNTYgX3Byb3Bvc2FsSUQpIHJldHVybnMgKHN0cmluZykgew0KDQogICAgICAgIC8vIGlmIG5vIHNoYXJlcyBjdXJyZW50bHkgb3duZWQgLSBubyByaWdodCB0byB2b3RlDQogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCAxKSByZXR1cm4gIm5vIHNoYXJlcywgdm90ZSBub3QgYWNjZXB0ZWQiOw0KDQogICAgICAgIC8vIGlmIGFscmVhZHkgdm90ZWQgLSB0aHJvdywgZWxzZSB2b3RpbmcgY2FuIGJlIHNwYW1tZWQNCiAgICAgICAgaWYgKHZvdGVkW19wcm9wb3NhbElEXVttc2cuc2VuZGVyXSkgew0KICAgICAgICAgICAgcmV0dXJuICJhbHJlYWR5IHZvdGVkLCB2b3RlIG5vdCBhY2NlcHRlZCI7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBubyB2b3RlcyBhZnRlciBkZWFkbGluZQ0KICAgICAgICBpZiAobm93ID4gZGVhZGxpbmVbX3Byb3Bvc2FsSURdKSB7DQogICAgICAgICAgICByZXR1cm4gInZvdGUgbm90IGFjY2VwdGVkIGFmdGVyIGRlYWRsaW5lIjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGFkZCB0byBsaXN0IG9mIHZvdGVkICd5ZXMnDQogICAgICAgIHZvdGVzW19wcm9wb3NhbElEXS5wdXNoKG1zZy5zZW5kZXIpOw0KICAgICAgICB2b3RlZFtfcHJvcG9zYWxJRF1bbXNnLnNlbmRlcl0gPSB0cnVlOw0KICAgICAgICByZXR1cm4gInZvdGUgYWNjZXB0ZWQiOw0KICAgIH0NCg0KICAgIC8vIHRvIGNvdW50IHZvdGVzIHRoaXMgdHJhbnNhY3Rpb24gc2hvdWxkIGJlIHN0YXJ0ZWQgbWFudWFsbHkNCiAgICAvLyBmcm9tIF9hbnlfIEV0aGVyZXVtIGFkZHJlc3MgYWZ0ZXIgZGVhZGxpbmUNCiAgICBmdW5jdGlvbiBjb3VudFZvdGVzKHVpbnQyNTYgX3Byb3Bvc2FsSUQpIHJldHVybnMgKHVpbnQyNTYpew0KDQogICAgICAgIC8vIGlmIG5vdCBhZnRlciBkZWFkbGluZSAtIHRocm93DQogICAgICAgIGlmIChub3cgPCBkZWFkbGluZVtfcHJvcG9zYWxJRF0pIHRocm93Ow0KDQogICAgICAgIC8vIGlmIGFscmVhZHkgY291bnRlZCByZXR1cm4gcmVzdWx0Ow0KICAgICAgICBpZiAocmVzdWx0c1tfcHJvcG9zYWxJRF0gPiAwKSByZXR1cm4gcmVzdWx0c1tfcHJvcG9zYWxJRF07DQoNCiAgICAgICAgLy8gZWxzZSBzaG91bGQgY291bnQgcmVzdWx0cyBhbmQgc3RvcmUgaW4gcHVibGljIHZhcmlhYmxlDQogICAgICAgIHVpbnQyNTYgcmVzdWx0ID0gMDsNCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgdm90ZXNbX3Byb3Bvc2FsSURdLmxlbmd0aDsgaSsrKSB7DQoNCiAgICAgICAgICAgIGFkZHJlc3Mgdm90ZXIgPSB2b3Rlc1tfcHJvcG9zYWxJRF1baV07DQogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBiYWxhbmNlT2Zbdm90ZXJdOw0KICAgICAgICB9DQogICAgICAgIC8vIC0tLS0tPj4+ICEhISBpbXBvcnRhbnQNCiAgICAgICAgLy8gc3RvcmUgcmVzdWx0DQogICAgICAgIHJlc3VsdHNbX3Byb3Bvc2FsSURdID0gcmVzdWx0Ow0KDQogICAgICAgIC8vIExvZyBhbmQgbm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHZvdGluZyBmaW5pc2hlZA0KICAgICAgICAvLyB3aXRoICdyZXN1bHQnIC0gbnVtYmVyIG9mICd5ZXMnIHZvdGVzDQogICAgICAgIFZvdGluZ0ZpbmlzaGVkKF9wcm9wb3NhbElELCByZXN1bHQpOw0KDQogICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfQ0KDQp9'