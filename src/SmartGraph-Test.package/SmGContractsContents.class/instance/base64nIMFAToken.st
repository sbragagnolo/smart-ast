base 64 content
base64nIMFAToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KDQovKioNCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MNCiAqLw0KbGlicmFyeSBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDANCiAgICB1aW50IGMgPSBhIC8gYjsNCiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZA0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgcmV0dXJuIGEgLSBiOw0KICB9DQoNCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSArIGI7DQogICAgYXNzZXJ0KGMgPj0gYSk7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgew0KICAgIGlmICghYXNzZXJ0aW9uKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogIH0NCn0NCg0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KDQoNCg0KDQovKioNCiAqIEB0aXRsZSBFUkMyMEJhc2ljDQogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UNCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICovDQpjb250cmFjdCBFUkMyMEJhc2ljIHsNCiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7DQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7DQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOw0KICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsNCn0NCg0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCg0KLyoqDQogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlDQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjANCiAqLw0KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7DQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOw0KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsNCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsNCn0NCg0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCg0KDQoNCg0KLyoqDQogKiBAdGl0bGUgQmFzaWMgdG9rZW4NCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuIA0KICovDQpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgew0KICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsNCg0KICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7DQoNCiAgLyoqDQogICAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suDQogICAqLw0KICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7DQogICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7DQogICAgICAgdGhyb3c7DQogICAgIH0NCiAgICAgXzsNCiAgfQ0KDQogIC8qKg0KICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MNCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLg0KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4NCiAgKi8NCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7DQogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLg0KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiANCiAgKiBAcmV0dXJuIEFuIHVpbnQgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLg0KICAqLw0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgew0KICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICB9DQoNCn0NCg0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQoNCg0KDQoNCg0KDQoNCg0KLyoqDQogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4NCiAqDQogKiBAZGV2IEltcGxlbWFudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFydCB0b2tlbi4NCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sDQogKi8NCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgew0KDQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsNCg0KDQogIC8qKg0KICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXINCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQ0KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8NCiAgICogQHBhcmFtIF92YWx1ZSB1aW50IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZA0KICAgKi8NCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgew0KICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07DQoNCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQNCiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7DQoNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7DQogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOw0KICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWFobGYgb2YgbXNnLnNlbmRlci4NCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLg0KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50Lg0KICAgKi8NCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgew0KDQogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2ANCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdA0KICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOg0KICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQ0KICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7DQoNCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYW4gYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuDQogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4NCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuDQogICAqIEByZXR1cm4gQSB1aW50IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4NCiAgICovDQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsNCiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgfQ0KDQp9DQoNCg0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQoNCg0KDQoNCmNvbnRyYWN0IE5JTUZBVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7DQoJdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7DQoJDQoJDQoJDQoJZXZlbnQgQ3JlYXRlZE5JTUZBKGFkZHJlc3MgaW5kZXhlZCBfY3JlYXRvciwgdWludDI1NiBfYW1vdW50T2ZOSU1GQSk7DQoJDQoJLy8gVG9rZW4gZGF0YQ0KCXN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJOSU1GQSBUb2tlbiI7DQoJc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiTklNRkEiOw0KCXVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7IA0KCXN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICIxLjAiOw0KCQ0KCS8vIEFkZHJlc3NlcyBhbmQgY29udHJhY3RzDQoJYWRkcmVzcyBwdWJsaWMgZXhlY3V0b3I7DQoJYWRkcmVzcyBwdWJsaWMgdGVhbUVUSEFkZHJlc3M7ICANCglhZGRyZXNzIHB1YmxpYyB0ZWFtTklNRkFBZGRyZXNzOw0KCWFkZHJlc3MgcHVibGljIGNyZWRpdEZ1bmROSU1GQUFkZHJlc3M7DQoJYWRkcmVzcyBwdWJsaWMgcmVzZXJ2ZU5JTUZBQWRkcmVzczsNCgkNCglib29sIHB1YmxpYyBwcmVTYWxlSGFzRW5kZWQ7DQoJYm9vbCBwdWJsaWMgc2FsZUhhc0VuZGVkOw0KCWJvb2wgcHVibGljIGFsbG93VHJhbnNmZXI7DQoJYm9vbCBwdWJsaWMgbWF4UHJlU2FsZTsgIC8vIDEwMDAwMDAgTklNRkEgZm9yIHByZSBzYWxlIHByaWNlDQoJbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgRVRIQ29udHJpYnV0ZWQ7DQoJdWludDI1NiBwdWJsaWMgdG90YWxFVEg7DQoJdWludDI1NiBwdWJsaWMgcHJlU2FsZVN0YXJ0QmxvY2s7DQoJdWludDI1NiBwdWJsaWMgcHJlU2FsZUVuZEJsb2NrOw0KCXVpbnQyNTYgcHVibGljIHNhbGVTdGFydEJsb2NrOw0KCXVpbnQyNTYgcHVibGljIHNhbGVFbmRCbG9jazsNCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCBOSU1GQV9QRVJfRVRIX1BSRV9TQUxFID0gMTEwMDsgIC8vIDExMDAgTklNRkEgPSAxIEVUSCANCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCBOSU1GQV9QRVJfRVRIX1NBTEUgPSAxMTA7ICAvLyAxMTAgTklNRkEgPSAxIEVUSCANCgkNCg0KCQ0KCWZ1bmN0aW9uIE5JTUZBVG9rZW4oDQoJCWFkZHJlc3MgX3RlYW1FVEhBZGRyZXNzLA0KCQlhZGRyZXNzIF90ZWFtTklNRkFBZGRyZXNzLA0KCQlhZGRyZXNzIF9jcmVkaXRGdW5kTklNRkFBZGRyZXNzLA0KCQlhZGRyZXNzIF9yZXNlcnZlTklNRkFBZGRyZXNzLA0KCQl1aW50MjU2IF9wcmVTYWxlU3RhcnRCbG9jaywNCgkJdWludDI1NiBfcHJlU2FsZUVuZEJsb2NrDQoJKSB7DQoJCQ0KCQlpZiAoX3RlYW1FVEhBZGRyZXNzID09IGFkZHJlc3MoMHgwKSkgdGhyb3c7DQoJCWlmIChfdGVhbU5JTUZBQWRkcmVzcyA9PSBhZGRyZXNzKDB4MCkpIHRocm93Ow0KCQlpZiAoX2NyZWRpdEZ1bmROSU1GQUFkZHJlc3MgPT0gYWRkcmVzcygweDApKSB0aHJvdzsNCgkJaWYgKF9yZXNlcnZlTklNRkFBZGRyZXNzID09IGFkZHJlc3MoMHgwKSkgdGhyb3c7DQoJCS8vIFJlamVjdCBpZiBzYWxlIGVuZHMgYmVmb3JlIHRoZSBjdXJyZW50IGJsb2NrDQoJCWlmIChfcHJlU2FsZUVuZEJsb2NrIDw9IGJsb2NrLm51bWJlcikgdGhyb3c7DQoJCS8vIFJlamVjdCBpZiB0aGUgc2FsZSBlbmQgdGltZSBpcyBsZXNzIHRoYW4gdGhlIHNhbGUgc3RhcnQgdGltZQ0KCQlpZiAoX3ByZVNhbGVFbmRCbG9jayA8PSBfcHJlU2FsZVN0YXJ0QmxvY2spIHRocm93Ow0KDQoJCWV4ZWN1dG9yID0gbXNnLnNlbmRlcjsNCgkJcHJlU2FsZUhhc0VuZGVkID0gZmFsc2U7DQoJCXNhbGVIYXNFbmRlZCA9IGZhbHNlOw0KCQlhbGxvd1RyYW5zZmVyID0gZmFsc2U7DQoJCW1heFByZVNhbGUgPSBmYWxzZTsNCgkJdGVhbUVUSEFkZHJlc3MgPSBfdGVhbUVUSEFkZHJlc3M7DQoJCXRlYW1OSU1GQUFkZHJlc3MgPSBfdGVhbU5JTUZBQWRkcmVzczsNCgkJY3JlZGl0RnVuZE5JTUZBQWRkcmVzcyA9IF9jcmVkaXRGdW5kTklNRkFBZGRyZXNzOw0KCQlyZXNlcnZlTklNRkFBZGRyZXNzID0gX3Jlc2VydmVOSU1GQUFkZHJlc3M7DQoJCXRvdGFsRVRIID0gMDsNCgkJcHJlU2FsZVN0YXJ0QmxvY2sgPSBfcHJlU2FsZVN0YXJ0QmxvY2s7DQoJCXByZVNhbGVFbmRCbG9jayA9IF9wcmVTYWxlRW5kQmxvY2s7DQoJCXNhbGVTdGFydEJsb2NrID0gX3ByZVNhbGVTdGFydEJsb2NrOw0KCQlzYWxlRW5kQmxvY2sgPSBfcHJlU2FsZUVuZEJsb2NrOw0KCQl0b3RhbFN1cHBseSA9IDA7DQoJfQ0KCQ0KCWZ1bmN0aW9uIGludmVzdG1lbnQoKSBwYXlhYmxlIGV4dGVybmFsIHsNCgkJLy8gSWYgcHJlU2FsZS9TYWxlIGlzIG5vdCBhY3RpdmUsIGRvIG5vdCBjcmVhdGUgTklNRkENCgkJaWYgKHByZVNhbGVIYXNFbmRlZCAmJiBzYWxlSGFzRW5kZWQpIHRocm93Ow0KCQlpZiAoIXByZVNhbGVIYXNFbmRlZCkgew0KCQkgICAgaWYgKGJsb2NrLm51bWJlciA8IHByZVNhbGVTdGFydEJsb2NrKSB0aHJvdzsNCgkJICAgIGlmIChibG9jay5udW1iZXIgPiBwcmVTYWxlRW5kQmxvY2spIHRocm93Ow0KCQl9DQoJCWlmIChibG9jay5udW1iZXIgPCBzYWxlU3RhcnRCbG9jaykgdGhyb3c7DQoJCWlmIChibG9jay5udW1iZXIgPiBzYWxlRW5kQmxvY2spIHRocm93Ow0KCQkNCgkJdWludDI1NiBuZXdFdGhlckJhbGFuY2UgPSB0b3RhbEVUSC5hZGQobXNnLnZhbHVlKTsNCg0KCQkvLyBEbyBub3QgZG8gYW55dGhpbmcgaWYgdGhlIGFtb3VudCBvZiBldGhlciBzZW50IGlzIDANCgkJaWYgKDAgPT0gbXNnLnZhbHVlKSB0aHJvdzsNCgkJDQoJCS8vIENhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIE5JTUZBIGJlaW5nIHB1cmNoYXNlZA0KCQl1aW50MjU2IGFtb3VudE9mTklNRkEgPSBtc2cudmFsdWUubXVsKE5JTUZBX1BFUl9FVEhfUFJFX1NBTEUpOw0KCQlpZiAocHJlU2FsZUhhc0VuZGVkIHx8IG1heFByZVNhbGUpIGFtb3VudE9mTklNRkEgPSBtc2cudmFsdWUubXVsKE5JTUZBX1BFUl9FVEhfU0FMRSk7DQoJCQ0KCQlpZiAoMTAwMDAwIGV0aGVyIDwgYW1vdW50T2ZOSU1GQSkgdGhyb3c7DQoJCQ0KCQkvLyBFbnN1cmUgdGhhdCB0aGUgdHJhbnNhY3Rpb24gaXMgc2FmZQ0KCQl1aW50MjU2IHRvdGFsU3VwcGx5U2FmZSA9IHRvdGFsU3VwcGx5LmFkZChhbW91bnRPZk5JTUZBKTsNCgkJdWludDI1NiBiYWxhbmNlU2FmZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZChhbW91bnRPZk5JTUZBKTsNCgkJdWludDI1NiBjb250cmlidXRlZFNhZmUgPSBFVEhDb250cmlidXRlZFttc2cuc2VuZGVyXS5hZGQobXNnLnZhbHVlKTsNCg0KCQkvLyBVcGRhdGUgYmFsYW5jZXMNCgkJdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseVNhZmU7DQoJCWlmICh0b3RhbFN1cHBseSA+IDIwMDAwMDAgZXRoZXIpIG1heFByZVNhbGUgPSB0cnVlOw0KCQliYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VTYWZlOw0KDQoJCXRvdGFsRVRIID0gbmV3RXRoZXJCYWxhbmNlOw0KCQlFVEhDb250cmlidXRlZFttc2cuc2VuZGVyXSA9IGNvbnRyaWJ1dGVkU2FmZTsNCgkJaWYgKCFwcmVTYWxlSGFzRW5kZWQpIHRlYW1FVEhBZGRyZXNzLnRyYW5zZmVyKG1zZy52YWx1ZSk7DQoNCgkJQ3JlYXRlZE5JTUZBKG1zZy5zZW5kZXIsIGFtb3VudE9mTklNRkEpOw0KCX0NCgkNCglmdW5jdGlvbiBlbmRQcmVTYWxlKCkgew0KCQkvLyBEbyBub3QgZW5kIGFuIGFscmVhZHkgZW5kZWQgc2FsZQ0KCQlpZiAocHJlU2FsZUhhc0VuZGVkKSB0aHJvdzsNCgkJDQoJCS8vIE9ubHkgYWxsb3cgdGhlIG93bmVyDQoJCWlmIChtc2cuc2VuZGVyICE9IGV4ZWN1dG9yKSB0aHJvdzsNCgkJDQoJCXByZVNhbGVIYXNFbmRlZCA9IHRydWU7DQoJfQ0KCQ0KCQ0KCWZ1bmN0aW9uIGVuZFNhbGUoKSB7DQoJCQ0KCQlpZiAoIXByZVNhbGVIYXNFbmRlZCkgdGhyb3c7DQoJCS8vIERvIG5vdCBlbmQgYW4gYWxyZWFkeSBlbmRlZCBzYWxlDQoJCWlmIChzYWxlSGFzRW5kZWQpIHRocm93Ow0KCQkNCgkJLy8gT25seSBhbGxvdyB0aGUgb3duZXINCgkJaWYgKG1zZy5zZW5kZXIgIT0gZXhlY3V0b3IpIHRocm93Ow0KCQkNCgkJc2FsZUhhc0VuZGVkID0gdHJ1ZTsNCgkJdWludDI1NiBFdGhlckFtb3VudCA9IHRoaXMuYmFsYW5jZTsNCgkJdGVhbUVUSEFkZHJlc3MudHJhbnNmZXIoRXRoZXJBbW91bnQpOw0KCQkNCgkJdWludDI1NiBjcmVkaXRGdW5kID0gdG90YWxTdXBwbHkubXVsKDMpOw0KCQl1aW50MjU2IHJlc2VydmVOSU1GQSA9IHRvdGFsU3VwcGx5LmRpdigyKTsNCgkJdWludDI1NiB0ZWFtTklNRkEgPSB0b3RhbFN1cHBseS5kaXYoMik7DQoJCXVpbnQyNTYgdG90YWxTdXBwbHlTYWZlID0gdG90YWxTdXBwbHkuYWRkKGNyZWRpdEZ1bmQpLmFkZChyZXNlcnZlTklNRkEpLmFkZCh0ZWFtTklNRkEpOw0KDQoNCgkJdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseVNhZmU7DQoJCWJhbGFuY2VzW2NyZWRpdEZ1bmROSU1GQUFkZHJlc3NdID0gY3JlZGl0RnVuZDsNCgkJYmFsYW5jZXNbcmVzZXJ2ZU5JTUZBQWRkcmVzc10gPSByZXNlcnZlTklNRkE7DQoJCWJhbGFuY2VzW3RlYW1OSU1GQUFkZHJlc3NdID0gdGVhbU5JTUZBOw0KCQkNCgkJQ3JlYXRlZE5JTUZBKGNyZWRpdEZ1bmROSU1GQUFkZHJlc3MsIGNyZWRpdEZ1bmQpOw0KCQlDcmVhdGVkTklNRkEocmVzZXJ2ZU5JTUZBQWRkcmVzcywgcmVzZXJ2ZU5JTUZBKTsNCiAgICAgICAgQ3JlYXRlZE5JTUZBKHRlYW1OSU1GQUFkZHJlc3MsIHRlYW1OSU1GQSk7DQoJfQ0KCQ0KCQ0KCWZ1bmN0aW9uIGNoYW5nZVRlYW1FVEhBZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIHsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gZXhlY3V0b3IpIHRocm93Ow0KCQl0ZWFtRVRIQWRkcmVzcyA9IF9uZXdBZGRyZXNzOw0KCX0NCgkNCglmdW5jdGlvbiBjaGFuZ2VUZWFtTklNRkFBZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIHsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gZXhlY3V0b3IpIHRocm93Ow0KCQl0ZWFtTklNRkFBZGRyZXNzID0gX25ld0FkZHJlc3M7DQoJfQ0KCQ0KCWZ1bmN0aW9uIGNoYW5nZUNyZWRpdEZ1bmROSU1GQUFkZHJlc3MoYWRkcmVzcyBfbmV3QWRkcmVzcykgew0KCQlpZiAobXNnLnNlbmRlciAhPSBleGVjdXRvcikgdGhyb3c7DQoJCWNyZWRpdEZ1bmROSU1GQUFkZHJlc3MgPSBfbmV3QWRkcmVzczsNCgl9DQoJDQoJLyoNCgkqIEFsbG93IHRyYW5zZmVyIG9ubHkgYWZ0ZXIgc2FsZXMNCgkqLw0KCWZ1bmN0aW9uIGNoYW5nZUFsbG93VHJhbnNmZXIoKSB7DQoJCWlmIChtc2cuc2VuZGVyICE9IGV4ZWN1dG9yKSB0aHJvdzsNCg0KCQlhbGxvd1RyYW5zZmVyID0gdHJ1ZTsNCgl9DQoJDQoJLyoNCgkqIA0KCSovDQoJZnVuY3Rpb24gY2hhbmdlU2FsZVN0YXJ0QmxvY2sodWludDI1NiBfc2FsZVN0YXJ0QmxvY2spIHsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gZXhlY3V0b3IpIHRocm93Ow0KICAgICAgICBzYWxlU3RhcnRCbG9jayA9IF9zYWxlU3RhcnRCbG9jazsNCgl9DQoJDQoJLyoNCgkqIA0KCSovDQoJZnVuY3Rpb24gY2hhbmdlU2FsZUVuZEJsb2NrKHVpbnQyNTYgX3NhbGVFbmRCbG9jaykgew0KCQlpZiAobXNnLnNlbmRlciAhPSBleGVjdXRvcikgdGhyb3c7DQogICAgICAgIHNhbGVFbmRCbG9jayA9IF9zYWxlRW5kQmxvY2s7DQoJfQ0KCQ0KCQ0KCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgew0KCQkvLyBDYW5ub3QgdHJhbnNmZXIgdW5sZXNzIHRoZSBtaW5pbXVtIGNhcCBpcyBoaXQNCgkJaWYgKCFhbGxvd1RyYW5zZmVyKSB0aHJvdzsNCgkJDQoJCXN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsNCgl9DQoJDQoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgew0KCQkvLyBDYW5ub3QgdHJhbnNmZXIgdW5sZXNzIHRoZSBtaW5pbXVtIGNhcCBpcyBoaXQNCgkJaWYgKCFhbGxvd1RyYW5zZmVyKSB0aHJvdzsNCgkJDQoJCXN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOw0KCX0NCn0='