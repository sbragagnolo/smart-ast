base 64 content
base64notifier
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4wOw0KDQovKioNCiAqIC0tLS0tLS0tLS0tLS0tLS0NCiAqIEFwcGxpY2F0aW9uLWFnbm9zdGljIHVzZXIgcGVybWlzc2lvbiAob3duZXIsIG1hbmFnZXIpIGNvbnRyYWN0DQogKiAtLS0tLS0tLS0tLS0tLS0tDQogKi8NCmNvbnRyYWN0IHdpdGhPd25lcnMgew0KICB1aW50IHB1YmxpYyBvd25lcnNDb3VudCA9IDA7DQogIHVpbnQgcHVibGljIG1hbmFnZXJzQ291bnQgPSAwOw0KDQogIC8qKg0KICAgKiBPd25lcjogZnVsbCBwcml2aWxlZ2UNCiAgICogTWFuYWdlcjogbG93ZXIgcHJpdmlsZWdlIChzZXQgc3RhdHVzLCBidXQgbm90IHdpdGhkcmF3KQ0KICAgKi8NCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgb3duZXJzOw0KICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBtYW5hZ2VyczsNCg0KICBtb2RpZmllciBvbmx5T3duZXJzIHsNCiAgICBpZiAob3duZXJzW21zZy5zZW5kZXJdICE9IHRydWUpIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCiAgICBfOw0KICB9DQoNCiAgbW9kaWZpZXIgb25seU1hbmFnZXJzIHsNCiAgICBpZiAob3duZXJzW21zZy5zZW5kZXJdICE9IHRydWUgJiYgbWFuYWdlcnNbbXNnLnNlbmRlcl0gIT0gdHJ1ZSkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICAgIF87DQogIH0NCg0KICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIF9jYW5kaWRhdGUpIHB1YmxpYyBvbmx5T3duZXJzIHsNCiAgICBpZiAob3duZXJzW19jYW5kaWRhdGVdID09IHRydWUpIHsNCiAgICAgIHRocm93OyAvLyBhbHJlYWR5IG93bmVyDQogICAgfQ0KDQogICAgb3duZXJzW19jYW5kaWRhdGVdID0gdHJ1ZTsNCiAgICArK293bmVyc0NvdW50Ow0KICB9DQoNCiAgZnVuY3Rpb24gcmVtb3ZlT3duZXIoYWRkcmVzcyBfY2FuZGlkYXRlKSBwdWJsaWMgb25seU93bmVycyB7DQogICAgLy8gU3RvcCByZW1vdmluZyB0aGUgb25seS9sYXN0IG93bmVyDQogICAgaWYgKG93bmVyc0NvdW50IDw9IDEgfHwgb3duZXJzW19jYW5kaWRhdGVdID09IGZhbHNlKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBvd25lcnNbX2NhbmRpZGF0ZV0gPSBmYWxzZTsNCiAgICAtLW93bmVyc0NvdW50Ow0KICB9DQoNCiAgZnVuY3Rpb24gYWRkTWFuYWdlcihhZGRyZXNzIF9jYW5kaWRhdGUpIHB1YmxpYyBvbmx5T3duZXJzIHsNCiAgICBpZiAobWFuYWdlcnNbX2NhbmRpZGF0ZV0gPT0gdHJ1ZSkgew0KICAgICAgdGhyb3c7IC8vIGFscmVhZHkgbWFuYWdlcg0KICAgIH0NCg0KICAgIG1hbmFnZXJzW19jYW5kaWRhdGVdID0gdHJ1ZTsNCiAgICArK21hbmFnZXJzQ291bnQ7DQogIH0NCg0KICBmdW5jdGlvbiByZW1vdmVNYW5hZ2VyKGFkZHJlc3MgX2NhbmRpZGF0ZSkgcHVibGljIG9ubHlPd25lcnMgew0KICAgIGlmIChtYW5hZ2Vyc1tfY2FuZGlkYXRlXSA9PSBmYWxzZSkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgbWFuYWdlcnNbX2NhbmRpZGF0ZV0gPSBmYWxzZTsNCiAgICAtLW1hbmFnZXJzQ291bnQ7DQogIH0NCn0NCg0KDQovKioNCiAqIC0tLS0tLS0tLS0tLS0tLS0NCiAqIEFwcGxpY2F0aW9uLWFnbm9zdGljIHVzZXIgYWNjb3VudCBjb250cmFjdA0KICogLS0tLS0tLS0tLS0tLS0tLQ0KICovDQpjb250cmFjdCB3aXRoQWNjb3VudHMgaXMgd2l0aE93bmVycyB7DQogIHVpbnQgZGVmYXVsdFRpbWVvdXRQZXJpb2QgPSAyIGRheXM7IC8vIGlmIGxvY2tlZCBmdW5kIGlzIG5vdCBzZXR0bGVkIHdpdGhpbiB0aW1lb3V0IHBlcmlvZCwgYWNjb3VudCBob2xkZXJzIGNhbiByZWZ1bmQgdGhlbXNlbHZlcw0KDQogIHN0cnVjdCBBY2NvdW50VHggew0KICAgIHVpbnQgdGltZUNyZWF0ZWQ7DQogICAgYWRkcmVzcyB1c2VyOw0KICAgIHVpbnQgYW1vdW50SGVsZDsNCiAgICB1aW50IGFtb3VudFNwZW50Ow0KICAgIHVpbnQ4IHN0YXRlOyAvLyAxOiBvbi1ob2xkL2xvY2tlZDsgMjogcHJvY2Vzc2VkIGFuZCByZWZ1bmRlZDsNCiAgfQ0KDQogIHVpbnQgcHVibGljIHR4Q291bnQgPSAwOw0KICBtYXBwaW5nICh1aW50ID0+IEFjY291bnRUeCkgcHVibGljIGFjY291bnRUeHM7DQogIC8vbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgdXNlclR4czsNCg0KICAvKioNCiAgICogSGFuZGxpbmcgdXNlciBhY2NvdW50IGZ1bmRzDQogICAqLw0KICB1aW50IHB1YmxpYyBhdmFpbGFibGVCYWxhbmNlID0gMDsNCiAgdWludCBwdWJsaWMgb25ob2xkQmFsYW5jZSA9IDA7DQogIHVpbnQgcHVibGljIHNwZW50QmFsYW5jZSA9IDA7IC8vIHRvdGFsIHdpdGhkcmF3YWwgYmFsYW5jZSBieSBvd25lciAoc2VydmljZSBwcm92aWRlcikNCg0KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBhdmFpbGFibGVCYWxhbmNlczsNCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgb25ob2xkQmFsYW5jZXM7DQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGRvTm90QXV0b1JlZnVuZDsNCg0KICBtb2RpZmllciBoYW5kbGVEZXBvc2l0IHsNCiAgICBkZXBvc2l0KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7DQogICAgXzsNCiAgfQ0KDQovKioNCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAqIFBVQkxJQyBGVU5DVElPTlMNCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAqLw0KDQogIC8qKg0KICAgKiBEZXBvc2l0IGludG8gb3RoZXIncyBhY2NvdW50DQogICAqIFVzZWZ1bCBmb3Igc2VydmljZXMgdGhhdCB5b3Ugd2lzaCB0byBub3QgaG9sZCBmdW5kcyBhbmQgbm90IGhhdmluZyB0byBrZWVwIHJlZnVuZGluZyBhZnRlciBldmVyeSB0eCBhbmQgd2FzdGluZyBnYXMNCiAgICovDQogIGZ1bmN0aW9uIGRlcG9zaXRGb3IoYWRkcmVzcyBfYWRkcmVzcykgcHVibGljIHBheWFibGUgew0KICAgIGRlcG9zaXQoX2FkZHJlc3MsIG1zZy52YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgICogQWNjb3VudCBvd25lciB3aXRoZHJhdyBmdW5kcw0KICAgKiBsZWF2ZSBibGFuayBhdCBfYW1vdW50IHRvIGNvbGxlY3QgYWxsIGZ1bmRzIG9uIHVzZXIncyBhY2NvdW50DQogICAqLw0KICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IF9hbW91bnQpIHB1YmxpYyB7DQogICAgaWYgKF9hbW91bnQgPT0gMCkgew0KICAgICAgX2Ftb3VudCA9IGF2YWlsYWJsZUJhbGFuY2VzW21zZy5zZW5kZXJdOw0KICAgIH0NCiAgICBpZiAoX2Ftb3VudCA+IGF2YWlsYWJsZUJhbGFuY2VzW21zZy5zZW5kZXJdKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBpbmNyVXNlckF2YWlsQmFsKG1zZy5zZW5kZXIsIF9hbW91bnQsIGZhbHNlKTsNCiAgICBpZiAoIW1zZy5zZW5kZXIuY2FsbC52YWx1ZShfYW1vdW50KSgpKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQ2hlY2tzIGlmIGFuIEFjY291bnRUeCBpcyB0aW1lZCBvdXQNCiAgICogY2FuIGJlIGNhbGxlZCBieSBhbnlvbmUsIG5vdCBvbmx5IGFjY291bnQgb3duZXIgb3IgcHJvdmlkZXINCiAgICogSWYgYW4gQWNjb3VudFR4IGlzIGFscmVhZHkgdGltZWQgb3V0LCByZXR1cm4gYmFsYW5jZSB0byB0aGUgdXNlcidzIGF2YWlsYWJsZSBiYWxhbmNlLg0KICAgKi8NCiAgZnVuY3Rpb24gY2hlY2tUaW1lb3V0KHVpbnQgX2lkKSBwdWJsaWMgew0KICAgIGlmICgNCiAgICAgIGFjY291bnRUeHNbX2lkXS5zdGF0ZSAhPSAxIHx8DQogICAgICAobm93IC0gYWNjb3VudFR4c1tfaWRdLnRpbWVDcmVhdGVkKSA8IGRlZmF1bHRUaW1lb3V0UGVyaW9kDQogICAgKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBzZXR0bGUoX2lkLCAwKTsgLy8gbm8gbW9uZXkgaXMgc3BlbnQsIHNldHRsZSB0aGUgdHgNCg0KICAgIC8vIFNwZWNpZmljYWxseSBmb3IgTm90aWZpY2F0aW9uIGNvbnRyYWN0DQogICAgLy8gdXBkYXRlU3RhdGUoX2lkLCA2MCwgMCk7DQogIH0NCg0KICAvKioNCiAgICogU2V0cyBkb05vdEF1dG9SZWZ1bmRUbyBvZiBjYWxsZXIncyBhY2NvdW50IHRvOg0KICAgKiB0cnVlOiBzdG9wcyBhdXRvIHJlZnVuZCBhZnRlciBldmVyeSBzaW5nbGUgdHJhbnNhY3Rpb24NCiAgICogZmFsc2U6IHByb2NlZWRzIHdpdGggYXV0byByZWZ1bmQgYWZ0ZXIgZXZlcnkgc2luZ2xlIHRyYW5zYWN0aW9uDQogICAqDQogICAqIE1hbnVhbGx5IHVzZSB3aXRoZHJhdygpIHRvIHdpdGhkcmF3IGF2YWlsYWJsZSBmdW5kcw0KICAgKi8NCiAgZnVuY3Rpb24gc2V0RG9Ob3RBdXRvUmVmdW5kVG8oYm9vbCBfb3B0aW9uKSBwdWJsaWMgew0KICAgIGRvTm90QXV0b1JlZnVuZFttc2cuc2VuZGVyXSA9IF9vcHRpb247DQogIH0NCg0KICAvKioNCiAgICogVXBkYXRlIGRlZmF1bHRUaW1lb3V0UGVyaW9kDQogICAqLw0KICBmdW5jdGlvbiB1cGRhdGVEZWZhdWx0VGltZW91dFBlcmlvZCh1aW50IF9kZWZhdWx0VGltZW91dFBlcmlvZCkgcHVibGljIG9ubHlPd25lcnMgew0KICAgIGlmIChfZGVmYXVsdFRpbWVvdXRQZXJpb2QgPCAxIGhvdXJzKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBkZWZhdWx0VGltZW91dFBlcmlvZCA9IF9kZWZhdWx0VGltZW91dFBlcmlvZDsNCiAgfQ0KDQogIC8qKg0KICAgKiBPd25lciAtIGNvbGxlY3Qgc3BlbnRCYWxhbmNlDQogICAqLw0KICBmdW5jdGlvbiBjb2xsZWN0UmV2KCkgcHVibGljIG9ubHlPd25lcnMgew0KICAgIHVpbnQgYW1vdW50ID0gc3BlbnRCYWxhbmNlOw0KICAgIHNwZW50QmFsYW5jZSA9IDA7DQoNCiAgICBpZiAoIW1zZy5zZW5kZXIuY2FsbC52YWx1ZShhbW91bnQpKCkpIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBPd25lcjogcmVsZWFzZSBhdmFpbGFibGVCYWxhbmNlIHRvIGFjY291bnQgaG9sZGVyDQogICAqIGxlYXZlIGJsYW5rIGF0IF9hbW91bnQgdG8gcmVsZWFzZSBhbGwNCiAgICogc2V0IGRvTm90QXV0b1JlZnVuZCB0byB0cnVlIHRvIHN0b3AgYXV0byBmdW5kcyByZXR1cm5pbmcgKGtlZXAgZnVuZHMgb24gdXNlcidzIGF2YWlsYWJsZSBiYWxhbmNlIGFjY291bnQpDQogICAqLw0KICBmdW5jdGlvbiByZXR1cm5GdW5kKGFkZHJlc3MgX3VzZXIsIHVpbnQgX2Ftb3VudCkgcHVibGljIG9ubHlNYW5hZ2VycyB7DQogICAgaWYgKGRvTm90QXV0b1JlZnVuZFtfdXNlcl0gfHwgX2Ftb3VudCA+IGF2YWlsYWJsZUJhbGFuY2VzW191c2VyXSkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICAgIGlmIChfYW1vdW50ID09IDApIHsNCiAgICAgIF9hbW91bnQgPSBhdmFpbGFibGVCYWxhbmNlc1tfdXNlcl07DQogICAgfQ0KDQogICAgaW5jclVzZXJBdmFpbEJhbChfdXNlciwgX2Ftb3VudCwgZmFsc2UpOw0KICAgIGlmICghX3VzZXIuY2FsbC52YWx1ZShfYW1vdW50KSgpKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogIH0NCg0KLyoqDQogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogKiBJTlRFUk5BTCBGVU5DVElPTlMNCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAqLw0KDQogIC8qKg0KICAgKiBEZXBvc2l0IGZ1bmRzIGludG8gYWNjb3VudA0KICAgKi8NCiAgZnVuY3Rpb24gZGVwb3NpdChhZGRyZXNzIF91c2VyLCB1aW50IF9hbW91bnQpIGludGVybmFsIHsNCiAgICBpZiAoX2Ftb3VudCA+IDApIHsNCiAgICAgIGluY3JVc2VyQXZhaWxCYWwoX3VzZXIsIF9hbW91bnQsIHRydWUpOw0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBDcmVhdGVzIGEgdHJhbnNhY3Rpb24NCiAgICovDQogIGZ1bmN0aW9uIGNyZWF0ZVR4KHVpbnQgX2lkLCBhZGRyZXNzIF91c2VyLCB1aW50IF9hbW91bnQpIGludGVybmFsIHsNCiAgICBpZiAoX2Ftb3VudCA+IGF2YWlsYWJsZUJhbGFuY2VzW191c2VyXSkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgYWNjb3VudFR4c1tfaWRdID0gQWNjb3VudFR4KHsNCiAgICAgIHRpbWVDcmVhdGVkOiBub3csDQogICAgICB1c2VyOiBfdXNlciwNCiAgICAgIGFtb3VudEhlbGQ6IF9hbW91bnQsDQogICAgICBhbW91bnRTcGVudDogMCwNCiAgICAgIHN0YXRlOiAxIC8vIG9uIGhvbGQNCiAgICB9KTsNCg0KICAgIGluY3JVc2VyQXZhaWxCYWwoX3VzZXIsIF9hbW91bnQsIGZhbHNlKTsNCiAgICBpbmNyVXNlck9uaG9sZEJhbChfdXNlciwgX2Ftb3VudCwgdHJ1ZSk7DQogIH0NCg0KICBmdW5jdGlvbiBzZXR0bGUodWludCBfaWQsIHVpbnQgX2Ftb3VudFNwZW50KSBpbnRlcm5hbCB7DQogICAgaWYgKGFjY291bnRUeHNbX2lkXS5zdGF0ZSAhPSAxIHx8IF9hbW91bnRTcGVudCA+IGFjY291bnRUeHNbX2lkXS5hbW91bnRIZWxkKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICAvLyBEZWxpYmVyYXRlbHkgbm90IGNoZWNraW5nIGZvciB0aW1lb3V0IHBlcmlvZA0KICAgIC8vIGJlY2F1c2UgaWYgcHJvdmlkZXIgaGFzIGFjdHVhbCB1cGRhdGUsIGl0IHNob3VsZCBzdGFuZA0KDQogICAgYWNjb3VudFR4c1tfaWRdLmFtb3VudFNwZW50ID0gX2Ftb3VudFNwZW50Ow0KICAgIGFjY291bnRUeHNbX2lkXS5zdGF0ZSA9IDI7IC8vIHByb2Nlc3NlZCBhbmQgcmVmdW5kZWQ7DQoNCiAgICBzcGVudEJhbGFuY2UgKz0gX2Ftb3VudFNwZW50Ow0KICAgIHVpbnQgY2hhbmdlQW1vdW50ID0gYWNjb3VudFR4c1tfaWRdLmFtb3VudEhlbGQgLSBfYW1vdW50U3BlbnQ7DQoNCiAgICBpbmNyVXNlck9uaG9sZEJhbChhY2NvdW50VHhzW19pZF0udXNlciwgYWNjb3VudFR4c1tfaWRdLmFtb3VudEhlbGQsIGZhbHNlKTsNCiAgICBpbmNyVXNlckF2YWlsQmFsKGFjY291bnRUeHNbX2lkXS51c2VyLCBjaGFuZ2VBbW91bnQsIHRydWUpOw0KICB9DQoNCiAgZnVuY3Rpb24gaW5jclVzZXJBdmFpbEJhbChhZGRyZXNzIF91c2VyLCB1aW50IF9ieSwgYm9vbCBfaW5jcmVhc2UpIGludGVybmFsIHsNCiAgICBpZiAoX2luY3JlYXNlKSB7DQogICAgICBhdmFpbGFibGVCYWxhbmNlc1tfdXNlcl0gKz0gX2J5Ow0KICAgICAgYXZhaWxhYmxlQmFsYW5jZSArPSBfYnk7DQogICAgfSBlbHNlIHsNCiAgICAgIGF2YWlsYWJsZUJhbGFuY2VzW191c2VyXSAtPSBfYnk7DQogICAgICBhdmFpbGFibGVCYWxhbmNlIC09IF9ieTsNCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiBpbmNyVXNlck9uaG9sZEJhbChhZGRyZXNzIF91c2VyLCB1aW50IF9ieSwgYm9vbCBfaW5jcmVhc2UpIGludGVybmFsIHsNCiAgICBpZiAoX2luY3JlYXNlKSB7DQogICAgICBvbmhvbGRCYWxhbmNlc1tfdXNlcl0gKz0gX2J5Ow0KICAgICAgb25ob2xkQmFsYW5jZSArPSBfYnk7DQogICAgfSBlbHNlIHsNCiAgICAgIG9uaG9sZEJhbGFuY2VzW191c2VyXSAtPSBfYnk7DQogICAgICBvbmhvbGRCYWxhbmNlIC09IF9ieTsNCiAgICB9DQogIH0NCn0NCg0KDQoNCmNvbnRyYWN0IE5vdGlmaWVyIGlzIHdpdGhPd25lcnMsIHdpdGhBY2NvdW50cyB7DQogIHN0cmluZyBwdWJsaWMgeElQRlNQdWJsaWNLZXk7DQogIHVpbnQgcHVibGljIG1pbkV0aFBlck5vdGlmaWNhdGlvbiA9IDAuMDIgZXRoZXI7DQoNCiAgc3RydWN0IFRhc2sgew0KICAgIGFkZHJlc3Mgc2VuZGVyOw0KICAgIHVpbnQ4IHN0YXRlOyAvLyAxMDogcGVuZGluZw0KICAgICAgICAgICAgICAgICAvLyAyMDogcHJvY2Vzc2VkLCBidXQgdHggc3RpbGwgb3Blbg0KICAgICAgICAgICAgICAgICAvLyBbIEZJTkFMIFNUQVRFUyA+PSA1MCBdDQogICAgICAgICAgICAgICAgIC8vIDUwOiBwcm9jZXNzZWQsIGNvc3RpbmcgZG9uZSwgdHggc2V0dGxlZA0KICAgICAgICAgICAgICAgICAvLyA2MDogcmVqZWN0ZWQgb3IgZXJyb3ItZWQsIGNvc3RpbmcgZG9uZSwgdHggc2V0dGxlZA0KDQogICAgYm9vbCBpc3hJUEZTOyAgLy8gdHJ1ZTogSVBGUy1hdWdtZW50ZWQgY2FsbCAoeElQRlMpOyBmYWxzZTogb24tY2hhaW4gY2FsbA0KICB9DQoNCiAgc3RydWN0IE5vdGlmaWNhdGlvbiB7DQogICAgdWludDggdHJhbnNwb3J0OyAvLyAxOiBzbXMsIDI6IGVtYWlsDQogICAgc3RyaW5nIGRlc3RpbmF0aW9uOw0KICAgIHN0cmluZyBtZXNzYWdlOw0KICB9DQoNCiAgbWFwcGluZyh1aW50ID0+IFRhc2spIHB1YmxpYyB0YXNrczsNCiAgbWFwcGluZyh1aW50ID0+IE5vdGlmaWNhdGlvbikgcHVibGljIG5vdGlmaWNhdGlvbnM7DQogIG1hcHBpbmcodWludCA9PiBzdHJpbmcpIHB1YmxpYyB4bm90aWZpY2F0aW9uczsgLy8gSVBGUy1hdWdtZW50ZWQgTm90aWZpY2F0aW9uIChoYXNoKQ0KICB1aW50IHB1YmxpYyB0YXNrc0NvdW50ID0gMDsNCg0KICAvKioNCiAgICogRXZlbnRzIHRvIGJlIHBpY2tlZCB1cCBieSBBUEkNCiAgICovDQogIGV2ZW50IFRhc2tVcGRhdGVkKHVpbnQgaWQsIHVpbnQ4IHN0YXRlKTsNCg0KICBmdW5jdGlvbiBOb3RpZmllcihzdHJpbmcgX3hJUEZTUHVibGljS2V5KSBwdWJsaWMgew0KICAgIHhJUEZTUHVibGljS2V5ID0gX3hJUEZTUHVibGljS2V5Ow0KICAgIG93bmVyc0NvdW50Kys7DQogICAgb3duZXJzW21zZy5zZW5kZXJdID0gdHJ1ZTsNCiAgfQ0KDQovKioNCiAqIC0tLS0tLS0tLS0tLS0tDQogKiBNYWluIGZ1bmN0aW9ucw0KICogLS0tLS0tLS0tLS0tLS0NCiAqLw0KDQogIC8qKg0KICAgKiBTZW5kcyBub3RpZmljYXRpb24NCiAgICovDQogIGZ1bmN0aW9uIG5vdGlmeSh1aW50OCBfdHJhbnNwb3J0LCBzdHJpbmcgX2Rlc3RpbmF0aW9uLCBzdHJpbmcgX21lc3NhZ2UpIHB1YmxpYyBwYXlhYmxlIGhhbmRsZURlcG9zaXQgew0KICAgIGlmIChfdHJhbnNwb3J0ICE9IDEgJiYgX3RyYW5zcG9ydCAhPSAyKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICB1aW50IGlkID0gdGFza3NDb3VudDsNCiAgICB1aW50OCBzdGF0ZSA9IDEwOyAvLyBwZW5kaW5nDQoNCiAgICBjcmVhdGVUeChpZCwgbXNnLnNlbmRlciwgbWluRXRoUGVyTm90aWZpY2F0aW9uKTsNCiAgICBub3RpZmljYXRpb25zW2lkXSA9IE5vdGlmaWNhdGlvbih7DQogICAgICB0cmFuc3BvcnQ6IF90cmFuc3BvcnQsDQogICAgICBkZXN0aW5hdGlvbjogX2Rlc3RpbmF0aW9uLA0KICAgICAgbWVzc2FnZTogX21lc3NhZ2UNCiAgICB9KTsNCiAgICB0YXNrc1tpZF0gPSBUYXNrKHsNCiAgICAgIHNlbmRlcjogbXNnLnNlbmRlciwNCiAgICAgIHN0YXRlOiBzdGF0ZSwNCiAgICAgIGlzeElQRlM6IGZhbHNlIC8vIG9uLWNoYWluDQogICAgfSk7DQoNCiAgICBUYXNrVXBkYXRlZChpZCwgc3RhdGUpOw0KICAgICsrdGFza3NDb3VudDsNCiAgfQ0KDQovKioNCiAqIC0tLS0tLS0tLS0tLS0tDQogKiBFeHRlbmRlZCBmdW5jdGlvbnMsIGZvcg0KICogLSBJUEZTLWF1Z21lbnRlZCBjYWxscw0KICogLSBFbmNyeXB0ZWQgY2FsbHMNCiAqIC0tLS0tLS0tLS0tLS0tDQogKi8NCg0KICBmdW5jdGlvbiB4bm90aWZ5KHN0cmluZyBfaGFzaCkgcHVibGljIHBheWFibGUgaGFuZGxlRGVwb3NpdCB7DQogICAgdWludCBpZCA9IHRhc2tzQ291bnQ7DQogICAgdWludDggc3RhdGUgPSAxMDsgLy8gcGVuZGluZw0KDQogICAgY3JlYXRlVHgoaWQsIG1zZy5zZW5kZXIsIG1pbkV0aFBlck5vdGlmaWNhdGlvbik7DQogICAgeG5vdGlmaWNhdGlvbnNbaWRdID0gX2hhc2g7DQogICAgdGFza3NbaWRdID0gVGFzayh7DQogICAgICBzZW5kZXI6IG1zZy5zZW5kZXIsDQogICAgICBzdGF0ZTogc3RhdGUsDQogICAgICBpc3hJUEZTOiB0cnVlDQogICAgfSk7DQoNCiAgICBUYXNrVXBkYXRlZChpZCwgc3RhdGUpOw0KICAgICsrdGFza3NDb3VudDsNCiAgfQ0KDQovKioNCiAqIC0tLS0tLS0tLS0tLS0tDQogKiBPd25lci1vbmx5IGZ1bmN0aW9ucw0KICogLS0tLS0tLS0tLS0tLS0tDQogKi8NCg0KICBmdW5jdGlvbiB1cGRhdGVNaW5FdGhQZXJOb3RpZmljYXRpb24odWludCBfbmV3TWluKSBwdWJsaWMgb25seU1hbmFnZXJzIHsNCiAgICBtaW5FdGhQZXJOb3RpZmljYXRpb24gPSBfbmV3TWluOw0KICB9DQoNCiAgLyoqDQogICAqIE1hcmsgdGFzayBhcyBwcm9jZXNzZWQsIGJ1dCBubyBjb3N0aW5nIHlldA0KICAgKiBUaGlzIGlzIGFuIG9wdGlvbmFsIHN0YXRlDQogICAqLw0KICBmdW5jdGlvbiB0YXNrUHJvY2Vzc2VkTm9Db3N0aW5nKHVpbnQgX2lkKSBwdWJsaWMgb25seU1hbmFnZXJzIHsNCiAgICB1cGRhdGVTdGF0ZShfaWQsIDIwLCAwKTsNCiAgfQ0KDQogIC8qKg0KICAgKiBNYXJrIHRhc2sgYXMgcHJvY2Vzc2VkLCBhbmQgcHJvY2VzcyBmdW5kcyArIGNvc3RpbmdzDQogICAqIFRoaXMgaXMgYSBGSU5BTCBzdGF0ZQ0KICAgKi8NCiAgZnVuY3Rpb24gdGFza1Byb2Nlc3NlZFdpdGhDb3N0aW5nKHVpbnQgX2lkLCB1aW50IF9jb3N0KSBwdWJsaWMgb25seU1hbmFnZXJzIHsNCiAgICB1cGRhdGVTdGF0ZShfaWQsIDUwLCBfY29zdCk7DQogIH0NCg0KICAvKioNCiAgICogTWFyayB0YXNrIGFzIHJlamVjdGVkIG9yIGVycm9yLWVkLCAgYW5kIHByb2Nlc3NlZCBmdW5kcyArIGNvc3RpbmdzDQogICAqIFRoaXMgaXMgYSBGSU5BTCBzdGF0ZQ0KICAgKi8NCiAgZnVuY3Rpb24gdGFza1JlamVjdGVkKHVpbnQgX2lkLCB1aW50IF9jb3N0KSBwdWJsaWMgb25seU1hbmFnZXJzIHsNCiAgICB1cGRhdGVTdGF0ZShfaWQsIDYwLCBfY29zdCk7DQogIH0NCg0KICAvKioNCiAgICogVXBkYXRlIHB1YmxpYyBrZXkgZm9yIHhJUEZTDQogICAqLw0KICBmdW5jdGlvbiB1cGRhdGVYSVBGU1B1YmxpY0tleShzdHJpbmcgX3B1YmxpY0tleSkgcHVibGljIG9ubHlPd25lcnMgew0KICAgIHhJUEZTUHVibGljS2V5ID0gX3B1YmxpY0tleTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHVwZGF0ZVN0YXRlKHVpbnQgX2lkLCB1aW50OCBfc3RhdGUsIHVpbnQgX2Nvc3QpIGludGVybmFsIHsNCiAgICBpZiAodGFza3NbX2lkXS5zdGF0ZSA9PSAwIHx8IHRhc2tzW19pZF0uc3RhdGUgPj0gNTApIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIHRhc2tzW19pZF0uc3RhdGUgPSBfc3RhdGU7DQoNCiAgICAvLyBDb3N0IHNldHRsZW1lbnQgaXMgZG9uZSBvbmx5IGZvciBmaW5hbCBzdGF0ZXMgKD49IDUwKQ0KICAgIGlmIChfc3RhdGUgPj0gNTApIHsNCiAgICAgIHNldHRsZShfaWQsIF9jb3N0KTsNCiAgICB9DQogICAgVGFza1VwZGF0ZWQoX2lkLCBfc3RhdGUpOw0KICB9DQoNCiAgLyoqDQogICAqIEhhbmRsZSBkZXBvc2l0cw0KICAgKi8NCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSBoYW5kbGVEZXBvc2l0IHsNCiAgfQ0KfQ=='