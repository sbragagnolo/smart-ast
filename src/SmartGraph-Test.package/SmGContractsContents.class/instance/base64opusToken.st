base 64 content
base64opusToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQoNCi8qKg0KICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcw0KICogQnkgT3BlblplcHBlbGluOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy9TYWZlTWF0aC5zb2wNCiAqLw0KbGlicmFyeSBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOw0KICAgIGlmKCEoYSA9PSAwIHx8IGMgLyBhID09IGIpKSB0aHJvdzsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMA0KICAgIHVpbnQyNTYgYyA9IGEgLyBiOw0KICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkDQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICBpZighKGIgPD0gYSkpIHRocm93Ow0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKyBiOw0KICAgIGlmKCEoYyA+PSBhKSkgdGhyb3c7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQp9DQoNCmNvbnRyYWN0IENvbnRyYWN0UmVjZWl2ZXJ7DQogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgIF9kYXRhKSBleHRlcm5hbDsNCn0NCg0KDQovL0Jhc2ljIEVSQzIzIHRva2VuLCBiYWNrd2FyZCBjb21wYXRpYmxlIHdpdGggRVJDMjAgdHJhbnNmZXIgZnVuY3Rpb24uDQovL0Jhc2VkIGluIHBhcnQgb24gY29kZSBieSBvcGVuLXplcHBlbGluOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5LmdpdA0KY29udHJhY3QgRVJDMjNCYXNpY1Rva2VuIHsNCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7DQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7DQogICAgDQogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgIF9kYXRhKSBleHRlcm5hbCB7DQogICAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KDQogICAgICAgIC8vU3RhbmRhcmQgRVJDMjMgdHJhbnNmZXIgZnVuY3Rpb24NCg0KICAgICAgICBpZihpc0NvbnRyYWN0KF90bykpIHsNCiAgICAgICAgICAgIHRyYW5zZmVyVG9Db250cmFjdChfdG8sIF92YWx1ZSwgX2RhdGEpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIF9kYXRhKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsNCg0KICAgICAgICAvL3N0YW5kYXJkIGZ1bmN0aW9uIHRyYW5zZmVyIHNpbWlsYXIgdG8gRVJDMjAgdHJhbnNmZXIgd2l0aCBubyBfZGF0YQ0KICAgICAgICAvL2FkZGVkIGR1ZSB0byBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zDQoNCiAgICAgICAgYnl0ZXMgbWVtb3J5IGVtcHR5Ow0KICAgICAgICBpZihpc0NvbnRyYWN0KF90bykpIHsNCiAgICAgICAgICAgIHRyYW5zZmVyVG9Db250cmFjdChfdG8sIF92YWx1ZSwgZW1wdHkpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIGVtcHR5KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9BZGRyZXNzKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGludGVybmFsIHsNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsNCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0NvbnRyYWN0KGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGludGVybmFsIHsNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoIF92YWx1ZSk7DQogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZCggX3ZhbHVlKTsNCiAgICAgICAgQ29udHJhY3RSZWNlaXZlciByZWNlaXZlciA9IENvbnRyYWN0UmVjZWl2ZXIoX3RvKTsNCiAgICAgICAgcmVjZWl2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsNCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOyAgICB9DQoNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgew0KICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCiAgICB9DQoNCiAgICAvL2Fzc2VtYmxlIHRoZSBnaXZlbiBhZGRyZXNzIGJ5dGVjb2RlLiBJZiBieXRlY29kZSBleGlzdHMgdGhlbiB0aGUgX2FkZHIgaXMgYSBjb250cmFjdC4NCiAgICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIHJldHVybnMgKGJvb2wgaXNfY29udHJhY3QpIHsNCiAgICAgICAgICB1aW50MjU2IGxlbmd0aDsNCiAgICAgICAgICBhc3NlbWJseSB7DQogICAgICAgICAgICAgIC8vcmV0cmlldmUgdGhlIHNpemUgb2YgdGhlIGNvZGUgb24gdGFyZ2V0IGFkZHJlc3MsIHRoaXMgbmVlZHMgYXNzZW1ibHkNCiAgICAgICAgICAgICAgbGVuZ3RoIDo9IGV4dGNvZGVzaXplKF9hZGRyKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihsZW5ndGg+MCkgew0KICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9DQogICAgfQ0KfQ0KDQpjb250cmFjdCBFUkMyM1N0YW5kYXJkVG9rZW4gaXMgRVJDMjNCYXNpY1Rva2VuIHsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7DQogICAgZXZlbnQgQXBwcm92YWwgKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOw0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgew0KICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOw0KDQogICAgICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldA0KICAgICAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7DQoNCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7DQogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsNCiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOw0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHsNCg0KICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYA0KICAgICAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdA0KICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToNCiAgICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5DQogICAgICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7DQoNCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsNCiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogICAgfQ0KDQp9DQoNCg0KDQoNCi8vIEJhc2VkIGluIHBhcnQgb24gY29kZSBieSBPcGVuLVplcHBlbGluOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5LmdpdA0KLy8gQmFzZWQgaW4gcGFydCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbA0KY29udHJhY3QgT3B1c1Rva2VuIGlzIEVSQzIzU3RhbmRhcmRUb2tlbiB7DQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIk9wdXMgVG9rZW4iOw0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIk9QVCI7DQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsNCiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZz1hZGRyZXNzKDB4MTQyNmMxZjkxYjkyMzA0M0Y3QzVGYmFiQzZlMzY5ZTdjQmFlZjNmMCk7IC8vbXVsdGlzaWcgd2FsbGV0LCB0byB3aGljaCBhbGwgY29udHJpYnV0aW9ucyB3aWxsIGJlIHNlbnQNCiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGF0aW9uOyAvL293bmVyIGFkZHJlc3MNCiAgICBhZGRyZXNzIHB1YmxpYyBjYW5kaWRhdGU7IC8vb3duZXIgY2FuZGlkYXRlIGluIDItcGhhc2Ugb3duZXJzaGlwIHRyYW5zZmVyDQoNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGNvbnRyaWJ1dGlvbnM7IC8va2VlcHMgdHJhY2sgb2YgZXRoZXIgY29udHJpYnV0aW9ucyBpbiBXZWkgb2YgZWFjaCBjb250cmlidXRvciBhZGRyZXNzDQogICAgdWludDI1NiBwdWJsaWMgc3RhcnRCbG9jayA9IDQwMjMzMzM7IC8vcHJlLWNyb3dkc2FsZSBzdGFydCBibG9jayAoMzBtaW4gZWFsaWVyIHRoYW4gZXN0aW1hdGUpIA0KICAgIHVpbnQyNTYgcHVibGljIHByZUVuZEJsb2NrID0gNDA1NzIzMzsgLy9wcmUtY3Jvd2RzYWxlIGVuZCBibG9jaygxaCBhZnRlciBlc3RpbWF0ZWQgdGltZSkNCiAgICB1aW50MjU2IHB1YmxpYyBwaGFzZTFTdGFydEJsb2NrID0gNDA2NjYzMzsgLy9Dcm93ZHNhbGUgc3RhcnQgYmxvY2sgKDFoIGVhcmxpZXIpDQogICAgdWludDI1NiBwdWJsaWMgcGhhc2UxRW5kQmxvY2sgPSA0MTAwMjMzOyAvL1dlZWsgMSBlbmQgYmxvY2sgKGVzdGltYXRlKQ0KICAgIHVpbnQyNTYgcHVibGljIHBoYXNlMkVuZEJsb2NrID0gNDEzMzgzMzsgLy9XZWVrIDIgZW5kIGJsb2NrIChlc3RpbWF0ZSkNCiAgICB1aW50MjU2IHB1YmxpYyBwaGFzZTNFbmRCbG9jayA9IDQyMDE0MzM7IC8vV2VlayA0IGVuZCBibG9jayAoMmggbGF0ZXIpDQogICAgdWludDI1NiBwdWJsaWMgZW5kQmxvY2sgPSA0MjAxNDMzOyAvL3dob2xlIGNyb3dkc2FsZSBlbmQgYmxvY2sNCiAgICB1aW50MjU2IHB1YmxpYyBjcm93ZHNhbGVUb2tlblN1cHBseSA9IDkwMDAwMDAwMCAqICgxMCoqMTgpOyAvL0Ftb3VudCBvZiB0b2tlbnMgZm9yIHNhbGUgZHVyaW5nIGNyb3dkc2FsZQ0KICAgIHVpbnQyNTYgcHVibGljIGVjb3N5c3RlbVRva2VuU3VwcGx5ID0gMTAwMDAwMDAwICogKDEwKioxOCk7IC8vVG9rZW5zIGZvciBzdXBwb3J0aW5nIHRoZSBPcHVzIGVjby1zeXN0ZW0sIGUuZy4gcHVyY2hhc2luZyBtdXNpYyBsaWNlbnNlcywgYXJ0aXN0IGJvdW50aWVzLCBldGMuDQogICAgdWludDI1NiBwdWJsaWMgZm91bmRhdGlvblRva2VuU3VwcGx5ID0gNjAwMDAwMDAwICogKDEwKioxOCk7IC8vVG9rZW5zIGRpc3RyaWJ1dGVkIHRvIHRoZSBPcHVzIGZvdW5kYXRpb24sIGRldmVsb3BlcnMgYW5kIGFuZ2VsIGludmVzdG9ycw0KICAgIHVpbnQyNTYgcHVibGljIGNyb3dkc2FsZVRva2VuU29sZCA9IDA7IC8vS2VlcHMgdHJhY2sgb2YgdGhlIGFtb3VudCBvZiB0b2tlbnMgc29sZCBkdXJpbmcgdGhlIGNyb3dkc2FsZQ0KICAgIHVpbnQyNTYgcHVibGljIHByZXNhbGVFdGhlclJhaXNlZCA9IDA7IC8vS2VlcHMgdHJhY2sgb2YgdGhlIEV0aGVyIHJhaXNlZCBkdXJpbmcgdGhlIGNyb3dkc2FsZQ0KICAgIHVpbnQyNTYgcHVibGljIHRyYW5zZmVyTG9ja3VwID0gOTYwMDsNCiAgICBib29sIHB1YmxpYyBoYWx0ZWQgPSBmYWxzZTsgLy9IYWx0IGNyb3dkc2FsZSBpbiBlbWVyZ2VuY3kNCiAgICBldmVudCBIYWx0KCk7IC8vSGFsdCBldmVudA0KICAgIGV2ZW50IFVuaGFsdCgpOyAvL1VuaGFsdCBldmVudA0KDQogICAgbW9kaWZpZXIgb25seUZvdW5kYXRpb24oKSB7DQogICAgICAgIC8vb25seSBkbyBpZiBjYWxsIGlzIGZyb20gb3duZXIgbW9kaWZpZXINCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gZm91bmRhdGlvbikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgbW9kaWZpZXIgY3Jvd2RzYWxlVHJhbnNmZXJMb2NrKCkgew0KICAgICAgICAvLyBsb2NrdXAgZHVyaW5nIGFuZCBhZnRlciA0OGggb2YgZW5kIG9mIGNyb3dkc2FsZQ0KICAgICAgICBpZiAoYmxvY2subnVtYmVyIDw9IGVuZEJsb2NrLmFkZCh0cmFuc2ZlckxvY2t1cCkpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIHdoZW5Ob3RIYWx0ZWQoKSB7DQogICAgICAgIC8vIG9ubHkgZG8gd2hlbiBub3QgaGFsdGVkIG1vZGlmaWVyDQogICAgICAgIGlmIChoYWx0ZWQpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vQ29uc3RydWN0b3I6IHNldCBtdWx0aXNpZyBjcm93ZHNhbGUgcmVjaXBpZW50IHdhbGxldCBhZGRyZXNzIGFuZCBmdW5kIHRoZSBmb3VuZGF0aW9uDQogICAgLy9Jbml0aWFsaXplIHRvdGFsIHN1cHBseSBhbmQgYWxsb2NhdGUgZWNvc3lzdGVtICYgZm91bmRhdGlvbiB0b2tlbnMNCiAgCWZ1bmN0aW9uIE9wdXNUb2tlbigpIHsNCiAgICAgICAgZm91bmRhdGlvbiA9IG1zZy5zZW5kZXI7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gZWNvc3lzdGVtVG9rZW5TdXBwbHkuYWRkKGZvdW5kYXRpb25Ub2tlblN1cHBseSk7DQogICAgICAgIGJhbGFuY2VzW2ZvdW5kYXRpb25dID0gdG90YWxTdXBwbHk7DQogIAl9DQoNCiAgICAvL0ZhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gcmVjZWl2aW5nIEV0aGVyLg0KICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7DQogICAgICAgIGJ1eSgpOw0KICAgIH0NCg0KDQogICAgLy9IYWx0IElDTyBpbiBjYXNlIG9mIGVtZXJnZW5jeS4NCiAgICBmdW5jdGlvbiBoYWx0KCkgb25seUZvdW5kYXRpb24gew0KICAgICAgICBoYWx0ZWQgPSB0cnVlOw0KICAgICAgICBIYWx0KCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdW5oYWx0KCkgb25seUZvdW5kYXRpb24gew0KICAgICAgICBoYWx0ZWQgPSBmYWxzZTsNCiAgICAgICAgVW5oYWx0KCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYnV5KCkgcGF5YWJsZSB7DQogICAgICAgIGJ1eVJlY2lwaWVudChtc2cuc2VuZGVyKTsNCiAgICB9DQoNCiAgICAvL0FsbG93IGFkZHJlc3NlcyB0byBidXkgdG9rZW4gZm9yIGFub3RoZXIgYWNjb3VudA0KICAgIGZ1bmN0aW9uIGJ1eVJlY2lwaWVudChhZGRyZXNzIHJlY2lwaWVudCkgcHVibGljIHBheWFibGUgd2hlbk5vdEhhbHRlZCB7DQogICAgICAgIGlmKG1zZy52YWx1ZSA9PSAwKSB0aHJvdzsNCiAgICAgICAgaWYoIShwcmVDcm93ZHNhbGVPbigpfHxjcm93ZHNhbGVPbigpKSkgdGhyb3c7Ly9vbmx5IGFsbG93cyBkdXJpbmcgcHJlc2FsZS9jcm93ZHNhbGUNCiAgICAgICAgaWYoY29udHJpYnV0aW9uc1tyZWNpcGllbnRdLmFkZChtc2cudmFsdWUpPnBlckFkZHJlc3NDYXAoKSkgdGhyb3c7Ly9wZXIgYWRkcmVzcyBjYXANCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBtc2cudmFsdWUubXVsKHJldHVyblJhdGUoKSk7IC8vZGVjaW1hbHM9MTgsIHNvIG5vIG5lZWQgdG8gYWRqdXN0IGZvciB1bml0DQogICAgICAgIGlmKGNyb3dkc2FsZVRva2VuU29sZC5hZGQodG9rZW5zKT5jcm93ZHNhbGVUb2tlblN1cHBseSkgdGhyb3c7Ly9tYXggc3VwcGx5IGxpbWl0DQoNCiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IGJhbGFuY2VzW3JlY2lwaWVudF0uYWRkKHRva2Vucyk7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKHRva2Vucyk7DQogICAgICAgIHByZXNhbGVFdGhlclJhaXNlZCA9IHByZXNhbGVFdGhlclJhaXNlZC5hZGQobXNnLnZhbHVlKTsNCiAgICAgICAgY29udHJpYnV0aW9uc1tyZWNpcGllbnRdID0gY29udHJpYnV0aW9uc1tyZWNpcGllbnRdLmFkZChtc2cudmFsdWUpOw0KICAgICAgICBjcm93ZHNhbGVUb2tlblNvbGQgPSBjcm93ZHNhbGVUb2tlblNvbGQuYWRkKHRva2Vucyk7DQogICAgICAgIGlmKGNyb3dkc2FsZVRva2VuU29sZCA9PSBjcm93ZHNhbGVUb2tlblN1cHBseSl7DQogICAgICAgIC8vSWYgY3Jvd2RzYWxlIHRva2VuIHNvbGQgb3V0LCBlbmQgY3Jvd2RzYWxlDQogICAgICAgICAgICBpZihibG9jay5udW1iZXIgPCBwcmVFbmRCbG9jaykgew0KICAgICAgICAgICAgICAgIHByZUVuZEJsb2NrID0gYmxvY2subnVtYmVyOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZW5kQmxvY2sgPSBibG9jay5udW1iZXI7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFtdWx0aXNpZy5zZW5kKG1zZy52YWx1ZSkpIHRocm93OyAvL2ltbWVkaWF0ZWx5IHNlbmQgRXRoZXIgdG8gbXVsdGlzaWcgYWRkcmVzcw0KICAgICAgICBUcmFuc2Zlcih0aGlzLCByZWNpcGllbnQsIHRva2Vucyk7DQogICAgfQ0KDQogICAgLy9CdXJucyB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgZnJvbSB0aGUgZm91bmRhdGlvbg0KICAgIC8vVXNlZCB0byBidXJuIHVuc3BlbnQgZnVuZHMgaW4gZm91bmRhdGlvbiBEQU8NCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCBvbmx5Rm91bmRhdGlvbiByZXR1cm5zIChib29sKSB7DQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vMi1waGFzZSBvd25lcnNoaXAgdHJhbnNmZXI7DQogICAgLy9wcmV2ZW50IHRyYW5zZmVycmluZyBvd25lcnNoaXAgdG8gbm9uLWV4aXN0ZW50IGFkZHJlc3NlcyBieSBhY2NpZGVudC4NCiAgICBmdW5jdGlvbiBwcm9wb3NlRm91bmRhdGlvblRyYW5zZmVyKGFkZHJlc3MgbmV3Rm91bmRhdGlvbikgZXh0ZXJuYWwgb25seUZvdW5kYXRpb24gew0KICAgICAgICAvL3Byb3Bvc2UgbmV3IG93bmVyDQogICAgICAgIGNhbmRpZGF0ZSA9IG5ld0ZvdW5kYXRpb247DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2FuY2VsRm91bmRhdGlvblRyYW5zZmVyKCkgZXh0ZXJuYWwgb25seUZvdW5kYXRpb24gew0KICAgICAgICBjYW5kaWRhdGUgPSBhZGRyZXNzKDApOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFjY2VwdEZvdW5kYXRpb25UcmFuc2ZlcigpIGV4dGVybmFsIHsNCiAgICAgICAgLy9uZXcgb3duZXIgYWNjZXB0IHRyYW5zZmVyIHRvIGNvbXBsZXRlIHRyYW5zZmVyDQogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gY2FuZGlkYXRlKSB0aHJvdzsNCiAgICAgICAgZm91bmRhdGlvbiA9IGNhbmRpZGF0ZTsNCiAgICAgICAgY2FuZGlkYXRlID0gYWRkcmVzcygwKTsNCiAgICB9DQoNCiAgICAvL0FsbG93IHRvIGNoYW5nZSB0aGUgcmVjaXBpZW50IG11bHRpc2lnIGFkZHJlc3MNCiAgICBmdW5jdGlvbiBzZXRNdWx0aXNpZyhhZGRyZXNzIGFkZHIpIGV4dGVybmFsIG9ubHlGb3VuZGF0aW9uIHsNCiAgICAgIAlpZiAoYWRkciA9PSBhZGRyZXNzKDApKSB0aHJvdzsNCiAgICAgIAltdWx0aXNpZyA9IGFkZHI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIGNyb3dkc2FsZVRyYW5zZmVyTG9jayByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlLCBfZGF0YSk7DQogICAgfQ0KDQoJICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBjcm93ZHNhbGVUcmFuc2ZlckxvY2sgew0KICAgICAgICBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7DQoJICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgY3Jvd2RzYWxlVHJhbnNmZXJMb2NrIHsNCiAgICAgICAgc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgfQ0KDQogICAgLy9SZXR1cm4gcmF0ZSBvZiB0b2tlbiBhZ2FpbnN0IGV0aGVyLg0KICAgIGZ1bmN0aW9uIHJldHVyblJhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7DQogICAgICAgIGlmIChibG9jay5udW1iZXI+PXN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1wcmVFbmRCbG9jaykgcmV0dXJuIDg4ODg7IC8vUHJlLWNyb3dkc2FsZQ0KICAgICAgICBpZiAoYmxvY2subnVtYmVyPj1waGFzZTFTdGFydEJsb2NrICYmIGJsb2NrLm51bWJlcjw9cGhhc2UxRW5kQmxvY2spIHJldHVybiA4MDAwOyAvL0Nyb3dkc2FsZSBwaGFzZTENCiAgICAgICAgaWYgKGJsb2NrLm51bWJlcj5waGFzZTFFbmRCbG9jayAmJiBibG9jay5udW1iZXI8PXBoYXNlMkVuZEJsb2NrKSByZXR1cm4gNzUwMDsgLy9QaGFzZTINCiAgICAgICAgaWYgKGJsb2NrLm51bWJlcj5waGFzZTJFbmRCbG9jayAmJiBibG9jay5udW1iZXI8PXBoYXNlM0VuZEJsb2NrKSByZXR1cm4gNzAwMDsgLy9QaGFzZTMNCiAgICB9DQoNCiAgICAvL3BlciBhZGRyZXNzIGNhcCBpbiBXZWk6IDEwMDAgZXRoZXIgKyAxJSBvZiBldGhlciByZWNlaXZlZCBhdCB0aGUgZ2l2ZW4gdGltZS4NCiAgICBmdW5jdGlvbiBwZXJBZGRyZXNzQ2FwKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1Nikgew0KICAgICAgICB1aW50MjU2IGJhc2VsaW5lID0gMTAwMCAqICgxMCoqMTgpOw0KICAgICAgICByZXR1cm4gYmFzZWxpbmUuYWRkKHByZXNhbGVFdGhlclJhaXNlZC5kaXYoMTAwKSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcHJlQ3Jvd2RzYWxlT24oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICAvL3JldHVybiB3aGV0aGVyIHByZXNhbGUgaXMgb24gYWNjb3JkaW5nIHRvIGJsb2NrIG51bWJlcg0KICAgICAgICByZXR1cm4gKGJsb2NrLm51bWJlcj49c3RhcnRCbG9jayAmJiBibG9jay5udW1iZXI8PXByZUVuZEJsb2NrKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjcm93ZHNhbGVPbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIC8vcmV0dXJuIHdoZXRoZXIgY3Jvd2RzYWxlIGlzIG9uIGFjY29yZGluZyB0byBibG9jayBudW1iZXINCiAgICAgICAgcmV0dXJuIChibG9jay5udW1iZXI+PXBoYXNlMVN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1lbmRCbG9jayk7DQogICAgfQ0KDQoNCiAgICBmdW5jdGlvbiBnZXRFdGhlclJhaXNlZCgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICAgICAgLy9nZXR0ZXIgZnVuY3Rpb24gZm9yIGV0aGVyUmFpc2VkDQogICAgICAgIHJldHVybiBwcmVzYWxlRXRoZXJSYWlzZWQ7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0VG9rZW5Tb2xkKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgICAvL2dldHRlciBmdW5jdGlvbiBmb3IgY3Jvd2RzYWxlVG9rZW5Tb2xkDQogICAgICAgIHJldHVybiBjcm93ZHNhbGVUb2tlblNvbGQ7DQogICAgfQ0KDQp9'