base 64 content
base64oxToken1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KbGlicmFyeSBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICBhc3NlcnQoYiA+IDApOw0KICAgIHVpbnQgYyA9IGEgLyBiOw0KICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgcmV0dXJuIGEgLSBiOw0KICB9DQoNCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSArIGI7DQogICAgYXNzZXJ0KGMgPj0gYSk7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgew0KICAgIGlmICghYXNzZXJ0aW9uKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogIH0NCn0NCg0KLyoNCiAqIEVSQzIwQmFzaWMNCiAqIFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UNCiAqIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjANCiAqLw0KY29udHJhY3QgRVJDMjBCYXNpYyB7DQogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5Ow0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOw0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsNCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7DQp9DQoNCi8qDQogKiBFUkMyMCBpbnRlcmZhY2UNCiAqIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjANCiAqLw0KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7DQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOw0KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsNCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsNCn0NCg0KLyoNCiAqIEJhc2ljIHRva2VuDQogKiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcw0KICovDQpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgew0KICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsNCg0KICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7DQoNCiAgLyoNCiAgICogRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2sgIA0KICAgKi8NCiAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgew0KICAgICBpZihtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkgew0KICAgICAgIHRocm93Ow0KICAgICB9DQogICAgIF87DQogIH0NCg0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsNCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOw0KICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7DQogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogIH0NCiAgDQp9DQoNCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgew0KDQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsNCg0KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB7DQogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsNCg0KICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldA0KICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsNCg0KICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsNCiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7DQogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsNCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsNCiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgfQ0KDQp9DQoNCi8qDQoNCkxpbWl0ZWRUcmFuc2ZlclRva2VuIGRlZmluZXMgdGhlIGdlbmVyaWMgaW50ZXJmYWNlIGFuZCB0aGUgaW1wbGVtZW50YXRpb24NCnRvIGxpbWl0IHRva2VuIHRyYW5zZmVyYWJpbGl0eSBmb3IgZGlmZmVyZW50IGV2ZW50cy4NCg0KSXQgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBhcyBhIGJhc2UgY2xhc3MgZm9yIG90aGVyIHRva2VuIGNvbnRyYWN0cy4NCg0KT3ZlcndyaXRpbmcgdHJhbnNmZXJhYmxlVG9rZW5zKGFkZHJlc3MgaG9sZGVyLCB1aW50NjQgdGltZSkgaXMgdGhlIHdheSB0byBwcm92aWRlDQp0aGUgc3BlY2lmaWMgbG9naWMgZm9yIGxpbWl0aW5nIHRva2VuIHRyYW5zZmVyYWJpbGl0eSBmb3IgYSBob2xkZXIgb3ZlciB0aW1lLg0KDQpMaW1pdGVkVHJhbnNmZXJUb2tlbiBoYXMgYmVlbiBkZXNpZ25lZCB0byBhbGxvdyBmb3IgZGlmZmVyZW50IGxpbWl0aW5nIGZhY3RvcnMsDQp0aGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZWN1cnNpdmVseSBjYWxsaW5nIHN1cGVyLnRyYW5zZmVyYWJsZVRva2VucygpIHVudGlsIHRoZQ0KYmFzZSBjbGFzcyBpcyBoaXQuIEZvciBleGFtcGxlOg0KDQpmdW5jdGlvbiB0cmFuc2ZlcmFibGVUb2tlbnMoYWRkcmVzcyBob2xkZXIsIHVpbnQ2NCB0aW1lKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1Nikgew0KICByZXR1cm4gbWluMjU2KHVubG9ja2VkVG9rZW5zLCBzdXBlci50cmFuc2ZlcmFibGVUb2tlbnMoaG9sZGVyLCB0aW1lKSk7DQp9DQoNCkEgd29ya2luZyBleGFtcGxlIGlzIFZlc3RlZFRva2VuLnNvbDoNCmh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzL3Rva2VuL1Zlc3RlZFRva2VuLnNvbA0KDQoqLw0KDQpjb250cmFjdCBMaW1pdGVkVHJhbnNmZXJUb2tlbiBpcyBFUkMyMCB7DQogIC8vIENoZWNrcyB3aGV0aGVyIGl0IGNhbiB0cmFuc2ZlciBvciBvdGhlcndpc2UgdGhyb3dzLg0KICBtb2RpZmllciBjYW5UcmFuc2ZlcihhZGRyZXNzIF9zZW5kZXIsIHVpbnQgX3ZhbHVlKSB7DQogICBpZiAoX3ZhbHVlID4gdHJhbnNmZXJhYmxlVG9rZW5zKF9zZW5kZXIsIHVpbnQ2NChub3cpKSkgdGhyb3c7DQogICBfOw0KICB9DQoNCiAgLy8gQ2hlY2tzIG1vZGlmaWVyIGFuZCBhbGxvd3MgdHJhbnNmZXIgaWYgdG9rZW5zIGFyZSBub3QgbG9ja2VkLg0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIGNhblRyYW5zZmVyKG1zZy5zZW5kZXIsIF92YWx1ZSkgew0KICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsNCiAgfQ0KDQogIC8vIENoZWNrcyBtb2RpZmllciBhbmQgYWxsb3dzIHRyYW5zZmVyIGlmIHRva2VucyBhcmUgbm90IGxvY2tlZC4NCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgY2FuVHJhbnNmZXIoX2Zyb20sIF92YWx1ZSkgew0KICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICB9DQoNCiAgLy8gRGVmYXVsdCB0cmFuc2ZlcmFibGUgdG9rZW5zIGZ1bmN0aW9uIHJldHVybnMgYWxsIHRva2VucyBmb3IgYSBob2xkZXIgKG5vIGxpbWl0KS4NCiAgZnVuY3Rpb24gdHJhbnNmZXJhYmxlVG9rZW5zKGFkZHJlc3MgaG9sZGVyLCB1aW50NjQgdGltZSkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYmFsYW5jZU9mKGhvbGRlcik7DQogIH0NCn0NCg0KY29udHJhY3QgT3duYWJsZSB7DQogIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQogIGZ1bmN0aW9uIE93bmFibGUoKSB7DQogICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICB9DQoNCiAgbW9kaWZpZXIgb25seU93bmVyKCkgew0KICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogICAgXzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7DQogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsNCiAgICAgIG93bmVyID0gbmV3T3duZXI7DQogICAgfQ0KICB9DQoNCn0NCg0KY29udHJhY3QgT3hUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBMaW1pdGVkVHJhbnNmZXJUb2tlbiwgT3duYWJsZSB7DQogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50Ow0KDQogIGV2ZW50IE94VG9rZW5Jbml0aWFsaXplZChhZGRyZXNzIF9vd25lcik7DQogIGV2ZW50IEluaXRpYWxUb2tlbnNBbGxvY2F0ZWQodWludCBfYW1vdW50KTsNCiAgZXZlbnQgT3duZXJUb2tlbnNBbGxvY2F0ZWQodWludCBfYW1vdW50KTsNCiAgZXZlbnQgU2FsZVN0YXJ0ZWQodWludCBfc2FsZUVuZFRpbWUpOw0KDQogIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJPeFRva2VuIjsNCiAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiT1giOw0KDQogIHVpbnQgcHVibGljIGRlY2ltYWxzID0gMzsNCiAgdWludCBwdWJsaWMgbXVsdGlwbGllciA9IDEwKipkZWNpbWFsczsNCiAgdWludCBwdWJsaWMgZXRoZXJSYXRpbyA9IFNhZmVNYXRoLmRpdigxIGV0aGVyLCBtdWx0aXBsaWVyKTsNCg0KICB1aW50IHB1YmxpYyBNQVhfU1VQUExZID0gU2FmZU1hdGgubXVsKDcwMDAwMDAwMCwgbXVsdGlwbGllcik7IC8vNTAlIChwdWJsaWMpICsgMjAlIChjb3Jwb3JhdGUpDQogIHVpbnQgcHVibGljIENPUlBPUkFURV9TVVBQTFkgPSBTYWZlTWF0aC5tdWwoMjAwMDAwMDAwLCBtdWx0aXBsaWVyKTsgLy8yMCUNCiAgdWludCBwdWJsaWMgQk9VTlRZX1NVUFBMWSA9IFNhZmVNYXRoLm11bCgyMDAwMDAwMDAsIG11bHRpcGxpZXIpOyAvLzIwJQ0KICB1aW50IHB1YmxpYyBURUFNX1NVUFBMWSA9IFNhZmVNYXRoLm11bCgxMDAwMDAwMDAsIG11bHRpcGxpZXIpOyAvLzEwJQ0KICB1aW50IHB1YmxpYyBQUklDRSA9IDMwMDA7IC8vMSBFdGhlciBidXlzIDMwMDAgT1gNCiAgdWludCBwdWJsaWMgTUlOX1BVUkNIQVNFID0gMTAqKjE3OyAvLyAwLjEgRXRoZXINCg0KICB1aW50MjU2IHB1YmxpYyBzYWxlU3RhcnRUaW1lID0gMDsNCiAgYm9vbCBwdWJsaWMgb3duZXJUb2tlbnNBbGxvY2F0ZWQgPSBmYWxzZTsNCiAgYm9vbCBwdWJsaWMgYmFsYW5jZXNJbml0aWFsaXplZCA9IGZhbHNlOw0KDQogIGZ1bmN0aW9uIE94VG9rZW4oKSB7DQogICAgT3hUb2tlbkluaXRpYWxpemVkKG1zZy5zZW5kZXIpOw0KICB9DQoNCiAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJhbGFuY2VzKCkgcHVibGljIHsNCiAgICBpZiAoYmFsYW5jZXNJbml0aWFsaXplZCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICAgIGJhbGFuY2VzW293bmVyXSA9IENPUlBPUkFURV9TVVBQTFk7DQogICAgdG90YWxTdXBwbHkgPSBDT1JQT1JBVEVfU1VQUExZOw0KICAgIGJhbGFuY2VzSW5pdGlhbGl6ZWQgPSB0cnVlOw0KICAgIFRyYW5zZmVyKDB4MCwgbXNnLnNlbmRlciwgQ09SUE9SQVRFX1NVUFBMWSk7DQogICAgSW5pdGlhbFRva2Vuc0FsbG9jYXRlZChDT1JQT1JBVEVfU1VQUExZKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNhbkJ1eVRva2VucygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChib29sKSB7DQogICAgLy9TYWxlIHJ1bnMgZm9yIDMxIGRheXMNCiAgICBpZiAoc2FsZVN0YXJ0VGltZSA9PSAwKSB7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgIGlmIChnZXROb3coKSA+IFNhZmVNYXRoLmFkZChzYWxlU3RhcnRUaW1lLCAzMSBkYXlzKSkgew0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRyYW5zZmVyYWJsZVRva2VucyhhZGRyZXNzIGhvbGRlciwgdWludDY0IHRpbWUpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7DQogICAgLy9Pd25lciBjYW4gYWx3YXlzIHRyYW5zZmVyIGJhbGFuY2UNCiAgICAvL0lmIHNhbGUgaGFzIGNvbXBsZXRlZCwgZXZlcnlvbmUgY2FuIHRyYW5zZmVyIGZ1bGwgYmFsYW5jZQ0KICAgIGlmIChob2xkZXIgPT0gb3duZXIpIHsNCiAgICAgIHJldHVybiBiYWxhbmNlT2YoaG9sZGVyKTsNCiAgICB9DQogICAgaWYgKChzYWxlU3RhcnRUaW1lID09IDApIHx8IGNhbkJ1eVRva2VucygpKSB7DQogICAgICByZXR1cm4gMDsNCiAgICB9DQogICAgcmV0dXJuIGJhbGFuY2VPZihob2xkZXIpOw0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnRTYWxlKCkgb25seU93bmVyIHsNCiAgICAvL0NhbiBvbmx5IHN0YXJ0IG9uY2UNCiAgICBpZiAoc2FsZVN0YXJ0VGltZSAhPSAwKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogICAgc2FsZVN0YXJ0VGltZSA9IGdldE5vdygpOw0KICAgIFNhbGVTdGFydGVkKHNhbGVTdGFydFRpbWUpOw0KICB9DQoNCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7DQogICAgY3JlYXRlVG9rZW5zKG1zZy5zZW5kZXIpOw0KICB9DQoNCiAgZnVuY3Rpb24gY3JlYXRlVG9rZW5zKGFkZHJlc3MgcmVjaXBpZW50KSBwYXlhYmxlIHsNCg0KICAgIC8vT25seSBhbGxvdyBwdXJjaGFzZXMgb3ZlciB0aGUgTUlOX1BVUkNIQVNFDQogICAgaWYgKG1zZy52YWx1ZSA8IE1JTl9QVVJDSEFTRSkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgLy9SZWplY3QgaWYgc2FsZSBoYXMgY29tcGxldGVkDQogICAgaWYgKCFjYW5CdXlUb2tlbnMoKSkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgLy9PdGhlcndpc2UgZ2VuZXJhdGUgdG9rZW5zDQogICAgdWludCB0b2tlbnMgPSBtc2cudmFsdWUubXVsKFBSSUNFKTsNCg0KICAgIC8vQWRkIG9uIGFueSBib251cw0KICAgIHVpbnQgYm9udXNQZXJjZW50YWdlID0gU2FmZU1hdGguYWRkKDEwMCwgYm9udXMoKSk7DQogICAgaWYgKGJvbnVzUGVyY2VudGFnZSAhPSAxMDApIHsNCiAgICAgIHRva2VucyA9IHRva2Vucy5tdWwocGVyY2VudChib251c1BlcmNlbnRhZ2UpKS5kaXYocGVyY2VudCgxMDApKTsNCiAgICB9DQoNCiAgICB0b2tlbnMgPSB0b2tlbnMuZGl2KGV0aGVyUmF0aW8pOw0KDQogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG9rZW5zKTsNCg0KICAgIC8vRG9uJ3QgYWxsb3cgdG90YWxTdXBwbHkgdG8gYmUgbGFyZ2VyIHRoYW4gTUFYX1NVUFBMWQ0KICAgIGlmICh0b3RhbFN1cHBseSA+IE1BWF9TVVBQTFkpIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIGJhbGFuY2VzW3JlY2lwaWVudF0gPSBiYWxhbmNlc1tyZWNpcGllbnRdLmFkZCh0b2tlbnMpOw0KDQogICAgLy9UcmFuc2ZlciBFdGhlciB0byBvd25lcg0KICAgIG93bmVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7DQoNCiAgfQ0KDQogIC8vRnVuY3Rpb24gdG8gYXNzaWduIHRlYW0gJiBib3VudHkgdG9rZW5zIHRvIG93bmVyDQogIGZ1bmN0aW9uIGFsbG9jYXRlT3duZXJUb2tlbnMoKSBwdWJsaWMgew0KDQogICAgLy9DYW4gb25seSBiZSBjYWxsZWQgb25jZQ0KICAgIGlmIChvd25lclRva2Vuc0FsbG9jYXRlZCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgLy9DYW4gb25seSBiZSBjYWxsZWQgYWZ0ZXIgc2FsZSBoYXMgY29tcGxldGVkDQogICAgaWYgKChzYWxlU3RhcnRUaW1lID09IDApIHx8IGNhbkJ1eVRva2VucygpKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBvd25lclRva2Vuc0FsbG9jYXRlZCA9IHRydWU7DQoNCiAgICB1aW50IGFtb3VudFRvQWxsb2NhdGUgPSBTYWZlTWF0aC5hZGQoQk9VTlRZX1NVUFBMWSwgVEVBTV9TVVBQTFkpOw0KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKGFtb3VudFRvQWxsb2NhdGUpOw0KICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKGFtb3VudFRvQWxsb2NhdGUpOw0KDQogICAgVHJhbnNmZXIoMHgwLCBtc2cuc2VuZGVyLCBhbW91bnRUb0FsbG9jYXRlKTsNCiAgICBPd25lclRva2Vuc0FsbG9jYXRlZChhbW91bnRUb0FsbG9jYXRlKTsNCg0KICB9DQoNCiAgZnVuY3Rpb24gYm9udXMoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsNCg0KICAgIHVpbnQgZWxhcHNlZCA9IFNhZmVNYXRoLnN1YihnZXROb3coKSwgc2FsZVN0YXJ0VGltZSk7DQoNCiAgICBpZiAoZWxhcHNlZCA8IDEgZGF5cykgcmV0dXJuIDI1Ow0KICAgIGlmIChlbGFwc2VkIDwgMSB3ZWVrcykgcmV0dXJuIDIwOw0KICAgIGlmIChlbGFwc2VkIDwgMiB3ZWVrcykgcmV0dXJuIDE1Ow0KICAgIGlmIChlbGFwc2VkIDwgMyB3ZWVrcykgcmV0dXJuIDEwOw0KICAgIGlmIChlbGFwc2VkIDwgNCB3ZWVrcykgcmV0dXJuIDU7DQoNCiAgICByZXR1cm4gMDsNCiAgfQ0KDQogIGZ1bmN0aW9uIHBlcmNlbnQodWludDI1NiBwKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIHAubXVsKDEwKioxNik7DQogIH0NCg0KICAvL0Z1bmN0aW9uIGlzIG1vY2tlZCBmb3IgdGVzdHMNCiAgZnVuY3Rpb24gZ2V0Tm93KCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgIHJldHVybiBub3c7DQogIH0NCg0KfQ=='