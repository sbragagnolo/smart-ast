base 64 content
base64profit1000
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQoNCi8qKg0KICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcw0KICogQnkgT3BlblplcHBlbGluOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy9TYWZlTWF0aC5zb2wNCiAqLw0KbGlicmFyeSBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOw0KICAgIGlmKCEoYSA9PSAwIHx8IGMgLyBhID09IGIpKSB0aHJvdzsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMA0KICAgIHVpbnQyNTYgYyA9IGEgLyBiOw0KICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkDQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICBpZighKGIgPD0gYSkpIHRocm93Ow0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKyBiOw0KICAgIGlmKCEoYyA+PSBhKSkgdGhyb3c7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQp9DQoNCmNvbnRyYWN0IENvbnRyYWN0UmVjZWl2ZXJ7DQogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgIF9kYXRhKSBleHRlcm5hbDsNCn0NCg0KDQovL0Jhc2ljIEVSQzIzIHRva2VuLCBiYWNrd2FyZCBjb21wYXRpYmxlIHdpdGggRVJDMjAgdHJhbnNmZXIgZnVuY3Rpb24uDQovL0Jhc2VkIGluIHBhcnQgb24gY29kZSBieSBvcGVuLXplcHBlbGluOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5LmdpdA0KY29udHJhY3QgRVJDMjNCYXNpY1Rva2VuIHsNCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7DQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7DQogICAgDQoNCiAgICAvKg0KICAgICAgICogRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2sgIA0KICAgICAgKi8NCiAgICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsNCiAgICAgICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7DQogICAgICAgICAgIHRocm93Ow0KICAgICAgICAgfQ0KICAgICAgICAgXzsNCiAgICAgIH0NCg0KDQogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgIF9kYXRhKSBleHRlcm5hbCB7DQogICAgICAgIF9mcm9tOw0KICAgICAgICBfdmFsdWU7DQogICAgICAgIF9kYXRhOw0KICAgICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoNCiAgICAgICAgLy9TdGFuZGFyZCBFUkMyMyB0cmFuc2ZlciBmdW5jdGlvbg0KDQogICAgICAgIGlmKGlzQ29udHJhY3QoX3RvKSkgew0KICAgICAgICAgICAgdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBfZGF0YSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgX2RhdGEpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgew0KDQogICAgICAgIC8vc3RhbmRhcmQgZnVuY3Rpb24gdHJhbnNmZXIgc2ltaWxhciB0byBFUkMyMCB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhDQogICAgICAgIC8vYWRkZWQgZHVlIHRvIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnMNCg0KICAgICAgICBieXRlcyBtZW1vcnkgZW1wdHk7DQogICAgICAgIGlmKGlzQ29udHJhY3QoX3RvKSkgew0KICAgICAgICAgICAgdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBlbXB0eSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgZW1wdHkpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0FkZHJlc3MoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgIGludGVybmFsIHsNCiAgICAgICAgX2RhdGE7DQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7DQogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9Db250cmFjdChhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSAgaW50ZXJuYWwgew0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YiggX3ZhbHVlKTsNCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKCBfdmFsdWUpOw0KICAgICAgICBDb250cmFjdFJlY2VpdmVyIHJlY2VpdmVyID0gQ29udHJhY3RSZWNlaXZlcihfdG8pOw0KICAgICAgICByZWNlaXZlci50b2tlbkZhbGxiYWNrKG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOw0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7ICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICAgIH0NCg0KICAgIC8vYXNzZW1ibGUgdGhlIGdpdmVuIGFkZHJlc3MgYnl0ZWNvZGUuIElmIGJ5dGVjb2RlIGV4aXN0cyB0aGVuIHRoZSBfYWRkciBpcyBhIGNvbnRyYWN0Lg0KICAgIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgcmV0dXJucyAoYm9vbCBpc19jb250cmFjdCkgew0KICAgICAgICAgICAgX2FkZHI7DQogICAgICAgICAgdWludDI1NiBsZW5ndGg7DQogICAgICAgICAgYXNzZW1ibHkgew0KICAgICAgICAgICAgICAvL3JldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBjb2RlIG9uIHRhcmdldCBhZGRyZXNzLCB0aGlzIG5lZWRzIGFzc2VtYmx5DQogICAgICAgICAgICAgIGxlbmd0aCA6PSBleHRjb2Rlc2l6ZShfYWRkcikNCiAgICAgICAgICB9DQogICAgICAgICAgaWYobGVuZ3RoPjApIHsNCiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgfQ0KICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KICAgIH0NCn0NCg0KY29udHJhY3QgRVJDMjNTdGFuZGFyZFRva2VuIGlzIEVSQzIzQmFzaWNUb2tlbiB7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOw0KICAgIGV2ZW50IEFwcHJvdmFsIChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsNCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsNCiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsNCg0KICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQNCiAgICAgICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93Ow0KDQogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7DQogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsNCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7DQoNCiAgICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2ANCiAgICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QNCiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6DQogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQ0KICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93Ow0KDQogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7DQogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOw0KICAgIH0NCg0KfQ0KDQoNCg0KDQovLyBCYXNlZCBpbiBwYXJ0IG9uIGNvZGUgYnkgT3Blbi1aZXBwZWxpbjogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS5naXQNCi8vIEJhc2VkIGluIHBhcnQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wNCmNvbnRyYWN0IFByb2ZpdDEwMDAgaXMgRVJDMjNTdGFuZGFyZFRva2VuIHsNCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiUHJvZml0IDEwMDAgVG9rZW4iOw0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIjEwMDAiOw0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7DQogICAgYWRkcmVzcyBwdWJsaWMgbXVsdGlzaWc9YWRkcmVzcygweDg3MUQ5MjI1QzIzNzA0OWMyRkI4MkEzMjY0NzUxMTEyODc0MUE2MTYpOyAvL211bHRpc2lnIHdhbGxldCwgdG8gd2hpY2ggYWxsIGNvbnRyaWJ1dGlvbnMgd2lsbCBiZSBzZW50DQogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRhdGlvbjsgLy9vd25lciBhZGRyZXNzDQogICAgYWRkcmVzcyBwdWJsaWMgY2FuZGlkYXRlOyAvL293bmVyIGNhbmRpZGF0ZSBpbiAyLXBoYXNlIG93bmVyc2hpcCB0cmFuc2Zlcg0KICAgIHVpbnQyNTYgcHVibGljIGhvdXJfYmxvY2tzID0gMjEyOyAvLyBldmVyeSBob3VyIGJsb2NrcyANCiAgICB1aW50MjU2IHB1YmxpYyBkYXlfYmxvY2tzID0gaG91cl9ibG9ja3MgKiAyNCA7IC8vIGV2ZXJ5IGRheSBibG9ja3MgDQoNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGNvbnRyaWJ1dGlvbnM7IC8va2VlcHMgdHJhY2sgb2YgZXRoZXIgY29udHJpYnV0aW9ucyBpbiBXZWkgb2YgZWFjaCBjb250cmlidXRvciBhZGRyZXNzDQogICAgdWludDI1NiBwdWJsaWMgc3RhcnRCbG9jayA9IDQwNzA0NzI7IC8vY3Jvd2RzYWxlIHN0YXJ0IGJsb2NrIA0KICAgIHVpbnQyNTYgcHVibGljIGVuZEJsb2NrID0gc3RhcnRCbG9jayArIGRheV9ibG9ja3MgKiAzMDsgLy8gd2hvbGUgY3Jvd2RzYWxlIGVuZCBibG9jayAoMzAgZGF5cyAsIDEgbW9udGgpDQogICAgdWludDI1NiBwdWJsaWMgY3Jvd2RzYWxlVG9rZW5TdXBwbHkgPSA4MDAgKiAoMTAqKjE4KTsgLy9BbW91bnQgb2YgdG9rZW5zIGZvciBzYWxlIGR1cmluZyBjcm93ZHNhbGUNCiAgICB1aW50MjU2IHB1YmxpYyBmb3VuZGF0aW9uVG9rZW5TdXBwbHkgPSAyMDAgKiAoMTAqKjE4KTsgLy9Ub2tlbnMgZm9yICB0ZWFtDQogICAgdWludDI1NiBwdWJsaWMgY3Jvd2RzYWxlVG9rZW5Tb2xkID0gMDsgLy9LZWVwcyB0cmFjayBvZiB0aGUgYW1vdW50IG9mIHRva2VucyBzb2xkIGR1cmluZyB0aGUgY3Jvd2RzYWxlDQogICAgdWludDI1NiBwdWJsaWMgcHJlc2FsZUV0aGVyUmFpc2VkID0gMDsgLy9LZWVwcyB0cmFjayBvZiB0aGUgRXRoZXIgcmFpc2VkIGR1cmluZyB0aGUgY3Jvd2RzYWxlDQogICAgDQogICAgYm9vbCBwdWJsaWMgaGFsdGVkID0gZmFsc2U7IC8vSGFsdCBjcm93ZHNhbGUgaW4gZW1lcmdlbmN5DQogICAgZXZlbnQgSGFsdCgpOyAvL0hhbHQgZXZlbnQNCiAgICBldmVudCBVbmhhbHQoKTsgLy9VbmhhbHQgZXZlbnQNCg0KICAgIG1vZGlmaWVyIG9ubHlGb3VuZGF0aW9uKCkgew0KICAgICAgICAvL29ubHkgZG8gaWYgY2FsbCBpcyBmcm9tIG93bmVyIG1vZGlmaWVyDQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGZvdW5kYXRpb24pIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KDQogICAgbW9kaWZpZXIgd2hlbk5vdEhhbHRlZCgpIHsNCiAgICAgICAgLy8gb25seSBkbyB3aGVuIG5vdCBoYWx0ZWQgbW9kaWZpZXINCiAgICAgICAgaWYgKGhhbHRlZCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy9Db25zdHJ1Y3Rvcjogc2V0IG11bHRpc2lnIGNyb3dkc2FsZSByZWNpcGllbnQgd2FsbGV0IGFkZHJlc3MgYW5kIGZ1bmQgdGhlIGZvdW5kYXRpb24NCiAgICAvL0luaXRpYWxpemUgdG90YWwgc3VwcGx5IGFuZCBhbGxvY2F0ZSBlY29zeXN0ZW0gJiBmb3VuZGF0aW9uIHRva2Vucw0KICAJZnVuY3Rpb24gUHJvZml0MTAwMCgpIHsNCiAgICAgICAgZm91bmRhdGlvbiA9IG1zZy5zZW5kZXI7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gZm91bmRhdGlvblRva2VuU3VwcGx5Ow0KICAgICAgICBiYWxhbmNlc1tmb3VuZGF0aW9uXSA9IHRvdGFsU3VwcGx5Ow0KICAJfQ0KDQogICAgLy9GYWxsYmFjayBmdW5jdGlvbiB3aGVuIHJlY2VpdmluZyBFdGhlci4NCiAgICBmdW5jdGlvbigpIHBheWFibGUgew0KICAgICAgICBidXkoKTsNCiAgICB9DQoNCg0KICAgIC8vSGFsdCBJQ08gaW4gY2FzZSBvZiBlbWVyZ2VuY3kuDQogICAgZnVuY3Rpb24gaGFsdCgpIG9ubHlGb3VuZGF0aW9uIHsNCiAgICAgICAgaGFsdGVkID0gdHJ1ZTsNCiAgICAgICAgSGFsdCgpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVuaGFsdCgpIG9ubHlGb3VuZGF0aW9uIHsNCiAgICAgICAgaGFsdGVkID0gZmFsc2U7DQogICAgICAgIFVuaGFsdCgpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJ1eSgpIHBheWFibGUgew0KICAgICAgICBidXlSZWNpcGllbnQobXNnLnNlbmRlcik7DQogICAgfQ0KDQogICAgLy9BbGxvdyBhZGRyZXNzZXMgdG8gYnV5IHRva2VuIGZvciBhbm90aGVyIGFjY291bnQNCiAgICBmdW5jdGlvbiBidXlSZWNpcGllbnQoYWRkcmVzcyByZWNpcGllbnQpIHB1YmxpYyBwYXlhYmxlIHdoZW5Ob3RIYWx0ZWQgew0KICAgICAgICBpZihtc2cudmFsdWUgPT0gMCkgdGhyb3c7DQogICAgICAgIGlmKCFjcm93ZHNhbGVPbigpKSB0aHJvdzsvL29ubHkgYWxsb3dzIGR1cmluZyBwcmVzYWxlL2Nyb3dkc2FsZQ0KICAgICAgICBpZihjb250cmlidXRpb25zW3JlY2lwaWVudF0uYWRkKG1zZy52YWx1ZSk+cGVyQWRkcmVzc0NhcCgpKSB0aHJvdzsvL3BlciBhZGRyZXNzIGNhcA0KICAgICAgICB1aW50MjU2IHRva2VucyA9IG1zZy52YWx1ZS5tdWwocmV0dXJuUmF0ZSgpKTsgLy9kZWNpbWFscz0xOCwgc28gbm8gbmVlZCB0byBhZGp1c3QgZm9yIHVuaXQNCiAgICAgICAgaWYoY3Jvd2RzYWxlVG9rZW5Tb2xkLmFkZCh0b2tlbnMpPmNyb3dkc2FsZVRva2VuU3VwcGx5KSB0aHJvdzsvL21heCBzdXBwbHkgbGltaXQNCg0KICAgICAgICBiYWxhbmNlc1tyZWNpcGllbnRdID0gYmFsYW5jZXNbcmVjaXBpZW50XS5hZGQodG9rZW5zKTsNCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG9rZW5zKTsNCiAgICAgICAgcHJlc2FsZUV0aGVyUmFpc2VkID0gcHJlc2FsZUV0aGVyUmFpc2VkLmFkZChtc2cudmFsdWUpOw0KICAgICAgICBjb250cmlidXRpb25zW3JlY2lwaWVudF0gPSBjb250cmlidXRpb25zW3JlY2lwaWVudF0uYWRkKG1zZy52YWx1ZSk7DQogICAgICAgIGNyb3dkc2FsZVRva2VuU29sZCA9IGNyb3dkc2FsZVRva2VuU29sZC5hZGQodG9rZW5zKTsNCiAgICAgICAgaWYoY3Jvd2RzYWxlVG9rZW5Tb2xkID09IGNyb3dkc2FsZVRva2VuU3VwcGx5ICl7DQogICAgICAgICAgICAvL0lmIGNyb3dkc2FsZSB0b2tlbiBzb2xkIG91dCwgZW5kIGNyb3dkc2FsZQ0KICAgICAgICAgICAgZW5kQmxvY2sgPSBibG9jay5udW1iZXI7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFtdWx0aXNpZy5zZW5kKG1zZy52YWx1ZSkpIHRocm93OyAvL2ltbWVkaWF0ZWx5IHNlbmQgRXRoZXIgdG8gbXVsdGlzaWcgYWRkcmVzcw0KICAgICAgICBUcmFuc2Zlcih0aGlzLCByZWNpcGllbnQsIHRva2Vucyk7DQogICAgfQ0KDQogICAgLy9CdXJucyB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgZnJvbSB0aGUgZm91bmRhdGlvbg0KICAgIC8vVXNlZCB0byBidXJuIHVuc3BlbnQgZnVuZHMgaW4gZm91bmRhdGlvbiBEQU8NCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCBvbmx5Rm91bmRhdGlvbiByZXR1cm5zIChib29sKSB7DQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vMi1waGFzZSBvd25lcnNoaXAgdHJhbnNmZXI7DQogICAgLy9wcmV2ZW50IHRyYW5zZmVycmluZyBvd25lcnNoaXAgdG8gbm9uLWV4aXN0ZW50IGFkZHJlc3NlcyBieSBhY2NpZGVudC4NCiAgICBmdW5jdGlvbiBwcm9wb3NlRm91bmRhdGlvblRyYW5zZmVyKGFkZHJlc3MgbmV3Rm91bmRhdGlvbikgZXh0ZXJuYWwgb25seUZvdW5kYXRpb24gew0KICAgICAgICAvL3Byb3Bvc2UgbmV3IG93bmVyDQogICAgICAgIGNhbmRpZGF0ZSA9IG5ld0ZvdW5kYXRpb247DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2FuY2VsRm91bmRhdGlvblRyYW5zZmVyKCkgZXh0ZXJuYWwgb25seUZvdW5kYXRpb24gew0KICAgICAgICBjYW5kaWRhdGUgPSBhZGRyZXNzKDApOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFjY2VwdEZvdW5kYXRpb25UcmFuc2ZlcigpIGV4dGVybmFsIHsNCiAgICAgICAgLy9uZXcgb3duZXIgYWNjZXB0IHRyYW5zZmVyIHRvIGNvbXBsZXRlIHRyYW5zZmVyDQogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gY2FuZGlkYXRlKSB0aHJvdzsNCiAgICAgICAgZm91bmRhdGlvbiA9IGNhbmRpZGF0ZTsNCiAgICAgICAgY2FuZGlkYXRlID0gYWRkcmVzcygwKTsNCiAgICB9DQoNCiAgICAvL0FsbG93IHRvIGNoYW5nZSB0aGUgcmVjaXBpZW50IG11bHRpc2lnIGFkZHJlc3MNCiAgICBmdW5jdGlvbiBzZXRNdWx0aXNpZyhhZGRyZXNzIGFkZHIpIGV4dGVybmFsIG9ubHlGb3VuZGF0aW9uIHsNCiAgICAgIAlpZiAoYWRkciA9PSBhZGRyZXNzKDApKSB0aHJvdzsNCiAgICAgIAltdWx0aXNpZyA9IGFkZHI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlLCBfZGF0YSk7DQogICAgfQ0KDQoJICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyAgew0KICAgICAgICBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7DQoJICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgIHsNCiAgICAgICAgc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgfQ0KDQogICAgLy9SZXR1cm4gcmF0ZSBvZiB0b2tlbiBhZ2FpbnN0IGV0aGVyLg0KICAgIGZ1bmN0aW9uIHJldHVyblJhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7DQogICAgICAgIGlmIChibG9jay5udW1iZXI+PXN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1lbmRCbG9jaykgcmV0dXJuIDQ7IC8vIElDTw0KICAgICAgICByZXR1cm4gMDsvLyBvdXQgb2YgSUNPIA0KICAgIH0NCg0KICAgIC8vcGVyIGFkZHJlc3MgY2FwIGluIFdlaTogMTAwMCBldGhlciArIDElIG9mIGV0aGVyIHJlY2VpdmVkIGF0IHRoZSBnaXZlbiB0aW1lLg0KICAgIGZ1bmN0aW9uIHBlckFkZHJlc3NDYXAoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7DQogICAgICAgIHVpbnQyNTYgYmFzZWxpbmUgPSAxMDAwICogKDEwKioxOCk7DQogICAgICAgIHJldHVybiBiYXNlbGluZS5hZGQocHJlc2FsZUV0aGVyUmFpc2VkLmRpdigxMDApKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjcm93ZHNhbGVPbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIC8vcmV0dXJuIHdoZXRoZXIgY3Jvd2RzYWxlIGlzIG9uIGFjY29yZGluZyB0byBibG9jayBudW1iZXINCiAgICAgICAgcmV0dXJuIChibG9jay5udW1iZXI+PXN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1lbmRCbG9jayk7DQogICAgfQ0KDQoNCiAgICBmdW5jdGlvbiBnZXRFdGhlclJhaXNlZCgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICAgICAgLy9nZXR0ZXIgZnVuY3Rpb24gZm9yIGV0aGVyUmFpc2VkDQogICAgICAgIHJldHVybiBwcmVzYWxlRXRoZXJSYWlzZWQ7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0VG9rZW5Tb2xkKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgICAvL2dldHRlciBmdW5jdGlvbiBmb3IgY3Jvd2RzYWxlVG9rZW5Tb2xkDQogICAgICAgIHJldHVybiBjcm93ZHNhbGVUb2tlblNvbGQ7DQogICAgfQ0KDQp9'