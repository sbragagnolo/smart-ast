base 64 content
base64profitContainer
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4wOw0KLyoNClRoaXMgdlNsaWNlIHRva2VuIGNvbnRyYWN0IGlzIGJhc2VkIG9uIHRoZSBFUkMyMCB0b2tlbiBjb250cmFjdC4gQWRkaXRpb25hbA0KZnVuY3Rpb25hbGl0eSBoYXMgYmVlbiBpbnRlZ3JhdGVkOg0KKiB0aGUgY29udHJhY3QgTG9ja2FibGUsIHdoaWNoIGlzIHVzZWQgYXMgYSBwYXJlbnQgb2YgdGhlIFRva2VuIGNvbnRyYWN0DQoqIHRoZSBmdW5jdGlvbiBtaW50VG9rZW5zKCksIHdoaWNoIG1ha2VzIHVzZSBvZiB0aGUgY3VycmVudFN3YXBSYXRlKCkgYW5kIHNhZmVUb0FkZCgpIGhlbHBlcnMNCiogdGhlIGZ1bmN0aW9uIGRpc2FibGVUb2tlblN3YXBMb2NrKCkNCiovDQoNCmNvbnRyYWN0IExvY2thYmxlIHsNCiAgICB1aW50IHB1YmxpYyBudW1PZkN1cnJlbnRFcG9jaDsNCiAgICB1aW50IHB1YmxpYyBjcmVhdGlvblRpbWU7DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVU5MT0NLRURfVElNRSA9IDI1IGRheXM7DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTE9DS0VEX1RJTUUgPSA1IGRheXM7DQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgRVBPQ0hfTEVOR1RIID0gMzAgZGF5czsNCiAgICBib29sIHB1YmxpYyBsb2NrOw0KICAgIGJvb2wgcHVibGljIHRva2VuU3dhcExvY2s7DQoNCiAgICBldmVudCBMb2NrZWQoKTsNCiAgICBldmVudCBVbmxvY2tlZCgpOw0KDQogICAgLy8gVGhpcyBtb2RpZmllciBzaG91bGQgcHJldmVudCB0b2tlbnMgdHJhbnNmZXJzIHdoaWxlIHRoZSB0b2tlbnN3YXANCiAgICAvLyBpcyBzdGlsbCBvbmdvaW5nDQogICAgbW9kaWZpZXIgaXNUb2tlblN3YXBPbiB7DQogICAgICAgIGlmICh0b2tlblN3YXBMb2NrKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvLyBUaGlzIG1vZGlmaWVyIGNoZWNrcyBhbmQsIGlmIG5lZWRlZCwgdXBkYXRlcyB0aGUgdmFsdWUgb2YgY3VycmVudA0KICAgIC8vIHRva2VuIGNvbnRyYWN0IGVwb2NoLCBiZWZvcmUgZXhlY3V0aW5nIGEgdG9rZW4gdHJhbnNmZXIgb2YgYW55DQogICAgLy8ga2luZA0KICAgIG1vZGlmaWVyIGlzTmV3RXBvY2ggew0KICAgICAgICBpZiAobnVtT2ZDdXJyZW50RXBvY2ggKiBFUE9DSF9MRU5HVEggKyBjcmVhdGlvblRpbWUgPCBub3cgKSB7DQogICAgICAgICAgICBudW1PZkN1cnJlbnRFcG9jaCA9IChub3cgLSBjcmVhdGlvblRpbWUpIC8gRVBPQ0hfTEVOR1RIICsgMTsNCiAgICAgICAgfQ0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vIFRoaXMgbW9kaWZpZXIgY2hlY2sgd2hldGhlciB0aGUgY29udHJhY3Qgc2hvdWxkIGJlIGluIGEgbG9ja2VkDQogICAgLy8gb3IgdW5sb2NrZWQgc3RhdGUsIHRoZW4gYWN0cyBhbmQgdXBkYXRlcyBhY2NvcmRpbmdseSBpZg0KICAgIC8vIG5lY2Vzc2FyeQ0KICAgIG1vZGlmaWVyIGNoZWNrTG9jayB7DQogICAgICAgIGlmICgoY3JlYXRpb25UaW1lICsgbnVtT2ZDdXJyZW50RXBvY2ggKiBVTkxPQ0tFRF9USU1FKSArDQogICAgICAgIChudW1PZkN1cnJlbnRFcG9jaCAtIDEpICogTE9DS0VEX1RJTUUgPCBub3cpIHsNCiAgICAgICAgICAgIC8vIGF2b2lkcyBuZWVkbGVzcyBsb2NrIHN0YXRlIGNoYW5nZSBhbmQgZXZlbnQgc3BhbW1pbmcNCiAgICAgICAgICAgIGlmIChsb2NrKSB0aHJvdzsNCg0KICAgICAgICAgICAgbG9jayA9IHRydWU7DQogICAgICAgICAgICBMb2NrZWQoKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIC8vIG9ubHkgc2V0IHRvIGZhbHNlIGlmIGluIGEgbG9ja2VkIHN0YXRlLCB0byBhdm9pZA0KICAgICAgICAgICAgLy8gbmVlZGxlc3Mgc3RhdGUgY2hhbmdlIGFuZCBldmVudCBzcGFtDQogICAgICAgICAgICBpZiAobG9jaykgew0KICAgICAgICAgICAgICAgIGxvY2sgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBVbmxvY2tlZCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIF87DQogICAgfQ0KDQogICAgZnVuY3Rpb24gTG9ja2FibGUoKSB7DQogICAgICAgIGNyZWF0aW9uVGltZSA9IG5vdzsNCiAgICAgICAgbnVtT2ZDdXJyZW50RXBvY2ggPSAxOw0KICAgICAgICB0b2tlblN3YXBMb2NrID0gdHJ1ZTsNCiAgICB9DQp9DQoNCg0KY29udHJhY3QgRVJDMjAgew0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCk7DQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOw0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsNCg0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KfQ0KDQpjb250cmFjdCBUb2tlbiBpcyBFUkMyMCwgTG9ja2FibGUgew0KDQogIG1hcHBpbmcoIGFkZHJlc3MgPT4gdWludCApIF9iYWxhbmNlczsNCiAgbWFwcGluZyggYWRkcmVzcyA9PiBtYXBwaW5nKCBhZGRyZXNzID0+IHVpbnQgKSApIF9hcHByb3ZhbHM7DQogIHVpbnQgX3N1cHBseTsNCiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0QWRkcmVzczsNCg0KICBldmVudCBUb2tlbk1pbnQoYWRkcmVzcyBuZXdUb2tlbkhvbGRlciwgdWludCBhbW91bnRPZlRva2Vucyk7DQogIGV2ZW50IFRva2VuU3dhcE92ZXIoKTsNCg0KICBtb2RpZmllciBvbmx5RnJvbVdhbGxldCB7DQogICAgICBpZiAobXNnLnNlbmRlciAhPSB3YWxsZXRBZGRyZXNzKSB0aHJvdzsNCiAgICAgIF87DQogIH0NCg0KICBmdW5jdGlvbiBUb2tlbiggdWludCBpbml0aWFsX2JhbGFuY2UsIGFkZHJlc3Mgd2FsbGV0KSB7DQogICAgX2JhbGFuY2VzW21zZy5zZW5kZXJdID0gaW5pdGlhbF9iYWxhbmNlOw0KICAgIF9zdXBwbHkgPSBpbml0aWFsX2JhbGFuY2U7DQogICAgd2FsbGV0QWRkcmVzcyA9IHdhbGxldDsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCBzdXBwbHkpIHsNCiAgICByZXR1cm4gX3N1cHBseTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGJhbGFuY2VPZiggYWRkcmVzcyB3aG8gKSBjb25zdGFudCByZXR1cm5zICh1aW50IHZhbHVlKSB7DQogICAgcmV0dXJuIF9iYWxhbmNlc1t3aG9dOw0KICB9DQoNCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCBfYWxsb3dhbmNlKSB7DQogICAgcmV0dXJuIF9hcHByb3ZhbHNbb3duZXJdW3NwZW5kZXJdOw0KICB9DQoNCiAgLy8gQSBoZWxwZXIgdG8gbm90aWZ5IGlmIG92ZXJmbG93IG9jY3Vycw0KICBmdW5jdGlvbiBzYWZlVG9BZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsNCiAgICByZXR1cm4gKGEgKyBiID49IGEgJiYgYSArIGIgPj0gYik7DQogIH0NCg0KICBmdW5jdGlvbiB0cmFuc2ZlciggYWRkcmVzcyB0bywgdWludCB2YWx1ZSkNCiAgICBpc1Rva2VuU3dhcE9uDQogICAgaXNOZXdFcG9jaA0KICAgIGNoZWNrTG9jaw0KICAgIHJldHVybnMgKGJvb2wgb2spIHsNCg0KICAgIGlmKCBfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCB2YWx1ZSApIHsNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KICAgIGlmKCAhc2FmZVRvQWRkKF9iYWxhbmNlc1t0b10sIHZhbHVlKSApIHsNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgX2JhbGFuY2VzW21zZy5zZW5kZXJdIC09IHZhbHVlOw0KICAgIF9iYWxhbmNlc1t0b10gKz0gdmFsdWU7DQogICAgVHJhbnNmZXIoIG1zZy5zZW5kZXIsIHRvLCB2YWx1ZSApOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKCBhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpDQogICAgaXNUb2tlblN3YXBPbg0KICAgIGlzTmV3RXBvY2gNCiAgICBjaGVja0xvY2sNCiAgICByZXR1cm5zIChib29sIG9rKSB7DQogICAgLy8gaWYgeW91IGRvbid0IGhhdmUgZW5vdWdoIGJhbGFuY2UsIHRocm93DQogICAgaWYoIF9iYWxhbmNlc1tmcm9tXSA8IHZhbHVlICkgew0KICAgICAgICB0aHJvdzsNCiAgICB9DQogICAgLy8gaWYgeW91IGRvbid0IGhhdmUgYXBwcm92YWwsIHRocm93DQogICAgaWYoIF9hcHByb3ZhbHNbZnJvbV1bbXNnLnNlbmRlcl0gPCB2YWx1ZSApIHsNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KICAgIGlmKCAhc2FmZVRvQWRkKF9iYWxhbmNlc1t0b10sIHZhbHVlKSApIHsNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KICAgIC8vIHRyYW5zZmVyIGFuZCByZXR1cm4gdHJ1ZQ0KICAgIF9hcHByb3ZhbHNbZnJvbV1bbXNnLnNlbmRlcl0gLT0gdmFsdWU7DQogICAgX2JhbGFuY2VzW2Zyb21dIC09IHZhbHVlOw0KICAgIF9iYWxhbmNlc1t0b10gKz0gdmFsdWU7DQogICAgVHJhbnNmZXIoIGZyb20sIHRvLCB2YWx1ZSApOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpDQogICAgaXNUb2tlblN3YXBPbg0KICAgIGlzTmV3RXBvY2gNCiAgICBjaGVja0xvY2sNCiAgICByZXR1cm5zIChib29sIG9rKSB7DQogICAgX2FwcHJvdmFsc1ttc2cuc2VuZGVyXVtzcGVuZGVyXSA9IHZhbHVlOw0KICAgIEFwcHJvdmFsKCBtc2cuc2VuZGVyLCBzcGVuZGVyLCB2YWx1ZSApOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgLy8gVGhlIGZ1bmN0aW9uIGN1cnJlbnRTd2FwUmF0ZSgpIHJldHVybnMgdGhlIGN1cnJlbnQgZXhjaGFuZ2UgcmF0ZQ0KICAvLyBiZXR3ZWVuIHZTbGljZSB0b2tlbnMgYW5kIEV0aGVyIGR1cmluZyB0aGUgdG9rZW4gc3dhcCBwZXJpb2QNCiAgZnVuY3Rpb24gY3VycmVudFN3YXBSYXRlKCkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7DQogICAgICBpZiAoY3JlYXRpb25UaW1lICsgMSB3ZWVrcyA+IG5vdykgew0KICAgICAgICAgIHJldHVybiAxMzA7DQogICAgICB9DQogICAgICBlbHNlIGlmIChjcmVhdGlvblRpbWUgKyAyIHdlZWtzID4gbm93KSB7DQogICAgICAgICAgcmV0dXJuIDEyMDsNCiAgICAgIH0NCiAgICAgIGVsc2UgaWYgKGNyZWF0aW9uVGltZSArIDQgd2Vla3MgPiBub3cpIHsNCiAgICAgICAgICByZXR1cm4gMTAwOw0KICAgICAgfQ0KICAgICAgZWxzZSB7DQogICAgICAgICAgcmV0dXJuIDA7DQogICAgICB9DQogIH0NCg0KICAvLyBUaGUgZnVuY3Rpb24gbWludFRva2VucyBpcyBvbmx5IHVzYWJsZSBieSB0aGUgY2hvc2VuIHdhbGxldA0KICAvLyBjb250cmFjdCB0byBtaW50IGEgbnVtYmVyIG9mIHRva2VucyBwcm9wb3J0aW9uYWwgdG8gdGhlDQogIC8vIGFtb3VudCBvZiBldGhlciBzZW50IHRvIHRoZSB3YWxsZXQgY29udHJhY3QuIFRoZSBmdW5jdGlvbg0KICAvLyBjYW4gb25seSBiZSBjYWxsZWQgZHVyaW5nIHRoZSB0b2tlbnN3YXAgcGVyaW9kDQogIGZ1bmN0aW9uIG1pbnRUb2tlbnMoYWRkcmVzcyBuZXdUb2tlbkhvbGRlciwgdWludCBldGhlckFtb3VudCkNCiAgICBleHRlcm5hbA0KICAgIG9ubHlGcm9tV2FsbGV0IHsNCg0KICAgICAgICB1aW50IHRva2Vuc0Ftb3VudCA9IGN1cnJlbnRTd2FwUmF0ZSgpICogZXRoZXJBbW91bnQ7DQogICAgICAgIGlmKCFzYWZlVG9BZGQoX2JhbGFuY2VzW25ld1Rva2VuSG9sZGVyXSx0b2tlbnNBbW91bnQgKSkgdGhyb3c7DQogICAgICAgIGlmKCFzYWZlVG9BZGQoX3N1cHBseSx0b2tlbnNBbW91bnQpKSB0aHJvdzsNCg0KICAgICAgICBfYmFsYW5jZXNbbmV3VG9rZW5Ib2xkZXJdICs9IHRva2Vuc0Ftb3VudDsNCiAgICAgICAgX3N1cHBseSArPSB0b2tlbnNBbW91bnQ7DQoNCiAgICAgICAgVG9rZW5NaW50KG5ld1Rva2VuSG9sZGVyLCB0b2tlbnNBbW91bnQpOw0KICB9DQoNCiAgLy8gVGhlIGZ1bmN0aW9uIGRpc2FibGVUb2tlblN3YXBMb2NrKCkgaXMgY2FsbGVkIGJ5IHRoZSB3YWxsZXQNCiAgLy8gY29udHJhY3Qgb25jZSB0aGUgdG9rZW4gc3dhcCBoYXMgcmVhY2hlZCBpdHMgZW5kIGNvbmRpdGlvbnMNCiAgZnVuY3Rpb24gZGlzYWJsZVRva2VuU3dhcExvY2soKQ0KICAgIGV4dGVybmFsDQogICAgb25seUZyb21XYWxsZXQgew0KICAgICAgICB0b2tlblN3YXBMb2NrID0gZmFsc2U7DQogICAgICAgIFRva2VuU3dhcE92ZXIoKTsNCiAgfQ0KfQ0KDQoNCnByYWdtYSBzb2xpZGl0eSBeMC40LjA7DQovKg0KVGhlIFByb2ZpdENvbnRhaW5lciBjb250cmFjdCByZWNlaXZlcyBwcm9maXRzIGZyb20gdGhlIHZEaWNlIGdhbWVzIGFuZCBhbGxvd3MgYQ0KYSBmYWlyIGRpc3RyaWJ1dGlvbiBiZXR3ZWVuIHRva2VuIGhvbGRlcnMuDQoqLw0KDQpjb250cmFjdCBPd25hYmxlIHsNCiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQoNCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsNCiAgICBvd25lciA9IG1zZy5zZW5kZXI7DQogIH0NCg0KICBtb2RpZmllciBvbmx5T3duZXIoKSB7DQogICAgaWYgKG1zZy5zZW5kZXIgPT0gb3duZXIpDQogICAgICBfOw0KICB9DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpDQogICAgICBleHRlcm5hbA0KICAgICAgb25seU93bmVyIHsNCiAgICAgIGlmIChfbmV3T3duZXIgPT0gYWRkcmVzcygweDApKSB0aHJvdzsNCiAgICAgIG93bmVyID0gX25ld093bmVyOw0KICB9DQoNCn0NCg0KY29udHJhY3QgUHJvZml0Q29udGFpbmVyIGlzIE93bmFibGUgew0KICAgIHVpbnQgcHVibGljIGN1cnJlbnRFcG9jaDsNCiAgICAvL1RoaXMgaXMgdG8gbWl0aWdhdGUgc3VwZXJzZW5kIGFuZCB0aGUgcG9zc2liaWxpdHkgb2YNCiAgICAvL2RpZmZlcmVudCBwYXlvdXRzIGZvciBzYW1lIHRva2VuIG93bmVyc2hpcCBkdXJpbmcgcGF5b3V0IHBoYXNlDQogICAgdWludCBwdWJsaWMgaW5pdEVwb2NoQmFsYW5jZTsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGxhc3RQYWlkT3V0RXBvY2g7DQogICAgVG9rZW4gcHVibGljIHRva2VuQ3RyOw0KDQogICAgZXZlbnQgV2l0aGRyYXdhbEVuYWJsZWQoKTsNCiAgICBldmVudCBQcm9maXRXaXRoZHJhd24oYWRkcmVzcyB0b2tlbkhvbGRlciwgdWludCBhbW91bnRQYWlkT3V0KTsNCiAgICBldmVudCBUb2tlbkNvbnRyYWN0Q2hhbmdlZChhZGRyZXNzIG5ld1Rva2VuQ29udHJhY3RBZGRyKTsNCg0KICAgIC8vIFRoZSBtb2RpZmllciBvbmx5Tm90UGFpZE91dCBwcmV2ZW50cyB0b2tlbiBob2xkZXJzIHdobyBoYXZlDQogICAgLy8gYWxyZWFkeSB3aXRoZHJhd24gdGhlaXIgc2hhcmUgb2YgcHJvZml0cyBpbiB0aGUgZXBvY2gsIHRvIGNhc2gNCiAgICAvLyBvdXQgYWRkaXRpb25hbCBzaGFyZXMuDQogICAgbW9kaWZpZXIgb25seU5vdFBhaWRPdXQgew0KICAgICAgICBpZiAobGFzdFBhaWRPdXRFcG9jaFttc2cuc2VuZGVyXSA9PSBjdXJyZW50RXBvY2gpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vIFRoZSBtb2RpZmllciBvbmx5TG9ja2VkIHByZXZlbnRzIHRva2VuIGhvbGRlcnMgZnJvbSBjb2xsZWN0aW5nDQogICAgLy8gdGhlaXIgcHJvZml0cyB3aGVuIHRoZSB0b2tlbiBjb250cmFjdCBpcyBpbiBhbiB1bmxvY2tlZCBzdGF0ZQ0KICAgIG1vZGlmaWVyIG9ubHlMb2NrZWQgew0KICAgICAgICBpZiAoIXRva2VuQ3RyLmxvY2soKSkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy8gVGhlIG1vZGlmaWVyIHJlc2V0UGFpZE91dCB1cGRhdGVzIHRoZSBjdXJyZW5jdCBlcG9jaCwgYW5kDQogICAgLy8gZW5hYmxlcyB0aGUgc21hcnQgY29udHJhY3QgdG8gdHJhY2sgd2hlbiBhIHRva2VuIGhvbGRlcg0KICAgIC8vIGhhcyBhbHJlYWR5IHJlY2VpdmVkIHRoZWlyIGZhaXIgc2hhcmUgb2YgcHJvZml0cyBvciBub3QNCiAgICAvLyBhbmQgc2V0cyB0aGUgYmFsYW5jZSBmb3IgdGhlIGVwb2NoIHVzaW5nIGN1cnJlbnQgYmFsYW5jZQ0KICAgIG1vZGlmaWVyIHJlc2V0UGFpZE91dCB7DQogICAgICAgIGlmKGN1cnJlbnRFcG9jaCA8IHRva2VuQ3RyLm51bU9mQ3VycmVudEVwb2NoKCkpIHsNCiAgICAgICAgICAgIGN1cnJlbnRFcG9jaCA9IHRva2VuQ3RyLm51bU9mQ3VycmVudEVwb2NoKCk7DQogICAgICAgICAgICBpbml0RXBvY2hCYWxhbmNlID0gdGhpcy5iYWxhbmNlOw0KICAgICAgICAgICAgV2l0aGRyYXdhbEVuYWJsZWQoKTsNCiAgICAgICAgfQ0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIFByb2ZpdENvbnRhaW5lcihhZGRyZXNzIF90b2tlbikgew0KICAgICAgICB0b2tlbkN0ciA9IFRva2VuKF90b2tlbik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gKCkNCiAgICAgICAgcGF5YWJsZSB7DQoNCiAgICB9DQoNCiAgICAvLyBUaGUgZnVuY3Rpb24gd2l0aGRyYXdhbFByb2ZpdCgpIGVuYWJsZXMgdG9rZW4gaG9sZGVycw0KICAgIC8vIHRvIGNvbGxlY3QgYSBmYWlyIHNoYXJlIG9mIHByb2ZpdHMgZnJvbSB0aGUgUHJvZml0Q29udGFpbmVyLA0KICAgIC8vIHByb3BvcnRpb25hbCB0byB0aGUgYW1vdW50IG9mIHRva2VucyB0aGV5IG93bi4gVG9rZW4gaG9sZGVycw0KICAgIC8vIHdpbGwgYmUgYWJsZSB0byBjb2xsZWN0IHRoZWlyIHByb2ZpdHMgb25seSBvbmNlDQogICAgZnVuY3Rpb24gd2l0aGRyYXdhbFByb2ZpdCgpDQogICAgICAgIGV4dGVybmFsDQogICAgICAgIHJlc2V0UGFpZE91dA0KICAgICAgICBvbmx5TG9ja2VkDQogICAgICAgIG9ubHlOb3RQYWlkT3V0IHsNCiAgICAgICAgdWludCBjdXJyZW50RXBvY2ggPSB0b2tlbkN0ci5udW1PZkN1cnJlbnRFcG9jaCgpOw0KICAgICAgICB1aW50IHRva2VuQmFsYW5jZSA9IHRva2VuQ3RyLmJhbGFuY2VPZihtc2cuc2VuZGVyKTsNCiAgICAgICAgdWludCB0b3RhbFN1cHBseSA9IHRva2VuQ3RyLnRvdGFsU3VwcGx5KCk7DQoNCiAgICAgICAgaWYgKHRva2VuQmFsYW5jZSA9PSAwKSB0aHJvdzsNCg0KICAgICAgICBsYXN0UGFpZE91dEVwb2NoW21zZy5zZW5kZXJdID0gY3VycmVudEVwb2NoOw0KDQogICAgICAgIC8vIE92ZXJmbG93IHJpc2sgb25seSBleGlzdHMgaWYgYmFsYW5jZSBpcyBncmVhdGVyIHRoYW4NCiAgICAgICAgLy8gMWUrMzMgZXRoZXIsIGFzc3VtaW5nIG1heCBvZiA5Nk0gdG9rZW5zIG1pbnRlZC4NCiAgICAgICAgLy8gRnVuY3Rpb25zIHRocm93cywgYXMgc3VjaCBhIHN0YXRlIHNob3VsZCBuZXZlciBiZSByZWFjaGVkDQogICAgICAgIC8vIFVubGVzcyBzaWduaWZpY2FudGx5IG1vcmUgdG9rZW5zIGFyZSBtaW50ZWQNCiAgICAgICAgaWYgKCFzYWZlVG9NdWx0aXBseSh0b2tlbkJhbGFuY2UsIGluaXRFcG9jaEJhbGFuY2UpKSB0aHJvdzsNCiAgICAgICAgdWludCBzZW5kZXJQb3J0aW9uID0gKHRva2VuQmFsYW5jZSAqIGluaXRFcG9jaEJhbGFuY2UpOw0KDQogICAgICAgIHVpbnQgYW1vdW50VG9QYXlPdXQgPSBzZW5kZXJQb3J0aW9uIC8gdG90YWxTdXBwbHk7DQoNCiAgICAgICAgaWYoIW1zZy5zZW5kZXIuc2VuZChhbW91bnRUb1BheU91dCkpIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQoNCiAgICAgICAgUHJvZml0V2l0aGRyYXduKG1zZy5zZW5kZXIsIGFtb3VudFRvUGF5T3V0KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjaGFuZ2VUb2tlbkNvbnRyYWN0KGFkZHJlc3MgX25ld1Rva2VuKQ0KICAgICAgICBleHRlcm5hbA0KICAgICAgICBvbmx5T3duZXIgew0KDQogICAgICAgIGlmIChfbmV3VG9rZW4gPT0gYWRkcmVzcygweDApKSB0aHJvdzsNCg0KICAgICAgICB0b2tlbkN0ciA9IFRva2VuKF9uZXdUb2tlbik7DQogICAgICAgIFRva2VuQ29udHJhY3RDaGFuZ2VkKF9uZXdUb2tlbik7DQogICAgfQ0KDQogICAgLy8gcmV0dXJucyBleHBlY3RlZCBwYXlvdXQgZm9yIHRva2VuaG9sZGVyIGR1cmluZyBsb2NrIHBoYXNlDQogICAgZnVuY3Rpb24gZXhwZWN0ZWRQYXlvdXQoYWRkcmVzcyBfdG9rZW5Ib2xkZXIpDQogICAgICAgIGV4dGVybmFsDQogICAgICAgIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsNCg0KICAgICAgICBpZiAoIXRva2VuQ3RyLmxvY2soKSkNCiAgICAgICAgICAgIHJldHVybiAwOw0KDQogICAgICAgIHJldHVybiAodG9rZW5DdHIuYmFsYW5jZU9mKF90b2tlbkhvbGRlcikgKiBpbml0RXBvY2hCYWxhbmNlKSAvIHRva2VuQ3RyLnRvdGFsU3VwcGx5KCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc2FmZVRvTXVsdGlwbHkodWludCBfYSwgdWludCBfYikNCiAgICAgICAgcHJpdmF0ZQ0KICAgICAgICBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQoNCiAgICAgICAgcmV0dXJuIChfYiA9PSAwIHx8ICgoX2EgKiBfYikgLyBfYikgPT0gX2EpOw0KICAgIH0NCn0='