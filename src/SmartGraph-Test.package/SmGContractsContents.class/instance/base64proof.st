base 64 content
base64proof
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4wOw0KDQpjb250cmFjdCBvd25lZCB7DQoNCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCg0KICAgIGZ1bmN0aW9uIG93bmVkKCkgcGF5YWJsZSB7DQogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQogICAgDQogICAgbW9kaWZpZXIgb25seU93bmVyIHsNCiAgICAgICAgcmVxdWlyZShvd25lciA9PSBtc2cuc2VuZGVyKTsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9vd25lcikgb25seU93bmVyIHB1YmxpYyB7DQogICAgICAgIHJlcXVpcmUoX293bmVyICE9IDApOw0KICAgICAgICBvd25lciA9IF9vd25lcjsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IENyb3dkc2FsZSBpcyBvd25lZCB7DQogICAgDQogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOw0KDQogICAgdWludCAgICBwdWJsaWMgZXRoZXJQcmljZTsNCiAgICBhZGRyZXNzIHB1YmxpYyBjcm93ZHNhbGVPd25lcjsNCiAgICB1aW50ICAgIHB1YmxpYyB0b3RhbExpbWl0VVNEOw0KICAgIHVpbnQgICAgcHVibGljIG1pbmltYWxTdWNjZXNzVVNEOw0KICAgIHVpbnQgICAgcHVibGljIGNvbGxlY3RlZFVTRDsNCg0KICAgIGVudW0gU3RhdGUgeyBEaXNhYmxlZCwgUHJlSUNPLCBDb21wbGV0ZVByZUlDTywgQ3Jvd2RzYWxlLCBFbmFibGVkLCBNaWdyYXRpb24gfQ0KICAgIGV2ZW50IE5ld1N0YXRlKFN0YXRlIHN0YXRlKTsNCiAgICBTdGF0ZSAgIHB1YmxpYyBzdGF0ZSA9IFN0YXRlLkRpc2FibGVkOw0KICAgIHVpbnQgICAgcHVibGljIGNyb3dkc2FsZVN0YXJ0VGltZTsNCiAgICB1aW50ICAgIHB1YmxpYyBjcm93ZHNhbGVGaW5pc2hUaW1lOw0KDQogICAgbW9kaWZpZXIgZW5hYmxlZFN0YXRlIHsNCiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5FbmFibGVkKTsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBtb2RpZmllciBlbmFibGVkT3JNaWdyYXRpb25TdGF0ZSB7DQogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuRW5hYmxlZCB8fCBzdGF0ZSA9PSBTdGF0ZS5NaWdyYXRpb24pOw0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIHN0cnVjdCBJbnZlc3RvciB7DQogICAgICAgIHVpbnQyNTYgYW1vdW50VG9rZW5zOw0KICAgICAgICB1aW50ICAgIGFtb3VudFdlaTsNCiAgICB9DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBJbnZlc3RvcikgcHVibGljIGludmVzdG9yczsNCiAgICBtYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpICAgICBwdWJsaWMgaW52ZXN0b3JzSXRlcjsNCiAgICB1aW50ICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgbnVtYmVyT2ZJbnZlc3RvcnM7DQogICAgDQogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7DQogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUHJlSUNPIHx8IHN0YXRlID09IFN0YXRlLkNyb3dkc2FsZSk7DQogICAgICAgIHVpbnQyNTYgdG9rZW5zUGVyVVNEID0gMDsNCiAgICAgICAgaWYgKHN0YXRlID09IFN0YXRlLlByZUlDTykgew0KICAgICAgICAgICAgdG9rZW5zUGVyVVNEID0gMTI1Ow0KICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IFN0YXRlLkNyb3dkc2FsZSkgew0KICAgICAgICAgICAgaWYgKG5vdyA8IGNyb3dkc2FsZVN0YXJ0VGltZSArIDEgZGF5cykgew0KICAgICAgICAgICAgICAgIHRva2Vuc1BlclVTRCA9IDExNTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAobm93IDwgY3Jvd2RzYWxlU3RhcnRUaW1lICsgMSB3ZWVrcykgew0KICAgICAgICAgICAgICAgIHRva2Vuc1BlclVTRCA9IDExMDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdG9rZW5zUGVyVVNEID0gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICh0b2tlbnNQZXJVU0QgPiAwKSB7DQogICAgICAgICAgICB1aW50IHZhbHVlV2VpID0gbXNnLnZhbHVlOw0KICAgICAgICAgICAgdWludCB2YWx1ZVVTRCA9IHZhbHVlV2VpICogZXRoZXJQcmljZSAvIDEwMDAwMDAwMDAwMDAwMDAwMDA7DQogICAgICAgICAgICBpZiAoY29sbGVjdGVkVVNEICsgdmFsdWVVU0QgPiB0b3RhbExpbWl0VVNEKSB7IC8vIGRvbid0IG5lZWQgc28gbXVjaCBldGhlcg0KICAgICAgICAgICAgICAgIHZhbHVlVVNEID0gdG90YWxMaW1pdFVTRCAtIGNvbGxlY3RlZFVTRDsNCiAgICAgICAgICAgICAgICB2YWx1ZVdlaSA9IHZhbHVlVVNEICogMTAwMDAwMDAwMDAwMDAwMDAwMCAvIGV0aGVyUHJpY2U7DQogICAgICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcihtc2cudmFsdWUgLSB2YWx1ZVdlaSk7DQogICAgICAgICAgICAgICAgY29sbGVjdGVkVVNEID0gdG90YWxMaW1pdFVTRDsgLy8gdG8gYmUgc3VyZSENCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY29sbGVjdGVkVVNEICs9IHZhbHVlVVNEOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdWludDI1NiB0b2tlbnMgPSB0b2tlbnNQZXJVU0QgKiB2YWx1ZVVTRDsNCiAgICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW21zZy5zZW5kZXJdICsgdG9rZW5zID4gYmFsYW5jZU9mW21zZy5zZW5kZXJdKTsgLy8gb3ZlcmZsb3cNCiAgICAgICAgICAgIHJlcXVpcmUodG9rZW5zID4gMCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIEludmVzdG9yIHN0b3JhZ2UgaW52ID0gaW52ZXN0b3JzW21zZy5zZW5kZXJdOw0KICAgICAgICAgICAgaWYgKGludi5hbW91bnRXZWkgPT0gMCkgeyAvLyBuZXcgaW52ZXN0b3INCiAgICAgICAgICAgICAgICBpbnZlc3RvcnNJdGVyW251bWJlck9mSW52ZXN0b3JzKytdID0gbXNnLnNlbmRlcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGludi5hbW91bnRUb2tlbnMgKz0gdG9rZW5zOw0KICAgICAgICAgICAgaW52LmFtb3VudFdlaSArPSB2YWx1ZVdlaTsNCiAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSB0b2tlbnM7DQogICAgICAgICAgICB0b3RhbFN1cHBseSArPSB0b2tlbnM7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gc3RhcnRUb2tlbnNTYWxlKGFkZHJlc3MgX2Nyb3dkc2FsZU93bmVyLCB1aW50IF9ldGhlclByaWNlKSBwdWJsaWMgb25seU93bmVyIHsNCiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5EaXNhYmxlZCB8fCBzdGF0ZSA9PSBTdGF0ZS5Db21wbGV0ZVByZUlDTyk7DQogICAgICAgIGNyb3dkc2FsZVN0YXJ0VGltZSA9IG5vdzsNCiAgICAgICAgY3Jvd2RzYWxlT3duZXIgPSBfY3Jvd2RzYWxlT3duZXI7DQogICAgICAgIGV0aGVyUHJpY2UgPSBfZXRoZXJQcmljZTsNCiAgICAgICAgZGVsZXRlIG51bWJlck9mSW52ZXN0b3JzOw0KICAgICAgICBkZWxldGUgY29sbGVjdGVkVVNEOw0KICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuRGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGNyb3dkc2FsZUZpbmlzaFRpbWUgPSBub3cgKyAxNCBkYXlzOw0KICAgICAgICAgICAgc3RhdGUgPSBTdGF0ZS5QcmVJQ087DQogICAgICAgICAgICB0b3RhbExpbWl0VVNEID0gMzAwMDAwOw0KICAgICAgICAgICAgbWluaW1hbFN1Y2Nlc3NVU0QgPSAzMDAwMDA7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjcm93ZHNhbGVGaW5pc2hUaW1lID0gbm93ICsgMzAgZGF5czsNCiAgICAgICAgICAgIHN0YXRlID0gU3RhdGUuQ3Jvd2RzYWxlOw0KICAgICAgICAgICAgdG90YWxMaW1pdFVTRCA9IDUyMDAwMDA7DQogICAgICAgICAgICBtaW5pbWFsU3VjY2Vzc1VTRCA9IDM2MDAwMDA7DQogICAgICAgIH0NCiAgICAgICAgTmV3U3RhdGUoc3RhdGUpOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiB0aW1lVG9GaW5pc2hUb2tlbnNTYWxlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCB0KSB7DQogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUHJlSUNPIHx8IHN0YXRlID09IFN0YXRlLkNyb3dkc2FsZSk7DQogICAgICAgIGlmIChub3cgPiBjcm93ZHNhbGVGaW5pc2hUaW1lKSB7DQogICAgICAgICAgICB0ID0gMDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHQgPSBjcm93ZHNhbGVGaW5pc2hUaW1lIC0gbm93Ow0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIGZpbmlzaFRva2Vuc1NhbGUodWludCBfaW52ZXN0b3JzVG9Qcm9jZXNzKSBwdWJsaWMgew0KICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlByZUlDTyB8fCBzdGF0ZSA9PSBTdGF0ZS5Dcm93ZHNhbGUpOw0KICAgICAgICByZXF1aXJlKG5vdyA+PSBjcm93ZHNhbGVGaW5pc2hUaW1lIHx8IGNvbGxlY3RlZFVTRCA9PSB0b3RhbExpbWl0VVNEKTsNCiAgICAgICAgaWYgKGNvbGxlY3RlZFVTRCA8IG1pbmltYWxTdWNjZXNzVVNEKSB7DQogICAgICAgICAgICAvLyBJbnZlc3RvcnMgY2FuIGdldCB0aGVpciBldGhlciBjYWxsaW5nIHdpdGhkcmF3QmFjaygpIGZ1bmN0aW9uDQogICAgICAgICAgICB3aGlsZSAoX2ludmVzdG9yc1RvUHJvY2VzcyA+IDAgJiYgbnVtYmVyT2ZJbnZlc3RvcnMgPiAwKSB7DQogICAgICAgICAgICAgICAgYWRkcmVzcyBhZGRyID0gaW52ZXN0b3JzSXRlclstLW51bWJlck9mSW52ZXN0b3JzXTsNCiAgICAgICAgICAgICAgICBJbnZlc3RvciBtZW1vcnkgaW52ID0gaW52ZXN0b3JzW2FkZHJdOw0KICAgICAgICAgICAgICAgIGJhbGFuY2VPZlthZGRyXSAtPSBpbnYuYW1vdW50VG9rZW5zOw0KICAgICAgICAgICAgICAgIHRvdGFsU3VwcGx5IC09IGludi5hbW91bnRUb2tlbnM7DQogICAgICAgICAgICAgICAgLS1faW52ZXN0b3JzVG9Qcm9jZXNzOw0KICAgICAgICAgICAgICAgIGRlbGV0ZSBpbnZlc3RvcnNJdGVyW251bWJlck9mSW52ZXN0b3JzXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChudW1iZXJPZkludmVzdG9ycyA+IDApIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuUHJlSUNPKSB7DQogICAgICAgICAgICAgICAgc3RhdGUgPSBTdGF0ZS5EaXNhYmxlZDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgc3RhdGUgPSBTdGF0ZS5Db21wbGV0ZVByZUlDTzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHdoaWxlIChfaW52ZXN0b3JzVG9Qcm9jZXNzID4gMCAmJiBudW1iZXJPZkludmVzdG9ycyA+IDApIHsNCiAgICAgICAgICAgICAgICAtLW51bWJlck9mSW52ZXN0b3JzOw0KICAgICAgICAgICAgICAgIC0tX2ludmVzdG9yc1RvUHJvY2VzczsNCiAgICAgICAgICAgICAgICBkZWxldGUgaW52ZXN0b3JzW2ludmVzdG9yc0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnNdXTsNCiAgICAgICAgICAgICAgICBkZWxldGUgaW52ZXN0b3JzSXRlcltudW1iZXJPZkludmVzdG9yc107DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAobnVtYmVyT2ZJbnZlc3RvcnMgPiAwKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHN0YXRlID09IFN0YXRlLlByZUlDTykgew0KICAgICAgICAgICAgICAgIGlmICghY3Jvd2RzYWxlT3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsNCiAgICAgICAgICAgICAgICBzdGF0ZSA9IFN0YXRlLkNvbXBsZXRlUHJlSUNPOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoIWNyb3dkc2FsZU93bmVyLnNlbmQoMTUwMDAwMCAqIDEwMDAwMDAwMDAwMDAwMDAwMDAgLyBldGhlclByaWNlKSkgdGhyb3c7DQogICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFkZGl0aW9uYWwgdG9rZW5zIGZvciBvd25lciAoMjglIG9mIGNvbXBsZXRlIHRvdGFsU3VwcGx5KQ0KICAgICAgICAgICAgICAgIGJhbGFuY2VPZltvd25lcl0gPSB0b3RhbFN1cHBseSAqIDI4IC8gNzI7DQogICAgICAgICAgICAgICAgdG90YWxTdXBwbHkgKz0gdG90YWxTdXBwbHkgKiAyOCAvIDcyOw0KICAgICAgICAgICAgICAgIHN0YXRlID0gU3RhdGUuRW5hYmxlZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBOZXdTdGF0ZShzdGF0ZSk7DQogICAgfQ0KICAgIA0KICAgIC8vIFRoaXMgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgYnkgdG9rZW4gaG9sZGVyIGluIGNhc2Ugb2YgY3Jvd2RzYWxlIGZhaWxlZA0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3QmFjaygpIHB1YmxpYyB7DQogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuRGlzYWJsZWQgfHwgc3RhdGUgPT0gU3RhdGUuQ29tcGxldGVQcmVJQ08pOw0KICAgICAgICB1aW50IHZhbHVlID0gaW52ZXN0b3JzW21zZy5zZW5kZXJdLmFtb3VudFdlaTsNCiAgICAgICAgaWYgKHZhbHVlID4gMCkgew0KICAgICAgICAgICAgZGVsZXRlIGludmVzdG9yc1ttc2cuc2VuZGVyXTsNCiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodmFsdWUpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQpjb250cmFjdCBUb2tlbiBpcyBDcm93ZHNhbGUgew0KICAgIA0KICAgIHN0cmluZyAgcHVibGljIHN0YW5kYXJkICAgID0gJ1Rva2VuIDAuMSc7DQogICAgc3RyaW5nICBwdWJsaWMgbmFtZSAgICAgICAgPSAnUFJPT0YnOw0KICAgIHN0cmluZyAgcHVibGljIHN5bWJvbCAgICAgID0gIlBGIjsNCiAgICB1aW50OCAgIHB1YmxpYyBkZWNpbWFscyAgICA9IDA7DQoNCiAgICBtb2RpZmllciBvbmx5VG9rZW5Ib2xkZXJzIHsNCiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gIT0gMCk7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dlZDsNCg0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOw0KDQogICAgZnVuY3Rpb24gVG9rZW4oKSBwYXlhYmxlIENyb3dkc2FsZSgpIHt9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBlbmFibGVkU3RhdGUgew0KICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOw0KICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlID49IGJhbGFuY2VPZltfdG9dKTsgLy8gb3ZlcmZsb3cNCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOw0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBlbmFibGVkU3RhdGUgew0KICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsNCiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA+PSBiYWxhbmNlT2ZbX3RvXSk7IC8vIG92ZXJmbG93DQogICAgICAgIHJlcXVpcmUoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsNCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7DQogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsNCiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBlbmFibGVkU3RhdGUgew0KICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgZW5hYmxlZFN0YXRlDQogICAgICAgIHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7DQogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOw0KICAgIH0NCn0NCg0KY29udHJhY3QgTWlncmF0aW9uQWdlbnQgew0KICAgIGZ1bmN0aW9uIG1pZ3JhdGVGcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKTsNCn0NCg0KY29udHJhY3QgVG9rZW5NaWdyYXRpb24gaXMgVG9rZW4gew0KICAgIA0KICAgIGFkZHJlc3MgcHVibGljIG1pZ3JhdGlvbkFnZW50Ow0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsTWlncmF0ZWQ7DQoNCiAgICBldmVudCBNaWdyYXRlKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOw0KDQogICAgZnVuY3Rpb24gVG9rZW5NaWdyYXRpb24oKSBwYXlhYmxlIFRva2VuKCkge30NCg0KICAgIC8vIE1pZ3JhdGUgX3ZhbHVlIG9mIHRva2VucyB0byB0aGUgbmV3IHRva2VuIGNvbnRyYWN0DQogICAgZnVuY3Rpb24gbWlncmF0ZSh1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgew0KICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLk1pZ3JhdGlvbik7DQogICAgICAgIHJlcXVpcmUobWlncmF0aW9uQWdlbnQgIT0gMCk7DQogICAgICAgIHJlcXVpcmUoX3ZhbHVlICE9IDApOw0KICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0pOw0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7DQogICAgICAgIHRvdGFsTWlncmF0ZWQgKz0gX3ZhbHVlOw0KICAgICAgICBNaWdyYXRpb25BZ2VudChtaWdyYXRpb25BZ2VudCkubWlncmF0ZUZyb20obXNnLnNlbmRlciwgX3ZhbHVlKTsNCiAgICAgICAgTWlncmF0ZShtc2cuc2VuZGVyLCBtaWdyYXRpb25BZ2VudCwgX3ZhbHVlKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzZXRNaWdyYXRpb25BZ2VudChhZGRyZXNzIF9hZ2VudCkgZXh0ZXJuYWwgb25seU93bmVyIHsNCiAgICAgICAgcmVxdWlyZShtaWdyYXRpb25BZ2VudCA9PSAwKTsNCiAgICAgICAgbWlncmF0aW9uQWdlbnQgPSBfYWdlbnQ7DQogICAgICAgIHN0YXRlID0gU3RhdGUuTWlncmF0aW9uOw0KICAgIH0NCn0NCg0KY29udHJhY3QgUHJvb2ZUZWFtVm90ZSBpcyBUb2tlbk1pZ3JhdGlvbiB7DQoNCiAgICBmdW5jdGlvbiBQcm9vZlRlYW1Wb3RlKCkgcGF5YWJsZSBUb2tlbk1pZ3JhdGlvbigpIHt9DQoNCiAgICBldmVudCBWb3RpbmdTdGFydGVkKHVpbnQgd2VpUmVxRnVuZCk7DQogICAgZXZlbnQgVm90ZWQoYWRkcmVzcyBpbmRleGVkIHZvdGVyLCBib29sIGluU3VwcG9ydCk7DQogICAgZXZlbnQgVm90aW5nRmluaXNoZWQoYm9vbCBpblN1cHBvcnQpOw0KDQogICAgc3RydWN0IFZvdGUgew0KICAgICAgICBib29sIGluU3VwcG9ydDsNCiAgICAgICAgYm9vbCB2b3RlZDsNCiAgICB9DQoNCiAgICB1aW50IHB1YmxpYyB3ZWlSZXFGdW5kOw0KICAgIHVpbnQgcHVibGljIHZvdGluZ0RlYWRsaW5lOw0KICAgIHVpbnQgcHVibGljIG51bWJlck9mVm90ZXM7DQogICAgdWludCBwdWJsaWMgeWVhOw0KICAgIHVpbnQgcHVibGljIG5heTsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IFZvdGUpIHB1YmxpYyB2b3RlczsNCiAgICBtYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpIHB1YmxpYyB2b3Rlc0l0ZXI7DQoNCiAgICBmdW5jdGlvbiBzdGFydFZvdGluZyh1aW50IF93ZWlSZXFGdW5kKSBwdWJsaWMgZW5hYmxlZE9yTWlncmF0aW9uU3RhdGUgb25seU93bmVyIHsNCiAgICAgICAgcmVxdWlyZSh3ZWlSZXFGdW5kID09IDAgJiYgX3dlaVJlcUZ1bmQgPiAwICYmIF93ZWlSZXFGdW5kIDw9IHRoaXMuYmFsYW5jZSk7DQogICAgICAgIHdlaVJlcUZ1bmQgPSBfd2VpUmVxRnVuZDsNCiAgICAgICAgdm90aW5nRGVhZGxpbmUgPSBub3cgKyA3IGRheXM7DQogICAgICAgIGRlbGV0ZSB5ZWE7DQogICAgICAgIGRlbGV0ZSBuYXk7DQogICAgICAgIFZvdGluZ1N0YXJ0ZWQoX3dlaVJlcUZ1bmQpOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiB2b3RpbmdJbmZvKCkgcHVibGljIGNvbnN0YW50IGVuYWJsZWRPck1pZ3JhdGlvblN0YXRlDQogICAgICAgIHJldHVybnModWludCBfd2VpUmVxRnVuZCwgdWludCBfdGltZVRvRmluaXNoKSB7DQogICAgICAgIF93ZWlSZXFGdW5kID0gd2VpUmVxRnVuZDsNCiAgICAgICAgaWYgKHZvdGluZ0RlYWRsaW5lIDw9IG5vdykgew0KICAgICAgICAgICAgX3RpbWVUb0ZpbmlzaCA9IDA7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBfdGltZVRvRmluaXNoID0gdm90aW5nRGVhZGxpbmUgLSBub3c7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiB2b3RlKGJvb2wgX2luU3VwcG9ydCkgcHVibGljIG9ubHlUb2tlbkhvbGRlcnMgZW5hYmxlZE9yTWlncmF0aW9uU3RhdGUNCiAgICAgICAgcmV0dXJucyAodWludCB2b3RlSWQpIHsNCiAgICAgICAgcmVxdWlyZSh2b3Rlc1ttc2cuc2VuZGVyXS52b3RlZCAhPSB0cnVlKTsNCiAgICAgICAgcmVxdWlyZSh2b3RpbmdEZWFkbGluZSA+IG5vdyk7DQogICAgICAgIHZvdGVJZCA9IG51bWJlck9mVm90ZXMrKzsNCiAgICAgICAgdm90ZXNJdGVyW3ZvdGVJZF0gPSBtc2cuc2VuZGVyOw0KICAgICAgICB2b3Rlc1ttc2cuc2VuZGVyXSA9IFZvdGUoe2luU3VwcG9ydDogX2luU3VwcG9ydCwgdm90ZWQ6IHRydWV9KTsNCiAgICAgICAgVm90ZWQobXNnLnNlbmRlciwgX2luU3VwcG9ydCk7DQogICAgICAgIHJldHVybiB2b3RlSWQ7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZmluaXNoVm90aW5nKHVpbnQgX3ZvdGVzVG9Qcm9jZXNzKSBwdWJsaWMgZW5hYmxlZE9yTWlncmF0aW9uU3RhdGUNCiAgICAgICAgcmV0dXJucyAoYm9vbCBfaW5TdXBwb3J0KSB7DQogICAgICAgIHJlcXVpcmUobm93ID49IHZvdGluZ0RlYWRsaW5lKTsNCg0KICAgICAgICB3aGlsZSAoX3ZvdGVzVG9Qcm9jZXNzID4gMCAmJiBudW1iZXJPZlZvdGVzID4gMCkgew0KICAgICAgICAgICAgYWRkcmVzcyB2b3RlciA9IHZvdGVzSXRlclstLW51bWJlck9mVm90ZXNdOw0KICAgICAgICAgICAgVm90ZSBtZW1vcnkgdiA9IHZvdGVzW3ZvdGVyXTsNCiAgICAgICAgICAgIHVpbnQgdm90ZVdlaWdodCA9IGJhbGFuY2VPZlt2b3Rlcl07DQogICAgICAgICAgICBpZiAodi5pblN1cHBvcnQpIHsNCiAgICAgICAgICAgICAgICB5ZWEgKz0gdm90ZVdlaWdodDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbmF5ICs9IHZvdGVXZWlnaHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBkZWxldGUgdm90ZXNbdm90ZXJdOw0KICAgICAgICAgICAgZGVsZXRlIHZvdGVzSXRlcltudW1iZXJPZlZvdGVzXTsNCiAgICAgICAgICAgIC0tX3ZvdGVzVG9Qcm9jZXNzOw0KICAgICAgICB9DQogICAgICAgIGlmIChudW1iZXJPZlZvdGVzID4gMCkgew0KICAgICAgICAgICAgX2luU3VwcG9ydCA9IGZhbHNlOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgX2luU3VwcG9ydCA9ICh5ZWEgPiBuYXkpOw0KICAgICAgICB1aW50IHdlaUZvclNlbmQgPSB3ZWlSZXFGdW5kOw0KICAgICAgICBkZWxldGUgd2VpUmVxRnVuZDsNCiAgICAgICAgZGVsZXRlIHZvdGluZ0RlYWRsaW5lOw0KICAgICAgICBkZWxldGUgbnVtYmVyT2ZWb3RlczsNCg0KICAgICAgICBpZiAoX2luU3VwcG9ydCkgew0KICAgICAgICAgICAgaWYgKG1pZ3JhdGlvbkFnZW50ID09IDApIHsNCiAgICAgICAgICAgICAgICBpZiAoIW93bmVyLnNlbmQod2VpRm9yU2VuZCkpIHRocm93Ow0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoIW1pZ3JhdGlvbkFnZW50LnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBWb3RpbmdGaW5pc2hlZChfaW5TdXBwb3J0KTsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IFByb29mUHVibGljVm90ZSBpcyBQcm9vZlRlYW1Wb3RlIHsNCg0KICAgIGZ1bmN0aW9uIFByb29mUHVibGljVm90ZSgpIHBheWFibGUgUHJvb2ZUZWFtVm90ZSgpIHt9DQoNCiAgICBldmVudCBEZXBsb3llZChhZGRyZXNzIGluZGV4ZWQgcHJvamVjdE93bmVyLCB1aW50IHByb29mUmVxRnVuZCwgc3RyaW5nIHVybEluZm8pOw0KICAgIGV2ZW50IFZvdGVkKGFkZHJlc3MgaW5kZXhlZCBwcm9qZWN0T3duZXIsIGFkZHJlc3MgaW5kZXhlZCB2b3RlciwgYm9vbCBpblN1cHBvcnQpOw0KICAgIGV2ZW50IFZvdGluZ0ZpbmlzaGVkKGFkZHJlc3MgaW5kZXhlZCBwcm9qZWN0T3duZXIsIGJvb2wgaW5TdXBwb3J0KTsNCg0KICAgIHN0cnVjdCBQcm9qZWN0IHsNCiAgICAgICAgdWludCAgIHByb29mUmVxRnVuZDsNCiAgICAgICAgc3RyaW5nIHVybEluZm87DQogICAgICAgIHVpbnQgICB2b3RpbmdEZWFkbGluZTsNCiAgICAgICAgdWludCAgIG51bWJlck9mVm90ZXM7DQogICAgICAgIHVpbnQgICB5ZWE7DQogICAgICAgIHVpbnQgICBuYXk7DQogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gVm90ZSkgdm90ZXM7DQogICAgICAgIG1hcHBpbmcgKHVpbnQgPT4gYWRkcmVzcykgdm90ZXNJdGVyOw0KICAgIH0NCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IFByb2plY3QpIHB1YmxpYyBwcm9qZWN0czsNCg0KICAgIGZ1bmN0aW9uIGRlcGxveVByb2plY3QodWludCBfcHJvb2ZSZXFGdW5kLCBzdHJpbmcgX3VybEluZm8pIHB1YmxpYw0KICAgICAgICBvbmx5VG9rZW5Ib2xkZXJzIGVuYWJsZWRPck1pZ3JhdGlvblN0YXRlIHsNCiAgICAgICAgcmVxdWlyZShfcHJvb2ZSZXFGdW5kID4gMCAmJiBfcHJvb2ZSZXFGdW5kIDw9IGJhbGFuY2VPZlt0aGlzXSk7DQogICAgICAgIHJlcXVpcmUoX3Byb29mUmVxRnVuZCA8PSBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gKiAxMDAwKTsNCiAgICAgICAgcmVxdWlyZShwcm9qZWN0c1ttc2cuc2VuZGVyXS5wcm9vZlJlcUZ1bmQgPT0gMCk7DQogICAgICAgIHByb2plY3RzW21zZy5zZW5kZXJdLnByb29mUmVxRnVuZCA9IF9wcm9vZlJlcUZ1bmQ7DQogICAgICAgIHByb2plY3RzW21zZy5zZW5kZXJdLnVybEluZm8gPSBfdXJsSW5mbzsNCiAgICAgICAgcHJvamVjdHNbbXNnLnNlbmRlcl0udm90aW5nRGVhZGxpbmUgPSBub3cgKyA3IGRheXM7DQogICAgICAgIERlcGxveWVkKG1zZy5zZW5kZXIsIF9wcm9vZlJlcUZ1bmQsIF91cmxJbmZvKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gcHJvamVjdEluZm8oYWRkcmVzcyBfcHJvamVjdE93bmVyKSBlbmFibGVkT3JNaWdyYXRpb25TdGF0ZSBjb25zdGFudCBwdWJsaWMgDQogICAgICAgIHJldHVybnModWludCBfcHJvb2ZSZXFGdW5kLCBzdHJpbmcgX3VybEluZm8sIHVpbnQgX3RpbWVUb0ZpbmlzaCkgew0KICAgICAgICBfcHJvb2ZSZXFGdW5kID0gcHJvamVjdHNbX3Byb2plY3RPd25lcl0ucHJvb2ZSZXFGdW5kOw0KICAgICAgICBfdXJsSW5mbyA9IHByb2plY3RzW19wcm9qZWN0T3duZXJdLnVybEluZm87DQogICAgICAgIGlmIChwcm9qZWN0c1tfcHJvamVjdE93bmVyXS52b3RpbmdEZWFkbGluZSA8PSBub3cpIHsNCiAgICAgICAgICAgIF90aW1lVG9GaW5pc2ggPSAwOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgX3RpbWVUb0ZpbmlzaCA9IHByb2plY3RzW19wcm9qZWN0T3duZXJdLnZvdGluZ0RlYWRsaW5lIC0gbm93Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdm90ZShhZGRyZXNzIF9wcm9qZWN0T3duZXIsIGJvb2wgX2luU3VwcG9ydCkgcHVibGljDQogICAgICAgIG9ubHlUb2tlbkhvbGRlcnMgZW5hYmxlZE9yTWlncmF0aW9uU3RhdGUgcmV0dXJucyAodWludCB2b3RlSWQpIHsNCiAgICAgICAgUHJvamVjdCBzdG9yYWdlIHAgPSBwcm9qZWN0c1tfcHJvamVjdE93bmVyXTsNCiAgICAgICAgcmVxdWlyZShwLnByb29mUmVxRnVuZCA+IDApOw0KICAgICAgICByZXF1aXJlKHAudm90ZXNbbXNnLnNlbmRlcl0udm90ZWQgIT0gdHJ1ZSk7DQogICAgICAgIHJlcXVpcmUocC52b3RpbmdEZWFkbGluZSA+IG5vdyk7DQogICAgICAgIHZvdGVJZCA9IHAubnVtYmVyT2ZWb3RlcysrOw0KICAgICAgICBwLnZvdGVzSXRlclt2b3RlSWRdID0gbXNnLnNlbmRlcjsNCiAgICAgICAgcC52b3Rlc1ttc2cuc2VuZGVyXSA9IFZvdGUoe2luU3VwcG9ydDogX2luU3VwcG9ydCwgdm90ZWQ6IHRydWV9KTsNCiAgICAgICAgVm90ZWQoX3Byb2plY3RPd25lciwgbXNnLnNlbmRlciwgX2luU3VwcG9ydCk7IA0KICAgICAgICByZXR1cm4gdm90ZUlkOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGZpbmlzaFZvdGluZyhhZGRyZXNzIF9wcm9qZWN0T3duZXIsIHVpbnQgX3ZvdGVzVG9Qcm9jZXNzKSBwdWJsaWMNCiAgICAgICAgZW5hYmxlZE9yTWlncmF0aW9uU3RhdGUgcmV0dXJucyAoYm9vbCBfaW5TdXBwb3J0KSB7DQogICAgICAgIFByb2plY3Qgc3RvcmFnZSBwID0gcHJvamVjdHNbX3Byb2plY3RPd25lcl07DQogICAgICAgIHJlcXVpcmUocC5wcm9vZlJlcUZ1bmQgPiAwKTsNCiAgICAgICAgcmVxdWlyZShub3cgPj0gcC52b3RpbmdEZWFkbGluZSAmJiBwLnByb29mUmVxRnVuZCA8PSBiYWxhbmNlT2ZbdGhpc10pOw0KDQogICAgICAgIHdoaWxlIChfdm90ZXNUb1Byb2Nlc3MgPiAwICYmIHAubnVtYmVyT2ZWb3RlcyA+IDApIHsNCiAgICAgICAgICAgIGFkZHJlc3Mgdm90ZXIgPSBwLnZvdGVzSXRlclstLXAubnVtYmVyT2ZWb3Rlc107DQogICAgICAgICAgICBWb3RlIG1lbW9yeSB2ID0gcC52b3Rlc1t2b3Rlcl07DQogICAgICAgICAgICB1aW50IHZvdGVXZWlnaHQgPSBiYWxhbmNlT2Zbdm90ZXJdOw0KICAgICAgICAgICAgaWYgKHYuaW5TdXBwb3J0KSB7DQogICAgICAgICAgICAgICAgcC55ZWEgKz0gdm90ZVdlaWdodDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcC5uYXkgKz0gdm90ZVdlaWdodDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGRlbGV0ZSBwLnZvdGVzSXRlcltwLm51bWJlck9mVm90ZXNdOw0KICAgICAgICAgICAgZGVsZXRlIHAudm90ZXNbdm90ZXJdOw0KICAgICAgICAgICAgLS1fdm90ZXNUb1Byb2Nlc3M7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHAubnVtYmVyT2ZWb3RlcyA+IDApIHsNCiAgICAgICAgICAgIF9pblN1cHBvcnQgPSBmYWxzZTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIF9pblN1cHBvcnQgPSAocC55ZWEgPiBwLm5heSk7DQoNCiAgICAgICAgdWludCBwcm9vZlJlcUZ1bmQgPSBwLnByb29mUmVxRnVuZDsNCiAgICAgICAgZGVsZXRlIHByb2plY3RzW19wcm9qZWN0T3duZXJdOw0KDQogICAgICAgIGlmIChfaW5TdXBwb3J0KSB7DQogICAgICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfcHJvamVjdE93bmVyXSArIHByb29mUmVxRnVuZCA+PSBiYWxhbmNlT2ZbX3Byb2plY3RPd25lcl0pOyAvLyBvdmVyZmxvdw0KICAgICAgICAgICAgYmFsYW5jZU9mW3RoaXNdIC09IHByb29mUmVxRnVuZDsNCiAgICAgICAgICAgIGJhbGFuY2VPZltfcHJvamVjdE93bmVyXSArPSBwcm9vZlJlcUZ1bmQ7DQogICAgICAgICAgICBUcmFuc2Zlcih0aGlzLCBfcHJvamVjdE93bmVyLCBwcm9vZlJlcUZ1bmQpOw0KICAgICAgICB9DQoNCiAgICAgICAgVm90aW5nRmluaXNoZWQoX3Byb2plY3RPd25lciwgX2luU3VwcG9ydCk7DQogICAgfQ0KfQ0KDQpjb250cmFjdCBQcm9vZiBpcyBQcm9vZlB1YmxpY1ZvdGUgew0KDQogICAgc3RydWN0IFN3eXBlIHsNCiAgICAgICAgdWludDE2ICBzd3lwZTsNCiAgICAgICAgdWludCAgICB0aW1lc3RhbXBTd3lwZTsNCiAgICB9DQogICAgDQogICAgc3RydWN0IFZpZGVvIHsNCiAgICAgICAgdWludDE2ICBzd3lwZTsNCiAgICAgICAgdWludCAgICB0aW1lc3RhbXBTd3lwZTsNCiAgICAgICAgdWludCAgICB0aW1lc3RhbXBIYXNoOw0KICAgICAgICBhZGRyZXNzIG93bmVyOw0KICAgIH0NCg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gU3d5cGUpIHB1YmxpYyBzd3lwZXM7DQogICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBWaWRlbykgcHVibGljIHZpZGVvczsNCg0KICAgIHVpbnQgcHJpY2VJblRva2VuczsNCiAgICB1aW50IHRlYW1GZWU7DQoNCiAgICBmdW5jdGlvbiBQcm9vZigpIHBheWFibGUgUHJvb2ZQdWJsaWNWb3RlKCkge30NCg0KICAgIGZ1bmN0aW9uIHNldFByaWNlKHVpbnQgX3ByaWNlSW5Ub2tlbnMpIHB1YmxpYyBvbmx5T3duZXIgew0KICAgICAgICByZXF1aXJlKF9wcmljZUluVG9rZW5zID49IDIpOw0KICAgICAgICB0ZWFtRmVlID0gX3ByaWNlSW5Ub2tlbnMgLyAxMDsNCiAgICAgICAgaWYgKHRlYW1GZWUgPT0gMCkgew0KICAgICAgICAgICAgdGVhbUZlZSA9IDE7DQogICAgICAgIH0NCiAgICAgICAgcHJpY2VJblRva2VucyA9IF9wcmljZUluVG9rZW5zIC0gdGVhbUZlZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzd3lwZUNvZGUoKSBwdWJsaWMgZW5hYmxlZFN0YXRlIHJldHVybnMgKHVpbnQxNiBfc3d5cGUpIHsNCiAgICAgICAgYnl0ZXMzMiBibG9ja0hhc2ggPSBibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyIC0gMSk7DQogICAgICAgIGJ5dGVzMzIgc2hhVGVtcCA9IHNoYTMobXNnLnNlbmRlciwgYmxvY2tIYXNoKTsNCiAgICAgICAgX3N3eXBlID0gdWludDE2KHVpbnQyNTYoc2hhVGVtcCkgJSA2NTUzNik7DQogICAgICAgIHN3eXBlc1ttc2cuc2VuZGVyXSA9IFN3eXBlKHtzd3lwZTogX3N3eXBlLCB0aW1lc3RhbXBTd3lwZTogbm93fSk7DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIHNldEhhc2godWludDE2IF9zd3lwZSwgYnl0ZXMzMiBfaGFzaCkgcHVibGljIGVuYWJsZWRTdGF0ZSB7DQogICAgICAgIHJlcXVpcmUoc3d5cGVzW21zZy5zZW5kZXJdLnRpbWVzdGFtcFN3eXBlICE9IDApOw0KICAgICAgICByZXF1aXJlKHN3eXBlc1ttc2cuc2VuZGVyXS5zd3lwZSA9PSBfc3d5cGUpOw0KICAgICAgICB0cmFuc2Zlcihvd25lciwgdGVhbUZlZSk7DQogICAgICAgIHRyYW5zZmVyKHRoaXMsIHByaWNlSW5Ub2tlbnMpOw0KICAgICAgICB2aWRlb3NbX2hhc2hdID0gVmlkZW8oe3N3eXBlOiBfc3d5cGUsIHRpbWVzdGFtcFN3eXBlOnN3eXBlc1ttc2cuc2VuZGVyXS50aW1lc3RhbXBTd3lwZSwgDQogICAgICAgICAgICB0aW1lc3RhbXBIYXNoOiBub3csIG93bmVyOiBtc2cuc2VuZGVyfSk7DQogICAgICAgIGRlbGV0ZSBzd3lwZXNbbXNnLnNlbmRlcl07DQogICAgfQ0KfQ=='