base 64 content
base64rSPLT_F
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC42Ow0KDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gIFIgU3BsaXQgQ29udHJhY3QNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpjb250cmFjdCBSU1BMVF9GIHsNCiAgICAgICAgZXZlbnQgU3RhdEV2ZW50KHN0cmluZyBtc2cpOw0KICAgICAgICBldmVudCBTdGF0RXZlbnRJKHN0cmluZyBtc2csIHVpbnQgdmFsKTsNCg0KICAgICAgICBlbnVtIFNldHRpbmdTdGF0ZVZhbHVlICB7ZGVidWcsIGxvY2tlZH0NCg0KICAgICAgICBzdHJ1Y3QgcGFydG5lckFjY291bnQgew0KICAgICAgICAgICAgICAgIHVpbnQgY3JlZGl0ZWQ7ICAvLyB0b3RhbCBmdW5kcyBjcmVkaXRlZCB0byB0aGlzIGFjY291bnQNCiAgICAgICAgICAgICAgICB1aW50IGJhbGFuY2U7ICAgLy8gY3VycmVudCBiYWxhbmNlID0gY3JlZGl0ZWQgLSBhbW91bnQgd2l0aGRyYXduDQogICAgICAgICAgICAgICAgdWludCBwY3R4MTA7ICAgICAvLyBwZXJjZW50IGFsbG9jYXRpb24gdGltZXMgdGVuDQogICAgICAgICAgICAgICAgYWRkcmVzcyBhZGRyOyAgIC8vIHBheW91dCBhZGRyIG9mIHRoaXMgYWNjdA0KICAgICAgICAgICAgICAgIGJvb2wgZXZlblN0YXJ0OyAvLyBldmVuIHNwbGl0IHVwIHRvIGV2ZW5EaXN0VGhyZXNoDQogICAgICAgIH0NCg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vICBkYXRhIHN0b3JhZ2UNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXBsb3llciBleGVjdXRvcg0KICAgICAgICBtYXBwaW5nICh1aW50ID0+IHBhcnRuZXJBY2NvdW50KSBwYXJ0bmVyQWNjb3VudHM7ICAgIC8vIGFjY291bnRzIGJ5IGluZGV4DQogICAgICAgIHVpbnQgcHVibGljIG51bUFjY291bnRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaG93IG1hbnkgYWNjb3VudHMgZXhpc3QNCiAgICAgICAgdWludCBwdWJsaWMgaG9sZG92ZXJCYWxhbmNlOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbW91bnQgeWV0IHRvIGJlIGRpc3RyaWJ1dGVkDQogICAgICAgIHVpbnQgcHVibGljIHRvdGFsRnVuZHNSZWNlaXZlZDsgICAgICAgICAgICAgICAgICAgICAgLy8gYW1vdW50IHJlY2VpdmVkIHNpbmNlIGJlZ2luIG9mIHRpbWUNCiAgICAgICAgdWludCBwdWJsaWMgdG90YWxGdW5kc0Rpc3RyaWJ1dGVkOyAgICAgICAgICAgICAgICAgICAvLyBhbW91bnQgZGlzdHJpYnV0ZWQgc2luY2UgYmVnaW4gb2YgdGltZQ0KICAgICAgICB1aW50IHB1YmxpYyB0b3RhbEZ1bmRzV2l0aGRyYXduOyAgICAgICAgICAgICAgICAgICAgIC8vIGFtb3VudCB3aXRoZHJhd24gc2luY2UgYmVnaW4gb2YgdGltZQ0KICAgICAgICB1aW50IHB1YmxpYyBldmVuRGlzdFRocmVzaDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc3RyaWJ1dGUgZXZlbmx5IHVudGlsIHRoaXMgYW1vdW50ICh0b3RhbCkNCiAgICAgICAgdWludCBwdWJsaWMgd2l0aGRyYXdHYXMgPSAzNTAwMDsgICAgICAgICAgICAgICAgICAgICAvLyBnYXMgZm9yIHdpdGhkcmF3YWxzDQogICAgICAgIHVpbnQgY29uc3RhbnQgVEVOSFVORFdFSSA9IDEwMDA7ICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCBndC4gMTAwMCB3ZWkgdG8gZG8gcGF5b3V0DQogICAgICAgIHVpbnQgY29uc3RhbnQgTUFYX0FDQ09VTlRTID0gNTsgICAgICAgICAgICAgICAgICAgICAgLy8gbWF4IGFjY291bnRzIHRoaXMgY29udHJhY3QgY2FuIGhhbmRsZQ0KICAgICAgICBTZXR0aW5nU3RhdGVWYWx1ZSBwdWJsaWMgc2V0dGluZ3NTdGF0ZSA9IFNldHRpbmdTdGF0ZVZhbHVlLmRlYnVnOyANCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIGNvbnRyYWN0IGNvbnN0cnVjdG9yDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGZ1bmN0aW9uIFJTUExUX0YoKSB7DQogICAgICAgICAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBsb2NrDQogICAgICAgIC8vIGxvY2sgdGhlIGNvbnRyYWN0LiBhZnRlciBjYWxsaW5nIHRoaXMgeW91IHdpbGwgbm90IGJlIGFibGUgdG8gbW9kaWZ5IGFjY291bnRzOg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBsb2NrKCkgew0KICAgICAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbm90IG93bmVyIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IGxvY2tlZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzZXR0aW5nc1N0YXRlID0gU2V0dGluZ1N0YXRlVmFsdWUubG9ja2VkOw0KICAgICAgICAgICAgICAgIFN0YXRFdmVudCgib2s6IGNvbnRyYWN0IGxvY2tlZCIpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyByZXNldA0KICAgICAgICAvLyByZXNldCBhbGwgYWNjb3VudHMNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gcmVzZXQoKSB7DQogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBub3Qgb3duZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzU3RhdGUgPT0gU2V0dGluZ1N0YXRlVmFsdWUubG9ja2VkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbG9ja2VkIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG51bUFjY291bnRzID0gMDsNCiAgICAgICAgICAgICAgICBob2xkb3ZlckJhbGFuY2UgPSAwOw0KICAgICAgICAgICAgICAgIHRvdGFsRnVuZHNSZWNlaXZlZCA9IDA7DQogICAgICAgICAgICAgICAgdG90YWxGdW5kc0Rpc3RyaWJ1dGVkID0gMDsNCiAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzV2l0aGRyYXduID0gMDsNCiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIm9rOiBhbGwgYWNjdHMgcmVzZXQiKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gc2V0IGV2ZW4gZGlzdHJpYnV0aW9uIHRocmVzaG9sZA0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBzZXRFdmVuRGlzdFRocmVzaCh1aW50MjU2IF90aHJlc2gpIHsNCiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IG5vdCBvd25lciIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBsb2NrZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZXZlbkRpc3RUaHJlc2ggPSAoX3RocmVzaCAvIFRFTkhVTkRXRUkpICogVEVOSFVORFdFSTsNCiAgICAgICAgICAgICAgICBTdGF0RXZlbnRJKCJvazogdGhyZXNob2xkIHNldCIsIGV2ZW5EaXN0VGhyZXNoKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gc2V0IGV2ZW4gZGlzdHJpYnV0aW9uIHRocmVzaG9sZA0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBzZXRXaXRkcmF3R2FzKHVpbnQyNTYgX3dpdGhkcmF3R2FzKSB7DQogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBub3Qgb3duZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgd2l0aGRyYXdHYXMgPSBfd2l0aGRyYXdHYXM7DQogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgib2s6IHdpdGhkcmF3IGdhcyBzZXQiLCB3aXRoZHJhd0dhcyk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBhZGQgYSBuZXcgYWNjb3VudA0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gYWRkQWNjb3VudChhZGRyZXNzIF9hZGRyLCB1aW50MjU2IF9wY3R4MTAsIGJvb2wgX2V2ZW5TdGFydCkgew0KICAgICAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbm90IG93bmVyIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IGxvY2tlZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobnVtQWNjb3VudHMgPj0gTUFYX0FDQ09VTlRTKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbWF4IGFjY291bnRzIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tudW1BY2NvdW50c10uYWRkciA9IF9hZGRyOw0KICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tudW1BY2NvdW50c10ucGN0eDEwID0gX3BjdHgxMDsNCiAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbbnVtQWNjb3VudHNdLmV2ZW5TdGFydCA9IF9ldmVuU3RhcnQ7DQogICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW251bUFjY291bnRzXS5jcmVkaXRlZCA9IDA7DQogICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW251bUFjY291bnRzXS5iYWxhbmNlID0gMDsNCiAgICAgICAgICAgICAgICArK251bUFjY291bnRzOw0KICAgICAgICAgICAgICAgIFN0YXRFdmVudCgib2s6IGFjY3QgYWRkZWQiKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBnZXQgYWNjdCBpbmZvDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gZ2V0QWNjb3VudEluZm8oYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgcmV0dXJucyh1aW50IF9pZHgsIHVpbnQgX3BjdHgxMCwgYm9vbCBfZXZlblN0YXJ0LCB1aW50IF9jcmVkaXRlZCwgdWludCBfYmFsYW5jZSkgew0KICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBwYXJ0bmVyQWNjb3VudHNbaV0uYWRkcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRyID09IF9hZGRyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZHggPSBpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGN0eDEwID0gcGFydG5lckFjY291bnRzW2ldLnBjdHgxMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2V2ZW5TdGFydCA9IHBhcnRuZXJBY2NvdW50c1tpXS5ldmVuU3RhcnQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jcmVkaXRlZCA9IHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2JhbGFuY2UgPSBwYXJ0bmVyQWNjb3VudHNbaV0uYmFsYW5jZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJvazogZm91bmQgYWNjdCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBhY2N0IG5vdCBmb3VuZCIpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIGdldCB0b3RhbCBwZXJjZW50YWdlcyB4MTANCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBnZXRUb3RhbFBjdHgxMCgpIGNvbnN0YW50IHJldHVybnModWludCBfdG90YWxQY3R4MTApIHsNCiAgICAgICAgICAgICAgICBfdG90YWxQY3R4MTAgPSAwOw0KICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBfdG90YWxQY3R4MTAgKz0gcGFydG5lckFjY291bnRzW2ldLnBjdHgxMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgib2s6IHRvdGFsIHBjdHgxMCIsIF90b3RhbFBjdHgxMCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gZ2V0IG5vLiBhY2N0cyB0aGF0IGFyZSBzZXQgZm9yIGV2ZW4gc3BsaXQNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBnZXROdW1FdmVuU3BsaXRzKCkgY29uc3RhbnQgcmV0dXJucyh1aW50IF9udW1FdmVuU3BsaXRzKSB7DQogICAgICAgICAgICAgICAgX251bUV2ZW5TcGxpdHMgPSAwOw0KICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydG5lckFjY291bnRzW2ldLmV2ZW5TdGFydCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK19udW1FdmVuU3BsaXRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBTdGF0RXZlbnRJKCJvazogZXZlbiBzcGxpdHMiLCBfbnVtRXZlblNwbGl0cyk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gZGVmYXVsdCBwYXlhYmxlIGZ1bmN0aW9uLg0KICAgICAgICAvLyBjYWxsIHVzIHdpdGggcGxlbnR5IG9mIGdhcywgb3IgY2F0YXN0cm9waGUgd2lsbCBlbnN1ZQ0KICAgICAgICAvLyBub3RlOiB5b3UgY2FuIGNhbGwgdGhpcyBmY24gd2l0aCBhbW91bnQgb2YgemVybyB0byBmb3JjZSBkaXN0cmlidXRpb24NCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzUmVjZWl2ZWQgKz0gbXNnLnZhbHVlOw0KICAgICAgICAgICAgICAgIGhvbGRvdmVyQmFsYW5jZSArPSBtc2cudmFsdWU7DQogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgib2s6IGluY29taW5nIiwgbXNnLnZhbHVlKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBkaXN0cmlidXRlIGZ1bmRzIHRvIGFsbCBwYXJ0bmVycw0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGUoKSB7DQogICAgICAgICAgICAgICAgLy9vbmx5IHBheW91dCBpZiB3ZSBoYXZlIG1vcmUgdGhhbiAxMDAwIHdlaQ0KICAgICAgICAgICAgICAgIGlmIChob2xkb3ZlckJhbGFuY2UgPCBURU5IVU5EV0VJKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vZmlyc3QgcGF5IGFjY291bnRzIHRoYXQgYXJlIG5vdCBjb25zdHJhaW5lZCBieSBldmVuIGRpc3RyaWJ1dGlvbg0KICAgICAgICAgICAgICAgIC8vZWFjaCBhY2NvdW50IGdldHMgdGhlaXIgcHJlc2NyaWJlZCBwZXJjZW50YWdlIG9mIHRoaXMgaG9sZG92ZXIuDQogICAgICAgICAgICAgICAgdWludCBpOw0KICAgICAgICAgICAgICAgIHVpbnQgcGN0eDEwOw0KICAgICAgICAgICAgICAgIHVpbnQgYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgdWludCBtYXhBY2N0RGlzdDsNCiAgICAgICAgICAgICAgICB1aW50IG51bUV2ZW5TcGxpdHMgPSAwOw0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1BY2NvdW50czsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRuZXJBY2NvdW50c1tpXS5ldmVuU3RhcnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKytudW1FdmVuU3BsaXRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGN0eDEwID0gcGFydG5lckFjY291bnRzW2ldLnBjdHgxMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdERpc3QgPSBob2xkb3ZlckJhbGFuY2UgKiBwY3R4MTAgLyBURU5IVU5EV0VJOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3dlIGFsc28gZG91YmxlIGNoZWNrIHRvIGVuc3VyZSB0aGF0IHRoZSBhbW91bnQgYXdhcmRlZCBjYW5ub3QgZXhjZWVkIHRoZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvdGFsIGFtb3VudCBkdWUgdG8gdGhpcyBhY2N0LiBub3RlOiB0aGlzIGNoZWNrIGlzIG5lY2Vzc2FyeSwgY3V6IGhlcmUgd2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9taWdodCBub3QgZGlzdHJpYnV0ZSB0aGUgZnVsbCBob2xkb3ZlciBhbW91bnQgZHVyaW5nIGVhY2ggcGFzcy4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4QWNjdERpc3QgPSB0b3RhbEZ1bmRzUmVjZWl2ZWQgKiBwY3R4MTAgLyBURU5IVU5EV0VJOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkID49IG1heEFjY3REaXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdERpc3QgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCArIGFjY3REaXN0ID4gbWF4QWNjdERpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N0RGlzdCA9IG1heEFjY3REaXN0IC0gcGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW2ldLmJhbGFuY2UgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsRnVuZHNEaXN0cmlidXRlZCArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZG92ZXJCYWxhbmNlIC09IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvL25vdyBwYXkgYWNjb3VudHMgdGhhdCBhcmUgY29uc3RyYWluZWQgYnkgZXZlbiBkaXN0cmlidXRpb24uIHdlIHNwbGl0IHdoYXRldmVyIGlzDQogICAgICAgICAgICAgICAgLy9sZWZ0IG9mIHRoZSBob2xkb3ZlciBldmVubHkuDQogICAgICAgICAgICAgICAgdWludCBkaXN0QW1vdW50ID0gaG9sZG92ZXJCYWxhbmNlOw0KICAgICAgICAgICAgICAgIGlmICh0b3RhbEZ1bmRzRGlzdHJpYnV0ZWQgPCBldmVuRGlzdFRocmVzaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0bmVyQWNjb3VudHNbaV0uZXZlblN0YXJ0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdERpc3QgPSBkaXN0QW1vdW50IC8gbnVtRXZlblNwbGl0czsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3dlIGFsc28gZG91YmxlIGNoZWNrIHRvIGVuc3VyZSB0aGF0IHRoZSBhbW91bnQgYXdhcmRlZCBjYW5ub3QgZXhjZWVkIHRoZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG90YWwgYW1vdW50IGR1ZSB0byB0aGlzIGFjY3QuIG5vdGU6IHRoaXMgY2hlY2sgaXMgbmVjZXNzYXJ5LCBjdXogaGVyZSB3ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbWlnaHQgbm90IGRpc3RyaWJ1dGUgdGhlIGZ1bGwgaG9sZG92ZXIgYW1vdW50IGR1cmluZyBlYWNoIHBhc3MuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBmdW5kTGltaXQgPSB0b3RhbEZ1bmRzUmVjZWl2ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmRMaW1pdCA+IGV2ZW5EaXN0VGhyZXNoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuZExpbWl0ID0gZXZlbkRpc3RUaHJlc2g7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4QWNjdERpc3QgPSBmdW5kTGltaXQgLyBudW1FdmVuU3BsaXRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQgPj0gbWF4QWNjdERpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3REaXN0ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCArIGFjY3REaXN0ID4gbWF4QWNjdERpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3REaXN0ID0gbWF4QWNjdERpc3QgLSBwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbaV0uYmFsYW5jZSArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzRGlzdHJpYnV0ZWQgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZG92ZXJCYWxhbmNlIC09IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vbm93LCBpZiB0aGVyZSBhcmUgYW55IGZ1bmRzIGxlZnQgKGJlY2F1c2Ugb2YgYSByZW1haW5kZXIgaW4gdGhlIGV2ZW4gc3BsaXQpLCB0aGVuIGRpc3RyaWJ1dGUgdGhlbQ0KICAgICAgICAgICAgICAgIC8vYWNjb3JkaW5nIHRvIHBlcmNlbnRhZ2VzLiBub3RlIHRoYXQgdGhpcyBtdXN0IGJlIGRvbmUgaGVyZSwgZXZlbiBpZiB3ZSBoYXZlbid0IHBhc3NlZCB0aGUgZXZlbiBkaXN0cmlidXRpb24NCiAgICAgICAgICAgICAgICAvL3RocmVzaG9sZCwgdG8gZW5zdXJlIHRoYXQgd2UgZG9uJ3QgZ2V0IHN0dWNrIHdpdGggYSByZW1haW5kZXIgYW1vdW50IHRoYXQgY2Fubm90IGJlIGRpc3RyaWJ1dGVkLg0KICAgICAgICAgICAgICAgIGRpc3RBbW91bnQgPSBob2xkb3ZlckJhbGFuY2U7DQogICAgICAgICAgICAgICAgaWYgKGRpc3RBbW91bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtQWNjb3VudHM7IGkrKyApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRuZXJBY2NvdW50c1tpXS5ldmVuU3RhcnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY3R4MTAgPSBwYXJ0bmVyQWNjb3VudHNbaV0ucGN0eDEwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3REaXN0ID0gZGlzdEFtb3VudCAqIHBjdHgxMCAvIFRFTkhVTkRXRUk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy93ZSBhbHNvIGRvdWJsZSBjaGVjayB0byBlbnN1cmUgdGhhdCB0aGUgYW1vdW50IGF3YXJkZWQgY2Fubm90IGV4Y2VlZCB0aGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvdGFsIGFtb3VudCBkdWUgdG8gdGhpcyBhY2N0LiBub3RlOiB0aGlzIGNoZWNrIGlzIG5lY2Vzc2FyeSwgY3V6IGhlcmUgd2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL21pZ2h0IG5vdCBkaXN0cmlidXRlIHRoZSBmdWxsIGhvbGRvdmVyIGFtb3VudCBkdXJpbmcgZWFjaCBwYXNzLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEFjY3REaXN0ID0gdG90YWxGdW5kc1JlY2VpdmVkICogcGN0eDEwIC8gVEVOSFVORFdFSTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkID49IG1heEFjY3REaXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N0RGlzdCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQgKyBhY2N0RGlzdCA+IG1heEFjY3REaXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N0RGlzdCA9IG1heEFjY3REaXN0IC0gcGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW2ldLmJhbGFuY2UgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxGdW5kc0Rpc3RyaWJ1dGVkICs9IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRvdmVyQmFsYW5jZSAtPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIm9rOiBkaXN0cmlidXRlZCBmdW5kcyIpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIHdpdGhkcmF3IGFjY291bnQgYmFsYW5jZQ0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgew0KICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBwYXJ0bmVyQWNjb3VudHNbaV0uYWRkcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRyID09IG1zZy5zZW5kZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBhbW91bnQgPSBwYXJ0bmVyQWNjb3VudHNbaV0uYmFsYW5jZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtb3VudCA9PSAwKSB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBiYWxhbmNlIGlzIHplcm8iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbaV0uYmFsYW5jZSA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxGdW5kc1dpdGhkcmF3biArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtc2cuc2VuZGVyLmNhbGwuZ2FzKHdpdGhkcmF3R2FzKS52YWx1ZShhbW91bnQpKCkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnRJKCJvazogcmV3YXJkcyBwYWlkIiwgYW1vdW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBzdWljaWRlDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gaGFyaUthcmkoKSB7DQogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBub3Qgb3duZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzU3RhdGUgPT0gU2V0dGluZ1N0YXRlVmFsdWUubG9ja2VkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbG9ja2VkIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHN1aWNpZGUob3duZXIpOw0KICAgICAgICB9DQoNCn0='