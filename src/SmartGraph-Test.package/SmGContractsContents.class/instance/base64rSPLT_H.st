base 64 content
base64rSPLT_H
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC42Ow0KDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gIFIgU3BsaXQgQ29udHJhY3QNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpjb250cmFjdCBSU1BMVF9IIHsNCiAgICAgICAgZXZlbnQgU3RhdEV2ZW50KHN0cmluZyBtc2cpOw0KICAgICAgICBldmVudCBTdGF0RXZlbnRJKHN0cmluZyBtc2csIHVpbnQgdmFsKTsNCg0KICAgICAgICBlbnVtIFNldHRpbmdTdGF0ZVZhbHVlICB7ZGVidWcsIGxvY2tlZH0NCg0KICAgICAgICBzdHJ1Y3QgcGFydG5lckFjY291bnQgew0KICAgICAgICAgICAgICAgIHVpbnQgY3JlZGl0ZWQ7ICAvLyB0b3RhbCBmdW5kcyBjcmVkaXRlZCB0byB0aGlzIGFjY291bnQNCiAgICAgICAgICAgICAgICB1aW50IGJhbGFuY2U7ICAgLy8gY3VycmVudCBiYWxhbmNlID0gY3JlZGl0ZWQgLSBhbW91bnQgd2l0aGRyYXduDQogICAgICAgICAgICAgICAgdWludCBwY3R4MTA7ICAgICAvLyBwZXJjZW50IGFsbG9jYXRpb24gdGltZXMgdGVuDQogICAgICAgICAgICAgICAgYWRkcmVzcyBhZGRyOyAgIC8vIHBheW91dCBhZGRyIG9mIHRoaXMgYWNjdA0KICAgICAgICAgICAgICAgIGJvb2wgZXZlblN0YXJ0OyAvLyBldmVuIHNwbGl0IHVwIHRvIGV2ZW5EaXN0VGhyZXNoDQogICAgICAgIH0NCg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vICBkYXRhIHN0b3JhZ2UNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXBsb3llciBleGVjdXRvcg0KICAgICAgICBtYXBwaW5nICh1aW50ID0+IHBhcnRuZXJBY2NvdW50KSBwYXJ0bmVyQWNjb3VudHM7ICAgIC8vIGFjY291bnRzIGJ5IGluZGV4DQogICAgICAgIHVpbnQgcHVibGljIG51bUFjY291bnRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaG93IG1hbnkgYWNjb3VudHMgZXhpc3QNCiAgICAgICAgdWludCBwdWJsaWMgaG9sZG92ZXJCYWxhbmNlOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbW91bnQgeWV0IHRvIGJlIGRpc3RyaWJ1dGVkDQogICAgICAgIHVpbnQgcHVibGljIHRvdGFsRnVuZHNSZWNlaXZlZDsgICAgICAgICAgICAgICAgICAgICAgLy8gYW1vdW50IHJlY2VpdmVkIHNpbmNlIGJlZ2luIG9mIHRpbWUNCiAgICAgICAgdWludCBwdWJsaWMgdG90YWxGdW5kc0Rpc3RyaWJ1dGVkOyAgICAgICAgICAgICAgICAgICAvLyBhbW91bnQgZGlzdHJpYnV0ZWQgc2luY2UgYmVnaW4gb2YgdGltZQ0KICAgICAgICB1aW50IHB1YmxpYyB0b3RhbEZ1bmRzV2l0aGRyYXduOyAgICAgICAgICAgICAgICAgICAgIC8vIGFtb3VudCB3aXRoZHJhd24gc2luY2UgYmVnaW4gb2YgdGltZQ0KICAgICAgICB1aW50IHB1YmxpYyBldmVuRGlzdFRocmVzaDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc3RyaWJ1dGUgZXZlbmx5IHVudGlsIHRoaXMgYW1vdW50ICh0b3RhbCkNCiAgICAgICAgdWludCBwdWJsaWMgd2l0aGRyYXdHYXMgPSAzNTAwMDsgICAgICAgICAgICAgICAgICAgICAvLyBnYXMgZm9yIHdpdGhkcmF3YWxzDQogICAgICAgIHVpbnQgY29uc3RhbnQgVEVOSFVORFdFSSA9IDEwMDA7ICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCBndC4gMTAwMCB3ZWkgdG8gZG8gcGF5b3V0DQogICAgICAgIHVpbnQgY29uc3RhbnQgTUFYX0FDQ09VTlRTID0gNTsgICAgICAgICAgICAgICAgICAgICAgLy8gbWF4IGFjY291bnRzIHRoaXMgY29udHJhY3QgY2FuIGhhbmRsZQ0KICAgICAgICBTZXR0aW5nU3RhdGVWYWx1ZSBwdWJsaWMgc2V0dGluZ3NTdGF0ZSA9IFNldHRpbmdTdGF0ZVZhbHVlLmRlYnVnOyANCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIGNvbnRyYWN0IGNvbnN0cnVjdG9yDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGZ1bmN0aW9uIFJTUExUX0goKSB7DQogICAgICAgICAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBsb2NrDQogICAgICAgIC8vIGxvY2sgdGhlIGNvbnRyYWN0LiBhZnRlciBjYWxsaW5nIHRoaXMgeW91IHdpbGwgbm90IGJlIGFibGUgdG8gbW9kaWZ5IGFjY291bnRzOg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBsb2NrKCkgew0KICAgICAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbm90IG93bmVyIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IGxvY2tlZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzZXR0aW5nc1N0YXRlID0gU2V0dGluZ1N0YXRlVmFsdWUubG9ja2VkOw0KICAgICAgICAgICAgICAgIFN0YXRFdmVudCgib2s6IGNvbnRyYWN0IGxvY2tlZCIpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyByZXNldA0KICAgICAgICAvLyByZXNldCBhbGwgYWNjb3VudHMNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gcmVzZXQoKSB7DQogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBub3Qgb3duZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzU3RhdGUgPT0gU2V0dGluZ1N0YXRlVmFsdWUubG9ja2VkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbG9ja2VkIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG51bUFjY291bnRzID0gMDsNCiAgICAgICAgICAgICAgICBob2xkb3ZlckJhbGFuY2UgPSAwOw0KICAgICAgICAgICAgICAgIHRvdGFsRnVuZHNSZWNlaXZlZCA9IDA7DQogICAgICAgICAgICAgICAgdG90YWxGdW5kc0Rpc3RyaWJ1dGVkID0gMDsNCiAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzV2l0aGRyYXduID0gMDsNCiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIm9rOiBhbGwgYWNjdHMgcmVzZXQiKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gc2V0IGV2ZW4gZGlzdHJpYnV0aW9uIHRocmVzaG9sZA0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBzZXRFdmVuRGlzdFRocmVzaCh1aW50MjU2IF90aHJlc2gpIHsNCiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IG5vdCBvd25lciIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBsb2NrZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZXZlbkRpc3RUaHJlc2ggPSAoX3RocmVzaCAvIFRFTkhVTkRXRUkpICogVEVOSFVORFdFSTsNCiAgICAgICAgICAgICAgICBTdGF0RXZlbnRJKCJvazogdGhyZXNob2xkIHNldCIsIGV2ZW5EaXN0VGhyZXNoKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gc2V0IGV2ZW4gZGlzdHJpYnV0aW9uIHRocmVzaG9sZA0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBzZXRXaXRkcmF3R2FzKHVpbnQyNTYgX3dpdGhkcmF3R2FzKSB7DQogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBub3Qgb3duZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgd2l0aGRyYXdHYXMgPSBfd2l0aGRyYXdHYXM7DQogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgib2s6IHdpdGhkcmF3IGdhcyBzZXQiLCB3aXRoZHJhd0dhcyk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBhZGQgYSBuZXcgYWNjb3VudA0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gYWRkQWNjb3VudChhZGRyZXNzIF9hZGRyLCB1aW50MjU2IF9wY3R4MTAsIGJvb2wgX2V2ZW5TdGFydCkgew0KICAgICAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbm90IG93bmVyIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IGxvY2tlZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobnVtQWNjb3VudHMgPj0gTUFYX0FDQ09VTlRTKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbWF4IGFjY291bnRzIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tudW1BY2NvdW50c10uYWRkciA9IF9hZGRyOw0KICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tudW1BY2NvdW50c10ucGN0eDEwID0gX3BjdHgxMDsNCiAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbbnVtQWNjb3VudHNdLmV2ZW5TdGFydCA9IF9ldmVuU3RhcnQ7DQogICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW251bUFjY291bnRzXS5jcmVkaXRlZCA9IDA7DQogICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW251bUFjY291bnRzXS5iYWxhbmNlID0gMDsNCiAgICAgICAgICAgICAgICArK251bUFjY291bnRzOw0KICAgICAgICAgICAgICAgIFN0YXRFdmVudCgib2s6IGFjY3QgYWRkZWQiKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBnZXQgYWNjdCBpbmZvDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gZ2V0QWNjb3VudEluZm8oYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgcmV0dXJucyh1aW50IF9pZHgsIHVpbnQgX3BjdHgxMCwgYm9vbCBfZXZlblN0YXJ0LCB1aW50IF9jcmVkaXRlZCwgdWludCBfYmFsYW5jZSkgew0KICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBwYXJ0bmVyQWNjb3VudHNbaV0uYWRkcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRyID09IF9hZGRyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZHggPSBpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGN0eDEwID0gcGFydG5lckFjY291bnRzW2ldLnBjdHgxMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2V2ZW5TdGFydCA9IHBhcnRuZXJBY2NvdW50c1tpXS5ldmVuU3RhcnQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jcmVkaXRlZCA9IHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2JhbGFuY2UgPSBwYXJ0bmVyQWNjb3VudHNbaV0uYmFsYW5jZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJvazogZm91bmQgYWNjdCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBhY2N0IG5vdCBmb3VuZCIpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIGdldCB0b3RhbCBwZXJjZW50YWdlcyB4MTANCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBnZXRUb3RhbFBjdHgxMCgpIGNvbnN0YW50IHJldHVybnModWludCBfdG90YWxQY3R4MTApIHsNCiAgICAgICAgICAgICAgICBfdG90YWxQY3R4MTAgPSAwOw0KICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBfdG90YWxQY3R4MTAgKz0gcGFydG5lckFjY291bnRzW2ldLnBjdHgxMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgib2s6IHRvdGFsIHBjdHgxMCIsIF90b3RhbFBjdHgxMCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gZ2V0IG5vLiBhY2N0cyB0aGF0IGFyZSBzZXQgZm9yIGV2ZW4gc3BsaXQNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBnZXROdW1FdmVuU3BsaXRzKCkgY29uc3RhbnQgcmV0dXJucyh1aW50IF9udW1FdmVuU3BsaXRzKSB7DQogICAgICAgICAgICAgICAgX251bUV2ZW5TcGxpdHMgPSAwOw0KICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydG5lckFjY291bnRzW2ldLmV2ZW5TdGFydCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK19udW1FdmVuU3BsaXRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBTdGF0RXZlbnRJKCJvazogZXZlbiBzcGxpdHMiLCBfbnVtRXZlblNwbGl0cyk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gZGVmYXVsdCBwYXlhYmxlIGZ1bmN0aW9uLg0KICAgICAgICAvLyBjYWxsIHVzIHdpdGggcGxlbnR5IG9mIGdhcywgb3IgY2F0YXN0cm9waGUgd2lsbCBlbnN1ZQ0KICAgICAgICAvLyBub3RlOiB5b3UgY2FuIGNhbGwgdGhpcyBmY24gd2l0aCBhbW91bnQgb2YgemVybyB0byBmb3JjZSBkaXN0cmlidXRpb24NCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzUmVjZWl2ZWQgKz0gbXNnLnZhbHVlOw0KICAgICAgICAgICAgICAgIGhvbGRvdmVyQmFsYW5jZSArPSBtc2cudmFsdWU7DQogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgib2s6IGluY29taW5nIiwgbXNnLnZhbHVlKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBkaXN0cmlidXRlIGZ1bmRzIHRvIGFsbCBwYXJ0bmVycw0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGUoKSB7DQogICAgICAgICAgICAgICAgLy9vbmx5IHBheW91dCBpZiB3ZSBoYXZlIG1vcmUgdGhhbiAxMDAwIHdlaQ0KICAgICAgICAgICAgICAgIGlmIChob2xkb3ZlckJhbGFuY2UgPCBURU5IVU5EV0VJKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vZmlyc3QgcGF5IGFjY291bnRzIHRoYXQgYXJlIG5vdCBjb25zdHJhaW5lZCBieSBldmVuIGRpc3RyaWJ1dGlvbg0KICAgICAgICAgICAgICAgIC8vZWFjaCBhY2NvdW50IGdldHMgdGhlaXIgcHJlc2NyaWJlZCBwZXJjZW50YWdlIG9mIHRoaXMgaG9sZG92ZXIuDQogICAgICAgICAgICAgICAgdWludCBpOw0KICAgICAgICAgICAgICAgIHVpbnQgcGN0eDEwOw0KICAgICAgICAgICAgICAgIHVpbnQgYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgdWludCBtYXhBY2N0RGlzdDsNCiAgICAgICAgICAgICAgICB1aW50IG51bUV2ZW5TcGxpdHMgPSAwOw0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1BY2NvdW50czsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRuZXJBY2NvdW50c1tpXS5ldmVuU3RhcnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKytudW1FdmVuU3BsaXRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGN0eDEwID0gcGFydG5lckFjY291bnRzW2ldLnBjdHgxMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdERpc3QgPSBob2xkb3ZlckJhbGFuY2UgKiBwY3R4MTAgLyBURU5IVU5EV0VJOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3dlIGFsc28gZG91YmxlIGNoZWNrIHRvIGVuc3VyZSB0aGF0IHRoZSBhbW91bnQgYXdhcmRlZCBjYW5ub3QgZXhjZWVkIHRoZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvdGFsIGFtb3VudCBkdWUgdG8gdGhpcyBhY2N0LiBub3RlOiB0aGlzIGNoZWNrIGlzIG5lY2Vzc2FyeSwgY3V6IGhlcmUgd2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9taWdodCBub3QgZGlzdHJpYnV0ZSB0aGUgZnVsbCBob2xkb3ZlciBhbW91bnQgZHVyaW5nIGVhY2ggcGFzcy4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4QWNjdERpc3QgPSB0b3RhbEZ1bmRzUmVjZWl2ZWQgKiBwY3R4MTAgLyBURU5IVU5EV0VJOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkID49IG1heEFjY3REaXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdERpc3QgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCArIGFjY3REaXN0ID4gbWF4QWNjdERpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N0RGlzdCA9IG1heEFjY3REaXN0IC0gcGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW2ldLmJhbGFuY2UgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsRnVuZHNEaXN0cmlidXRlZCArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZG92ZXJCYWxhbmNlIC09IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvL25vdyBwYXkgYWNjb3VudHMgdGhhdCBhcmUgY29uc3RyYWluZWQgYnkgZXZlbiBkaXN0cmlidXRpb24uIHdlIHNwbGl0IHdoYXRldmVyIGlzDQogICAgICAgICAgICAgICAgLy9sZWZ0IG9mIHRoZSBob2xkb3ZlciBldmVubHkuDQogICAgICAgICAgICAgICAgdWludCBkaXN0QW1vdW50ID0gaG9sZG92ZXJCYWxhbmNlOw0KICAgICAgICAgICAgICAgIGlmICh0b3RhbEZ1bmRzRGlzdHJpYnV0ZWQgPCBldmVuRGlzdFRocmVzaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0bmVyQWNjb3VudHNbaV0uZXZlblN0YXJ0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdERpc3QgPSBkaXN0QW1vdW50IC8gbnVtRXZlblNwbGl0czsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3dlIGFsc28gZG91YmxlIGNoZWNrIHRvIGVuc3VyZSB0aGF0IHRoZSBhbW91bnQgYXdhcmRlZCBjYW5ub3QgZXhjZWVkIHRoZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG90YWwgYW1vdW50IGR1ZSB0byB0aGlzIGFjY3QuIG5vdGU6IHRoaXMgY2hlY2sgaXMgbmVjZXNzYXJ5LCBjdXogaGVyZSB3ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbWlnaHQgbm90IGRpc3RyaWJ1dGUgdGhlIGZ1bGwgaG9sZG92ZXIgYW1vdW50IGR1cmluZyBlYWNoIHBhc3MuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBmdW5kTGltaXQgPSB0b3RhbEZ1bmRzUmVjZWl2ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmRMaW1pdCA+IGV2ZW5EaXN0VGhyZXNoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuZExpbWl0ID0gZXZlbkRpc3RUaHJlc2g7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4QWNjdERpc3QgPSBmdW5kTGltaXQgLyBudW1FdmVuU3BsaXRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQgPj0gbWF4QWNjdERpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3REaXN0ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCArIGFjY3REaXN0ID4gbWF4QWNjdERpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3REaXN0ID0gbWF4QWNjdERpc3QgLSBwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbaV0uYmFsYW5jZSArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzRGlzdHJpYnV0ZWQgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZG92ZXJCYWxhbmNlIC09IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vbm93LCBpZiB0aGVyZSBhcmUgYW55IGZ1bmRzIGxlZnQgdGhlbiBpdCBtZWFucyB0aGF0IHdlIGhhdmUgZWl0aGVyIGV4Y2VlZGVkIHRoZSBldmVuIGRpc3RyaWJ1dGlvbiB0aHJlc2hvbGQsDQogICAgICAgICAgICAgICAgLy9vciB0aGVyZSBpcyBhIHJlbWFpbmRlciBpbiB0aGUgZXZlbiBzcGxpdC4gaW4gdGhhdCBjYXNlIGRpc3RyaWJ1dGUgYWxsIHRoZSByZW1tYWluZyBmdW5kcyB0byBwYXJ0bmVycyB3aG8gaGF2ZQ0KICAgICAgICAgICAgICAgIC8vbm90IHlldCBleGNlZWRlZCB0aGVpciBhbGxvdG1lbnQsIGFjY29yZGluZyB0byB0aGVpciAiZWZmZWN0aXZlIiBwZXJjZW50YWdlcy4gbm90ZSB0aGF0IHRoaXMgbXVzdCBiZSBkb25lIGhlcmUsDQogICAgICAgICAgICAgICAgLy9ldmVuIGlmIHdlIGhhdmVuJ3QgcGFzc2VkIHRoZSBldmVuIGRpc3RyaWJ1dGlvbiB0aHJlc2hvbGQsIHRvIGVuc3VyZSB0aGF0IHdlIGRvbid0IGdldCBzdHVjayB3aXRoIGEgcmVtYWluZGVyDQogICAgICAgICAgICAgICAgLy9hbW91bnQgdGhhdCBjYW5ub3QgYmUgZGlzdHJpYnV0ZWQuDQogICAgICAgICAgICAgICAgZGlzdEFtb3VudCA9IGhvbGRvdmVyQmFsYW5jZTsNCiAgICAgICAgICAgICAgICBpZiAoZGlzdEFtb3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgdG90YWxEaXN0UGN0eDEwID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1BY2NvdW50czsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY3R4MTAgPSBwYXJ0bmVyQWNjb3VudHNbaV0ucGN0eDEwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBY2N0RGlzdCA9IHRvdGFsRnVuZHNSZWNlaXZlZCAqIHBjdHgxMCAvIFRFTkhVTkRXRUk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQgPCBtYXhBY2N0RGlzdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsRGlzdFBjdHgxMCArPSBwY3R4MTA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1BY2NvdW50czsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY3R4MTAgPSBwYXJ0bmVyQWNjb3VudHNbaV0ucGN0eDEwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N0RGlzdCA9IGRpc3RBbW91bnQgKiBwY3R4MTAgLyB0b3RhbERpc3RQY3R4MTA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vd2UgYWxzbyBkb3VibGUgY2hlY2sgdG8gZW5zdXJlIHRoYXQgdGhlIGFtb3VudCBhd2FyZGVkIGNhbm5vdCBleGNlZWQgdGhlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG90YWwgYW1vdW50IGR1ZSB0byB0aGlzIGFjY3QuIG5vdGU6IHRoaXMgY2hlY2sgaXMgbmVjZXNzYXJ5LCBjdXogaGVyZSB3ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL21pZ2h0IG5vdCBkaXN0cmlidXRlIHRoZSBmdWxsIGhvbGRvdmVyIGFtb3VudCBkdXJpbmcgZWFjaCBwYXNzLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBY2N0RGlzdCA9IHRvdGFsRnVuZHNSZWNlaXZlZCAqIHBjdHgxMCAvIFRFTkhVTkRXRUk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQgPj0gbWF4QWNjdERpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N0RGlzdCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkICsgYWNjdERpc3QgPiBtYXhBY2N0RGlzdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3REaXN0ID0gbWF4QWNjdERpc3QgLSBwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkICs9IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbaV0uYmFsYW5jZSArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxGdW5kc0Rpc3RyaWJ1dGVkICs9IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xkb3ZlckJhbGFuY2UgLT0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFN0YXRFdmVudCgib2s6IGRpc3RyaWJ1dGVkIGZ1bmRzIik7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gd2l0aGRyYXcgYWNjb3VudCBiYWxhbmNlDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gd2l0aGRyYXcoKSB7DQogICAgICAgICAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbnVtQWNjb3VudHM7IGkrKyApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgYWRkciA9IHBhcnRuZXJBY2NvdW50c1tpXS5hZGRyOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHIgPT0gbXNnLnNlbmRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IGFtb3VudCA9IHBhcnRuZXJBY2NvdW50c1tpXS5iYWxhbmNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW1vdW50ID09IDApIHsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IGJhbGFuY2UgaXMgemVybyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tpXS5iYWxhbmNlID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzV2l0aGRyYXduICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1zZy5zZW5kZXIuY2FsbC5nYXMod2l0aGRyYXdHYXMpLnZhbHVlKGFtb3VudCkoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudEkoIm9rOiByZXdhcmRzIHBhaWQiLCBhbW91bnQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIHN1aWNpZGUNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBoYXJpS2FyaSgpIHsNCiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IG5vdCBvd25lciIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBsb2NrZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3VpY2lkZShvd25lcik7DQogICAgICAgIH0NCg0KfQ=='