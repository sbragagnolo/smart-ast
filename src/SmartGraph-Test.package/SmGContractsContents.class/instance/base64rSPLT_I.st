base 64 content
base64rSPLT_I
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC42Ow0KDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gIFIgU3BsaXQgQ29udHJhY3QNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpjb250cmFjdCBSU1BMVF9JIHsNCiAgICAgICAgZXZlbnQgU3RhdEV2ZW50KHN0cmluZyBtc2cpOw0KICAgICAgICBldmVudCBTdGF0RXZlbnRJKHN0cmluZyBtc2csIHVpbnQgdmFsKTsNCg0KICAgICAgICBlbnVtIFNldHRpbmdTdGF0ZVZhbHVlICB7ZGVidWcsIGxvY2tlZH0NCg0KICAgICAgICBzdHJ1Y3QgcGFydG5lckFjY291bnQgew0KICAgICAgICAgICAgICAgIHVpbnQgY3JlZGl0ZWQ7ICAvLyB0b3RhbCBmdW5kcyBjcmVkaXRlZCB0byB0aGlzIGFjY291bnQNCiAgICAgICAgICAgICAgICB1aW50IGJhbGFuY2U7ICAgLy8gY3VycmVudCBiYWxhbmNlID0gY3JlZGl0ZWQgLSBhbW91bnQgd2l0aGRyYXduDQogICAgICAgICAgICAgICAgdWludCBwY3R4MTA7ICAgICAvLyBwZXJjZW50IGFsbG9jYXRpb24gdGltZXMgdGVuDQogICAgICAgICAgICAgICAgYWRkcmVzcyBhZGRyOyAgIC8vIHBheW91dCBhZGRyIG9mIHRoaXMgYWNjdA0KICAgICAgICAgICAgICAgIGJvb2wgZXZlblN0YXJ0OyAvLyBldmVuIHNwbGl0IHVwIHRvIGV2ZW5EaXN0VGhyZXNoDQogICAgICAgIH0NCg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vICBkYXRhIHN0b3JhZ2UNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXBsb3llciBleGVjdXRvcg0KICAgICAgICBtYXBwaW5nICh1aW50ID0+IHBhcnRuZXJBY2NvdW50KSBwYXJ0bmVyQWNjb3VudHM7ICAgIC8vIGFjY291bnRzIGJ5IGluZGV4DQogICAgICAgIHVpbnQgcHVibGljIG51bUFjY291bnRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaG93IG1hbnkgYWNjb3VudHMgZXhpc3QNCiAgICAgICAgdWludCBwdWJsaWMgaG9sZG92ZXJCYWxhbmNlOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbW91bnQgeWV0IHRvIGJlIGRpc3RyaWJ1dGVkDQogICAgICAgIHVpbnQgcHVibGljIHRvdGFsRnVuZHNSZWNlaXZlZDsgICAgICAgICAgICAgICAgICAgICAgLy8gYW1vdW50IHJlY2VpdmVkIHNpbmNlIGJlZ2luIG9mIHRpbWUNCiAgICAgICAgdWludCBwdWJsaWMgdG90YWxGdW5kc0Rpc3RyaWJ1dGVkOyAgICAgICAgICAgICAgICAgICAvLyBhbW91bnQgZGlzdHJpYnV0ZWQgc2luY2UgYmVnaW4gb2YgdGltZQ0KICAgICAgICB1aW50IHB1YmxpYyB0b3RhbEZ1bmRzV2l0aGRyYXduOyAgICAgICAgICAgICAgICAgICAgIC8vIGFtb3VudCB3aXRoZHJhd24gc2luY2UgYmVnaW4gb2YgdGltZQ0KICAgICAgICB1aW50IHB1YmxpYyBldmVuRGlzdFRocmVzaDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc3RyaWJ1dGUgZXZlbmx5IHVudGlsIHRoaXMgYW1vdW50ICh0b3RhbCkNCiAgICAgICAgdWludCBwdWJsaWMgd2l0aGRyYXdHYXMgPSAzNTAwMDsgICAgICAgICAgICAgICAgICAgICAvLyBnYXMgZm9yIHdpdGhkcmF3YWxzDQogICAgICAgIHVpbnQgY29uc3RhbnQgVEVOSFVORFdFSSA9IDEwMDA7ICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCBndC4gMTAwMCB3ZWkgdG8gZG8gcGF5b3V0DQogICAgICAgIHVpbnQgY29uc3RhbnQgTUFYX0FDQ09VTlRTID0gNTsgICAgICAgICAgICAgICAgICAgICAgLy8gbWF4IGFjY291bnRzIHRoaXMgY29udHJhY3QgY2FuIGhhbmRsZQ0KICAgICAgICBTZXR0aW5nU3RhdGVWYWx1ZSBwdWJsaWMgc2V0dGluZ3NTdGF0ZSA9IFNldHRpbmdTdGF0ZVZhbHVlLmRlYnVnOyANCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIGNvbnRyYWN0IGNvbnN0cnVjdG9yDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGZ1bmN0aW9uIFJTUExUX0koKSB7DQogICAgICAgICAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBsb2NrDQogICAgICAgIC8vIGxvY2sgdGhlIGNvbnRyYWN0LiBhZnRlciBjYWxsaW5nIHRoaXMgeW91IHdpbGwgbm90IGJlIGFibGUgdG8gbW9kaWZ5IGFjY291bnRzLg0KICAgICAgICAvLyBtYWtlIHN1cmUgZXZlcnlodGluZyBpcyByaWdodCENCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gbG9jaygpIHsNCiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IG5vdCBvd25lciIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBsb2NrZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc2V0dGluZ3NTdGF0ZSA9IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZDsNCiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIm9rOiBjb250cmFjdCBsb2NrZWQiKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gcmVzZXQNCiAgICAgICAgLy8gcmVzZXQgYWxsIGFjY291bnRzDQogICAgICAgIC8vIGluIGNhc2Ugd2UgaGF2ZSBhbnkgZnVuZHMgdGhhdCBoYXZlIG5vdCBiZWVuIHdpdGhkcmF3biwgdGhleSBiZWNvbWUNCiAgICAgICAgLy8gbmV3bHkgcmVjZWl2ZWQgYW5kIHVuZGlzdHJpYnV0ZWQuDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGZ1bmN0aW9uIHJlc2V0KCkgew0KICAgICAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbm90IG93bmVyIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IGxvY2tlZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1BY2NvdW50czsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaG9sZG92ZXJCYWxhbmNlICs9IHBhcnRuZXJBY2NvdW50c1tpXS5iYWxhbmNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzUmVjZWl2ZWQgPSBob2xkb3ZlckJhbGFuY2U7DQogICAgICAgICAgICAgICAgdG90YWxGdW5kc0Rpc3RyaWJ1dGVkID0gMDsNCiAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzV2l0aGRyYXduID0gMDsNCiAgICAgICAgICAgICAgICBudW1BY2NvdW50cyA9IDA7DQogICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJvazogYWxsIGFjY3RzIHJlc2V0Iik7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIHNldCBldmVuIGRpc3RyaWJ1dGlvbiB0aHJlc2hvbGQNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gc2V0RXZlbkRpc3RUaHJlc2godWludDI1NiBfdGhyZXNoKSB7DQogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBub3Qgb3duZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzU3RhdGUgPT0gU2V0dGluZ1N0YXRlVmFsdWUubG9ja2VkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbG9ja2VkIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGV2ZW5EaXN0VGhyZXNoID0gKF90aHJlc2ggLyBURU5IVU5EV0VJKSAqIFRFTkhVTkRXRUk7DQogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgib2s6IHRocmVzaG9sZCBzZXQiLCBldmVuRGlzdFRocmVzaCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIHNldCBldmVuIGRpc3RyaWJ1dGlvbiB0aHJlc2hvbGQNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gc2V0V2l0ZHJhd0dhcyh1aW50MjU2IF93aXRoZHJhd0dhcykgew0KICAgICAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogbm90IG93bmVyIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHdpdGhkcmF3R2FzID0gX3dpdGhkcmF3R2FzOw0KICAgICAgICAgICAgICAgIFN0YXRFdmVudEkoIm9rOiB3aXRoZHJhdyBnYXMgc2V0Iiwgd2l0aGRyYXdHYXMpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gYWRkIGEgbmV3IGFjY291bnQNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGZ1bmN0aW9uIGFkZEFjY291bnQoYWRkcmVzcyBfYWRkciwgdWludDI1NiBfcGN0eDEwLCBib29sIF9ldmVuU3RhcnQpIHsNCiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IG5vdCBvd25lciIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBsb2NrZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKG51bUFjY291bnRzID49IE1BWF9BQ0NPVU5UUykgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IG1heCBhY2NvdW50cyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbbnVtQWNjb3VudHNdLmFkZHIgPSBfYWRkcjsNCiAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbbnVtQWNjb3VudHNdLnBjdHgxMCA9IF9wY3R4MTA7DQogICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW251bUFjY291bnRzXS5ldmVuU3RhcnQgPSBfZXZlblN0YXJ0Ow0KICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tudW1BY2NvdW50c10uY3JlZGl0ZWQgPSAwOw0KICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tudW1BY2NvdW50c10uYmFsYW5jZSA9IDA7DQogICAgICAgICAgICAgICAgKytudW1BY2NvdW50czsNCiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIm9rOiBhY2N0IGFkZGVkIik7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gZ2V0IGFjY3QgaW5mbw0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IHJldHVybnModWludCBfaWR4LCB1aW50IF9wY3R4MTAsIGJvb2wgX2V2ZW5TdGFydCwgdWludCBfY3JlZGl0ZWQsIHVpbnQgX2JhbGFuY2UpIHsNCiAgICAgICAgICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1BY2NvdW50czsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBhZGRyID0gcGFydG5lckFjY291bnRzW2ldLmFkZHI7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkciA9PSBfYWRkcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWR4ID0gaTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BjdHgxMCA9IHBhcnRuZXJBY2NvdW50c1tpXS5wY3R4MTA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ldmVuU3RhcnQgPSBwYXJ0bmVyQWNjb3VudHNbaV0uZXZlblN0YXJ0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY3JlZGl0ZWQgPSBwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iYWxhbmNlID0gcGFydG5lckFjY291bnRzW2ldLmJhbGFuY2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgib2s6IGZvdW5kIGFjY3QiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImVycjogYWNjdCBub3QgZm91bmQiKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBnZXQgdG90YWwgcGVyY2VudGFnZXMgeDEwDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gZ2V0VG90YWxQY3R4MTAoKSBjb25zdGFudCByZXR1cm5zKHVpbnQgX3RvdGFsUGN0eDEwKSB7DQogICAgICAgICAgICAgICAgX3RvdGFsUGN0eDEwID0gMDsNCiAgICAgICAgICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1BY2NvdW50czsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgX3RvdGFsUGN0eDEwICs9IHBhcnRuZXJBY2NvdW50c1tpXS5wY3R4MTA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFN0YXRFdmVudEkoIm9rOiB0b3RhbCBwY3R4MTAiLCBfdG90YWxQY3R4MTApOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIGdldCBuby4gYWNjdHMgdGhhdCBhcmUgc2V0IGZvciBldmVuIHNwbGl0DQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gZ2V0TnVtRXZlblNwbGl0cygpIGNvbnN0YW50IHJldHVybnModWludCBfbnVtRXZlblNwbGl0cykgew0KICAgICAgICAgICAgICAgIF9udW1FdmVuU3BsaXRzID0gMDsNCiAgICAgICAgICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1BY2NvdW50czsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRuZXJBY2NvdW50c1tpXS5ldmVuU3RhcnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKytfbnVtRXZlblNwbGl0czsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgib2s6IGV2ZW4gc3BsaXRzIiwgX251bUV2ZW5TcGxpdHMpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIGRlZmF1bHQgcGF5YWJsZSBmdW5jdGlvbi4NCiAgICAgICAgLy8gY2FsbCB1cyB3aXRoIHBsZW50eSBvZiBnYXMsIG9yIGNhdGFzdHJvcGhlIHdpbGwgZW5zdWUNCiAgICAgICAgLy8gbm90ZTogeW91IGNhbiBjYWxsIHRoaXMgZmNuIHdpdGggYW1vdW50IG9mIHplcm8gdG8gZm9yY2UgZGlzdHJpYnV0aW9uDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7DQogICAgICAgICAgICAgICAgdG90YWxGdW5kc1JlY2VpdmVkICs9IG1zZy52YWx1ZTsNCiAgICAgICAgICAgICAgICBob2xkb3ZlckJhbGFuY2UgKz0gbXNnLnZhbHVlOw0KICAgICAgICAgICAgICAgIFN0YXRFdmVudEkoIm9rOiBpbmNvbWluZyIsIG1zZy52YWx1ZSk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgLy8gZGlzdHJpYnV0ZSBmdW5kcyB0byBhbGwgcGFydG5lcnMNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBkaXN0cmlidXRlKCkgew0KICAgICAgICAgICAgICAgIC8vb25seSBwYXlvdXQgaWYgd2UgaGF2ZSBtb3JlIHRoYW4gMTAwMCB3ZWkNCiAgICAgICAgICAgICAgICBpZiAoaG9sZG92ZXJCYWxhbmNlIDwgVEVOSFVORFdFSSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvL2ZpcnN0IHBheSBhY2NvdW50cyB0aGF0IGFyZSBub3QgY29uc3RyYWluZWQgYnkgZXZlbiBkaXN0cmlidXRpb24NCiAgICAgICAgICAgICAgICAvL2VhY2ggYWNjb3VudCBnZXRzIHRoZWlyIHByZXNjcmliZWQgcGVyY2VudGFnZSBvZiB0aGlzIGhvbGRvdmVyLg0KICAgICAgICAgICAgICAgIHVpbnQgaTsNCiAgICAgICAgICAgICAgICB1aW50IHBjdHgxMDsNCiAgICAgICAgICAgICAgICB1aW50IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgIHVpbnQgbWF4QWNjdERpc3Q7DQogICAgICAgICAgICAgICAgdWludCBudW1FdmVuU3BsaXRzID0gMDsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtQWNjb3VudHM7IGkrKyApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0bmVyQWNjb3VudHNbaV0uZXZlblN0YXJ0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsrbnVtRXZlblNwbGl0czsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjdHgxMCA9IHBhcnRuZXJBY2NvdW50c1tpXS5wY3R4MTA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3REaXN0ID0gaG9sZG92ZXJCYWxhbmNlICogcGN0eDEwIC8gVEVOSFVORFdFSTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy93ZSBhbHNvIGRvdWJsZSBjaGVjayB0byBlbnN1cmUgdGhhdCB0aGUgYW1vdW50IGF3YXJkZWQgY2Fubm90IGV4Y2VlZCB0aGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90b3RhbCBhbW91bnQgZHVlIHRvIHRoaXMgYWNjdC4gbm90ZTogdGhpcyBjaGVjayBpcyBuZWNlc3NhcnksIGN1eiBoZXJlIHdlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbWlnaHQgbm90IGRpc3RyaWJ1dGUgdGhlIGZ1bGwgaG9sZG92ZXIgYW1vdW50IGR1cmluZyBlYWNoIHBhc3MuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEFjY3REaXN0ID0gdG90YWxGdW5kc1JlY2VpdmVkICogcGN0eDEwIC8gVEVOSFVORFdFSTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCA+PSBtYXhBY2N0RGlzdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3REaXN0ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQgKyBhY2N0RGlzdCA+IG1heEFjY3REaXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdERpc3QgPSBtYXhBY2N0RGlzdCAtIHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tpXS5iYWxhbmNlICs9IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzRGlzdHJpYnV0ZWQgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRvdmVyQmFsYW5jZSAtPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy9ub3cgcGF5IGFjY291bnRzIHRoYXQgYXJlIGNvbnN0cmFpbmVkIGJ5IGV2ZW4gZGlzdHJpYnV0aW9uLiB3ZSBzcGxpdCB3aGF0ZXZlciBpcw0KICAgICAgICAgICAgICAgIC8vbGVmdCBvZiB0aGUgaG9sZG92ZXIgZXZlbmx5Lg0KICAgICAgICAgICAgICAgIHVpbnQgZGlzdEFtb3VudCA9IGhvbGRvdmVyQmFsYW5jZTsNCiAgICAgICAgICAgICAgICBpZiAodG90YWxGdW5kc0Rpc3RyaWJ1dGVkIDwgZXZlbkRpc3RUaHJlc2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1BY2NvdW50czsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydG5lckFjY291bnRzW2ldLmV2ZW5TdGFydCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3REaXN0ID0gZGlzdEFtb3VudCAvIG51bUV2ZW5TcGxpdHM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy93ZSBhbHNvIGRvdWJsZSBjaGVjayB0byBlbnN1cmUgdGhhdCB0aGUgYW1vdW50IGF3YXJkZWQgY2Fubm90IGV4Y2VlZCB0aGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvdGFsIGFtb3VudCBkdWUgdG8gdGhpcyBhY2N0LiBub3RlOiB0aGlzIGNoZWNrIGlzIG5lY2Vzc2FyeSwgY3V6IGhlcmUgd2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL21pZ2h0IG5vdCBkaXN0cmlidXRlIHRoZSBmdWxsIGhvbGRvdmVyIGFtb3VudCBkdXJpbmcgZWFjaCBwYXNzLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgZnVuZExpbWl0ID0gdG90YWxGdW5kc1JlY2VpdmVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmdW5kTGltaXQgPiBldmVuRGlzdFRocmVzaCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmRMaW1pdCA9IGV2ZW5EaXN0VGhyZXNoOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEFjY3REaXN0ID0gZnVuZExpbWl0IC8gbnVtRXZlblNwbGl0czsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkID49IG1heEFjY3REaXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N0RGlzdCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQgKyBhY2N0RGlzdCA+IG1heEFjY3REaXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N0RGlzdCA9IG1heEFjY3REaXN0IC0gcGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0bmVyQWNjb3VudHNbaV0uY3JlZGl0ZWQgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW2ldLmJhbGFuY2UgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxGdW5kc0Rpc3RyaWJ1dGVkICs9IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRvdmVyQmFsYW5jZSAtPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvL25vdywgaWYgdGhlcmUgYXJlIGFueSBmdW5kcyBsZWZ0IHRoZW4gaXQgbWVhbnMgdGhhdCB3ZSBoYXZlIGVpdGhlciBleGNlZWRlZCB0aGUgZXZlbiBkaXN0cmlidXRpb24gdGhyZXNob2xkLA0KICAgICAgICAgICAgICAgIC8vb3IgdGhlcmUgaXMgYSByZW1haW5kZXIgaW4gdGhlIGV2ZW4gc3BsaXQuIGluIHRoYXQgY2FzZSBkaXN0cmlidXRlIGFsbCB0aGUgcmVtbWFpbmcgZnVuZHMgdG8gcGFydG5lcnMgd2hvIGhhdmUNCiAgICAgICAgICAgICAgICAvL25vdCB5ZXQgZXhjZWVkZWQgdGhlaXIgYWxsb3RtZW50LCBhY2NvcmRpbmcgdG8gdGhlaXIgImVmZmVjdGl2ZSIgcGVyY2VudGFnZXMuIG5vdGUgdGhhdCB0aGlzIG11c3QgYmUgZG9uZSBoZXJlLA0KICAgICAgICAgICAgICAgIC8vZXZlbiBpZiB3ZSBoYXZlbid0IHBhc3NlZCB0aGUgZXZlbiBkaXN0cmlidXRpb24gdGhyZXNob2xkLCB0byBlbnN1cmUgdGhhdCB3ZSBkb24ndCBnZXQgc3R1Y2sgd2l0aCBhIHJlbWFpbmRlcg0KICAgICAgICAgICAgICAgIC8vYW1vdW50IHRoYXQgY2Fubm90IGJlIGRpc3RyaWJ1dGVkLg0KICAgICAgICAgICAgICAgIGRpc3RBbW91bnQgPSBob2xkb3ZlckJhbGFuY2U7DQogICAgICAgICAgICAgICAgaWYgKGRpc3RBbW91bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB1aW50IHRvdGFsRGlzdFBjdHgxMCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtQWNjb3VudHM7IGkrKyApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGN0eDEwID0gcGFydG5lckFjY291bnRzW2ldLnBjdHgxMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4QWNjdERpc3QgPSB0b3RhbEZ1bmRzUmVjZWl2ZWQgKiBwY3R4MTAgLyBURU5IVU5EV0VJOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkIDwgbWF4QWNjdERpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbERpc3RQY3R4MTAgKz0gcGN0eDEwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtQWNjb3VudHM7IGkrKyApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGN0eDEwID0gcGFydG5lckFjY291bnRzW2ldLnBjdHgxMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdERpc3QgPSBkaXN0QW1vdW50ICogcGN0eDEwIC8gdG90YWxEaXN0UGN0eDEwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3dlIGFsc28gZG91YmxlIGNoZWNrIHRvIGVuc3VyZSB0aGF0IHRoZSBhbW91bnQgYXdhcmRlZCBjYW5ub3QgZXhjZWVkIHRoZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvdGFsIGFtb3VudCBkdWUgdG8gdGhpcyBhY2N0LiBub3RlOiB0aGlzIGNoZWNrIGlzIG5lY2Vzc2FyeSwgY3V6IGhlcmUgd2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9taWdodCBub3QgZGlzdHJpYnV0ZSB0aGUgZnVsbCBob2xkb3ZlciBhbW91bnQgZHVyaW5nIGVhY2ggcGFzcy4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4QWNjdERpc3QgPSB0b3RhbEZ1bmRzUmVjZWl2ZWQgKiBwY3R4MTAgLyBURU5IVU5EV0VJOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkID49IG1heEFjY3REaXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdERpc3QgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCArIGFjY3REaXN0ID4gbWF4QWNjdERpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N0RGlzdCA9IG1heEFjY3REaXN0IC0gcGFydG5lckFjY291bnRzW2ldLmNyZWRpdGVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tpXS5jcmVkaXRlZCArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydG5lckFjY291bnRzW2ldLmJhbGFuY2UgKz0gYWNjdERpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsRnVuZHNEaXN0cmlidXRlZCArPSBhY2N0RGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZG92ZXJCYWxhbmNlIC09IGFjY3REaXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIm9rOiBkaXN0cmlidXRlZCBmdW5kcyIpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIHdpdGhkcmF3IGFjY291bnQgYmFsYW5jZQ0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgew0KICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBwYXJ0bmVyQWNjb3VudHNbaV0uYWRkcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRyID09IG1zZy5zZW5kZXIgfHwgbXNnLnNlbmRlciA9PSBvd25lcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IGFtb3VudCA9IHBhcnRuZXJBY2NvdW50c1tpXS5iYWxhbmNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW1vdW50ID09IDApIHsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IGJhbGFuY2UgaXMgemVybyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRuZXJBY2NvdW50c1tpXS5iYWxhbmNlID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEZ1bmRzV2l0aGRyYXduICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFkZHIuY2FsbC5nYXMod2l0aGRyYXdHYXMpLnZhbHVlKGFtb3VudCkoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudEkoIm9rOiByZXdhcmRzIHBhaWQiLCBhbW91bnQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIHN1aWNpZGUNCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBmdW5jdGlvbiBoYXJpS2FyaSgpIHsNCiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJlcnI6IG5vdCBvd25lciIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiZXJyOiBsb2NrZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3VpY2lkZShvd25lcik7DQogICAgICAgIH0NCg0KfQ=='