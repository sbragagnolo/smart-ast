base 64 content
base64recoveryWithTenant
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC40Ow0KDQpjb250cmFjdCBEZXN0aW5hdGlvbiB7DQogICAgZnVuY3Rpb24gcmVjb3ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgcmV0dXJucyhib29sKTsNCn0NCg0KY29udHJhY3QgUmVjb3ZlcnlXaXRoVGVuYW50IHsNCiAgICBldmVudCBSZWNvdmVyeSh1aW50IGluZGV4ZWQgbm9uY2UsIGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8pOw0KICAgIGV2ZW50IFNldHVwKHVpbnQgaW5kZXhlZCBub25jZSwgYWRkcmVzcyBpbmRleGVkIHVzZXIpOw0KICAgIA0KICAgIC8vMTogdXNlciBub3QgZXhpc3RpbmcNCiAgICAvLzI6IGNvbmZsaWN0LCB1c2VyIGV4aXN0cyBhbHJlYWR5DQogICAgLy8zOiBzaWduYXR1cmUgbm90IGJ5IHRlbmFudA0KICAgIC8vNDogbm9uY2Uvc2lnbmF0dXJlIHVzZWQgYmVmb3JlDQogICAgLy81OiBjb250cmFjdCBjYWxsIGZhaWxlZA0KICAgIC8vNjogb3JhY2xlIGFjY2VzcyBkZW5pZWQNCiAgICAvLzg6IHJlcXVlc3RlZCB1c2VyIG5vdCBmb3VuZA0KICAgIGV2ZW50IEVycm9yKHVpbnQgaW5kZXhlZCBub25jZSwgdWludCBjb2RlKTsNCiAgICANCiAgICBzdHJ1Y3QgVXNlciB7DQogICAgICAgIGFkZHJlc3MgYWRkcjsNCiAgICB9DQogICAgDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSB1c2VySW5kZXg7DQogICAgVXNlcltdIHB1YmxpYyB1c2VyczsNCg0KICAgIGFkZHJlc3MgcHVibGljIG9yYWNsZTsNCiAgICBhZGRyZXNzIHB1YmxpYyB0ZW5hbnQ7DQogICAgbWFwcGluZyh1aW50ID0+IGJvb2wpIG5vbmNlVXNlZDsNCiAgICBhZGRyZXNzIHB1YmxpYyBjYWxsRGVzdGluYXRpb247DQoNCg0KICAgIG1vZGlmaWVyIG9ubHlPcmFjbGUoKSB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyID09IG9yYWNsZSkgew0KICAgICAgICAgICAgXzsNCiAgICAgICAgfQ0KICAgICAgICBFcnJvcigwLCA2KTsNCiAgICB9DQogICAgDQogICAgbW9kaWZpZXIgbm9FdGhlcigpIHsNCiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IDApIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIFJlY292ZXJ5V2l0aFRlbmFudCgpIHsNCiAgICAgICAgb3JhY2xlID0gbXNnLnNlbmRlcjsNCiAgICAgICAgdGVuYW50ID0gbXNnLnNlbmRlcjsNCiAgICAgICAgdXNlcnMubGVuZ3RoKys7DQogICAgfQ0KICAgIA0KICAgIC8vIyMjIyMjIyMjIyMjIyBJTlRFUk5BTCBGVU5DVElPTlMNCiAgICANCiAgICBmdW5jdGlvbiBfY2hlY2tTaWduZWQoYnl0ZXMzMiBfaGFzaCwgdWludCBfbm9uY2UsIHVpbnQ4IF92LCBieXRlczMyIF9yLCBieXRlczMyIF9zKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIGFkZHJlc3MgcmVjb3ZlcmVkID0gZWNyZWNvdmVyKF9oYXNoLCBfdiwgX3IsIF9zKTsNCg0KICAgICAgICBpZiAodGVuYW50ICE9IHJlY292ZXJlZCkgew0KICAgICAgICAgICAgRXJyb3IoX25vbmNlLCAzKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobm9uY2VVc2VkW19ub25jZV0pIHsNCiAgICAgICAgICAgIEVycm9yKF9ub25jZSwgNCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgbm9uY2VVc2VkW19ub25jZV0gPSB0cnVlOyANCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgIA0KICAgIA0KICAgIC8vIyMjIyMjIyMjIyMjIyBQVUJMSUMgRlVOQ1RJT05TDQogICAgDQogICAgZnVuY3Rpb24gc2V0T3JhY2xlKGFkZHJlc3MgX25ld09yYWNsZSkgbm9FdGhlciBvbmx5T3JhY2xlIHsNCiAgICAgICAgb3JhY2xlID0gX25ld09yYWNsZTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gY29uZmlndXJlKGFkZHJlc3MgX3RlbmFudCwgYWRkcmVzcyBfY2FsbERlc3RpbmF0aW9uLCB1aW50IF9ub25jZSwgdWludDggX3YsIGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MpIG5vRXRoZXIgb25seU9yYWNsZSByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmKHRlbmFudCAhPSBvcmFjbGUgJiYgIV9jaGVja1NpZ25lZChzaGEzKHRlbmFudCwgX2NhbGxEZXN0aW5hdGlvbiwgX25vbmNlKSwgX25vbmNlLCBfdiwgX3IsIF9zKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgdGVuYW50ID0gX3RlbmFudDsNCiAgICAgICAgY2FsbERlc3RpbmF0aW9uID0gX2NhbGxEZXN0aW5hdGlvbjsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgIA0KICAgIA0KICAgIGZ1bmN0aW9uIGFkZFVzZXIoYWRkcmVzcyBfdXNlckFkZHIsIHVpbnQgX25vbmNlLCB1aW50OCBfdiwgYnl0ZXMzMiBfciwgYnl0ZXMzMiBfcykgbm9FdGhlciBvbmx5T3JhY2xlIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgaWYodXNlckluZGV4W191c2VyQWRkcl0gPiAwKSB7DQogICAgICAgICAgICBFcnJvcihfbm9uY2UsIDIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmKCFfY2hlY2tTaWduZWQoc2hhMyhfdXNlckFkZHIsIF9ub25jZSksIF9ub25jZSwgX3YsIF9yLCBfcykpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIHVpbnQgcG9zVXNlciA9IHVzZXJzLmxlbmd0aCsrOw0KICAgICAgICB1c2VySW5kZXhbX3VzZXJBZGRyXSA9IHBvc1VzZXI7DQogICAgICAgIHVzZXJzW3Bvc1VzZXJdID0gVXNlcihfdXNlckFkZHIpOw0KICAgICAgICBTZXR1cChfbm9uY2UsIF91c2VyQWRkcik7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiByZWNvdmVyVXNlcihhZGRyZXNzIF9vbGRBZGRyLCBhZGRyZXNzIF9uZXdBZGRyLCB1aW50IF9ub25jZSwgdWludDggX3YsIGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MpIG5vRXRoZXIgb25seU9yYWNsZSByZXR1cm5zIChib29sKSB7DQogICAgICAgIHVpbnQgdXNlclBvcyA9IHVzZXJJbmRleFtfb2xkQWRkcl07DQogICAgICAgIGlmICh1c2VyUG9zID09IDApIHsNCiAgICAgICAgICAgIEVycm9yKF9ub25jZSwgMSk7IC8vdXNlciBkb2Vzbid0IGV4c2l0DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmICghX2NoZWNrU2lnbmVkKHNoYTMoX29sZEFkZHIsIF9uZXdBZGRyLCBfbm9uY2UpLCBfbm9uY2UsIF92LCBfciwgX3MpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICBib29sIHJlc3VsdCA9IERlc3RpbmF0aW9uKGNhbGxEZXN0aW5hdGlvbikucmVjb3Zlcihfb2xkQWRkciwgX25ld0FkZHIpOw0KICAgICAgICBpZiAocmVzdWx0KSB7DQogICAgICAgICAgICB1c2Vyc1t1c2VyUG9zXS5hZGRyID0gX25ld0FkZHI7DQogICAgICAgICAgICBkZWxldGUgdXNlckluZGV4W19vbGRBZGRyXTsNCiAgICAgICAgICAgIHVzZXJJbmRleFtfbmV3QWRkcl0gPSB1c2VyUG9zOw0KICAgICAgICAgICAgUmVjb3ZlcnkoX25vbmNlLCBfb2xkQWRkciwgX25ld0FkZHIpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgRXJyb3IoX25vbmNlLCA1KTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uICgpIG5vRXRoZXIgew0KICAgICAgICB0aHJvdzsNCiAgICB9DQogICAgDQogICAgLy8jIyMjIyMjIyMjIyMjIFNUQVRJQyBGVU5DVElPTlMNCiAgICANCiAgICBmdW5jdGlvbiBpc1VzZXIoYWRkcmVzcyBfdXNlckFkZHIpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgcmV0dXJuICh1c2VySW5kZXhbX3VzZXJBZGRyXSA+IDApOw0KICAgIH0NCg0KfQ=='