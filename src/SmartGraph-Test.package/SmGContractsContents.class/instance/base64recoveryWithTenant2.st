base 64 content
base64recoveryWithTenant2
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xOw0KDQpjb250cmFjdCBEZXN0aW5hdGlvbiB7DQogICAgZnVuY3Rpb24gcmVjb3ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgcmV0dXJucyhib29sKTsNCn0NCg0KY29udHJhY3QgUmVjb3ZlcnlXaXRoVGVuYW50IHsNCiAgICBldmVudCBSZWNvdmVyeSh1aW50IGluZGV4ZWQgbm9uY2UsIGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8pOw0KICAgIGV2ZW50IFNldHVwKHVpbnQgaW5kZXhlZCBub25jZSwgYWRkcmVzcyBpbmRleGVkIHVzZXIpOw0KICAgIA0KICAgIC8vMTogdXNlciBub3QgZXhpc3RpbmcNCiAgICAvLzI6IGNvbmZsaWN0LCB1c2VyIGV4aXN0cyBhbHJlYWR5DQogICAgLy8zOiBzaWduYXR1cmUgbm90IGJ5IHRlbmFudA0KICAgIC8vNDogbm9uY2Uvc2lnbmF0dXJlIHVzZWQgYmVmb3JlDQogICAgLy81OiBjb250cmFjdCBjYWxsIGZhaWxlZA0KICAgIC8vNjogb3JhY2xlIGFjY2VzcyBkZW5pZWQNCiAgICAvLzg6IHJlcXVlc3RlZCB1c2VyIG5vdCBmb3VuZA0KICAgIGV2ZW50IEVycm9yKHVpbnQgaW5kZXhlZCBub25jZSwgdWludCBjb2RlKTsNCiAgICANCiAgICBzdHJ1Y3QgVXNlciB7DQogICAgICAgIGFkZHJlc3MgYWRkcjsNCiAgICB9DQogICAgDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSB1c2VySW5kZXg7DQogICAgVXNlcltdIHB1YmxpYyB1c2VyczsNCg0KICAgIGFkZHJlc3MgcHVibGljIG9yYWNsZTsNCiAgICBhZGRyZXNzIHB1YmxpYyB0ZW5hbnQ7DQogICAgbWFwcGluZyh1aW50ID0+IGJvb2wpIG5vbmNlVXNlZDsNCiAgICBhZGRyZXNzIHB1YmxpYyBjYWxsRGVzdGluYXRpb247DQoNCg0KICAgIG1vZGlmaWVyIG9ubHlPcmFjbGUoKSB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyID09IG9yYWNsZSkgew0KICAgICAgICAgICAgXzsNCiAgICAgICAgfQ0KICAgICAgICBFcnJvcigwLCA2KTsNCiAgICB9DQogICAgDQogICAgbW9kaWZpZXIgbm9FdGhlcigpIHsNCiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IDApIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIFJlY292ZXJ5V2l0aFRlbmFudCgpIHsNCiAgICAgICAgb3JhY2xlID0gbXNnLnNlbmRlcjsNCiAgICAgICAgdGVuYW50ID0gbXNnLnNlbmRlcjsNCiAgICAgICAgdXNlcnMubGVuZ3RoKys7DQogICAgfQ0KICAgIA0KICAgIC8vIyMjIyMjIyMjIyMjIyBJTlRFUk5BTCBGVU5DVElPTlMNCiAgICANCiAgICBmdW5jdGlvbiBfY2hlY2tTaWduZWQoYnl0ZXMzMiBfaGFzaCwgdWludCBfbm9uY2UsIHVpbnQ4IF92LCBieXRlczMyIF9yLCBieXRlczMyIF9zKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIGFkZHJlc3MgcmVjb3ZlcmVkID0gZWNyZWNvdmVyKF9oYXNoLCBfdiwgX3IsIF9zKTsNCg0KICAgICAgICBpZiAodGVuYW50ICE9IHJlY292ZXJlZCkgew0KICAgICAgICAgICAgRXJyb3IoX25vbmNlLCAzKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobm9uY2VVc2VkW19ub25jZV0pIHsNCiAgICAgICAgICAgIEVycm9yKF9ub25jZSwgNCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgbm9uY2VVc2VkW19ub25jZV0gPSB0cnVlOyANCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgIA0KICAgIA0KICAgIC8vIyMjIyMjIyMjIyMjIyBQVUJMSUMgRlVOQ1RJT05TDQogICAgDQogICAgZnVuY3Rpb24gc2V0T3JhY2xlKGFkZHJlc3MgX25ld09yYWNsZSkgbm9FdGhlciBvbmx5T3JhY2xlIHsNCiAgICAgICAgb3JhY2xlID0gX25ld09yYWNsZTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gY29uZmlndXJlKGFkZHJlc3MgX3RlbmFudCwgYWRkcmVzcyBfY2FsbERlc3RpbmF0aW9uLCB1aW50IF9ub25jZSwgdWludDggX3YsIGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MpIG5vRXRoZXIgb25seU9yYWNsZSByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmKHRlbmFudCAhPSBvcmFjbGUgJiYgIV9jaGVja1NpZ25lZChzaGEzKF90ZW5hbnQsIF9jYWxsRGVzdGluYXRpb24sIF9ub25jZSksIF9ub25jZSwgX3YsIF9yLCBfcykpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIHRlbmFudCA9IF90ZW5hbnQ7DQogICAgICAgIGNhbGxEZXN0aW5hdGlvbiA9IF9jYWxsRGVzdGluYXRpb247DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCiAgICANCiAgICANCiAgICBmdW5jdGlvbiBhZGRVc2VyKGFkZHJlc3MgX3VzZXJBZGRyLCB1aW50IF9ub25jZSwgdWludDggX3YsIGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MpIG5vRXRoZXIgb25seU9yYWNsZSByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmKHVzZXJJbmRleFtfdXNlckFkZHJdID4gMCkgew0KICAgICAgICAgICAgRXJyb3IoX25vbmNlLCAyKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBpZighX2NoZWNrU2lnbmVkKHNoYTMoX3VzZXJBZGRyLCBfbm9uY2UpLCBfbm9uY2UsIF92LCBfciwgX3MpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB1aW50IHBvc1VzZXIgPSB1c2Vycy5sZW5ndGgrKzsNCiAgICAgICAgdXNlckluZGV4W191c2VyQWRkcl0gPSBwb3NVc2VyOw0KICAgICAgICB1c2Vyc1twb3NVc2VyXSA9IFVzZXIoX3VzZXJBZGRyKTsNCiAgICAgICAgU2V0dXAoX25vbmNlLCBfdXNlckFkZHIpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gcmVjb3ZlclVzZXIoYWRkcmVzcyBfb2xkQWRkciwgYWRkcmVzcyBfbmV3QWRkciwgdWludCBfbm9uY2UsIHVpbnQ4IF92LCBieXRlczMyIF9yLCBieXRlczMyIF9zKSBub0V0aGVyIG9ubHlPcmFjbGUgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICB1aW50IHVzZXJQb3MgPSB1c2VySW5kZXhbX29sZEFkZHJdOw0KICAgICAgICBpZiAodXNlclBvcyA9PSAwKSB7DQogICAgICAgICAgICBFcnJvcihfbm9uY2UsIDEpOyAvL3VzZXIgZG9lc24ndCBleHNpdA0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZiAoIV9jaGVja1NpZ25lZChzaGEzKF9vbGRBZGRyLCBfbmV3QWRkciwgX25vbmNlKSwgX25vbmNlLCBfdiwgX3IsIF9zKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgYm9vbCByZXN1bHQgPSBEZXN0aW5hdGlvbihjYWxsRGVzdGluYXRpb24pLnJlY292ZXIoX29sZEFkZHIsIF9uZXdBZGRyKTsNCiAgICAgICAgaWYgKHJlc3VsdCkgew0KICAgICAgICAgICAgdXNlcnNbdXNlclBvc10uYWRkciA9IF9uZXdBZGRyOw0KICAgICAgICAgICAgZGVsZXRlIHVzZXJJbmRleFtfb2xkQWRkcl07DQogICAgICAgICAgICB1c2VySW5kZXhbX25ld0FkZHJdID0gdXNlclBvczsNCiAgICAgICAgICAgIFJlY292ZXJ5KF9ub25jZSwgX29sZEFkZHIsIF9uZXdBZGRyKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIEVycm9yKF9ub25jZSwgNSk7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiAoKSBub0V0aGVyIHsNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KICAgIA0KICAgIC8vIyMjIyMjIyMjIyMjIyBTVEFUSUMgRlVOQ1RJT05TDQogICAgDQogICAgZnVuY3Rpb24gaXNVc2VyKGFkZHJlc3MgX3VzZXJBZGRyKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiAodXNlckluZGV4W191c2VyQWRkcl0gPiAwKTsNCiAgICB9DQoNCn0='