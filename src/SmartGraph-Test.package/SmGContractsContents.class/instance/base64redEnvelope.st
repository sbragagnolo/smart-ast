base 64 content
base64redEnvelope
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KY29udHJhY3QgUmVkRW52ZWxvcGV7DQogICAgYWRkcmVzcyBvd25lcjsNCiAgICB1aW50IHJlbWFpblNpemUgPSAwOw0KICAgIHVpbnQgbWluID0gMTAwMDAwMDAwMDAwMDAwMDsgLy8gMC4wMDEgRVRIDQogICAgdWludCBtYXg7DQogICAgdWludDI1NiBtb25leTsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGVhcm5lZDsNCiAgICANCiAgICBmdW5jdGlvbiBSZWRFbnZlbG9wZSgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBkZXNwb2l0KHVpbnQgY291bnQpIHJldHVybnMgKHVpbnQpew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgcmVtYWluU2l6ZSArPSBjb3VudDsNCiAgICAgICAgcmV0dXJuIHJlbWFpblNpemU7DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIHJhbmRvbUdlbih1aW50IHNlZWQsIHVpbnQgbWF4KSBjb25zdGFudCByZXR1cm5zICh1aW50IHJhbmRvbU51bWJlcikgew0KICAgICAgICByZXR1cm4odWludChzaGEzKGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXIgLSAxKSwgc2VlZCkpICUgbWF4KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBtdWx0aUJsb2NrUmFuZG9tR2VuKHVpbnQgc2VlZCwgdWludCBzaXplKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJhbmRvbU51bWJlcikgew0KICAgICAgICB1aW50IG4gPSAwOw0KICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBzaXplOyBpKyspew0KICAgICAgICAgICAgaWYgKHVpbnQoc2hhMyhibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyIC0gaSAtIDEpLCBzZWVkICkpICUgMiA9PSAwKQ0KICAgICAgICAgICAgICAgIG4gKz0gMiAqKiBpIDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbjsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gZ29vZGx1Y2sodWludCBzZWVkKSBwYXlhYmxlIHsNCiAgICAgICAgaWYgKGVhcm5lZFttc2cuc2VuZGVyXSA9PSAxKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAocmVtYWluU2l6ZSA9PSAwKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICBlYXJuZWRbbXNnLnNlbmRlcl0gPSAxOw0KICAgICAgICByZW1haW5TaXplIC09IDE7DQogICAgICAgIGlmIChyZW1haW5TaXplID09IDApIHsNCiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBtYXggPSB0aGlzLmJhbGFuY2UgLyByZW1haW5TaXplICogMjsNCiAgICAgICAgbW9uZXkgPSByYW5kb21HZW4oc2VlZCwgbWF4KTsNCiAgICAgICAgaWYgKG1vbmV5IDwgbWluKSB7DQogICAgICAgICAgICBtb25leSA9IG1pbjsNCiAgICAgICAgfQ0KICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKG1vbmV5KTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gZ29vZGJ5ZSgpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9DQogICAgICAgIHN1aWNpZGUob3duZXIpOw0KICAgIH0NCn0='