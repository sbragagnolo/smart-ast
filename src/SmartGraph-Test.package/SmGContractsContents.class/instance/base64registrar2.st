base 64 content
base64registrar2
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyogRXRoYXJ0IFJlZ2lzdHJhciBDb250cmFjdDoNCg0KCUV0aGFydCBBUkNISVRFQ1RVUkUNCgktLS0tLS0tLS0tLS0tLS0tLS0tDQoJCQkJCQlfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXw0KCQkJCQkJVgkJCQkJCQkJCQlWDQoJQ29udHJvbGxlciAtLT4gUmVnaXN0cmFyIDwtLT4gRmFjdG9yeSBDb250cmFjdDEgLS0+IEFydHdvcmsgQ29udHJhY3QxDQoJCQkJCQkJCSAgRmFjdG9yeSBDb250cmFjdDIJICAgIEFydHdvcmsgQ29udHJhY3QyDQoJCQkJCQkJCSAgCQkuLi4JCQkJCS4uLg0KCQkJCQkJCQkgIEZhY3RvcnkgQ29udHJhY3ROCSAgICBBcnR3b3JrIENvbnRyYWN0Tg0KDQoJQ29udHJvbGxlcjogVGhlIGNvbnRyb2xlciBjb250cmFjdCBpcyB0aGUgb3duZXIgb2YgdGhlIFJlZ2lzdHJhciBjb250cmFjdCBhbmQgY2FuDQoJCS0gU2V0IGEgbmV3IG93bmVyDQoJCS0gQ29udHJvbGwgdGhlIGFzc2V0cyBvZiB0aGUgUmVnaXN0cmFyICh3aXRoZHJhdyBFVEgsIHRyYW5zZmVyLCBzZWxsLCBidXJuIHBpZWNlcyBvd25lZCBieSB0aGUgUmVnaXN0cmFyKQ0KCQktIFRoZSBwbGFuIGlzIHRvIHJlcGxhY2UgdGhlIGNvbnRyb2xsZXIgY29udHJhY3Qgd2l0aCBhIERBTyBpbiBwcmVwZXJhdGlvbiBmb3IgYSBwb3NzaWJsZSBJQ08NCgkNCglSZWdpc3RyYXI6DQoJCS0gVGhlIFJlZ2lzdHJhciBjb250cmFjdCBhdGNzIGFzIHRoZSBjZW50cmFsIHJlZ2lzdHJ5IGZvciBhbGwgc2hhMjU2IGhhc2hlcyBpbiB0aGUgRXRoYXJ0IGZhY3RvcnkgY29udHJhY3QgbmV0d29yay4NCgkJLSBBcHByb3ZlZCBGYWN0b3J5IENvbnRyYWN0cyBjYW4gcmVnaXN0ZXIgc2hhMjU2IGhhc2hlcyB1c2luZyB0aGUgUmVnaXN0cmFyIGludGVyZmFjZS4NCgkJLSAyLjUlIG9mIHRoZSBhcnQgcHJvZHVjZWQgYW5kIDIuNSUgb2YgdHVybm92ZXIgb2YgdGhlIGNvbnRyYWN0IG5ldHdvcmsgd2lsbCBiZSB0cmFuc2ZlcmVkIHRvIHRoZSBSZWdpc3RyYXIuDQoJDQoJRmFjdG9yeSBDb250cmFjdHM6DQoJCS0gRmFjdG9yeSBDb250cmFjdHMgY2FuIHNwYXduIEFydHdvcmsgQ29udHJhY3RzIGluIGxpbmUgd2l0aCBhcnRpc3RzIHNwZWNpZmljYXRpb25zDQoJCS0gRmFjdG9yeSBDb250cmFjdHMgd2lsbCBvbmx5IHNwYXduIEFydHdvcmsgQ29udHJhY3RzIHdobydzIHNoYTI1NiBoYXNoZXMgYXJlIHVuaXF1ZSBwZXIgdGhlIFJlZ2lzdHJhcidzIHNoYTI1NiByZWdpc3RyeQ0KCQktIEZhY3RvcnkgQ29udHJhY3RzIHdpbGwgcmVnaXN0ZXIgZXZlcnkgbmV3IEFydHdvcmsgQ29udHJhY3Qgd2l0aCBpdCdzIGRldGFpbHMgd2l0aCB0aGUgUmVnaXN0cmFyIGNvbnRyYWN0DQoJDQoJQXJ0d29yayBDb250cmFjdHM6DQoJCS0gQXJ0d29yayBDb250cmFjdHMgYWN0IGFzIG1pbmltYWxpc3QgZGVjZW50cmFsaXplZCBleGNoYW5nZXMgZm9yIHRoZWlyIHBpZWNlcyBpbiBsaW5lIHdpdGggc3BlY2lmaWVkIGNvbmRpdGlvbnMNCgkJLSBBcnR3b3JrIENvbnRyYWN0cyB3aWxsIGludGVyYWN0IHdpdGggdGhlIFJlZ2lzdHJhciB0byBpc3N1ZSBidXllcnMgb2YgcGllY2VzIGEgcHJlZGV0ZXJtaW5lZCBhbW91bnQgb2YgUGF0cm9uIHRva2VucyBiYXNlZCBvbiB0aGUgdHJhbnNhY3Rpb24gdmFsdWUgDQoJCS0gQXJ0d29yayBDb250cmFjdHMgY2FuIGJlIGludGVyYWN0ZWQgd2l0aCBieSB0aGUgQ29udHJvbGxlciB2aWEgdGhlIFJlZ2lzdHJhciB1c2luZyB0aGVpciBpbnRlcmZhY2VzIHRvIHRyYW5zZmVyLCBzZWxsLCBidXJuIGV0YyBwaWVjZXMNCgkNCgkoYykgU3RlZmFuIFBlcm5hciAyMDE3IC0gYWxsIHJpZ2h0cyByZXNlcnZlZA0KCShjKSBFUkMyMCBmdW5jdGlvbnMgQm9ra3lQb29CYWggMjAxNy4gVGhlIE1JVCBMaWNlbmNlLg0KKi8NCg0KY29udHJhY3QgSW50ZXJmYWNlIHsNCg0KCS8vIEV0aGFydCBuZXR3b3JrIGludGVyZmFjZQ0KCWZ1bmN0aW9uIHJlZ2lzdGVyQXJ0d29yayAoYWRkcmVzcyBfY29udHJhY3QsIGJ5dGVzMzIgX1NIQTI1Nkhhc2gsIHVpbnQyNTYgX2VkaXRpb25TaXplLCBzdHJpbmcgX3RpdGxlLCBzdHJpbmcgX2ZpbGVMaW5rLCB1aW50MjU2IF9vd25lckNvbW1pc3Npb24sIGFkZHJlc3MgX2FydGlzdCwgYm9vbCBfaW5kZXhlZCwgYm9vbCBfb3Vyb2Jvcm9zKTsNCglmdW5jdGlvbiBpc1NIQTI1Nkhhc2hSZWdpc3RlcmVkIChieXRlczMyIF9TSEEyNTZIYXNoKSByZXR1cm5zIChib29sIF9yZWdpc3RlcmVkKTsJCQkvLyBDaGVjayBpZiBhIHNoYTI1NiBoYXNoIGlzIHJlZ2lzdGFyZWQNCglmdW5jdGlvbiBpc0ZhY3RvcnlBcHByb3ZlZCAoYWRkcmVzcyBfZmFjdG9yeSkgcmV0dXJucyAoYm9vbCBfYXBwcm92ZWQpOwkJCQkJCS8vIENoZWNrIGlmIGFuIGFkZHJlc3MgaXMgYSByZWdpc3RyZWQgZmFjdG9yeSBjb250cmFjdA0KCWZ1bmN0aW9uIGlzc3VlUGF0cm9ucyAoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCk7CQkJCQkJCQkJCS8vIElzc3VlcyBQYXRyb24gdG9rZW5zIGFjY29yZGluZyB0byBjb25kaXRpb25zIHNwZWNpZmllZCBpbiBmYWN0b3J5IGNvbnRyYWN0cw0KICAgIGZ1bmN0aW9uIGFwcHJvdmVGYWN0b3J5Q29udHJhY3QgKGFkZHJlc3MgX2ZhY3RvcnlDb250cmFjdEFkZHJlc3MsIGJvb2wgX2FwcHJvdmVkKTsJCQkvLyBBcHByb3Zlcy9kaXNhcHByb3ZlcyBmYWN0b3J5IGNvbnRyYWN0cy4NCglmdW5jdGlvbiBjaGFuZ2VPd25lciAoYWRkcmVzcyBuZXdPd25lcik7CQkJCQkJCQkJCQkJCS8vIENoYW5nZSB0aGUgcmVnaXN0cmFyJ3Mgb3duZXIuDQoNCglmdW5jdGlvbiBvZmZlclBpZWNlRm9yU2FsZUJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX3ByaWNlKTsJCQkJCS8vIFNlbGwgYSBwaWVjZSBvd25lZCBieSB0aGUgcmVnaXN0cmFyLg0KCWZ1bmN0aW9uIG9mZmVyUGllY2VGb3JTYWxlICh1aW50MjU2IF9wcmljZSk7DQoJZnVuY3Rpb24gZmlsbEJpZEJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QpOwkJCQkJCQkJCQkJCS8vIEZpbGwgYSBiaWQgd2l0aCBhbiB1bmluZGV4ZWQgcGllY2Ugb3duZWQgYnkgdGhlIHJlZ2lzdHJhcg0KCWZ1bmN0aW9uIGZpbGxCaWQoKTsNCglmdW5jdGlvbiBjYW5jZWxTYWxlQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCk7CQkJCQkJCQkJCQkvLyBDYW5jZWwgdGhlIHNhbGUgb2YgYW4gdW5pbmRleGVkIHBpZWNlIG93bmVkIGJ5IHRoZSByZWdpc3RyYXINCglmdW5jdGlvbiBjYW5jZWxTYWxlKCk7DQoJZnVuY3Rpb24gb2ZmZXJJbmRleGVkUGllY2VGb3JTYWxlQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgdWludDI1NiBfaW5kZXgsIHVpbnQyNTYgX3ByaWNlKTsJCQkJLy8gU2VsbCBhbiBpbmRleGVkIHBpZWNlIG93bmVkIGJ5IHRoZSByZWdpc3RyYXIuDQoJZnVuY3Rpb24gb2ZmZXJJbmRleGVkUGllY2VGb3JTYWxlKHVpbnQyNTYgX2luZGV4LCB1aW50MjU2IF9wcmljZSk7DQoJZnVuY3Rpb24gZmlsbEluZGV4ZWRCaWRCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCB1aW50MjU2IF9pbmRleCk7CQkJCQkJLy8gRmlsbCBhIGJpZCB3aXRoIGFuIGluZGV4ZWQgcGllY2Ugb3duZWQgYnkgdGhlIHJlZ2lzdHJhcg0KCWZ1bmN0aW9uIGZpbGxJbmRleGVkQmlkICh1aW50MjU2IF9pbmRleCk7DQoJZnVuY3Rpb24gY2FuY2VsSW5kZXhlZFNhbGVCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0KTsJCQkJCQkJCQkvLyBDYW5jZWwgdGhlIHNhbGUgb2YgYW4gdW5pbmRleGVkIHBpZWNlIG93bmVkIGJ5IHRoZSByZWdpc3RyYXINCglmdW5jdGlvbiBjYW5jZWxJbmRleGVkU2FsZSgpOw0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCB1aW50MjU2IF9hbW91bnQsIGFkZHJlc3MgX3RvKTsJCQkJLy8gVHJhbnNmZXJzIHVuaW5kZXhlZCBwaWVjZXMgb3duZWQgYnkgdGhlIHJlZ2lzdHJhciBjb250cmFjdA0KICAgIGZ1bmN0aW9uIHRyYW5zZmVySW5kZXhlZEJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2luZGV4LCBhZGRyZXNzIF90byk7CQkvLyBUcmFuc2ZlcnMgaW5kZXhlZCBwaWVjZXMgb3duZWQgYnkgdGhlIHJlZ2lzdHJhciBjb250cmFjdA0KCWZ1bmN0aW9uIGFwcHJvdmVCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpOwkJCS8vIFNldHMgYW4gYWxsb3dhbmNlIGZvciB1bmluZGV4ZWQgcGllY2VzIG93bmVkIGJ5IHRoZSByZWdpc3RyYXIgY29udHJhY3QNCglmdW5jdGlvbiBhcHByb3ZlSW5kZXhlZEJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2luZGV4KTsJCS8vIFNldHMgYW4gYWxsb3dhbmNlIGZvciBpbmRleGVkIHBpZWNlcyBvd25lZCBieSB0aGUgcmVnaXN0cmFyIGNvbnRyYWN0DQoJZnVuY3Rpb24gYnVybkJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2Ftb3VudCk7CQkJCQkJCQkvLyBCdXJuIGFuIHVuaW5kZXhlZCBwaWVjZSBvd25lZCBieSB0aGUgcmVnaXN0cmFyIGNvbnRyYWN0DQoJZnVuY3Rpb24gYnVybkZyb21CeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCB1aW50MjU2IF9hbW91bnQsIGFkZHJlc3MgX2Zyb20pOwkJCQkvLyBCdXJuIGFuIHVuaW5kZXhlZCBwaWVjZSBvd25lZCBieSBhbm5vdGhlciBhZGRyZXNzDQoJZnVuY3Rpb24gYnVybkluZGV4ZWRCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCB1aW50MjU2IF9pbmRleCk7CQkJCQkJCS8vIEJ1cm4gYW4gaW5kZXhlZCBwaWVjZSBvd25lZCBieSB0aGUgcmVnaXN0cmFyIGNvbnRyYWN0DQoJZnVuY3Rpb24gYnVybkluZGV4ZWRGcm9tQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfaW5kZXgpOwkJLy8gQnVybiBhbiBpbmRleGVkIHBpZWNlIG93bmVkIGJ5IGFub3RoZXIgYWRkcmVzcw0KDQoJLy8gRVJDMjAgaW50ZXJmYWNlDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRvdGFsU3VwcGx5KTsJCQkJCQkJCQkvLyBSZXR1cm5zIHRoZSB0b3RhbCBzdXBwbHkgb2YgYW4gYXJ0d29yayBvciB0b2tlbg0KCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsJCQkJCQkJLy8gUmV0dXJucyBhbiBhZGRyZXNzJyBiYWxhbmNlIG9mIGFuIGFydHdvcmsgb3IgdG9rZW4NCiAJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwkJCQkJCQkvLyBUcmFuc2ZlcnMgcGllY2VzIG9mIGFydCBvciB0b2tlbnMgdG8gYW4gYWRkcmVzcw0KIAlmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwkJLy8gVHJhbnNmZXJzIHBpZWNlcyBvZiBhcnQgb2YgdG9rZW5zIG93bmVkIGJ5IGFub3RoZXIgYWRkcmVzcyB0byBhbiBhZGRyZXNzDQoJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsJCQkJCQkvLyBTZXRzIGFuIGFsbG93YW5jZSBmb3IgYW4gYWRkcmVzcw0KCWZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwkJLy8gUmV0dXJucyB0aGUgYWxsb3dhbmNlIG9mIGFuIGFkZHJlc3MgZm9yIGFub3RoZXIgYWRkcmVzcw0KDQoJLy8gQWRkaXRpb25hbCB0b2tlbiBmdW5jdGlvbnMNCglmdW5jdGlvbiBidXJuKHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsJCQkJCQkJCQkJLy8gQnVybnMgKHJlbW92ZXMgZnJvbSBjaXJjdWxhdGlvbikgdW5pbmRleGVkIHBpZWNlcyBvZiBhcnQgb3IgdG9rZW5zLg0KCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJLy8gSW4gdGhlIGNhc2Ugb2YgJ291cm9ib3JvcycgcGllY2VzIHRoaXMgZnVuY3Rpb24gYWxzbyByZXR1cm5zIHRoZSBwaWVjZSdzDQoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkvLyBjb21wb25lbnRzIHRvIHRoZSBtZXNzYWdlIHNlbmRlcg0KCQ0KCWZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsJCQkJCS8vIEJ1cm5zIChyZW1vdmVzIGZyb20gY2lyY3VsYXRpb24pIHVuaW5kZXhlZCBwaWVjZXMgb2YgYXJ0IG9yIHRva2Vucw0KCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJLy8gb3duZWQgYnkgYW5vdGhlciBhZGRyZXNzLiBJbiB0aGUgY2FzZSBvZiAnb3Vyb2Jvcm9zJyBwaWVjZXMgdGhpcw0KCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJLy8gZnVuY3Rpb24gYWxzbyByZXR1cm5zIHRoZSBwaWVjZSdzIGNvbXBvbmVudHMgdG8gdGhlIG1lc3NhZ2Ugc2VuZGVyDQoJDQoJLy8gRXh0ZW5kZWQgRVJDMjAgaW50ZXJmYWNlIGZvciBpbmRleGVkIHBpZWNlcw0KCWZ1bmN0aW9uIHRyYW5zZmVySW5kZXhlZCAoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX19pbmRleCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsJCQkvLyBUcmFuc2ZlcnMgYW4gaW5kZXhlZCBwaWVjZSBvZiBhcnQNCglmdW5jdGlvbiB0cmFuc2ZlckZyb21JbmRleGVkIChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfaW5kZXgpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CS8vIFRyYW5zZmVycyBhbiBpbmRleGVkIHBpZWNlIG9mIGFydCBmcm9tIGFub3RoZXIgYWRkcmVzcw0KCWZ1bmN0aW9uIGFwcHJvdmVJbmRleGVkIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9pbmRleCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsJCQkvLyBTZXRzIGFuIGFsbG93YW5jZSBmb3IgYW4gaW5kZXhlZCBwaWVjZSBvZiBhcnQgZm9yIGFub3RoZXIgYWRkcmVzcw0KCWZ1bmN0aW9uIGJ1cm5JbmRleGVkICh1aW50MjU2IF9pbmRleCk7CQkJCQkJCQkJCQkJCQkvLyBCdXJucyAocmVtb3ZlcyBmcm9tIGNpcmN1bGF0aW9uKSBpbmRleGVkIHBpZWNlcyBvZiBhcnQgb3IgdG9rZW5zLg0KCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJLy8gSW4gdGhlIGNhc2Ugb2YgJ291cm9ib3JvcycgcGllY2VzIHRoaXMgZnVuY3Rpb24gYWxzbyByZXR1cm5zIHRoZQ0KCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJLy8gcGllY2UncyBjb21wb25lbnRzIHRvIHRoZSBtZXNzYWdlIHNlbmRlcg0KCQ0KCWZ1bmN0aW9uIGJ1cm5JbmRleGVkRnJvbSAoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX2luZGV4KTsJCQkJCQkJCQkvLyBCdXJucyAocmVtb3ZlcyBmcm9tIGNpcmN1bGF0aW9uKSBpbmRleGVkIHBpZWNlcyBvZiBhcnQgb3IgdG9rZW5zDQoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkvLyBvd25lZCBieSBhbm90aGVyIGFkZHJlc3MuIEluIHRoZSBjYXNlIG9mICdvdXJvYm9yb3MnIHBpZWNlcyB0aGlzDQoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkvLyBmdW5jdGlvbiBhbHNvIHJldHVybnMgdGhlIHBpZWNlJ3MgY29tcG9uZW50cyB0byB0aGUgbWVzc2FnZSBzZW5kZXINCg0KfQ0KDQpjb250cmFjdCBSZWdpc3RyYXIgew0KDQoJLy8gUGF0cm9uIHRva2VuIEVSQzIwIHB1YmxpYyB2YXJpYWJsZXMNCglzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJBUlQiOw0KCXN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJQYXRyb24gLSBFdGhhcnQgTmV0d29yayBUb2tlbiI7DQoJdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7DQoJdWludDI1NiBfdG90YWxQYXRyb25TdXBwbHk7DQoNCglldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSk7DQoJZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOw0KCWV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludDI1NiBfYW1vdW50KTsNCg0KICAgIC8vIFBhdHJvbiB0b2tlbiBiYWxhbmNlcyBmb3IgZWFjaCBhY2NvdW50DQoJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsJCQkJCQkvLyBQYXRyb24gdG9rZW4gYmFsYW5jZXMNCg0KCWV2ZW50IE5ld0FydHdvcmsoYWRkcmVzcyBfY29udHJhY3QsIGJ5dGVzMzIgX1NIQTI1Nkhhc2gsIHVpbnQyNTYgX2VkaXRpb25TaXplLCBzdHJpbmcgX3RpdGxlLCBzdHJpbmcgX2ZpbGVMaW5rLCB1aW50MjU2IF9vd25lckNvbW1pc3Npb24sIGFkZHJlc3MgX2FydGlzdCwgYm9vbCBfaW5kZXhlZCwgYm9vbCBfb3Vyb2Jvcm9zKTsNCg0KDQogCS8vIE93bmVyIG9mIGFjY291bnQgYXBwcm92ZXMgdGhlIHRyYW5zZmVyIG9mIGFuIGFtb3VudCBvZiBQYXRyb24gdG9rZW5zIHRvIGFub3RoZXIgYWNjb3VudA0KIAltYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsJCQkvLyBQYXRyb24gdG9rZW4gYWxsb3dhbmNlcw0KCQ0KCS8vIEJFR0lOIEVSQzIwIGZ1bmN0aW9ucyAoYykgQm9ra3lQb29CYWggMjAxNy4gVGhlIE1JVCBMaWNlbmNlLg0KDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRvdGFsUGF0cm9uU3VwcGx5KSB7DQoJCXRvdGFsUGF0cm9uU3VwcGx5ID0gX3RvdGFsUGF0cm9uU3VwcGx5Ow0KCQl9DQoNCgkvLyBXaGF0IGlzIHRoZSBiYWxhbmNlIG9mIGEgcGFydGljdWxhciBhY2NvdW50Pw0KCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogCQlyZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCgkJfQ0KDQoJLy8gVHJhbnNmZXIgdGhlIGJhbGFuY2UgZnJvbSBvd25lcidzIGFjY291bnQgdG8gYW5vdGhlciBhY2NvdW50DQoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoJCWlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50IA0KCQkJJiYgX2Ftb3VudCA+IDANCiAJCSAgIAkmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10NCgkJCSYmIF90byAhPSAweDApCQkJCQkJCQkJCS8vIHVzZSBidXJuKCkgaW5zdGVhZA0KCQkJew0KCQkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX2Ftb3VudDsNCgkJCWJhbGFuY2VzW190b10gKz0gX2Ftb3VudDsNCgkJCVRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7DQogCQkgICAJcmV0dXJuIHRydWU7DQoJCQl9DQoJCQllbHNlIHsgcmV0dXJuIGZhbHNlO30NCiAJCSB9DQoNCgkvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bw0KCS8vIFRoZSB0cmFuc2ZlckZyb20gbWV0aG9kIGlzIHVzZWQgZm9yIGEgd2l0aGRyYXcgd29ya2Zsb3csIGFsbG93aW5nIGNvbnRyYWN0cyB0byBzZW5kDQogCS8vIHRva2VucyBvbiB5b3VyIGJlaGFsZiwgZm9yIGV4YW1wbGUgdG8gImRlcG9zaXQiIHRvIGEgY29udHJhY3QgYWRkcmVzcyBhbmQvb3IgdG8gY2hhcmdlDQogCS8vIGZlZXMgaW4gc3ViLWN1cnJlbmNpZXM7IHRoZSBjb21tYW5kIHNob3VsZCBmYWlsIHVubGVzcyB0aGUgX2Zyb20gYWNjb3VudCBoYXMNCiAJLy8gZGVsaWJlcmF0ZWx5IGF1dGhvcml6ZWQgdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSB2aWEgc29tZSBtZWNoYW5pc207IHdlIHByb3Bvc2UNCiAJLy8gdGhlc2Ugc3RhbmRhcmRpemVkIEFQSXMgZm9yIGFwcHJvdmFsOg0KIAlmdW5jdGlvbiB0cmFuc2ZlckZyb20oIGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykNCgkJew0KCQkJaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50DQoJCQkJJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudA0KCQkJCSYmIF9hbW91bnQgPiAwDQoJCQkJJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dDQoJCQkJJiYgX3RvICE9IDB4MCkJCQkJCQkJCQkJLy8gdXNlIGJ1cm4oKSBpbnN0ZWFkDQoJCQkJCXsNCgkJCQkJYmFsYW5jZXNbX2Zyb21dIC09IF9hbW91bnQ7DQoJCQkJCWFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7DQoJCQkJCWJhbGFuY2VzW190b10gKz0gX2Ftb3VudDsNCgkJCQkJVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7DQoJCQkJCXJldHVybiB0cnVlOw0KCQkJCQl9IGVsc2Uge3JldHVybiBmYWxzZTt9DQoJCX0NCg0KCS8vIEFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50LCBtdWx0aXBsZSB0aW1lcywgdXAgdG8gdGhlIF92YWx1ZSBhbW91bnQuDQoJLy8gSWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4gaXQgb3ZlcndyaXRlcyB0aGUgY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuDQoJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KCQlhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7DQoJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsNCgkJcmV0dXJuIHRydWU7DQoJCX0NCg0KCWZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsNCgkJcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQoJCX0NCg0KCS8vIEVORCBFUkMyMCBmdW5jdGlvbnMgKGMpIEJva2t5UG9vQmFoIDIwMTcuIFRoZSBNSVQgTGljZW5jZS4NCgkNCgkvLyBBZGRpdGlvbmFsIFBhdHJvbiB0b2tlbiBmdW5jdGlvbnMNCgkNCglmdW5jdGlvbiBidXJuKHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoJCQlpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCkgew0KCQkJCWJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7DQoJCQkJX3RvdGFsUGF0cm9uU3VwcGx5IC09IF9hbW91bnQ7DQoJCQkJQnVybihtc2cuc2VuZGVyLCBfYW1vdW50KTsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX0NCgkJCWVsc2Uge3Rocm93O30NCgkJfQ0KDQoJZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KCQlpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUpIHsNCgkJCWJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7DQoJCQlhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQoJCQlfdG90YWxQYXRyb25TdXBwbHkgLT0gX3ZhbHVlOw0KCQkJQnVybihfZnJvbSwgX3ZhbHVlKTsNCgkJCXJldHVybiB0cnVlOw0KCQl9DQoJCWVsc2Uge3Rocm93O30NCgl9DQoNCgkvLyBFdGhhcnQgdmFyaWFibGVzDQogICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBhZGRyZXNzKSBwdWJsaWMgU0hBMjU2SGFzaFJlZ2lzdGVyOwkJLy8gUmVnaXN0ZXIgb2YgYWxsIFNIQTI1NiBIYXNoZXMNCgltYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhcHByb3ZlZEZhY3RvcmllczsJCQkvLyBSZWdpc3RlciBvZiBhbGwgYXBwcm92ZWQgZmFjdG9yeSBjb250cmFjdHMNCgltYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhcHByb3ZlZENvbnRyYWN0czsJCQkvLyBSZWdpc3RlciBvZiBhbGwgYXBwcm92ZWQgYXJ0d29yayBjb250cmFjdHMNCgltYXBwaW5nIChhZGRyZXNzID0+IGFkZHJlc3MpIHB1YmxpYyByZWZlcnJlZDsJCQkJLy8gUmVnaXN0ZXIgb2YgYWxsIHJlZmVycmVycyAocmVmZXJyZWUgPT4gcmVmZXJyZXIpIHVzZWQgZm9yIHRoZSBhZmZpbGlhdGUgcHJvZ3JhbQ0KCW1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGNhbnRTZXRSZWZlcnJlcjsJCQkvLyBSZWZlcnJlciBmb3IgYW4gYXJ0aXN0IGhhcyB0byBiZSBzZXQgX2JlZm9yZV8gdGhlIGZpcnN0IHBpZWNlIGhhcyBiZWVuIGNyZWF0ZWQgYnkgYW4gYWRkcmVzcw0KDQoJc3RydWN0IGFydHdvcmsgew0KCQlieXRlczMyIFNIQTI1Nkhhc2g7DQoJCXVpbnQyNTYgZWRpdGlvblNpemU7DQoJCXN0cmluZyB0aXRsZTsNCgkJc3RyaW5nIGZpbGVMaW5rOw0KCQl1aW50MjU2IG93bmVyQ29tbWlzc2lvbjsNCgkJYWRkcmVzcyBhcnRpc3Q7DQoJCWFkZHJlc3MgZmFjdG9yeTsNCgkJYm9vbCBpc0luZGV4ZWQ7DQoJCWJvb2wgaXNPdXJvYm9yb3M7fQ0KCQ0KCW1hcHBpbmcgKGFkZHJlc3MgPT4gYXJ0d29yaykgcHVibGljIGFydHdvcmtSZWdpc3RlcjsJCS8vIFJlZ2lzdGVyIG9mIGFsbCBhcnR3b3JrcyBhbmQgdGhlaXIgZGV0YWlscw0KDQoJLy8gQW4gaW5kZXhlZCByZWdpc3RlciBvZiBhbGwgb2YgYW4gYXJ0aXN0J3MgYXJ0d29ya3MNCgltYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSkgcHVibGljIGFydGlzdHNBcnR3b3JrczsJLy8gRW50ZXIgYXJ0aXN0IGFkZHJlc3MgYW5kIGEgcnVubmluZyBudW1iZXIgdG8gZ2V0IHRoZSBhcnRpc3QncyBhcnR3b3JrIGFkZHJlc3Nlcy4NCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGFydGlzdHNBcnR3b3JrQ291bnQ7CQkJCQkJLy8gQSBydW5uaW5nIG51bWJlciBjb3VudGluZyBhbiBhcnRpc3QncyBhcnR3b3Jrcw0KCW1hcHBpbmcoYWRkcmVzcyA9PiBhZGRyZXNzKSBwdWJsaWMgYXJ0d29ya3NGYWN0b3J5OwkJCQkJCQkvLyBNYXBzIGFsbCBhcnR3b3JrcyB0byB0aGVpciByZXNwZWN0aXZlIGZhY3RvcnkgY29udHJhY3RzDQoNCgl1aW50MjU2IGFydHdvcmtDb3VudDsJCQkJCQkJCQkJLy8gS2VlcHMgdHJhY2sgb2YgdGhlIG51bWJlciBvZiBhcnR3b3JrIGNvbnRyYWN0cyBpbiB0aGUgbmV0d29yaw0KCQ0KCW1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGFydHdvcmtJbmRleDsJCQkvLyBBbiBpbmRleCBvZiBhbGwgdGhlIGFydHdvcmsgY29udHJhY3RzIGluIHRoZSBuZXR3b3JrDQoNCglhZGRyZXNzIHB1YmxpYyBvd25lcjsJCQkJCQkJCQkJLy8gVGhlIGFkZHJlc3Mgb2YgdGhlIGNvbnRyYWN0IG93bmVyDQoJDQoJdWludDI1NiBwdWJsaWMgZG9uYXRpb25NdWx0aXBsaWVyOw0KDQogICAgLy8gRnVuY3Rpb25zIHdpdGggdGhpcyBtb2RpZmllciBjYW4gb25seSBiZSBleGVjdXRlZCBieSBhIHNwZWNpZmljIGFkZHJlc3MNCiAgICBtb2RpZmllciBvbmx5QnkgKGFkZHJlc3MgX2FjY291bnQpDQogICAgew0KICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gX2FjY291bnQpOw0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vIEZ1bmN0aW9ucyB3aXRoIHRoaXMgbW9kaWZpZXIgY2FuIG9ubHkgYmUgZXhlY3V0ZWQgYnkgYXBwcm92ZWQgZmFjdG9yeSBjb250cmFjdHMNCiAgICBtb2RpZmllciByZWdpc3RlcmRGYWN0b3JpZXNPbmx5ICgpDQogICAgew0KICAgICAgICByZXF1aXJlKGFwcHJvdmVkRmFjdG9yaWVzW21zZy5zZW5kZXJdKTsNCiAgICAgICAgXzsNCiAgICB9DQoNCgltb2RpZmllciBhcHByb3ZlZENvbnRyYWN0c09ubHkgKCkNCgl7DQoJCXJlcXVpcmUoYXBwcm92ZWRDb250cmFjdHNbbXNnLnNlbmRlcl0pOw0KCQlfOw0KCX0NCg0KCWZ1bmN0aW9uIHNldFJlZmVycmVyIChhZGRyZXNzIF9yZWZlcnJlcikNCgkJew0KCQkJaWYgKHJlZmVycmVkW21zZy5zZW5kZXJdID09IDB4MCAmJiAhY2FudFNldFJlZmVycmVyW21zZy5zZW5kZXJdKQ0KCQkJew0KCQkJCXJlZmVycmVkW21zZy5zZW5kZXJdID0gX3JlZmVycmVyOw0KCQkJfQ0KCQl9DQoNCglmdW5jdGlvbiBSZWdpc3RyYXIgKCkgew0KCQlvd25lciA9IG1zZy5zZW5kZXI7DQoJCWRvbmF0aW9uTXVsdGlwbGllciA9IDEwMDsNCgl9DQoNCgkvLyBhbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gYXNzaWduIGEgbmV3IG93bmVyDQoJZnVuY3Rpb24gY2hhbmdlT3duZXIgKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlCeSAob3duZXIpIA0KCQl7DQoJCQlvd25lciA9IG5ld093bmVyOw0KCQl9DQoNCglmdW5jdGlvbiBpc3N1ZVBhdHJvbnMgKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIGFwcHJvdmVkQ29udHJhY3RzT25seQ0KCQl7DQoJCQliYWxhbmNlc1tfdG9dICs9IF9hbW91bnQ7DQoJCQlfdG90YWxQYXRyb25TdXBwbHkgKz0gX2Ftb3VudDsNCgkJfQ0KDQoJZnVuY3Rpb24gc2V0RG9uYXRpb25SZXdhcmQgKHVpbnQyNTYgX211bHRpcGxpZXIpIG9ubHlCeSAob3duZXIpDQoJCXsNCgkJCWRvbmF0aW9uTXVsdGlwbGllciA9IF9tdWx0aXBsaWVyOw0KCQl9DQoNCglmdW5jdGlvbiBkb25hdGUgKCkgcGF5YWJsZQ0KCQl7DQoJCQliYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBtc2cudmFsdWUgKiBkb25hdGlvbk11bHRpcGxpZXI7DQoJCQlfdG90YWxQYXRyb25TdXBwbHkgKz0gbXNnLnZhbHVlICogZG9uYXRpb25NdWx0aXBsaWVyOw0KCQl9DQoNCglmdW5jdGlvbiByZWdpc3RlckFydHdvcmsgKGFkZHJlc3MgX2NvbnRyYWN0LCBieXRlczMyIF9TSEEyNTZIYXNoLCB1aW50MjU2IF9lZGl0aW9uU2l6ZSwgc3RyaW5nIF90aXRsZSwgc3RyaW5nIF9maWxlTGluaywgdWludDI1NiBfb3duZXJDb21taXNzaW9uLCBhZGRyZXNzIF9hcnRpc3QsIGJvb2wgX2luZGV4ZWQsIGJvb2wgX291cm9ib3JvcykgcmVnaXN0ZXJkRmFjdG9yaWVzT25seQ0KCQl7DQoJCWlmIChTSEEyNTZIYXNoUmVnaXN0ZXJbX1NIQTI1Nkhhc2hdID09IDB4MCkgew0KCQkgICAJU0hBMjU2SGFzaFJlZ2lzdGVyW19TSEEyNTZIYXNoXSA9IF9jb250cmFjdDsNCgkJCWFwcHJvdmVkQ29udHJhY3RzW19jb250cmFjdF0gPSB0cnVlOw0KCQkJY2FudFNldFJlZmVycmVyW19hcnRpc3RdID0gdHJ1ZTsNCgkJCWFydHdvcmtSZWdpc3RlcltfY29udHJhY3RdLlNIQTI1Nkhhc2ggPSBfU0hBMjU2SGFzaDsNCgkJCWFydHdvcmtSZWdpc3RlcltfY29udHJhY3RdLmVkaXRpb25TaXplID0gX2VkaXRpb25TaXplOw0KCQkJYXJ0d29ya1JlZ2lzdGVyW19jb250cmFjdF0udGl0bGUgPSBfdGl0bGU7DQoJCQlhcnR3b3JrUmVnaXN0ZXJbX2NvbnRyYWN0XS5maWxlTGluayA9IF9maWxlTGluazsNCgkJCWFydHdvcmtSZWdpc3RlcltfY29udHJhY3RdLm93bmVyQ29tbWlzc2lvbiA9IF9vd25lckNvbW1pc3Npb247DQoJCQlhcnR3b3JrUmVnaXN0ZXJbX2NvbnRyYWN0XS5hcnRpc3QgPSBfYXJ0aXN0Ow0KCQkJYXJ0d29ya1JlZ2lzdGVyW19jb250cmFjdF0uZmFjdG9yeSA9IG1zZy5zZW5kZXI7DQoJCQlhcnR3b3JrUmVnaXN0ZXJbX2NvbnRyYWN0XS5pc0luZGV4ZWQgPSBfaW5kZXhlZDsNCgkJCWFydHdvcmtSZWdpc3RlcltfY29udHJhY3RdLmlzT3Vyb2Jvcm9zID0gX291cm9ib3JvczsNCgkJCWFydHdvcmtJbmRleFthcnR3b3JrQ291bnRdID0gX2NvbnRyYWN0Ow0KCQkJYXJ0aXN0c0FydHdvcmtzW19hcnRpc3RdW2FydGlzdHNBcnR3b3JrQ291bnRbX2FydGlzdF1dID0gX2NvbnRyYWN0Ow0KCQkJYXJ0aXN0c0FydHdvcmtDb3VudFtfYXJ0aXN0XSsrOw0KCQkJYXJ0d29ya3NGYWN0b3J5W19jb250cmFjdF0gPSBtc2cuc2VuZGVyOw0KCQkJTmV3QXJ0d29yayAoX2NvbnRyYWN0LCBfU0hBMjU2SGFzaCwgX2VkaXRpb25TaXplLCBfdGl0bGUsIF9maWxlTGluaywgX293bmVyQ29tbWlzc2lvbiwgX2FydGlzdCwgX2luZGV4ZWQsIF9vdXJvYm9yb3MpOw0KCQkJYXJ0d29ya0NvdW50Kys7DQoJCQl9DQoJCQllbHNlIHt0aHJvdzt9DQoJCX0NCg0KCWZ1bmN0aW9uIGlzU0hBMjU2SGFzaFJlZ2lzdGVyZWQgKGJ5dGVzMzIgX1NIQTI1Nkhhc2gpIHJldHVybnMgKGJvb2wgX3JlZ2lzdGVyZWQpDQoJCXsNCgkJaWYgKFNIQTI1Nkhhc2hSZWdpc3RlcltfU0hBMjU2SGFzaF0gPT0gMHgwKQ0KCQkJe3JldHVybiBmYWxzZTt9DQoJCWVsc2Uge3JldHVybiB0cnVlO30NCgkJfQ0KDQoNCglmdW5jdGlvbiBhcHByb3ZlRmFjdG9yeUNvbnRyYWN0IChhZGRyZXNzIF9mYWN0b3J5Q29udHJhY3RBZGRyZXNzLCBib29sIF9hcHByb3ZlZCkgb25seUJ5IChvd25lcikNCgkJew0KCQkJYXBwcm92ZWRGYWN0b3JpZXNbX2ZhY3RvcnlDb250cmFjdEFkZHJlc3NdID0gX2FwcHJvdmVkOw0KCQl9DQoNCglmdW5jdGlvbiBpc0ZhY3RvcnlBcHByb3ZlZCAoYWRkcmVzcyBfZmFjdG9yeSkgcmV0dXJucyAoYm9vbCBfYXBwcm92ZWQpDQoJCXsNCgkJCWlmIChhcHByb3ZlZEZhY3Rvcmllc1tfZmFjdG9yeV0pDQoJCQl7DQoJCQkJcmV0dXJuIHRydWU7DQoJCQl9DQoJCQllbHNlIHtyZXR1cm4gZmFsc2U7fQ0KCQl9DQoNCglmdW5jdGlvbiB3aXRoZHJhd0Z1bmRzICh1aW50MjU2IF9FVEhBbW91bnQsIGFkZHJlc3MgX3RvKSBvbmx5QnkgKG93bmVyKQ0KCQl7DQoJCQlpZiAodGhpcy5iYWxhbmNlID49IF9FVEhBbW91bnQpDQoJCQl7DQoJCQkJX3RvLnRyYW5zZmVyKF9FVEhBbW91bnQpOw0KCQkJfQ0KCQkJZWxzZSB7dGhyb3c7fQ0KCQl9DQoNCglmdW5jdGlvbiB0cmFuc2ZlckJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2Ftb3VudCwgYWRkcmVzcyBfdG8pIG9ubHlCeSAob3duZXIpIA0KCQl7DQoJCQlJbnRlcmZhY2UgYyA9IEludGVyZmFjZShfY29udHJhY3QpOw0KCQkJYy50cmFuc2ZlcihfdG8sIF9hbW91bnQpOw0KCQl9DQoNCglmdW5jdGlvbiB0cmFuc2ZlckluZGV4ZWRCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCB1aW50MjU2IF9pbmRleCwgYWRkcmVzcyBfdG8pIG9ubHlCeSAob3duZXIpDQoJCXsNCgkJCUludGVyZmFjZSBjID0gSW50ZXJmYWNlKF9jb250cmFjdCk7DQoJCQljLnRyYW5zZmVySW5kZXhlZChfdG8sIF9pbmRleCk7DQoJCX0NCg0KCWZ1bmN0aW9uIGFwcHJvdmVCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpIG9ubHlCeSAob3duZXIpDQoJCXsNCgkJCUludGVyZmFjZSBjID0gSW50ZXJmYWNlKF9jb250cmFjdCk7DQoJCQljLmFwcHJvdmUoX3NwZW5kZXIsIF9hbW91bnQpOw0KCQl9CQ0KDQoJZnVuY3Rpb24gYXBwcm92ZUluZGV4ZWRCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9pbmRleCkgb25seUJ5IChvd25lcikNCgkJew0KCQkJSW50ZXJmYWNlIGMgPSBJbnRlcmZhY2UoX2NvbnRyYWN0KTsNCgkJCWMuYXBwcm92ZUluZGV4ZWQoX3NwZW5kZXIsIF9pbmRleCk7DQoJCX0NCg0KCWZ1bmN0aW9uIGJ1cm5CeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCB1aW50MjU2IF9hbW91bnQpIG9ubHlCeSAob3duZXIpDQoJCXsNCgkJCUludGVyZmFjZSBjID0gSW50ZXJmYWNlKF9jb250cmFjdCk7DQoJCQljLmJ1cm4oX2Ftb3VudCk7DQoJCX0NCg0KCWZ1bmN0aW9uIGJ1cm5Gcm9tQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgdWludDI1NiBfYW1vdW50LCBhZGRyZXNzIF9mcm9tKSBvbmx5QnkgKG93bmVyKQ0KCQl7DQoJCQlJbnRlcmZhY2UgYyA9IEludGVyZmFjZShfY29udHJhY3QpOw0KCQkJYy5idXJuRnJvbSAoX2Zyb20sIF9hbW91bnQpOw0KCQl9DQoNCglmdW5jdGlvbiBidXJuSW5kZXhlZEJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2luZGV4KSBvbmx5QnkgKG93bmVyKQ0KCQl7DQoJCQlJbnRlcmZhY2UgYyA9IEludGVyZmFjZShfY29udHJhY3QpOw0KCQkJYy5idXJuSW5kZXhlZChfaW5kZXgpOw0KCQl9DQoNCglmdW5jdGlvbiBidXJuSW5kZXhlZEZyb21CeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF9pbmRleCkgb25seUJ5IChvd25lcikNCgkJew0KCQkJSW50ZXJmYWNlIGMgPSBJbnRlcmZhY2UoX2NvbnRyYWN0KTsNCgkJCWMuYnVybkluZGV4ZWRGcm9tKF9mcm9tLCBfaW5kZXgpOw0KCQl9DQoNCglmdW5jdGlvbiBvZmZlclBpZWNlRm9yU2FsZUJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX3ByaWNlKSBvbmx5QnkgKG93bmVyKQ0KCQl7DQoJCQlJbnRlcmZhY2UgYyA9IEludGVyZmFjZShfY29udHJhY3QpOw0KCQkJYy5vZmZlclBpZWNlRm9yU2FsZShfcHJpY2UpOw0KCQl9DQoNCglmdW5jdGlvbiBmaWxsQmlkQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCkgb25seUJ5IChvd25lcikJCQkJCQkJLy8gRmlsbCBhIGJpZCB3aXRoIGFuIHVuaW5kZXhlZCBwaWVjZSBvd25lZCBieSB0aGUgcmVnaXN0cmFyDQoJCXsNCgkJCUludGVyZmFjZSBjID0gSW50ZXJmYWNlKF9jb250cmFjdCk7DQoJCQljLmZpbGxCaWQoKTsNCgkJfQ0KDQoJZnVuY3Rpb24gY2FuY2VsU2FsZUJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QpIG9ubHlCeSAob3duZXIpCQkJCQkJCS8vIENhbmNlbCB0aGUgc2FsZSBvZiBhbiB1bmluZGV4ZWQgcGllY2Ugb3duZWQgYnkgdGhlIHJlZ2lzdHJhcg0KCQl7DQoJCQlJbnRlcmZhY2UgYyA9IEludGVyZmFjZShfY29udHJhY3QpOw0KCQkJYy5jYW5jZWxTYWxlKCk7DQoJCX0NCg0KCWZ1bmN0aW9uIG9mZmVySW5kZXhlZFBpZWNlRm9yU2FsZUJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2luZGV4LCB1aW50MjU2IF9wcmljZSkgb25seUJ5IChvd25lcikJCQkvLyBTZWxsIGFuIGluZGV4ZWQgcGllY2Ugb3duZWQgYnkgdGhlIHJlZ2lzdHJhci4NCgkJew0KCQkJSW50ZXJmYWNlIGMgPSBJbnRlcmZhY2UoX2NvbnRyYWN0KTsNCgkJCWMub2ZmZXJJbmRleGVkUGllY2VGb3JTYWxlKF9pbmRleCwgX3ByaWNlKTsNCgkJfQ0KDQoJZnVuY3Rpb24gZmlsbEluZGV4ZWRCaWRCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCB1aW50MjU2IF9pbmRleCkgb25seUJ5IChvd25lcikJCQkJCS8vIEZpbGwgYSBiaWQgd2l0aCBhbiBpbmRleGVkIHBpZWNlIG93bmVkIGJ5IHRoZSByZWdpc3RyYXINCgkJew0KCQkJSW50ZXJmYWNlIGMgPSBJbnRlcmZhY2UoX2NvbnRyYWN0KTsNCgkJCWMuZmlsbEluZGV4ZWRCaWQoX2luZGV4KTsNCgkJfQ0KDQoJZnVuY3Rpb24gY2FuY2VsSW5kZXhlZFNhbGVCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0KSBvbmx5QnkgKG93bmVyKQkJCQkJCQkJLy8gQ2FuY2VsIHRoZSBzYWxlIG9mIGFuIHVuaW5kZXhlZCBwaWVjZSBvd25lZCBieSB0aGUgcmVnaXN0cmFyDQoJCXsNCgkJCUludGVyZmFjZSBjID0gSW50ZXJmYWNlKF9jb250cmFjdCk7DQoJCQljLmNhbmNlbEluZGV4ZWRTYWxlKCk7DQoJCX0NCgkNCglmdW5jdGlvbigpIHBheWFibGUNCgkJew0KCQkJaWYgKCFhcHByb3ZlZENvbnRyYWN0c1ttc2cuc2VuZGVyXSkge3Rocm93O30JCQkJCQkvLyB1c2UgZG9uYXRlICgpIGZvciBkb25hdGlvbnMgYW5kIHlvdSB3aWxsIGdldCBkb25hdGlvbk11bHRpcGxpZXIgKiB5b3VyIGRvbmF0aW9uIGluIFBhdHJvbiB0b2tlbnMuIFlheSENCgkJfQ0KDQoJLy8gU2VtaSB1aW52ZXJzYWwgY2FsbCBmdW5jdGlvbiBmb3IgdW5mb3JzZWVuIGZ1dHVyZSBFdGhhcnQgbmV0d29yayBjb250cmFjdCB0eXBlcyBhbmQgdXNlIGNhc2VzLiBTdHJpbmcgZm9ybWF0OiAiPGZ1bmN0aW9uTmFtZT4oYWRkcmVzcyxhZGRyZXNzLHVpbnQyNTYsdWludDI1Nixib29sLHN0cmluZyxieXRlczMyKSINCglmdW5jdGlvbiBjYWxsQ29udHJhY3RGdW5jdGlvbkJ5QWRkcmVzcyhhZGRyZXNzIF9jb250cmFjdCwgc3RyaW5nIGZ1bmN0aW9uTmFtZUFuZFR5cGVzLCBhZGRyZXNzIF9hZGRyZXNzMSwgYWRkcmVzcyBfYWRkcmVzczIsIHVpbnQyNTYgX3ZhbHVlMSwgdWludDI1NiBfdmFsdWUyLCBib29sIF9ib29sLCBzdHJpbmcgX3N0cmluZywgYnl0ZXMzMiBfYnl0ZXMzMikgb25seUJ5IChvd25lcikNCgl7DQoJCWlmKCFfY29udHJhY3QuY2FsbChieXRlczQoc2hhMyhmdW5jdGlvbk5hbWVBbmRUeXBlcykpLF9hZGRyZXNzMSwgX2FkZHJlc3MyLCBfdmFsdWUxLCBfdmFsdWUyLCBfYm9vbCwgX3N0cmluZywgX2J5dGVzMzIpKSB7dGhyb3c7fQ0KCX0NCn0='