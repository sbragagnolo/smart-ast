base 64 content
base64registrar3
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyogRXRoYXJ0IHVuaW5kZXhlZCBGYWN0b3J5IENvbnRyYWN0Og0KDQoJRXRoYXJ0IEFSQ0hJVEVDVFVSRQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkJCQkJCV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQoJCQkJCQlWCQkJCQkJCQkJCVYNCglDb250cm9sbGVyIC0tPiBSZWdpc3RyYXIgPC0tPiBGYWN0b3J5IENvbnRyYWN0MSAtLT4gQXJ0d29yayBDb250cmFjdDENCgkJCQkJCQkJICBGYWN0b3J5IENvbnRyYWN0MgkgICAgQXJ0d29yayBDb250cmFjdDINCgkJCQkJCQkJICAJCS4uLgkJCQkJLi4uDQoJCQkJCQkJCSAgRmFjdG9yeSBDb250cmFjdE4JICAgIEFydHdvcmsgQ29udHJhY3RODQoNCglDb250cm9sbGVyOiBUaGUgY29udHJvbGVyIGNvbnRyYWN0IGlzIHRoZSBvd25lciBvZiB0aGUgUmVnaXN0cmFyIGNvbnRyYWN0IGFuZCBjYW4NCgkJLSBTZXQgYSBuZXcgb3duZXINCgkJLSBDb250cm9sbCB0aGUgYXNzZXRzIG9mIHRoZSBSZWdpc3RyYXIgKHdpdGhkcmF3IEVUSCwgdHJhbnNmZXIsIHNlbGwsIGJ1cm4gcGllY2VzIG93bmVkIGJ5IHRoZSBSZWdpc3RyYXIpDQoJCS0gVGhlIHBsYW4gaXMgdG8gcmVwbGFjZSB0aGUgY29udHJvbGxlciBjb250cmFjdCB3aXRoIGEgREFPIGluIHByZXBlcmF0aW9uIGZvciBhIHBvc3NpYmxlIElDTw0KCQ0KCVJlZ2lzdHJhcjoNCgkJLSBUaGUgUmVnaXN0cmFyIGNvbnRyYWN0IGF0Y3MgYXMgdGhlIGNlbnRyYWwgcmVnaXN0cnkgZm9yIGFsbCBzaGEyNTYgaGFzaGVzIGluIHRoZSBFdGhhcnQgZmFjdG9yeSBjb250cmFjdCBuZXR3b3JrLg0KCQktIEFwcHJvdmVkIEZhY3RvcnkgQ29udHJhY3RzIGNhbiByZWdpc3RlciBzaGEyNTYgaGFzaGVzIHVzaW5nIHRoZSBSZWdpc3RyYXIgaW50ZXJmYWNlLg0KCQktIDIuNSUgb2YgdGhlIGFydCBwcm9kdWNlZCBhbmQgMi41JSBvZiB0dXJub3ZlciBvZiB0aGUgY29udHJhY3QgbmV0d29yayB3aWxsIGJlIHRyYW5zZmVyZWQgdG8gdGhlIFJlZ2lzdHJhci4NCgkNCglGYWN0b3J5IENvbnRyYWN0czoNCgkJLSBGYWN0b3J5IENvbnRyYWN0cyBjYW4gc3Bhd24gQXJ0d29yayBDb250cmFjdHMgaW4gbGluZSB3aXRoIGFydGlzdHMgc3BlY2lmaWNhdGlvbnMNCgkJLSBGYWN0b3J5IENvbnRyYWN0cyB3aWxsIG9ubHkgc3Bhd24gQXJ0d29yayBDb250cmFjdHMgd2hvJ3Mgc2hhMjU2IGhhc2hlcyBhcmUgdW5pcXVlIHBlciB0aGUgUmVnaXN0cmFyJ3Mgc2hhMjU2IHJlZ2lzdHJ5DQoJCS0gRmFjdG9yeSBDb250cmFjdHMgd2lsbCByZWdpc3RlciBldmVyeSBuZXcgQXJ0d29yayBDb250cmFjdCB3aXRoIGl0J3MgZGV0YWlscyB3aXRoIHRoZSBSZWdpc3RyYXIgY29udHJhY3QNCgkNCglBcnR3b3JrIENvbnRyYWN0czoNCgkJLSBBcnR3b3JrIENvbnRyYWN0cyBhY3QgYXMgbWluaW1hbGlzdCBkZWNlbnRyYWxpemVkIGV4Y2hhbmdlcyBmb3IgdGhlaXIgcGllY2VzIGluIGxpbmUgd2l0aCBzcGVjaWZpZWQgY29uZGl0aW9ucw0KCQktIEFydHdvcmsgQ29udHJhY3RzIHdpbGwgaW50ZXJhY3Qgd2l0aCB0aGUgUmVnaXN0cmFyIHRvIGlzc3VlIGJ1eWVycyBvZiBwaWVjZXMgYSBwcmVkZXRlcm1pbmVkIGFtb3VudCBvZiBQYXRyb24gdG9rZW5zIGJhc2VkIG9uIHRoZSB0cmFuc2FjdGlvbiB2YWx1ZSANCgkJLSBBcnR3b3JrIENvbnRyYWN0cyBjYW4gYmUgaW50ZXJhY3RlZCB3aXRoIGJ5IHRoZSBDb250cm9sbGVyIHZpYSB0aGUgUmVnaXN0cmFyIHVzaW5nIHRoZWlyIGludGVyZmFjZXMgdG8gdHJhbnNmZXIsIHNlbGwsIGJ1cm4gZXRjIHBpZWNlcw0KCQ0KCShjKSBTdGVmYW4gUGVybmFyIDIwMTcgLSBhbGwgcmlnaHRzIHJlc2VydmVkDQoJKGMpIEVSQzIwIGZ1bmN0aW9ucyBCb2treVBvb0JhaCAyMDE3LiBUaGUgTUlUIExpY2VuY2UuDQoqLw0KDQpjb250cmFjdCBJbnRlcmZhY2Ugew0KDQoJLy8gRXRoYXJ0IG5ldHdvcmsgaW50ZXJmYWNlDQoJZnVuY3Rpb24gcmVnaXN0ZXJBcnR3b3JrIChhZGRyZXNzIF9jb250cmFjdCwgYnl0ZXMzMiBfU0hBMjU2SGFzaCwgdWludDI1NiBfZWRpdGlvblNpemUsIHN0cmluZyBfdGl0bGUsIHN0cmluZyBfZmlsZUxpbmssIHVpbnQyNTYgX293bmVyQ29tbWlzc2lvbiwgYWRkcmVzcyBfYXJ0aXN0LCBib29sIF9pbmRleGVkLCBib29sIF9vdXJvYm9yb3MpOw0KCWZ1bmN0aW9uIGlzU0hBMjU2SGFzaFJlZ2lzdGVyZWQgKGJ5dGVzMzIgX1NIQTI1Nkhhc2gpIHJldHVybnMgKGJvb2wgX3JlZ2lzdGVyZWQpOwkJCS8vIENoZWNrIGlmIGEgc2hhMjU2IGhhc2ggaXMgcmVnaXN0YXJlZA0KCWZ1bmN0aW9uIGlzRmFjdG9yeUFwcHJvdmVkIChhZGRyZXNzIF9mYWN0b3J5KSByZXR1cm5zIChib29sIF9hcHByb3ZlZCk7CQkJCQkJLy8gQ2hlY2sgaWYgYW4gYWRkcmVzcyBpcyBhIHJlZ2lzdHJlZCBmYWN0b3J5IGNvbnRyYWN0DQoJZnVuY3Rpb24gaXNzdWVQYXRyb25zIChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KTsJCQkJCQkJCQkJLy8gSXNzdWVzIFBhdHJvbiB0b2tlbnMgYWNjb3JkaW5nIHRvIGNvbmRpdGlvbnMgc3BlY2lmaWVkIGluIGZhY3RvcnkgY29udHJhY3RzDQogICAgZnVuY3Rpb24gYXBwcm92ZUZhY3RvcnlDb250cmFjdCAoYWRkcmVzcyBfZmFjdG9yeUNvbnRyYWN0QWRkcmVzcywgYm9vbCBfYXBwcm92ZWQpOwkJCS8vIEFwcHJvdmVzL2Rpc2FwcHJvdmVzIGZhY3RvcnkgY29udHJhY3RzLg0KCWZ1bmN0aW9uIGNoYW5nZU93bmVyIChhZGRyZXNzIG5ld093bmVyKTsJCQkJCQkJCQkJCQkJLy8gQ2hhbmdlIHRoZSByZWdpc3RyYXIncyBvd25lci4NCg0KCWZ1bmN0aW9uIG9mZmVyUGllY2VGb3JTYWxlQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgdWludDI1NiBfcHJpY2UpOwkJCQkJLy8gU2VsbCBhIHBpZWNlIG93bmVkIGJ5IHRoZSByZWdpc3RyYXIuDQoJZnVuY3Rpb24gb2ZmZXJQaWVjZUZvclNhbGUgKHVpbnQyNTYgX3ByaWNlKTsNCglmdW5jdGlvbiBmaWxsQmlkQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCk7CQkJCQkJCQkJCQkJLy8gRmlsbCBhIGJpZCB3aXRoIGFuIHVuaW5kZXhlZCBwaWVjZSBvd25lZCBieSB0aGUgcmVnaXN0cmFyDQoJZnVuY3Rpb24gZmlsbEJpZCgpOw0KCWZ1bmN0aW9uIGNhbmNlbFNhbGVCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0KTsJCQkJCQkJCQkJCS8vIENhbmNlbCB0aGUgc2FsZSBvZiBhbiB1bmluZGV4ZWQgcGllY2Ugb3duZWQgYnkgdGhlIHJlZ2lzdHJhcg0KCWZ1bmN0aW9uIGNhbmNlbFNhbGUoKTsNCglmdW5jdGlvbiBvZmZlckluZGV4ZWRQaWVjZUZvclNhbGVCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCB1aW50MjU2IF9pbmRleCwgdWludDI1NiBfcHJpY2UpOwkJCQkvLyBTZWxsIGFuIGluZGV4ZWQgcGllY2Ugb3duZWQgYnkgdGhlIHJlZ2lzdHJhci4NCglmdW5jdGlvbiBvZmZlckluZGV4ZWRQaWVjZUZvclNhbGUodWludDI1NiBfaW5kZXgsIHVpbnQyNTYgX3ByaWNlKTsNCglmdW5jdGlvbiBmaWxsSW5kZXhlZEJpZEJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2luZGV4KTsJCQkJCQkvLyBGaWxsIGEgYmlkIHdpdGggYW4gaW5kZXhlZCBwaWVjZSBvd25lZCBieSB0aGUgcmVnaXN0cmFyDQoJZnVuY3Rpb24gZmlsbEluZGV4ZWRCaWQgKHVpbnQyNTYgX2luZGV4KTsNCglmdW5jdGlvbiBjYW5jZWxJbmRleGVkU2FsZUJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QpOwkJCQkJCQkJCS8vIENhbmNlbCB0aGUgc2FsZSBvZiBhbiB1bmluZGV4ZWQgcGllY2Ugb3duZWQgYnkgdGhlIHJlZ2lzdHJhcg0KCWZ1bmN0aW9uIGNhbmNlbEluZGV4ZWRTYWxlKCk7DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2Ftb3VudCwgYWRkcmVzcyBfdG8pOwkJCQkvLyBUcmFuc2ZlcnMgdW5pbmRleGVkIHBpZWNlcyBvd25lZCBieSB0aGUgcmVnaXN0cmFyIGNvbnRyYWN0DQogICAgZnVuY3Rpb24gdHJhbnNmZXJJbmRleGVkQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgdWludDI1NiBfaW5kZXgsIGFkZHJlc3MgX3RvKTsJCS8vIFRyYW5zZmVycyBpbmRleGVkIHBpZWNlcyBvd25lZCBieSB0aGUgcmVnaXN0cmFyIGNvbnRyYWN0DQoJZnVuY3Rpb24gYXBwcm92ZUJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCk7CQkJLy8gU2V0cyBhbiBhbGxvd2FuY2UgZm9yIHVuaW5kZXhlZCBwaWVjZXMgb3duZWQgYnkgdGhlIHJlZ2lzdHJhciBjb250cmFjdA0KCWZ1bmN0aW9uIGFwcHJvdmVJbmRleGVkQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfaW5kZXgpOwkJLy8gU2V0cyBhbiBhbGxvd2FuY2UgZm9yIGluZGV4ZWQgcGllY2VzIG93bmVkIGJ5IHRoZSByZWdpc3RyYXIgY29udHJhY3QNCglmdW5jdGlvbiBidXJuQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgdWludDI1NiBfYW1vdW50KTsJCQkJCQkJCS8vIEJ1cm4gYW4gdW5pbmRleGVkIHBpZWNlIG93bmVkIGJ5IHRoZSByZWdpc3RyYXIgY29udHJhY3QNCglmdW5jdGlvbiBidXJuRnJvbUJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2Ftb3VudCwgYWRkcmVzcyBfZnJvbSk7CQkJCS8vIEJ1cm4gYW4gdW5pbmRleGVkIHBpZWNlIG93bmVkIGJ5IGFubm90aGVyIGFkZHJlc3MNCglmdW5jdGlvbiBidXJuSW5kZXhlZEJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2luZGV4KTsJCQkJCQkJLy8gQnVybiBhbiBpbmRleGVkIHBpZWNlIG93bmVkIGJ5IHRoZSByZWdpc3RyYXIgY29udHJhY3QNCglmdW5jdGlvbiBidXJuSW5kZXhlZEZyb21CeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF9pbmRleCk7CQkvLyBCdXJuIGFuIGluZGV4ZWQgcGllY2Ugb3duZWQgYnkgYW5vdGhlciBhZGRyZXNzDQoNCgkvLyBFUkMyMCBpbnRlcmZhY2UNCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpOwkJCQkJCQkJCS8vIFJldHVybnMgdGhlIHRvdGFsIHN1cHBseSBvZiBhbiBhcnR3b3JrIG9yIHRva2VuDQoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwkJCQkJCQkvLyBSZXR1cm5zIGFuIGFkZHJlc3MnIGJhbGFuY2Ugb2YgYW4gYXJ0d29yayBvciB0b2tlbg0KIAlmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CQkJCQkJCS8vIFRyYW5zZmVycyBwaWVjZXMgb2YgYXJ0IG9yIHRva2VucyB0byBhbiBhZGRyZXNzDQogCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CQkvLyBUcmFuc2ZlcnMgcGllY2VzIG9mIGFydCBvZiB0b2tlbnMgb3duZWQgYnkgYW5vdGhlciBhZGRyZXNzIHRvIGFuIGFkZHJlc3MNCglmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwkJCQkJCS8vIFNldHMgYW4gYWxsb3dhbmNlIGZvciBhbiBhZGRyZXNzDQoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CQkvLyBSZXR1cm5zIHRoZSBhbGxvd2FuY2Ugb2YgYW4gYWRkcmVzcyBmb3IgYW5vdGhlciBhZGRyZXNzDQoNCgkvLyBBZGRpdGlvbmFsIHRva2VuIGZ1bmN0aW9ucw0KCWZ1bmN0aW9uIGJ1cm4odWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwkJCQkJCQkJCQkvLyBCdXJucyAocmVtb3ZlcyBmcm9tIGNpcmN1bGF0aW9uKSB1bmluZGV4ZWQgcGllY2VzIG9mIGFydCBvciB0b2tlbnMuDQoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkvLyBJbiB0aGUgY2FzZSBvZiAnb3Vyb2Jvcm9zJyBwaWVjZXMgdGhpcyBmdW5jdGlvbiBhbHNvIHJldHVybnMgdGhlIHBpZWNlJ3MNCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCS8vIGNvbXBvbmVudHMgdG8gdGhlIG1lc3NhZ2Ugc2VuZGVyDQoJDQoJZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwkJCQkJLy8gQnVybnMgKHJlbW92ZXMgZnJvbSBjaXJjdWxhdGlvbikgdW5pbmRleGVkIHBpZWNlcyBvZiBhcnQgb3IgdG9rZW5zDQoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkvLyBvd25lZCBieSBhbm90aGVyIGFkZHJlc3MuIEluIHRoZSBjYXNlIG9mICdvdXJvYm9yb3MnIHBpZWNlcyB0aGlzDQoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkvLyBmdW5jdGlvbiBhbHNvIHJldHVybnMgdGhlIHBpZWNlJ3MgY29tcG9uZW50cyB0byB0aGUgbWVzc2FnZSBzZW5kZXINCgkNCgkvLyBFeHRlbmRlZCBFUkMyMCBpbnRlcmZhY2UgZm9yIGluZGV4ZWQgcGllY2VzDQoJZnVuY3Rpb24gdHJhbnNmZXJJbmRleGVkIChhZGRyZXNzIF90bywgdWludDI1NiBfX2luZGV4KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwkJCS8vIFRyYW5zZmVycyBhbiBpbmRleGVkIHBpZWNlIG9mIGFydA0KCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbUluZGV4ZWQgKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9pbmRleCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsJLy8gVHJhbnNmZXJzIGFuIGluZGV4ZWQgcGllY2Ugb2YgYXJ0IGZyb20gYW5vdGhlciBhZGRyZXNzDQoJZnVuY3Rpb24gYXBwcm92ZUluZGV4ZWQgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2luZGV4KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwkJCS8vIFNldHMgYW4gYWxsb3dhbmNlIGZvciBhbiBpbmRleGVkIHBpZWNlIG9mIGFydCBmb3IgYW5vdGhlciBhZGRyZXNzDQoJZnVuY3Rpb24gYnVybkluZGV4ZWQgKHVpbnQyNTYgX2luZGV4KTsJCQkJCQkJCQkJCQkJCS8vIEJ1cm5zIChyZW1vdmVzIGZyb20gY2lyY3VsYXRpb24pIGluZGV4ZWQgcGllY2VzIG9mIGFydCBvciB0b2tlbnMuDQoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkvLyBJbiB0aGUgY2FzZSBvZiAnb3Vyb2Jvcm9zJyBwaWVjZXMgdGhpcyBmdW5jdGlvbiBhbHNvIHJldHVybnMgdGhlDQoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkvLyBwaWVjZSdzIGNvbXBvbmVudHMgdG8gdGhlIG1lc3NhZ2Ugc2VuZGVyDQoJDQoJZnVuY3Rpb24gYnVybkluZGV4ZWRGcm9tIChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfaW5kZXgpOwkJCQkJCQkJCS8vIEJ1cm5zIChyZW1vdmVzIGZyb20gY2lyY3VsYXRpb24pIGluZGV4ZWQgcGllY2VzIG9mIGFydCBvciB0b2tlbnMNCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCS8vIG93bmVkIGJ5IGFub3RoZXIgYWRkcmVzcy4gSW4gdGhlIGNhc2Ugb2YgJ291cm9ib3JvcycgcGllY2VzIHRoaXMNCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCS8vIGZ1bmN0aW9uIGFsc28gcmV0dXJucyB0aGUgcGllY2UncyBjb21wb25lbnRzIHRvIHRoZSBtZXNzYWdlIHNlbmRlcg0KDQp9DQoNCmNvbnRyYWN0IFJlZ2lzdHJhciB7DQoNCgkvLyBQYXRyb24gdG9rZW4gRVJDMjAgcHVibGljIHZhcmlhYmxlcw0KCXN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkFSVCI7DQoJc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlBhdHJvbiAtIEV0aGFydCBOZXR3b3JrIFRva2VuIjsNCgl1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsNCgl1aW50MjU2IF90b3RhbFBhdHJvblN1cHBseTsNCg0KCWV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCglldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7DQoJZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50MjU2IF9hbW91bnQpOw0KDQogICAgLy8gUGF0cm9uIHRva2VuIGJhbGFuY2VzIGZvciBlYWNoIGFjY291bnQNCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VzOwkJCQkJCS8vIFBhdHJvbiB0b2tlbiBiYWxhbmNlcw0KDQoJZXZlbnQgTmV3QXJ0d29yayhhZGRyZXNzIF9jb250cmFjdCwgYnl0ZXMzMiBfU0hBMjU2SGFzaCwgdWludDI1NiBfZWRpdGlvblNpemUsIHN0cmluZyBfdGl0bGUsIHN0cmluZyBfZmlsZUxpbmssIHVpbnQyNTYgX293bmVyQ29tbWlzc2lvbiwgYWRkcmVzcyBfYXJ0aXN0LCBib29sIF9pbmRleGVkLCBib29sIF9vdXJvYm9yb3MpOw0KDQoNCiAJLy8gT3duZXIgb2YgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IG9mIFBhdHJvbiB0b2tlbnMgdG8gYW5vdGhlciBhY2NvdW50DQogCW1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwkJCS8vIFBhdHJvbiB0b2tlbiBhbGxvd2FuY2VzDQoJDQoJLy8gQkVHSU4gRVJDMjAgZnVuY3Rpb25zIChjKSBCb2treVBvb0JhaCAyMDE3LiBUaGUgTUlUIExpY2VuY2UuDQoNCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxQYXRyb25TdXBwbHkpIHsNCgkJdG90YWxQYXRyb25TdXBwbHkgPSBfdG90YWxQYXRyb25TdXBwbHk7DQoJCX0NCg0KCS8vIFdoYXQgaXMgdGhlIGJhbGFuY2Ugb2YgYSBwYXJ0aWN1bGFyIGFjY291bnQ/DQoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsNCiAJCXJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KCQl9DQoNCgkvLyBUcmFuc2ZlciB0aGUgYmFsYW5jZSBmcm9tIG93bmVyJ3MgYWNjb3VudCB0byBhbm90aGVyIGFjY291bnQNCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCgkJaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQgDQoJCQkmJiBfYW1vdW50ID4gMA0KIAkJICAgCSYmIGJhbGFuY2VzW190b10gKyBfYW1vdW50ID4gYmFsYW5jZXNbX3RvXQ0KCQkJJiYgX3RvICE9IDB4MCkJCQkJCQkJCQkJLy8gdXNlIGJ1cm4oKSBpbnN0ZWFkDQoJCQl7DQoJCQliYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfYW1vdW50Ow0KCQkJYmFsYW5jZXNbX3RvXSArPSBfYW1vdW50Ow0KCQkJVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsNCiAJCSAgIAlyZXR1cm4gdHJ1ZTsNCgkJCX0NCgkJCWVsc2UgeyByZXR1cm4gZmFsc2U7fQ0KIAkJIH0NCg0KCS8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgZnJvbSBhZGRyZXNzIF9mcm9tIHRvIGFkZHJlc3MgX3RvDQoJLy8gVGhlIHRyYW5zZmVyRnJvbSBtZXRob2QgaXMgdXNlZCBmb3IgYSB3aXRoZHJhdyB3b3JrZmxvdywgYWxsb3dpbmcgY29udHJhY3RzIHRvIHNlbmQNCiAJLy8gdG9rZW5zIG9uIHlvdXIgYmVoYWxmLCBmb3IgZXhhbXBsZSB0byAiZGVwb3NpdCIgdG8gYSBjb250cmFjdCBhZGRyZXNzIGFuZC9vciB0byBjaGFyZ2UNCiAJLy8gZmVlcyBpbiBzdWItY3VycmVuY2llczsgdGhlIGNvbW1hbmQgc2hvdWxkIGZhaWwgdW5sZXNzIHRoZSBfZnJvbSBhY2NvdW50IGhhcw0KIAkvLyBkZWxpYmVyYXRlbHkgYXV0aG9yaXplZCB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlIHZpYSBzb21lIG1lY2hhbmlzbTsgd2UgcHJvcG9zZQ0KIAkvLyB0aGVzZSBzdGFuZGFyZGl6ZWQgQVBJcyBmb3IgYXBwcm92YWw6DQogCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbSggYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQ0KCQl7DQoJCQlpZiAoYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQNCgkJCQkmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50DQoJCQkJJiYgX2Ftb3VudCA+IDANCgkJCQkmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10NCgkJCQkmJiBfdG8gIT0gMHgwKQkJCQkJCQkJCQkvLyB1c2UgYnVybigpIGluc3RlYWQNCgkJCQkJew0KCQkJCQliYWxhbmNlc1tfZnJvbV0gLT0gX2Ftb3VudDsNCgkJCQkJYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX2Ftb3VudDsNCgkJCQkJYmFsYW5jZXNbX3RvXSArPSBfYW1vdW50Ow0KCQkJCQlUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsNCgkJCQkJcmV0dXJuIHRydWU7DQoJCQkJCX0gZWxzZSB7cmV0dXJuIGZhbHNlO30NCgkJfQ0KDQoJLy8gQWxsb3cgX3NwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSB5b3VyIGFjY291bnQsIG11bHRpcGxlIHRpbWVzLCB1cCB0byB0aGUgX3ZhbHVlIGFtb3VudC4NCgkvLyBJZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2FpbiBpdCBvdmVyd3JpdGVzIHRoZSBjdXJyZW50IGFsbG93YW5jZSB3aXRoIF92YWx1ZS4NCglmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoJCWFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsNCgkJQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOw0KCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KDQoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgew0KCQlyZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCgkJfQ0KDQoJLy8gRU5EIEVSQzIwIGZ1bmN0aW9ucyAoYykgQm9ra3lQb29CYWggMjAxNy4gVGhlIE1JVCBMaWNlbmNlLg0KCQ0KCS8vIEFkZGl0aW9uYWwgUGF0cm9uIHRva2VuIGZ1bmN0aW9ucw0KCQ0KCWZ1bmN0aW9uIGJ1cm4odWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCgkJCWlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50KSB7DQoJCQkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX2Ftb3VudDsNCgkJCQlfdG90YWxQYXRyb25TdXBwbHkgLT0gX2Ftb3VudDsNCgkJCQlCdXJuKG1zZy5zZW5kZXIsIF9hbW91bnQpOw0KCQkJCXJldHVybiB0cnVlOw0KCQkJfQ0KCQkJZWxzZSB7dGhyb3c7fQ0KCQl9DQoNCglmdW5jdGlvbiBidXJuRnJvbShhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoJCWlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSkgew0KCQkJYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsNCgkJCWFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCgkJCV90b3RhbFBhdHJvblN1cHBseSAtPSBfdmFsdWU7DQoJCQlCdXJuKF9mcm9tLCBfdmFsdWUpOw0KCQkJcmV0dXJuIHRydWU7DQoJCX0NCgkJZWxzZSB7dGhyb3c7fQ0KCX0NCg0KCS8vIEV0aGFydCB2YXJpYWJsZXMNCiAgICBtYXBwaW5nIChieXRlczMyID0+IGFkZHJlc3MpIHB1YmxpYyBTSEEyNTZIYXNoUmVnaXN0ZXI7CQkvLyBSZWdpc3RlciBvZiBhbGwgU0hBMjU2IEhhc2hlcw0KCW1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFwcHJvdmVkRmFjdG9yaWVzOwkJCS8vIFJlZ2lzdGVyIG9mIGFsbCBhcHByb3ZlZCBmYWN0b3J5IGNvbnRyYWN0cw0KCW1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFwcHJvdmVkQ29udHJhY3RzOwkJCS8vIFJlZ2lzdGVyIG9mIGFsbCBhcHByb3ZlZCBhcnR3b3JrIGNvbnRyYWN0cw0KCW1hcHBpbmcgKGFkZHJlc3MgPT4gYWRkcmVzcykgcHVibGljIHJlZmVycmVkOwkJCQkvLyBSZWdpc3RlciBvZiBhbGwgcmVmZXJyZXJzIChyZWZlcnJlZSA9PiByZWZlcnJlcikgdXNlZCBmb3IgdGhlIGFmZmlsaWF0ZSBwcm9ncmFtDQoJbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgY2FudFNldFJlZmVycmVyOwkJCS8vIFJlZmVycmVyIGZvciBhbiBhcnRpc3QgaGFzIHRvIGJlIHNldCBfYmVmb3JlXyB0aGUgZmlyc3QgcGllY2UgaGFzIGJlZW4gY3JlYXRlZCBieSBhbiBhZGRyZXNzDQoNCglzdHJ1Y3QgYXJ0d29yayB7DQoJCWJ5dGVzMzIgU0hBMjU2SGFzaDsNCgkJdWludDI1NiBlZGl0aW9uU2l6ZTsNCgkJc3RyaW5nIHRpdGxlOw0KCQlzdHJpbmcgZmlsZUxpbms7DQoJCXVpbnQyNTYgb3duZXJDb21taXNzaW9uOw0KCQlhZGRyZXNzIGFydGlzdDsNCgkJYWRkcmVzcyBmYWN0b3J5Ow0KCQlib29sIGlzSW5kZXhlZDsNCgkJYm9vbCBpc091cm9ib3Jvczt9DQoJDQoJbWFwcGluZyAoYWRkcmVzcyA9PiBhcnR3b3JrKSBwdWJsaWMgYXJ0d29ya1JlZ2lzdGVyOwkJLy8gUmVnaXN0ZXIgb2YgYWxsIGFydHdvcmtzIGFuZCB0aGVpciBkZXRhaWxzDQoNCgkvLyBBbiBpbmRleGVkIHJlZ2lzdGVyIG9mIGFsbCBvZiBhbiBhcnRpc3QncyBhcnR3b3Jrcw0KCW1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpKSBwdWJsaWMgYXJ0aXN0c0FydHdvcmtzOwkvLyBFbnRlciBhcnRpc3QgYWRkcmVzcyBhbmQgYSBydW5uaW5nIG51bWJlciB0byBnZXQgdGhlIGFydGlzdCdzIGFydHdvcmsgYWRkcmVzc2VzLg0KCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYXJ0aXN0c0FydHdvcmtDb3VudDsJCQkJCQkvLyBBIHJ1bm5pbmcgbnVtYmVyIGNvdW50aW5nIGFuIGFydGlzdCdzIGFydHdvcmtzDQoJbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3MpIHB1YmxpYyBhcnR3b3Jrc0ZhY3Rvcnk7CQkJCQkJCS8vIE1hcHMgYWxsIGFydHdvcmtzIHRvIHRoZWlyIHJlc3BlY3RpdmUgZmFjdG9yeSBjb250cmFjdHMNCg0KCXVpbnQyNTYgYXJ0d29ya0NvdW50OwkJCQkJCQkJCQkvLyBLZWVwcyB0cmFjayBvZiB0aGUgbnVtYmVyIG9mIGFydHdvcmsgY29udHJhY3RzIGluIHRoZSBuZXR3b3JrDQoJDQoJbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgYXJ0d29ya0luZGV4OwkJCS8vIEFuIGluZGV4IG9mIGFsbCB0aGUgYXJ0d29yayBjb250cmFjdHMgaW4gdGhlIG5ldHdvcmsNCg0KCWFkZHJlc3MgcHVibGljIG93bmVyOwkJCQkJCQkJCQkvLyBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJhY3Qgb3duZXINCgkNCgl1aW50MjU2IHB1YmxpYyBkb25hdGlvbk11bHRpcGxpZXI7DQoNCiAgICAvLyBGdW5jdGlvbnMgd2l0aCB0aGlzIG1vZGlmaWVyIGNhbiBvbmx5IGJlIGV4ZWN1dGVkIGJ5IGEgc3BlY2lmaWMgYWRkcmVzcw0KICAgIG1vZGlmaWVyIG9ubHlCeSAoYWRkcmVzcyBfYWNjb3VudCkNCiAgICB7DQogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBfYWNjb3VudCk7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy8gRnVuY3Rpb25zIHdpdGggdGhpcyBtb2RpZmllciBjYW4gb25seSBiZSBleGVjdXRlZCBieSBhcHByb3ZlZCBmYWN0b3J5IGNvbnRyYWN0cw0KICAgIG1vZGlmaWVyIHJlZ2lzdGVyZEZhY3Rvcmllc09ubHkgKCkNCiAgICB7DQogICAgICAgIHJlcXVpcmUoYXBwcm92ZWRGYWN0b3JpZXNbbXNnLnNlbmRlcl0pOw0KICAgICAgICBfOw0KICAgIH0NCg0KCW1vZGlmaWVyIGFwcHJvdmVkQ29udHJhY3RzT25seSAoKQ0KCXsNCgkJcmVxdWlyZShhcHByb3ZlZENvbnRyYWN0c1ttc2cuc2VuZGVyXSk7DQoJCV87DQoJfQ0KDQoJZnVuY3Rpb24gc2V0UmVmZXJyZXIgKGFkZHJlc3MgX3JlZmVycmVyKQ0KCQl7DQoJCQlpZiAocmVmZXJyZWRbbXNnLnNlbmRlcl0gPT0gMHgwICYmICFjYW50U2V0UmVmZXJyZXJbbXNnLnNlbmRlcl0pDQoJCQl7DQoJCQkJcmVmZXJyZWRbbXNnLnNlbmRlcl0gPSBfcmVmZXJyZXI7DQoJCQl9DQoJCX0NCg0KCWZ1bmN0aW9uIFJlZ2lzdHJhciAoKSB7DQoJCW93bmVyID0gbXNnLnNlbmRlcjsNCgkJZG9uYXRpb25NdWx0aXBsaWVyID0gMTAwOw0KCX0NCg0KCS8vIGFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byBhc3NpZ24gYSBuZXcgb3duZXINCglmdW5jdGlvbiBjaGFuZ2VPd25lciAoYWRkcmVzcyBuZXdPd25lcikgb25seUJ5IChvd25lcikgDQoJCXsNCgkJCW93bmVyID0gbmV3T3duZXI7DQoJCX0NCg0KCWZ1bmN0aW9uIGlzc3VlUGF0cm9ucyAoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgYXBwcm92ZWRDb250cmFjdHNPbmx5DQoJCXsNCgkJCWJhbGFuY2VzW190b10gKz0gX2Ftb3VudDsNCgkJCV90b3RhbFBhdHJvblN1cHBseSArPSBfYW1vdW50Ow0KCQl9DQoNCglmdW5jdGlvbiBzZXREb25hdGlvblJld2FyZCAodWludDI1NiBfbXVsdGlwbGllcikgb25seUJ5IChvd25lcikNCgkJew0KCQkJZG9uYXRpb25NdWx0aXBsaWVyID0gX211bHRpcGxpZXI7DQoJCX0NCg0KCWZ1bmN0aW9uIGRvbmF0ZSAoKSBwYXlhYmxlDQoJCXsNCgkJCWJhbGFuY2VzW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZSAqIGRvbmF0aW9uTXVsdGlwbGllcjsNCgkJCV90b3RhbFBhdHJvblN1cHBseSArPSBtc2cudmFsdWUgKiBkb25hdGlvbk11bHRpcGxpZXI7DQoJCX0NCg0KCWZ1bmN0aW9uIHJlZ2lzdGVyQXJ0d29yayAoYWRkcmVzcyBfY29udHJhY3QsIGJ5dGVzMzIgX1NIQTI1Nkhhc2gsIHVpbnQyNTYgX2VkaXRpb25TaXplLCBzdHJpbmcgX3RpdGxlLCBzdHJpbmcgX2ZpbGVMaW5rLCB1aW50MjU2IF9vd25lckNvbW1pc3Npb24sIGFkZHJlc3MgX2FydGlzdCwgYm9vbCBfaW5kZXhlZCwgYm9vbCBfb3Vyb2Jvcm9zKSByZWdpc3RlcmRGYWN0b3JpZXNPbmx5DQoJCXsNCgkJaWYgKFNIQTI1Nkhhc2hSZWdpc3RlcltfU0hBMjU2SGFzaF0gPT0gMHgwKSB7DQoJCSAgIAlTSEEyNTZIYXNoUmVnaXN0ZXJbX1NIQTI1Nkhhc2hdID0gX2NvbnRyYWN0Ow0KCQkJYXBwcm92ZWRDb250cmFjdHNbX2NvbnRyYWN0XSA9IHRydWU7DQoJCQljYW50U2V0UmVmZXJyZXJbX2FydGlzdF0gPSB0cnVlOw0KCQkJYXJ0d29ya1JlZ2lzdGVyW19jb250cmFjdF0uU0hBMjU2SGFzaCA9IF9TSEEyNTZIYXNoOw0KCQkJYXJ0d29ya1JlZ2lzdGVyW19jb250cmFjdF0uZWRpdGlvblNpemUgPSBfZWRpdGlvblNpemU7DQoJCQlhcnR3b3JrUmVnaXN0ZXJbX2NvbnRyYWN0XS50aXRsZSA9IF90aXRsZTsNCgkJCWFydHdvcmtSZWdpc3RlcltfY29udHJhY3RdLmZpbGVMaW5rID0gX2ZpbGVMaW5rOw0KCQkJYXJ0d29ya1JlZ2lzdGVyW19jb250cmFjdF0ub3duZXJDb21taXNzaW9uID0gX293bmVyQ29tbWlzc2lvbjsNCgkJCWFydHdvcmtSZWdpc3RlcltfY29udHJhY3RdLmFydGlzdCA9IF9hcnRpc3Q7DQoJCQlhcnR3b3JrUmVnaXN0ZXJbX2NvbnRyYWN0XS5mYWN0b3J5ID0gbXNnLnNlbmRlcjsNCgkJCWFydHdvcmtSZWdpc3RlcltfY29udHJhY3RdLmlzSW5kZXhlZCA9IF9pbmRleGVkOw0KCQkJYXJ0d29ya1JlZ2lzdGVyW19jb250cmFjdF0uaXNPdXJvYm9yb3MgPSBfb3Vyb2Jvcm9zOw0KCQkJYXJ0d29ya0luZGV4W2FydHdvcmtDb3VudF0gPSBfY29udHJhY3Q7DQoJCQlhcnRpc3RzQXJ0d29ya3NbX2FydGlzdF1bYXJ0aXN0c0FydHdvcmtDb3VudFtfYXJ0aXN0XV0gPSBfY29udHJhY3Q7DQoJCQlhcnRpc3RzQXJ0d29ya0NvdW50W19hcnRpc3RdKys7DQoJCQlhcnR3b3Jrc0ZhY3RvcnlbX2NvbnRyYWN0XSA9IG1zZy5zZW5kZXI7DQoJCQlOZXdBcnR3b3JrIChfY29udHJhY3QsIF9TSEEyNTZIYXNoLCBfZWRpdGlvblNpemUsIF90aXRsZSwgX2ZpbGVMaW5rLCBfb3duZXJDb21taXNzaW9uLCBfYXJ0aXN0LCBfaW5kZXhlZCwgX291cm9ib3Jvcyk7DQoJCQlhcnR3b3JrQ291bnQrKzsNCgkJCX0NCgkJCWVsc2Uge3Rocm93O30NCgkJfQ0KDQoJZnVuY3Rpb24gaXNTSEEyNTZIYXNoUmVnaXN0ZXJlZCAoYnl0ZXMzMiBfU0hBMjU2SGFzaCkgcmV0dXJucyAoYm9vbCBfcmVnaXN0ZXJlZCkNCgkJew0KCQlpZiAoU0hBMjU2SGFzaFJlZ2lzdGVyW19TSEEyNTZIYXNoXSA9PSAweDApDQoJCQl7cmV0dXJuIGZhbHNlO30NCgkJZWxzZSB7cmV0dXJuIHRydWU7fQ0KCQl9DQoNCg0KCWZ1bmN0aW9uIGFwcHJvdmVGYWN0b3J5Q29udHJhY3QgKGFkZHJlc3MgX2ZhY3RvcnlDb250cmFjdEFkZHJlc3MsIGJvb2wgX2FwcHJvdmVkKSBvbmx5QnkgKG93bmVyKQ0KCQl7DQoJCQlhcHByb3ZlZEZhY3Rvcmllc1tfZmFjdG9yeUNvbnRyYWN0QWRkcmVzc10gPSBfYXBwcm92ZWQ7DQoJCX0NCg0KCWZ1bmN0aW9uIGlzRmFjdG9yeUFwcHJvdmVkIChhZGRyZXNzIF9mYWN0b3J5KSByZXR1cm5zIChib29sIF9hcHByb3ZlZCkNCgkJew0KCQkJaWYgKGFwcHJvdmVkRmFjdG9yaWVzW19mYWN0b3J5XSkNCgkJCXsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX0NCgkJCWVsc2Uge3JldHVybiBmYWxzZTt9DQoJCX0NCg0KCWZ1bmN0aW9uIHdpdGhkcmF3RnVuZHMgKHVpbnQyNTYgX0VUSEFtb3VudCwgYWRkcmVzcyBfdG8pIG9ubHlCeSAob3duZXIpDQoJCXsNCgkJCWlmICh0aGlzLmJhbGFuY2UgPj0gX0VUSEFtb3VudCkNCgkJCXsNCgkJCQlfdG8udHJhbnNmZXIoX0VUSEFtb3VudCk7DQoJCQl9DQoJCQllbHNlIHt0aHJvdzt9DQoJCX0NCg0KCWZ1bmN0aW9uIHRyYW5zZmVyQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgdWludDI1NiBfYW1vdW50LCBhZGRyZXNzIF90bykgb25seUJ5IChvd25lcikgDQoJCXsNCgkJCUludGVyZmFjZSBjID0gSW50ZXJmYWNlKF9jb250cmFjdCk7DQoJCQljLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7DQoJCX0NCg0KCWZ1bmN0aW9uIHRyYW5zZmVySW5kZXhlZEJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2luZGV4LCBhZGRyZXNzIF90bykgb25seUJ5IChvd25lcikNCgkJew0KCQkJSW50ZXJmYWNlIGMgPSBJbnRlcmZhY2UoX2NvbnRyYWN0KTsNCgkJCWMudHJhbnNmZXJJbmRleGVkKF90bywgX2luZGV4KTsNCgkJfQ0KDQoJZnVuY3Rpb24gYXBwcm92ZUJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkgb25seUJ5IChvd25lcikNCgkJew0KCQkJSW50ZXJmYWNlIGMgPSBJbnRlcmZhY2UoX2NvbnRyYWN0KTsNCgkJCWMuYXBwcm92ZShfc3BlbmRlciwgX2Ftb3VudCk7DQoJCX0JDQoNCglmdW5jdGlvbiBhcHByb3ZlSW5kZXhlZEJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2luZGV4KSBvbmx5QnkgKG93bmVyKQ0KCQl7DQoJCQlJbnRlcmZhY2UgYyA9IEludGVyZmFjZShfY29udHJhY3QpOw0KCQkJYy5hcHByb3ZlSW5kZXhlZChfc3BlbmRlciwgX2luZGV4KTsNCgkJfQ0KDQoJZnVuY3Rpb24gYnVybkJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2Ftb3VudCkgb25seUJ5IChvd25lcikNCgkJew0KCQkJSW50ZXJmYWNlIGMgPSBJbnRlcmZhY2UoX2NvbnRyYWN0KTsNCgkJCWMuYnVybihfYW1vdW50KTsNCgkJfQ0KDQoJZnVuY3Rpb24gYnVybkZyb21CeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0LCB1aW50MjU2IF9hbW91bnQsIGFkZHJlc3MgX2Zyb20pIG9ubHlCeSAob3duZXIpDQoJCXsNCgkJCUludGVyZmFjZSBjID0gSW50ZXJmYWNlKF9jb250cmFjdCk7DQoJCQljLmJ1cm5Gcm9tIChfZnJvbSwgX2Ftb3VudCk7DQoJCX0NCg0KCWZ1bmN0aW9uIGJ1cm5JbmRleGVkQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgdWludDI1NiBfaW5kZXgpIG9ubHlCeSAob3duZXIpDQoJCXsNCgkJCUludGVyZmFjZSBjID0gSW50ZXJmYWNlKF9jb250cmFjdCk7DQoJCQljLmJ1cm5JbmRleGVkKF9pbmRleCk7DQoJCX0NCg0KCWZ1bmN0aW9uIGJ1cm5JbmRleGVkRnJvbUJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX2luZGV4KSBvbmx5QnkgKG93bmVyKQ0KCQl7DQoJCQlJbnRlcmZhY2UgYyA9IEludGVyZmFjZShfY29udHJhY3QpOw0KCQkJYy5idXJuSW5kZXhlZEZyb20oX2Zyb20sIF9pbmRleCk7DQoJCX0NCg0KCWZ1bmN0aW9uIG9mZmVyUGllY2VGb3JTYWxlQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgdWludDI1NiBfcHJpY2UpIG9ubHlCeSAob3duZXIpDQoJCXsNCgkJCUludGVyZmFjZSBjID0gSW50ZXJmYWNlKF9jb250cmFjdCk7DQoJCQljLm9mZmVyUGllY2VGb3JTYWxlKF9wcmljZSk7DQoJCX0NCg0KCWZ1bmN0aW9uIGZpbGxCaWRCeUFkZHJlc3MgKGFkZHJlc3MgX2NvbnRyYWN0KSBvbmx5QnkgKG93bmVyKQkJCQkJCQkvLyBGaWxsIGEgYmlkIHdpdGggYW4gdW5pbmRleGVkIHBpZWNlIG93bmVkIGJ5IHRoZSByZWdpc3RyYXINCgkJew0KCQkJSW50ZXJmYWNlIGMgPSBJbnRlcmZhY2UoX2NvbnRyYWN0KTsNCgkJCWMuZmlsbEJpZCgpOw0KCQl9DQoNCglmdW5jdGlvbiBjYW5jZWxTYWxlQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCkgb25seUJ5IChvd25lcikJCQkJCQkJLy8gQ2FuY2VsIHRoZSBzYWxlIG9mIGFuIHVuaW5kZXhlZCBwaWVjZSBvd25lZCBieSB0aGUgcmVnaXN0cmFyDQoJCXsNCgkJCUludGVyZmFjZSBjID0gSW50ZXJmYWNlKF9jb250cmFjdCk7DQoJCQljLmNhbmNlbFNhbGUoKTsNCgkJfQ0KDQoJZnVuY3Rpb24gb2ZmZXJJbmRleGVkUGllY2VGb3JTYWxlQnlBZGRyZXNzIChhZGRyZXNzIF9jb250cmFjdCwgdWludDI1NiBfaW5kZXgsIHVpbnQyNTYgX3ByaWNlKSBvbmx5QnkgKG93bmVyKQkJCS8vIFNlbGwgYW4gaW5kZXhlZCBwaWVjZSBvd25lZCBieSB0aGUgcmVnaXN0cmFyLg0KCQl7DQoJCQlJbnRlcmZhY2UgYyA9IEludGVyZmFjZShfY29udHJhY3QpOw0KCQkJYy5vZmZlckluZGV4ZWRQaWVjZUZvclNhbGUoX2luZGV4LCBfcHJpY2UpOw0KCQl9DQoNCglmdW5jdGlvbiBmaWxsSW5kZXhlZEJpZEJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QsIHVpbnQyNTYgX2luZGV4KSBvbmx5QnkgKG93bmVyKQkJCQkJLy8gRmlsbCBhIGJpZCB3aXRoIGFuIGluZGV4ZWQgcGllY2Ugb3duZWQgYnkgdGhlIHJlZ2lzdHJhcg0KCQl7DQoJCQlJbnRlcmZhY2UgYyA9IEludGVyZmFjZShfY29udHJhY3QpOw0KCQkJYy5maWxsSW5kZXhlZEJpZChfaW5kZXgpOw0KCQl9DQoNCglmdW5jdGlvbiBjYW5jZWxJbmRleGVkU2FsZUJ5QWRkcmVzcyAoYWRkcmVzcyBfY29udHJhY3QpIG9ubHlCeSAob3duZXIpCQkJCQkJCQkvLyBDYW5jZWwgdGhlIHNhbGUgb2YgYW4gdW5pbmRleGVkIHBpZWNlIG93bmVkIGJ5IHRoZSByZWdpc3RyYXINCgkJew0KCQkJSW50ZXJmYWNlIGMgPSBJbnRlcmZhY2UoX2NvbnRyYWN0KTsNCgkJCWMuY2FuY2VsSW5kZXhlZFNhbGUoKTsNCgkJfQ0KCQ0KCWZ1bmN0aW9uKCkgcGF5YWJsZQ0KCQl7DQoJCQlpZiAoIWFwcHJvdmVkQ29udHJhY3RzW21zZy5zZW5kZXJdKSB7dGhyb3c7fQkJCQkJCS8vIHVzZSBkb25hdGUgKCkgZm9yIGRvbmF0aW9ucyBhbmQgeW91IHdpbGwgZ2V0IGRvbmF0aW9uTXVsdGlwbGllciAqIHlvdXIgZG9uYXRpb24gaW4gUGF0cm9uIHRva2Vucy4gWWF5IQ0KCQl9DQoNCgkvLyBTZW1pIHVpbnZlcnNhbCBjYWxsIGZ1bmN0aW9uIGZvciB1bmZvcnNlZW4gZnV0dXJlIEV0aGFydCBuZXR3b3JrIGNvbnRyYWN0IHR5cGVzIGFuZCB1c2UgY2FzZXMuIFN0cmluZyBmb3JtYXQ6ICI8ZnVuY3Rpb25OYW1lPihhZGRyZXNzLGFkZHJlc3MsdWludDI1Nix1aW50MjU2LGJvb2wsc3RyaW5nLGJ5dGVzMzIpIg0KCWZ1bmN0aW9uIGNhbGxDb250cmFjdEZ1bmN0aW9uQnlBZGRyZXNzKGFkZHJlc3MgX2NvbnRyYWN0LCBzdHJpbmcgZnVuY3Rpb25OYW1lQW5kVHlwZXMsIGFkZHJlc3MgX2FkZHJlc3MxLCBhZGRyZXNzIF9hZGRyZXNzMiwgdWludDI1NiBfdmFsdWUxLCB1aW50MjU2IF92YWx1ZTIsIGJvb2wgX2Jvb2wsIHN0cmluZyBfc3RyaW5nLCBieXRlczMyIF9ieXRlczMyKSBvbmx5QnkgKG93bmVyKQ0KCXsNCgkJaWYoIV9jb250cmFjdC5jYWxsKGJ5dGVzNChzaGEzKGZ1bmN0aW9uTmFtZUFuZFR5cGVzKSksX2FkZHJlc3MxLCBfYWRkcmVzczIsIF92YWx1ZTEsIF92YWx1ZTIsIF9ib29sLCBfc3RyaW5nLCBfYnl0ZXMzMikpIHt0aHJvdzt9DQoJfQ0KfQ=='