base 64 content
base64repToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyoqDQogKiBAdGl0bGUgU2FmZU1hdGgNCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yDQogKi8NCmxpYnJhcnkgU2FmZU1hdGggew0KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICB1aW50MjU2IGMgPSBhICogYjsNCiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwDQogICAgdWludDI1NiBjID0gYSAvIGI7DQogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgIGFzc2VydChiIDw9IGEpOw0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKyBiOw0KICAgIGFzc2VydChjID49IGEpOw0KICAgIHJldHVybiBjOw0KICB9DQp9DQoNCg0KLyoqDQogKiBAdGl0bGUgRVJDMjBCYXNpYw0KICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlDQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5DQogKi8NCmNvbnRyYWN0IEVSQzIwQmFzaWMgew0KICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7DQogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOw0KfQ0KDQoNCi8qKg0KICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQ0KICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQogKi8NCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgew0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7DQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsNCiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7DQp9DQoNCg0KLyoqDQogKiBAdGl0bGUgQmFzaWMgdG9rZW4NCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuDQogKi8NCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7DQogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2Ow0KDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsNCg0KICAvKioNCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzDQogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4NCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuDQogICovDQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgew0KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7DQogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7DQogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgLyoqDQogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4NCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4NCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLg0KICAqLw0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgew0KICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICB9DQoNCn0NCg0KDQovKioNCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbg0KICoNCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLg0KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjANCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wNCiAqLw0KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7DQoNCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOw0KDQoNCiAgLyoqDQogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcg0KICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tDQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bw0KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkDQogICAqLw0KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7DQogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsNCg0KICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldA0KICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsNCg0KICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsNCiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7DQogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLg0KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuDQogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuDQogICAqLw0KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7DQoNCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYA0KICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90DQogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6DQogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5DQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7DQoNCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuDQogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4NCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuDQogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4NCiAgICovDQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsNCiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgfQ0KDQp9DQoNCg0KLyoqDQogKiBAdGl0bGUgT3duYWJsZQ0KICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbA0KICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4NCiAqLw0KY29udHJhY3QgT3duYWJsZSB7DQogIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQoNCiAgLyoqDQogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcg0KICAgKiBhY2NvdW50Lg0KICAgKi8NCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsNCiAgICBvd25lciA9IG1zZy5zZW5kZXI7DQogIH0NCg0KDQogIC8qKg0KICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuDQogICAqLw0KICBtb2RpZmllciBvbmx5T3duZXIoKSB7DQogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsNCiAgICBfOw0KICB9DQoNCg0KICAvKioNCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4NCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4NCiAgICovDQogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7DQogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsNCiAgICAgIG93bmVyID0gbmV3T3duZXI7DQogICAgfQ0KICB9DQoNCn0NCg0KDQovKioNCiAqIEB0aXRsZSBQYXVzYWJsZQ0KICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLg0KICovDQpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsNCiAgZXZlbnQgUGF1c2UoKTsNCiAgZXZlbnQgVW5wYXVzZSgpOw0KDQogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOw0KDQoNCiAgLyoqDQogICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIHBhdXNlZA0KICAgKi8NCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsNCiAgICByZXF1aXJlKCFwYXVzZWQpOw0KICAgIF87DQogIH0NCg0KICAvKioNCiAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgTk9UIHBhdXNlZA0KICAgKi8NCiAgbW9kaWZpZXIgd2hlblBhdXNlZCB7DQogICAgcmVxdWlyZShwYXVzZWQpOw0KICAgIF87DQogIH0NCg0KICAvKioNCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlDQogICAqLw0KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsNCiAgICBwYXVzZWQgPSB0cnVlOw0KICAgIFBhdXNlKCk7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlDQogICAqLw0KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcmV0dXJucyAoYm9vbCkgew0KICAgIHBhdXNlZCA9IGZhbHNlOw0KICAgIFVucGF1c2UoKTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KfQ0KDQovKioNCiAqIFBhdXNhYmxlIHRva2VuDQogKg0KICogU2ltcGxlIEVSQzIwIFRva2VuIGV4YW1wbGUsIHdpdGggcGF1c2FibGUgdG9rZW4gY3JlYXRpb24NCiAqKi8NCg0KY29udHJhY3QgUGF1c2FibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBQYXVzYWJsZSB7DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsNCiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOw0KICB9DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7DQogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICB9DQp9DQoNCg0KY29udHJhY3QgSW5pdGlhbGl6YWJsZSB7DQogIGJvb2wgcHVibGljIGluaXRpYWxpemVkID0gZmFsc2U7DQoNCiAgbW9kaWZpZXIgYWZ0ZXJJbml0aWFsaXplZCB7DQogICAgcmVxdWlyZShpbml0aWFsaXplZCk7DQogICAgXzsNCiAgfQ0KDQogIG1vZGlmaWVyIGJlZm9yZUluaXRpYWxpemVkIHsNCiAgICByZXF1aXJlKCFpbml0aWFsaXplZCk7DQogICAgXzsNCiAgfQ0KDQogIGZ1bmN0aW9uIGVuZEluaXRpYWxpemF0aW9uKCkgaW50ZXJuYWwgYmVmb3JlSW5pdGlhbGl6ZWQgcmV0dXJucyAoYm9vbCkgew0KICAgIGluaXRpYWxpemVkID0gdHJ1ZTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KfQ0KDQoNCi8qKg0KICogQHRpdGxlIFJFUDIgVG9rZW4NCiAqIEBkZXYgUkVQMiBNaW50YWJsZSBUb2tlbiB3aXRoIG1pZ3JhdGlvbiBmcm9tIGxlZ2FjeSBjb250cmFjdA0KICovDQpjb250cmFjdCBSZXBUb2tlbiBpcyBJbml0aWFsaXphYmxlLCBQYXVzYWJsZVRva2VuIHsNCiAgRVJDMjBCYXNpYyBwdWJsaWMgbGVnYWN5UmVwQ29udHJhY3Q7DQogIHVpbnQyNTYgcHVibGljIHRhcmdldFN1cHBseTsNCg0KICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiUmVwdXRhdGlvbiI7DQogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlJFUCI7DQogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7DQoNCiAgZXZlbnQgTWlncmF0ZWQoYWRkcmVzcyBpbmRleGVkIGhvbGRlciwgdWludDI1NiBhbW91bnQpOw0KDQogIC8qKg0KICAgICogQGRldiBDcmVhdGVzIGEgbmV3IFJlcFRva2VuIGluc3RhbmNlDQogICAgKiBAcGFyYW0gX2xlZ2FjeVJlcENvbnRyYWN0IEFkZHJlc3Mgb2YgdGhlIGxlZ2FjeSBFUkMyMEJhc2ljIFJFUCBjb250cmFjdCB0byBtaWdyYXRlIGJhbGFuY2VzIGZyb20NCiAgICAqLw0KICBmdW5jdGlvbiBSZXBUb2tlbihhZGRyZXNzIF9sZWdhY3lSZXBDb250cmFjdCwgdWludDI1NiBfYW1vdW50VXNlZFRvRnJlZXplLCBhZGRyZXNzIF9hY2NvdW50VG9TZW5kRnJvemVuUmVwVG8pIHsNCiAgICByZXF1aXJlKF9sZWdhY3lSZXBDb250cmFjdCAhPSAwKTsNCiAgICBsZWdhY3lSZXBDb250cmFjdCA9IEVSQzIwQmFzaWMoX2xlZ2FjeVJlcENvbnRyYWN0KTsNCiAgICB0YXJnZXRTdXBwbHkgPSBsZWdhY3lSZXBDb250cmFjdC50b3RhbFN1cHBseSgpOw0KICAgIGJhbGFuY2VzW19hY2NvdW50VG9TZW5kRnJvemVuUmVwVG9dID0gX2Ftb3VudFVzZWRUb0ZyZWV6ZTsNCiAgICB0b3RhbFN1cHBseSA9IF9hbW91bnRVc2VkVG9GcmVlemU7DQogICAgcGF1c2UoKTsNCiAgfQ0KDQogIC8qKg0KICAgICogQGRldiBDb3BpZXMgdGhlIGJhbGFuY2Ugb2YgYSBiYXRjaCBvZiBhZGRyZXNzZXMgZnJvbSB0aGUgbGVnYWN5IGNvbnRyYWN0DQogICAgKiBAcGFyYW0gX2hvbGRlcnMgQXJyYXkgb2YgYWRkcmVzc2VzIHRvIG1pZ3JhdGUgYmFsYW5jZQ0KICAgICogQHJldHVybiBUcnVlIGlmIG9wZXJhdGlvbiB3YXMgY29tcGxldGVkDQogICAgKi8NCiAgZnVuY3Rpb24gbWlncmF0ZUJhbGFuY2VzKGFkZHJlc3NbXSBfaG9sZGVycykgb25seU93bmVyIGJlZm9yZUluaXRpYWxpemVkIHJldHVybnMgKGJvb2wpIHsNCiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfaG9sZGVycy5sZW5ndGg7IGkrKykgew0KICAgICAgbWlncmF0ZUJhbGFuY2UoX2hvbGRlcnNbaV0pOw0KICAgIH0NCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIC8qKg0KICAgICogQGRldiBDb3BpZXMgdGhlIGJhbGFuY2Ugb2YgYSBzaW5nbGUgYWRkcmVzc2VzIGZyb20gdGhlIGxlZ2FjeSBjb250cmFjdA0KICAgICogQHBhcmFtIF9ob2xkZXIgQWRkcmVzcyB0byBtaWdyYXRlIGJhbGFuY2UNCiAgICAqIEByZXR1cm4gVHJ1ZSBpZiBiYWxhbmNlIHdhcyBjb3BpZWQsIGZhbHNlIGlmIHdhcyBhbHJlYWR5IGNvcGllZCBvciBhZGRyZXNzIGhhZCBubyBiYWxhbmNlDQogICAgKi8NCiAgZnVuY3Rpb24gbWlncmF0ZUJhbGFuY2UoYWRkcmVzcyBfaG9sZGVyKSBvbmx5T3duZXIgYmVmb3JlSW5pdGlhbGl6ZWQgcmV0dXJucyAoYm9vbCkgew0KICAgIGlmIChiYWxhbmNlc1tfaG9sZGVyXSA+IDApIHsNCiAgICAgIHJldHVybiBmYWxzZTsgLy8gQWxyZWFkeSBjb3BpZWQsIG1vdmUgb24NCiAgICB9DQoNCiAgICB1aW50MjU2IGFtb3VudCA9IGxlZ2FjeVJlcENvbnRyYWN0LmJhbGFuY2VPZihfaG9sZGVyKTsNCiAgICBpZiAoYW1vdW50ID09IDApIHsNCiAgICAgIHJldHVybiBmYWxzZTsgLy8gSGFzIG5vIGJhbGFuY2UgaW4gbGVnYWN5IGNvbnRyYWN0LCBtb3ZlIG9uDQogICAgfQ0KDQogICAgYmFsYW5jZXNbX2hvbGRlcl0gPSBhbW91bnQ7DQogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoYW1vdW50KTsNCiAgICBNaWdyYXRlZChfaG9sZGVyLCBhbW91bnQpOw0KDQogICAgaWYgKHRhcmdldFN1cHBseSA9PSB0b3RhbFN1cHBseSkgew0KICAgICAgZW5kSW5pdGlhbGl6YXRpb24oKTsNCiAgICB9DQogICAgcmV0dXJuIHRydWU7DQogIH0NCg0KICAvKioNCiAgICAqIEBkZXYgVW5wYXVzZXMgdGhlIGNvbnRyYWN0IHdpdGggdGhlIGNhdmVhdCBhZGRlZCB0aGF0IGl0IGNhbiBvbmx5IGhhcHBlbiBhZnRlciBpbml0aWFsaXphdGlvbi4NCiAgICAqLw0KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgYWZ0ZXJJbml0aWFsaXplZCByZXR1cm5zIChib29sKSB7DQogICAgc3VwZXIudW5wYXVzZSgpOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQp9'