base 64 content
base64reserveToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMzsNCi8vIExhc3QgY29tcGlsZWQgd2l0aCAwLjQuMTMrY29tbWl0LjBmYjRjYjFhDQoNCmNvbnRyYWN0IFNhZmVNYXRoIHsNCiAgLy9pbnRlcm5hbHMNCg0KICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSAqIGI7DQogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICBhc3NlcnQoYiA8PSBhKTsNCiAgICByZXR1cm4gYSAtIGI7DQogIH0NCg0KICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSArIGI7DQogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7DQogICAgcmV0dXJuIGM7DQogIH0NCn0NCg0KY29udHJhY3QgVG9rZW4gew0KDQogICAgLy8vIEByZXR1cm4gdG90YWwgYW1vdW50IG9mIHRva2Vucw0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpIHt9DQoNCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkDQogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30NCg0KICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmANCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50DQogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZA0KICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQ0KDQogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gDQogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyDQogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudA0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQNCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9DQoNCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMNCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2Vucw0KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2Ygd2VpIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2Zlcg0KICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30NCg0KICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMNCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2Vucw0KICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQ0KDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7DQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7DQoNCn0NCg0KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICAvL0RlZmF1bHQgYXNzdW1lcyB0b3RhbFN1cHBseSBjYW4ndCBiZSBvdmVyIG1heCAoMl4yNTYgLSAxKS4NCiAgICAgICAgLy9JZiB5b3VyIHRva2VuIGxlYXZlcyBvdXQgdG90YWxTdXBwbHkgYW5kIGNhbiBpc3N1ZSBtb3JlIHRva2VucyBhcyB0aW1lIGdvZXMgb24sIHlvdSBuZWVkIHRvIGNoZWNrIGlmIGl0IGRvZXNuJ3Qgd3JhcC4NCiAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuDQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsNCiAgICAgICAgLy9pZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsNCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOw0KICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICAvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuDQogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgew0KICAgICAgICAvL2lmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7DQogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsNCiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsNCiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOw0KICAgIH0NCg0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsNCg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCg0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Ow0KDQp9DQoNCmNvbnRyYWN0IFJlc2VydmVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBTYWZlTWF0aCB7DQogICAgc3RyaW5nIHB1YmxpYyBuYW1lOw0KICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOw0KICAgIHVpbnQgcHVibGljIGRlY2ltYWxzID0gMTg7DQogICAgYWRkcmVzcyBwdWJsaWMgbWludGVyOw0KICAgIGZ1bmN0aW9uIFJlc2VydmVUb2tlbihzdHJpbmcgbmFtZV8sIHN0cmluZyBzeW1ib2xfKSB7DQogICAgICBuYW1lID0gbmFtZV87DQogICAgICBzeW1ib2wgPSBzeW1ib2xfOw0KICAgICAgbWludGVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQogICAgZnVuY3Rpb24gY3JlYXRlKGFkZHJlc3MgYWNjb3VudCwgdWludCBhbW91bnQpIHsNCiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBtaW50ZXIpOw0KICAgICAgYmFsYW5jZXNbYWNjb3VudF0gPSBzYWZlQWRkKGJhbGFuY2VzW2FjY291bnRdLCBhbW91bnQpOw0KICAgICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCBhbW91bnQpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBkZXN0cm95KGFkZHJlc3MgYWNjb3VudCwgdWludCBhbW91bnQpIHsNCiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBtaW50ZXIpOw0KICAgICAgcmVxdWlyZShiYWxhbmNlc1thY2NvdW50XSA+PSBhbW91bnQpOw0KICAgICAgYmFsYW5jZXNbYWNjb3VudF0gPSBzYWZlU3ViKGJhbGFuY2VzW2FjY291bnRdLCBhbW91bnQpOw0KICAgICAgdG90YWxTdXBwbHkgPSBzYWZlU3ViKHRvdGFsU3VwcGx5LCBhbW91bnQpOw0KICAgIH0NCn0NCg0KY29udHJhY3QgWWVzTm8gaXMgU2FmZU1hdGggew0KDQogIFJlc2VydmVUb2tlbiBwdWJsaWMgeWVzVG9rZW47DQogIFJlc2VydmVUb2tlbiBwdWJsaWMgbm9Ub2tlbjsNCg0KICBzdHJpbmcgcHVibGljIG5hbWU7DQogIHN0cmluZyBwdWJsaWMgc3ltYm9sOw0KDQogIC8vUmVhbGl0eSBLZXlzOg0KICBieXRlczMyIHB1YmxpYyBmYWN0SGFzaDsNCiAgYWRkcmVzcyBwdWJsaWMgZXRoQWRkcjsNCiAgc3RyaW5nIHB1YmxpYyB1cmw7DQoNCiAgdWludCBwdWJsaWMgb3V0Y29tZTsNCiAgYm9vbCBwdWJsaWMgcmVzb2x2ZWQgPSBmYWxzZTsNCg0KICBhZGRyZXNzIHB1YmxpYyBmZWVBY2NvdW50Ow0KICB1aW50IHB1YmxpYyBmZWU7IC8vcGVyY2VudGFnZSBvZiAxIGV0aGVyDQoNCiAgZXZlbnQgQ3JlYXRlKGFkZHJlc3MgaW5kZXhlZCBhY2NvdW50LCB1aW50IHZhbHVlKTsNCiAgZXZlbnQgUmVkZWVtKGFkZHJlc3MgaW5kZXhlZCBhY2NvdW50LCB1aW50IHZhbHVlLCB1aW50IHllc1Rva2VucywgdWludCBub1Rva2Vucyk7DQogIGV2ZW50IFJlc29sdmUoYm9vbCByZXNvbHZlZCwgdWludCBvdXRjb21lKTsNCg0KICBmdW5jdGlvbiBZZXNObyhzdHJpbmcgbmFtZV8sIHN0cmluZyBzeW1ib2xfLCBzdHJpbmcgbmFtZXlfLCBzdHJpbmcgc3ltYm9seV8sIHN0cmluZyBuYW1lbl8sIHN0cmluZyBzeW1ib2xuXywgYnl0ZXMzMiBmYWN0SGFzaF8sIGFkZHJlc3MgZXRoQWRkcl8sIHN0cmluZyB1cmxfLCBhZGRyZXNzIGZlZUFjY291bnRfLCB1aW50IGZlZV8pIHsNCiAgICBuYW1lID0gbmFtZV87DQogICAgc3ltYm9sID0gc3ltYm9sXzsNCiAgICB5ZXNUb2tlbiA9IG5ldyBSZXNlcnZlVG9rZW4obmFtZXlfLCBzeW1ib2x5Xyk7DQogICAgbm9Ub2tlbiA9IG5ldyBSZXNlcnZlVG9rZW4obmFtZW5fLCBzeW1ib2xuXyk7DQogICAgZmFjdEhhc2ggPSBmYWN0SGFzaF87DQogICAgZXRoQWRkciA9IGV0aEFkZHJfOw0KICAgIHVybCA9IHVybF87DQogICAgZmVlQWNjb3VudCA9IGZlZUFjY291bnRfOw0KICAgIGZlZSA9IGZlZV87DQogIH0NCg0KICBmdW5jdGlvbigpIHBheWFibGUgew0KICAgIGNyZWF0ZSgpOw0KICB9DQoNCiAgZnVuY3Rpb24gY3JlYXRlKCkgcGF5YWJsZSB7DQogICAgLy9zZW5kIFggRXRoZXIsIGdldCBYIFllcyB0b2tlbnMgYW5kIFggTm8gdG9rZW5zDQogICAgeWVzVG9rZW4uY3JlYXRlKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7DQogICAgbm9Ub2tlbi5jcmVhdGUobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsNCiAgICBDcmVhdGUobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHJlZGVlbSh1aW50IHRva2Vucykgew0KICAgIGZlZUFjY291bnQudHJhbnNmZXIoc2FmZU11bCh0b2tlbnMsZmVlKS8oMSBldGhlcikpOw0KICAgIGlmICghcmVzb2x2ZWQpIHsNCiAgICAgIHllc1Rva2VuLmRlc3Ryb3kobXNnLnNlbmRlciwgdG9rZW5zKTsNCiAgICAgIG5vVG9rZW4uZGVzdHJveShtc2cuc2VuZGVyLCB0b2tlbnMpOw0KICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihzYWZlTXVsKHRva2VucywoMSBldGhlciktZmVlKS8oMSBldGhlcikpOw0KICAgICAgUmVkZWVtKG1zZy5zZW5kZXIsIHRva2VucywgdG9rZW5zLCB0b2tlbnMpOw0KICAgIH0gZWxzZSBpZiAocmVzb2x2ZWQpIHsNCiAgICAgIGlmIChvdXRjb21lPT0wKSB7IC8vbm8NCiAgICAgICAgbm9Ub2tlbi5kZXN0cm95KG1zZy5zZW5kZXIsIHRva2Vucyk7DQogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoc2FmZU11bCh0b2tlbnMsKDEgZXRoZXIpLWZlZSkvKDEgZXRoZXIpKTsNCiAgICAgICAgUmVkZWVtKG1zZy5zZW5kZXIsIHRva2VucywgMCwgdG9rZW5zKTsNCiAgICAgIH0gZWxzZSBpZiAob3V0Y29tZT09MSkgeyAvL3llcw0KICAgICAgICB5ZXNUb2tlbi5kZXN0cm95KG1zZy5zZW5kZXIsIHRva2Vucyk7DQogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoc2FmZU11bCh0b2tlbnMsKDEgZXRoZXIpLWZlZSkvKDEgZXRoZXIpKTsNCiAgICAgICAgUmVkZWVtKG1zZy5zZW5kZXIsIHRva2VucywgdG9rZW5zLCAwKTsNCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiByZXNvbHZlKHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzLCBieXRlczMyIHZhbHVlKSB7DQogICAgcmVxdWlyZShlY3JlY292ZXIoc2hhMyhmYWN0SGFzaCwgdmFsdWUpLCB2LCByLCBzKSA9PSBldGhBZGRyKTsNCiAgICByZXF1aXJlKCFyZXNvbHZlZCk7DQogICAgdWludCB2YWx1ZUludCA9IHVpbnQodmFsdWUpOw0KICAgIHJlcXVpcmUodmFsdWVJbnQ9PTAgfHwgdmFsdWVJbnQ9PTEpOw0KICAgIG91dGNvbWUgPSB2YWx1ZUludDsNCiAgICByZXNvbHZlZCA9IHRydWU7DQogICAgUmVzb2x2ZShyZXNvbHZlZCwgb3V0Y29tZSk7DQogIH0NCn0NCg0KLyoNCmNvbnRyYWN0IE9wdGlvbiBpcyBTYWZlTWF0aCB7DQoNCiAgUmVzZXJ2ZVRva2VuIHB1YmxpYyBjYWxsVG9rZW47DQogIFJlc2VydmVUb2tlbiBwdWJsaWMgcHV0VG9rZW47DQoNCiAgc3RyaW5nIHB1YmxpYyBuYW1lOw0KICBzdHJpbmcgcHVibGljIHN5bWJvbDsNCiAgdWludCBwdWJsaWMgc3RyaWtlQ2FsbDsgLy90aW1lcyAoMSBldGhlcikNCiAgdWludCBwdWJsaWMgc3RyaWtlUHV0OyAvL3RpbWVzICgxIGV0aGVyKQ0KICAvL2EgY2FsbCBpcyBhbHdheXMgcGFpcmVkIHdpdGggYSBwdXQuDQogIC8vc3RyaWtlQ2FsbCBtdXN0IGJlIGxlc3MgdGhhbiBzdHJpa2VQdXQuDQogIC8vdGhlIGRpZmZlcmVuY2UgYmV3dGVlbiB0aGVtIHJlcHJlc2VudHMgdGhlIGluLXRoZS1tb25leSBsaW1pdC4NCg0KICAvL1JlYWxpdHkgS2V5czoNCiAgYnl0ZXMzMiBwdWJsaWMgZmFjdEhhc2g7DQogIGFkZHJlc3MgcHVibGljIGV0aEFkZHI7DQogIHN0cmluZyBwdWJsaWMgdXJsOw0KDQogIHVpbnQgcHVibGljIG91dGNvbWU7DQogIGJvb2wgcHVibGljIHJlc29sdmVkID0gZmFsc2U7DQoNCiAgYWRkcmVzcyBwdWJsaWMgZmVlQWNjb3VudDsNCiAgdWludCBwdWJsaWMgZmVlOyAvL3BlcmNlbnRhZ2Ugb2YgMSBldGhlcg0KDQogIGV2ZW50IENyZWF0ZShhZGRyZXNzIGluZGV4ZWQgYWNjb3VudCwgdWludCB2YWx1ZSk7DQogIGV2ZW50IFJlZGVlbShhZGRyZXNzIGluZGV4ZWQgYWNjb3VudCwgdWludCB2YWx1ZSwgdWludCBjYWxsVG9rZW5zLCB1aW50IHB1dFRva2Vucyk7DQogIGV2ZW50IFJlc29sdmUoYm9vbCByZXNvbHZlZCwgdWludCBvdXRjb21lKTsNCg0KICBmdW5jdGlvbiBPcHRpb24odWludCBzdHJpa2VDYWxsXywgdWludCBzdHJpa2VQdXRfLCBzdHJpbmcgbmFtZV8sIHN0cmluZyBzeW1ib2xfLCBzdHJpbmcgbmFtZWNhbGxfLCBzdHJpbmcgc3ltYm9sY2FsbF8sIHN0cmluZyBuYW1lcHV0Xywgc3RyaW5nIHN5bWJvbHB1dF8sIGJ5dGVzMzIgZmFjdEhhc2hfLCBhZGRyZXNzIGV0aEFkZHJfLCBzdHJpbmcgdXJsXywgYWRkcmVzcyBmZWVBY2NvdW50XywgdWludCBmZWVfKSB7DQogICAgYXNzZXJ0KHN0cmlrZUNhbGxfIDwgc3RyaWtlUHV0Xyk7DQogICAgc3RyaWtlQ2FsbCA9IHN0cmlrZUNhbGxfOw0KICAgIHN0cmlrZVB1dCA9IHN0cmlrZVB1dF87DQogICAgbmFtZSA9IG5hbWVfOw0KICAgIHN5bWJvbCA9IHN5bWJvbF87DQogICAgY2FsbFRva2VuID0gbmV3IFJlc2VydmVUb2tlbihuYW1lY2FsbF8sIHN5bWJvbGNhbGxfKTsNCiAgICBwdXRUb2tlbiA9IG5ldyBSZXNlcnZlVG9rZW4obmFtZXB1dF8sIHN5bWJvbHB1dF8pOw0KICAgIGZhY3RIYXNoID0gZmFjdEhhc2hfOw0KICAgIGV0aEFkZHIgPSBldGhBZGRyXzsNCiAgICB1cmwgPSB1cmxfOw0KICAgIGZlZUFjY291bnQgPSBmZWVBY2NvdW50XzsNCiAgICBmZWUgPSBmZWVfOw0KICB9DQoNCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7DQogICAgY3JlYXRlKCk7DQogIH0NCg0KICBmdW5jdGlvbiBjcmVhdGUoKSBwYXlhYmxlIHsNCiAgICAvL3NlbmQgWCBFdGhlciwgZ2V0IFggY2FsbCB0b2tlbnMgYW5kIFggcHV0IHRva2Vucw0KICAgIGNhbGxUb2tlbi5jcmVhdGUobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsNCiAgICBwdXRUb2tlbi5jcmVhdGUobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsNCiAgICBDcmVhdGUobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHJlZGVlbSh1aW50IHRva2Vucykgew0KICAgIGlmICghcmVzb2x2ZWQpIHsNCiAgICAgIGZlZUFjY291bnQudHJhbnNmZXIoc2FmZU11bCh0b2tlbnMsZmVlKS8oMSBldGhlcikpOw0KICAgICAgY2FsbFRva2VuLmRlc3Ryb3kobXNnLnNlbmRlciwgdG9rZW5zKTsNCiAgICAgIHB1dFRva2VuLmRlc3Ryb3kobXNnLnNlbmRlciwgdG9rZW5zKTsNCiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoc2FmZU11bCh0b2tlbnMsKDEgZXRoZXIpLWZlZSkvKDEgZXRoZXIpKTsNCiAgICAgIFJlZGVlbShtc2cuc2VuZGVyLCB0b2tlbnMsIHRva2VucywgdG9rZW5zKTsNCiAgICB9IGVsc2UgaWYgKHJlc29sdmVkKSB7DQogICAgICB1aW50IGNhbGxUb2tlbkJhbGFuY2UgPSBjYWxsVG9rZW4uYmFsYW5jZU9mKG1zZy5zZW5kZXIpOw0KICAgICAgdWludCBwdXRUb2tlbkJhbGFuY2UgPSBwdXRUb2tlbi5iYWxhbmNlT2YobXNnLnNlbmRlcik7DQogICAgICBjYWxsVG9rZW4uZGVzdHJveShtc2cuc2VuZGVyLCBjYWxsVG9rZW5CYWxhbmNlKTsNCiAgICAgIHB1dFRva2VuLmRlc3Ryb3kobXNnLnNlbmRlciwgcHV0VG9rZW5CYWxhbmNlKTsNCiAgICAgIHVpbnQgdmFsdWUgPSAwOw0KICAgICAgaWYgKG91dGNvbWUgPD0gc3RyaWtlQ2FsbCkgew0KICAgICAgICB2YWx1ZSA9IHNhZmVNdWwocHV0VG9rZW5CYWxhbmNlLCAoc3RyaWtlQ2FsbCAtIHN0cmlrZVB1dCkpIC8gKDEgZXRoZXIpOw0KICAgICAgfSBlbHNlIGlmIChvdXRjb21lID49IHN0cmlrZVB1dCkgew0KICAgICAgICB2YWx1ZSA9IHNhZmVNdWwoY2FsbFRva2VuQmFsYW5jZSwgKHN0cmlrZUNhbGwgLSBzdHJpa2VQdXQpKSAvICgxIGV0aGVyKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHZhbHVlID0gc2FmZU11bChjYWxsVG9rZW5CYWxhbmNlLCAob3V0Y29tZSAtIHN0cmlrZUNhbGwpKSAvICgxIGV0aGVyKSArIHNhZmVNdWwocHV0VG9rZW5CYWxhbmNlLCAoc3RyaWtlUHV0IC0gb3V0Y29tZSkpIC8gKDEgZXRoZXIpOw0KICAgICAgfQ0KICAgICAgZmVlQWNjb3VudC50cmFuc2ZlcihzYWZlTXVsKHZhbHVlLGZlZSkvKDEgZXRoZXIpKTsNCiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoc2FmZU11bCh2YWx1ZSwoMSBldGhlciktZmVlKS8oMSBldGhlcikpOw0KICAgICAgUmVkZWVtKG1zZy5zZW5kZXIsIHZhbHVlLCBjYWxsVG9rZW5CYWxhbmNlLCBwdXRUb2tlbkJhbGFuY2UpOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHJlc29sdmUodWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMsIGJ5dGVzMzIgdmFsdWUpIHsNCiAgICByZXF1aXJlKGVjcmVjb3ZlcihzaGEzKGZhY3RIYXNoLCB2YWx1ZSksIHYsIHIsIHMpID09IGV0aEFkZHIpOw0KICAgIHJlcXVpcmUoIXJlc29sdmVkKTsNCiAgICB1aW50IHZhbHVlSW50ID0gdWludCh2YWx1ZSk7DQogICAgcmVxdWlyZSAodmFsdWVJbnQ9PTAgfHwgdmFsdWVJbnQ9PTEpOw0KICAgIG91dGNvbWUgPSB2YWx1ZUludDsNCiAgICByZXNvbHZlZCA9IHRydWU7DQogICAgUmVzb2x2ZShyZXNvbHZlZCwgb3V0Y29tZSk7DQogIH0NCn0NCiov'