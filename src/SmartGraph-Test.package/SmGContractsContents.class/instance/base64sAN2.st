base 64 content
base64sAN2
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KY29udHJhY3QgQmFzZSB7DQoNCiAgICBmdW5jdGlvbiBtYXgodWludCBhLCB1aW50IGIpIHJldHVybnMgKHVpbnQpIHsgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOyB9DQogICAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7IHJldHVybiBhIDw9IGIgPyBhIDogYjsgfQ0KDQogICAgbW9kaWZpZXIgb25seShhZGRyZXNzIGFsbG93ZWQpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gYWxsb3dlZCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQoNCiAgICAvLy9AcmV0dXJuIFRydWUgaWYgYF9hZGRyYCBpcyBhIGNvbnRyYWN0DQogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmIChfYWRkciA9PSAwKSByZXR1cm4gZmFsc2U7DQogICAgICAgIHVpbnQgc2l6ZTsNCiAgICAgICAgYXNzZW1ibHkgew0KICAgICAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKHNpemUgPiAwKTsNCiAgICB9DQoNCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgLy8gKiAgICAgICAgICByZWVudHJhbmN5IGhhbmRsaW5nICAgICAgICAgICAgICAgICAgKg0KICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KICAgIC8vQGRldiBwcmVkZWZpbmVkIGxvY2tzICh1cCB0byB1aW50IGJpdCBsZW5ndGgsIGkuZS4gMjU2IHBvc3NpYmxlKQ0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAwID0gMiAqKiAwOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAxID0gMiAqKiAxOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAyID0gMiAqKiAyOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAzID0gMiAqKiAzOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA0ID0gMiAqKiA0Ow0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA1ID0gMiAqKiA1Ow0KDQogICAgLy9wcmV2ZW50cyByZWVudHJhbmN5IGF0dGFjczogc3BlY2lmaWMgbG9ja3MNCiAgICB1aW50IHByaXZhdGUgYml0bG9ja3MgPSAwOw0KICAgIG1vZGlmaWVyIG5vUmVlbnRyYW5jeSh1aW50IG0pIHsNCiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOw0KICAgICAgICBpZiAoX2xvY2tzICYgbSA+IDApIHRocm93Ow0KICAgICAgICBiaXRsb2NrcyB8PSBtOw0KICAgICAgICBfOw0KICAgICAgICBiaXRsb2NrcyA9IF9sb2NrczsNCiAgICB9DQoNCiAgICBtb2RpZmllciBub0FueVJlZW50cmFuY3kgew0KICAgICAgICB2YXIgX2xvY2tzID0gYml0bG9ja3M7DQogICAgICAgIGlmIChfbG9ja3MgPiAwKSB0aHJvdzsNCiAgICAgICAgYml0bG9ja3MgPSB1aW50KC0xKTsNCiAgICAgICAgXzsNCiAgICAgICAgYml0bG9ja3MgPSBfbG9ja3M7DQogICAgfQ0KDQogICAgLy8vQGRldiBlbXB0eSBtYXJraW5nIG1vZGlmaWVyIHNpZ25hbGluZyB0byB1c2VyIG9mIHRoZSBtYXJrZWQgZnVuY3Rpb24gLCB0aGF0IGl0IGNhbiBjYXVzZSBhbiByZWVudHJhbnQgY2FsbC4NCiAgICAvLy8gICAgIGRldmVsb3BlciBzaG91bGQgbWFrZSB0aGUgY2FsbGVyIGZ1bmN0aW9uIHJlZW50cmFudC1zYWZlIGlmIGl0IHVzZSBhIHJlZW50cmFudCBmdW5jdGlvbi4NCiAgICBtb2RpZmllciByZWVudHJhbnQgeyBfOyB9DQoNCn0NCg0KY29udHJhY3QgT3duZWQgaXMgQmFzZSB7DQoNCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsNCg0KICAgIGZ1bmN0aW9uIE93bmVkKCkgew0KICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHkob3duZXIpIHsNCiAgICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgb25seShuZXdPd25lcikgew0KICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOw0KICAgICAgICBvd25lciA9IG5ld093bmVyOw0KICAgIH0NCg0KICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7DQoNCn0NCg0KDQpjb250cmFjdCBFUkMyMCBpcyBPd25lZCB7DQoNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaXNTdGFydGVkT25seSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgew0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7DQogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaXNTdGFydGVkT25seSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7DQogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsNCiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIGlzU3RhcnRlZE9ubHkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgew0KICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgICB9DQoNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCg0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Ow0KICAgIGJvb2wgICAgcHVibGljIGlzU3RhcnRlZCA9IGZhbHNlOw0KDQogICAgbW9kaWZpZXIgb25seUhvbGRlcihhZGRyZXNzIGhvbGRlcikgew0KICAgICAgICBpZiAoYmFsYW5jZU9mKGhvbGRlcikgPT0gMCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgbW9kaWZpZXIgaXNTdGFydGVkT25seSgpIHsNCiAgICAgICAgaWYgKCFpc1N0YXJ0ZWQpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KfQ0KDQoNCmNvbnRyYWN0IFN1YnNjcmlwdGlvbk1vZHVsZSB7DQogICAgZnVuY3Rpb24gYXR0YWNoVG9rZW4oYWRkcmVzcyBhZGRyKSBwdWJsaWMgOw0KfQ0KDQpjb250cmFjdCBTQU4gaXMgT3duZWQsIEVSQzIwIHsNCg0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSAgICAgPSAiU0FOdGltZW50IFRFU1QgdG9rZW4iOw0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sICAgPSAiU0FOLlRFU1QuRVQuMSI7DQogICAgdWludDggIHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE1Ow0KDQogICAgYWRkcmVzcyBDUk9XRFNBTEVfTUlOVEVSID0gMHhBNjQzQTIyNzJCNjE3MDk5NDg3MkJCMjQ3NTlGNGQ5Mjg2MzFkOTQwOw0KICAgIGFkZHJlc3MgcHVibGljIFNVQlNDUklQVElPTl9NT0RVTEUgPSAweDAwMDAwMDAwOw0KICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5Ow0KDQogICAgdWludCBwdWJsaWMgUExBVEZPUk1fRkVFX1BFUl8xMDAwMCA9IDE7IC8vMC4wMSUNCiAgICB1aW50IHB1YmxpYyB0b3RhbE9uRGVwb3NpdDsNCiAgICB1aW50IHB1YmxpYyB0b3RhbEluQ2lyY3VsYXRpb247DQoNCiAgICAvLy9AZGV2IGNvbnN0cnVjdG9yDQogICAgZnVuY3Rpb24gU0FOKCkgew0KICAgICAgICBiZW5lZmljaWFyeSA9IG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQoNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyBEb24ndCBhY2NlcHQgZXRoZXJzDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgZnVuY3Rpb24gKCkgew0KICAgICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICAvLz09PT09PT09IFNFQ1RJT04gQ29uZmlndXJhdGlvbjogT3duZXIgb25seSA9PT09PT09PQ0KICAgIC8vDQogICAgLy8vQG5vdGljZSBzZXQgYmVuZWZpY2lhcnkgLSB0aGUgYWNjb3VudCByZWNlaXZpbmcgcGxhdGZvcm0gZmVlcy4NCiAgICBmdW5jdGlvbiBzZXRCZW5lZmljaWFyeShhZGRyZXNzIG5ld0JlbmVmaWNpYXJ5KQ0KICAgIGV4dGVybmFsDQogICAgb25seShvd25lcikgew0KICAgICAgICBiZW5lZmljaWFyeSA9IG5ld0JlbmVmaWNpYXJ5Ow0KICAgIH0NCg0KDQogICAgLy8vQG5vdGljZSBhdHRhY2ggbW9kdWxlIG1hbmFnaW5nIHN1YnNjcmlwdGlvbnMuIGlmIHN1Yk1vZHVsZT09MHgwLCB0aGVuIGRpc2FibGVzIHN1YnNjcmlwdGlvbiBmdW5jdGlvbmFsaXR5IGZvciB0aGlzIHRva2VuLg0KICAgIC8vLyBkZXRhY2hlZCBtb2R1bGUgY2FuIHVzdWFsbHkgbWFuYWdlIHN1YnNjcmlwdGlvbnMsIGJ1dCBhbGwgb3BlcmF0aW9ucyBjaGFuZ2luZyB0b2tlbiBiYWxhbmNlcyBhcmUgZGlzYWJsZWQuDQogICAgZnVuY3Rpb24gYXR0YWNoU3Vic2NyaXB0aW9uTW9kdWxlKFN1YnNjcmlwdGlvbk1vZHVsZSBzdWJNb2R1bGUpDQogICAgbm9BbnlSZWVudHJhbmN5DQogICAgZXh0ZXJuYWwNCiAgICBvbmx5KG93bmVyKSB7DQogICAgICAgIFNVQlNDUklQVElPTl9NT0RVTEUgPSBzdWJNb2R1bGU7DQogICAgICAgIGlmIChhZGRyZXNzKHN1Yk1vZHVsZSkgPiAwKSBzdWJNb2R1bGUuYXR0YWNoVG9rZW4odGhpcyk7DQogICAgfQ0KDQogICAgLy8vQG5vdGljZSBzZXQgcGxhdGZvcm0gZmVlIGRlbm9taW5hdGVkIGluIDEvMTAwMDAgb2YgU0FOIHRva2VuLiBUaHVzICIxIiBtZWFucyAwLjAxJSBvZiBTQU4gdG9rZW4uDQogICAgZnVuY3Rpb24gc2V0UGxhdGZvcm1GZWVQZXIxMDAwMCh1aW50IG5ld0ZlZSkNCiAgICBleHRlcm5hbA0KICAgIG9ubHkob3duZXIpIHsNCiAgICAgICAgcmVxdWlyZSAobmV3RmVlIDw9IDEwMDAwKTsgLy9mb3JtYWxseSBtYXhpbXVtIGZlZSBpcyAxMDAlIChjb21wbGV0ZWx5IGluc2FuZSBidXQgdGVjaG5pY2FsbHkgcG9zc2libGUpDQogICAgICAgIFBMQVRGT1JNX0ZFRV9QRVJfMTAwMDAgPSBuZXdGZWU7DQogICAgfQ0KDQoNCiAgICAvLz09PT09PT09IEludGVyZmFjZSBYUmF0ZVByb3ZpZGVyOiBhIHRyaXZpYWwgZXhjaGFuZ2UgcmF0ZSBwcm92aWRlci4gUmF0ZSBpcyAxOjEgYW5kIFNBTiBzeW1ib2wgYXMgdGhlIGNvZGUNCiAgICAvLw0KICAgIC8vL0BkZXYgdXNlZCBhcyBhIGRlZmF1bHQgWFJhdGVQcm92aWRlciAoaWQ9PTApIGJ5IHN1YnNjcmlwdGlvbiBtb2R1bGUuDQogICAgLy8vQG5vdGljZSByZXR1cm5zIGFsd2F5cyAxIGJlY2F1c2UgZXhjaGFuZ2UgcmF0ZSBvZiB0aGUgdG9rZW4gdG8gaXRzZWxmIGlzIGFsd2F5cyAxLg0KICAgIGZ1bmN0aW9uIGdldFJhdGUoKSByZXR1cm5zKHVpbnQzMiAsdWludDMyKSB7IHJldHVybiAoMSwxKTsgIH0NCiAgICBmdW5jdGlvbiBnZXRDb2RlKCkgcHVibGljIHJldHVybnMoc3RyaW5nKSAgeyByZXR1cm4gc3ltYm9sOyB9DQoNCg0KICAgIC8vPT09PSBJbnRlcmZhY2UgRVJDMjBNb2R1bGVTdXBwb3J0OiBTdWJzY3JpcHRpb24sIERlcG9zaXQgYW5kIFBheW1lbnQgU3VwcG9ydCA9PT09PQ0KICAgIC8vLw0KICAgIC8vL0BkZXYgdXNlZCBieSBzdWJzY3JpcHRpb24gbW9kdWxlIHRvIG9wZXJhdGUgb24gdG9rZW4gYmFsYW5jZXMuDQogICAgLy8vQHBhcmFtIG1zZ19zZW5kZXIgc2hvdWxkIGJlIGFuIG9yaWdpbmFsIG1zZy5zZW5kZXIgcHJvdmlkZWQgdG8gc3Vic2NyaXB0aW9uIG1vZHVsZS4NCiAgICBmdW5jdGlvbiBfZnVsZmlsbFByZWFwcHJvdmVkUGF5bWVudChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGFkZHJlc3MgbXNnX3NlbmRlcikNCiAgICBwdWJsaWMNCiAgICBvbmx5VHJ1c3RlZA0KICAgIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIHN1Y2Nlc3MgPSBfZnJvbSAhPSBtc2dfc2VuZGVyICYmIGFsbG93ZWRbX2Zyb21dW21zZ19zZW5kZXJdID49IF92YWx1ZTsNCiAgICAgICAgaWYgKCFzdWNjZXNzKSB7DQogICAgICAgICAgICBQYXltZW50KF9mcm9tLCBfdG8sIF92YWx1ZSwgX2ZlZShfdmFsdWUpLCBtc2dfc2VuZGVyLCBQYXltZW50U3RhdHVzLkFQUFJPVkFMX0VSUk9SLCAwKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHN1Y2Nlc3MgPSBfZnVsZmlsbFBheW1lbnQoX2Zyb20sIF90bywgX3ZhbHVlLCAwLCBtc2dfc2VuZGVyKTsNCiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnX3NlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBzdWNjZXNzOw0KICAgIH0NCg0KICAgIC8vL0BkZXYgdXNlZCBieSBzdWJzY3JpcHRpb24gbW9kdWxlIHRvIG9wZXJhdGUgb24gdG9rZW4gYmFsYW5jZXMuDQogICAgLy8vQHBhcmFtIG1zZ19zZW5kZXIgc2hvdWxkIGJlIGFuIG9yaWdpbmFsIG1zZy5zZW5kZXIgcHJvdmlkZWQgdG8gc3Vic2NyaXB0aW9uIG1vZHVsZS4NCiAgICBmdW5jdGlvbiBfZnVsZmlsbFBheW1lbnQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCB1aW50IHN1YklkLCBhZGRyZXNzIG1zZ19zZW5kZXIpDQogICAgcHVibGljDQogICAgb25seVRydXN0ZWQNCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgdmFyIGZlZSA9IF9mZWUoX3ZhbHVlKTsNCiAgICAgICAgYXNzZXJ0IChmZWUgPD0gX3ZhbHVlKTsgLy9pbnRlcm5hbCBzYW5pdHkgY2hlY2sNCiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsNCiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZSAtIGZlZTsNCiAgICAgICAgICAgIGJhbGFuY2VzW2JlbmVmaWNpYXJ5XSArPSBmZWU7DQogICAgICAgICAgICBQYXltZW50KF9mcm9tLCBfdG8sIF92YWx1ZSwgZmVlLCBtc2dfc2VuZGVyLCBQYXltZW50U3RhdHVzLk9LLCBzdWJJZCk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIFBheW1lbnQoX2Zyb20sIF90bywgX3ZhbHVlLCBmZWUsIG1zZ19zZW5kZXIsIFBheW1lbnRTdGF0dXMuQkFMQU5DRV9FUlJPUiwgc3ViSWQpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gX2ZlZSh1aW50IF92YWx1ZSkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCBmZWUpIHsNCiAgICAgICAgcmV0dXJuIF92YWx1ZSAqIFBMQVRGT1JNX0ZFRV9QRVJfMTAwMDAgLyAxMDAwMDsNCiAgICB9DQoNCiAgICAvLy9Abm90aWNlIHVzZWQgYnkgc3Vic2NyaXB0aW9uIG1vZHVsZSB0byByZS1jcmVhdGUgdG9rZW4gZnJvbSByZXR1cm5pbmcgZGVwb3NpdC4NCiAgICAvLy9AZGV2IGEgc3Vic2NyaXB0aW9uIG1vZHVsZSBpcyByZXNwb25zaWJsZSB0byBjb3JyZWN0IGRlcG9zaXQgbWFuYWdlbWVudC4NCiAgICBmdW5jdGlvbiBfbWludEZyb21EZXBvc2l0KGFkZHJlc3Mgb3duZXIsIHVpbnQgYW1vdW50KQ0KICAgIHB1YmxpYw0KICAgIG9ubHlUcnVzdGVkIHsNCiAgICAgICAgYmFsYW5jZXNbb3duZXJdICs9IGFtb3VudDsNCiAgICAgICAgdG90YWxPbkRlcG9zaXQgLT0gYW1vdW50Ow0KICAgICAgICB0b3RhbEluQ2lyY3VsYXRpb24gKz0gYW1vdW50Ow0KICAgIH0NCg0KICAgIC8vL0Bub3RpY2UgdXNlZCBieSBzdWJzY3JpcHRpb24gbW9kdWxlIHRvIGJ1cm4gdG9rZW4gd2hpbGUgY3JlYXRpbmcgYSBuZXcgZGVwb3NpdC4NCiAgICAvLy9AZGV2IGEgc3Vic2NyaXB0aW9uIG1vZHVsZSBpcyByZXNwb25zaWJsZSB0byBjcmVhdGUgYW5kIG1haW50YWluIHRoZSBkZXBvc2l0IHJlY29yZC4NCiAgICBmdW5jdGlvbiBfYnVybkZvckRlcG9zaXQoYWRkcmVzcyBvd25lciwgdWludCBhbW91bnQpDQogICAgcHVibGljDQogICAgb25seVRydXN0ZWQNCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW293bmVyXSA+PSBhbW91bnQpIHsNCiAgICAgICAgICAgIGJhbGFuY2VzW293bmVyXSAtPSBhbW91bnQ7DQogICAgICAgICAgICB0b3RhbE9uRGVwb3NpdCArPSBhbW91bnQ7DQogICAgICAgICAgICB0b3RhbEluQ2lyY3VsYXRpb24gLT0gYW1vdW50Ow0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQ0KICAgIH0NCg0KICAgIC8vPT09PT09PT09IENyb3dkc2FsZSBPbmx5ID09PT09PT09PT09PT09PQ0KICAgIC8vL0Bub3RpY2UgbWludCBuZXcgdG9rZW4gZm9yIGdpdmVuIGFjY291bnQgaW4gY3Jvd2RzYWxlIHN0YWdlDQogICAgLy8vQGRldiBhbGxvd2VkIG9ubHkgaWYgdG9rZW4gbm90IHN0YXJ0ZWQgeWV0IGFuZCBvbmx5IGZvciByZWdpc3RlcmVkIG1pbnRlci4NCiAgICAvLy9AZGV2IHRva2VucyBhcmUgYmVjb21lIGluIGNpcmN1bGF0aW9uIGFmdGVyIHRva2VuIHN0YXJ0Lg0KICAgIGZ1bmN0aW9uIG1pbnQodWludCBhbW91bnQsIGFkZHJlc3MgYWNjb3VudCkNCiAgICBvbmx5Q3Jvd2RzYWxlTWludGVyDQogICAgaXNOb3RTdGFydGVkT25seQ0KICAgIHsNCiAgICAgICAgdG90YWxTdXBwbHkgKz0gYW1vdW50Ow0KICAgICAgICBiYWxhbmNlc1thY2NvdW50XSs9YW1vdW50Ow0KICAgIH0NCg0KICAgIC8vL0Bub3RpY2Ugc3RhcnQgbm9ybWFsIG9wZXJhdGlvbiBvZiB0aGUgdG9rZW4uIE5vIG1pbnRpbmcgaXMgcG9zc2libGUgYWZ0ZXIgdGhpcyBwb2ludC4NCiAgICBmdW5jdGlvbiBzdGFydCgpDQogICAgaXNOb3RTdGFydGVkT25seQ0KICAgIG9ubHkob3duZXIpIHsNCiAgICAgICAgdG90YWxJbkNpcmN1bGF0aW9uID0gdG90YWxTdXBwbHk7DQogICAgICAgIGlzU3RhcnRlZCA9IHRydWU7DQogICAgfQ0KDQogICAgLy89PT09PT09PT0gU0VDVElPTjogTW9kaWZpZXIgPT09PT09PT09PT09PT09DQoNCiAgICBtb2RpZmllciBvbmx5Q3Jvd2RzYWxlTWludGVyKCkgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBDUk9XRFNBTEVfTUlOVEVSKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5VHJ1c3RlZCgpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gU1VCU0NSSVBUSU9OX01PRFVMRSkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLy8vQGRldiB0b2tlbiBub3Qgc3RhcnRlZCBtZWFucyBtaW50aW5nIGlzIHBvc3NpYmxlLCBidXQgdXN1YWwgdG9rZW4gb3BlcmF0aW9ucyBhcmUgbm90Lg0KICAgIG1vZGlmaWVyIGlzTm90U3RhcnRlZE9ubHkoKSB7DQogICAgICAgIGlmIChpc1N0YXJ0ZWQpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIGVudW0gUGF5bWVudFN0YXR1cyB7T0ssIEJBTEFOQ0VfRVJST1IsIEFQUFJPVkFMX0VSUk9SfQ0KICAgIC8vL0Bub3RpY2UgZXZlbnQgaXNzdWVkIG9uIGFueSBmZWUgYmFzZWQgcGF5bWVudCAobWFkZSBvZiBmYWlsZWQpLg0KICAgIC8vL0BwYXJhbSBzdWJJZCAtIHJlbGF0ZWQgc3Vic2NyaXB0aW9uIElkIGlmIGFueSwgb3IgemVybyBvdGhlcndpc2UuDQogICAgZXZlbnQgUGF5bWVudChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHVpbnQgX2ZlZSwgYWRkcmVzcyBjYWxsZXIsIFBheW1lbnRTdGF0dXMgc3RhdHVzLCB1aW50IHN1YklkKTsNCg0KfS8vY29udHJhY3QgU0FO'