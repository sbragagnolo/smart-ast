base 64 content
base64sAN3
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KY29udHJhY3QgQmFzZSB7DQoNCiAgICBmdW5jdGlvbiBtYXgodWludCBhLCB1aW50IGIpIHJldHVybnMgKHVpbnQpIHsgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOyB9DQogICAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7IHJldHVybiBhIDw9IGIgPyBhIDogYjsgfQ0KDQogICAgbW9kaWZpZXIgb25seShhZGRyZXNzIGFsbG93ZWQpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gYWxsb3dlZCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQoNCiAgICAvLy9AcmV0dXJuIFRydWUgaWYgYF9hZGRyYCBpcyBhIGNvbnRyYWN0DQogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmIChfYWRkciA9PSAwKSByZXR1cm4gZmFsc2U7DQogICAgICAgIHVpbnQgc2l6ZTsNCiAgICAgICAgYXNzZW1ibHkgew0KICAgICAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKHNpemUgPiAwKTsNCiAgICB9DQoNCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgLy8gKiAgICAgICAgICByZWVudHJhbmN5IGhhbmRsaW5nICAgICAgICAgICAgICAgICAgKg0KICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KICAgIC8vQGRldiBwcmVkZWZpbmVkIGxvY2tzICh1cCB0byB1aW50IGJpdCBsZW5ndGgsIGkuZS4gMjU2IHBvc3NpYmxlKQ0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAwID0gMiAqKiAwOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAxID0gMiAqKiAxOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAyID0gMiAqKiAyOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAzID0gMiAqKiAzOw0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA0ID0gMiAqKiA0Ow0KICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA1ID0gMiAqKiA1Ow0KDQogICAgLy9wcmV2ZW50cyByZWVudHJhbmN5IGF0dGFjczogc3BlY2lmaWMgbG9ja3MNCiAgICB1aW50IHByaXZhdGUgYml0bG9ja3MgPSAwOw0KICAgIG1vZGlmaWVyIG5vUmVlbnRyYW5jeSh1aW50IG0pIHsNCiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOw0KICAgICAgICBpZiAoX2xvY2tzICYgbSA+IDApIHRocm93Ow0KICAgICAgICBiaXRsb2NrcyB8PSBtOw0KICAgICAgICBfOw0KICAgICAgICBiaXRsb2NrcyA9IF9sb2NrczsNCiAgICB9DQoNCiAgICBtb2RpZmllciBub0FueVJlZW50cmFuY3kgew0KICAgICAgICB2YXIgX2xvY2tzID0gYml0bG9ja3M7DQogICAgICAgIGlmIChfbG9ja3MgPiAwKSB0aHJvdzsNCiAgICAgICAgYml0bG9ja3MgPSB1aW50KC0xKTsNCiAgICAgICAgXzsNCiAgICAgICAgYml0bG9ja3MgPSBfbG9ja3M7DQogICAgfQ0KDQogICAgLy8vQGRldiBlbXB0eSBtYXJraW5nIG1vZGlmaWVyIHNpZ25hbGluZyB0byB1c2VyIG9mIHRoZSBtYXJrZWQgZnVuY3Rpb24gLCB0aGF0IGl0IGNhbiBjYXVzZSBhbiByZWVudHJhbnQgY2FsbC4NCiAgICAvLy8gICAgIGRldmVsb3BlciBzaG91bGQgbWFrZSB0aGUgY2FsbGVyIGZ1bmN0aW9uIHJlZW50cmFudC1zYWZlIGlmIGl0IHVzZSBhIHJlZW50cmFudCBmdW5jdGlvbi4NCiAgICBtb2RpZmllciByZWVudHJhbnQgeyBfOyB9DQoNCn0NCg0KY29udHJhY3QgT3duZWQgaXMgQmFzZSB7DQoNCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsNCg0KICAgIGZ1bmN0aW9uIE93bmVkKCkgew0KICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHkob3duZXIpIHsNCiAgICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgb25seShuZXdPd25lcikgew0KICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOw0KICAgICAgICBvd25lciA9IG5ld093bmVyOw0KICAgIH0NCg0KICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7DQoNCn0NCg0KDQpjb250cmFjdCBFUkMyMCBpcyBPd25lZCB7DQoNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaXNTdGFydGVkT25seSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgew0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7DQogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaXNTdGFydGVkT25seSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7DQogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsNCiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIGlzU3RhcnRlZE9ubHkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgew0KICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgICB9DQoNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCg0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Ow0KICAgIGJvb2wgICAgcHVibGljIGlzU3RhcnRlZCA9IGZhbHNlOw0KDQogICAgbW9kaWZpZXIgb25seUhvbGRlcihhZGRyZXNzIGhvbGRlcikgew0KICAgICAgICBpZiAoYmFsYW5jZU9mKGhvbGRlcikgPT0gMCkgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgbW9kaWZpZXIgaXNTdGFydGVkT25seSgpIHsNCiAgICAgICAgaWYgKCFpc1N0YXJ0ZWQpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KfQ0KDQoNCmNvbnRyYWN0IFN1YnNjcmlwdGlvbk1vZHVsZSB7DQogICAgZnVuY3Rpb24gYXR0YWNoVG9rZW4oYWRkcmVzcyBhZGRyKSBwdWJsaWMgOw0KfQ0KDQpjb250cmFjdCBTQU4gaXMgT3duZWQsIEVSQzIwIHsNCg0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSAgICAgPSAiU0FOdGltZW50IFRFU1QgdG9rZW4iOw0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sICAgPSAiU0FOLlRFU1QuTUFYLjMiOw0KICAgIHVpbnQ4ICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxNTsNCg0KICAgIGFkZHJlc3MgQ1JPV0RTQUxFX01JTlRFUiA9IDB4ZTg2YjZjRDQ5QmNmNDNGOTRFMzU2NkNmQUY1ZTBkMTM2ZTNjRjhmRDsNCiAgICBhZGRyZXNzIHB1YmxpYyBTVUJTQ1JJUFRJT05fTU9EVUxFID0gMHgwMDAwMDAwMDsNCiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeTsNCg0KICAgIHVpbnQgcHVibGljIFBMQVRGT1JNX0ZFRV9QRVJfMTAwMDAgPSAxOyAvLzAuMDElDQogICAgdWludCBwdWJsaWMgdG90YWxPbkRlcG9zaXQ7DQogICAgdWludCBwdWJsaWMgdG90YWxJbkNpcmN1bGF0aW9uOw0KDQogICAgLy8vQGRldiBjb25zdHJ1Y3Rvcg0KICAgIGZ1bmN0aW9uIFNBTigpIHsNCiAgICAgICAgYmVuZWZpY2lhcnkgPSBvd25lciA9IG1zZy5zZW5kZXI7DQogICAgfQ0KDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLy8gRG9uJ3QgYWNjZXB0IGV0aGVycw0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgLy89PT09PT09PSBTRUNUSU9OIENvbmZpZ3VyYXRpb246IE93bmVyIG9ubHkgPT09PT09PT0NCiAgICAvLw0KICAgIC8vL0Bub3RpY2Ugc2V0IGJlbmVmaWNpYXJ5IC0gdGhlIGFjY291bnQgcmVjZWl2aW5nIHBsYXRmb3JtIGZlZXMuDQogICAgZnVuY3Rpb24gc2V0QmVuZWZpY2lhcnkoYWRkcmVzcyBuZXdCZW5lZmljaWFyeSkNCiAgICBleHRlcm5hbA0KICAgIG9ubHkob3duZXIpIHsNCiAgICAgICAgYmVuZWZpY2lhcnkgPSBuZXdCZW5lZmljaWFyeTsNCiAgICB9DQoNCg0KICAgIC8vL0Bub3RpY2UgYXR0YWNoIG1vZHVsZSBtYW5hZ2luZyBzdWJzY3JpcHRpb25zLiBpZiBzdWJNb2R1bGU9PTB4MCwgdGhlbiBkaXNhYmxlcyBzdWJzY3JpcHRpb24gZnVuY3Rpb25hbGl0eSBmb3IgdGhpcyB0b2tlbi4NCiAgICAvLy8gZGV0YWNoZWQgbW9kdWxlIGNhbiB1c3VhbGx5IG1hbmFnZSBzdWJzY3JpcHRpb25zLCBidXQgYWxsIG9wZXJhdGlvbnMgY2hhbmdpbmcgdG9rZW4gYmFsYW5jZXMgYXJlIGRpc2FibGVkLg0KICAgIGZ1bmN0aW9uIGF0dGFjaFN1YnNjcmlwdGlvbk1vZHVsZShTdWJzY3JpcHRpb25Nb2R1bGUgc3ViTW9kdWxlKQ0KICAgIG5vQW55UmVlbnRyYW5jeQ0KICAgIGV4dGVybmFsDQogICAgb25seShvd25lcikgew0KICAgICAgICBTVUJTQ1JJUFRJT05fTU9EVUxFID0gc3ViTW9kdWxlOw0KICAgICAgICBpZiAoYWRkcmVzcyhzdWJNb2R1bGUpID4gMCkgc3ViTW9kdWxlLmF0dGFjaFRva2VuKHRoaXMpOw0KICAgIH0NCg0KICAgIC8vL0Bub3RpY2Ugc2V0IHBsYXRmb3JtIGZlZSBkZW5vbWluYXRlZCBpbiAxLzEwMDAwIG9mIFNBTiB0b2tlbi4gVGh1cyAiMSIgbWVhbnMgMC4wMSUgb2YgU0FOIHRva2VuLg0KICAgIGZ1bmN0aW9uIHNldFBsYXRmb3JtRmVlUGVyMTAwMDAodWludCBuZXdGZWUpDQogICAgZXh0ZXJuYWwNCiAgICBvbmx5KG93bmVyKSB7DQogICAgICAgIHJlcXVpcmUgKG5ld0ZlZSA8PSAxMDAwMCk7IC8vZm9ybWFsbHkgbWF4aW11bSBmZWUgaXMgMTAwJSAoY29tcGxldGVseSBpbnNhbmUgYnV0IHRlY2huaWNhbGx5IHBvc3NpYmxlKQ0KICAgICAgICBQTEFURk9STV9GRUVfUEVSXzEwMDAwID0gbmV3RmVlOw0KICAgIH0NCg0KDQogICAgLy89PT09PT09PSBJbnRlcmZhY2UgWFJhdGVQcm92aWRlcjogYSB0cml2aWFsIGV4Y2hhbmdlIHJhdGUgcHJvdmlkZXIuIFJhdGUgaXMgMToxIGFuZCBTQU4gc3ltYm9sIGFzIHRoZSBjb2RlDQogICAgLy8NCiAgICAvLy9AZGV2IHVzZWQgYXMgYSBkZWZhdWx0IFhSYXRlUHJvdmlkZXIgKGlkPT0wKSBieSBzdWJzY3JpcHRpb24gbW9kdWxlLg0KICAgIC8vL0Bub3RpY2UgcmV0dXJucyBhbHdheXMgMSBiZWNhdXNlIGV4Y2hhbmdlIHJhdGUgb2YgdGhlIHRva2VuIHRvIGl0c2VsZiBpcyBhbHdheXMgMS4NCiAgICBmdW5jdGlvbiBnZXRSYXRlKCkgcmV0dXJucyh1aW50MzIgLHVpbnQzMikgeyByZXR1cm4gKDEsMSk7ICB9DQogICAgZnVuY3Rpb24gZ2V0Q29kZSgpIHB1YmxpYyByZXR1cm5zKHN0cmluZykgIHsgcmV0dXJuIHN5bWJvbDsgfQ0KDQoNCiAgICAvLz09PT0gSW50ZXJmYWNlIEVSQzIwTW9kdWxlU3VwcG9ydDogU3Vic2NyaXB0aW9uLCBEZXBvc2l0IGFuZCBQYXltZW50IFN1cHBvcnQgPT09PT0NCiAgICAvLy8NCiAgICAvLy9AZGV2IHVzZWQgYnkgc3Vic2NyaXB0aW9uIG1vZHVsZSB0byBvcGVyYXRlIG9uIHRva2VuIGJhbGFuY2VzLg0KICAgIC8vL0BwYXJhbSBtc2dfc2VuZGVyIHNob3VsZCBiZSBhbiBvcmlnaW5hbCBtc2cuc2VuZGVyIHByb3ZpZGVkIHRvIHN1YnNjcmlwdGlvbiBtb2R1bGUuDQogICAgZnVuY3Rpb24gX2Z1bGZpbGxQcmVhcHByb3ZlZFBheW1lbnQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBhZGRyZXNzIG1zZ19zZW5kZXIpDQogICAgcHVibGljDQogICAgb25seVRydXN0ZWQNCiAgICByZXR1cm5zKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBzdWNjZXNzID0gX2Zyb20gIT0gbXNnX3NlbmRlciAmJiBhbGxvd2VkW19mcm9tXVttc2dfc2VuZGVyXSA+PSBfdmFsdWU7DQogICAgICAgIGlmICghc3VjY2Vzcykgew0KICAgICAgICAgICAgUGF5bWVudChfZnJvbSwgX3RvLCBfdmFsdWUsIF9mZWUoX3ZhbHVlKSwgbXNnX3NlbmRlciwgUGF5bWVudFN0YXR1cy5BUFBST1ZBTF9FUlJPUiwgMCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBzdWNjZXNzID0gX2Z1bGZpbGxQYXltZW50KF9mcm9tLCBfdG8sIF92YWx1ZSwgMCwgbXNnX3NlbmRlcik7DQogICAgICAgICAgICBpZiAoc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZ19zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gc3VjY2VzczsNCiAgICB9DQoNCiAgICAvLy9AZGV2IHVzZWQgYnkgc3Vic2NyaXB0aW9uIG1vZHVsZSB0byBvcGVyYXRlIG9uIHRva2VuIGJhbGFuY2VzLg0KICAgIC8vL0BwYXJhbSBtc2dfc2VuZGVyIHNob3VsZCBiZSBhbiBvcmlnaW5hbCBtc2cuc2VuZGVyIHByb3ZpZGVkIHRvIHN1YnNjcmlwdGlvbiBtb2R1bGUuDQogICAgZnVuY3Rpb24gX2Z1bGZpbGxQYXltZW50KGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgdWludCBzdWJJZCwgYWRkcmVzcyBtc2dfc2VuZGVyKQ0KICAgIHB1YmxpYw0KICAgIG9ubHlUcnVzdGVkDQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIHZhciBmZWUgPSBfZmVlKF92YWx1ZSk7DQogICAgICAgIGFzc2VydCAoZmVlIDw9IF92YWx1ZSk7IC8vaW50ZXJuYWwgc2FuaXR5IGNoZWNrDQogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7DQogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWUgLSBmZWU7DQogICAgICAgICAgICBiYWxhbmNlc1tiZW5lZmljaWFyeV0gKz0gZmVlOw0KICAgICAgICAgICAgUGF5bWVudChfZnJvbSwgX3RvLCBfdmFsdWUsIGZlZSwgbXNnX3NlbmRlciwgUGF5bWVudFN0YXR1cy5PSywgc3ViSWQpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBQYXltZW50KF9mcm9tLCBfdG8sIF92YWx1ZSwgZmVlLCBtc2dfc2VuZGVyLCBQYXltZW50U3RhdHVzLkJBTEFOQ0VfRVJST1IsIHN1YklkKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIF9mZWUodWludCBfdmFsdWUpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgZmVlKSB7DQogICAgICAgIHJldHVybiBfdmFsdWUgKiBQTEFURk9STV9GRUVfUEVSXzEwMDAwIC8gMTAwMDA7DQogICAgfQ0KDQogICAgLy8vQG5vdGljZSB1c2VkIGJ5IHN1YnNjcmlwdGlvbiBtb2R1bGUgdG8gcmUtY3JlYXRlIHRva2VuIGZyb20gcmV0dXJuaW5nIGRlcG9zaXQuDQogICAgLy8vQGRldiBhIHN1YnNjcmlwdGlvbiBtb2R1bGUgaXMgcmVzcG9uc2libGUgdG8gY29ycmVjdCBkZXBvc2l0IG1hbmFnZW1lbnQuDQogICAgZnVuY3Rpb24gX21pbnRGcm9tRGVwb3NpdChhZGRyZXNzIG93bmVyLCB1aW50IGFtb3VudCkNCiAgICBwdWJsaWMNCiAgICBvbmx5VHJ1c3RlZCB7DQogICAgICAgIGJhbGFuY2VzW293bmVyXSArPSBhbW91bnQ7DQogICAgICAgIHRvdGFsT25EZXBvc2l0IC09IGFtb3VudDsNCiAgICAgICAgdG90YWxJbkNpcmN1bGF0aW9uICs9IGFtb3VudDsNCiAgICB9DQoNCiAgICAvLy9Abm90aWNlIHVzZWQgYnkgc3Vic2NyaXB0aW9uIG1vZHVsZSB0byBidXJuIHRva2VuIHdoaWxlIGNyZWF0aW5nIGEgbmV3IGRlcG9zaXQuDQogICAgLy8vQGRldiBhIHN1YnNjcmlwdGlvbiBtb2R1bGUgaXMgcmVzcG9uc2libGUgdG8gY3JlYXRlIGFuZCBtYWludGFpbiB0aGUgZGVwb3NpdCByZWNvcmQuDQogICAgZnVuY3Rpb24gX2J1cm5Gb3JEZXBvc2l0KGFkZHJlc3Mgb3duZXIsIHVpbnQgYW1vdW50KQ0KICAgIHB1YmxpYw0KICAgIG9ubHlUcnVzdGVkDQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGlmIChiYWxhbmNlc1tvd25lcl0gPj0gYW1vdW50KSB7DQogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gLT0gYW1vdW50Ow0KICAgICAgICAgICAgdG90YWxPbkRlcG9zaXQgKz0gYW1vdW50Ow0KICAgICAgICAgICAgdG90YWxJbkNpcmN1bGF0aW9uIC09IGFtb3VudDsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0NCiAgICB9DQoNCiAgICAvLz09PT09PT09PSBDcm93ZHNhbGUgT25seSA9PT09PT09PT09PT09PT0NCiAgICAvLy9Abm90aWNlIG1pbnQgbmV3IHRva2VuIGZvciBnaXZlbiBhY2NvdW50IGluIGNyb3dkc2FsZSBzdGFnZQ0KICAgIC8vL0BkZXYgYWxsb3dlZCBvbmx5IGlmIHRva2VuIG5vdCBzdGFydGVkIHlldCBhbmQgb25seSBmb3IgcmVnaXN0ZXJlZCBtaW50ZXIuDQogICAgLy8vQGRldiB0b2tlbnMgYXJlIGJlY29tZSBpbiBjaXJjdWxhdGlvbiBhZnRlciB0b2tlbiBzdGFydC4NCiAgICBmdW5jdGlvbiBtaW50KHVpbnQgYW1vdW50LCBhZGRyZXNzIGFjY291bnQpDQogICAgb25seUNyb3dkc2FsZU1pbnRlcg0KICAgIGlzTm90U3RhcnRlZE9ubHkNCiAgICB7DQogICAgICAgIHRvdGFsU3VwcGx5ICs9IGFtb3VudDsNCiAgICAgICAgYmFsYW5jZXNbYWNjb3VudF0rPWFtb3VudDsNCiAgICB9DQoNCiAgICAvLy9Abm90aWNlIHN0YXJ0IG5vcm1hbCBvcGVyYXRpb24gb2YgdGhlIHRva2VuLiBObyBtaW50aW5nIGlzIHBvc3NpYmxlIGFmdGVyIHRoaXMgcG9pbnQuDQogICAgZnVuY3Rpb24gc3RhcnQoKQ0KICAgIGlzTm90U3RhcnRlZE9ubHkNCiAgICBvbmx5KG93bmVyKSB7DQogICAgICAgIHRvdGFsSW5DaXJjdWxhdGlvbiA9IHRvdGFsU3VwcGx5Ow0KICAgICAgICBpc1N0YXJ0ZWQgPSB0cnVlOw0KICAgIH0NCg0KICAgIC8vPT09PT09PT09IFNFQ1RJT046IE1vZGlmaWVyID09PT09PT09PT09PT09PQ0KDQogICAgbW9kaWZpZXIgb25seUNyb3dkc2FsZU1pbnRlcigpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gQ1JPV0RTQUxFX01JTlRFUikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgbW9kaWZpZXIgb25seVRydXN0ZWQoKSB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IFNVQlNDUklQVElPTl9NT0RVTEUpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vL0BkZXYgdG9rZW4gbm90IHN0YXJ0ZWQgbWVhbnMgbWludGluZyBpcyBwb3NzaWJsZSwgYnV0IHVzdWFsIHRva2VuIG9wZXJhdGlvbnMgYXJlIG5vdC4NCiAgICBtb2RpZmllciBpc05vdFN0YXJ0ZWRPbmx5KCkgew0KICAgICAgICBpZiAoaXNTdGFydGVkKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBlbnVtIFBheW1lbnRTdGF0dXMge09LLCBCQUxBTkNFX0VSUk9SLCBBUFBST1ZBTF9FUlJPUn0NCiAgICAvLy9Abm90aWNlIGV2ZW50IGlzc3VlZCBvbiBhbnkgZmVlIGJhc2VkIHBheW1lbnQgKG1hZGUgb2YgZmFpbGVkKS4NCiAgICAvLy9AcGFyYW0gc3ViSWQgLSByZWxhdGVkIHN1YnNjcmlwdGlvbiBJZCBpZiBhbnksIG9yIHplcm8gb3RoZXJ3aXNlLg0KICAgIGV2ZW50IFBheW1lbnQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCB1aW50IF9mZWUsIGFkZHJlc3MgY2FsbGVyLCBQYXltZW50U3RhdHVzIHN0YXR1cywgdWludCBzdWJJZCk7DQoNCn0vL2NvbnRyYWN0IFNBTg=='