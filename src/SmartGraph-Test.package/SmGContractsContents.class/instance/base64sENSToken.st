base 64 content
base64sENSToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMzsNCg0KLyoqDQogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzDQogKi8NCmxpYnJhcnkgU2FmZU1hdGggew0KICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICB1aW50IGMgPSBhICogYjsNCiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwDQogICAgdWludCBjID0gYSAvIGI7DQogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIGFzc2VydChiIDw9IGEpOw0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKyBiOw0KICAgIGFzc2VydChjID49IGEpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsNCiAgICBpZiAoIWFzc2VydGlvbikgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICB9DQp9DQoNCi8qKg0KICogQHRpdGxlIEVSQzIwQmFzaWMNCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQ0KICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQogKi8NCmNvbnRyYWN0IEVSQzIwQmFzaWMgew0KICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7DQogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOw0KfQ0KDQovKioNCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UNCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICovDQpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsNCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7DQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOw0KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSk7DQogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KfQ0KDQovKioNCiAqIEB0aXRsZSBCYXNpYyB0b2tlbg0KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gDQogKi8NCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7DQogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50Ow0KDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsNCg0KICAvKioNCiAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4NCiAgICovDQogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsNCiAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsNCiAgICAgICB0aHJvdzsNCiAgICAgfQ0KICAgICBfOw0KICB9DQoNCiAgLyoqDQogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcw0KICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uDQogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLg0KICAqLw0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsNCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOw0KICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgfQ0KDQogIC8qKg0KICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuDQogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIA0KICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuDQogICovDQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7DQogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogIH0NCg0KfQ0KDQoNCi8qKg0KICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuDQogKg0KICogQGRldiBJbXBsZW1hbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcnQgdG9rZW4uDQogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbA0KICovDQpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIwIHsNCg0KICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7DQoNCg0KICAvKioNCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyDQogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20NCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvDQogICAqIEBwYXJhbSBfdmFsdWUgdWludCB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQNCiAgICovDQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsNCiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOw0KDQogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0DQogICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93Ow0KDQogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7DQogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOw0KICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsNCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVhaGxmIG9mIG1zZy5zZW5kZXIuDQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4NCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4NCiAgICovDQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsNCg0KICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgDQogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QNCiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToNCiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkNCiAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93Ow0KDQogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGFuIGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLg0KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuDQogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLg0KICAgKiBAcmV0dXJuIEEgdWludCBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuDQogICAqLw0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7DQogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogIH0NCg0KfQ0KDQoNCmNvbnRyYWN0IFNFTlNUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsNCgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsNCg0KCXN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJTRU5TIFRva2VuIjsNCglzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJTTlMiOw0KCXVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7IA0KCXN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICIxLjAiOw0KCQ0KCWFkZHJlc3MgcHVibGljIGV4ZWN1dG9yOw0KCWFkZHJlc3MgcHVibGljIGRldkVUSERlc3RpbmF0aW9uOw0KCWFkZHJlc3MgcHVibGljIGRldlNFTlNEZXN0aW5hdGlvbjsNCgkNCglib29sIHB1YmxpYyBzYWxlSGFzRW5kZWQ7DQoJYm9vbCBwdWJsaWMgbWluQ2FwUmVhY2hlZDsNCglib29sIHB1YmxpYyBhbGxvd1JlZnVuZDsNCg0KCW1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIEVUSENvbnRyaWJ1dGVkOw0KDQoJdWludDI1NiBwdWJsaWMgdG90YWxFVEhSYWlzZWQ7DQoJdWludDI1NiBwdWJsaWMgc2FsZVN0YXJ0QmxvY2s7DQoJdWludDI1NiBwdWJsaWMgc2FsZUVuZEJsb2NrOw0KCXVpbnQyNTYgcHVibGljIGNvbnN0YW50IERFVl9QT1JUSU9OID0gNDU7DQoJdWludDI1NiBwdWJsaWMgY29uc3RhbnQgU0VDVVJJVFlfRVRIRVJfQ0FQID0gMjAwMDAgZXRoZXI7DQoJdWludDI1NiBwdWJsaWMgY29uc3RhbnQgU0VOU19QRVJfRVRIX0JBU0VfUkFURSA9IDUwMDsgDQoJDQoJZnVuY3Rpb24gU0VOU1Rva2VuKA0KCQlhZGRyZXNzIF9kZXZFVEhEZXN0aW5hdGlvbiwNCgkJYWRkcmVzcyBfZGV2U0VOU0Rlc3RpbmF0aW9uLA0KCQl1aW50MjU2IF9zYWxlU3RhcnRCbG9jaywNCgkJdWludDI1NiBfc2FsZUVuZEJsb2NrDQoJKSB7DQoJCWlmIChfZGV2RVRIRGVzdGluYXRpb24gPT0gYWRkcmVzcygweDApKSB0aHJvdzsNCgkJaWYgKF9kZXZTRU5TRGVzdGluYXRpb24gPT0gYWRkcmVzcygweDApKSB0aHJvdzsNCgkJaWYgKF9zYWxlRW5kQmxvY2sgPD0gYmxvY2subnVtYmVyKSB0aHJvdzsNCgkJaWYgKF9zYWxlRW5kQmxvY2sgPD0gX3NhbGVTdGFydEJsb2NrKSB0aHJvdzsNCg0KCQlleGVjdXRvciA9IG1zZy5zZW5kZXI7DQoNCgkJc2FsZUhhc0VuZGVkID0gZmFsc2U7DQoJCW1pbkNhcFJlYWNoZWQgPSBmYWxzZTsNCgkJYWxsb3dSZWZ1bmQgPSBmYWxzZTsNCg0KCQlkZXZFVEhEZXN0aW5hdGlvbiA9IF9kZXZFVEhEZXN0aW5hdGlvbjsNCgkJZGV2U0VOU0Rlc3RpbmF0aW9uID0gX2RldlNFTlNEZXN0aW5hdGlvbjsNCg0KCQl0b3RhbEVUSFJhaXNlZCA9IDA7DQoJCXNhbGVTdGFydEJsb2NrID0gX3NhbGVTdGFydEJsb2NrOw0KCQlzYWxlRW5kQmxvY2sgPSBfc2FsZUVuZEJsb2NrOw0KCQl0b3RhbFN1cHBseSA9IDA7DQoJfQ0KCQ0KCWZ1bmN0aW9uIGNyZWF0ZVRva2VucygpIHBheWFibGUgZXh0ZXJuYWwgew0KCQlpZiAoc2FsZUhhc0VuZGVkKSB0aHJvdzsNCgkJaWYgKGJsb2NrLm51bWJlciA8IHNhbGVTdGFydEJsb2NrKSB0aHJvdzsNCgkJaWYgKGJsb2NrLm51bWJlciA+IHNhbGVFbmRCbG9jaykgdGhyb3c7DQoJCXVpbnQyNTYgbmV3RXRoZXJCYWxhbmNlID0gdG90YWxFVEhSYWlzZWQuYWRkKG1zZy52YWx1ZSk7DQoJCWlmIChuZXdFdGhlckJhbGFuY2UgPiBTRUNVUklUWV9FVEhFUl9DQVApIHRocm93OyANCgkJaWYgKDAgPT0gbXNnLnZhbHVlKSB0aHJvdzsNCgkJDQoJCXVpbnQyNTYgY3VyVG9rZW5SYXRlID0gU0VOU19QRVJfRVRIX0JBU0VfUkFURTsNCgkJdWludDI1NiBhbW91bnRPZkVUSCA9IG1zZy52YWx1ZS5tdWwoY3VyVG9rZW5SYXRlKTsNCg0KCQl1aW50MjU2IHRvdGFsU3VwcGx5U2FmZSA9IHRvdGFsU3VwcGx5LmFkZChhbW91bnRPZkVUSCk7DQoJCXVpbnQyNTYgYmFsYW5jZVNhZmUgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQoYW1vdW50T2ZFVEgpOw0KCQl1aW50MjU2IGNvbnRyaWJ1dGVkU2FmZSA9IEVUSENvbnRyaWJ1dGVkW21zZy5zZW5kZXJdLmFkZChtc2cudmFsdWUpOw0KDQoJCXRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHlTYWZlOw0KCQliYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VTYWZlOw0KDQoJCXRvdGFsRVRIUmFpc2VkID0gbmV3RXRoZXJCYWxhbmNlOw0KCQlFVEhDb250cmlidXRlZFttc2cuc2VuZGVyXSA9IGNvbnRyaWJ1dGVkU2FmZTsNCg0KCX0NCgkNCglmdW5jdGlvbiBlbmRTYWxlKCkgew0KCQlpZiAoc2FsZUhhc0VuZGVkKSB0aHJvdzsNCgkJaWYgKCFtaW5DYXBSZWFjaGVkKSB0aHJvdzsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gZXhlY3V0b3IpIHRocm93Ow0KCQkNCgkJc2FsZUhhc0VuZGVkID0gdHJ1ZTsNCg0KICAgICAgICB1aW50MjU2IGFkZGl0aW9uYWxTRU5TID0gKHRvdGFsU3VwcGx5Lm11bChERVZfUE9SVElPTikpLmRpdigxMDAgLSBERVZfUE9SVElPTik7DQoJCXVpbnQyNTYgdG90YWxTdXBwbHlTYWZlID0gdG90YWxTdXBwbHkuYWRkKGFkZGl0aW9uYWxTRU5TKTsNCg0KCQl1aW50MjU2IGRldlNoYXJlID0gYWRkaXRpb25hbFNFTlM7DQoNCgkJdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseVNhZmU7DQoJCWJhbGFuY2VzW2RldlNFTlNEZXN0aW5hdGlvbl0gPSBkZXZTaGFyZTsNCg0KCQlpZiAodGhpcy5iYWxhbmNlID4gMCkgew0KCQkJaWYgKCFkZXZFVEhEZXN0aW5hdGlvbi5jYWxsLnZhbHVlKHRoaXMuYmFsYW5jZSkoKSkgdGhyb3c7DQoJCX0NCgl9DQoNCglmdW5jdGlvbiB3aXRoZHJhd0Z1bmRzKCkgew0KCQlpZiAoMCA9PSB0aGlzLmJhbGFuY2UpIHRocm93Ow0KCQlpZiAoIWRldkVUSERlc3RpbmF0aW9uLmNhbGwudmFsdWUodGhpcy5iYWxhbmNlKSgpKSB0aHJvdzsNCgl9DQoJDQoJZnVuY3Rpb24gY2hhbmdlRGV2ZWxvcGVyRVRIRGVzdGluYXRpb25BZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIHsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gZXhlY3V0b3IpIHRocm93Ow0KCQlkZXZFVEhEZXN0aW5hdGlvbiA9IF9uZXdBZGRyZXNzOw0KCX0NCgkNCglmdW5jdGlvbiBjaGFuZ2VEZXZlbG9wZXJTRU5TRGVzdGluYXRpb25BZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIHsNCgkJaWYgKG1zZy5zZW5kZXIgIT0gZXhlY3V0b3IpIHRocm93Ow0KCQlkZXZTRU5TRGVzdGluYXRpb24gPSBfbmV3QWRkcmVzczsNCgl9DQoJDQoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB7DQoJCXN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsNCgl9DQoJDQoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgew0KCQlzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsNCgl9DQp9'