base 64 content
base64simpleMixer
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4yOw0KLy9UaGlzIHByb2plY3QgaXMgYmV0YSBzdGFnZSBhbmQgbWlnaHQgY29udGFpbiB1bmtub3duIGJ1Z3MuDQovL0kgYW0gbm90IHJlc3BvbnNpYmxlIGZvciBhbnkgY29uc2VxdWVuY2VzIG9mIGFueSB1c2Ugb2YgdGhlIGNvZGUgb3IgcHJvdG9jb2wgdGhhdCBpcyBzdWdnZXN0ZWQgaGVyZS4NCmNvbnRyYWN0IFNpbXBsZU1peGVyIHsNCiAgICANCiAgICBzdHJ1Y3QgRGVhbHsNCiAgICAgICAgbWFwcGluZyhhZGRyZXNzPT51aW50KSBkZXBvc2l0Ow0KICAgICAgICB1aW50ICAgICAgICAgICAgICAgICAgIGRlcG9zaXRTdW07DQogICAgICAgIG1hcHBpbmcoYWRkcmVzcz0+Ym9vbCkgY2xhaW1zOw0KCSAgICB1aW50IAkJICAgICAgICAgICBudW1DbGFpbXM7DQogICAgICAgIHVpbnQgICAgICAgICAgICAgICAgICAgY2xhaW1TdW07DQoNCiAgICAgICAgdWludCAgICAgICAgICAgICAgICAgICBzdGFydFRpbWU7DQogICAgICAgIHVpbnQgICAgICAgICAgICAgICAgICAgZGVwb3NpdER1cmF0aW9uSW5TZWM7DQogICAgICAgIHVpbnQgICAgICAgICAgICAgICAgICAgY2xhaW1EdXJhdGlvbkluU2VjOw0KICAgICAgICB1aW50ICAgICAgICAgICAgICAgICAgIGNsYWltRGVwb3NpdEluV2VpOw0KICAgICAgICB1aW50ICAgICAgICAgICAgICAgICAgIGNsYWltVmFsdWVJbldlaTsNCiAgICAgCXVpbnQgICAgICAgICAgICAgICAgICAgbWluTnVtQ2xhaW1zOw0KICAgICAgICANCiAgICAgICAgYm9vbCAgICAgICAgICAgICAgICAgICBhY3RpdmU7DQogICAgICAgIGJvb2wgICAgICAgICAgICAgICAgICAgZnVsbHlGdW5kZWQ7DQogICAgfQ0KICAgIA0KICAgIERlYWxbXSAgX2RlYWxzOw0KICAgICANCiAgICBldmVudCBOZXdEZWFsKCBhZGRyZXNzIGluZGV4ZWQgdXNlciwgdWludCBpbmRleGVkIF9kZWFsSWQsIHVpbnQgX3N0YXJ0VGltZSwgdWludCBfZGVwb3NpdER1cmF0aW9uSW5Ib3VycywgdWludCBfY2xhaW1EdXJhdGlvbkluSG91cnMsIHVpbnQgX2NsYWltVW5pdFZhbHVlSW5XZWksIHVpbnQgX2NsYWltRGVwb3NpdEluV2VpLCB1aW50IF9taW5OdW1DbGFpbXMsIGJvb2wgX3N1Y2Nlc3MsIHN0cmluZyBfZXJyICk7DQogICAgZXZlbnQgQ2xhaW0oIGFkZHJlc3MgaW5kZXhlZCBfY2xhaW1lciwgdWludCBpbmRleGVkIF9kZWFsSWQsIGJvb2wgX3N1Y2Nlc3MsIHN0cmluZyBfZXJyICk7DQogICAgZXZlbnQgRGVwb3NpdCggYWRkcmVzcyBpbmRleGVkIF9kZXBvc2l0b3IsIHVpbnQgaW5kZXhlZCBfZGVhbElkLCB1aW50IF92YWx1ZSwgYm9vbCBfc3VjY2Vzcywgc3RyaW5nIF9lcnIgKTsNCiAgICBldmVudCBXaXRoZHJhdyggYWRkcmVzcyBpbmRleGVkIF93aXRoZHJhd2VyLCB1aW50IGluZGV4ZWQgX2RlYWxJZCwgdWludCBfdmFsdWUsIGJvb2wgX3B1YmxpYywgYm9vbCBfc3VjY2Vzcywgc3RyaW5nIF9lcnIgKTsNCg0KICAgIGV2ZW50IEVub3VnaENsYWltcyggdWludCBpbmRleGVkIF9kZWFsSWQgKTsNCiAgICBldmVudCBEZWFsRnVsbHlGdW5kZWQoIHVpbnQgaW5kZXhlZCBfZGVhbElkICk7DQogICAgDQogICAgZW51bSBSZXR1cm5WYWx1ZSB7IE9rLCBFcnJvciB9DQoNCiAgICBmdW5jdGlvbiBTaW1wbGVNaXhlcigpew0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBuZXdEZWFsKCB1aW50IF9kZXBvc2l0RHVyYXRpb25JbkhvdXJzLCB1aW50IF9jbGFpbUR1cmF0aW9uSW5Ib3VycywgdWludCBfY2xhaW1Vbml0VmFsdWVJbldlaSwgdWludCBfY2xhaW1EZXBvc2l0SW5XZWksIHVpbnQgX21pbk51bUNsYWltcyApIHJldHVybnMoUmV0dXJuVmFsdWUpew0KICAgICAgICB1aW50IGRlYWxJZCA9IF9kZWFscy5sZW5ndGg7ICAgICAgICANCiAgICAgICAgaWYoIF9kZXBvc2l0RHVyYXRpb25JbkhvdXJzID09IDAgfHwgX2NsYWltRHVyYXRpb25JbkhvdXJzID09IDAgKXsNCiAgICAgICAgCU5ld0RlYWwoIG1zZy5zZW5kZXIsDQogICAgICAgIAkgICAgICAgICBkZWFsSWQsDQogICAgICAgIAkgICAgICAgICBub3csDQogICAgICAgIAkgICAgICAgICBfZGVwb3NpdER1cmF0aW9uSW5Ib3VycywNCiAgICAgICAgCSAgICAgICAgIF9jbGFpbUR1cmF0aW9uSW5Ib3VycywNCiAgICAgICAgCSAgICAgICAgIF9jbGFpbVVuaXRWYWx1ZUluV2VpLA0KICAgICAgICAJICAgICAgICAgX2NsYWltRGVwb3NpdEluV2VpLA0KICAgICAgICAJICAgICAgICAgX21pbk51bUNsYWltcywNCiAgICAgICAgCSAgICAgICAgIGZhbHNlLA0KICAgICAgICAJICAgICAgICAgIl9kZXBvc2l0RHVyYXRpb25JbkhvdXJzIGFuZCBfY2xhaW1EdXJhdGlvbkluSG91cnMgbXVzdCBiZSBwb3NpdGl2ZSIgKTsNCiAgICAgICAgICAgIHJldHVybiBSZXR1cm5WYWx1ZS5FcnJvcjsNCiAgICAgICAgfQ0KICAgICAgICBfZGVhbHMubGVuZ3RoKys7DQogICAgICAgIF9kZWFsc1tkZWFsSWRdLmRlcG9zaXRTdW0gPSAwOw0KCSAgICBfZGVhbHNbZGVhbElkXS5udW1DbGFpbXMgPSAwOw0KICAgICAgICBfZGVhbHNbZGVhbElkXS5jbGFpbVN1bSA9IDA7DQogICAgICAgIF9kZWFsc1tkZWFsSWRdLnN0YXJ0VGltZSA9IG5vdzsNCiAgICAgICAgX2RlYWxzW2RlYWxJZF0uZGVwb3NpdER1cmF0aW9uSW5TZWMgPSBfZGVwb3NpdER1cmF0aW9uSW5Ib3VycyAqIDEgaG91cnM7DQogICAgICAgIF9kZWFsc1tkZWFsSWRdLmNsYWltRHVyYXRpb25JblNlYyA9IF9jbGFpbUR1cmF0aW9uSW5Ib3VycyAqIDEgaG91cnM7DQogICAgICAgIF9kZWFsc1tkZWFsSWRdLmNsYWltRGVwb3NpdEluV2VpID0gX2NsYWltRGVwb3NpdEluV2VpOw0KICAgICAgICBfZGVhbHNbZGVhbElkXS5jbGFpbVZhbHVlSW5XZWkgPSBfY2xhaW1Vbml0VmFsdWVJbldlaTsNCgkgICAgX2RlYWxzW2RlYWxJZF0ubWluTnVtQ2xhaW1zID0gX21pbk51bUNsYWltczsNCiAgICAgICAgX2RlYWxzW2RlYWxJZF0uZnVsbHlGdW5kZWQgPSBmYWxzZTsNCiAgICAgICAgX2RlYWxzW2RlYWxJZF0uYWN0aXZlID0gdHJ1ZTsNCiAgICAJTmV3RGVhbCggbXNnLnNlbmRlciwNCiAgICAJICAgICAgICAgZGVhbElkLA0KICAgIAkgICAgICAgICBub3csDQogICAgCSAgICAgICAgIF9kZXBvc2l0RHVyYXRpb25JbkhvdXJzLA0KICAgIAkgICAgICAgICBfY2xhaW1EdXJhdGlvbkluSG91cnMsDQogICAgCSAgICAgICAgIF9jbGFpbVVuaXRWYWx1ZUluV2VpLA0KICAgIAkgICAgICAgICBfY2xhaW1EZXBvc2l0SW5XZWksDQogICAgCSAgICAgICAgIF9taW5OdW1DbGFpbXMsDQogICAgCSAgICAgICAgIHRydWUsDQogICAgCSAgICAgICAgICJhbGwgZ29vZCIgKTsNCiAgICAgICAgcmV0dXJuIFJldHVyblZhbHVlLk9rOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBtYWtlQ2xhaW0oIHVpbnQgZGVhbElkICkgcGF5YWJsZSByZXR1cm5zKFJldHVyblZhbHVlKXsNCiAgICAgICAgRGVhbCBkZWFsID0gX2RlYWxzW2RlYWxJZF07ICAgICAgICANCiAgICAgICAgYm9vbCBlcnJvckRldGVjdGVkID0gZmFsc2U7DQogICAgICAgIHN0cmluZyBtZW1vcnkgZXJyb3I7DQogICAgCS8vIHZhbGlkYXRpb25zDQogICAgCWlmKCAhX2RlYWxzW2RlYWxJZF0uYWN0aXZlICl7DQogICAgCSAgICBlcnJvciA9ICJkZWFsIGlzIG5vdCBhY3RpdmUiOw0KICAgIAkgICAgLy9FcnJvckxvZyggbXNnLnNlbmRlciwgZGVhbElkLCAibWFrZUNsYWltOiBkZWFsIGlzIG5vdCBhY3RpdmUiKTsNCiAgICAJICAgIGVycm9yRGV0ZWN0ZWQgPSB0cnVlOw0KICAgIAl9DQogICAgICAgIGlmKCBkZWFsLnN0YXJ0VGltZSArIGRlYWwuY2xhaW1EdXJhdGlvbkluU2VjIDwgbm93ICl7DQogICAgICAgICAgICBlcnJvciA9ICJjbGFpbSBwaGFzZSBhbHJlYWR5IGVuZGVkIjsgICAgICAgICAgICANCiAgICAgICAgICAgIC8vRXJyb3JMb2coIG1zZy5zZW5kZXIsIGRlYWxJZCwgIm1ha2VDbGFpbTogY2xhaW0gcGhhc2UgYWxyZWFkeSBlbmRlZCIgKTsNCiAgICAgICAgICAgIGVycm9yRGV0ZWN0ZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGlmKCBtc2cudmFsdWUgIT0gZGVhbC5jbGFpbURlcG9zaXRJbldlaSApew0KICAgICAgICAgICAgZXJyb3IgPSAibXNnLnZhbHVlIG11c3QgYmUgZXF1YWwgdG8gY2xhaW0gZGVwb3NpdCB1bml0IjsgICAgICAgICAgICANCiAgICAgICAgICAgIC8vRXJyb3JMb2coIG1zZy5zZW5kZXIsIGRlYWxJZCwgIm1ha2VDbGFpbTogbXNnLnZhbHVlIG11c3QgYmUgZXF1YWwgdG8gY2xhaW0gZGVwb3NpdCB1bml0IiApOw0KICAgICAgICAgICAgZXJyb3JEZXRlY3RlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAJaWYoIGRlYWwuY2xhaW1zW21zZy5zZW5kZXJdICl7DQogICAgCSAgICBlcnJvciA9ICJjYW5ub3QgY2xhaW0gdHdpY2Ugd2l0aCB0aGUgc2FtZSBhZGRyZXNzIjsNCiAgICAgICAgICAgIC8vRXJyb3JMb2coIG1zZy5zZW5kZXIsIGRlYWxJZCwgIm1ha2VDbGFpbTogY2Fubm90IGNsYWltIHR3aWNlIHdpdGggdGhlIHNhbWUgYWRkcmVzcyIgKTsNCiAgICAgICAgICAgIGVycm9yRGV0ZWN0ZWQgPSB0cnVlOw0KICAgIAl9DQogICAgCQ0KICAgIAlpZiggZXJyb3JEZXRlY3RlZCApew0KICAgIAkgICAgQ2xhaW0oIG1zZy5zZW5kZXIsIGRlYWxJZCwgZmFsc2UsIGVycm9yICk7DQogICAgCSAgICBpZiggISBtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlKSApIHRocm93OyAvLyBzZW5kIG1vbmV5IGJhY2sNCiAgICAJICAgIHJldHVybiBSZXR1cm5WYWx1ZS5FcnJvcjsNCiAgICAJfQ0KDQoJICAgIC8vIGFjdHVhbCBjbGFpbQ0KICAgICAgICBkZWFsLmNsYWltU3VtICs9IGRlYWwuY2xhaW1WYWx1ZUluV2VpOw0KICAgICAgICBkZWFsLmNsYWltc1ttc2cuc2VuZGVyXSA9IHRydWU7DQoJICAgIGRlYWwubnVtQ2xhaW1zKys7DQoNCgkgICAgQ2xhaW0oIG1zZy5zZW5kZXIsIGRlYWxJZCwgdHJ1ZSwgImFsbCBnb29kIiApOw0KCSAgICANCgkgICAgaWYoIGRlYWwubnVtQ2xhaW1zID09IGRlYWwubWluTnVtQ2xhaW1zICkgRW5vdWdoQ2xhaW1zKCBkZWFsSWQgKTsNCgkgICAgDQogICAgCXJldHVybiBSZXR1cm5WYWx1ZS5PazsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBtYWtlRGVwb3NpdCggdWludCBkZWFsSWQgKSBwYXlhYmxlIHJldHVybnMoUmV0dXJuVmFsdWUpew0KICAgICAgICBib29sIGVycm9yRGV0ZWN0ZWQgPSBmYWxzZTsNCiAgICAgICAgc3RyaW5nIG1lbW9yeSBlcnJvcjsNCiAgICAJLy8gdmFsaWRhdGlvbnMNCiAgICAgICAgaWYoIG1zZy52YWx1ZSA9PSAwICl7DQogICAgICAgICAgICBlcnJvciA9ICJkZXBvc2l0IHZhbHVlIG11c3QgYmUgcG9zaXRpdmUiOw0KICAgICAgICAgICAgLy9FcnJvckxvZyggbXNnLnNlbmRlciwgZGVhbElkLCAibWFrZURlcG9zaXQ6IGRlcG9zaXQgdmFsdWUgbXVzdCBiZSBwb3NpdGl2ZSIpOw0KICAgICAgICAgICAgZXJyb3JEZXRlY3RlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAJaWYoICFfZGVhbHNbZGVhbElkXS5hY3RpdmUgKXsNCiAgICAJICAgIGVycm9yID0gImRlYWwgaXMgbm90IGFjdGl2ZSI7DQogICAgCSAgICAvL0Vycm9yTG9nKCBtc2cuc2VuZGVyLCBkZWFsSWQsICJtYWtlRGVwb3NpdDogZGVhbCBpcyBub3QgYWN0aXZlIik7DQogICAgCSAgICBlcnJvckRldGVjdGVkID0gdHJ1ZTsNCiAgICAJfQ0KICAgICAgICBEZWFsIGRlYWwgPSBfZGVhbHNbZGVhbElkXTsNCiAgICAgICAgaWYoIGRlYWwuc3RhcnRUaW1lICsgZGVhbC5jbGFpbUR1cmF0aW9uSW5TZWMgPiBub3cgKXsNCiAgICAgICAgICAgIGVycm9yID0gImNvbnRyYWN0IGlzIHN0aWxsIGluIGNsYWltIHBoYXNlIjsNCiAgICAJICAgIC8vRXJyb3JMb2coIG1zZy5zZW5kZXIsIGRlYWxJZCwgIm1ha2VEZXBvc2l0OiBjb250cmFjdCBpcyBzdGlsbCBpbiBjbGFpbSBwaGFzZSIpOw0KICAgIAkgICAgZXJyb3JEZXRlY3RlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgaWYoIGRlYWwuc3RhcnRUaW1lICsgZGVhbC5jbGFpbUR1cmF0aW9uSW5TZWMgKyBkZWFsLmRlcG9zaXREdXJhdGlvbkluU2VjIDwgbm93ICl7DQogICAgICAgICAgICBlcnJvciA9ICJkZXBvc2l0IHBoYXNlIGlzIG92ZXIiOw0KICAgIAkgICAgLy9FcnJvckxvZyggbXNnLnNlbmRlciwgZGVhbElkLCAibWFrZURlcG9zaXQ6IGRlcG9zaXQgcGhhc2UgaXMgb3ZlciIpOw0KICAgIAkgICAgZXJyb3JEZXRlY3RlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgaWYoICggbXNnLnZhbHVlICUgZGVhbC5jbGFpbVZhbHVlSW5XZWkgKSA+IDAgKXsNCiAgICAgICAgICAgIGVycm9yID0gImRlcG9zaXQgdmFsdWUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIGNsYWltIHZhbHVlIjsNCiAgICAJICAgIC8vRXJyb3JMb2coIG1zZy5zZW5kZXIsIGRlYWxJZCwgIm1ha2VEZXBvc2l0OiBkZXBvc2l0IHZhbHVlIG11c3QgYmUgYSBtdWx0aXBsZSBvZiBjbGFpbSB2YWx1ZSIpOw0KICAgIAkgICAgZXJyb3JEZXRlY3RlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAJaWYoIGRlYWwuZGVwb3NpdFttc2cuc2VuZGVyXSA+IDAgKXsNCiAgICAJICAgIGVycm9yID0gImNhbm5vdCBkZXBvc2l0IHR3aWNlIHdpdGggdGhlIHNhbWUgYWRkcmVzcyI7DQogICAgCSAgICAvL0Vycm9yTG9nKCBtc2cuc2VuZGVyLCBkZWFsSWQsICJtYWtlRGVwb3NpdDogY2Fubm90IGRlcG9zaXQgdHdpY2Ugd2l0aCB0aGUgc2FtZSBhZGRyZXNzIik7DQogICAgCSAgICBlcnJvckRldGVjdGVkID0gdHJ1ZTsNCiAgICAJfQ0KICAgIAlpZiggZGVhbC5udW1DbGFpbXMgPCBkZWFsLm1pbk51bUNsYWltcyApew0KICAgIAkgICAgZXJyb3IgPSAiZGVhbCBpcyBvZmYgYXMgdGhlcmUgYXJlIG5vdCBlbm91Z2ggY2xhaW1zLiBDYWxsIHdpdGhkcmF3IHdpdGggeW91IGNsYWltZXIgYWRkcmVzcyI7DQogICAgCSAgICAvKkVycm9yTG9nKCBtc2cuc2VuZGVyLA0KICAgIAkgICAgICAgICAgICAgIGRlYWxJZCwNCiAgICAJICAgICAgICAgICAgICAibWFrZURlcG9zaXQ6IGRlYWwgaXMgb2ZmIGFzIHRoZXJlIGFyZSBub3QgZW5vdWdoIGNsYWltcy4gQ2FsbCB3aXRoZHJhdyB3aXRoIHlvdSBjbGFpbWVyIGFkZHJlc3MiKTsqLw0KICAgIAkgICAgZXJyb3JEZXRlY3RlZCA9IHRydWU7DQogICAgCX0NCiAgICAJDQogICAgCWlmKCBlcnJvckRldGVjdGVkICl7DQogICAgCSAgICBEZXBvc2l0KCBtc2cuc2VuZGVyLCBkZWFsSWQsIG1zZy52YWx1ZSwgZmFsc2UsIGVycm9yICk7DQogICAgCSAgICBpZiggISBtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlKSApIHRocm93OyAvLyBzZW5kIG1vbmV5IGJhY2sNCiAgICAJICAgIHJldHVybiBSZXR1cm5WYWx1ZS5FcnJvcjsNCiAgICAJfQ0KICAgICAgICANCgkgICAgLy8gYWN0dWFsIGRlcG9zaXQNCiAgICAgICAgZGVhbC5kZXBvc2l0U3VtICs9IG1zZy52YWx1ZTsNCiAgICAgICAgZGVhbC5kZXBvc2l0W21zZy5zZW5kZXJdID0gbXNnLnZhbHVlOw0KDQogICAgCWlmKCBkZWFsLmRlcG9zaXRTdW0gPj0gZGVhbC5jbGFpbVN1bSApew0KICAgIAkgICAgZGVhbC5mdWxseUZ1bmRlZCA9IHRydWU7DQogICAgCSAgICBEZWFsRnVsbHlGdW5kZWQoIGRlYWxJZCApOw0KICAgIAl9DQogICAgDQogICAgCURlcG9zaXQoIG1zZy5zZW5kZXIsIGRlYWxJZCwgbXNnLnZhbHVlLCB0cnVlLCAiYWxsIGdvb2QiICk7DQoJICAgIHJldHVybiBSZXR1cm5WYWx1ZS5PazsgICAgCQ0KICAgIH0NCiAgICAgICAgDQogICAgZnVuY3Rpb24gd2l0aGRyYXcoIHVpbnQgZGVhbElkICkgcmV0dXJucyhSZXR1cm5WYWx1ZSl7DQogICAgCS8vIHZhbGlkYXRpb24NCiAgICAgICAgYm9vbCBlcnJvckRldGVjdGVkID0gZmFsc2U7DQogICAgICAgIHN0cmluZyBtZW1vcnkgZXJyb3I7DQogICAgICAgIERlYWwgZGVhbCA9IF9kZWFsc1tkZWFsSWRdOw0KICAgIAlib29sIGVub3VnaENsYWltcyA9IGRlYWwubnVtQ2xhaW1zID49IGRlYWwubWluTnVtQ2xhaW1zOw0KICAgIAlpZiggISBlbm91Z2hDbGFpbXMgKXsNCiAgICAJICAgIGlmKCBkZWFsLnN0YXJ0VGltZSArIGRlYWwuY2xhaW1EdXJhdGlvbkluU2VjID4gbm93ICl7DQogICAgCSAgICAgICAgZXJyb3IgPSAiY2xhaW0gcGhhc2Ugbm90IG92ZXIgeWV0IjsNCiAgICAJICAgICAgICAvL0Vycm9yTG9nKCBtc2cuc2VuZGVyLCBkZWFsSWQsICJ3aXRoZHJhdzogY2xhaW0gcGhhc2Ugbm90IG92ZXIgeWV0Iik7DQogICAgCSAgICAgICAgZXJyb3JEZXRlY3RlZCA9IHRydWU7DQogICAgCSAgICB9DQogICAgCX0NCiAgICAJZWxzZXsNCiAgICAJICAgIGlmKCBkZWFsLnN0YXJ0VGltZSArIGRlYWwuZGVwb3NpdER1cmF0aW9uSW5TZWMgKyBkZWFsLmNsYWltRHVyYXRpb25JblNlYyA+IG5vdyApew0KICAgIAkgICAgICAgIGVycm9yID0gImRlcG9zaXQgcGhhc2Ugbm90IG92ZXIgeWV0IjsNCiAgICAJICAgICAgICAvL0Vycm9yTG9nKCBtc2cuc2VuZGVyLCBkZWFsSWQsICJ3aXRoZHJhdzogZGVwb3NpdCBwaGFzZSBub3Qgb3ZlciB5ZXQiKTsNCiAgICAJICAgICAgICBlcnJvckRldGVjdGVkID0gdHJ1ZTsNCiAgICAJICAgIH0NCiAgICAJfQ0KICAgIAkNCiAgICAJaWYoIGVycm9yRGV0ZWN0ZWQgKXsNCiAgICAJICAgIFdpdGhkcmF3KCBtc2cuc2VuZGVyLCBkZWFsSWQsIDAsIGZhbHNlLCBmYWxzZSwgZXJyb3IgKTsNCiAgICAgICAgCXJldHVybiBSZXR1cm5WYWx1ZS5FcnJvcjsgLy8gbm90ZSB0aGF0IGZ1bmN0aW9uIGlzIG5vdCBwYXlhYmxlICAgIAkgICAgDQogICAgCX0NCg0KDQoJICAgIC8vIGFjdHVhbCB3aXRoZHJhdw0KCSAgICBib29sIHB1YmxpY1dpdGhkcmF3Ow0KICAgIAl1aW50IHdpdGhkcmF3ZWRWYWx1ZSA9IDA7DQogICAgICAgIGlmKCAoISBkZWFsLmZ1bGx5RnVuZGVkKSAmJiBlbm91Z2hDbGFpbXMgKXsNCgkgICAgICAgIHB1YmxpY1dpdGhkcmF3ID0gdHJ1ZTsNCiAgICAgICAgICAgIHVpbnQgZGVwb3NpdFZhbHVlID0gZGVhbC5kZXBvc2l0W21zZy5zZW5kZXJdOw0KICAgICAgICAgICAgaWYoIGRlcG9zaXRWYWx1ZSA9PSAwICl7DQogICAgICAgICAgICAgICAgV2l0aGRyYXcoIG1zZy5zZW5kZXIsIGRlYWxJZCwgMCwgcHVibGljV2l0aGRyYXcsIGZhbHNlLCAiYWRkcmVzcyBtYWRlIG5vIGRlcG9zaXQuIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBiZSBjYWxsZWQgd2l0aCB0aGUgcHVibGljIGFkZHJlc3MiICk7DQogICAgCSAgICAgICAgLy9FcnJvckxvZyggbXNnLnNlbmRlciwgZGVhbElkLCAid2l0aGRyYXc6IGFkZHJlc3MgbWFkZSBubyBkZXBvc2l0LiBOb3RlIHRoYXQgdGhpcyBzaG91bGQgYmUgY2FsbGVkIHdpdGggdGhlIHB1YmxpYyBhZGRyZXNzIik7DQogICAgCSAgICAgICAgcmV0dXJuIFJldHVyblZhbHVlLkVycm9yOyAvLyBmdW5jdGlvbiBub24gcGF5YWJsZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICB1aW50IGVmZmVjdGl2ZU51bURlcG9zaXRzID0gZGVhbC5kZXBvc2l0U3VtIC8gZGVhbC5jbGFpbVZhbHVlSW5XZWk7DQogICAgICAgICAgICB1aW50IHVzZXJFZmZlY3RpdmVOdW1EZXBvc2l0cyA9IGRlcG9zaXRWYWx1ZSAvIGRlYWwuY2xhaW1WYWx1ZUluV2VpOw0KICAgICAgICAgICAgdWludCBleHRyYUJhbGFuY2UgPSAoIGRlYWwubnVtQ2xhaW1zIC0gZWZmZWN0aXZlTnVtRGVwb3NpdHMgKSAqIGRlYWwuY2xhaW1EZXBvc2l0SW5XZWk7DQogICAgICAgICAgICB1aW50IHVzZXJFeHRyYUJhbGFuY2UgPSB1c2VyRWZmZWN0aXZlTnVtRGVwb3NpdHMgKiBleHRyYUJhbGFuY2UgLyBlZmZlY3RpdmVOdW1EZXBvc2l0czsNCg0KICAgICAgICAgICAgZGVhbC5kZXBvc2l0W21zZy5zZW5kZXJdID0gMDsgLy8gaW52YWxpZGF0ZSB1c2VyDQogICAgICAgICAgICAvLyBnaXZlIG9ubHkgaGFsZiBvZiBleHRyYSBiYWxhbmNlLiBvdGhlcndpc2UgZGlzaG9uZXN0IHBhcnR5IGNvdWxkIG9idGFpbiA5OSUgb2YgdGhlIGV4dHJhIGJhbGFuY2UgYW5kIGxvc2UgYWxtb3N0IG5vdGhpbmcNCgkgICAgICAgIHdpdGhkcmF3ZWRWYWx1ZSA9IGRlcG9zaXRWYWx1ZSArIGRlYWwuY2xhaW1EZXBvc2l0SW5XZWkgKiB1c2VyRWZmZWN0aXZlTnVtRGVwb3NpdHMgKyAoIHVzZXJFeHRyYUJhbGFuY2UgLyAyICk7DQogICAgICAgICAgICBpZiggISBtc2cuc2VuZGVyLnNlbmQod2l0aGRyYXdlZFZhbHVlKSApIHRocm93Ow0KICAgICAgICB9DQogICAgICAgIGVsc2V7DQogICAgCSAgICBwdWJsaWNXaXRoZHJhdyA9IGZhbHNlOw0KICAgICAgICAgICAgaWYoICEgZGVhbC5jbGFpbXNbbXNnLnNlbmRlcl0gKXsNCiAgICAgICAgICAgICAgICBXaXRoZHJhdyggbXNnLnNlbmRlciwgZGVhbElkLCAwLCBwdWJsaWNXaXRoZHJhdywgZmFsc2UsICJhZGRyZXNzIG1hZGUgbm8gY2xhaW1zLiBOb3RlIHRoYXQgdGhpcyBzaG91bGQgYmUgY2FsbGVkIHdpdGggdGhlIHNlY3JldCBhZGRyZXNzIiApOw0KICAgIAkgICAgICAgIC8vRXJyb3JMb2coIG1zZy5zZW5kZXIsIGRlYWxJZCwgIndpdGhkcmF3OiBhZGRyZXNzIG1hZGUgbm8gY2xhaW1zLiBOb3RlIHRoYXQgdGhpcyBzaG91bGQgYmUgY2FsbGVkIHdpdGggdGhlIHNlY3JldCBhZGRyZXNzIik7DQogICAgCSAgICAgICAgcmV0dXJuIFJldHVyblZhbHVlLkVycm9yOyAvLyBmdW5jdGlvbiBub24gcGF5YWJsZQ0KICAgICAgICAgICAgfQ0KCSAgICAgICAgaWYoIGVub3VnaENsYWltcyApIHdpdGhkcmF3ZWRWYWx1ZSA9IGRlYWwuY2xhaW1EZXBvc2l0SW5XZWkgKyBkZWFsLmNsYWltVmFsdWVJbldlaTsNCgkgICAgICAgIGVsc2Ugd2l0aGRyYXdlZFZhbHVlID0gZGVhbC5jbGFpbURlcG9zaXRJbldlaTsNCgkJDQogICAgICAgICAgICBkZWFsLmNsYWltc1ttc2cuc2VuZGVyXSA9IGZhbHNlOyAvLyBpbnZhbGlkYXRlIGNsYWltDQogICAgICAgICAgICBpZiggISBtc2cuc2VuZGVyLnNlbmQod2l0aGRyYXdlZFZhbHVlKSApIHRocm93Ow0KICAgICAgICB9DQoJICAgIA0KICAgICAgICBXaXRoZHJhdyggbXNnLnNlbmRlciwgZGVhbElkLCB3aXRoZHJhd2VkVmFsdWUsIHB1YmxpY1dpdGhkcmF3LCB0cnVlLCAiYWxsIGdvb2QiICk7DQogICAgICAgIHJldHVybiBSZXR1cm5WYWx1ZS5PazsNCiAgICB9ICAgIA0KDQogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgIA0KICAgIGZ1bmN0aW9uIGRlYWxTdGF0dXModWludCBfZGVhbElkKSBjb25zdGFudCByZXR1cm5zKHVpbnRbNF0pew0KICAgICAgICAvLyByZXR1cm5zIChhY3RpdmUsIG51bSBjbGFpbXMsIGNsYWltIHN1bSwgZGVwb3NpdCBzdW0pIGFsbCBhcyBpbnRlZ2Vycw0KICAgICAgICB1aW50IGFjdGl2ZSA9IF9kZWFsc1tfZGVhbElkXS5hY3RpdmUgPyAxIDogMDsNCiAgICAgICAgdWludCBudW1DbGFpbXMgPSBfZGVhbHNbX2RlYWxJZF0ubnVtQ2xhaW1zOw0KICAgICAgICB1aW50IGNsYWltU3VtID0gX2RlYWxzW19kZWFsSWRdLmNsYWltU3VtOw0KCSAgICB1aW50IGRlcG9zaXRTdW0gPSBfZGVhbHNbX2RlYWxJZF0uZGVwb3NpdFN1bTsNCiAgICAgICAgDQogICAgICAgIHJldHVybiBbYWN0aXZlLCBudW1DbGFpbXMsIGNsYWltU3VtLCBkZXBvc2l0U3VtXTsNCiAgICB9DQoNCn0='