base 64 content
base64slognToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4yOw0KDQpjb250cmFjdCBUb2tlbiB7DQogICAgLyogUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8NCiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkOw0KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsNCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsNCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7DQogICAgdWludDI1NiBwdWJsaWMgX3RvdGFsU3VwcGx5Ow0KDQogICAgLyogVGhpcyBjcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGJhbGFuY2VzICovDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsNCg0KICAgIC8qIEVSQzIwIEV2ZW50cyAqLw0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7DQoNCiAgICAvKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgKi8NCiAgICBmdW5jdGlvbiBUb2tlbih1aW50MjU2IGluaXRpYWxTdXBwbHksIHN0cmluZyBfc3RhbmRhcmQsIHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wsIHVpbnQ4IF9kZWNpbWFscykgew0KICAgICAgICBfdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5Ow0KICAgICAgICBiYWxhbmNlT2ZbdGhpc10gPSBpbml0aWFsU3VwcGx5Ow0KICAgICAgICBzdGFuZGFyZCA9IF9zdGFuZGFyZDsNCiAgICAgICAgbmFtZSA9IF9uYW1lOw0KICAgICAgICBzeW1ib2wgPSBfc3ltYm9sOw0KICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsNCiAgICB9DQoNCiAgICAvKiBHZXQgYnVybmFibGUgdG90YWwgc3VwcGx5ICovDQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgc3VwcGx5KSB7DQogICAgICAgIHJldHVybiBfdG90YWxTdXBwbHk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVHJhbnNmZXIgdG9rZW4gbG9naWMNCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgZnJvbS4NCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLg0KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4NCiAgICAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckludGVybmFsKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW19mcm9tXSA+PSBfdmFsdWUpOw0KDQogICAgICAgIC8vIENoZWNrIGZvciBvdmVyZmxvd3MNCiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA+PSBiYWxhbmNlT2ZbX3RvXSk7DQoNCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7DQoNCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOw0KDQogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuDQogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLg0KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuDQogICAgICovDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcg0KICAgICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20NCiAgICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8NCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkDQogICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tSW50ZXJuYWwoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgcmVxdWlyZShfdmFsdWUgPj0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSk7ICAgLy8gQ2hlY2sgYWxsb3dhbmNlDQoNCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQoNCiAgICAgICAgcmV0dXJuIHRyYW5zZmVySW50ZXJuYWwoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IElDTyB7DQogICAgdWludDI1NiBwdWJsaWMgUFJFX0lDT19TSU5DRSA9IDE1MDAzMDM2MDA7ICAgICAgICAgICAgICAgICAgICAgLy8gMDcvMTcvMjAxNyBAIDE1OjAwIChVVEMpDQogICAgdWludDI1NiBwdWJsaWMgUFJFX0lDT19USUxMID0gMTUwMDQ3NjQwMDsgICAgICAgICAgICAgICAgICAgICAgLy8gMDcvMTkvMjAxNyBAIDE1OjAwIChVVEMpDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUFJFX0lDT19CT05VU19SQVRFID0gNzA7DQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUFJFX0lDT19TTEdOX0xFU1MgPSA1MDAwIGV0aGVyOyAgICAgICAgICAgICAgICAgLy8gdXBwZXIgbGltaXQgZm9yIHByZSBpY28gaXMgNWsgZXRoZXINCg0KICAgIHVpbnQyNTYgcHVibGljIElDT19TSU5DRSA9IDE1MDA5OTQ4MDA7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDA3LzI1LzIwMTcgQCA5OjAwYW0gKFVUQykNCiAgICB1aW50MjU2IHB1YmxpYyBJQ09fVElMTCA9IDE1MDI4MDkyMDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAwOC8xNS8yMDE3IEAgOTowMGFtIChVVEMpDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSUNPX0JPTlVTMV9TTEdOX0xFU1MgPSAyMDAwMCBldGhlcjsgICAgICAgICAgICAgICAgLy8gYm9udXMgMSB3aWxsIHdvcmsgb25seSBpZiAyMDAwMCBldGggd2VyZSBjb2xsZWN0ZWQgZHVyaW5nIGZpcnN0IHBoYXNlIG9mIGljbw0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IElDT19CT05VUzFfUkFURSA9IDMwOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJvbnVzIDEgcmF0ZQ0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IElDT19CT05VUzJfU0xHTl9MRVNTID0gNTAwMDAgZXRoZXI7ICAgICAgICAgICAgICAgIC8vIGJvbnVzIDEgd2lsbCB3b3JrIG9ubHkgaWYgNTAwMDAgZXRoIHdlcmUgY29sbGVjdGVkIGR1cmluZyBzZWNvbmQgcGhhc2Ugb2YgaWNvDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSUNPX0JPTlVTMl9SQVRFID0gMTU7IC8vIGJvbnVzIDIgcmF0ZQ0KDQogICAgdWludDI1NiBwdWJsaWMgdG90YWxTb2xkU2xvZ25zOw0KDQogICAgLyogVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzICovDQogICAgZXZlbnQgQm9udXNFYXJuZWQoYWRkcmVzcyB0YXJnZXQsIHVpbnQyNTYgYm9udXMpOw0KDQogICAgLyoqDQogICAgICogQ2FsY3VsYXRlIGFtb3VudCBvZiBwcmVtaXVtIGJvbnVzZXMNCiAgICAgKiBAcGFyYW0gaWNvU3RlcCBpZGVudGlmaWVzIGlzIGl0IHByZS1pY28gKGVxdWFscyAwKSBvciBpY28gKGVxdWFscyAxKQ0KICAgICAqIEBwYXJhbSB0b3RhbFNvbGRTbG9nbnMgdG90YWwgYW1vdW50IG9mIGFscmVhZHkgc29sZCBzbG9nbiB0b2tlbnMuDQogICAgICogQHBhcmFtIHNvbGRTbG9nbnMgdG90YWwgYW1vdW50IHNvbGQgc2xvZ25zIGluIGN1cnJlbnQgdHJhbnNhY3Rpb24uDQogICAgICovDQogICAgZnVuY3Rpb24gY2FsY3VsYXRlQm9udXModWludDggaWNvU3RlcCwgdWludDI1NiB0b3RhbFNvbGRTbG9nbnMsIHVpbnQyNTYgc29sZFNsb2ducykgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgICBpZihpY29TdGVwID09IDEpIHsNCiAgICAgICAgICAgIC8vIHByZSBpY28NCiAgICAgICAgICAgIHJldHVybiBzb2xkU2xvZ25zIC8gMTAwICogUFJFX0lDT19CT05VU19SQVRFOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYoaWNvU3RlcCA9PSAyKSB7DQogICAgICAgICAgICAvLyBpY28NCiAgICAgICAgICAgIGlmKHRvdGFsU29sZFNsb2ducyA+IElDT19CT05VUzFfU0xHTl9MRVNTICsgSUNPX0JPTlVTMl9TTEdOX0xFU1MpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdWludDI1NiBhdmFpbGFibGVGb3JCb251czEgPSBJQ09fQk9OVVMxX1NMR05fTEVTUyAtIHRvdGFsU29sZFNsb2duczsNCg0KICAgICAgICAgICAgdWludDI1NiB0bXAgPSBzb2xkU2xvZ25zOw0KICAgICAgICAgICAgdWludDI1NiBib251cyA9IDA7DQoNCiAgICAgICAgICAgIHVpbnQyNTYgdG9rZW5zRm9yQm9udXMxID0gMDsNCg0KICAgICAgICAgICAgaWYoYXZhaWxhYmxlRm9yQm9udXMxID4gMCAmJiBhdmFpbGFibGVGb3JCb251czEgPD0gSUNPX0JPTlVTMV9TTEdOX0xFU1MpIHsNCiAgICAgICAgICAgICAgICB0b2tlbnNGb3JCb251czEgPSB0bXAgPiBhdmFpbGFibGVGb3JCb251czEgPyBhdmFpbGFibGVGb3JCb251czEgOiB0bXA7DQoNCiAgICAgICAgICAgICAgICBib251cyArPSB0b2tlbnNGb3JCb251czEgLyAxMDAgKiBJQ09fQk9OVVMxX1JBVEU7DQogICAgICAgICAgICAgICAgdG1wIC09IHRva2Vuc0ZvckJvbnVzMTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdWludDI1NiBhdmFpbGFibGVGb3JCb251czIgPSAoSUNPX0JPTlVTMl9TTEdOX0xFU1MgKyBJQ09fQk9OVVMxX1NMR05fTEVTUykgLSB0b3RhbFNvbGRTbG9nbnMgLSB0b2tlbnNGb3JCb251czE7DQoNCiAgICAgICAgICAgIHVpbnQyNTYgdG9rZW5zRm9yQm9udXMyID0gMDsNCg0KICAgICAgICAgICAgaWYoYXZhaWxhYmxlRm9yQm9udXMyID4gMCAmJiBhdmFpbGFibGVGb3JCb251czIgPD0gSUNPX0JPTlVTMl9TTEdOX0xFU1MpIHsNCiAgICAgICAgICAgICAgICB0b2tlbnNGb3JCb251czIgPSB0bXAgPiBhdmFpbGFibGVGb3JCb251czIgPyBhdmFpbGFibGVGb3JCb251czIgOiB0bXA7DQoNCiAgICAgICAgICAgICAgICBib251cyArPSB0b2tlbnNGb3JCb251czIgLyAxMDAgKiBJQ09fQk9OVVMyX1JBVEU7DQogICAgICAgICAgICAgICAgdG1wIC09IHRva2Vuc0ZvckJvbnVzMjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIGJvbnVzOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIDA7DQogICAgfQ0KfQ0KDQpjb250cmFjdCBFc2Nyb3dJQ08gaXMgVG9rZW4sIElDTyB7DQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgTUlOX1BSRV9JQ09fU0xPR05fQ09MTEVDVEVEID0gMTAwMCBldGhlcjsgICAgICAgLy8gUFJFIElDTyBpcyBzdWNjZXNzZnVsIG9ubHkgaWYgc29sZCAxMC4wMDAuMDAwIHNsb2ducw0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IE1JTl9JQ09fU0xPR05fQ09MTEVDVEVEID0gMTAwMCBldGhlcjsgICAgICAgICAgLy8gSUNPIGlzIHN1Y2Nlc3NmdWwgb25seSBpZiBzb2xkIDEwMC4wMDAuMDAwIHNsb2ducw0KDQogICAgYm9vbCBwdWJsaWMgaXNUcmFuc2FjdGlvbnNBbGxvd2VkOw0KDQogICAgdWludDI1NiBwdWJsaWMgdG90YWxTb2xkU2xvZ25zOw0KDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgcHJlSWNvRXRoZXJzOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGljb0V0aGVyczsNCg0KICAgIGV2ZW50IFJlZnVuZEV0aChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQyNTYgdmFsdWUpOw0KICAgIGV2ZW50IEljb0ZpbmlzaGVkKCk7DQoNCiAgICBmdW5jdGlvbiBFc2Nyb3dJQ08oKSB7DQogICAgICAgIGlzVHJhbnNhY3Rpb25zQWxsb3dlZCA9IGZhbHNlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldEljb1N0ZXAodWludDI1NiB0aW1lKSByZXR1cm5zICh1aW50OCBzdGVwKSB7DQogICAgICAgIGlmKHRpbWUgPj0gIFBSRV9JQ09fU0lOQ0UgJiYgdGltZSA8PSBQUkVfSUNPX1RJTEwpIHsNCiAgICAgICAgICAgIHJldHVybiAxOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYodGltZSA+PSBJQ09fU0lOQ0UgJiYgdGltZSA8PSBJQ09fVElMTCkgew0KICAgICAgICAgICAgLy8gaWNvIHNob3VkIGZhaWwgaWYgY29sbGVjdGVkIGxlc3MgdGhhbiAxMDAwIHNsb2ducyBkdXJpbmcgcHJlIGljbw0KICAgICAgICAgICAgaWYodG90YWxTb2xkU2xvZ25zID49IE1JTl9QUkVfSUNPX1NMT0dOX0NPTExFQ1RFRCkgew0KICAgICAgICAgICAgICAgIHJldHVybiAyOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIDA7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogb2ZmaWNpYWxseSBmaW5pc2ggSUNPLCBvbmx5IGFsbG93ZWQgYWZ0ZXIgSUNPIGlzIGVuZGVkDQogICAgICovDQogICAgZnVuY3Rpb24gaWNvRmluaXNoSW50ZXJuYWwodWludDI1NiB0aW1lKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmKHRpbWUgPD0gSUNPX1RJTEwpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmKHRvdGFsU29sZFNsb2ducyA+PSBNSU5fSUNPX1NMT0dOX0NPTExFQ1RFRCkgew0KICAgICAgICAgICAgLy8gYnVybiB0b2tlbnMgYXNzaWduZWQgdG8gc21hcnQgY29udHJhY3QNCg0KICAgICAgICAgICAgX3RvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5IC0gYmFsYW5jZU9mW3RoaXNdOw0KDQogICAgICAgICAgICBiYWxhbmNlT2ZbdGhpc10gPSAwOw0KDQogICAgICAgICAgICAvLyBhbGxvdyB0cmFuc2FjdGlvbnMgZm9yIGV2ZXJ5b25lDQogICAgICAgICAgICBpc1RyYW5zYWN0aW9uc0FsbG93ZWQgPSB0cnVlOw0KDQogICAgICAgICAgICBJY29GaW5pc2hlZCgpOw0KDQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiByZWZ1bmQgaWNvIG1ldGhvZA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHJlZnVuZEludGVybmFsKHVpbnQyNTYgdGltZSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICBpZih0aW1lIDw9IFBSRV9JQ09fVElMTCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYodG90YWxTb2xkU2xvZ25zID49IE1JTl9QUkVfSUNPX1NMT0dOX0NPTExFQ1RFRCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgdWludDI1NiB0cmFuc2ZlcmVkRXRoZXJzOw0KDQogICAgICAgIHRyYW5zZmVyZWRFdGhlcnMgPSBwcmVJY29FdGhlcnNbbXNnLnNlbmRlcl07DQoNCiAgICAgICAgaWYodHJhbnNmZXJlZEV0aGVycyA+IDApIHsNCiAgICAgICAgICAgIHByZUljb0V0aGVyc1ttc2cuc2VuZGVyXSA9IDA7DQoNCiAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IDA7DQoNCiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodHJhbnNmZXJlZEV0aGVycyk7DQoNCiAgICAgICAgICAgIFJlZnVuZEV0aChtc2cuc2VuZGVyLCB0cmFuc2ZlcmVkRXRoZXJzKTsNCg0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KfQ0KDQpjb250cmFjdCBTbG9nblRva2VuIGlzIFRva2VuLCBFc2Nyb3dJQ08gew0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1RBTkRBUkQgPSAnU2xvZ24gdjAuMSc7DQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBOQU1FID0gJ1NMT0dOJzsNCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IFNZTUJPTCA9ICdTTEdOJzsNCiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgUFJFQ0lTSU9OID0gMTQ7DQoNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT1RBTF9TVVBQTFkgPSA4MDAwMDAgZXRoZXI7IC8vIGluaXRpYWwgdG90YWwgc3VwcGx5IGVxdWFscyB0byA4LjAwMC4wMDAuMDAwIHNsb2ducyBvciA4MDAuMDAwIGV0aHMNCg0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IENPUkVfVEVBTV9UT0tFTlMgPSBUT1RBTF9TVVBQTFkgLyAxMDAgKiAxNTsgICAgICAgLy8gMTUlDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgQURWSVNPUllfQk9BUkRfVE9LRU5TID0gVE9UQUxfU1VQUExZIC8gMTAwMCAqIDE1OyAgICAgICAvLyAxLjUlDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgT1BFTlNPVVJDRV9UT0tFTlMgPSBUT1RBTF9TVVBQTFkgLyAxMDAwICogNzU7ICAgICAvLyA3LjUlDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUkVTRVJWRV9UT0tFTlMgPSBUT1RBTF9TVVBQTFkgLyAxMDAgKiA1OyAgICAgICAgICAvLyA1JQ0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IEJPVU5UWV9UT0tFTlMgPSBUT1RBTF9TVVBQTFkgLyAxMDA7ICAgICAgICAgICAgICAgLy8gMSUNCg0KICAgIGFkZHJlc3MgcHVibGljIGFkdmlzb3J5Qm9hcmRGdW5kTWFuYWdlcjsNCiAgICBhZGRyZXNzIHB1YmxpYyBvcGVuc291cmNlRnVuZE1hbmFnZXI7DQogICAgYWRkcmVzcyBwdWJsaWMgcmVzZXJ2ZUZ1bmRNYW5hZ2VyOw0KICAgIGFkZHJlc3MgcHVibGljIGJvdW50eUZ1bmRNYW5hZ2VyOw0KICAgIGFkZHJlc3MgcHVibGljIGV0aEZ1bmRNYW5hZ2VyOw0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQogICAgLyogVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzICovDQogICAgZXZlbnQgQm9udXNFYXJuZWQoYWRkcmVzcyB0YXJnZXQsIHVpbnQyNTYgYm9udXMpOw0KDQogICAgLyogTW9kaWZpZXJzICovDQogICAgbW9kaWZpZXIgb25seU93bmVyKCkgew0KICAgICAgICByZXF1aXJlKG93bmVyID09IG1zZy5zZW5kZXIpOw0KDQogICAgICAgIF87DQogICAgfQ0KDQogICAgLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0ICovDQogICAgZnVuY3Rpb24gU2xvZ25Ub2tlbigNCiAgICBhZGRyZXNzIFtdIGNvcmVUZWFtLA0KICAgIGFkZHJlc3MgX2Fkdmlzb3J5Qm9hcmRGdW5kTWFuYWdlciwNCiAgICBhZGRyZXNzIF9vcGVuc291cmNlRnVuZE1hbmFnZXIsDQogICAgYWRkcmVzcyBfcmVzZXJ2ZUZ1bmRNYW5hZ2VyLA0KICAgIGFkZHJlc3MgX2JvdW50eUZ1bmRNYW5hZ2VyLA0KICAgIGFkZHJlc3MgX2V0aEZ1bmRNYW5hZ2VyDQogICAgKQ0KICAgIFRva2VuIChUT1RBTF9TVVBQTFksIFNUQU5EQVJELCBOQU1FLCBTWU1CT0wsIFBSRUNJU0lPTikNCiAgICBFc2Nyb3dJQ08oKQ0KICAgIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KDQogICAgICAgIGFkdmlzb3J5Qm9hcmRGdW5kTWFuYWdlciA9IF9hZHZpc29yeUJvYXJkRnVuZE1hbmFnZXI7DQogICAgICAgIG9wZW5zb3VyY2VGdW5kTWFuYWdlciA9IF9vcGVuc291cmNlRnVuZE1hbmFnZXI7DQogICAgICAgIHJlc2VydmVGdW5kTWFuYWdlciA9IF9yZXNlcnZlRnVuZE1hbmFnZXI7DQogICAgICAgIGJvdW50eUZ1bmRNYW5hZ2VyID0gX2JvdW50eUZ1bmRNYW5hZ2VyOw0KICAgICAgICBldGhGdW5kTWFuYWdlciA9IF9ldGhGdW5kTWFuYWdlcjsNCg0KICAgICAgICAvLyB0cmFuc2ZlciB0b2tlbnMgdG8gY29yZSB0ZWFtDQogICAgICAgIHVpbnQyNTYgdG9rZW5zUGVyTWVtYmVyID0gQ09SRV9URUFNX1RPS0VOUyAvIGNvcmVUZWFtLmxlbmd0aDsNCg0KICAgICAgICBmb3IodWludDggaSA9IDA7IGkgPCBjb3JlVGVhbS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgdHJhbnNmZXJJbnRlcm5hbCh0aGlzLCBjb3JlVGVhbVtpXSwgdG9rZW5zUGVyTWVtYmVyKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEFkdmlzb3J5IGJvYXJkIGZ1bmQNCiAgICAgICAgdHJhbnNmZXJJbnRlcm5hbCh0aGlzLCBhZHZpc29yeUJvYXJkRnVuZE1hbmFnZXIsIEFEVklTT1JZX0JPQVJEX1RPS0VOUyk7DQoNCiAgICAgICAgLy8gT3BlbnNvdXJjZSBmdW5kDQogICAgICAgIHRyYW5zZmVySW50ZXJuYWwodGhpcywgb3BlbnNvdXJjZUZ1bmRNYW5hZ2VyLCBPUEVOU09VUkNFX1RPS0VOUyk7DQoNCiAgICAgICAgLy8gUmVzZXJ2ZSBmdW5kDQogICAgICAgIHRyYW5zZmVySW50ZXJuYWwodGhpcywgcmVzZXJ2ZUZ1bmRNYW5hZ2VyLCBSRVNFUlZFX1RPS0VOUyk7DQoNCiAgICAgICAgLy8gQm91bnR5IGZ1bmQNCiAgICAgICAgdHJhbnNmZXJJbnRlcm5hbCh0aGlzLCBib3VudHlGdW5kTWFuYWdlciwgQk9VTlRZX1RPS0VOUyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYnV5Rm9yKGFkZHJlc3MgX3VzZXIsIHVpbnQyNTYgZXRoZXJzLCB1aW50IHRpbWUpIGludGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICByZXF1aXJlKGV0aGVycyA+IDApOw0KDQogICAgICAgIHVpbnQ4IGljb1N0ZXAgPSBnZXRJY29TdGVwKHRpbWUpOw0KDQogICAgICAgIHJlcXVpcmUoaWNvU3RlcCA9PSAxIHx8IGljb1N0ZXAgPT0gMik7DQoNCiAgICAgICAgLy8gbWF4aW11bSBjb2xsZWN0ZWQgYW1vdW50IGZvciBwcmVpY28gaXMgNTAwMCBldGhlcg0KICAgICAgICBpZihpY29TdGVwID09IDEgJiYgKHRvdGFsU29sZFNsb2ducyArIGV0aGVycykgPiA1MDAwIGV0aGVyKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KDQogICAgICAgIHVpbnQyNTYgc2xvZ25BbW91bnQgPSBldGhlcnM7IC8vIGNhbGN1bGF0ZXMgdGhlIGFtb3VudA0KDQogICAgICAgIHVpbnQyNTYgYm9udXMgPSBjYWxjdWxhdGVCb251cyhpY29TdGVwLCB0b3RhbFNvbGRTbG9nbnMsIHNsb2duQW1vdW50KTsNCg0KICAgICAgICAvLyBjaGVjayBmb3IgYXZhaWxhYmxlIHNsb2ducw0KICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlt0aGlzXSA+PSBzbG9nbkFtb3VudCArIGJvbnVzKTsNCg0KICAgICAgICBpZihib251cyA+IDApIHsNCiAgICAgICAgICAgIEJvbnVzRWFybmVkKF91c2VyLCBib251cyk7DQogICAgICAgIH0NCg0KICAgICAgICB0cmFuc2ZlckludGVybmFsKHRoaXMsIF91c2VyLCBzbG9nbkFtb3VudCArIGJvbnVzKTsNCg0KICAgICAgICB0b3RhbFNvbGRTbG9nbnMgKz0gc2xvZ25BbW91bnQ7DQoNCiAgICAgICAgaWYoaWNvU3RlcCA9PSAxKSB7DQogICAgICAgICAgICBwcmVJY29FdGhlcnNbX3VzZXJdICs9IGV0aGVyczsgICAgICAvLyBmaWxsIGV0aGVyZXVtIHVzZWQgZm9yIHJlZnVuZCBpZiBnb2FsIG5vdCByZWFjaGVkDQogICAgICAgIH0NCiAgICAgICAgaWYoaWNvU3RlcCA9PSAyKSB7DQogICAgICAgICAgICBpY29FdGhlcnNbX3VzZXJdICs9IGV0aGVyczsgICAgICAvLyBmaWxsIGV0aGVyZXVtIHVzZWQgZm9yIHJlZnVuZCBpZiBnb2FsIG5vdCByZWFjaGVkDQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBCdXkgU2xvZ24gdG9rZW5zDQogICAgICovDQogICAgZnVuY3Rpb24gYnV5KCkgcGF5YWJsZSB7DQogICAgICAgIGJ1eUZvcihtc2cuc2VuZGVyLCBtc2cudmFsdWUsIGJsb2NrLnRpbWVzdGFtcCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogTWFuYWdlIGV0aGVyZXVtIGJhbGFuY2UNCiAgICAgKiBAcGFyYW0gdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uDQogICAgICogQHBhcmFtIHZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuDQogICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXJFdGhlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYobXNnLnNlbmRlciAhPSBldGhGdW5kTWFuYWdlcikgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYodG90YWxTb2xkU2xvZ25zIDwgTUlOX1BSRV9JQ09fU0xPR05fQ09MTEVDVEVEKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBpZih0aGlzLmJhbGFuY2UgPCB2YWx1ZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgdG8udHJhbnNmZXIodmFsdWUpOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzDQogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4NCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuDQogICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYoaXNUcmFuc2FjdGlvbnNBbGxvd2VkID09IGZhbHNlKSB7DQogICAgICAgICAgICBpZihtc2cuc2VuZGVyICE9IGJvdW50eUZ1bmRNYW5hZ2VyKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRyYW5zZmVySW50ZXJuYWwobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXINCiAgICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tDQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvDQogICAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZihpc1RyYW5zYWN0aW9uc0FsbG93ZWQgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgIGlmKF9mcm9tICE9IGJvdW50eUZ1bmRNYW5hZ2VyKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRyYW5zZmVyRnJvbUludGVybmFsKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcmVmdW5kKCkgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICByZXR1cm4gcmVmdW5kSW50ZXJuYWwoYmxvY2sudGltZXN0YW1wKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpY29GaW5pc2goKSByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiBpY29GaW5pc2hJbnRlcm5hbChibG9jay50aW1lc3RhbXApOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNldFByZUljb0RhdGVzKHVpbnQyNTYgc2luY2UsIHVpbnQyNTYgdGlsbCkgb25seU93bmVyIHsNCiAgICAgICAgUFJFX0lDT19TSU5DRSA9IHNpbmNlOw0KICAgICAgICBQUkVfSUNPX1RJTEwgPSB0aWxsOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNldEljb0RhdGVzKHVpbnQyNTYgc2luY2UsIHVpbnQyNTYgdGlsbCkgb25seU93bmVyIHsNCiAgICAgICAgSUNPX1NJTkNFID0gc2luY2U7DQogICAgICAgIElDT19USUxMID0gdGlsbDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzZXRUcmFuc2FjdGlvbnNBbGxvd2VkKGJvb2wgZW5hYmxlZCkgb25seU93bmVyIHsNCiAgICAgICAgaXNUcmFuc2FjdGlvbnNBbGxvd2VkID0gZW5hYmxlZDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KfQ=='