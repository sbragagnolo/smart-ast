base 64 content
base64slognToken1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4yOw0KDQpjb250cmFjdCBUb2tlbiB7DQogICAgLyogUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8NCiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkOw0KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsNCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsNCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7DQogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7DQoNCiAgICAvKiBUaGlzIGNyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgYmFsYW5jZXMgKi8NCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOw0KDQogICAgLyogRVJDMjAgRXZlbnRzICovDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyAvKmluZGV4ZWQgKi9fZnJvbSwgYWRkcmVzcyAvKmluZGV4ZWQgKi8gX3RvLCB1aW50MjU2IF92YWx1ZSk7DQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7DQoNCiAgICAvKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgKi8NCiAgICBmdW5jdGlvbiBUb2tlbih1aW50MjU2IGluaXRpYWxTdXBwbHksIHN0cmluZyBfc3RhbmRhcmQsIHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wsIHVpbnQ4IF9kZWNpbWFscykgew0KICAgICAgICB0b3RhbFN1cHBseSA9IGluaXRpYWxTdXBwbHk7DQogICAgICAgIGJhbGFuY2VPZlt0aGlzXSA9IGluaXRpYWxTdXBwbHk7DQogICAgICAgIHN0YW5kYXJkID0gX3N0YW5kYXJkOw0KICAgICAgICBuYW1lID0gX25hbWU7DQogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7DQogICAgICAgIGRlY2ltYWxzID0gX2RlY2ltYWxzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRyYW5zZmVyIHRva2VuIGxvZ2ljDQogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIGZyb20uDQogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4NCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuDQogICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXJJbnRlcm5hbChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGludGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsNCg0KICAgICAgICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzDQogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPj0gYmFsYW5jZU9mW190b10pOw0KDQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOw0KDQogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsNCg0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuDQogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLg0KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuDQogICAgICovDQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyDQogICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQ0KICAgICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bw0KICAgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQNCiAgICAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb21JbnRlcm5hbChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGludGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICByZXF1aXJlKF92YWx1ZSA+PSBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKTsgICAvLyBDaGVjayBhbGxvd2FuY2UNCg0KICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCg0KICAgICAgICByZXR1cm4gdHJhbnNmZXJJbnRlcm5hbChfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgIH0NCn0NCg0KY29udHJhY3QgSUNPIHsNCiAgICB1aW50MjU2IHB1YmxpYyBQUkVfSUNPX1NJTkNFID0gMTUwMDMwMzYwMDsgICAgICAgICAgICAgICAgICAgICAvLyAwNy8xNy8yMDE3IEAgMTU6MDAgKFVUQykNCiAgICB1aW50MjU2IHB1YmxpYyBQUkVfSUNPX1RJTEwgPSAxNTAwNDc2NDAwOyAgICAgICAgICAgICAgICAgICAgICAvLyAwNy8xOS8yMDE3IEAgMTU6MDAgKFVUQykNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBQUkVfSUNPX0JPTlVTX1JBVEUgPSA3MDsNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBQUkVfSUNPX1NMR05fTEVTUyA9IDUwMDAgZXRoZXI7ICAgICAgICAgICAgICAgICAvLyB1cHBlciBsaW1pdCBmb3IgcHJlIGljbyBpcyA1ayBldGhlcg0KDQogICAgdWludDI1NiBwdWJsaWMgSUNPX1NJTkNFID0gMTUwMDk5NDgwMDsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMDcvMjUvMjAxNyBAIDk6MDBhbSAoVVRDKQ0KICAgIHVpbnQyNTYgcHVibGljIElDT19USUxMID0gMTUwMjgwOTIwMDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDA4LzE1LzIwMTcgQCA5OjAwYW0gKFVUQykNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBJQ09fQk9OVVMxX1NMR05fTEVTUyA9IDIwMDAwIGV0aGVyOyAgICAgICAgICAgICAgICAvLyBib251cyAxIHdpbGwgd29yayBvbmx5IGlmIDIwMDAwIGV0aCB3ZXJlIGNvbGxlY3RlZCBkdXJpbmcgZmlyc3QgcGhhc2Ugb2YgaWNvDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSUNPX0JPTlVTMV9SQVRFID0gMzA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYm9udXMgMSByYXRlDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSUNPX0JPTlVTMl9TTEdOX0xFU1MgPSA1MDAwMCBldGhlcjsgICAgICAgICAgICAgICAgLy8gYm9udXMgMSB3aWxsIHdvcmsgb25seSBpZiA1MDAwMCBldGggd2VyZSBjb2xsZWN0ZWQgZHVyaW5nIHNlY29uZCBwaGFzZSBvZiBpY28NCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBJQ09fQk9OVVMyX1JBVEUgPSAxNTsgLy8gYm9udXMgMiByYXRlDQoNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFNvbGRTbG9nbnM7DQoNCiAgICAvKiBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMgKi8NCiAgICBldmVudCBCb251c0Vhcm5lZChhZGRyZXNzIHRhcmdldCwgdWludDI1NiBib251cyk7DQoNCiAgICAvKioNCiAgICAgKiBDYWxjdWxhdGUgYW1vdW50IG9mIHByZW1pdW0gYm9udXNlcw0KICAgICAqIEBwYXJhbSBpY29TdGVwIGlkZW50aWZpZXMgaXMgaXQgcHJlLWljbyAoZXF1YWxzIDApIG9yIGljbyAoZXF1YWxzIDEpDQogICAgICogQHBhcmFtIHRvdGFsU29sZFNsb2ducyB0b3RhbCBhbW91bnQgb2YgYWxyZWFkeSBzb2xkIHNsb2duIHRva2Vucy4NCiAgICAgKiBAcGFyYW0gc29sZFNsb2ducyB0b3RhbCBhbW91bnQgc29sZCBzbG9nbnMgaW4gY3VycmVudCB0cmFuc2FjdGlvbi4NCiAgICAgKi8NCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVCb251cyh1aW50OCBpY29TdGVwLCB1aW50MjU2IHRvdGFsU29sZFNsb2ducywgdWludDI1NiBzb2xkU2xvZ25zKSByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICAgIGlmKGljb1N0ZXAgPT0gMSkgew0KICAgICAgICAgICAgLy8gcHJlIGljbw0KICAgICAgICAgICAgcmV0dXJuIHNvbGRTbG9nbnMgLyAxMDAgKiBQUkVfSUNPX0JPTlVTX1JBVEU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZihpY29TdGVwID09IDIpIHsNCiAgICAgICAgICAgIC8vIGljbw0KICAgICAgICAgICAgaWYodG90YWxTb2xkU2xvZ25zID4gSUNPX0JPTlVTMV9TTEdOX0xFU1MgKyBJQ09fQk9OVVMyX1NMR05fTEVTUykgew0KICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB1aW50MjU2IGF2YWlsYWJsZUZvckJvbnVzMSA9IElDT19CT05VUzFfU0xHTl9MRVNTIC0gdG90YWxTb2xkU2xvZ25zOw0KDQogICAgICAgICAgICB1aW50MjU2IHRtcCA9IHNvbGRTbG9nbnM7DQogICAgICAgICAgICB1aW50MjU2IGJvbnVzID0gMDsNCg0KICAgICAgICAgICAgdWludDI1NiB0b2tlbnNGb3JCb251czEgPSAwOw0KDQogICAgICAgICAgICBpZihhdmFpbGFibGVGb3JCb251czEgPiAwICYmIGF2YWlsYWJsZUZvckJvbnVzMSA8PSBJQ09fQk9OVVMxX1NMR05fTEVTUykgew0KICAgICAgICAgICAgICAgIHRva2Vuc0ZvckJvbnVzMSA9IHRtcCA+IGF2YWlsYWJsZUZvckJvbnVzMSA/IGF2YWlsYWJsZUZvckJvbnVzMSA6IHRtcDsNCg0KICAgICAgICAgICAgICAgIGJvbnVzICs9IHRva2Vuc0ZvckJvbnVzMSAvIDEwMCAqIElDT19CT05VUzFfUkFURTsNCiAgICAgICAgICAgICAgICB0bXAgLT0gdG9rZW5zRm9yQm9udXMxOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB1aW50MjU2IGF2YWlsYWJsZUZvckJvbnVzMiA9IChJQ09fQk9OVVMyX1NMR05fTEVTUyArIElDT19CT05VUzFfU0xHTl9MRVNTKSAtIHRvdGFsU29sZFNsb2ducyAtIHRva2Vuc0ZvckJvbnVzMTsNCg0KICAgICAgICAgICAgdWludDI1NiB0b2tlbnNGb3JCb251czIgPSAwOw0KDQogICAgICAgICAgICBpZihhdmFpbGFibGVGb3JCb251czIgPiAwICYmIGF2YWlsYWJsZUZvckJvbnVzMiA8PSBJQ09fQk9OVVMyX1NMR05fTEVTUykgew0KICAgICAgICAgICAgICAgIHRva2Vuc0ZvckJvbnVzMiA9IHRtcCA+IGF2YWlsYWJsZUZvckJvbnVzMiA/IGF2YWlsYWJsZUZvckJvbnVzMiA6IHRtcDsNCg0KICAgICAgICAgICAgICAgIGJvbnVzICs9IHRva2Vuc0ZvckJvbnVzMiAvIDEwMCAqIElDT19CT05VUzJfUkFURTsNCiAgICAgICAgICAgICAgICB0bXAgLT0gdG9rZW5zRm9yQm9udXMyOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gYm9udXM7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gMDsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IEVzY3Jvd0lDTyBpcyBUb2tlbiwgSUNPIHsNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBNSU5fUFJFX0lDT19TTE9HTl9DT0xMRUNURUQgPSAxMDAwIGV0aGVyOyAgICAgICAvLyBQUkUgSUNPIGlzIHN1Y2Nlc3NmdWwgb25seSBpZiBzb2xkIDEwLjAwMC4wMDAgc2xvZ25zDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgTUlOX0lDT19TTE9HTl9DT0xMRUNURUQgPSAxMDAwIGV0aGVyOyAgICAgICAgICAvLyBJQ08gaXMgc3VjY2Vzc2Z1bCBvbmx5IGlmIHNvbGQgMTAwLjAwMC4wMDAgc2xvZ25zDQoNCiAgICBib29sIHB1YmxpYyBpc1RyYW5zYWN0aW9uc0FsbG93ZWQ7DQoNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFNvbGRTbG9nbnM7DQoNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBwcmVJY29FdGhlcnM7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgaWNvRXRoZXJzOw0KDQogICAgZXZlbnQgUmVmdW5kRXRoKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludDI1NiB2YWx1ZSk7DQogICAgZXZlbnQgSWNvRmluaXNoZWQoKTsNCg0KICAgIGZ1bmN0aW9uIEVzY3Jvd0lDTygpIHsNCiAgICAgICAgaXNUcmFuc2FjdGlvbnNBbGxvd2VkID0gZmFsc2U7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0SWNvU3RlcCh1aW50MjU2IHRpbWUpIHJldHVybnMgKHVpbnQ4IHN0ZXApIHsNCiAgICAgICAgaWYodGltZSA+PSAgUFJFX0lDT19TSU5DRSAmJiB0aW1lIDw9IFBSRV9JQ09fVElMTCkgew0KICAgICAgICAgICAgcmV0dXJuIDE7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZih0aW1lID49IElDT19TSU5DRSAmJiB0aW1lIDw9IElDT19USUxMKSB7DQogICAgICAgICAgICAvLyBpY28gc2hvdWQgZmFpbCBpZiBjb2xsZWN0ZWQgbGVzcyB0aGFuIDEwMDAgc2xvZ25zIGR1cmluZyBwcmUgaWNvDQogICAgICAgICAgICBpZih0b3RhbFNvbGRTbG9nbnMgPj0gTUlOX1BSRV9JQ09fU0xPR05fQ09MTEVDVEVEKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIDI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gMDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBvZmZpY2lhbGx5IGZpbmlzaCBJQ08sIG9ubHkgYWxsb3dlZCBhZnRlciBJQ08gaXMgZW5kZWQNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBpY29GaW5pc2hJbnRlcm5hbCh1aW50MjU2IHRpbWUpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgaWYodGltZSA8PSBJQ09fVElMTCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYodG90YWxTb2xkU2xvZ25zID49IE1JTl9JQ09fU0xPR05fQ09MTEVDVEVEKSB7DQogICAgICAgICAgICAvLyBidXJuIHRva2VucyBhc3NpZ25lZCB0byBzbWFydCBjb250cmFjdA0KDQogICAgICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5IC0gYmFsYW5jZU9mW3RoaXNdOw0KDQogICAgICAgICAgICBiYWxhbmNlT2ZbdGhpc10gPSAwOw0KDQogICAgICAgICAgICAvLyBhbGxvdyB0cmFuc2FjdGlvbnMgZm9yIGV2ZXJ5b25lDQogICAgICAgICAgICBpc1RyYW5zYWN0aW9uc0FsbG93ZWQgPSB0cnVlOw0KDQogICAgICAgICAgICBJY29GaW5pc2hlZCgpOw0KDQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiByZWZ1bmQgaWNvIG1ldGhvZA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHJlZnVuZEludGVybmFsKHVpbnQyNTYgdGltZSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICBpZih0aW1lIDw9IFBSRV9JQ09fVElMTCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYodG90YWxTb2xkU2xvZ25zID49IE1JTl9QUkVfSUNPX1NMT0dOX0NPTExFQ1RFRCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgdWludDI1NiB0cmFuc2ZlcmVkRXRoZXJzOw0KDQogICAgICAgIHRyYW5zZmVyZWRFdGhlcnMgPSBwcmVJY29FdGhlcnNbbXNnLnNlbmRlcl07DQoNCiAgICAgICAgaWYodHJhbnNmZXJlZEV0aGVycyA+IDApIHsNCiAgICAgICAgICAgIHByZUljb0V0aGVyc1ttc2cuc2VuZGVyXSA9IDA7DQoNCiAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IDA7DQoNCiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodHJhbnNmZXJlZEV0aGVycyk7DQoNCiAgICAgICAgICAgIFJlZnVuZEV0aChtc2cuc2VuZGVyLCB0cmFuc2ZlcmVkRXRoZXJzKTsNCg0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KfQ0KDQpjb250cmFjdCBTbG9nblRva2VuIGlzIFRva2VuLCBFc2Nyb3dJQ08gew0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1RBTkRBUkQgPSAnU2xvZ24gdjAuMSc7DQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBOQU1FID0gJ1NMT0dOJzsNCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IFNZTUJPTCA9ICdTTEdOJzsNCiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgUFJFQ0lTSU9OID0gMTQ7DQoNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT1RBTF9TVVBQTFkgPSA4MDAwMDAgZXRoZXI7IC8vIGluaXRpYWwgdG90YWwgc3VwcGx5IGVxdWFscyB0byA4LjAwMC4wMDAuMDAwIHNsb2ducyBvciA4MDAuMDAwIGV0aHMNCg0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IENPUkVfVEVBTV9UT0tFTlMgPSBUT1RBTF9TVVBQTFkgLyAxMDAgKiAxNTsgICAgICAgLy8gMTUlDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgQURWSVNPUllfQk9BUkRfVE9LRU5TID0gVE9UQUxfU1VQUExZIC8gMTAwMCAqIDE1OyAgICAgICAvLyAxLjUlDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgT1BFTlNPVVJDRV9UT0tFTlMgPSBUT1RBTF9TVVBQTFkgLyAxMDAwICogNzU7ICAgICAvLyA3LjUlDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUkVTRVJWRV9UT0tFTlMgPSBUT1RBTF9TVVBQTFkgLyAxMDAgKiA1OyAgICAgICAgICAvLyA1JQ0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IEJPVU5UWV9UT0tFTlMgPSBUT1RBTF9TVVBQTFkgLyAxMDA7ICAgICAgICAgICAgICAgLy8gMSUNCg0KICAgIGFkZHJlc3MgcHVibGljIGFkdmlzb3J5Qm9hcmRGdW5kTWFuYWdlcjsNCiAgICBhZGRyZXNzIHB1YmxpYyBvcGVuc291cmNlRnVuZE1hbmFnZXI7DQogICAgYWRkcmVzcyBwdWJsaWMgcmVzZXJ2ZUZ1bmRNYW5hZ2VyOw0KICAgIGFkZHJlc3MgcHVibGljIGJvdW50eUZ1bmRNYW5hZ2VyOw0KICAgIGFkZHJlc3MgcHVibGljIGV0aEZ1bmRNYW5hZ2VyOw0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQogICAgLyogVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzICovDQogICAgZXZlbnQgQm9udXNFYXJuZWQoYWRkcmVzcyB0YXJnZXQsIHVpbnQyNTYgYm9udXMpOw0KDQogICAgLyogTW9kaWZpZXJzICovDQogICAgbW9kaWZpZXIgb25seU93bmVyKCkgew0KICAgICAgICByZXF1aXJlKG93bmVyID09IG1zZy5zZW5kZXIpOw0KDQogICAgICAgIF87DQogICAgfQ0KDQogICAgLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0ICovDQogICAgZnVuY3Rpb24gU2xvZ25Ub2tlbigNCiAgICBhZGRyZXNzIFtdIGNvcmVUZWFtLA0KICAgIGFkZHJlc3MgX2Fkdmlzb3J5Qm9hcmRGdW5kTWFuYWdlciwNCiAgICBhZGRyZXNzIF9vcGVuc291cmNlRnVuZE1hbmFnZXIsDQogICAgYWRkcmVzcyBfcmVzZXJ2ZUZ1bmRNYW5hZ2VyLA0KICAgIGFkZHJlc3MgX2JvdW50eUZ1bmRNYW5hZ2VyLA0KICAgIGFkZHJlc3MgX2V0aEZ1bmRNYW5hZ2VyDQogICAgKQ0KICAgIFRva2VuIChUT1RBTF9TVVBQTFksIFNUQU5EQVJELCBOQU1FLCBTWU1CT0wsIFBSRUNJU0lPTikNCiAgICBFc2Nyb3dJQ08oKQ0KICAgIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KDQogICAgICAgIGFkdmlzb3J5Qm9hcmRGdW5kTWFuYWdlciA9IF9hZHZpc29yeUJvYXJkRnVuZE1hbmFnZXI7DQogICAgICAgIG9wZW5zb3VyY2VGdW5kTWFuYWdlciA9IF9vcGVuc291cmNlRnVuZE1hbmFnZXI7DQogICAgICAgIHJlc2VydmVGdW5kTWFuYWdlciA9IF9yZXNlcnZlRnVuZE1hbmFnZXI7DQogICAgICAgIGJvdW50eUZ1bmRNYW5hZ2VyID0gX2JvdW50eUZ1bmRNYW5hZ2VyOw0KICAgICAgICBldGhGdW5kTWFuYWdlciA9IF9ldGhGdW5kTWFuYWdlcjsNCg0KICAgICAgICAvLyB0cmFuc2ZlciB0b2tlbnMgdG8gY29yZSB0ZWFtDQogICAgICAgIHVpbnQyNTYgdG9rZW5zUGVyTWVtYmVyID0gQ09SRV9URUFNX1RPS0VOUyAvIGNvcmVUZWFtLmxlbmd0aDsNCg0KICAgICAgICBmb3IodWludDggaSA9IDA7IGkgPCBjb3JlVGVhbS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgdHJhbnNmZXJJbnRlcm5hbCh0aGlzLCBjb3JlVGVhbVtpXSwgdG9rZW5zUGVyTWVtYmVyKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEFkdmlzb3J5IGJvYXJkIGZ1bmQNCiAgICAgICAgdHJhbnNmZXJJbnRlcm5hbCh0aGlzLCBhZHZpc29yeUJvYXJkRnVuZE1hbmFnZXIsIEFEVklTT1JZX0JPQVJEX1RPS0VOUyk7DQoNCiAgICAgICAgLy8gT3BlbnNvdXJjZSBmdW5kDQogICAgICAgIHRyYW5zZmVySW50ZXJuYWwodGhpcywgb3BlbnNvdXJjZUZ1bmRNYW5hZ2VyLCBPUEVOU09VUkNFX1RPS0VOUyk7DQoNCiAgICAgICAgLy8gUmVzZXJ2ZSBmdW5kDQogICAgICAgIHRyYW5zZmVySW50ZXJuYWwodGhpcywgcmVzZXJ2ZUZ1bmRNYW5hZ2VyLCBSRVNFUlZFX1RPS0VOUyk7DQoNCiAgICAgICAgLy8gQm91bnR5IGZ1bmQNCiAgICAgICAgdHJhbnNmZXJJbnRlcm5hbCh0aGlzLCBib3VudHlGdW5kTWFuYWdlciwgQk9VTlRZX1RPS0VOUyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYnV5Rm9yKGFkZHJlc3MgX3VzZXIsIHVpbnQyNTYgZXRoZXJzLCB1aW50IHRpbWUpIGludGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICByZXF1aXJlKGV0aGVycyA+IDApOw0KDQogICAgICAgIHVpbnQ4IGljb1N0ZXAgPSBnZXRJY29TdGVwKHRpbWUpOw0KDQogICAgICAgIHJlcXVpcmUoaWNvU3RlcCA9PSAxIHx8IGljb1N0ZXAgPT0gMik7DQoNCiAgICAgICAgLy8gbWF4aW11bSBjb2xsZWN0ZWQgYW1vdW50IGZvciBwcmVpY28gaXMgNTAwMCBldGhlcg0KICAgICAgICBpZihpY29TdGVwID09IDEgJiYgKHRvdGFsU29sZFNsb2ducyArIGV0aGVycykgPiA1MDAwIGV0aGVyKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KDQogICAgICAgIHVpbnQyNTYgc2xvZ25BbW91bnQgPSBldGhlcnM7IC8vIGNhbGN1bGF0ZXMgdGhlIGFtb3VudA0KDQogICAgICAgIHVpbnQyNTYgYm9udXMgPSBjYWxjdWxhdGVCb251cyhpY29TdGVwLCB0b3RhbFNvbGRTbG9nbnMsIHNsb2duQW1vdW50KTsNCg0KICAgICAgICAvLyBjaGVjayBmb3IgYXZhaWxhYmxlIHNsb2ducw0KICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlt0aGlzXSA+PSBzbG9nbkFtb3VudCArIGJvbnVzKTsNCg0KICAgICAgICBpZihib251cyA+IDApIHsNCiAgICAgICAgICAgIEJvbnVzRWFybmVkKF91c2VyLCBib251cyk7DQogICAgICAgIH0NCg0KICAgICAgICB0cmFuc2ZlckludGVybmFsKHRoaXMsIF91c2VyLCBzbG9nbkFtb3VudCArIGJvbnVzKTsNCg0KICAgICAgICB0b3RhbFNvbGRTbG9nbnMgKz0gc2xvZ25BbW91bnQ7DQoNCiAgICAgICAgaWYoaWNvU3RlcCA9PSAxKSB7DQogICAgICAgICAgICBwcmVJY29FdGhlcnNbX3VzZXJdICs9IGV0aGVyczsgICAgICAvLyBmaWxsIGV0aGVyZXVtIHVzZWQgZm9yIHJlZnVuZCBpZiBnb2FsIG5vdCByZWFjaGVkDQogICAgICAgIH0NCiAgICAgICAgaWYoaWNvU3RlcCA9PSAyKSB7DQogICAgICAgICAgICBpY29FdGhlcnNbX3VzZXJdICs9IGV0aGVyczsgICAgICAvLyBmaWxsIGV0aGVyZXVtIHVzZWQgZm9yIHJlZnVuZCBpZiBnb2FsIG5vdCByZWFjaGVkDQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBCdXkgU2xvZ24gdG9rZW5zDQogICAgICovDQogICAgZnVuY3Rpb24gYnV5KCkgcGF5YWJsZSB7DQogICAgICAgIGJ1eUZvcihtc2cuc2VuZGVyLCBtc2cudmFsdWUsIGJsb2NrLnRpbWVzdGFtcCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogTWFuYWdlIGV0aGVyZXVtIGJhbGFuY2UNCiAgICAgKiBAcGFyYW0gdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uDQogICAgICogQHBhcmFtIHZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuDQogICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXJFdGhlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYobXNnLnNlbmRlciAhPSBldGhGdW5kTWFuYWdlcikgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYodG90YWxTb2xkU2xvZ25zIDwgTUlOX1BSRV9JQ09fU0xPR05fQ09MTEVDVEVEKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBpZih0aGlzLmJhbGFuY2UgPCB2YWx1ZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgdG8udHJhbnNmZXIodmFsdWUpOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzDQogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4NCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuDQogICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYoaXNUcmFuc2FjdGlvbnNBbGxvd2VkID09IGZhbHNlKSB7DQogICAgICAgICAgICBpZihtc2cuc2VuZGVyICE9IGJvdW50eUZ1bmRNYW5hZ2VyKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRyYW5zZmVySW50ZXJuYWwobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXINCiAgICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tDQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvDQogICAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZA0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZihpc1RyYW5zYWN0aW9uc0FsbG93ZWQgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgIGlmKF9mcm9tICE9IGJvdW50eUZ1bmRNYW5hZ2VyKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRyYW5zZmVyRnJvbUludGVybmFsKF9mcm9tLCBfdG8sIF92YWx1ZSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcmVmdW5kKCkgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICByZXR1cm4gcmVmdW5kSW50ZXJuYWwoYmxvY2sudGltZXN0YW1wKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpY29GaW5pc2goKSByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiBpY29GaW5pc2hJbnRlcm5hbChibG9jay50aW1lc3RhbXApOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNldFByZUljb0RhdGVzKHVpbnQyNTYgc2luY2UsIHVpbnQyNTYgdGlsbCkgb25seU93bmVyIHsNCiAgICAgICAgUFJFX0lDT19TSU5DRSA9IHNpbmNlOw0KICAgICAgICBQUkVfSUNPX1RJTEwgPSB0aWxsOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNldEljb0RhdGVzKHVpbnQyNTYgc2luY2UsIHVpbnQyNTYgdGlsbCkgb25seU93bmVyIHsNCiAgICAgICAgSUNPX1NJTkNFID0gc2luY2U7DQogICAgICAgIElDT19USUxMID0gdGlsbDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzZXRUcmFuc2FjdGlvbnNBbGxvd2VkKGJvb2wgZW5hYmxlZCkgb25seU93bmVyIHsNCiAgICAgICAgaXNUcmFuc2FjdGlvbnNBbGxvd2VkID0gZW5hYmxlZDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KfQ=='