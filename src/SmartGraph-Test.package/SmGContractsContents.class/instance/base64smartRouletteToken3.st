base 64 content
base64smartRouletteToken3
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQpjb250cmFjdCBTbWFydFJvdWxldHRlVG9rZW4gew0KCS8vVG9rZW5zIGRhdGENCglzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ0VSQzIwJzsNCiAgICBzdHJpbmcgcHVibGljIG5hbWU7DQogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7DQogICAgdWludDggcHVibGljIGRlY2ltYWxzOw0KDQoJc3RydWN0IGhvbGRlckRhdGEgew0KCQl1aW50MjU2IHRva2Vuc19jb3VudDsNCgkJYm9vbCBpbml0Ow0KCX0NCg0KCXN0cnVjdCB0ZW1wSG9sZGVyRGF0YSB7DQoJCXVpbnQyNTYgdG9rZW5zX2NvdW50Ow0KCQl1aW50MjU2IHN0YXJ0X2RhdGU7DQoJCXVpbnQyNTYgZW5kX2RhdGU7DQoJfQ0KDQoJYWRkcmVzc1tdIGxpc3RBZGRySG9sZGVyczsNCg0KCW1hcHBpbmcoIGFkZHJlc3MgPT4gaG9sZGVyRGF0YSApIF9iYWxhbmNlczsNCgltYXBwaW5nKCBhZGRyZXNzID0+IHRlbXBIb2xkZXJEYXRhICkgX3RlbXBfYmFsYW5jZTsNCgltYXBwaW5nKCBhZGRyZXNzID0+IG1hcHBpbmcoIGFkZHJlc3MgPT4gdWludDI1NiApICkgX2FwcHJvdmFsczsNCg0KCWJvb2wgc3RvcF9vcGVyYXRpb247DQoJDQoJdWludDI1NiBfc3VwcGx5Ow0KCXVpbnQyNTYgX2luaXRfY291bnRfdG9rZW5zOw0KCXVpbnQyNTYgcHVibGljIGNvc3RPZk9uZVRva2VuOyAvL3RoZSBjb3N0IG9mIG9uZSB0b2tlbiBpbiB3ZWkNCgkNCglhZGRyZXNzIHdhbGxldF9JQ087DQoJYm9vbCBlbmFibGVJQ087DQoJdWludDI1NiBtaW5fdmFsdWVfYnV5VG9rZW47IC8vaW4gd2VpDQoJdWludDI1NiBtYXhfdmFsdWVfYnV5VG9rZW47IC8vaW4gd2VpDQoNCglhZGRyZXNzIGZvbmRfd2FsbGV0Ow0KCWFkZHJlc3MgZGV2ZWxvcGVyX3dhbGxldDsNCg0KCWFkZHJlc3MgZGl2aWRlbnRfY29udHJhY3QgPSBhZGRyZXNzKDB4MCk7DQoJDQoJZXZlbnQgVG9rZW5CdXkoYWRkcmVzcyBidXllciwgdWludDI1NiBhbW91bnRPZlRva2Vucyk7DQoNCiAgICAvL0NvbnRyYWN0IGRhdGENCglhZGRyZXNzIGRldmVsb3BlcjsNCglhZGRyZXNzIG1hbmFnZXI7DQoNCglzdHJ1Y3QgZ2FtZXNEYXRhIHsNCgkJYm9vbCBpbml0Ow0KCX0NCg0KCW1hcHBpbmcoIGFkZHJlc3MgPT4gZ2FtZXNEYXRhKSBsaXN0R2FtZXM7DQoJYWRkcmVzc1tdIGFkZHJHYW1lczsNCg0KDQoJZnVuY3Rpb24gU21hcnRSb3VsZXR0ZVRva2VuKCkNCgl7DQoJCV9zdXBwbHkgPSAxMDAwMDAwMDAwMDAwMDAwMDA7DQoJCV9pbml0X2NvdW50X3Rva2VucyA9IDEwMDAwMDAwMDAwMDAwMDAwMDsNCg0KCQlkZXZlbG9wZXJfd2FsbGV0ID0gYWRkcmVzcygweDg1MjFFMWY5MjIwQTI1MWRFMGFiNzhmNmEyRTg3NTRDYTlFNzUyNDIpOw0KCQlfYmFsYW5jZXNbZGV2ZWxvcGVyX3dhbGxldF0gPSBob2xkZXJEYXRhKChfc3VwcGx5KjIwKS8xMDAsIHRydWUpOw0KCQkNCgkJd2FsbGV0X0lDTyA9IGFkZHJlc3MoMHgyZGZmODdmODg5MmQ2NWY3YTk3YjEyODdlNzk1NDA1MDk4YWU3YjdmKTsNCgkJX2JhbGFuY2VzW3dhbGxldF9JQ09dID0gaG9sZGVyRGF0YSgoX3N1cHBseSo2MCkvMTAwLCB0cnVlKTsNCgkJDQoJCWZvbmRfd2FsbGV0ID0gYWRkcmVzcygweDM1MDFERDJCNTE1RURDMTkyMGY5MDA3NzgyRGE1YWMwMTg5MjI1MDIpOw0KCQlfYmFsYW5jZXNbZm9uZF93YWxsZXRdID0gaG9sZGVyRGF0YSgoX3N1cHBseSoyMCkvMTAwLCB0cnVlKTsNCgkJDQoJCWxpc3RBZGRySG9sZGVycy5wdXNoKGRldmVsb3Blcl93YWxsZXQpOw0KCQlsaXN0QWRkckhvbGRlcnMucHVzaCh3YWxsZXRfSUNPKTsNCgkJbGlzdEFkZHJIb2xkZXJzLnB1c2goZm9uZF93YWxsZXQpOw0KICAgICAgICANCiAgICAgICAgbmFtZSA9ICdSb3VsZXR0ZSBUb2tlbic7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgc3ltYm9sID0gJ1JMVCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICBkZWNpbWFscyA9IDEwOw0KICAgICAgICBjb3N0T2ZPbmVUb2tlbiA9IDE1MDAwMDAwMDAwMDAwMDA7DQoNCgkJZGV2ZWxvcGVyID0gbXNnLnNlbmRlcjsNCgkJbWFuYWdlciA9IG1zZy5zZW5kZXI7CQkNCgkJDQoJCWVuYWJsZUlDTyA9IGZhbHNlOw0KCQltaW5fdmFsdWVfYnV5VG9rZW4gPSAxMDAwMDAwMDAwMDAwMDAwMDAwOw0KCQltYXhfdmFsdWVfYnV5VG9rZW4gPSA1MDAwMDAwMDAwMDAwMDAwMDAwMDA7DQoNCgkJc3RvcF9vcGVyYXRpb24gPSBmYWxzZTsNCgl9DQoNCgltb2RpZmllciBpc0RldmVsb3Blcigpew0KCQlpZiAobXNnLnNlbmRlciE9ZGV2ZWxvcGVyKSB0aHJvdzsNCgkJXzsNCgl9DQoNCgltb2RpZmllciBpc01hbmFnZXIoKXsNCgkJaWYgKG1zZy5zZW5kZXIhPW1hbmFnZXIgJiYgbXNnLnNlbmRlciE9ZGV2ZWxvcGVyKSB0aHJvdzsNCgkJXzsNCgl9DQoNCgltb2RpZmllciBpc0FjY2Vzc1N0b3BPcGVyYXRpb24oKXsNCgkJaWYgKG1zZy5zZW5kZXIhPW1hbmFnZXIgJiYgbXNnLnNlbmRlciE9ZGV2ZWxvcGVyICYmIChtc2cuc2VuZGVyIT1kaXZpZGVudF9jb250cmFjdCB8fCBkaXZpZGVudF9jb250cmFjdD09YWRkcmVzcygweDApKSkgdGhyb3c7DQoJCV87DQoJfQ0KDQoJZnVuY3Rpb24gY2hhbmdlRGV2ZWxvcGVyKGFkZHJlc3MgbmV3X2RldmVsb3BlcikNCglpc0RldmVsb3Blcg0KCXsNCgkJaWYobmV3X2RldmVsb3BlciA9PSBhZGRyZXNzKDB4MCkpIHRocm93Ow0KCQlkZXZlbG9wZXIgPSBuZXdfZGV2ZWxvcGVyOw0KCX0NCg0KCWZ1bmN0aW9uIGNoYW5nZU1hbmFnZXIoYWRkcmVzcyBuZXdfbWFuYWdlcikNCglpc0RldmVsb3Blcg0KCXsNCgkJaWYobmV3X21hbmFnZXIgPT0gYWRkcmVzcygweDApKSB0aHJvdzsNCgkJbWFuYWdlciA9IG5ld19tYW5hZ2VyOw0KCX0NCg0KCWZ1bmN0aW9uIGNoYW5nZURpdmlkZW50Q29udHJhY3QoYWRkcmVzcyBuZXdfY29udHJhY3QpIGlzTWFuYWdlcg0KCXsNCgkJaWYoZGl2aWRlbnRfY29udHJhY3QhPWFkZHJlc3MoMHgwKSkgdGhyb3c7DQoJCWlmKGRpdmlkZW50X2NvbnRyYWN0PT1hZGRyZXNzKDB4MCkpIHRocm93Ow0KCQlkaXZpZGVudF9jb250cmFjdCA9IG5ld19jb250cmFjdDsNCgl9DQoNCglmdW5jdGlvbiBuZXdDb3N0VG9rZW4odWludDI1NiBuZXdfY29zdCkNCglpc01hbmFnZXINCgl7DQoJCWlmKG5ld19jb3N0ID09IDApIHRocm93Ow0KCQljb3N0T2ZPbmVUb2tlbiA9IG5ld19jb3N0Ow0KCX0NCg0KCWZ1bmN0aW9uIGdldG9zdFRva2VuKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KQ0KCXsNCgkJcmV0dXJuIGNvc3RPZk9uZVRva2VuOw0KCX0NCg0KCWZ1bmN0aW9uIGFkZE5ld0dhbWUoYWRkcmVzcyBuZXdfZ2FtZSkNCglpc01hbmFnZXINCgl7DQoJCWlmKG5ld19nYW1lID09IGFkZHJlc3MoMHgwKSkgdGhyb3c7DQoJCWxpc3RHYW1lc1tuZXdfZ2FtZV0gPSBnYW1lc0RhdGEodHJ1ZSk7DQoJCWFkZHJHYW1lcy5wdXNoKG5ld19nYW1lKTsNCgl9DQoNCglmdW5jdGlvbiBkZWxldGVHYW1lKGFkZHJlc3MgZ2FtZSkNCglpc01hbmFnZXINCgl7DQoJCWlmKGdhbWUgPT0gYWRkcmVzcygweDApKSB0aHJvdzsNCgkJaWYobGlzdEdhbWVzW2dhbWVdLmluaXQpew0KCQkJbGlzdEdhbWVzW2dhbWVdLmluaXQgPSBmYWxzZTsNCgkJfQ0KCX0NCg0KCWZ1bmN0aW9uIGtpbGwoKSBpc0RldmVsb3BlciB7DQoJCS8qdWludDI1NiB0b2tlbl9wcmljZSA9IHRoaXMuYmFsYW5jZS9fc3VwcGx5Ow0KCQlmb3IodWludDI1NiBpID0gMDsgaSA8IGxpc3RBZGRySG9sZGVycy5sZW5ndGg7IGkrKyl7DQoJCQlpZihfYmFsYW5jZXNbbGlzdEFkZHJIb2xkZXJzW2ldXS50b2tlbnNfY291bnQ+MCl7DQoJCQkJaWYobGlzdEFkZHJIb2xkZXJzW2ldLnNlbmQodG9rZW5fcHJpY2UqX2JhbGFuY2VzW2xpc3RBZGRySG9sZGVyc1tpXV0udG9rZW5zX2NvdW50KT09ZmFsc2UpeyB0aHJvdzsgfQ0KCQkJCWVsc2V7DQoJCQkJCV9iYWxhbmNlc1tsaXN0QWRkckhvbGRlcnNbaV1dLnRva2Vuc19jb3VudCA9IDA7DQoJCQkJfQ0KCQkJfQ0KCQl9Ki8NCgkJc3VpY2lkZShkZXZlbG9wZXIpOw0KCX0NCg0KCWZ1bmN0aW9uIGdldExpc3RHYW1lcygpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzc1tdKXsNCgkJcmV0dXJuIGFkZHJHYW1lczsNCgl9DQoNCglmdW5jdGlvbiBhZGRVc2VyVG9MaXN0KGFkZHJlc3MgdXNlcikgaW50ZXJuYWwgew0KCQlpZighX2JhbGFuY2VzW3VzZXJdLmluaXQpew0KCQkJbGlzdEFkZHJIb2xkZXJzLnB1c2godXNlcik7DQoJCX0NCgl9DQoNCglmdW5jdGlvbiBnYW1lTGlzdE9mKCBhZGRyZXNzIHdobyApIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wgdmFsdWUpIHsNCgkJZ2FtZXNEYXRhIGdhbWVfZGF0YSA9IGxpc3RHYW1lc1t3aG9dOw0KCQlyZXR1cm4gZ2FtZV9kYXRhLmluaXQ7DQoJfQ0KDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkvLyBUb2tlbnMgRnVuY3Rpb25zDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCglldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsNCg0KICAgIGZ1bmN0aW9uIHN0b3BPcGVyYXRpb24oKSBpc0FjY2Vzc1N0b3BPcGVyYXRpb24gew0KCQlzdG9wX29wZXJhdGlvbiA9IHRydWU7DQoJfQ0KDQoJZnVuY3Rpb24gc3RhcnRPcGVyYXRpb24oKSBpc0FjY2Vzc1N0b3BPcGVyYXRpb24gew0KCQlzdG9wX29wZXJhdGlvbiA9IGZhbHNlOw0KCX0NCg0KCWZ1bmN0aW9uIHN0YXR1c09wZXJhdGlvbigpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpew0KCQlyZXR1cm4gc3RvcF9vcGVyYXRpb247DQoJfQ0KDQoJZnVuY3Rpb24gcnVuSUNPKCkgaXNNYW5hZ2VyIHsNCgkJZW5hYmxlSUNPID0gdHJ1ZTsNCgl9DQoNCglmdW5jdGlvbiBzdG9wSUNPKCkgaXNNYW5hZ2VyIHsNCgkJZW5hYmxlSUNPID0gZmFsc2U7DQoJfQ0KDQoJZnVuY3Rpb24gaW5mb0lDTygpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpew0KCQlyZXR1cm4gZW5hYmxlSUNPOw0KCX0NCg0KCWZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpIHsNCgkJcmV0dXJuIF9zdXBwbHk7DQoJfQ0KDQoJZnVuY3Rpb24gaW5pdENvdW50VG9rZW5zKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBpbml0X2NvdW50KSB7DQoJCXJldHVybiBfaW5pdF9jb3VudF90b2tlbnM7DQoJfQ0KDQoJZnVuY3Rpb24gYmFsYW5jZU9mKCBhZGRyZXNzIHdobyApIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdmFsdWUpIHsNCgkJLy9ob2xkZXJEYXRhIGRhdGFfaG9sZGVyID0gX2JhbGFuY2VzW3dob107DQoJCXJldHVybiBfYmFsYW5jZXNbd2hvXS50b2tlbnNfY291bnQ7DQoJfQ0KDQoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBfYWxsb3dhbmNlKSB7DQoJCXJldHVybiBfYXBwcm92YWxzW293bmVyXVtzcGVuZGVyXTsNCgl9DQoNCgkvLyBvdmVyZmxvdyBjaGVjaw0KCWZ1bmN0aW9uIHNhZmVUb0FkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgew0KCQlyZXR1cm4gKGEgKyBiID49IGEgJiYgYSArIGIgPj0gYik7DQoJfQ0KDQoJZnVuY3Rpb24gdHJhbnNmZXIoIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spIHsNCgkJaWYoc3RvcF9vcGVyYXRpb24pIHRocm93Ow0KDQoJCWlmKCBfYmFsYW5jZXNbbXNnLnNlbmRlcl0udG9rZW5zX2NvdW50IDwgdmFsdWUgKSB7DQoJCSAgICB0aHJvdzsNCgkJfQ0KCQlpZiggIXNhZmVUb0FkZChfYmFsYW5jZXNbdG9dLnRva2Vuc19jb3VudCwgdmFsdWUpICkgew0KCQkgICAgdGhyb3c7DQoJCX0NCg0KCQlfYmFsYW5jZXNbbXNnLnNlbmRlcl0udG9rZW5zX2NvdW50IC09IHZhbHVlOw0KCQlpZihfYmFsYW5jZXNbdG9dLmluaXQpew0KCQkJX2JhbGFuY2VzW3RvXS50b2tlbnNfY291bnQgKz0gdmFsdWU7DQoJCX0NCgkJZWxzZXsNCgkJCWFkZFVzZXJUb0xpc3QodG8pOw0KCQkJX2JhbGFuY2VzW3RvXSA9IGhvbGRlckRhdGEodmFsdWUsIHRydWUpOw0KCQl9DQoNCgkJVHJhbnNmZXIoIG1zZy5zZW5kZXIsIHRvLCB2YWx1ZSApOw0KCQlyZXR1cm4gdHJ1ZTsNCgl9DQoNCglmdW5jdGlvbiB0cmFuc2ZlckZyb20oIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvaykgew0KCQlpZihzdG9wX29wZXJhdGlvbikgdGhyb3c7DQoNCgkJaWYoIF9iYWxhbmNlc1tmcm9tXS50b2tlbnNfY291bnQgPCB2YWx1ZSApIHsNCgkJICAgIHRocm93Ow0KCQl9DQoJCQ0KCQlpZiggX2FwcHJvdmFsc1tmcm9tXVttc2cuc2VuZGVyXSA8IHZhbHVlICkgew0KCQkgICAgdGhyb3c7DQoJCX0NCgkJaWYoICFzYWZlVG9BZGQoX2JhbGFuY2VzW3RvXS50b2tlbnNfY291bnQsIHZhbHVlKSApIHsNCgkJICAgIHRocm93Ow0KCQl9DQoJCS8vIHRyYW5zZmVyIGFuZCByZXR1cm4gdHJ1ZQ0KCQlfYXBwcm92YWxzW2Zyb21dW21zZy5zZW5kZXJdIC09IHZhbHVlOw0KCQlfYmFsYW5jZXNbZnJvbV0udG9rZW5zX2NvdW50IC09IHZhbHVlOw0KCQlpZihfYmFsYW5jZXNbdG9dLmluaXQpew0KCQkJX2JhbGFuY2VzW3RvXS50b2tlbnNfY291bnQgKz0gdmFsdWU7DQoJCX0NCgkJZWxzZXsNCgkJCWFkZFVzZXJUb0xpc3QodG8pOw0KCQkJX2JhbGFuY2VzW3RvXSA9IGhvbGRlckRhdGEodmFsdWUsIHRydWUpOw0KCQl9CQkNCgkJDQoJCVRyYW5zZmVyKCBmcm9tLCB0bywgdmFsdWUgKTsNCgkJcmV0dXJuIHRydWU7DQoJfQ0KDQoJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spIHsNCgkJaWYoc3RvcF9vcGVyYXRpb24pIHRocm93Ow0KDQoJCV9hcHByb3ZhbHNbbXNnLnNlbmRlcl1bc3BlbmRlcl0gPSB2YWx1ZTsNCgkJQXBwcm92YWwoIG1zZy5zZW5kZXIsIHNwZW5kZXIsIHZhbHVlICk7DQoJCXJldHVybiB0cnVlOw0KCX0NCg0KCWV2ZW50IEVtaXNzaW9uKGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgdWludDI1NiBiZXQsIHVpbnQyNTYgY29lZiwgdWludDI1NiBkZWNpbWFscywgdWludDI1NiBjb3N0X3Rva2VuKTsNCg0KCWZ1bmN0aW9uIGVtaXNzaW9uKGFkZHJlc3MgcGxheWVyLCBhZGRyZXNzIHBhcnRuZXIsIHVpbnQyNTYgdmFsdWVfYmV0LCB1aW50MTYgY29lZl9wbGF5ZXIsIHVpbnQxNiBjb2VmX3BhcnRuZXIpIGV4dGVybmFsIHJldHVybnModWludDI1Nikgew0KCQlpZihzdG9wX29wZXJhdGlvbikgdGhyb3c7DQoNCgkJaWYobGlzdEdhbWVzW21zZy5zZW5kZXJdLmluaXQgPT0gZmFsc2UpIHRocm93Ow0KCQlpZihwbGF5ZXIgPT0gYWRkcmVzcygweDApKSB0aHJvdzsNCgkJaWYodmFsdWVfYmV0ID09IDApIHRocm93Ow0KDQoJCXVpbnQyNTYgZGVjaW1hbHNfdG9rZW4gPSAxMCoqdWludDI1NihkZWNpbWFscyk7DQoNCgkJdWludDI1NiBwbGF5ZXJfdG9rZW4gPSAoKHZhbHVlX2JldCpjb2VmX3BsYXllcipkZWNpbWFsc190b2tlbikvMTAwMDApL2Nvc3RPZk9uZVRva2VuOw0KCQlpZihfYmFsYW5jZXNbcGxheWVyXS5pbml0KXsNCgkJCV9iYWxhbmNlc1twbGF5ZXJdLnRva2Vuc19jb3VudCArPSBwbGF5ZXJfdG9rZW47DQoJCX0NCgkJZWxzZXsNCgkJCWFkZFVzZXJUb0xpc3QocGxheWVyKTsNCgkJCV9iYWxhbmNlc1twbGF5ZXJdID0gaG9sZGVyRGF0YShwbGF5ZXJfdG9rZW4sIHRydWUpOw0KCQl9DQoJCUVtaXNzaW9uKHBsYXllciwgcGxheWVyX3Rva2VuLCB2YWx1ZV9iZXQsIGNvZWZfcGxheWVyLCBkZWNpbWFsc190b2tlbiwgY29zdE9mT25lVG9rZW4pOw0KDQoJCXVpbnQyNTYgcGFydG5lcl90b2tlbiA9IDA7DQoJCWlmKHBhcnRuZXIgIT0gYWRkcmVzcygweDApKXsNCgkJCXBhcnRuZXJfdG9rZW4gPSAoKHZhbHVlX2JldCpjb2VmX3BhcnRuZXIqZGVjaW1hbHNfdG9rZW4pLzEwMDAwKS9jb3N0T2ZPbmVUb2tlbjsNCgkJCWlmKF9iYWxhbmNlc1twYXJ0bmVyXS5pbml0KXsNCgkJCQlfYmFsYW5jZXNbcGFydG5lcl0udG9rZW5zX2NvdW50ICs9IHBhcnRuZXJfdG9rZW47DQoJCQl9DQoJCQllbHNlew0KCQkJCWFkZFVzZXJUb0xpc3QocGFydG5lcik7DQoJCQkJX2JhbGFuY2VzW3BhcnRuZXJdID0gaG9sZGVyRGF0YShwYXJ0bmVyX3Rva2VuLCB0cnVlKTsNCgkJCX0NCgkJCUVtaXNzaW9uKHBhcnRuZXIsIHBhcnRuZXJfdG9rZW4sIHZhbHVlX2JldCwgY29lZl9wYXJ0bmVyLCBkZWNpbWFsc190b2tlbiwgY29zdE9mT25lVG9rZW4pOw0KCQl9DQoNCgkJX3N1cHBseSArPSAocGxheWVyX3Rva2VuK3BhcnRuZXJfdG9rZW4pOw0KDQoJCXJldHVybiBwbGF5ZXJfdG9rZW47DQoJfQ0KDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkvLyBUZW1wb3JhcnkgVG9rZW5zDQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCglhZGRyZXNzW10gbGlzdEFkZHJUZW1wSG9sZGVyczsNCglldmVudCBUZW1wVG9rZW5zU2VuZChhZGRyZXNzIGluZGV4ZWQgcmVjaXBpZW50LCB1aW50MjU2IGNvdW50LCB1aW50MjU2IHN0YXJ0LCB1aW50MjU2IGVuZCk7DQoNCglmdW5jdGlvbiBzZW5kVGVtcFRva2VucyhhZGRyZXNzIHJlY2lwaWVudCwgdWludDI1NiBjb3VudCwgdWludDI1NiBwZXJpb2QpIGlzTWFuYWdlciB7DQoJCWlmKCFzdG9wX29wZXJhdGlvbikgdGhyb3c7DQoNCgkJaWYoY291bnQ9PTAgfHwgcGVyaW9kPT0wKSB0aHJvdzsNCgkJDQoJCXVpbnQyNTYgZGVjaW1hbHNfdG9rZW4gPSAxMCoqdWludDI1NihkZWNpbWFscyk7DQoJCWNvdW50ID0gY291bnQqZGVjaW1hbHNfdG9rZW47DQoNCgkJaWYoX2JhbGFuY2VzW2ZvbmRfd2FsbGV0XS50b2tlbnNfY291bnQgPCBjb3VudCkgdGhyb3c7DQoJCWlmKF90ZW1wX2JhbGFuY2VbcmVjaXBpZW50XS50b2tlbnNfY291bnQgPiAwKSB0aHJvdzsNCg0KCQlfdGVtcF9iYWxhbmNlW3JlY2lwaWVudF0gPSB0ZW1wSG9sZGVyRGF0YShjb3VudCwgbm93LCBub3cgKyBwZXJpb2QpOw0KCQlsaXN0QWRkclRlbXBIb2xkZXJzLnB1c2gocmVjaXBpZW50KTsNCgkJX2JhbGFuY2VzW2ZvbmRfd2FsbGV0XS50b2tlbnNfY291bnQgLT0gY291bnQ7DQoJCVRlbXBUb2tlbnNTZW5kKHJlY2lwaWVudCwgY291bnQsIF90ZW1wX2JhbGFuY2VbcmVjaXBpZW50XS5zdGFydF9kYXRlLCBfdGVtcF9iYWxhbmNlW3JlY2lwaWVudF0uZW5kX2RhdGUpOw0KCX0NCg0KCWZ1bmN0aW9uIHRlbXBUb2tlbnNCYWxhbmNlT2YoIGFkZHJlc3Mgd2hvICkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KCQkvL3RlbXBIb2xkZXJEYXRhIGRhdGFfaG9sZGVyID0gX190ZW1wX2JhbGFuY2Vbd2hvXTsNCgkJaWYoX3RlbXBfYmFsYW5jZVt3aG9dLmVuZF9kYXRlIDwgbm93KSByZXR1cm4gMDsNCgkJZWxzZSByZXR1cm4gX3RlbXBfYmFsYW5jZVt3aG9dLnRva2Vuc19jb3VudDsNCgl9DQoNCglmdW5jdGlvbiB0ZW1wVG9rZW5zUGVyaW9kT2YoIGFkZHJlc3Mgd2hvICkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KCQlpZihfdGVtcF9iYWxhbmNlW3dob10uZW5kX2RhdGUgPCBub3cpIHJldHVybiAwOw0KCQllbHNlIHJldHVybiBfdGVtcF9iYWxhbmNlW3dob10uZW5kX2RhdGU7DQoJfQ0KDQoJZnVuY3Rpb24gcmV0dXJuVGVtcFRva2VucyhhZGRyZXNzIHJlY2lwaWVudCkgaXNNYW5hZ2VyIHsNCgkJaWYoIXN0b3Bfb3BlcmF0aW9uKSB0aHJvdzsNCgkJDQoJCWlmKF90ZW1wX2JhbGFuY2VbcmVjaXBpZW50XS50b2tlbnNfY291bnQgPT0gMCkgdGhyb3c7DQoNCgkJX2JhbGFuY2VzW2ZvbmRfd2FsbGV0XS50b2tlbnNfY291bnQgKz0gX3RlbXBfYmFsYW5jZVtyZWNpcGllbnRdLnRva2Vuc19jb3VudDsNCgkJX3RlbXBfYmFsYW5jZVtyZWNpcGllbnRdID0gdGVtcEhvbGRlckRhdGEoMCwgMCwgMCk7CQkNCgl9DQoNCglmdW5jdGlvbiBnZXRMaXN0VGVtcEhvbGRlcnMoKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3NbXSl7DQoJCXJldHVybiBsaXN0QWRkclRlbXBIb2xkZXJzOw0KCX0NCg0KCWZ1bmN0aW9uIGdldENvdW50VGVtcEhvbGRlcnMoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpew0KCQlyZXR1cm4gbGlzdEFkZHJUZW1wSG9sZGVycy5sZW5ndGg7DQoJfQ0KDQoJZnVuY3Rpb24gZ2V0SXRlbVRlbXBIb2xkZXJzKHVpbnQyNTYgaW5kZXgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyl7DQoJCWlmKGluZGV4ID49IGxpc3RBZGRyVGVtcEhvbGRlcnMubGVuZ3RoKSByZXR1cm4gYWRkcmVzcygweDApOw0KCQllbHNlIHJldHVybiBsaXN0QWRkclRlbXBIb2xkZXJzW2luZGV4XTsNCgl9DQoNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8vIEludmVzdCBGdW5jdGlvbnMNCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCS8qZXZlbnQgU3VjY2Vzc1Byb2ZpdFNlbmQoYWRkcmVzcyBpbmRleGVkIGhvbGRlciwgdWludCB2YWx1ZSk7DQoJZXZlbnQgRmFpbFByb2ZpdFNlbmQoYWRkcmVzcyBpbmRleGVkIGhvbGRlciwgdWludCB2YWx1ZSk7Ki8NCg0KCWZ1bmN0aW9uKCkgcGF5YWJsZQ0KCXsJDQoJCWlmKCFzdG9wX29wZXJhdGlvbikgdGhyb3c7DQoJCWlmKG1zZy5zZW5kZXIgPT0gZGV2ZWxvcGVyKSB0aHJvdzsNCgkJaWYobXNnLnNlbmRlciA9PSBtYW5hZ2VyKSB0aHJvdzsNCgkJaWYobXNnLnNlbmRlciA9PSBkZXZlbG9wZXJfd2FsbGV0KSB0aHJvdzsNCgkJaWYobXNnLnNlbmRlciA9PSB3YWxsZXRfSUNPKSB0aHJvdzsNCgkJaWYobXNnLnNlbmRlciA9PSBmb25kX3dhbGxldCkgdGhyb3c7DQoNCgkJLyppZihsaXN0R2FtZXNbbXNnLnNlbmRlcl0uaW5pdCl7DQoJCQl1aW50MjU2IHByb2ZpdF9vbmVfdG9rZW4gPSAobXNnLnZhbHVlK3RoaXMuYmFsYW5jZSkvX3N1cHBseTsNCgkJCWZvcih1aW50MjU2IGkgPSAwOyBpIDwgbGlzdEFkZHJIb2xkZXJzLmxlbmd0aDsgaSsrKXsNCgkJCQlpZihfYmFsYW5jZXNbbGlzdEFkZHJIb2xkZXJzW2ldXS50b2tlbnNfY291bnQ+MCl7DQoJCQkJCWlmKGxpc3RBZGRySG9sZGVyc1tpXS5zZW5kKHByb2ZpdF9vbmVfdG9rZW4qX2JhbGFuY2VzW2xpc3RBZGRySG9sZGVyc1tpXV0udG9rZW5zX2NvdW50KSl7DQoJCQkJCQlTdWNjZXNzUHJvZml0U2VuZChsaXN0QWRkckhvbGRlcnNbaV0sIHByb2ZpdF9vbmVfdG9rZW4qX2JhbGFuY2VzW2xpc3RBZGRySG9sZGVyc1tpXV0udG9rZW5zX2NvdW50KTsNCgkJCQkJfQ0KCQkJCQllbHNlew0KCQkJCQkJRmFpbFByb2ZpdFNlbmQobGlzdEFkZHJIb2xkZXJzW2ldLCBwcm9maXRfb25lX3Rva2VuKl9iYWxhbmNlc1tsaXN0QWRkckhvbGRlcnNbaV1dLnRva2Vuc19jb3VudCk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0qLw0KCQlpZihsaXN0R2FtZXNbbXNnLnNlbmRlcl0uaW5pdCkgdGhyb3c7DQoNCgkJaWYoZW5hYmxlSUNPID09IGZhbHNlKSB0aHJvdzsNCgkJCQ0KCQlpZihtc2cudmFsdWUgPCBtaW5fdmFsdWVfYnV5VG9rZW4pIHRocm93Ow0KCQkNCgkJdWludDI1NiB2YWx1ZV9zZW5kID0gbXNnLnZhbHVlOw0KCQlpZih2YWx1ZV9zZW5kID4gbWF4X3ZhbHVlX2J1eVRva2VuKXsNCgkJCXZhbHVlX3NlbmQgPSBtYXhfdmFsdWVfYnV5VG9rZW47DQoJCQlpZihtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlLW1heF92YWx1ZV9idXlUb2tlbik9PWZhbHNlKSB0aHJvdzsNCgkJfQ0KDQoJCXVpbnQyNTYgZGVjaW1hbHNfdG9rZW4gPSAxMCoqdWludDI1NihkZWNpbWFscyk7DQoJCQ0KCQl1aW50MjU2IGNvdW50X3Rva2VucyA9ICh2YWx1ZV9zZW5kKmRlY2ltYWxzX3Rva2VuKS9jb3N0T2ZPbmVUb2tlbjsNCgkJDQoJCWlmKGNvdW50X3Rva2VucyA+X2JhbGFuY2VzW3dhbGxldF9JQ09dLnRva2Vuc19jb3VudCApew0KCQkJY291bnRfdG9rZW5zID0gX2JhbGFuY2VzW3dhbGxldF9JQ09dLnRva2Vuc19jb3VudDsNCgkJfQ0KCQlpZih2YWx1ZV9zZW5kID4gKGNvdW50X3Rva2Vucypjb3N0T2ZPbmVUb2tlbikvZGVjaW1hbHNfdG9rZW4pewkJCQkNCgkJCWlmKG1zZy5zZW5kZXIuc2VuZCh2YWx1ZV9zZW5kLSgoY291bnRfdG9rZW5zKmNvc3RPZk9uZVRva2VuKS9kZWNpbWFsc190b2tlbikpPT1mYWxzZSkgdGhyb3c7DQoJCQl2YWx1ZV9zZW5kID0gdmFsdWVfc2VuZCAtICgoY291bnRfdG9rZW5zKmNvc3RPZk9uZVRva2VuKS9kZWNpbWFsc190b2tlbik7DQoJCX0NCg0KCQlpZighX2JhbGFuY2VzW21zZy5zZW5kZXJdLmluaXQpew0KCQkJYWRkVXNlclRvTGlzdChtc2cuc2VuZGVyKTsNCgkJCV9iYWxhbmNlc1t3YWxsZXRfSUNPXS50b2tlbnNfY291bnQgLT0gY291bnRfdG9rZW5zOwkJCQ0KCQkJX2JhbGFuY2VzW21zZy5zZW5kZXJdID0gaG9sZGVyRGF0YShjb3VudF90b2tlbnMsIHRydWUpOw0KCQl9DQoJCWVsc2V7DQoJCQlpZigoKF9iYWxhbmNlc1ttc2cuc2VuZGVyXS50b2tlbnNfY291bnQqY29zdE9mT25lVG9rZW4pL2RlY2ltYWxzX3Rva2VuKSsoKGNvdW50X3Rva2Vucypjb3N0T2ZPbmVUb2tlbikvZGVjaW1hbHNfdG9rZW4pPm1heF92YWx1ZV9idXlUb2tlbikgew0KCQkJCWNvdW50X3Rva2VucyA9ICgobWF4X3ZhbHVlX2J1eVRva2VuKmRlY2ltYWxzX3Rva2VuKS9jb3N0T2ZPbmVUb2tlbiktX2JhbGFuY2VzW21zZy5zZW5kZXJdLnRva2Vuc19jb3VudDsJCQkJCQ0KCQkJCWlmKG1zZy5zZW5kZXIuc2VuZCh2YWx1ZV9zZW5kLSgoY291bnRfdG9rZW5zKmNvc3RPZk9uZVRva2VuKS9kZWNpbWFsc190b2tlbikpPT1mYWxzZSkgdGhyb3c7DQoJCQkJdmFsdWVfc2VuZCA9ICgoY291bnRfdG9rZW5zKmNvc3RPZk9uZVRva2VuKS9kZWNpbWFsc190b2tlbik7DQoJCQl9DQoNCgkJCV9iYWxhbmNlc1t3YWxsZXRfSUNPXS50b2tlbnNfY291bnQgLT0gY291bnRfdG9rZW5zOw0KCQkJX2JhbGFuY2VzW21zZy5zZW5kZXJdLnRva2Vuc19jb3VudCArPSBjb3VudF90b2tlbnM7DQoJCX0NCg0KCQlpZih2YWx1ZV9zZW5kPjApew0KCQkJaWYod2FsbGV0X0lDTy5zZW5kKHZhbHVlX3NlbmQpPT1mYWxzZSkgdGhyb3c7DQoJCX0NCg0KCQlpZihjb3VudF90b2tlbnM+MCl7DQoJCQlUb2tlbkJ1eShtc2cuc2VuZGVyLCBjb3VudF90b2tlbnMpOw0KCQl9DQoNCgkJaWYoX2JhbGFuY2VzW3dhbGxldF9JQ09dLnRva2Vuc19jb3VudCA9PSAwKXsNCgkJCWVuYWJsZUlDTyA9IGZhbHNlOw0KCQl9DQoJfQ0KDQoJZnVuY3Rpb24gZ2V0TGlzdEFkZHJlc3NIb2xkZXJzKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzW10pew0KCQlyZXR1cm4gbGlzdEFkZHJIb2xkZXJzOw0KCX0NCg0KCWZ1bmN0aW9uIGdldENvdW50SG9sZGVycygpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1Nil7DQoJCXJldHVybiBsaXN0QWRkckhvbGRlcnMubGVuZ3RoOw0KCX0NCg0KCWZ1bmN0aW9uIGdldEl0ZW1Ib2xkZXJzKHVpbnQyNTYgaW5kZXgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyl7DQoJCWlmKGluZGV4ID49IGxpc3RBZGRySG9sZGVycy5sZW5ndGgpIHJldHVybiBhZGRyZXNzKDB4MCk7DQoJCWVsc2UgcmV0dXJuIGxpc3RBZGRySG9sZGVyc1tpbmRleF07DQoJfQ0KfQ=='