base 64 content
base64smartToken
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMzsNCg0KLyoNCiAgICBPdmVyZmxvdyBwcm90ZWN0ZWQgbWF0aCBmdW5jdGlvbnMNCiovDQpjb250cmFjdCBTYWZlTWF0aCB7DQogICAgLyoqDQogICAgICAgIGNvbnN0cnVjdG9yDQogICAgKi8NCiAgICBmdW5jdGlvbiBTYWZlTWF0aCgpIHsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgICAgQGRldiByZXR1cm5zIHRoZSBzdW0gb2YgX3ggYW5kIF95LCBhc3NlcnRzIGlmIHRoZSBjYWxjdWxhdGlvbiBvdmVyZmxvd3MNCg0KICAgICAgICBAcGFyYW0gX3ggICB2YWx1ZSAxDQogICAgICAgIEBwYXJhbSBfeSAgIHZhbHVlIDINCg0KICAgICAgICBAcmV0dXJuIHN1bQ0KICAgICovDQogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IF94LCB1aW50MjU2IF95KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICAgIHVpbnQyNTYgeiA9IF94ICsgX3k7DQogICAgICAgIGFzc2VydCh6ID49IF94KTsNCiAgICAgICAgcmV0dXJuIHo7DQogICAgfQ0KDQogICAgLyoqDQogICAgICAgIEBkZXYgcmV0dXJucyB0aGUgZGlmZmVyZW5jZSBvZiBfeCBtaW51cyBfeSwgYXNzZXJ0cyBpZiB0aGUgc3VidHJhY3Rpb24gcmVzdWx0cyBpbiBhIG5lZ2F0aXZlIG51bWJlcg0KDQogICAgICAgIEBwYXJhbSBfeCAgIG1pbnVlbmQNCiAgICAgICAgQHBhcmFtIF95ICAgc3VidHJhaGVuZA0KDQogICAgICAgIEByZXR1cm4gZGlmZmVyZW5jZQ0KICAgICovDQogICAgZnVuY3Rpb24gc2FmZVN1Yih1aW50MjU2IF94LCB1aW50MjU2IF95KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICAgIGFzc2VydChfeCA+PSBfeSk7DQogICAgICAgIHJldHVybiBfeCAtIF95Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAgICBAZGV2IHJldHVybnMgdGhlIHByb2R1Y3Qgb2YgbXVsdGlwbHlpbmcgX3ggYnkgX3ksIGFzc2VydHMgaWYgdGhlIGNhbGN1bGF0aW9uIG92ZXJmbG93cw0KDQogICAgICAgIEBwYXJhbSBfeCAgIGZhY3RvciAxDQogICAgICAgIEBwYXJhbSBfeSAgIGZhY3RvciAyDQoNCiAgICAgICAgQHJldHVybiBwcm9kdWN0DQogICAgKi8NCiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQyNTYgX3gsIHVpbnQyNTYgX3kpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICAgICAgdWludDI1NiB6ID0gX3ggKiBfeTsNCiAgICAgICAgYXNzZXJ0KF94ID09IDAgfHwgeiAvIF94ID09IF95KTsNCiAgICAgICAgcmV0dXJuIHo7DQogICAgfQ0KfSANCg0KLyoNCiAgICBPd25lZCBjb250cmFjdCBpbnRlcmZhY2UNCiovDQpjb250cmFjdCBJT3duZWQgew0KICAgIC8vIHRoaXMgZnVuY3Rpb24gaXNuJ3QgYWJzdHJhY3Qgc2luY2UgdGhlIGNvbXBpbGVyIGVtaXRzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGdldHRlciBmdW5jdGlvbnMgYXMgZXh0ZXJuYWwNCiAgICBmdW5jdGlvbiBvd25lcigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzIG93bmVyKSB7IG93bmVyOyB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljOw0KICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHB1YmxpYzsNCn0NCg0KLyoNCiAgICBQcm92aWRlcyBzdXBwb3J0IGFuZCB1dGlsaXRpZXMgZm9yIGNvbnRyYWN0IG93bmVyc2hpcA0KKi8NCmNvbnRyYWN0IE93bmVkIGlzIElPd25lZCB7DQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7DQoNCiAgICBldmVudCBPd25lclVwZGF0ZShhZGRyZXNzIF9wcmV2T3duZXIsIGFkZHJlc3MgX25ld093bmVyKTsNCg0KICAgIC8qKg0KICAgICAgICBAZGV2IGNvbnN0cnVjdG9yDQogICAgKi8NCiAgICBmdW5jdGlvbiBPd25lZCgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KICAgIC8vIGFsbG93cyBleGVjdXRpb24gYnkgdGhlIG93bmVyIG9ubHkNCiAgICBtb2RpZmllciBvd25lck9ubHkgew0KICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBvd25lcik7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLyoqDQogICAgICAgIEBkZXYgYWxsb3dzIHRyYW5zZmVycmluZyB0aGUgY29udHJhY3Qgb3duZXJzaGlwDQogICAgICAgIHRoZSBuZXcgb3duZXIgc3RpbGwgbmVlZCB0byBhY2NlcHQgdGhlIHRyYW5zZmVyDQogICAgICAgIGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgY29udHJhY3Qgb3duZXINCg0KICAgICAgICBAcGFyYW0gX25ld093bmVyICAgIG5ldyBjb250cmFjdCBvd25lcg0KICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvd25lck9ubHkgew0KICAgICAgICByZXF1aXJlKF9uZXdPd25lciAhPSBvd25lcik7DQogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAgICBAZGV2IHVzZWQgYnkgYSBuZXcgb3duZXIgdG8gYWNjZXB0IGFuIG93bmVyc2hpcCB0cmFuc2Zlcg0KICAgICovDQogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgcHVibGljIHsNCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG5ld093bmVyKTsNCiAgICAgICAgT3duZXJVcGRhdGUob3duZXIsIG5ld093bmVyKTsNCiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICAgICAgbmV3T3duZXIgPSAweDA7DQogICAgfQ0KfQ0KDQovKg0KICAgIFRva2VuIEhvbGRlciBpbnRlcmZhY2UNCiovDQpjb250cmFjdCBJVG9rZW5Ib2xkZXIgaXMgSU93bmVkIHsNCiAgICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VucyhJRVJDMjBUb2tlbiBfdG9rZW4sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYzsNCn0NCg0KLyoNCiAgICBXZSBjb25zaWRlciBldmVyeSBjb250cmFjdCB0byBiZSBhICd0b2tlbiBob2xkZXInIHNpbmNlIGl0J3MgY3VycmVudGx5IG5vdCBwb3NzaWJsZQ0KICAgIGZvciBhIGNvbnRyYWN0IHRvIGRlbnkgcmVjZWl2aW5nIHRva2Vucy4NCg0KICAgIFRoZSBUb2tlbkhvbGRlcidzIGNvbnRyYWN0IHNvbGUgcHVycG9zZSBpcyB0byBwcm92aWRlIGEgc2FmZXR5IG1lY2hhbmlzbSB0aGF0IGFsbG93cw0KICAgIHRoZSBvd25lciB0byBzZW5kIHRva2VucyB0aGF0IHdlcmUgc2VudCB0byB0aGUgY29udHJhY3QgYnkgbWlzdGFrZSBiYWNrIHRvIHRoZWlyIHNlbmRlci4NCiovDQpjb250cmFjdCBUb2tlbkhvbGRlciBpcyBJVG9rZW5Ib2xkZXIsIE93bmVkIHsNCiAgICAvKioNCiAgICAgICAgQGRldiBjb25zdHJ1Y3Rvcg0KICAgICovDQogICAgZnVuY3Rpb24gVG9rZW5Ib2xkZXIoKSB7DQogICAgfQ0KDQogICAgLy8gdmFsaWRhdGVzIGFuIGFkZHJlc3MgLSBjdXJyZW50bHkgb25seSBjaGVja3MgdGhhdCBpdCBpc24ndCBudWxsDQogICAgbW9kaWZpZXIgdmFsaWRBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MpIHsNCiAgICAgICAgcmVxdWlyZShfYWRkcmVzcyAhPSAweDApOw0KICAgICAgICBfOw0KICAgIH0NCiAgICBtb2RpZmllciB2YWxpZEFkZHJlc3NBZGRpdGlvbmFsKGFkZHJlc3MgX2FkZHJlc3MpIHsNCiAgICAgICAgcmVxdWlyZShfYWRkcmVzcyAhPSAweDApOw0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vIHZlcmlmaWVzIHRoYXQgdGhlIGFkZHJlc3MgaXMgZGlmZmVyZW50IHRoYW4gdGhpcyBjb250cmFjdCBhZGRyZXNzDQogICAgbW9kaWZpZXIgbm90VGhpcyhhZGRyZXNzIF9hZGRyZXNzKSB7DQogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gYWRkcmVzcyh0aGlzKSk7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLyoqDQogICAgICAgIEBkZXYgd2l0aGRyYXdzIHRva2VucyBoZWxkIGJ5IHRoZSBjb250cmFjdCBhbmQgc2VuZHMgdGhlbSB0byBhbiBhY2NvdW50DQogICAgICAgIGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXINCg0KICAgICAgICBAcGFyYW0gX3Rva2VuICAgRVJDMjAgdG9rZW4gY29udHJhY3QgYWRkcmVzcw0KICAgICAgICBAcGFyYW0gX3RvICAgICAgYWNjb3VudCB0byByZWNlaXZlIHRoZSBuZXcgYW1vdW50DQogICAgICAgIEBwYXJhbSBfYW1vdW50ICBhbW91bnQgdG8gd2l0aGRyYXcNCiAgICAqLw0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW5zKElFUkMyMFRva2VuIF90b2tlbiwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkNCiAgICAgICAgcHVibGljDQogICAgICAgIG93bmVyT25seQ0KICAgICAgICB2YWxpZEFkZHJlc3MoX3Rva2VuKQ0KICAgICAgICB2YWxpZEFkZHJlc3NBZGRpdGlvbmFsKF90bykNCiAgICAgICAgbm90VGhpcyhfdG8pDQogICAgew0KICAgICAgICBhc3NlcnQoX3Rva2VuLnRyYW5zZmVyKF90bywgX2Ftb3VudCkpOw0KICAgIH0NCn0NCg0KLyoNCiAgICBFUkMyMCBTdGFuZGFyZCBUb2tlbiBpbnRlcmZhY2UNCiovDQpjb250cmFjdCBJRVJDMjBUb2tlbiB7DQogICAgLy8gdGhlc2UgZnVuY3Rpb25zIGFyZW4ndCBhYnN0cmFjdCBzaW5jZSB0aGUgY29tcGlsZXIgZW1pdHMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgZ2V0dGVyIGZ1bmN0aW9ucyBhcyBleHRlcm5hbA0KICAgIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIG5hbWUpIHsgbmFtZTsgfQ0KICAgIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgc3ltYm9sKSB7IHN5bWJvbDsgfQ0KICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IGRlY2ltYWxzKSB7IGRlY2ltYWxzOyB9DQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSkgeyB0b3RhbFN1cHBseTsgfQ0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgeyBfb3duZXI7IGJhbGFuY2U7IH0NCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgeyBfb3duZXI7IF9zcGVuZGVyOyByZW1haW5pbmc7IH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQp9DQoNCi8qKg0KICAgIEVSQzIwIFN0YW5kYXJkIFRva2VuIGltcGxlbWVudGF0aW9uDQoqLw0KY29udHJhY3QgRVJDMjBUb2tlbiBpcyBJRVJDMjBUb2tlbiwgU2FmZU1hdGggew0KICAgIHN0cmluZyBwdWJsaWMgc3RhbmRhcmQgPSAnVG9rZW4gMC4xJzsNCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAnJzsNCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICcnOw0KICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDA7DQogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAwOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2FuY2U7DQoNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsNCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsNCg0KICAgIC8qKg0KICAgICAgICBAZGV2IGNvbnN0cnVjdG9yDQoNCiAgICAgICAgQHBhcmFtIF9uYW1lICAgICAgICB0b2tlbiBuYW1lDQogICAgICAgIEBwYXJhbSBfc3ltYm9sICAgICAgdG9rZW4gc3ltYm9sDQogICAgICAgIEBwYXJhbSBfZGVjaW1hbHMgICAgZGVjaW1hbCBwb2ludHMsIGZvciBkaXNwbGF5IHB1cnBvc2VzDQogICAgKi8NCiAgICBmdW5jdGlvbiBFUkMyMFRva2VuKHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wsIHVpbnQ4IF9kZWNpbWFscykgew0KICAgICAgICByZXF1aXJlKGJ5dGVzKF9uYW1lKS5sZW5ndGggPiAwICYmIGJ5dGVzKF9zeW1ib2wpLmxlbmd0aCA+IDApOyAvLyB2YWxpZGF0ZSBpbnB1dA0KDQogICAgICAgIG5hbWUgPSBfbmFtZTsNCiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsNCiAgICAgICAgZGVjaW1hbHMgPSBfZGVjaW1hbHM7DQogICAgfQ0KDQogICAgLy8gdmFsaWRhdGVzIGFuIGFkZHJlc3MgLSBjdXJyZW50bHkgb25seSBjaGVja3MgdGhhdCBpdCBpc24ndCBudWxsDQogICAgbW9kaWZpZXIgdmFsaWRBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MpIHsNCiAgICAgICAgcmVxdWlyZShfYWRkcmVzcyAhPSAweDApOw0KICAgICAgICBfOw0KICAgIH0NCiAgICBtb2RpZmllciB2YWxpZEFkZHJlc3NBZGRpdGlvbmFsKGFkZHJlc3MgX2FkZHJlc3MpIHsNCiAgICAgICAgcmVxdWlyZShfYWRkcmVzcyAhPSAweDApOw0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAgICBAZGV2IHNlbmQgY29pbnMNCiAgICAgICAgdGhyb3dzIG9uIGFueSBlcnJvciByYXRoZXIgdGhlbiByZXR1cm4gYSBmYWxzZSBmbGFnIHRvIG1pbmltaXplIHVzZXIgZXJyb3JzDQoNCiAgICAgICAgQHBhcmFtIF90byAgICAgIHRhcmdldCBhZGRyZXNzDQogICAgICAgIEBwYXJhbSBfdmFsdWUgICB0cmFuc2ZlciBhbW91bnQNCg0KICAgICAgICBAcmV0dXJuIHRydWUgaWYgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBpZiBpdCB3YXNuJ3QNCiAgICAqLw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkNCiAgICAgICAgcHVibGljDQogICAgICAgIHZhbGlkQWRkcmVzcyhfdG8pDQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykNCiAgICB7DQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mW21zZy5zZW5kZXJdLCBfdmFsdWUpOw0KICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mW190b10sIF92YWx1ZSk7DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICAgIEBkZXYgYW4gYWNjb3VudC9jb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zDQogICAgICAgIHRocm93cyBvbiBhbnkgZXJyb3IgcmF0aGVyIHRoZW4gcmV0dXJuIGEgZmFsc2UgZmxhZyB0byBtaW5pbWl6ZSB1c2VyIGVycm9ycw0KDQogICAgICAgIEBwYXJhbSBfZnJvbSAgICBzb3VyY2UgYWRkcmVzcw0KICAgICAgICBAcGFyYW0gX3RvICAgICAgdGFyZ2V0IGFkZHJlc3MNCiAgICAgICAgQHBhcmFtIF92YWx1ZSAgIHRyYW5zZmVyIGFtb3VudA0KDQogICAgICAgIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwsIGZhbHNlIGlmIGl0IHdhc24ndA0KICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkNCiAgICAgICAgcHVibGljDQogICAgICAgIHZhbGlkQWRkcmVzcyhfZnJvbSkNCiAgICAgICAgdmFsaWRBZGRyZXNzQWRkaXRpb25hbChfdG8pDQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykNCiAgICB7DQogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7DQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VPZltfZnJvbV0sIF92YWx1ZSk7DQogICAgICAgIGJhbGFuY2VPZltfdG9dID0gc2FmZUFkZChiYWxhbmNlT2ZbX3RvXSwgX3ZhbHVlKTsNCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICAgIEBkZXYgYWxsb3cgYW5vdGhlciBhY2NvdW50L2NvbnRyYWN0IHRvIHNwZW5kIHNvbWUgdG9rZW5zIG9uIHlvdXIgYmVoYWxmDQogICAgICAgIHRocm93cyBvbiBhbnkgZXJyb3IgcmF0aGVyIHRoZW4gcmV0dXJuIGEgZmFsc2UgZmxhZyB0byBtaW5pbWl6ZSB1c2VyIGVycm9ycw0KDQogICAgICAgIGFsc28sIHRvIG1pbmltaXplIHRoZSByaXNrIG9mIHRoZSBhcHByb3ZlL3RyYW5zZmVyRnJvbSBhdHRhY2sgdmVjdG9yDQogICAgICAgIChzZWUgaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xWUxQdFF4WnUxVUF2TzljWjFPMlJQWEJiVDBtb29oNERZS2pBX2pwLVJMTS8pLCBhcHByb3ZlIGhhcyB0byBiZSBjYWxsZWQgdHdpY2UNCiAgICAgICAgaW4gMiBzZXBhcmF0ZSB0cmFuc2FjdGlvbnMgLSBvbmNlIHRvIGNoYW5nZSB0aGUgYWxsb3dhbmNlIHRvIDAgYW5kIHNlY29uZGx5IHRvIGNoYW5nZSBpdCB0byB0aGUgbmV3IGFsbG93YW5jZSB2YWx1ZQ0KDQogICAgICAgIEBwYXJhbSBfc3BlbmRlciBhcHByb3ZlZCBhZGRyZXNzDQogICAgICAgIEBwYXJhbSBfdmFsdWUgICBhbGxvd2FuY2UgYW1vdW50DQoNCiAgICAgICAgQHJldHVybiB0cnVlIGlmIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2UgaWYgaXQgd2Fzbid0DQogICAgKi8NCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKQ0KICAgICAgICBwdWJsaWMNCiAgICAgICAgdmFsaWRBZGRyZXNzKF9zcGVuZGVyKQ0KICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpDQogICAgew0KICAgICAgICAvLyBpZiB0aGUgYWxsb3dhbmNlIGlzbid0IDAsIGl0IGNhbiBvbmx5IGJlIHVwZGF0ZWQgdG8gMCB0byBwcmV2ZW50IGFuIGFsbG93YW5jZSBjaGFuZ2UgaW1tZWRpYXRlbHkgYWZ0ZXIgd2l0aGRyYXdhbA0KICAgICAgICByZXF1aXJlKF92YWx1ZSA9PSAwIHx8IGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCk7DQoNCiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCn0NCg0KLyoNCiAgICBTbWFydCBUb2tlbiBpbnRlcmZhY2UNCiovDQpjb250cmFjdCBJU21hcnRUb2tlbiBpcyBJVG9rZW5Ib2xkZXIsIElFUkMyMFRva2VuIHsNCiAgICBmdW5jdGlvbiBkaXNhYmxlVHJhbnNmZXJzKGJvb2wgX2Rpc2FibGUpIHB1YmxpYzsNCiAgICBmdW5jdGlvbiBpc3N1ZShhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWM7DQogICAgZnVuY3Rpb24gZGVzdHJveShhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYzsNCn0NCg0KLyoNCiAgICBTbWFydCBUb2tlbiB2MC4yDQoNCiAgICAnT3duZWQnIGlzIHNwZWNpZmllZCBoZXJlIGZvciByZWFkYWJpbGl0eSByZWFzb25zDQoqLw0KY29udHJhY3QgU21hcnRUb2tlbiBpcyBJU21hcnRUb2tlbiwgRVJDMjBUb2tlbiwgT3duZWQsIFRva2VuSG9sZGVyIHsNCiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAnMC4yJzsNCg0KICAgIGJvb2wgcHVibGljIHRyYW5zZmVyc0VuYWJsZWQgPSB0cnVlOyAgICAvLyB0cnVlIGlmIHRyYW5zZmVyL3RyYW5zZmVyRnJvbSBhcmUgZW5hYmxlZCwgZmFsc2UgaWYgbm90DQogICAgdWludCBwdWJsaWMgRGV2TWluaW5nUmV3YXJkUGVyRVRIQmxvY2sgPSA1MDA7ICAvLyBkZWZpbmUgYW1vdW50IG9mIHJlYXdhcmQgaW4gREVCSVQgQ29pbiwgZm9yIG1pbmVyIHRoYXQgZm91bmQgbGFzdCBibG9jayBpbiBFdGhlcmV1bSBCbG9ja0NoYWluDQogICAgdWludCBwdWJsaWMgbGFzdEJsb2NrUmV3YXJkZWQ7DQoNCiAgICAvLyB0cmlnZ2VyZWQgd2hlbiBhIHNtYXJ0IHRva2VuIGlzIGRlcGxveWVkIC0gdGhlIF90b2tlbiBhZGRyZXNzIGlzIGRlZmluZWQgZm9yIGZvcndhcmQgY29tcGF0aWJpbGl0eSwgaW4gY2FzZSB3ZSB3YW50IHRvIHRyaWdnZXIgdGhlIGV2ZW50IGZyb20gYSBmYWN0b3J5DQogICAgZXZlbnQgTmV3U21hcnRUb2tlbihhZGRyZXNzIF90b2tlbik7DQogICAgLy8gdHJpZ2dlcmVkIHdoZW4gdGhlIHRvdGFsIHN1cHBseSBpcyBpbmNyZWFzZWQNCiAgICBldmVudCBJc3N1YW5jZSh1aW50MjU2IF9hbW91bnQpOw0KICAgIC8vIHRyaWdnZXJlZCB3aGVuIHRoZSB0b3RhbCBzdXBwbHkgaXMgZGVjcmVhc2VkDQogICAgZXZlbnQgRGVzdHJ1Y3Rpb24odWludDI1NiBfYW1vdW50KTsNCiAgICAvLyB0cmlnZ2VyZWQgd2hlbiB0aGUgYW1vdW50IG9mIHJlYXdhcmQgZm9yIG1pbmluZyBhcmUgY2hhbmdlc2QNCiAgICBldmVudCBEZXZNaW5pbmdSZXdhcmRDaGFuZ2VzKHVpbnQyNTYgX2Ftb3VudCk7DQogICAgLy8gdHJpZ2dlcmVkIHdoZW4gbWluZXIgZ2V0IGEgcmV3YXJkDQogICAgZXZlbnQgRGV2TWluaW5nUmV3YXJkVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7DQoNCg0KICAgIC8qKg0KICAgICAgICBAZGV2IGNvbnN0cnVjdG9yDQoNCiAgICAgICAgQHBhcmFtIF9uYW1lICAgICAgIHRva2VuIG5hbWUNCiAgICAgICAgQHBhcmFtIF9zeW1ib2wgICAgIHRva2VuIHNob3J0IHN5bWJvbCwgMS02IGNoYXJhY3RlcnMNCiAgICAgICAgQHBhcmFtIF9kZWNpbWFscyAgIGZvciBkaXNwbGF5IHB1cnBvc2VzIG9ubHkNCiAgICAqLw0KICAgIGZ1bmN0aW9uIFNtYXJ0VG9rZW4oc3RyaW5nIF9uYW1lLCBzdHJpbmcgX3N5bWJvbCwgdWludDggX2RlY2ltYWxzKQ0KICAgICAgICBFUkMyMFRva2VuKF9uYW1lLCBfc3ltYm9sLCBfZGVjaW1hbHMpDQogICAgew0KICAgICAgICByZXF1aXJlKGJ5dGVzKF9zeW1ib2wpLmxlbmd0aCA8PSA2KTsgLy8gdmFsaWRhdGUgaW5wdXQNCiAgICAgICAgTmV3U21hcnRUb2tlbihhZGRyZXNzKHRoaXMpKTsNCiAgICB9DQoNCiAgICAvLyBhbGxvd3MgZXhlY3V0aW9uIG9ubHkgd2hlbiB0cmFuc2ZlcnMgYXJlbid0IGRpc2FibGVkDQogICAgbW9kaWZpZXIgdHJhbnNmZXJzQWxsb3dlZCB7DQogICAgICAgIGFzc2VydCh0cmFuc2ZlcnNFbmFibGVkKTsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgICAgQGRldiBkaXNhYmxlcy9lbmFibGVzIHRyYW5zZmVycw0KICAgICAgICBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIGNvbnRyYWN0IG93bmVyDQoNCiAgICAgICAgQHBhcmFtIF9kaXNhYmxlICAgIHRydWUgdG8gZGlzYWJsZSB0cmFuc2ZlcnMsIGZhbHNlIHRvIGVuYWJsZSB0aGVtDQogICAgKi8NCiAgICBmdW5jdGlvbiBkaXNhYmxlVHJhbnNmZXJzKGJvb2wgX2Rpc2FibGUpIHB1YmxpYyBvd25lck9ubHkgew0KICAgICAgICB0cmFuc2ZlcnNFbmFibGVkID0gIV9kaXNhYmxlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAgICBAZGV2IGluY3JlYXNlcyB0aGUgdG9rZW4gc3VwcGx5IGFuZCBzZW5kcyB0aGUgbmV3IHRva2VucyB0byBhbiBhY2NvdW50DQogICAgICAgIGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgY29udHJhY3Qgb3duZXINCg0KICAgICAgICBAcGFyYW0gX3RvICAgICAgICAgYWNjb3VudCB0byByZWNlaXZlIHRoZSBuZXcgYW1vdW50DQogICAgICAgIEBwYXJhbSBfYW1vdW50ICAgICBhbW91bnQgdG8gaW5jcmVhc2UgdGhlIHN1cHBseSBieQ0KICAgICovDQogICAgZnVuY3Rpb24gaXNzdWUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkNCiAgICAgICAgcHVibGljDQogICAgICAgIG93bmVyT25seQ0KICAgICAgICB2YWxpZEFkZHJlc3MoX3RvKQ0KICAgICAgICBub3RUaGlzKF90bykNCiAgICB7DQogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgX2Ftb3VudCk7DQogICAgICAgIGJhbGFuY2VPZltfdG9dID0gc2FmZUFkZChiYWxhbmNlT2ZbX3RvXSwgX2Ftb3VudCk7DQoNCiAgICAgICAgSXNzdWFuY2UoX2Ftb3VudCk7DQogICAgICAgIFRyYW5zZmVyKHRoaXMsIF90bywgX2Ftb3VudCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICAgIEBkZXYgcmVtb3ZlcyB0b2tlbnMgZnJvbSBhbiBhY2NvdW50IGFuZCBkZWNyZWFzZXMgdGhlIHRva2VuIHN1cHBseQ0KICAgICAgICBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIGNvbnRyYWN0IG93bmVyDQoNCiAgICAgICAgQHBhcmFtIF9mcm9tICAgICAgIGFjY291bnQgdG8gcmVtb3ZlIHRoZSBhbW91bnQgZnJvbQ0KICAgICAgICBAcGFyYW0gX2Ftb3VudCAgICAgYW1vdW50IHRvIGRlY3JlYXNlIHRoZSBzdXBwbHkgYnkNCiAgICAqLw0KICAgIGZ1bmN0aW9uIGRlc3Ryb3koYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfYW1vdW50KQ0KICAgICAgICBwdWJsaWMNCiAgICAgICAgb3duZXJPbmx5DQogICAgew0KICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlT2ZbX2Zyb21dLCBfYW1vdW50KTsNCiAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlU3ViKHRvdGFsU3VwcGx5LCBfYW1vdW50KTsNCg0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgdGhpcywgX2Ftb3VudCk7DQogICAgICAgIERlc3RydWN0aW9uKF9hbW91bnQpOw0KICAgIH0NCg0KICAgIC8vIEVSQzIwIHN0YW5kYXJkIG1ldGhvZCBvdmVycmlkZXMgd2l0aCBzb21lIGV4dHJhIGZ1bmN0aW9uYWxpdHkNCg0KICAgIC8qKg0KICAgICAgICBAZGV2IHNlbmQgY29pbnMNCiAgICAgICAgdGhyb3dzIG9uIGFueSBlcnJvciByYXRoZXIgdGhlbiByZXR1cm4gYSBmYWxzZSBmbGFnIHRvIG1pbmltaXplIHVzZXIgZXJyb3JzDQogICAgICAgIG5vdGUgdGhhdCB3aGVuIHRyYW5zZmVycmluZyB0byB0aGUgc21hcnQgdG9rZW4ncyBhZGRyZXNzLCB0aGUgY29pbnMgYXJlIGFjdHVhbGx5IGRlc3Ryb3llZA0KDQogICAgICAgIEBwYXJhbSBfdG8gICAgICB0YXJnZXQgYWRkcmVzcw0KICAgICAgICBAcGFyYW0gX3ZhbHVlICAgdHJhbnNmZXIgYW1vdW50DQoNCiAgICAgICAgQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2UgaWYgaXQgd2Fzbid0DQogICAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB0cmFuc2ZlcnNBbGxvd2VkIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBhc3NlcnQoc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpKTsNCg0KICAgICAgICAvLyB0cmFuc2ZlcnJpbmcgdG8gdGhlIGNvbnRyYWN0IGFkZHJlc3MgZGVzdHJveXMgdG9rZW5zDQogICAgICAgIGlmIChfdG8gPT0gYWRkcmVzcyh0aGlzKSkgew0KICAgICAgICAgICAgYmFsYW5jZU9mW190b10gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgdG90YWxTdXBwbHkgLT0gX3ZhbHVlOw0KICAgICAgICAgICAgRGVzdHJ1Y3Rpb24oX3ZhbHVlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAgICBAZGV2IGFuIGFjY291bnQvY29udHJhY3QgYXR0ZW1wdHMgdG8gZ2V0IHRoZSBjb2lucw0KICAgICAgICB0aHJvd3Mgb24gYW55IGVycm9yIHJhdGhlciB0aGVuIHJldHVybiBhIGZhbHNlIGZsYWcgdG8gbWluaW1pemUgdXNlciBlcnJvcnMNCiAgICAgICAgbm90ZSB0aGF0IHdoZW4gdHJhbnNmZXJyaW5nIHRvIHRoZSBzbWFydCB0b2tlbidzIGFkZHJlc3MsIHRoZSBjb2lucyBhcmUgYWN0dWFsbHkgZGVzdHJveWVkDQoNCiAgICAgICAgQHBhcmFtIF9mcm9tICAgIHNvdXJjZSBhZGRyZXNzDQogICAgICAgIEBwYXJhbSBfdG8gICAgICB0YXJnZXQgYWRkcmVzcw0KICAgICAgICBAcGFyYW0gX3ZhbHVlICAgdHJhbnNmZXIgYW1vdW50DQoNCiAgICAgICAgQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2UgaWYgaXQgd2Fzbid0DQogICAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgdHJhbnNmZXJzQWxsb3dlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgYXNzZXJ0KHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpKTsNCg0KICAgICAgICAvLyB0cmFuc2ZlcnJpbmcgdG8gdGhlIGNvbnRyYWN0IGFkZHJlc3MgZGVzdHJveXMgdG9rZW5zDQogICAgICAgIGlmIChfdG8gPT0gYWRkcmVzcyh0aGlzKSkgew0KICAgICAgICAgICAgYmFsYW5jZU9mW190b10gLT0gX3ZhbHVlOw0KICAgICAgICAgICAgdG90YWxTdXBwbHkgLT0gX3ZhbHVlOw0KICAgICAgICAgICAgRGVzdHJ1Y3Rpb24oX3ZhbHVlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIERldkNoYW5nZU1pbmluZ1Jld2FyZCh1aW50MjU2IF9hbW91bnQpIHB1YmxpYyBvd25lck9ubHkgew0KICAgICAgICBEZXZNaW5pbmdSZXdhcmRQZXJFVEhCbG9jayA9IF9hbW91bnQ7DQogICAgICAgIERldk1pbmluZ1Jld2FyZENoYW5nZXMoX2Ftb3VudCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gRGV2R2l2ZUJsb2NrUmV3YXJkKCkgew0KICAgICAgICByZXF1aXJlKGxhc3RCbG9ja1Jld2FyZGVkIDwgYmxvY2subnVtYmVyKSA7DQogICAgICAgIGxhc3RCbG9ja1Jld2FyZGVkID0gYmxvY2subnVtYmVyOw0KICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIERldk1pbmluZ1Jld2FyZFBlckVUSEJsb2NrKTsNCiAgICAgICAgYmFsYW5jZU9mW2Jsb2NrLmNvaW5iYXNlXSA9IHNhZmVBZGQoYmFsYW5jZU9mW2Jsb2NrLmNvaW5iYXNlXSwgRGV2TWluaW5nUmV3YXJkUGVyRVRIQmxvY2spOw0KICAgICAgICBEZXZNaW5pbmdSZXdhcmRUcmFuc2Zlcih0aGlzLCBibG9jay5jb2luYmFzZSwgRGV2TWluaW5nUmV3YXJkUGVyRVRIQmxvY2spOw0KICAgIH0NCg0KfQ=='