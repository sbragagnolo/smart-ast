base 64 content
base64soupToken
	^'Y29udHJhY3QgT3duZWQgew0KDQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgaXNBZG1pbjsNCg0KICAgIGZ1bmN0aW9uIE93bmVkKCkgew0KICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7DQogICAgICAgIGlzQWRtaW5bbXNnLnNlbmRlcl0gPSB0cnVlOw0KICAgIH0NCg0KICAgIG1vZGlmaWVyIG9ubHlPd25lciB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5QWRtaW4oKSB7DQogICAgICAgIGFzc2VydChpc0FkbWluW21zZy5zZW5kZXJdKTsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhZGRBZG1pbihhZGRyZXNzIHVzZXIpIG9ubHlBZG1pbiB7DQogICAgICAgIGlzQWRtaW5bdXNlcl0gPSB0cnVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJlbW92ZUFkbWluKGFkZHJlc3MgdXNlcikgb25seUFkbWluIHsNCiAgICAgICAgaWYgKHVzZXIgPT0gb3duZXIpIHsNCiAgICAgICAgICAgIHRocm93OyAvL2NhbnQgcmVtb3ZlIHRoZSBvd25lcg0KICAgICAgICB9DQogICAgICAgIGlzQWRtaW5bdXNlcl0gPSBmYWxzZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgew0KICAgICAgICBvd25lciA9IG5ld093bmVyOw0KICAgIH0NCg0KDQp9DQoNCg0KY29udHJhY3QgU291cFRva2VuIGlzIE93bmVkIHsNCg0KDQogICAgc3RyaW5nIHB1YmxpYyBzdGFuZGFyZCA9ICdTb3VwVG9rZW4gMzAvMDYnOw0KDQogICAgc3RyaW5nIHB1YmxpYyBuYW1lOw0KDQogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7DQoNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCg0KICAgIHVpbnQgcHVibGljIG1pbkJhbGFuY2VGb3JBY2NvdW50cyA9IDUgZmlubmV5Ow0KDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOw0KDQogICAgbWFwcGluZyAodWludCA9PiBhZGRyZXNzW10pIHB1YmxpYyBvcmRlcnNGb3I7DQoNCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsNCg0KICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgdmFsdWUpOw0KDQogICAgZXZlbnQgQnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpOw0KDQogICAgZXZlbnQgTG9nRGVwb3NpdFJlY2VpdmVkKGFkZHJlc3Mgc2VuZGVyKTsNCg0KICAgIGZ1bmN0aW9uIFNvdXBUb2tlbihzdHJpbmcgdG9rZW5OYW1lLCBzdHJpbmcgdG9rZW5TeW1ib2wpIHBheWFibGUgew0KICAgICAgICBuYW1lID0gdG9rZW5OYW1lOw0KICAgICAgICAvLyBTZXQgdGhlIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZXMNCiAgICAgICAgc3ltYm9sID0gdG9rZW5TeW1ib2w7DQogICAgICAgIC8vIFNldCB0aGUgc3ltYm9sIGZvciBkaXNwbGF5IHB1cnBvc2VzDQogICAgfQ0KDQogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsNCiAgICAgICAgTG9nRGVwb3NpdFJlY2VpdmVkKG1zZy5zZW5kZXIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG1pbnRUb2tlbihhZGRyZXNzIHRhcmdldCwgdWludDI1NiBtaW50ZWRBbW91bnQpIG9ubHlBZG1pbiB7DQogICAgICAgIGJhbGFuY2VPZlt0YXJnZXRdICs9IG1pbnRlZEFtb3VudDsNCiAgICAgICAgdG90YWxTdXBwbHkgKz0gbWludGVkQW1vdW50Ow0KICAgICAgICBUcmFuc2ZlcigwLCBvd25lciwgbWludGVkQW1vdW50KTsNCiAgICAgICAgVHJhbnNmZXIob3duZXIsIHRhcmdldCwgbWludGVkQW1vdW50KTsNCiAgICAgICAgaWYgKHRhcmdldC5iYWxhbmNlIDwgbWluQmFsYW5jZUZvckFjY291bnRzKSB0YXJnZXQudHJhbnNmZXIobWluQmFsYW5jZUZvckFjY291bnRzIC0gdGFyZ2V0LmJhbGFuY2UpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSl7DQogICAgICAgIGlmIChfdG8gPT0gMHgwKSB0aHJvdzsNCiAgICAgICAgLy8gUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcy4gVXNlIGJ1cm4oKSBpbnN0ZWFkDQogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHRocm93Ow0KICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gNCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHRocm93Ow0KICAgICAgICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzDQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7DQogICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcg0KICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7DQogICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5QWRtaW4gcmV0dXJucyAoYm9vbCBzdWNjZXNzKXsNCiAgICAgICAgaWYgKF90byA9PSAweDApIHRocm93Ow0KICAgICAgICAvLyBQcmV2ZW50IHRyYW5zZmVyIHRvIDB4MCBhZGRyZXNzLiBVc2UgYnVybigpIGluc3RlYWQNCiAgICAgICAgaWYgKGJhbGFuY2VPZltfZnJvbV0gPCBfdmFsdWUpIHRocm93Ow0KICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gNCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHRocm93Ow0KICAgICAgICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzDQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOw0KICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXINCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOw0KICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudA0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBidXJuRnJvbShhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSkgb25seUFkbWluIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBpZiAoYmFsYW5jZU9mW19mcm9tXSA8IF92YWx1ZSkgdGhyb3c7DQogICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaA0KICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsNCiAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyDQogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsNCiAgICAgICAgLy8gVXBkYXRlcyB0b3RhbFN1cHBseQ0KICAgICAgICBCdXJuKF9mcm9tLCBfdmFsdWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjaGVja0lmQWxyZWFkeU9yZGVyZWRGb3JEYXkodWludCBkYXksIGFkZHJlc3MgdXNlcikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCl7DQogICAgICAgIHZhciBvcmRlcnMgPSBvcmRlcnNGb3JbZGF5XTsNCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgb3JkZXJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAob3JkZXJzW2ldID09IHVzZXIpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZmluZE9yZGVySW5kZXhGb3JBZGRyZXNzKHVpbnQgZGF5LCBhZGRyZXNzIHVzZXIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpew0KICAgICAgICB2YXIgb3JkZXJzID0gb3JkZXJzRm9yW2RheV07DQogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG9yZGVycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYgKG9yZGVyc1tpXSA9PSB1c2VyKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy90aGlzIHRocm93IHdpbGwgbmV2ZXIgYmUgcmVhY2hlZC4gVGhpcyBmdW5jdGlvbiBpcyBvbmx5IGNhbGxlZCBmb3IgdXNlcnMNCiAgICAgICAgLy93aGVyZSB3ZSBhYnNvbHV0ZWx5IGtub3cgdGhleSBhcmUgaW4gdGhlIGxpc3QNCiAgICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gb3JkZXJGb3JEYXlzKGJvb2xbXSB3ZWVrZGF5cykgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQoNCiAgICAgICAgdWludCB0b3RhbE9yZGVycyA9IDA7DQogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHdlZWtkYXlzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB2YXIgaXNPcmRlcmluZyA9IHdlZWtkYXlzW2ldOw0KICAgICAgICAgICAgLy9jaGVjayBpZiB0aGUgdXNlciBhbHJlYWR5IG9yZGVyZWQgZm9yIHRoYXQgZGF5DQogICAgICAgICAgICBpZiAoY2hlY2tJZkFscmVhZHlPcmRlcmVkRm9yRGF5KGksIG1zZy5zZW5kZXIpKSB7DQogICAgICAgICAgICAgICAgLy9pZiBzbyB3ZSByZW1vdmUgdGhlIG9yZGVyIGlmIHRoZSB1c2VyIGNoYW5nZWQgaGlzIG1pbmQNCiAgICAgICAgICAgICAgICBpZiAoIWlzT3JkZXJpbmcpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJpZHggPSBmaW5kT3JkZXJJbmRleEZvckFkZHJlc3MoaSwgbXNnLnNlbmRlcik7DQogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcmRlcnNGb3JbaV1bdXNlcmlkeF07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vaWYgaGUgc3RpbGwgd2FudHMgdG8gYnV5IGZvciB0aGUgY2hhbmdlIHdlIGRvbnQgZG8gYW55dGhpbmcNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmIChpc09yZGVyaW5nKSB7DQogICAgICAgICAgICAgICAgICAgIC8vYWRkIHRoZSB1c2VyIHRvIHRoZSBsaXN0IG9mIHB1cmNoYXNlcyB0aGF0IGRheQ0KICAgICAgICAgICAgICAgICAgICBvcmRlcnNGb3JbaV0ucHVzaChtc2cuc2VuZGVyKTsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxPcmRlcnMrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy9kbyBub3RoaW5nIG90aGVyd2lzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gcm9sbGJhY2sgdHJhbnNhY3Rpb24gaWYgdG90YWxPcmRlcnMgZXhjZWVkcyBiYWxhbmNlDQogICAgICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgdG90YWxPcmRlcnMpIHsNCiAgICAgICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBidXJuU291cFRva2Vuc0ZvckRheSh1aW50IGRheSkgb25seUFkbWluIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KDQogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG9yZGVyc0ZvcltkYXldLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAob3JkZXJzRm9yW2RheV1baV0gPT0gMHgwKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBidXJuRnJvbShvcmRlcnNGb3JbZGF5XVtpXSwgMSk7DQogICAgICAgICAgICBkZWxldGUgb3JkZXJzRm9yW2RheV1baV07DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0T3JkZXJBZGRyZXNzZXNGb3JEYXkodWludCBkYXkpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3NbXSkgew0KICAgICAgICByZXR1cm4gb3JkZXJzRm9yW2RheV07DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0QW1vdW50T3JkZXJzRm9yRGF5KHVpbnQgZGF5KSBjb25zdGFudCByZXR1cm5zICh1aW50KXsNCiAgICAgICAgcmV0dXJuIG9yZGVyc0ZvcltkYXldLmxlbmd0aDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzZXRNaW5CYWxhbmNlKHVpbnQgbWluaW11bUJhbGFuY2VJbkZpbm5leSkgb25seUFkbWluIHsNCiAgICAgICAgbWluQmFsYW5jZUZvckFjY291bnRzID0gbWluaW11bUJhbGFuY2VJbkZpbm5leSAqIDEgZmlubmV5Ow0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGtpbGwoKSBvbmx5T3duZXIgew0KICAgICAgICBzdWljaWRlKG93bmVyKTsNCiAgICB9DQoNCg0KfQ=='