base 64 content
base64sphereTokenFactory
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMzsNCi8vIEFic3RyYWN0IGNvbnRyYWN0IGZvciB0aGUgZnVsbCBFUkMgMjAgVG9rZW4gc3RhbmRhcmQNCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KDQpjb250cmFjdCBFUkMyMCB7DQogICAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsNCg0KICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQNCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQ0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsNCg0KICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmANCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50DQogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZA0KICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdA0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYA0KICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcg0KICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQNCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkDQogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2Vucw0KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zDQogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyDQogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90DQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCg0KICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMNCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2Vucw0KICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsNCg0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOw0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOw0KfQ0KDQpjb250cmFjdCBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICB1aW50IGMgPSBhICogYjsNCiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gc2FmZURpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIGFzc2VydChiID4gMCk7DQogICAgdWludCBjID0gYSAvIGI7DQogICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgcmV0dXJuIGEgLSBiOw0KICB9DQoNCiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKyBiOw0KICAgIGFzc2VydChjPj1hICYmIGM+PWIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsNCiAgICBpZiAoIWFzc2VydGlvbikgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICB9DQp9DQoNCmNvbnRyYWN0IE93bmVkIHsNCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7DQogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQoNCiAgICBmdW5jdGlvbiBPd25lZCgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOw0KDQogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciB7DQogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpIHsNCiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gaXMgRVJDMjAsIFNhZmVNYXRoLCBPd25lZHsNCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VzOw0KCWFkZHJlc3NbXSBtaW50aW5nRmFjdG9yaWVzOw0KCXVpbnQgbnVtRmFjdG9yaWVzOw0KCQ0KCWZ1bmN0aW9uIGFkZE1pbnRpbmdGYWN0b3J5KGFkZHJlc3MgX2ZhY3RvcnkpIG9ubHlPd25lcnsNCgkgICAgbWludGluZ0ZhY3Rvcmllcy5wdXNoKF9mYWN0b3J5KTsNCgkgICAgbnVtRmFjdG9yaWVzICs9IDE7DQoJfQ0KCQ0KCW1vZGlmaWVyIG9ubHlGYWN0b3J5ew0KCSAgICBib29sIGlzRmFjdG9yeSA9IGZhbHNlOw0KCSAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1GYWN0b3JpZXM7IGkrKyl7DQoJICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBtaW50aW5nRmFjdG9yaWVzW2ldKQ0KCSAgICAgICAgew0KCSAgICAgICAgICAgIGlzRmFjdG9yeSA9IHRydWU7DQoJICAgICAgICB9DQoJICAgIH0NCgkgICAgaWYgKCFpc0ZhY3RvcnkpIHRocm93Ow0KCSAgICBfOw0KCX0NCglmdW5jdGlvbiBleGNoYW5nZVRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSk7DQp9DQoNCmNvbnRyYWN0IENvbGxlY3RpYmxlRmVlVG9rZW4gaXMgTWludGFibGVUb2tlbnsNCgl1aW50OCBwdWJsaWMgZGVjaW1hbHM7DQoJbWFwcGluZyh1aW50ID0+IHVpbnQpIHB1YmxpYyByb3VuZEZlZXM7DQoJbWFwcGluZyh1aW50ID0+IHVpbnQpIHB1YmxpYyByZWNvcmRlZENvaW5TdXBwbHlGb3JSb3VuZDsNCgltYXBwaW5nKHVpbnQgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgY2xhaW1lZEZlZXM7DQoJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGxhc3RDbGFpbWVkUm91bmQ7DQoJdWludDI1NiBwdWJsaWMgcmVzZXJ2ZXM7DQoJdWludCBwdWJsaWMgbGF0ZXN0Um91bmQgPSAwOw0KCXVpbnQgcHVibGljIGluaXRpYWxSb3VuZCA9IDE7DQoJDQoJbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgew0KCQlpZihtc2cuZGF0YS5sZW5ndGggIT0gc2l6ZSArIDQpIHsNCgkJdGhyb3c7DQoJCX0NCgkJXzsNCgl9DQoJDQoJZnVuY3Rpb24gcmVkdWNlUmVzZXJ2ZXModWludCB2YWx1ZSkgb25seVBheWxvYWRTaXplKDEgKiAzMikgb25seU93bmVyew0KCSAgICByZXNlcnZlcyA9IHNhZmVTdWIocmVzZXJ2ZXMsIHZhbHVlKTsNCgl9DQoJDQoJZnVuY3Rpb24gYWRkUmVzZXJ2ZXModWludCB2YWx1ZSkgb25seVBheWxvYWRTaXplKDEgKiAzMikgb25seU93bmVyew0KCSAgICByZXNlcnZlcyA9IHNhZmVBZGQocmVzZXJ2ZXMsIHZhbHVlKTsNCgl9DQoJDQoJZnVuY3Rpb24gZGVwb3NpdEZlZXModWludCB2YWx1ZSkgb25seVBheWxvYWRTaXplKDEgKiAzMikgb25seU93bmVyIHsNCgkJbGF0ZXN0Um91bmQgKz0gMTsNCgkJcmVjb3JkZWRDb2luU3VwcGx5Rm9yUm91bmRbbGF0ZXN0Um91bmRdID0gdG90YWxTdXBwbHk7DQoJCXJvdW5kRmVlc1tsYXRlc3RSb3VuZF0gPSB2YWx1ZTsNCgl9DQoJZnVuY3Rpb24gY2xhaW1GZWVzKGFkZHJlc3MgX293bmVyKSBvbmx5UGF5bG9hZFNpemUoMSAqIDMyKSBvbmx5T3duZXIgcmV0dXJucyAodWludCB0b3RhbEZlZXMpIHsNCgkJdG90YWxGZWVzID0gMDsNCgkJZm9yICh1aW50IGkgPSBsYXN0Q2xhaW1lZFJvdW5kW19vd25lcl0gKyAxOyBpIDw9IGxhdGVzdFJvdW5kOyBpKyspew0KCQkJdWludCBmZWVGb3JSb3VuZCA9IGJhbGFuY2VzW19vd25lcl0gKiBmZWVQZXJVbml0T2ZDb2luKGkpOw0KCQkJaWYgKGZlZUZvclJvdW5kID4gY2xhaW1lZEZlZXNbaV1bX293bmVyXSl7DQoJCQkJZmVlRm9yUm91bmQgPSBzYWZlU3ViKGZlZUZvclJvdW5kLGNsYWltZWRGZWVzW2ldW19vd25lcl0pOw0KCQkJfQ0KCQkJZWxzZSB7DQoJCQkJZmVlRm9yUm91bmQgPSAwOw0KCQkJfQ0KCQkJY2xhaW1lZEZlZXNbaV1bX293bmVyXSA9IHNhZmVBZGQoY2xhaW1lZEZlZXNbaV1bX293bmVyXSwgZmVlRm9yUm91bmQpOw0KCQkJdG90YWxGZWVzID0gc2FmZUFkZCh0b3RhbEZlZXMsIGZlZUZvclJvdW5kKTsNCgkJfQ0KCQlsYXN0Q2xhaW1lZFJvdW5kW19vd25lcl0gPSBsYXRlc3RSb3VuZDsNCgkJcmV0dXJuIHRvdGFsRmVlczsNCgl9DQoNCglmdW5jdGlvbiBjbGFpbUZlZXNGb3JSb3VuZChhZGRyZXNzIF9vd25lciwgdWludCByb3VuZCkgb25seVBheWxvYWRTaXplKDIgKiAzMikgb25seU93bmVyIHJldHVybnMgKHVpbnQgZmVlRm9yUm91bmQpIHsNCgkJZmVlRm9yUm91bmQgPSBiYWxhbmNlc1tfb3duZXJdICogZmVlUGVyVW5pdE9mQ29pbihyb3VuZCk7DQoJCWlmIChmZWVGb3JSb3VuZCA+IGNsYWltZWRGZWVzW3JvdW5kXVtfb3duZXJdKXsNCgkJCWZlZUZvclJvdW5kID0gc2FmZVN1YihmZWVGb3JSb3VuZCxjbGFpbWVkRmVlc1tyb3VuZF1bX293bmVyXSk7DQoJCX0NCgkJZWxzZSB7DQoJCQlmZWVGb3JSb3VuZCA9IDA7DQoJCX0NCgkJY2xhaW1lZEZlZXNbcm91bmRdW19vd25lcl0gPSBzYWZlQWRkKGNsYWltZWRGZWVzW3JvdW5kXVtfb3duZXJdLCBmZWVGb3JSb3VuZCk7DQoJCXJldHVybiBmZWVGb3JSb3VuZDsNCgl9DQoNCglmdW5jdGlvbiBfcmVzZXRUcmFuc2ZlcnJlZENvaW5GZWVzKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9yZWNlaXBpZW50LCB1aW50IG51bUNvaW5zKSBpbnRlcm5hbHsNCgkJZm9yICh1aW50IGkgPSBsYXN0Q2xhaW1lZFJvdW5kW19vd25lcl0gKyAxOyBpIDw9IGxhdGVzdFJvdW5kOyBpKyspew0KCQkJdWludCBmZWVGb3JSb3VuZCA9IGJhbGFuY2VzW19vd25lcl0gKiBmZWVQZXJVbml0T2ZDb2luKGkpOw0KCQkJaWYgKGZlZUZvclJvdW5kID4gY2xhaW1lZEZlZXNbaV1bX293bmVyXSkgew0KCQkJCS8vQWRkIHVuY2xhaW1lZCBmZWVzIHRvIHJlc2VydmVzDQoJCQkJdWludCB1bmNsYWltZWRGZWVzID0gbWluMjU2KG51bUNvaW5zICogZmVlUGVyVW5pdE9mQ29pbihpKSwgc2FmZVN1YihmZWVGb3JSb3VuZCwgY2xhaW1lZEZlZXNbaV1bX293bmVyXSkpOw0KCQkJCXJlc2VydmVzID0gc2FmZUFkZChyZXNlcnZlcywgdW5jbGFpbWVkRmVlcyk7DQoJCQkJY2xhaW1lZEZlZXNbaV1bX293bmVyXSA9IHNhZmVBZGQoY2xhaW1lZEZlZXNbaV1bX293bmVyXSwgdW5jbGFpbWVkRmVlcyk7DQoJCQl9DQoJCX0NCgkJZm9yICh1aW50IHggPSBsYXN0Q2xhaW1lZFJvdW5kW19yZWNlaXBpZW50XSArIDE7IHggPD0gbGF0ZXN0Um91bmQ7IHgrKyl7DQoJCQkvL0VtcHR5IGZlZXMgZm9yIG5ldyByZWNlaXBpZW50DQoJCQljbGFpbWVkRmVlc1t4XVtfcmVjZWlwaWVudF0gPSBzYWZlQWRkKGNsYWltZWRGZWVzW3hdW19yZWNlaXBpZW50XSwgbnVtQ29pbnMgKiBmZWVQZXJVbml0T2ZDb2luKHgpKTsNCgkJfQ0KCX0NCglmdW5jdGlvbiBmZWVQZXJVbml0T2ZDb2luKHVpbnQgcm91bmQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGZlZSl7DQoJCXJldHVybiBzYWZlRGl2KHJvdW5kRmVlc1tyb3VuZF0sIHJlY29yZGVkQ29pblN1cHBseUZvclJvdW5kW3JvdW5kXSk7DQoJfQ0KCQ0KICAgZnVuY3Rpb24gbWludFRva2VucyhhZGRyZXNzIF9vd25lciwgdWludCBhbW91bnQpIG9ubHlGYWN0b3J5ew0KICAgICAgIC8vVXBvbiBmYWN0b3J5IHRyYW5zZmVyLCBmZWVzIHdpbGwgYmUgcmVkaXN0cmlidXRlZCBpbnRvIHJlc2VydmVzDQogICAgICAgbGFzdENsYWltZWRSb3VuZFttc2cuc2VuZGVyXSA9IGxhdGVzdFJvdW5kOw0KICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgYW1vdW50KTsNCiAgICAgICBiYWxhbmNlc1tfb3duZXJdICs9IGFtb3VudDsNCiAgIH0NCn0NCmNvbnRyYWN0IFNwaGVyZVRva2VuRmFjdG9yeSBpcyBPd25lZHsNCglDb2xsZWN0aWJsZUZlZVRva2VuIHNwaGVyZVRva2VuOw0KCWFkZHJlc3MgcHVibGljIGV4Y2hhbmdlQWRkcmVzczsNCglhZGRyZXNzIHB1YmxpYyBkYW9BZGRyZXNzOw0KCW1vZGlmaWVyIG9ubHlFeGNoYW5nZXsNCgkgICAgaWYgKG1zZy5zZW5kZXIgIT0gZXhjaGFuZ2VBZGRyZXNzICYmIG1zZy5zZW5kZXIgIT0gZGFvQWRkcmVzcyl7DQoJICAgICAgICB0aHJvdzsNCgkgICAgfQ0KCSAgICBfOw0KCX0NCglmdW5jdGlvbiBTcGhlcmVUb2tlbkZhY3RvcnkoKXsNCgkJc3BoZXJlVG9rZW4gPSBDb2xsZWN0aWJsZUZlZVRva2VuKDB4ZTE4ZTljZTA4MkIxNjA5ZWJGQUUwOTBjNmU1Q2JiNjVlRGFDNTg1NSk7DQoJfQ0KCWZ1bmN0aW9uIG1pbnQoYWRkcmVzcyB0YXJnZXQsIHVpbnQgYW1vdW50KSBvbmx5RXhjaGFuZ2V7DQoJCXNwaGVyZVRva2VuLm1pbnRUb2tlbnMoYWRkcmVzcyh0aGlzKSwgYW1vdW50KTsNCgkJc3BoZXJlVG9rZW4uZXhjaGFuZ2VUcmFuc2Zlcih0YXJnZXQsIGFtb3VudCk7DQoJfQ0KICAgIGZ1bmN0aW9uIHNldEV4Y2hhbmdlKGFkZHJlc3MgZXhjaGFuZ2UpIG9ubHlPd25lcnsNCiAgICAgICAgZXhjaGFuZ2VBZGRyZXNzID0gZXhjaGFuZ2U7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldERBTyhhZGRyZXNzIGRhbykgb25seU93bmVyew0KICAgICAgICBkYW9BZGRyZXNzID0gZGFvOw0KICAgIH0NCn0='