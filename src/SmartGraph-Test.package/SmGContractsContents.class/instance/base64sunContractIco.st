base 64 content
base64sunContractIco
	^'Y29udHJhY3Qgb3duZWQgew0KDQogIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQogIGZ1bmN0aW9uIG93bmVkKCkgew0KICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgfQ0KDQogIG1vZGlmaWVyIG9ubHlPd25lciB7DQogICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93Ow0KICAgIF87DQogIH0NCg0KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgew0KICAgIG93bmVyID0gbmV3T3duZXI7DQogIH0NCn0NCg0KY29udHJhY3QgdG9rZW5SZWNpcGllbnQgeyBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKTsgfQ0KDQpjb250cmFjdCBJU25jVG9rZW4gew0KICBmdW5jdGlvbiBtaW50VG9rZW5zKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpOw0KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpOw0KfQ0KDQpjb250cmFjdCBTdW5Db250cmFjdEljbyBpcyBvd25lZHsNCg0KICB1aW50MjU2IHB1YmxpYyBzdGFydEJsb2NrOw0KICB1aW50MjU2IHB1YmxpYyBlbmRCbG9jazsNCiAgdWludDI1NiBwdWJsaWMgbWluRXRoVG9SYWlzZTsNCiAgdWludDI1NiBwdWJsaWMgbWF4RXRoVG9SYWlzZTsNCiAgdWludDI1NiBwdWJsaWMgdG90YWxFdGhSYWlzZWQ7DQogIGFkZHJlc3MgcHVibGljIG11bHRpc2lnQWRkcmVzczsNCg0KDQogIElTbmNUb2tlbiBzbmNUb2tlbkNvbnRyYWN0OyANCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwcmVzYWxlQ29udHJpYnV0b3JBbGxvd2FuY2U7DQogIHVpbnQyNTYgbmV4dEZyZWVQYXJ0aWNpcGFudEluZGV4Ow0KICBtYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpIHBhcnRpY2lwYW50SW5kZXg7DQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcGFydGljaXBhbnRDb250cmlidXRpb247DQoNCiAgYm9vbCBpY29IYXNTdGFydGVkOw0KICBib29sIG1pblRyZXNob2xkUmVhY2hlZDsNCiAgYm9vbCBpY29IYXNTdWNlc3NmdWx5RW5kZWQ7DQogIHVpbnQyNTYgYmxvY2tzSW5XZWVrOw0KICAgIGJvb2wgb3duZXJIYXNDbGFpbWVkVG9rZW5zOw0KDQogIHVpbnQyNTYgbGFzdEV0aFJldHVybkluZGV4Ow0KICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIGhhc0NsYWltZWRFdGhXaGVuRmFpbDsNCg0KICBldmVudCBJQ09TdGFydGVkKHVpbnQyNTYgX2Jsb2NrTnVtYmVyKTsNCiAgZXZlbnQgSUNPTWluVHJlc2hvbGRSZWFjaGVkKHVpbnQyNTYgX2Jsb2NrTnVtYmVyKTsNCiAgZXZlbnQgSUNPRW5kZWRTdWNjZXNzZnVseSh1aW50MjU2IF9ibG9ja051bWJlciwgdWludDI1NiBfYW1vdW50UmFpc2VkKTsNCiAgZXZlbnQgSUNPRmFpbGVkKHVpbnQyNTYgX2Jsb2NrTnVtYmVyLCB1aW50MjU2IF9hbW1vdW50UmFpc2VkKTsNCiAgZXZlbnQgRXJyb3JTZW5kaW5nRVRIKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX2Ftb3VudCk7DQoNCiAgZnVuY3Rpb24gU3VuQ29udHJhY3RJY28odWludDI1NiBfc3RhcnRCbG9jaywgYWRkcmVzcyBfbXVsdGlzaWdBZGRyZXNzKSB7DQogICAgYmxvY2tzSW5XZWVrID0gNCAqIDYwICogMjQgKiA3Ow0KICAgIHN0YXJ0QmxvY2sgPSBfc3RhcnRCbG9jazsNCiAgICBlbmRCbG9jayA9IF9zdGFydEJsb2NrICsgYmxvY2tzSW5XZWVrICogNDsNCiAgICBtaW5FdGhUb1JhaXNlID0gNTAwMCAqIDEwKioxODsNCiAgICBtYXhFdGhUb1JhaXNlID0gMTAwMDAwICogMTAqKjE4Ow0KICAgIG11bHRpc2lnQWRkcmVzcyA9IF9tdWx0aXNpZ0FkZHJlc3M7DQogIH0NCg0KICAvLyAgDQogIC8qIFVzZXIgYWNjZXNzaWJsZSBtZXRob2RzICovICAgDQogIC8vICANCg0KICAvKiBVc2VycyBzZW5kIEVUSCBhbmQgZW50ZXIgdGhlIHRva2VuIHNhbGUqLyAgDQogIGZ1bmN0aW9uICgpIHBheWFibGUgew0KICAgIGlmIChtc2cudmFsdWUgPT0gMCkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhyb3cgaWYgdGhlIHZhbHVlIGlzIDAgIA0KICAgIGlmIChpY29IYXNTdWNlc3NmdWx5RW5kZWQgfHwgYmxvY2subnVtYmVyID4gZW5kQmxvY2spIHRocm93OyAgICAgICAgLy8gVGhyb3cgaWYgdGhlIElDTyBoYXMgZW5kZWQgICAgIA0KICAgIGlmICghaWNvSGFzU3RhcnRlZCl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyB0aGUgZmlyc3QgSUNPIHRyYW5zYWN0aW9uICAgICAgIA0KICAgICAgaWYgKGJsb2NrLm51bWJlciA+PSBzdGFydEJsb2NrKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIElDTyBzaG91bGQgc3RhcnQgICAgICAgIA0KICAgICAgICBpY29IYXNTdGFydGVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoYXQgdGhlIElDTyBoYXMgc3RhcnRlZCAgICAgICAgIA0KICAgICAgICBJQ09TdGFydGVkKGJsb2NrLm51bWJlcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgSUNPU3RhcnRlZCBldmVudCAgICAgDQogICAgICB9IGVsc2V7DQogICAgICAgIHRocm93Ow0KICAgICAgfQ0KICAgIH0gICAgIA0KICAgIGlmIChwYXJ0aWNpcGFudENvbnRyaWJ1dGlvblttc2cuc2VuZGVyXSA9PSAwKXsgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGlzIGEgbmV3IHVzZXIgICAgICAgDQogICAgICBwYXJ0aWNpcGFudEluZGV4W25leHRGcmVlUGFydGljaXBhbnRJbmRleF0gPSBtc2cuc2VuZGVyOyAgICAgICAgIC8vIEFkZCBhIG5ldyB1c2VyIHRvIHRoZSBwYXJ0aWNpcGFudCBpbmRleCAgICAgICANCiAgICAgIG5leHRGcmVlUGFydGljaXBhbnRJbmRleCArPSAxOw0KICAgIH0gICAgIA0KICAgIGlmIChtYXhFdGhUb1JhaXNlID4gKHRvdGFsRXRoUmFpc2VkICsgbXNnLnZhbHVlKSl7ICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgdXNlciBzZW50IHRvbyBtdWNoIEVUSCAgICAgICANCiAgICAgIHBhcnRpY2lwYW50Q29udHJpYnV0aW9uW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZTsgICAgICAgICAgICAgICAgLy8gQWRkIGNvbnRyaWJ1dGlvbiAgICAgIA0KICAgICAgdG90YWxFdGhSYWlzZWQgKz0gbXNnLnZhbHVlOy8vIEFkZCB0byB0b3RhbCBldGggUmFpc2VkDQogICAgICBzbmNUb2tlbkNvbnRyYWN0Lm1pbnRUb2tlbnMobXNnLnNlbmRlciwgZ2V0U25jVG9rZW5Jc3N1YW5jZShibG9jay5udW1iZXIsIG1zZy52YWx1ZSkpOw0KICAgICAgaWYgKCFtaW5UcmVzaG9sZFJlYWNoZWQgJiYgdG90YWxFdGhSYWlzZWQgPj0gbWluRXRoVG9SYWlzZSl7ICAgICAgLy8gQ2hlY2sgaWYgdGhlIG1pbiB0cmVzaG9sZCBoYXMgYmVlbiByZWFjaGVkIG9uZSB0aW1lICAgICAgICANCiAgICAgICAgSUNPTWluVHJlc2hvbGRSZWFjaGVkKGJsb2NrLm51bWJlcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIElDT01pblRyZXNob2xkUmVhY2hlZCBldmVudCAgICAgICAgDQogICAgICAgIG1pblRyZXNob2xkUmVhY2hlZCA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhhdCB0aGUgbWluIHRyZXNob2xkIGhhcyBiZWVuIHJlYWNoZWQgICAgICAgDQogICAgICB9ICAgICANCiAgICB9ZWxzZXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHVzZXIgc2VudCB0byBtdWNoIGV0aCAgICAgICANCiAgICAgIHVpbnQgbWF4Q29udHJpYnV0aW9uID0gbWF4RXRoVG9SYWlzZSAtIHRvdGFsRXRoUmFpc2VkOyAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBtYXhpbXVtIGNvbnRyaWJ1dGlvbiAgICAgICANCiAgICAgIHBhcnRpY2lwYW50Q29udHJpYnV0aW9uW21zZy5zZW5kZXJdICs9IG1heENvbnRyaWJ1dGlvbjsgICAgICAgICAgIC8vIEFkZCBtYXhpbXVtIGNvbnRyaWJ1dGlvbiB0byBhY2NvdW50ICAgICAgDQogICAgICB0b3RhbEV0aFJhaXNlZCArPSBtYXhDb250cmlidXRpb247ICANCiAgICAgIHNuY1Rva2VuQ29udHJhY3QubWludFRva2Vucyhtc2cuc2VuZGVyLCBnZXRTbmNUb2tlbklzc3VhbmNlKGJsb2NrLm51bWJlciwgbWF4Q29udHJpYnV0aW9uKSk7DQogICAgICB1aW50IHRvUmV0dXJuID0gbXNnLnZhbHVlIC0gbWF4Q29udHJpYnV0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGhvdyBtdWNoIHNob3VsZCBiZSByZXR1cm5lZCAgICAgICANCiAgICAgIGljb0hhc1N1Y2Vzc2Z1bHlFbmRlZCA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhhdCBJQ08gaGFzIHN1Y2Nlc3NmdWxseSBlbmRlZCAgICAgICANCiAgICAgIElDT0VuZGVkU3VjY2Vzc2Z1bHkoYmxvY2subnVtYmVyLCB0b3RhbEV0aFJhaXNlZCk7ICAgICAgDQogICAgICBpZighbXNnLnNlbmRlci5zZW5kKHRvUmV0dXJuKSl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVmdW5kIHRoZSBiYWxhbmNlIHRoYXQgaXMgb3ZlciB0aGUgY2FwICAgICAgICAgDQogICAgICAgIEVycm9yU2VuZGluZ0VUSChtc2cuc2VuZGVyLCB0b1JldHVybik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQgZm9yIG1hbnVhbCByZXR1cm4gaWYgdHJhbnNhY3Rpb24gdGhyb3dzICAgICAgIA0KICAgICAgfSAgICAgDQogICAgfQ0KICB9ICAgDQoNCiAgLyogVXNlcnMgY2FuIGNsYWltIEVUSCBieSB0aGVtc2VsdmVzIGlmIHRoZXkgd2FudCB0byBpbiBjYXNlIG9mIEVUSCBmYWlsdXJlKi8gICANCiAgZnVuY3Rpb24gY2xhaW1FdGhJZkZhaWxlZCgpeyAgICANCiAgICBpZiAoYmxvY2subnVtYmVyIDw9IGVuZEJsb2NrIHx8IHRvdGFsRXRoUmFpc2VkID49IG1pbkV0aFRvUmFpc2UpIHRocm93OyAvLyBDaGVjayBpZiBJQ08gaGFzIGZhaWxlZCAgICANCiAgICBpZiAocGFydGljaXBhbnRDb250cmlidXRpb25bbXNnLnNlbmRlcl0gPT0gMCkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyBwYXJ0aWNpcGF0ZWQgICAgIA0KICAgIGlmIChoYXNDbGFpbWVkRXRoV2hlbkZhaWxbbXNnLnNlbmRlcl0pIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgYWNjb3VudCBoYXMgYWxyZWFkeSBjbGFpbWVkIEVUSCAgICANCiAgICB1aW50MjU2IGV0aENvbnRyaWJ1dGVkID0gcGFydGljaXBhbnRDb250cmlidXRpb25bbXNnLnNlbmRlcl07ICAgICAgICAgICAvLyBHZXQgcGFydGljaXBhbnQgRVRIIENvbnRyaWJ1dGlvbiAgICAgDQogICAgaGFzQ2xhaW1lZEV0aFdoZW5GYWlsW21zZy5zZW5kZXJdID0gdHJ1ZTsgICAgIA0KICAgIGlmICghbXNnLnNlbmRlci5zZW5kKGV0aENvbnRyaWJ1dGVkKSl7ICAgICAgDQogICAgICBFcnJvclNlbmRpbmdFVEgobXNnLnNlbmRlciwgZXRoQ29udHJpYnV0ZWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQgaWYgc2VuZCBmYWlsZWQsIHNvbHZlIG1hbnVhbGx5ICAgICANCiAgICB9ICAgDQogIH0gICANCg0KICAvLyAgDQogIC8qIE9ubHkgb3duZXIgbWV0aG9kcyAqLyAgDQogIC8vICANCg0KICAvKiBBZGRzIGFkZHJlc3NlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIHRha2UgcGFydCBpbiBwcmVzYWxlICovICAgDQogIGZ1bmN0aW9uIGFkZFByZXNhbGVDb250cmlidXRvcnMoYWRkcmVzc1tdIF9wcmVzYWxlQ29udHJpYnV0b3JzKSBvbmx5T3duZXIgeyAgICAgDQogICAgZm9yICh1aW50IGNudCA9IDA7IGNudCA8IF9wcmVzYWxlQ29udHJpYnV0b3JzLmxlbmd0aDsgY250KyspeyAgICAgICANCiAgICAgIHByZXNhbGVDb250cmlidXRvckFsbG93YW5jZVtfcHJlc2FsZUNvbnRyaWJ1dG9yc1tjbnRdXSA9IHRydWU7ICAgIA0KICAgIH0gICANCiAgfSAgIA0KDQogIC8qIE93bmVyIGNhbiByZXR1cm4gZXRoIGZvciBtdWx0aXBsZSB1c2VycyBpbiBvbmUgY2FsbCovICANCiAgZnVuY3Rpb24gYmF0Y2hSZXR1cm5FdGhJZkZhaWxlZCh1aW50MjU2IF9udW1iZXJPZlJldHVybnMpIG9ubHlPd25lcnsgICAgDQogICAgaWYgKGJsb2NrLm51bWJlciA8IGVuZEJsb2NrIHx8IHRvdGFsRXRoUmFpc2VkID49IG1pbkV0aFRvUmFpc2UpIHRocm93OyAgICAvLyBDaGVjayBpZiBJQ08gZmFpbGVkICANCiAgICBhZGRyZXNzIGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3M7ICAgIA0KICAgIHVpbnQyNTYgY29udHJpYnV0aW9uOw0KICAgIGZvciAodWludCBjbnQgPSAwOyBjbnQgPCBfbnVtYmVyT2ZSZXR1cm5zOyBjbnQrKyl7ICAgICAgDQogICAgICBjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzID0gcGFydGljaXBhbnRJbmRleFtsYXN0RXRoUmV0dXJuSW5kZXhdOyAgICAgICAvLyBHZXQgbmV4dCBhY2NvdW50ICAgICAgIA0KICAgICAgaWYgKGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MgPT0gMHgwKSByZXR1cm47ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcGFydGljaXBhbnRzIHdlcmUgcmVpbWJ1cnNlZCAgICAgIA0KICAgICAgaWYgKCFoYXNDbGFpbWVkRXRoV2hlbkZhaWxbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10pIHsgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgbWFudWFsbHkgcmVjb3ZlcmVkIEVUSCAgICAgICAgIA0KICAgICAgICBjb250cmlidXRpb24gPSBwYXJ0aWNpcGFudENvbnRyaWJ1dGlvbltjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXTsgICAgLy8gR2V0IGFjY291bnRzIGNvbnRyaWJ1dGlvbiAgICAgICAgDQogICAgICAgIGhhc0NsYWltZWRFdGhXaGVuRmFpbFttc2cuc2VuZGVyXSA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhhdCB1c2VyIGdvdCBoaXMgRVRIIGJhY2sgICAgICAgICANCiAgICAgICAgaWYgKCFjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzLnNlbmQoY29udHJpYnV0aW9uKSl7ICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgZnVuZCBiYWNrIHRvIGFjY291bnQgICAgICAgICAgDQogICAgICAgICAgRXJyb3JTZW5kaW5nRVRIKGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MsIGNvbnRyaWJ1dGlvbik7ICAgICAgICAgICAvLyBSYWlzZSBldmVudCBpZiBzZW5kIGZhaWxlZCwgcmVzb2x2ZSBtYW51YWxseSAgICAgICAgIA0KICAgICAgICB9ICAgICAgIA0KICAgICAgfSAgICAgICANCiAgICAgIGxhc3RFdGhSZXR1cm5JbmRleCArPSAxOyAgICANCiAgICB9ICAgDQogIH0gICANCg0KICAvKiBPd25lciBzZXRzIG5ldyBhZGRyZXNzIG9mIFN1bkNvbnRyYWN0VG9rZW4gKi8NCiAgZnVuY3Rpb24gY2hhbmdlTXVsdGlzaWdBZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIG9ubHlPd25lciB7ICAgICANCiAgICBtdWx0aXNpZ0FkZHJlc3MgPSBfbmV3QWRkcmVzczsNCiAgfSAgIA0KDQogIC8qIE93bmVyIGNhbiBjbGFpbSByZXNlcnZlZCB0b2tlbnMgb24gdGhlIGVuZCBvZiBjcm93c2FsZSAqLyAgDQogIGZ1bmN0aW9uIGNsYWltQ29yZVRlYW1zVG9rZW5zKGFkZHJlc3MgX3RvKSBvbmx5T3duZXJ7ICAgICANCiAgICBpZiAoIWljb0hhc1N1Y2Vzc2Z1bHlFbmRlZCkgdGhyb3c7IA0KICAgIGlmIChvd25lckhhc0NsYWltZWRUb2tlbnMpIHRocm93Ow0KICAgIA0KICAgIHNuY1Rva2VuQ29udHJhY3QubWludFRva2VucyhfdG8sIHNuY1Rva2VuQ29udHJhY3QudG90YWxTdXBwbHkoKSAqIDI1IC8gMTAwKTsNCiAgICBvd25lckhhc0NsYWltZWRUb2tlbnMgPSB0cnVlOw0KICB9ICAgDQoNCiAgLyogT3duZXIgY2FuIHJlbW92ZSBhbGxvd2FuY2Ugb2YgZGVzaWduYXRlZCBwcmVzYWxlIGNvbnRyaWJ1dG9yICovICANCiAgZnVuY3Rpb24gcmVtb3ZlUHJlc2FsZUNvbnRyaWJ1dG9yKGFkZHJlc3MgX3ByZXNhbGVDb250cmlidXRvcikgb25seU93bmVyIHsgICAgDQogICAgcHJlc2FsZUNvbnRyaWJ1dG9yQWxsb3dhbmNlW19wcmVzYWxlQ29udHJpYnV0b3JdID0gZmFsc2U7ICAgDQogIH0gICANCg0KICAvKiBTZXQgdG9rZW4gY29udHJhY3Qgd2hlcmUgbWludHMgd2lsbCBiZSBkb25lICh0b2tlbnMgd2lsbCBiZSBpc3N1ZWQpKi8gIA0KICBmdW5jdGlvbiBzZXRUb2tlbkNvbnRyYWN0KGFkZHJlc3MgX3NuY1Rva2VuQ29udHJhY3RBZGRyZXNzKSBvbmx5T3duZXIgeyAgICAgDQogICAgc25jVG9rZW5Db250cmFjdCA9IElTbmNUb2tlbihfc25jVG9rZW5Db250cmFjdEFkZHJlc3MpOyAgIA0KICB9ICAgDQoNCiAgLyogV2l0aGRyYXcgZnVuZHMgZnJvbSBjb250cmFjdCAqLyAgDQogIGZ1bmN0aW9uIHdpdGhkcmF3RXRoKCkgb25seU93bmVyeyAgICAgDQogICAgaWYgKHRoaXMuYmFsYW5jZSA9PSAwKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGJhbGFuY2Ugb24gdGhlIGNvbnRyYWN0ICAgICANCiAgICBpZiAodG90YWxFdGhSYWlzZWQgPCBtaW5FdGhUb1JhaXNlKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbWluRXRoVG9SYWlzZSB0cmVzaG9sZCBpcyBleGNlZWRlZCAgICAgDQogICAgICANCiAgICBpZihtdWx0aXNpZ0FkZHJlc3Muc2VuZCh0aGlzLmJhbGFuY2UpKXt9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VuZCB0aGUgY29udHJhY3QncyBiYWxhbmNlIHRvIG11bHRpc2lnIGFkZHJlc3MgICANCiAgfQ0KICANCiAgZnVuY3Rpb24gZW5kSWNvKCkgb25seU93bmVyIHsNCiAgICAgIGlmICh0b3RhbEV0aFJhaXNlZCA8IG1pbkV0aFRvUmFpc2UpIHRocm93Ow0KICAgICAgaWYgKGJsb2NrLm51bWJlciA8IGVuZEJsb2NrKSB0aHJvdzsNCiAgDQogICAgaWNvSGFzU3VjZXNzZnVseUVuZGVkID0gdHJ1ZTsNCiAgICBJQ09FbmRlZFN1Y2Nlc3NmdWx5KGJsb2NrLm51bWJlciwgdG90YWxFdGhSYWlzZWQpOw0KICB9DQoNCiAgLyogV2l0aGRyYXcgcmVtYWluaW5nIGJhbGFuY2UgdG8gbWFudWFsbHkgcmV0dXJuIHdoZXJlIGNvbnRyYWN0IHNlbmQgaGFzIGZhaWxlZCAqLyAgDQogIGZ1bmN0aW9uIHdpdGhkcmF3UmVtYWluaW5nQmFsYW5jZUZvck1hbnVhbFJlY292ZXJ5KCkgb25seU93bmVyeyAgICAgDQogICAgaWYgKHRoaXMuYmFsYW5jZSA9PSAwKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGJhbGFuY2Ugb24gdGhlIGNvbnRyYWN0ICAgIA0KICAgIGlmIChibG9jay5udW1iZXIgPCBlbmRCbG9jaykgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBJQ08gZmFpbGVkICAgIA0KICAgIGlmIChwYXJ0aWNpcGFudEluZGV4W2xhc3RFdGhSZXR1cm5JbmRleF0gIT0gMHgwKSB0aHJvdzsgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhbGwgdGhlIHBhcnRpY2lwYW50cyBoYXZlIGJlZW4gcmVpbWJ1cnNlZCAgICAgDQogICAgaWYgKG11bHRpc2lnQWRkcmVzcy5zZW5kKHRoaXMuYmFsYW5jZSkpe30gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgcmVtYWluZGVyIHNvIGl0IGNhbiBiZSBtYW51YWxseSBwcm9jZXNzZWQgICANCiAgfQ0KDQogIC8vICANCiAgLyogR2V0dGVycyAqLyAgIA0KICAvLyAgDQoNCiAgZnVuY3Rpb24gZ2V0U25jVG9rZW5BZGRyZXNzKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzIF90b2tlbkFkZHJlc3MpeyAgICANCiAgICByZXR1cm4gYWRkcmVzcyhzbmNUb2tlbkNvbnRyYWN0KTsgICANCiAgfSAgIA0KDQogIGZ1bmN0aW9uIGljb0luUHJvZ3Jlc3MoKSBjb25zdGFudCByZXR1cm5zIChib29sIGFuc3dlcil7ICAgIA0KICAgIHJldHVybiBpY29IYXNTdGFydGVkICYmICFpY29IYXNTdWNlc3NmdWx5RW5kZWQ7ICAgDQogIH0gICANCg0KICBmdW5jdGlvbiBpc0FkZHJlc3NBbGxvd2VkSW5QcmVzYWxlKGFkZHJlc3MgX3F1ZXJyeUFkZHJlc3MpIGNvbnN0YW50IHJldHVybnMgKGJvb2wgYW5zd2VyKXsgICAgDQogICAgcmV0dXJuIHByZXNhbGVDb250cmlidXRvckFsbG93YW5jZVtfcXVlcnJ5QWRkcmVzc107ICAgDQogIH0gICANCg0KICBmdW5jdGlvbiBwYXJ0aWNpcGFudENvbnRyaWJ1dGlvbkluRXRoKGFkZHJlc3MgX3F1ZXJyeUFkZHJlc3MpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW5zd2VyKXsgICAgDQogICAgcmV0dXJuIHBhcnRpY2lwYW50Q29udHJpYnV0aW9uW19xdWVycnlBZGRyZXNzXTsgICANCiAgfQ0KICANCiAgZnVuY3Rpb24gZ2V0U25jVG9rZW5Jc3N1YW5jZSh1aW50MjU2IF9ibG9ja051bWJlciwgdWludDI1NiBfZXRoU2VudCkgY29uc3RhbnQgcmV0dXJucyh1aW50KXsNCiAgICAgICAgaWYgKF9ibG9ja051bWJlciA+PSBzdGFydEJsb2NrICYmIF9ibG9ja051bWJlciA8IGJsb2Nrc0luV2VlayArIHN0YXJ0QmxvY2spIHsNCiAgICAgICAgICBpZiAocHJlc2FsZUNvbnRyaWJ1dG9yQWxsb3dhbmNlW21zZy5zZW5kZXJdKSByZXR1cm4gX2V0aFNlbnQgKiAxMTYwMDsNCiAgICAgICAgICBlbHNlIHJldHVybiBfZXRoU2VudCAqIDExNTAwOw0KICAgICAgICB9DQogICAgICAgIGlmIChfYmxvY2tOdW1iZXIgPj0gYmxvY2tzSW5XZWVrICsgc3RhcnRCbG9jayAmJiBfYmxvY2tOdW1iZXIgPCBibG9ja3NJbldlZWsgKiAyICsgc3RhcnRCbG9jaykgcmV0dXJuIF9ldGhTZW50ICogMTEwMDA7DQogICAgICAgIGlmIChfYmxvY2tOdW1iZXIgPj0gYmxvY2tzSW5XZWVrICogMiArIHN0YXJ0QmxvY2sgJiYgX2Jsb2NrTnVtYmVyIDwgYmxvY2tzSW5XZWVrICogMyArIHN0YXJ0QmxvY2spIHJldHVybiBfZXRoU2VudCAqIDEwNTAwOw0KICAgICAgICBpZiAoX2Jsb2NrTnVtYmVyID49IGJsb2Nrc0luV2VlayAqIDMgKyBzdGFydEJsb2NrICYmIF9ibG9ja051bWJlciA8PSBibG9ja3NJbldlZWsgKiA0ICsgc3RhcnRCbG9jaykgcmV0dXJuIF9ldGhTZW50ICogMTAwMDA7DQogICAgfQ0KDQogIC8vDQogIC8qIFRoaXMgcGFydCBpcyBoZXJlIG9ubHkgZm9yIHRlc3RpbmcgYW5kIHdpbGwgbm90IGJlIGluY2x1ZGVkIGludG8gZmluYWwgdmVyc2lvbiAqLw0KICAvLw0KICAvL2Z1bmN0aW9uIGtpbGxDb250cmFjdCgpIG9ubHlPd25lcnsNCiAgLy8gIHNlbGZkZXN0cnVjdChtc2cuc2VuZGVyKTsNCiAgLy99DQp9'