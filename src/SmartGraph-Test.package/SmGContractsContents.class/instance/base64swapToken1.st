base 64 content
base64swapToken1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC42Ow0KY29udHJhY3Qgb3duZWQgew0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQogICAgZnVuY3Rpb24gb3duZWQoKSB7DQogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5T3duZXIgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsNCiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICB9DQp9DQoNCmNvbnRyYWN0IHRva2VuUmVjaXBpZW50IHsgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSk7IH0NCg0KY29udHJhY3QgU3dhcFRva2VuIGlzIG93bmVkIHsNCiAgICAvKiBQdWJsaWMgdmFyaWFibGVzIG9mIHRoZSB0b2tlbiAqLw0KICAgIA0KICAgIHN0cmluZyBwdWJsaWMgc3RhbmRhcmQgPSAnVG9rZW4gMC4xJzsNCg0KICAgIC8vIGJ1eWVyIHRva2Vucw0KICAgIHN0cmluZyBwdWJsaWMgYnV5ZXJUb2tlbk5hbWU7DQogICAgc3RyaW5nIHB1YmxpYyBidXllclN5bWJvbDsNCiAgICB1aW50OCBwdWJsaWMgYnV5ZXJEZWNpbWFsczsNCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbEJ1eWVyU3VwcGx5Ow0KICAgIA0KICAgIC8vIGlzc3VlciB0b2tlbnMNCiAgICBzdHJpbmcgcHVibGljIGlzc3VlclRva2VuTmFtZTsNCiAgICBzdHJpbmcgcHVibGljIGlzc3VlclN5bWJvbDsNCiAgICB1aW50OCBwdWJsaWMgaXNzdWVyRGVjaW1hbHM7DQogICAgdWludDI1NiBwdWJsaWMgdG90YWxJc3N1ZXJTdXBwbHk7DQogICAgDQogICAgLy8gbW9yZSB2YXJpYWJsZXMNCiAgICB1aW50MjU2IHB1YmxpYyBidXlQcmljZTsNCiAgICB1aW50MjU2IHB1YmxpYyBpc3N1ZVByaWNlOw0KICAgIHVpbnQyNTYgcHVibGljIGNQVDsNCiAgICB1aW50MjU2IHB1YmxpYyBwcmVtaXVtOw0KICAgIGJvb2wgcHVibGljIGNyZWRpdFN0YXR1czsNCiAgICBhZGRyZXNzIHB1YmxpYyBwcm9qZWN0X3dhbGxldDsNCiAgICBhZGRyZXNzIHB1YmxpYyBjb2xsZWN0aW9uRnVuZHM7DQogICAgLy91aW50IHB1YmxpYyBzdGFydEJsb2NrOw0KICAgIC8vdWludCBwdWJsaWMgZW5kQmxvY2s7DQogICAgDQogICAgLyogU2V0cyB0aGUgY29uc3RydWN0b3IgdmFyaWFibGVzICovDQogICAgZnVuY3Rpb24gU3dhcFRva2VuKA0KICAgICAgICBzdHJpbmcgX2J1eWVyVG9rZW5OYW1lLA0KICAgICAgICBzdHJpbmcgX2J1eWVyU3ltYm9sLA0KICAgICAgICB1aW50OCBfYnV5ZXJEZWNpbWFscywNCiAgICAgICAgc3RyaW5nIF9pc3N1ZXJUb2tlbk5hbWUsDQogICAgICAgIHN0cmluZyBfaXNzdWVyU3ltYm9sLA0KICAgICAgICB1aW50OCBfaXNzdWVyRGVjaW1hbHMsDQogICAgICAgIGFkZHJlc3MgX2NvbGxlY3Rpb25GdW5kcywNCiAgICAgICAgdWludCBfc3RhcnRCbG9jaywNCiAgICAgICAgdWludCBfZW5kQmxvY2sNCiAgICAgICAgKSB7DQogICAgICAgIGJ1eWVyVG9rZW5OYW1lID0gX2J1eWVyVG9rZW5OYW1lOw0KICAgICAgICBidXllclN5bWJvbCA9IF9idXllclN5bWJvbDsNCiAgICAgICAgYnV5ZXJEZWNpbWFscyA9IF9idXllckRlY2ltYWxzOw0KICAgICAgICBpc3N1ZXJUb2tlbk5hbWUgPSBfaXNzdWVyVG9rZW5OYW1lOw0KICAgICAgICBpc3N1ZXJTeW1ib2wgPSBfaXNzdWVyU3ltYm9sOw0KICAgICAgICBpc3N1ZXJEZWNpbWFscyA9IF9pc3N1ZXJEZWNpbWFsczsNCiAgICAgICAgY29sbGVjdGlvbkZ1bmRzID0gX2NvbGxlY3Rpb25GdW5kczsNCiAgICAgICAgLy9zdGFydEJsb2NrID0gX3N0YXJ0QmxvY2s7DQogICAgICAgIC8vZW5kQmxvY2sgPSBfZW5kQmxvY2s7DQogICAgfQ0KDQogICAgLyogVGhpcyBjcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGJhbGFuY2VzICovDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mQnV5ZXI7DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mSXNzdWVyOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsNCg0KICAgIC8qIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyAqLw0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOw0KDQogICAgLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0IA0KICAgIGZ1bmN0aW9uIHRva2VuKA0KICAgICAgICB1aW50MjU2IGluaXRpYWxTdXBwbHksDQogICAgICAgIHN0cmluZyB0b2tlbk5hbWUsDQogICAgICAgIHVpbnQ4IGRlY2ltYWxVbml0cywNCiAgICAgICAgc3RyaW5nIHRva2VuU3ltYm9sDQogICAgICAgICkgew0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgLy8gR2l2ZSB0aGUgY3JlYXRvciBhbGwgaW5pdGlhbCB0b2tlbnMNCiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbCBzdXBwbHkNCiAgICAgICAgbmFtZSA9IHRva2VuTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3Nlcw0KICAgICAgICBzeW1ib2wgPSB0b2tlblN5bWJvbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBzeW1ib2wgZm9yIGRpc3BsYXkgcHVycG9zZXMNCiAgICAgICAgZGVjaW1hbHMgPSBkZWNpbWFsVW5pdHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3Nlcw0KICAgIH0NCiAgICAqLw0KICAgIA0KICAgIC8qIENoZWNrIGlmIGNvbnRyYWN0IGhhcyBzdGFydGVkICovDQogICAgLypmdW5jdGlvbiBoYXNfY29udHJhY3Rfc3RhcnRlZCgpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgew0KCSAgICByZXR1cm4gYmxvY2subnVtYmVyID49IHN0YXJ0QmxvY2s7DQogICAgfQ0KICAgIA0KICAgIC8qIENoZWNrIGlmIGNvbnRyYWN0IGhhcyBlbmRlZCAqLw0KICAgIC8qZnVuY3Rpb24gaGFzX2NvbnRyYWN0X2VuZGVkKCkgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiBibG9jay5udW1iZXIgPiBlbmRCbG9jazsNCiAgICB9Ki8NCiAgICANCiAgICAvKiBTZXQgYSBwcm9qZWN0IFdhbGxldCAqLw0KICAgIGZ1bmN0aW9uIGRlZmluZVByb2plY3RXYWxsZXQoYWRkcmVzcyB0YXJnZXQpIG9ubHlPd25lciB7DQogICAgICAgIHByb2plY3Rfd2FsbGV0ID0gdGFyZ2V0Ow0KICAgIH0NCiAgICANCiAgICAvKiBNaW50IGNvaW5zICovDQogICAgDQogICAgLy8gYnV5ZXIgdG9rZW5zDQogICAgZnVuY3Rpb24gbWludEJ1eWVyVG9rZW4oYWRkcmVzcyB0YXJnZXQsIHVpbnQyNTYgbWludGVkQW1vdW50KSBvbmx5T3duZXIgew0KICAgICAgICBiYWxhbmNlT2ZCdXllclt0YXJnZXRdICs9IG1pbnRlZEFtb3VudDsNCiAgICAgICAgdG90YWxCdXllclN1cHBseSArPSBtaW50ZWRBbW91bnQ7DQogICAgICAgIFRyYW5zZmVyKDAsIHRoaXMsIG1pbnRlZEFtb3VudCk7DQogICAgICAgIFRyYW5zZmVyKHRoaXMsIHRhcmdldCwgbWludGVkQW1vdW50KTsNCiAgICB9DQogICAgDQogICAgLy8gaXNzdWVyIHRva2Vucw0KICAgIGZ1bmN0aW9uIG1pbnRJc3N1ZXJUb2tlbihhZGRyZXNzIHRhcmdldCwgdWludDI1NiBtaW50ZWRBbW91bnQpIG9ubHlPd25lciB7DQogICAgICAgIGJhbGFuY2VPZklzc3Vlclt0YXJnZXRdICs9IG1pbnRlZEFtb3VudDsNCiAgICAgICAgdG90YWxJc3N1ZXJTdXBwbHkgKz0gbWludGVkQW1vdW50Ow0KICAgICAgICBUcmFuc2ZlcigwLCB0aGlzLCBtaW50ZWRBbW91bnQpOw0KICAgICAgICBUcmFuc2Zlcih0aGlzLCB0YXJnZXQsIG1pbnRlZEFtb3VudCk7DQogICAgfQ0KICAgIA0KICAgIC8qIERpc3Ryb3kgY29pbnMgKi8NCiAgICANCiAgICAvLyBEaXN0cm95IGJ1eWVyIGNvaW5zIGZvciBzYWxlIGluIGNvbnRyYWN0IA0KICAgIGZ1bmN0aW9uIGRpc3Ryb3lCdXllclRva2VuKHVpbnQyNTYgYnVybkFtb3VudCkgb25seU93bmVyIHsNCiAgICAgICAgYmFsYW5jZU9mQnV5ZXJbdGhpc10gLT0gYnVybkFtb3VudDsNCiAgICAgICAgdG90YWxCdXllclN1cHBseSAtPSBidXJuQW1vdW50Ow0KICAgIH0NCiAgICANCiAgICAvLyBEaXN0cm95IGlzc3VlciBjb2lucyBmb3Igc2FsZSBpbiBjb250cmFjdA0KICAgIGZ1bmN0aW9uIGRpc3Ryb3lJc3N1ZXJUb2tlbih1aW50MjU2IGJ1cm5BbW91bnQpIG9ubHlPd25lciB7DQogICAgICAgIGJhbGFuY2VPZklzc3Vlclt0aGlzXSAtPSBidXJuQW1vdW50Ow0KICAgICAgICB0b3RhbElzc3VlclN1cHBseSAtPSBidXJuQW1vdW50Ow0KICAgIH0NCg0KICAgIC8qIFNlbmQgY29pbnMgKi8NCiAgICANCiAgICAvLyBzZW5kIGJ1eWVyIGNvaW5zDQogICAgZnVuY3Rpb24gdHJhbnNmZXJCdXllcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VPZkJ1eWVyW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB0aHJvdzsgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaA0KICAgICAgICBpZiAoYmFsYW5jZU9mQnV5ZXJbX3RvXSArIF92YWx1ZSA8IGJhbGFuY2VPZkJ1eWVyW190b10pIHRocm93OyAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzDQogICAgICAgIGJhbGFuY2VPZkJ1eWVyW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXINCiAgICAgICAgYmFsYW5jZU9mQnV5ZXJbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UNCiAgICB9DQogICAgDQogICAgLy8gc2VuZCBpc3N1ZXIgY29pbnMNCiAgICBmdW5jdGlvbiB0cmFuc2Zlcklzc3VlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgew0KICAgICAgICBpZiAoYmFsYW5jZU9mSXNzdWVyW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB0aHJvdzsNCiAgICAgICAgaWYgKGJhbGFuY2VPZklzc3VlcltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mSXNzdWVyW190b10pIHRocm93Ow0KICAgICAgICBiYWxhbmNlT2ZJc3N1ZXJbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICBiYWxhbmNlT2ZJc3N1ZXJbX3RvXSArPSBfdmFsdWU7DQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICB9DQogICAgDQogICAgLyogQWxsb3cgYW5vdGhlciBjb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBpbiB5b3VyIGJlaGFsZiAqLw0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpDQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KICAgICAgICB0b2tlblJlY2lwaWVudCBzcGVuZGVyID0gdG9rZW5SZWNpcGllbnQoX3NwZW5kZXIpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKiBBcHByb3ZlIGFuZCB0aGVuIGNvbXVuaWNhdGUgdGhlIGFwcHJvdmVkIGNvbnRyYWN0IGluIGEgc2luZ2xlIHR4ICovDQogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpDQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgeyAgICANCiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsNCiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsNCiAgICAgICAgICAgIHNwZW5kZXIucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qIEEgY29udHJhY3QgYXR0ZW1wdHMgdG8gZ2V0IHRoZSBjb2lucyANCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsNCiAgICAgICAgaWYgKGJhbGFuY2VPZkJ1eWVyW19mcm9tXSA8IF92YWx1ZSkgdGhyb3c7ICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gNCiAgICAgICAgaWYgKGJhbGFuY2VPZkJ1eWVyW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZCdXllcltfdG9dKSB0aHJvdzsgIC8vIENoZWNrIGZvciBvdmVyZmxvd3MNCiAgICAgICAgaWYgKF92YWx1ZSA+IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pIHRocm93OyAgIC8vIENoZWNrIGFsbG93YW5jZQ0KICAgICAgICBiYWxhbmNlT2ZCdXllcltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyDQogICAgICAgIGJhbGFuY2VPZkJ1eWVyW190b10gKz0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudA0KICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgICovDQogICAgDQogICAgLyogU2V0IHRva2VuIHByaWNlICovDQogICAgZnVuY3Rpb24gc2V0UHJpY2VzKHVpbnQyNTYgbmV3QnV5UHJpY2UsIHVpbnQyNTYgbmV3SXNzdWVQcmljZSwgdWludDI1NiBjb3ZlcmFnZVBlclRva2VuKSBvbmx5T3duZXIgew0KICAgICAgICBidXlQcmljZSA9IG5ld0J1eVByaWNlOw0KICAgICAgICBpc3N1ZVByaWNlID0gbmV3SXNzdWVQcmljZTsNCiAgICAgICAgY1BUID0gY292ZXJhZ2VQZXJUb2tlbjsNCiAgICB9DQoNCiAgICAvKiBCdXkgdG9rZW5zICovDQogICAgDQogICAgLy8gYnV5IGJ1eWVyIHRva2Vucw0KICAgIGZ1bmN0aW9uIGJ1eUJ1eWVyVG9rZW5zKCkgcGF5YWJsZSB7DQogICAgICAgIC8vaWYoIWhhc19jb250cmFjdF9zdGFydGVkKCkpIHRocm93OyAgICAgICAgICAgICAgICAgIC8vIGNoZWNrcyBpZiB0aGUgY29udHJhY3QgaGFzIHN0YXJ0ZWQNCiAgICAgICAgLy9pZihoYXNfY29udHJhY3RfZW5kZWQoKSkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2tzIGlmIHRoZSBjb250cmFjdCBoYXMgZW5kZWQgDQogICAgICAgIHVpbnQgYW1vdW50ID0gbXNnLnZhbHVlIC8gYnV5UHJpY2U7ICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZXMgdGhlIGFtb3VudA0KICAgICAgICBpZiAoYmFsYW5jZU9mQnV5ZXJbdGhpc10gPCBhbW91bnQpIHRocm93OyAgICAgICAgICAgICAgIC8vIGNoZWNrcyBpZiBpdCBoYXMgZW5vdWdoIHRvIHNlbGwNCiAgICAgICAgYmFsYW5jZU9mQnV5ZXJbbXNnLnNlbmRlcl0gKz0gYW1vdW50OyAgICAgICAgICAgICAgICAgICAvLyBhZGRzIHRoZSBhbW91bnQgdG8gYnV5ZXIncyBiYWxhbmNlDQogICAgICAgIGJhbGFuY2VPZkJ1eWVyW3RoaXNdIC09IGFtb3VudDsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VidHJhY3RzIGFtb3VudCBmcm9tIHNlbGxlcidzIGJhbGFuY2UNCiAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgYW1vdW50KTsgICAgICAgICAgICAgICAgLy8gZXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIHRoZSBjaGFuZ2UNCiAgICB9DQogICAgDQogICAgLy8gYnV5IGlzc3VlciB0b2tlbnMNCiAgICBmdW5jdGlvbiBidXlJc3N1ZXJUb2tlbnMoKSBwYXlhYmxlIHsNCiAgICAgICAgdWludCBhbW91bnQgPSBtc2cudmFsdWUgLyBpc3N1ZVByaWNlOw0KICAgICAgICBpZiAoYmFsYW5jZU9mSXNzdWVyW3RoaXNdIDwgYW1vdW50KSB0aHJvdzsNCiAgICAgICAgYmFsYW5jZU9mSXNzdWVyW21zZy5zZW5kZXJdICs9IGFtb3VudDsNCiAgICAgICAgYmFsYW5jZU9mSXNzdWVyW3RoaXNdIC09IGFtb3VudDsNCiAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgYW1vdW50KTsNCiAgICB9DQogICAgDQogICAgLyogQ3JlZGl0IFN0YXR1cyBFdmVudCAqLw0KICAgIGZ1bmN0aW9uIHNldENyZWRpdFN0YXR1cyhib29sIF9zdGF0dXMpIG9ubHlPd25lciB7DQogICAgICAgIGNyZWRpdFN0YXR1cyA9IF9zdGF0dXM7DQogICAgfQ0KDQogICAgLyogQ29sbGVjdGlvbiAqLw0KICAgIA0KICAgIC8vIGJ1eWVyIGNvbGxlY3Rpb24gc2FsZQ0KICAgIGZ1bmN0aW9uIHNlbGxCdXllclRva2Vucyh1aW50IGFtb3VudCkgcmV0dXJucyAodWludCByZXZlbnVlKXsNCiAgICAgICAgaWYgKGNyZWRpdFN0YXR1cyA9PSBmYWxzZSkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVja3MgaWYgYnV5ZXIgaXMgZWxpZ2libGUgZm9yIGEgY2xhaW0NCiAgICAgICAgaWYgKGJhbGFuY2VPZkJ1eWVyW21zZy5zZW5kZXJdIDwgYW1vdW50ICkgdGhyb3c7ICAgICAgICAvLyBjaGVja3MgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoIHRvIHNlbGwNCiAgICAgICAgYmFsYW5jZU9mQnV5ZXJbdGhpc10gKz0gYW1vdW50OyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGRzIHRoZSBhbW91bnQgdG8gb3duZXIncyBiYWxhbmNlDQogICAgICAgIGJhbGFuY2VPZkJ1eWVyW21zZy5zZW5kZXJdIC09IGFtb3VudDsgICAgICAgICAgICAgICAgICAgLy8gc3VidHJhY3RzIHRoZSBhbW91bnQgZnJvbSBzZWxsZXIncyBiYWxhbmNlDQogICAgICAgIHJldmVudWUgPSBhbW91bnQgKiBjUFQ7DQogICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKHJldmVudWUpKSB7ICAgICAgICAgICAgICAgICAgIC8vIHNlbmRzIGV0aGVyIHRvIHRoZSBzZWxsZXI6IGl0J3MgaW1wb3J0YW50DQogICAgICAgICAgICB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIGRvIHRoaXMgbGFzdCB0byBwcmV2ZW50IHJlY3Vyc2lvbiBhdHRhY2tzDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCB0aGlzLCBhbW91bnQpOyAgICAgICAgICAgICAvLyBleGVjdXRlcyBhbiBldmVudCByZWZsZWN0aW5nIG9uIHRoZSBjaGFuZ2UNCiAgICAgICAgICAgIHJldHVybiByZXZlbnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuZHMgZnVuY3Rpb24gYW5kIHJldHVybnMNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLyBnZXQgcHJlbWl1bSwgbm90ZSBub3QgdGVzdGVkIHlldA0KICAgIGZ1bmN0aW9uIGdldFByZW1pdW0oKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcHJlbWl1bSkgew0KICAgICAgICBwcmVtaXVtID0gKGlzc3VlUHJpY2UgLSBjUFQpICogOTgvMTAwOw0KICAgICAgICByZXR1cm4gcHJlbWl1bTsNCiAgICB9DQogICAgDQogICAgLy8gaXNzdWVyIGNvbGxlY3Rpb24gc2FsZQ0KICAgIGZ1bmN0aW9uIHNlbGxJc3N1ZXJUb2tlbnModWludCBhbW91bnQpIHJldHVybnMgKHVpbnQgcmV2ZW51ZSl7DQogICAgICAgIGlmIChiYWxhbmNlT2ZJc3N1ZXJbbXNnLnNlbmRlcl0gPCBhbW91bnQgKSB0aHJvdzsNCiAgICAgICAgYmFsYW5jZU9mSXNzdWVyW3RoaXNdICs9IGFtb3VudDsNCiAgICAgICAgYmFsYW5jZU9mSXNzdWVyW21zZy5zZW5kZXJdIC09IGFtb3VudDsNCiAgICAgICAgcmV2ZW51ZSA9IGFtb3VudCAqIGdldFByZW1pdW0oKTsNCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQocmV2ZW51ZSkpIHsNCiAgICAgICAgICAgIHRocm93Ow0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgdGhpcywgYW1vdW50KTsNCiAgICAgICAgICAgIHJldHVybiByZXZlbnVlOw0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8qIEFmdGVyIGNvbnRyYWN0IGVuZHMgbW92ZSBmdW5kcyAqLw0KICAgIGZ1bmN0aW9uIG1vdmVGdW5kcygpIG9ubHlPd25lciB7DQogICAgICAgIC8vaWYgKCFoYXNfY29udHJhY3RfZW5kZWQoKSkgdGhyb3c7DQogICAgICAgIGlmICghcHJvamVjdF93YWxsZXQuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsNCiAgICB9DQoNCiAgICAvKiBUaGlzIHVubmFtZWQgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW5ldmVyIHNvbWVvbmUgdHJpZXMgdG8gc2VuZCBldGhlciB0byBpdCAqLw0KICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdGhyb3c7ICAgICAvLyBQcmV2ZW50cyBhY2NpZGVudGFsIHNlbmRpbmcgb2YgZXRoZXINCiAgICB9DQp9'