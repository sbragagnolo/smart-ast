base 64 content
base64tIXGeneration
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KDQovKioNCiAqIEB0aXRsZSBFUkMyMEJhc2ljDQogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UNCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICovDQpjb250cmFjdCBFUkMyMEJhc2ljIHsNCiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7DQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7DQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpOw0KICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsNCn0NCg0KLyoqDQogKiBAdGl0bGUgU2FmZU1hdGgNCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yDQogKi8NCmxpYnJhcnkgU2FmZU1hdGggew0KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICB1aW50MjU2IGMgPSBhICogYjsNCiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwDQogICAgdWludDI1NiBjID0gYSAvIGI7DQogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIGFzc2VydChiIDw9IGEpOw0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nikgew0KICAgIHVpbnQyNTYgYyA9IGEgKyBiOw0KICAgIGFzc2VydChjID49IGEpOw0KICAgIHJldHVybiBjOw0KICB9DQp9DQoNCg0KLyoqDQogKiBAdGl0bGUgQmFzaWMgdG9rZW4NCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuIA0KICovDQpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgew0KICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsNCg0KICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7DQoNCiAgLyoqICAgDQogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcw0KICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uDQogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLg0KICAqLw0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsNCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOw0KICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOw0KICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgfQ0KDQogIC8qKg0KICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuDQogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIA0KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuDQogICovDQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7DQogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07DQogIH0NCg0KfQ0KDQovKioNCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UNCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICovDQpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsNCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7DQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpOw0KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7DQogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOw0KfQ0KDQoNCi8qKg0KICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuDQogKg0KICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uDQogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbA0KICovDQpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsNCg0KICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7DQoNCg0KICAvKioNCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyDQogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20NCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvDQogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQNCiAgICovDQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsNCiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOw0KDQogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0DQogICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93Ow0KDQogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7DQogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOw0KICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsNCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICB9DQoNCiAgLyoqDQogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuDQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4NCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4NCiAgICovDQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHsNCg0KICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgDQogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QNCiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToNCiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkNCiAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93Ow0KDQogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLg0KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuDQogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLg0KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuDQogICAqLw0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7DQogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogIH0NCg0KfQ0KDQoNCi8qKg0KICogQHRpdGxlIEJsb2NrdGl4IFRva2VuIEdlbmVyYXRpb24gRXZlbnQgY29udHJhY3QNCiAqDQogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgQkFUOiBodHRwczovL2dpdGh1Yi5jb20vYnJhdmUtaW50bC9iYXNpYy1hdHRlbnRpb24tdG9rZW4tY3Jvd2RzYWxlL2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9CQVRva2VuLnNvbA0KICovDQpjb250cmFjdCBUSVhHZW5lcmF0aW9uIGlzIFN0YW5kYXJkVG9rZW4gew0KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJCbG9ja3RpeCBUb2tlbiI7DQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiVElYIjsNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4Ow0KICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICIxLjAiOw0KDQogICAgLy8gY3Jvd2RzYWxlIHBhcmFtZXRlcnMNCiAgICBib29sIHB1YmxpYyBpc0ZpbmFsaXplZDsgICAgICAgICAgICAgIC8vIHN3aXRjaGVkIHRvIHRydWUgaW4gb3BlcmF0aW9uYWwgc3RhdGUNCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWUgPSAwOyAgICAgICAgIC8vIGNyb3dkc2FsZSBzdGFydCB0aW1lIChpbiBzZWNvbmRzKQ0KICAgIHVpbnQyNTYgcHVibGljIGVuZFRpbWUgPSAwOyAgICAgICAgICAgLy8gY3Jvd2RzYWxlIGVuZCB0aW1lIChpbiBzZWNvbmRzKQ0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuR2VuZXJhdGlvbkNhcCA9ICA2Mi41ICogKDEwKio2KSAqIDEwKipkZWNpbWFsczsgLy8gNjIuNW0gVElYDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdDJ0b2tlbkV4Y2hhbmdlUmF0ZSA9IDEyNTA7DQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdDN0b2tlbkV4Y2hhbmdlUmF0ZSA9IDEwNDE7DQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdGl4RnVuZCA9IHRva2VuR2VuZXJhdGlvbkNhcCAvIDEwMCAqIDI0OyAgICAgLy8gMjQlDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdGl4Rm91bmRlcnMgPSB0b2tlbkdlbmVyYXRpb25DYXAgLyAxMDAgKiAxMDsgLy8gMTAlDQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdGl4UHJvbW8gPSB0b2tlbkdlbmVyYXRpb25DYXAgLyAxMDAgKiAyOyAgICAgLy8gMiUNCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0aXhQcmVzYWxlID0gMjkuMTYgKiAoMTAqKjYpICogMTAqKmRlY2ltYWxzOyAgICAvLyAyOS4xNm0gVElYIFByZXNhbGUNCg0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGZpbmFsVGllciA9IDUyLjUgKiAoMTAqKjYpICogMTAqKmRlY2ltYWxzOyAvLyBsYXN0IDEwbQ0KICAgIHVpbnQyNTYgcHVibGljIHRva2VuRXhjaGFuZ2VSYXRlID0gdDJ0b2tlbkV4Y2hhbmdlUmF0ZTsNCg0KICAgIC8vIGFkZHJlc3Nlcw0KICAgIGFkZHJlc3MgcHVibGljIGV0aEZ1bmREZXBvc2l0OyAgICAgIC8vIGRlcG9zaXQgYWRkcmVzcyBmb3IgRVRIIGZvciBCbG9ja3RpeA0KICAgIGFkZHJlc3MgcHVibGljIHRpeEZ1bmREZXBvc2l0OyAgICAgIC8vIGRlcG9zaXQgYWRkcmVzcyBmb3IgVElYIGZvciBCbG9ja3RpeA0KICAgIGFkZHJlc3MgcHVibGljIHRpeEZvdW5kZXJzRGVwb3NpdDsgIC8vIGRlcG9zaXQgYWRkcmVzcyBmb3IgVElYIGZvciBGb3VuZGVycw0KICAgIGFkZHJlc3MgcHVibGljIHRpeFByb21vRGVwb3NpdDsgICAgIC8vIGRlcG9zaXQgYWRkcmVzcyBmb3IgVElYIGZvciBQcm9tb3Rpb24NCiAgICBhZGRyZXNzIHB1YmxpYyB0aXhQcmVzYWxlRGVwb3NpdDsgICAvLyBkZXBvc2l0IGFkZHJlc3MgZm9yIFRJWCBmb3IgUHJlc2FsZQ0KDQogICAgLyoqDQogICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBmaW5hbGl6ZWQNCiAgICAqLw0KICAgIG1vZGlmaWVyIHdoZW5GaW5hbGl6ZWQoKSB7DQogICAgICAgIGlmICghaXNGaW5hbGl6ZWQpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgTk9UIGZpbmFsaXplZA0KICAgICovDQogICAgbW9kaWZpZXIgd2hlbk5vdEZpbmFsaXplZCgpIHsNCiAgICAgICAgaWYgKGlzRmluYWxpemVkKSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvLyBlbnN1cmVzIHRoYXQgdGhlIGN1cnJlbnQgdGltZSBpcyBiZXR3ZWVuIF9zdGFydFRpbWUgKGluY2x1c2l2ZSkgYW5kIF9lbmRUaW1lIChleGNsdXNpdmUpDQogICAgbW9kaWZpZXIgYmV0d2Vlbih1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgX2VuZFRpbWUpIHsNCiAgICAgICAgYXNzZXJ0KG5vdyA+PSBfc3RhcnRUaW1lICYmIG5vdyA8IF9lbmRUaW1lKTsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvLyB2ZXJpZmllcyB0aGF0IGFuIGFtb3VudCBpcyBncmVhdGVyIHRoYW4gemVybw0KICAgIG1vZGlmaWVyIHZhbGlkQW1vdW50KCkgew0KICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOw0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vIHZhbGlkYXRlcyBhbiBhZGRyZXNzIC0gY3VycmVudGx5IG9ubHkgY2hlY2tzIHRoYXQgaXQgaXNuJ3QgbnVsbA0KICAgIG1vZGlmaWVyIHZhbGlkQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSB7DQogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gMHgwKTsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvLyBldmVudHMNCiAgICBldmVudCBDcmVhdGVUSVgoYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOw0KDQogICAgLyoqDQogICAgKiBAZGV2IENvbnRydWN0b3IgdGhhdCBhc3NpZ25zIGFsbCBwcmVzYWxlIHRva2VucyBhbmQgc3RhcnRzIHRoZSBzYWxlDQogICAgKi8NCiAgICBmdW5jdGlvbiBUSVhHZW5lcmF0aW9uKA0KICAgICAgICBhZGRyZXNzIF9ldGhGdW5kRGVwb3NpdCwNCiAgICAgICAgYWRkcmVzcyBfdGl4RnVuZERlcG9zaXQsDQogICAgICAgIGFkZHJlc3MgX3RpeEZvdW5kZXJzRGVwb3NpdCwNCiAgICAgICAgYWRkcmVzcyBfdGl4UHJvbW9EZXBvc2l0LA0KICAgICAgICBhZGRyZXNzIF90aXhQcmVzYWxlRGVwb3NpdCwNCiAgICAgICAgdWludDI1NiBfc3RhcnRUaW1lLA0KICAgICAgICB1aW50MjU2IF9lbmRUaW1lKQ0KICAgIHsNCiAgICAgICAgaXNGaW5hbGl6ZWQgPSBmYWxzZTsgLy8gSW5pdGlhbGl6ZSBwcmVzYWxlDQoNCiAgICAgICAgZXRoRnVuZERlcG9zaXQgPSBfZXRoRnVuZERlcG9zaXQ7DQogICAgICAgIHRpeEZ1bmREZXBvc2l0ID0gX3RpeEZ1bmREZXBvc2l0Ow0KICAgICAgICB0aXhGb3VuZGVyc0RlcG9zaXQgPSBfdGl4Rm91bmRlcnNEZXBvc2l0Ow0KICAgICAgICB0aXhQcm9tb0RlcG9zaXQgPSBfdGl4UHJvbW9EZXBvc2l0Ow0KICAgICAgICB0aXhQcmVzYWxlRGVwb3NpdCA9IF90aXhQcmVzYWxlRGVwb3NpdDsNCg0KICAgICAgICBzdGFydFRpbWUgPSBfc3RhcnRUaW1lOw0KICAgICAgICBlbmRUaW1lID0gX2VuZFRpbWU7DQoNCiAgICAgICAgLy8gQWxsb2NhdGUgcHJlc2FsZSBhbmQgZm91bmRlcnMgdGl4DQogICAgICAgIHRvdGFsU3VwcGx5ID0gdGl4RnVuZDsNCiAgICAgICAgdG90YWxTdXBwbHkgKz0gdGl4Rm91bmRlcnM7DQogICAgICAgIHRvdGFsU3VwcGx5ICs9IHRpeFByb21vOw0KICAgICAgICB0b3RhbFN1cHBseSArPSB0aXhQcmVzYWxlOw0KICAgICAgICBiYWxhbmNlc1t0aXhGdW5kRGVwb3NpdF0gPSB0aXhGdW5kOyAgICAgICAgIC8vIERlcG9zaXQgVElYIGZvciBCbG9ja3RpeA0KICAgICAgICBiYWxhbmNlc1t0aXhGb3VuZGVyc0RlcG9zaXRdID0gdGl4Rm91bmRlcnM7IC8vIERlcG9zaXQgVElYIGZvciBGb3VuZGVycw0KICAgICAgICBiYWxhbmNlc1t0aXhQcm9tb0RlcG9zaXRdID0gdGl4UHJvbW87ICAgICAgIC8vIERlcG9zaXQgVElYIGZvciBQcm9tb3Rpb24NCiAgICAgICAgYmFsYW5jZXNbdGl4UHJlc2FsZURlcG9zaXRdID0gdGl4UHJlc2FsZTsgICAvLyBEZXBvc2l0IFRJWCBmb3IgUHJlc2FsZQ0KICAgICAgICBDcmVhdGVUSVgodGl4RnVuZERlcG9zaXQsIHRpeEZ1bmQpOyAgICAgICAgIC8vIGxvZ3MgVElYIGZvciBCbG9ja3RpeA0KICAgICAgICBDcmVhdGVUSVgodGl4Rm91bmRlcnNEZXBvc2l0LCB0aXhGb3VuZGVycyk7IC8vIGxvZ3MgVElYIGZvciBGb3VuZGVycw0KICAgICAgICBDcmVhdGVUSVgodGl4UHJvbW9EZXBvc2l0LCB0aXhQcm9tbyk7ICAgICAgIC8vIGxvZ3MgVElYIGZvciBQcm9tb3Rpb24NCiAgICAgICAgQ3JlYXRlVElYKHRpeFByZXNhbGVEZXBvc2l0LCB0aXhQcmVzYWxlKTsgICAvLyBsb2dzIFRJWCBmb3IgUHJlc2FsZQ0KDQogICAgfQ0KDQogICAgLyoqDQogICAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzDQogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLg0KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLg0KICAgICoNCiAgICAqIGNhbiBvbmx5IGJlIGNhbGxlZCBkdXJpbmcgb25jZSB0aGUgdGhlIGZ1bmRpbmcgcGVyaW9kIGhhcyBiZWVuIGZpbmFsaXplZA0KICAgICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB3aGVuRmluYWxpemVkIHsNCiAgICAgICAgc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyDQogICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tDQogICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8NCiAgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQNCiAgICAqDQogICAgKiBjYW4gb25seSBiZSBjYWxsZWQgZHVyaW5nIG9uY2UgdGhlIHRoZSBmdW5kaW5nIHBlcmlvZCBoYXMgYmVlbiBmaW5hbGl6ZWQNCiAgICAqLw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHdoZW5GaW5hbGl6ZWQgew0KICAgICAgICBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAZGV2IEFjY2VwdHMgRVRIIGFuZCBnZW5lcmF0ZXMgVElYIHRva2Vucw0KICAgICAqDQogICAgICogY2FuIG9ubHkgYmUgY2FsbGVkIGR1cmluZyB0aGUgY3Jvd2RzYWxlDQogICAgICovDQogICAgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbnMoKQ0KICAgICAgICBwdWJsaWMNCiAgICAgICAgcGF5YWJsZQ0KICAgICAgICB3aGVuTm90RmluYWxpemVkDQogICAgICAgIGJldHdlZW4oc3RhcnRUaW1lLCBlbmRUaW1lKQ0KICAgICAgICB2YWxpZEFtb3VudA0KICAgIHsNCiAgICAgICAgaWYgKHRvdGFsU3VwcGx5ID09IHRva2VuR2VuZXJhdGlvbkNhcCkNCiAgICAgICAgICAgIHRocm93Ow0KDQogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gU2FmZU1hdGgubXVsKG1zZy52YWx1ZSwgdG9rZW5FeGNoYW5nZVJhdGUpOyAvLyBjaGVjayB0aGF0IHdlJ3JlIG5vdCBvdmVyIHRvdGFscw0KICAgICAgICB1aW50MjU2IGNoZWNrZWRTdXBwbHkgPSBTYWZlTWF0aC5hZGQodG90YWxTdXBwbHksIHRva2Vucyk7DQogICAgICAgIHVpbnQyNTYgZGlmZjsNCg0KICAgICAgICAvLyBzd2l0Y2ggdG8gbmV4dCB0aWVyDQogICAgICAgIGlmICh0b2tlbkV4Y2hhbmdlUmF0ZSAhPSB0M3Rva2VuRXhjaGFuZ2VSYXRlICYmIGZpbmFsVGllciA8IGNoZWNrZWRTdXBwbHkpDQogICAgICAgIHsNCiAgICAgICAgICAgIGRpZmYgPSBTYWZlTWF0aC5zdWIoY2hlY2tlZFN1cHBseSwgZmluYWxUaWVyKTsNCiAgICAgICAgICAgIHRva2VucyA9IFNhZmVNYXRoLnN1Yih0b2tlbnMsIGRpZmYpOw0KICAgICAgICAgICAgdWludDI1NiBldGhkaWZmID0gU2FmZU1hdGguZGl2KGRpZmYsIHQydG9rZW5FeGNoYW5nZVJhdGUpOw0KICAgICAgICAgICAgdG9rZW5FeGNoYW5nZVJhdGUgPSB0M3Rva2VuRXhjaGFuZ2VSYXRlOw0KICAgICAgICAgICAgdG9rZW5zID0gU2FmZU1hdGguYWRkKHRva2VucywgU2FmZU1hdGgubXVsKGV0aGRpZmYsIHRva2VuRXhjaGFuZ2VSYXRlKSk7DQogICAgICAgICAgICBjaGVja2VkU3VwcGx5ID0gU2FmZU1hdGguYWRkKHRvdGFsU3VwcGx5LCB0b2tlbnMpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gcmV0dXJuIG1vbmV5IGlmIHNvbWV0aGluZyBnb2VzIHdyb25nDQogICAgICAgIGlmICh0b2tlbkdlbmVyYXRpb25DYXAgPCBjaGVja2VkU3VwcGx5KQ0KICAgICAgICB7DQogICAgICAgICAgICBkaWZmID0gU2FmZU1hdGguc3ViKGNoZWNrZWRTdXBwbHksIHRva2VuR2VuZXJhdGlvbkNhcCk7DQogICAgICAgICAgICBpZiAoZGlmZiA+IDEwKioxMikNCiAgICAgICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgICAgIGNoZWNrZWRTdXBwbHkgPSBTYWZlTWF0aC5zdWIoY2hlY2tlZFN1cHBseSwgZGlmZik7DQogICAgICAgICAgICB0b2tlbnMgPSBTYWZlTWF0aC5zdWIodG9rZW5zLCBkaWZmKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRvdGFsU3VwcGx5ID0gY2hlY2tlZFN1cHBseTsNCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gdG9rZW5zOw0KICAgICAgICBDcmVhdGVUSVgobXNnLnNlbmRlciwgdG9rZW5zKTsgLy8gbG9ncyB0b2tlbiBjcmVhdGlvbg0KICAgIH0NCg0KICAgIC8qKg0KICAgICogQGRldiBFbmRzIHRoZSBmdW5kaW5nIHBlcmlvZCBhbmQgc2VuZHMgdGhlIEVUSCBob21lDQogICAgKi8NCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpDQogICAgICAgIGV4dGVybmFsDQogICAgICAgIHdoZW5Ob3RGaW5hbGl6ZWQNCiAgICB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGV0aEZ1bmREZXBvc2l0KSB0aHJvdzsgLy8gbG9ja3MgZmluYWxpemUgdG8gdGhlIHVsdGltYXRlIEVUSCBvd25lcg0KICAgICAgICBpZiAobm93IDw9IGVuZFRpbWUgJiYgdG90YWxTdXBwbHkgIT0gdG9rZW5HZW5lcmF0aW9uQ2FwKSB0aHJvdzsNCiAgICAgICAgLy8gbW92ZSB0byBvcGVyYXRpb25hbA0KICAgICAgICBpc0ZpbmFsaXplZCA9IHRydWU7DQogICAgICAgIGlmKCFldGhGdW5kRGVwb3NpdC5zZW5kKHRoaXMuYmFsYW5jZSkpIHRocm93OyAgLy8gc2VuZCB0aGUgZXRoIHRvIEJsb2NrdGl4DQogICAgfQ0KDQogICAgLy8gZmFsbGJhY2sNCiAgICBmdW5jdGlvbigpDQogICAgICAgIHBheWFibGUNCiAgICAgICAgd2hlbk5vdEZpbmFsaXplZA0KICAgIHsNCiAgICAgICAgZ2VuZXJhdGVUb2tlbnMoKTsNCiAgICB9DQp9'