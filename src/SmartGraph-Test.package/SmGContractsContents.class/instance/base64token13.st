base 64 content
base64token13
	^'Y29udHJhY3QgRVJDMjBCYXNpYyB7DQogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5Ow0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOw0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsNCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7DQp9DQoNCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgew0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7DQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKTsNCiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7DQp9DQoNCmNvbnRyYWN0IE93biB7DQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQoNCiAgICBmdW5jdGlvbiBPd24oKSB7DQogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5T3duZXIgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsNCiAgICAgICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsNCiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCmNvbnRyYWN0IFBhdXNlIGlzIE93biB7DQogIGJvb2wgcHVibGljIHN0b3BwZWQ7DQoNCiAgbW9kaWZpZXIgc3RvcEluRW1lcmdlbmN5IHsNCiAgICBpZiAoc3RvcHBlZCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICAgIF87DQogIH0NCiAgDQogIG1vZGlmaWVyIG9ubHlJbkVtZXJnZW5jeSB7DQogICAgaWYgKCFzdG9wcGVkKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogICAgXzsNCiAgfQ0KDQogIC8vIG93bmVyIGNhbGwgdG8gdHJpZ2dlciBhIHN0b3Agc3RhdGUNCiAgZnVuY3Rpb24gZW1lcmdlbmN5U3RvcCgpIGV4dGVybmFsIG9ubHlPd25lciB7DQogICAgc3RvcHBlZCA9IHRydWU7DQogIH0NCg0KICAvLyBvd25lciBjYWxsIHRvIHJlc3RhcnQgZnJvbSB0aGUgc3RvcCBzdGF0ZQ0KICBmdW5jdGlvbiByZWxlYXNlKCkgZXh0ZXJuYWwgb25seU93bmVyIG9ubHlJbkVtZXJnZW5jeSB7DQogICAgc3RvcHBlZCA9IGZhbHNlOw0KICB9DQoNCn0NCg0KY29udHJhY3QgUHVsbGVyIHsNCg0KICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsNCiAgDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgcGF5bWVudHM7DQoNCiAgZXZlbnQgTG9nUmVmdW5kRVRIKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOw0KDQogIGZ1bmN0aW9uIGFzeW5jU2VuZChhZGRyZXNzIGRlc3QsIHVpbnQgYW1vdW50KSBpbnRlcm5hbCB7DQogICAgcGF5bWVudHNbZGVzdF0gPSBwYXltZW50c1tkZXN0XS5hZGQoYW1vdW50KTsNCiAgfQ0KDQogIC8vIHdpdGhkcndhdyBjYWxsIGZvciByZWZ1bmRpbmcgYmFsYW5jZSBhY3VtaWxhdGVkIGJ5IHBheWVlDQogIGZ1bmN0aW9uIHdpdGhkcmF3UGF5bWVudHMoKSB7DQogICAgYWRkcmVzcyBwYXllZSA9IG1zZy5zZW5kZXI7DQogICAgdWludCBwYXltZW50ID0gcGF5bWVudHNbcGF5ZWVdOw0KICAgIA0KICAgIGlmIChwYXltZW50ID09IDApIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIGlmICh0aGlzLmJhbGFuY2UgPCBwYXltZW50KSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBwYXltZW50c1twYXllZV0gPSAwOw0KDQogICAgaWYgKCFwYXllZS5zZW5kKHBheW1lbnQpKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogICAgTG9nUmVmdW5kRVRIKHBheWVlLHBheW1lbnQpOw0KICB9DQp9DQoNCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7DQogIA0KICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsNCiAgDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsNCiAgDQogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsNCiAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsNCiAgICAgICB0aHJvdzsNCiAgICAgfQ0KICAgICBfOw0KICB9DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7DQogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogIH0NCg0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgew0KICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICB9DQp9DQoNCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgew0KICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgew0KICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07DQogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7DQogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOw0KICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsNCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICB9DQoNCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgew0KICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7DQogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7DQogIH0NCg0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7DQogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07DQogIH0NCn0NCg0KY29udHJhY3QgVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duIHsNCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlRyaWJlVG9rZW4iOw0KICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJUUklCRSI7DQogIHVpbnQgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gNjsNCg0KICAvLyBUb2tlbiBjb25zdHJ1Y3Rvcg0KICBmdW5jdGlvbiBUb2tlbigpIHsNCiAgICAgIHRvdGFsU3VwcGx5ID0gMjAwMDAwMDAwMDAwMDAwOw0KICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSB0b3RhbFN1cHBseTsgLy8gc2VuZCBhbGwgY3JlYXRlZCB0b2tlbnMgdG8gdGhlIG93bmVyL2NyZWF0b3INCiAgfQ0KDQogIC8vIEJ1cm4gZnVuY3Rpb24gdG8gYnVybiBhIHNldCBhbW91bnQgb2YgdG9rZW5zDQogIGZ1bmN0aW9uIGJ1cm5lcih1aW50IF92YWx1ZSkgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsNCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOw0KICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7DQogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwLCBfdmFsdWUpOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCn0NCg0KY29udHJhY3QgQ3Jvd2RzYWxlIGlzIFBhdXNlLCBQdWxsZXIgew0KICAgIA0KICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50Ow0KDQogIAlzdHJ1Y3QgQmFja2VyIHsNCgkJdWludCB3ZWlSZWNlaXZlZDsgLy8gQW1vdW50IG9mIEV0aGVyIGdpdmVuDQoJCXVpbnQgY29pblNlbnQ7DQoJfQ0KICAgIA0KCS8vQ09OU1RBTlRTDQoJLy8gTWluaW11bSBudW1iZXIgb2YgVFJJQkUgdG8gc2VsbA0KCXVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9DQVAgPSA3NTAwMDAwMDAwMDAwOyAvLyA3LDUwMCwwMDAgVFJJQkUNCgkvLyBNYXhpbXVtIG51bWJlciBvZiBUUklCRSB0byBzZWxsDQoJdWludCBwdWJsaWMgY29uc3RhbnQgTUFYX0NBUCA9IDE1MDAwMDAwMDAwMDAwMDsgLy8gMTUwLDAwMCwwMDAgVFJJQkUNCgkvLyBNaW5pbXVtIGFtb3VudCB0byBpbnZlc3QNCgl1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fSU5WRVNUX0VUSEVSID0gMTAwIGZpbm5leTsgLy8gMC4xRVRIDQoJLy8gQ3Jvd2RzYWxlIHBlcmlvZA0KCXVpbnQgcHJpdmF0ZSBjb25zdGFudCBDUk9XRFNBTEVfUEVSSU9EID0gMjIgZGF5czsgLy8gMjIgZGF5cyBjcm93ZHNhbGUgcnVuDQoJLy8gTnVtYmVyIG9mIFRSSUJFIHBlciBFdGhlcg0KCXVpbnQgcHVibGljIGNvbnN0YW50IENPSU5fUEVSX0VUSEVSID0gMzAwMDAwMDAwMDsgLy8gMywwMDAgVFJJQkUNCg0KDQoJLy9WQVJJQUJMRVMNCgkvLyBUUklCRSBjb250cmFjdCByZWZlcmVuY2UNCglUb2tlbiBwdWJsaWMgY29pbjsNCiAgICAvLyBNdWx0aXNpZyBjb250cmFjdCB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgRXRoZXINCglhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ0V0aGVyOw0KCS8vIE51bWJlciBvZiBFdGhlciByZWNlaXZlZA0KCXVpbnQgcHVibGljIGV0aGVyUmVjZWl2ZWQ7DQoJLy8gTnVtYmVyIG9mIFRSSUJFIHNlbnQgdG8gRXRoZXIgY29udHJpYnV0b3JzDQoJdWludCBwdWJsaWMgY29pblNlbnRUb0V0aGVyOw0KICAvLyBOdW1iZXIgb2YgVFJJQkUgdG8gYnVybg0KICB1aW50IHB1YmxpYyBjb2luVG9CdXJuOw0KCS8vIENyb3dkc2FsZSBzdGFydCB0aW1lDQoJdWludCBwdWJsaWMgc3RhcnRUaW1lOw0KCS8vIENyb3dkc2FsZSBlbmQgdGltZQ0KCXVpbnQgcHVibGljIGVuZFRpbWU7DQogCS8vIElzIGNyb3dkc2FsZSBzdGlsbCBvbiBnb2luZw0KCWJvb2wgcHVibGljIGNyb3dkc2FsZUNsb3NlZDsNCg0KCS8vIEJhY2tlcnMgRXRoZXIgaW5kZXhlZCBieSB0aGVpciBFdGhlcmV1bSBhZGRyZXNzDQoJbWFwcGluZyhhZGRyZXNzID0+IEJhY2tlcikgcHVibGljIGJhY2tlcnM7DQoNCg0KCS8vTU9ESUZJRVJTDQoJbW9kaWZpZXIgbWluQ2FwTm90UmVhY2hlZCgpIHsNCgkJaWYgKChub3cgPCBlbmRUaW1lKSB8fCBjb2luU2VudFRvRXRoZXIgPj0gTUlOX0NBUCApIHRocm93Ow0KCQlfOw0KCX0NCg0KCW1vZGlmaWVyIHJlc3BlY3RUaW1lRnJhbWUoKSB7DQoJCWlmICgobm93IDwgc3RhcnRUaW1lKSB8fCAobm93ID4gZW5kVGltZSApKSB0aHJvdzsNCgkJXzsNCgl9DQoNCgkvL0VWRU5UUw0KCWV2ZW50IExvZ1JlY2VpdmVkRVRIKGFkZHJlc3MgYWRkciwgdWludCB2YWx1ZSk7DQoJZXZlbnQgTG9nQ29pbnNFbWl0ZWQoYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQgYW1vdW50KTsNCg0KCS8vQ3Jvd2RzYWxlIENvbnN0cnVjdG9yDQoJZnVuY3Rpb24gQ3Jvd2RzYWxlKGFkZHJlc3MgX1RSSUJFQWRkcmVzcywgYWRkcmVzcyBfdG8pIHsNCgkJY29pbiA9IFRva2VuKF9UUklCRUFkZHJlc3MpOw0KCQltdWx0aXNpZ0V0aGVyID0gX3RvOw0KCX0NCgkNCgkvLyBEZWZhdWx0IGZ1bmN0aW9uIHRvIHJlY2VpdmUgZXRoZXINCglmdW5jdGlvbigpIHN0b3BJbkVtZXJnZW5jeSByZXNwZWN0VGltZUZyYW1lIHBheWFibGUgew0KCQlyZWNlaXZlRVRIKG1zZy5zZW5kZXIpOw0KCX0NCg0KCSANCgkvLyBUbyBjYWxsIHRvIHN0YXJ0IHRoZSBjcm93ZHNhbGUNCglmdW5jdGlvbiBzdGFydCgpIG9ubHlPd25lciB7DQoJCWlmIChzdGFydFRpbWUgIT0gMCkgdGhyb3c7IC8vIENyb3dkc2FsZSB3YXMgYWxyZWFkeSBzdGFydGVkDQoNCgkJc3RhcnRUaW1lID0gbm93IDsgICAgICAgICAgICANCgkJZW5kVGltZSA9ICBub3cgKyBDUk9XRFNBTEVfUEVSSU9EOyAgICANCgl9DQoNCgkvLyBNYWluIGZ1bmN0aW9uIG9uIEVUSCByZWNlaXZlDQoJZnVuY3Rpb24gcmVjZWl2ZUVUSChhZGRyZXNzIGJlbmVmaWNpYXJ5KSBpbnRlcm5hbCB7DQoJCWlmIChtc2cudmFsdWUgPCBNSU5fSU5WRVNUX0VUSEVSKSB0aHJvdzsgLy8gRG8gbm90IGFjY2VwdCBpbnZlc3RtZW50IGlmIHRoZSBhbW91bnQgaXMgbG93ZXIgdGhhbiB0aGUgbWluaW11bSBhbGxvd2VkIGludmVzdG1lbnQNCgkJDQoJCXVpbnQgY29pblRvU2VuZCA9IGJvbnVzKG1zZy52YWx1ZS5tdWwoQ09JTl9QRVJfRVRIRVIpLmRpdigxIGV0aGVyKSk7IC8vIENhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIHRva2VucyB0byBzZW5kDQoJCWlmIChjb2luVG9TZW5kLmFkZChjb2luU2VudFRvRXRoZXIpID4gTUFYX0NBUCkgdGhyb3c7CQ0KDQoJCUJhY2tlciBiYWNrZXIgPSBiYWNrZXJzW2JlbmVmaWNpYXJ5XTsNCgkJY29pbi50cmFuc2ZlcihiZW5lZmljaWFyeSwgY29pblRvU2VuZCk7IC8vIFRyYW5zZmVyIFRSSUJFDQoNCgkJYmFja2VyLmNvaW5TZW50ID0gYmFja2VyLmNvaW5TZW50LmFkZChjb2luVG9TZW5kKTsNCgkJYmFja2VyLndlaVJlY2VpdmVkID0gYmFja2VyLndlaVJlY2VpdmVkLmFkZChtc2cudmFsdWUpOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcgZm9yIHRoaXMgYmFja2VyICAgIA0KDQoJCWV0aGVyUmVjZWl2ZWQgPSBldGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcNCgkJY29pblNlbnRUb0V0aGVyID0gY29pblNlbnRUb0V0aGVyLmFkZChjb2luVG9TZW5kKTsNCg0KCQkvLyBTZW5kIGV2ZW50cw0KCQlMb2dDb2luc0VtaXRlZChtc2cuc2VuZGVyICxjb2luVG9TZW5kKTsNCgkJTG9nUmVjZWl2ZWRFVEgoYmVuZWZpY2lhcnksIGV0aGVyUmVjZWl2ZWQpOyANCgl9DQoJDQoNCgkvLyBCb251cyBmdW5jdGlvbiBmb3IgdGhlIGZpcnN0IHdlZWsNCglmdW5jdGlvbiBib251cyh1aW50IGFtb3VudCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCkgew0KCQlpZiAobm93IDwgc3RhcnRUaW1lLmFkZCgyIG1pbnV0ZXMpKSByZXR1cm4gYW1vdW50LmFkZChhbW91bnQuZGl2KDUpKTsgICAvLyBib251cyAyMCUNCgkJcmV0dXJuIGFtb3VudDsNCgl9DQoNCgkvLyBGaW5hbGl6ZSBmdW5jdGlvbg0KCWZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIHB1YmxpYyB7DQoNCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNyb3dkc2FsZSBoYXMgZW5kZWQgb3IgaWYgdGhlIG9sZCB0b2tlbnMgaGF2ZSBiZWVuIHNvbGQNCiAgICBpZihjb2luU2VudFRvRXRoZXIgIT0gTUFYX0NBUCl7DQogICAgICAgIGlmIChub3cgPCBlbmRUaW1lKSAgdGhyb3c7IC8vIElmIENyb3dkc2FsZSBzdGlsbCBydW5uaW5nDQogICAgICAgIGlmIChjb2luU2VudFRvRXRoZXIgPCBNSU5fQ0FQICYmIG5vdyA8IGVuZFRpbWUgKyA3IGRheXMpIHRocm93OyAvLyBJZiBNSU5fQ0FQIGlzIG5vdCByZWFjaGVkIGRvbm9ycyBoYXZlIDdkYXlzIHRvIGdldCByZWZ1bmQgYmVmb3JlIHdlIGNhbiBmaW5hbGlzZQ0KICAgIH0NCgkJDQoJCWlmICghbXVsdGlzaWdFdGhlci5zZW5kKHRoaXMuYmFsYW5jZSkpIHRocm93OyAvLyBNb3ZlIHRoZSByZW1haW5pbmcgRXRoZXIgdG8gdGhlIG11bHRpc2lnIGFkZHJlc3MNCgkJDQoJCXVpbnQgcmVtYWlucyA9IGNvaW4uYmFsYW5jZU9mKHRoaXMpOw0KCQlpZiAocmVtYWlucyA+IDApIHsNCiAgICAgIGNvaW5Ub0J1cm4gPSBjb2luVG9CdXJuLmFkZChyZW1haW5zKTsNCiAgICAgIC8vIFRyYW5zZmVyIHJlbWFpbnMgdG8gb3duZXIgdG8gYnVybg0KICAgICAgY29pbi50cmFuc2Zlcihvd25lciwgcmVtYWlucyk7DQoJCX0NCgkJY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsNCgl9DQoNCgkvLyBEcmFpbiBmdW5jdGlvbnMgaW4gY2FzZSBvZiB1bmV4cGVjdGVkIGlzc3VlcyB3aXRoIHRoZSBzbWFydCBjb250cmFjdC4NCiAgLy8gRVRIIGRyYWluDQoJZnVuY3Rpb24gZHJhaW4oKSBvbmx5T3duZXIgew0KICAgIGlmICghbXVsdGlzaWdFdGhlci5zZW5kKHRoaXMuYmFsYW5jZSkpIHRocm93OyAvL1RyYW5zZmVyIHRvIHRlYW0gbXVsdGlzaWcgd2FsbGV0DQoJfQ0KICAvLyBUT0tFTiBkcmFpbg0KICBmdW5jdGlvbiBjb2luRHJhaW4oKSBvbmx5T3duZXIgew0KICAgIHVpbnQgcmVtYWlucyA9IGNvaW4uYmFsYW5jZU9mKHRoaXMpOw0KICAgIGNvaW4udHJhbnNmZXIob3duZXIsIHJlbWFpbnMpOyAvLyBUcmFuc2ZlciB0byBvd25lciB3YWxsZXQNCgl9DQoNCgkvLyBDaGFuZ2UgbXVsdGlzaWcgd2FsbGV0IGluIGNhc2UgaXRzIG5lZWRlZA0KCWZ1bmN0aW9uIGNoYW5nZU11bHRpc2lnKGFkZHJlc3MgYWRkcikgb25seU93bmVyIHB1YmxpYyB7DQoJCWlmIChhZGRyID09IGFkZHJlc3MoMCkpIHRocm93Ow0KCQltdWx0aXNpZ0V0aGVyID0gYWRkcjsNCgl9DQoNCgkvLyBNYW51YWxseSBiYWNrIFRSSUJFIG93bmVyIGFkZHJlc3MuDQoJZnVuY3Rpb24gY2hhbmdlVHJpYmVPd25lcigpIG9ubHlPd25lciBwdWJsaWMgew0KCQljb2luLnRyYW5zZmVyT3duZXJzaGlwKG93bmVyKTsNCgl9DQoNCgkvLyBUcmFuc2ZlciByZW1haW5zIHRvIG93bmVyIGluIGNhc2UgaWYgaW1wb3NzaWJsZSB0byBkbyBtaW4gaW52ZXN0DQogIC8vVEhJUyBDSEFOR0VEISEhDQoJZnVuY3Rpb24gZ2V0Q29pblJlbWFpbnMoKSBvbmx5T3duZXIgcHVibGljIHsNCiAgICB1aW50IHJlbWFpbnMgPSBjb2luLmJhbGFuY2VPZih0aGlzKTsNCg0KCQlpZihNSU5fQ0FQIDwgY29pblNlbnRUb0V0aGVyKSB0aHJvdzsNCg0KCQlCYWNrZXIgYmFja2VyID0gYmFja2Vyc1tvd25lcl07DQoJCWNvaW4udHJhbnNmZXIob3duZXIsIHJlbWFpbnMpOyAvLyBUcmFuc2ZlciBUUklCRSByaWdodCBub3cgDQoNCgkJYmFja2VyLmNvaW5TZW50ID0gYmFja2VyLmNvaW5TZW50LmFkZChyZW1haW5zKTsNCg0KCQljb2luU2VudFRvRXRoZXIgPSBjb2luU2VudFRvRXRoZXIuYWRkKHJlbWFpbnMpOw0KDQoJCS8vIFNlbmQgZXZlbnRzDQoJCUxvZ0NvaW5zRW1pdGVkKHRoaXMgLHJlbWFpbnMpOw0KCQlMb2dSZWNlaXZlZEVUSChvd25lciwgZXRoZXJSZWNlaXZlZCk7DQoJfQ0KDQoNCgkvL1JlZnVuZCBmdW5jdGlvbiB3aGVuIG1pbmltdW0gY2FwIGlzbnQgcmVhY2hlZCwgdGhpcyBpcyBzdGVwIGlzIHN0ZXAgMiwgVEhJUyBGVU5DVElPTiBPTkxZIEFWQUlMQUJMRSBJRiBNSU4gQ0FQIE5PVCBSRUFDSEVELg0KICAvL1NURVAxOiBGcm9tIFRSSUJFIHRva2VuIGNvbnRyYWN0IHVzZSAiYXBwcm92ZSIgZnVuY3Rpb24gd2l0aCB0aGUgYW1vdW50IG9mIFRSSUJFIHlvdSBnb3QgaW4gdG90YWwuDQogIC8vU1RFUDI6IEZyb20gVFJJQkUgY3Jvd2RzYWxlIGNvbnRyYWN0IHVzZSAicmVmdW5kIiBmdW5jdGlvbiB3aXRoIHRoZSBhbW91bnQgb2YgVFJJQkUgeW91IGdvdCBpbiB0b3RhbC4NCiAgLy9TVEVQMzogRnJvbSBUUklCRSBjcm93ZHNhbGUgY29udHJhY3QgdXNlICJ3aXRoZHJhd1BheWVtZW50IiBmdW5jdGlvbiB0byByZWNpZXZlIHRoZSBFVEguDQoJZnVuY3Rpb24gcmVmdW5kKHVpbnQgX3ZhbHVlKSBtaW5DYXBOb3RSZWFjaGVkIHB1YmxpYyB7DQoJCQ0KCQlpZiAoX3ZhbHVlICE9IGJhY2tlcnNbbXNnLnNlbmRlcl0uY29pblNlbnQpIHRocm93OyAvLyBjb21wYXJlIHZhbHVlIGZyb20gYmFja2VyIGJhbGFuY2UNCg0KCQljb2luLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBhZGRyZXNzKHRoaXMpLCBfdmFsdWUpOyAvLyBnZXQgdGhlIHRva2VuIGJhY2sgdG8gdGhlIGNyb3dkc2FsZSBjb250cmFjdA0KDQoJCXVpbnQgRVRIVG9TZW5kID0gYmFja2Vyc1ttc2cuc2VuZGVyXS53ZWlSZWNlaXZlZDsNCgkJYmFja2Vyc1ttc2cuc2VuZGVyXS53ZWlSZWNlaXZlZD0wOw0KDQoJCWlmIChFVEhUb1NlbmQgPiAwKSB7DQoJCQlhc3luY1NlbmQobXNnLnNlbmRlciwgRVRIVG9TZW5kKTsgLy8gcHVsbCBwYXltZW50IHRvIGdldCByZWZ1bmQgaW4gRVRIDQoJCX0NCgl9DQoNCn0NCg0KbGlicmFyeSBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgcmV0dXJuIGM7DQogIH0NCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgYXNzZXJ0KGIgPiAwKTsNCiAgICB1aW50IGMgPSBhIC8gYjsNCiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICBhc3NlcnQoYiA8PSBhKTsNCiAgICByZXR1cm4gYSAtIGI7DQogIH0NCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSArIGI7DQogICAgYXNzZXJ0KGMgPj0gYSk7DQogICAgcmV0dXJuIGM7DQogIH0NCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7DQogICAgaWYgKCFhc3NlcnRpb24pIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCiAgfQ0KfQ=='