base 64 content
base64token37
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQpjb250cmFjdCBPd25lZCB7DQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQoNCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9hZGRyKSBvbmx5T3duZXIgew0KICAgICAgICBpZiAoX2FkZHIgPT0gMHgwKSB0aHJvdzsNCiAgICAgICAgb3duZXIgPSBfYWRkcjsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5T3duZXIgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KfQ0KDQpjb250cmFjdCBNdXRleCBpcyBPd25lZCB7DQogICAgYm9vbCBsb2NrZWQgPSBmYWxzZTsNCiAgICBtb2RpZmllciBtdXRleGVkIHsNCiAgICAgICAgaWYgKGxvY2tlZCkgdGhyb3c7DQogICAgICAgIGxvY2tlZCA9IHRydWU7DQogICAgICAgIF87DQogICAgICAgIGxvY2tlZCA9IGZhbHNlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVuTXV0ZXgoKSBvbmx5T3duZXIgew0KICAgICAgICBsb2NrZWQgPSBmYWxzZTsNCiAgICB9DQp9DQoNCg0KY29udHJhY3QgUmVudGFsIGlzIE93bmVkIHsNCiAgICBmdW5jdGlvbiBSZW50YWwoYWRkcmVzcyBfb3duZXIpIHsNCiAgICAgICAgaWYgKF9vd25lciA9PSAweDApIHRocm93Ow0KICAgICAgICBvd25lciA9IF9vd25lcjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBvZmZlcihhZGRyZXNzIGZyb20sIHVpbnQgbnVtKSB7DQoNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjbGFpbUJhbGFuY2UoYWRkcmVzcykgcmV0dXJucyh1aW50KSB7DQogICAgICAgIHJldHVybiAwOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGV4ZWMoYWRkcmVzcyBkZXN0KSBvbmx5T3duZXIgew0KICAgICAgICBpZiAoIWRlc3QuY2FsbChtc2cuZGF0YSkpIHRocm93Ow0KICAgIH0NCn0NCg0KY29udHJhY3QgVG9rZW4gaXMgT3duZWQsIE11dGV4IHsNCiAgICB1aW50IE9ORSA9IDEwKio4Ow0KICAgIHVpbnQgcHJpY2UgPSA1MDAwOw0KICAgIExlZGdlciBsZWRnZXI7DQogICAgUmVudGFsIHJlbnRhbENvbnRyYWN0Ow0KICAgIHVpbnQ4IHJvbGxPdmVyVGltZSA9IDQ7DQogICAgdWludDggc3RhcnRUaW1lID0gODsNCiAgICBib29sIGxpdmUgPSBmYWxzZTsNCiAgICBhZGRyZXNzIGNsdWI7DQogICAgdWludCBsb2NrZWRTdXBwbHkgPSAwOw0KICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJMZWdlbmRzIjsNCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSA4Ow0KICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkxHRCI7DQogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJzEuMSc7DQogICAgYm9vbCB0cmFuc2ZlcnNPbiA9IGZhbHNlOw0KDQogICAgbW9kaWZpZXIgb25seUlucHV0V29yZHModWludCBuKSB7DQogICAgICAgIGlmIChtc2cuZGF0YS5sZW5ndGggIT0gKDMyICogbikgKyA0KSB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBUb2tlbigpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KICAgIC8qDQogICAgKglCb29ra2VlcGluZyBhbmQgQWRtaW4gRnVuY3Rpb25zDQogICAgKi8NCg0KICAgIGV2ZW50IExlZGdlclVwZGF0ZWQoYWRkcmVzcyxhZGRyZXNzKTsNCg0KICAgIGZ1bmN0aW9uIGNoYW5nZUNsdWIoYWRkcmVzcyBfYWRkcikgb25seU93bmVyIHsNCiAgICAgICAgaWYgKF9hZGRyID09IDB4MCkgdGhyb3c7DQoNCiAgICAgICAgY2x1YiA9IF9hZGRyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNoYW5nZVByaWNlKHVpbnQgX251bSkgb25seU93bmVyIHsNCiAgICAgICAgcHJpY2UgPSBfbnVtOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIHJldHVybnMgKHVpbnQpIHsNCiAgICAgICAgaWYgKChhICsgYikgPCBhKSB0aHJvdzsNCiAgICAgICAgcmV0dXJuIChhICsgYik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2hhbmdlTGVkZ2VyKGFkZHJlc3MgX2FkZHIpIG9ubHlPd25lciB7DQogICAgICAgIGlmIChfYWRkciA9PSAweDApIHRocm93Ow0KDQogICAgICAgIExlZGdlclVwZGF0ZWQobXNnLnNlbmRlciwgX2FkZHIpOw0KICAgICAgICBsZWRnZXIgPSBMZWRnZXIoX2FkZHIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNoYW5nZVJlbnRhbChhZGRyZXNzIF9hZGRyKSBvbmx5T3duZXIgew0KICAgICAgICBpZiAoX2FkZHIgPT0gMHgwKSB0aHJvdzsNCiAgICAgICAgcmVudGFsQ29udHJhY3QgPSBSZW50YWwoX2FkZHIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNoYW5nZVRpbWVzKHVpbnQ4IF9yb2xsT3ZlciwgdWludDggX3N0YXJ0KSBvbmx5T3duZXIgew0KICAgICAgICByb2xsT3ZlclRpbWUgPSBfcm9sbE92ZXI7DQogICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydDsNCiAgICB9DQoNCiAgICAvKg0KICAgICogTG9ja2luZyBpcyBhIGZlYXR1cmUgdGhhdCB0dXJucyBhIHVzZXIncyBiYWxhbmNlcyBpbnRvDQogICAgKiB1bi1pc3N1ZWQgdG9rZW5zLCB0YWtpbmcgdGhlbSBvdXQgb2YgYW4gYWNjb3VudCBhbmQgcmVkdWNpbmcgdGhlIHN1cHBseS4NCiAgICAqIERpbHV0aW5nIGlzIHNvIG5hbWVkIHRvIHJlbWluZCB0aGUgY2FsbGVyIHRoYXQgdGhleSBhcmUgY2hhbmdpbmcgdGhlIG1vbmV5IHN1cHBseS4NCiAgICAgICAgKi8NCg0KICAgIGZ1bmN0aW9uIGxvY2soYWRkcmVzcyBfc2VpemVBZGRyKSBvbmx5T3duZXIgbXV0ZXhlZCB7DQogICAgICAgIHVpbnQgbXlCYWxhbmNlID0gbGVkZ2VyLmJhbGFuY2VPZihfc2VpemVBZGRyKTsNCg0KICAgICAgICBsb2NrZWRTdXBwbHkgKz0gbXlCYWxhbmNlOw0KICAgICAgICBsZWRnZXIuc2V0QmFsYW5jZShfc2VpemVBZGRyLCAwKTsNCiAgICB9DQoNCiAgICBldmVudCBEaWx1dGlvbihhZGRyZXNzLCB1aW50KTsNCg0KICAgIGZ1bmN0aW9uIGRpbHV0ZShhZGRyZXNzIF9kZXN0QWRkciwgdWludCBhbW91bnQpIG9ubHlPd25lciB7DQogICAgICAgIGlmIChhbW91bnQgPiBsb2NrZWRTdXBwbHkpIHRocm93Ow0KDQogICAgICAgIERpbHV0aW9uKF9kZXN0QWRkciwgYW1vdW50KTsNCg0KICAgICAgICBsb2NrZWRTdXBwbHkgLT0gYW1vdW50Ow0KDQogICAgICAgIHVpbnQgY3VyQmFsYW5jZSA9IGxlZGdlci5iYWxhbmNlT2YoX2Rlc3RBZGRyKTsNCiAgICAgICAgY3VyQmFsYW5jZSA9IHNhZmVBZGQoYW1vdW50LCBjdXJCYWxhbmNlKTsNCiAgICAgICAgbGVkZ2VyLnNldEJhbGFuY2UoX2Rlc3RBZGRyLCBjdXJCYWxhbmNlKTsNCiAgICB9DQoNCiAgICAvKg0KICAgICAqIENyb3dkc2FsZSAtLQ0KICAgICAqDQogICAgICovDQogICAgZnVuY3Rpb24gY29tcGxldGVDcm93ZHNhbGUoKSBvbmx5T3duZXIgew0KICAgICAgICAvLyBMb2NrIHVuc29sZCB0b2tlbnMNCiAgICAgICAgLy8gYWxsb3cgdHJhbnNmZXJzIGZvciBhcmJpdHJhcnkgb3duZXJzDQogICAgICAgIHRyYW5zZmVyc09uID0gdHJ1ZTsNCiAgICAgICAgbG9jayhvd25lcik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcGF1c2VUcmFuc2ZlcnMoKSBvbmx5T3duZXIgew0KICAgICAgICB0cmFuc2ZlcnNPbiA9IGZhbHNlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJlc3VtZVRyYW5zZmVycygpIG9ubHlPd25lciB7DQogICAgICAgIHRyYW5zZmVyc09uID0gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKg0KICAgICogUmVudGluZyAtLSBMb2dpYyBUQkQgbGF0ZXIuIEZvciBub3csIHdlIHRydXN0IHRoZSByZW50YWwgY29udHJhY3QNCiAgICAqIHRvIG1hbmFnZSBldmVyeXRoaW5nIGFib3V0IHRoZSByZW50YWxzLCBpbmNsdWRpbmcgYm9va2tlZXBpbmcgb24gZWFybmluZ3MNCiAgICAqIGFuZCByZXR1cm5pbmcgdG9rZW5zLg0KICAgICovDQoNCiAgICBmdW5jdGlvbiByZW50T3V0KHVpbnQgbnVtKSB7DQogICAgICAgIGlmIChsZWRnZXIuYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgbnVtKSB0aHJvdzsNCiAgICAgICAgcmVudGFsQ29udHJhY3Qub2ZmZXIobXNnLnNlbmRlciwgbnVtKTsNCiAgICAgICAgbGVkZ2VyLnRva2VuVHJhbnNmZXIobXNnLnNlbmRlciwgcmVudGFsQ29udHJhY3QsIG51bSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2xhaW1VbnJlbnRlZCgpIHsNCiAgICAgICAgdWludCBhbW91bnQgPSByZW50YWxDb250cmFjdC5jbGFpbUJhbGFuY2UobXNnLnNlbmRlcik7IC8vIHRoaXMgc2hvdWxkIHJlZHVjZSBzZW5kZXIncyBjbGFpbWFibGVCYWxhbmNlIHRvIDANCg0KICAgICAgICBsZWRnZXIudG9rZW5UcmFuc2ZlcihyZW50YWxDb250cmFjdCwgbXNnLnNlbmRlciwgYW1vdW50KTsNCiAgICB9DQoNCiAgICAvKg0KICAgICogQnVybmluZyAtLSBXZSBhbGxvdyBhbnkgdXNlciB0byBidXJuIHRva2Vucy4NCiAgICAqDQogICAgICovDQoNCiAgICBmdW5jdGlvbiBidXJuKHVpbnQgX2Ftb3VudCkgew0KICAgICAgICB1aW50IGJhbGFuY2UgPSBsZWRnZXIuYmFsYW5jZU9mKG1zZy5zZW5kZXIpOw0KICAgICAgICBpZiAoX2Ftb3VudCA+IGJhbGFuY2UpIHRocm93Ow0KDQogICAgICAgIGxlZGdlci5zZXRCYWxhbmNlKG1zZy5zZW5kZXIsIGJhbGFuY2UgLSBfYW1vdW50KTsNCiAgICB9DQoNCiAgICAvKg0KICAgIEVudHJ5DQogICAgKi8NCiAgICBmdW5jdGlvbiBjaGVja0luKHVpbnQgX251bUNoZWNraW5zKSByZXR1cm5zKGJvb2wpIHsNCiAgICAgICAgaW50IG5lZWRlZCA9IGludChwcmljZSAqIE9ORSogX251bUNoZWNraW5zKTsNCiAgICAgICAgaWYgKGludChsZWRnZXIuYmFsYW5jZU9mKG1zZy5zZW5kZXIpKSA+IG5lZWRlZCkgew0KICAgICAgICAgICAgbGVkZ2VyLmNoYW5nZVVzZWQobXNnLnNlbmRlciwgbmVlZGVkKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICAvLyBFUkMyMCBTdXBwb3J0LiBUaGlzIGNvdWxkIGFsc28gdXNlIHRoZSBmYWxsYmFjayBidXQNCiAgICAvLyBJIHByZWZlciB0aGUgY29udHJvbCBmb3Igbm93Lg0KDQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7DQogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7DQoNCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnModWludCkgew0KICAgICAgICByZXR1cm4gbGVkZ2VyLnRvdGFsU3VwcGx5KCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgb25seUlucHV0V29yZHMoMikgcmV0dXJucyhib29sKSB7DQogICAgICAgIGlmICghdHJhbnNmZXJzT24gJiYgbXNnLnNlbmRlciAhPSBvd25lcikgcmV0dXJuIGZhbHNlOw0KICAgICAgICBpZiAoIWxlZGdlci50b2tlblRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCkpIHsgcmV0dXJuIGZhbHNlOyB9DQoNCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIG9ubHlJbnB1dFdvcmRzKDMpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgaWYgKCF0cmFuc2ZlcnNPbiAmJiBtc2cuc2VuZGVyICE9IG93bmVyKSByZXR1cm4gZmFsc2U7DQogICAgICAgIGlmICghIGxlZGdlci50b2tlblRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBfZnJvbSwgX3RvLCBfYW1vdW50KSApIHsgcmV0dXJuIGZhbHNlO30NCg0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIGNvbnN0YW50IHJldHVybnModWludCkgew0KICAgICAgICByZXR1cm4gbGVkZ2VyLmFsbG93YW5jZShfZnJvbSwgX3RvKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmICggbGVkZ2VyLnRva2VuQXBwcm92ZShtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKSApIHsNCiAgICAgICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hZGRyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsNCiAgICAgICAgcmV0dXJuIGxlZGdlci5iYWxhbmNlT2YoX2FkZHIpOw0KICAgIH0NCn0NCg0KY29udHJhY3QgTGVkZ2VyIGlzIE93bmVkIHsNCiAgICB1aW50IE9ORSA9IDEwKio4Ow0KICAgIHVpbnQgcHJlTWluZWQgPSAzMDAwMDAwMDsNCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgdXNlZFRvZGF5Ow0KDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBzZWVuSGVyZTsNCiAgICBhZGRyZXNzW10gcHVibGljIHNlZW5IZXJlQTsNCg0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsNCiAgICBhZGRyZXNzIHRva2VuOw0KICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5ID0gMDsNCg0KICAgIGZ1bmN0aW9uIExlZGdlcigpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgICAgICBzZWVuSGVyZVtvd25lcl0gPSB0cnVlOw0KICAgICAgICBzZWVuSGVyZUEucHVzaChvd25lcik7DQoNCiAgICAgICAgdG90YWxTdXBwbHkgPSBwcmVNaW5lZCAqT05FOw0KICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseTsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5VG9rZW4gew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSB0b2tlbikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgbW9kaWZpZXIgb25seVRva2VuT3JPd25lciB7DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IHRva2VuICYmIG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93Ow0KICAgICAgICBfOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHRva2VuVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgYW1vdW50KSBvbmx5VG9rZW4gcmV0dXJucyhib29sKSB7DQogICAgICAgIGlmIChhbW91bnQgPiBiYWxhbmNlc1tfZnJvbV0pIHJldHVybiBmYWxzZTsNCiAgICAgICAgaWYgKChiYWxhbmNlc1tfdG9dICsgYW1vdW50KSA8IGJhbGFuY2VzW190b10pIHJldHVybiBmYWxzZTsNCiAgICAgICAgaWYgKGFtb3VudCA9PSAwKSB7IHJldHVybiBmYWxzZTsgfQ0KDQogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBhbW91bnQ7DQogICAgICAgIGJhbGFuY2VzW190b10gKz0gYW1vdW50Ow0KDQogICAgICAgIGlmIChzZWVuSGVyZVtfdG9dID09IGZhbHNlKSB7DQogICAgICAgICAgICBzZWVuSGVyZUEucHVzaChfdG8pOw0KICAgICAgICAgICAgc2VlbkhlcmVbX3RvXSA9IHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0b2tlblRyYW5zZmVyRnJvbShhZGRyZXNzIF9zZW5kZXIsIGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IGFtb3VudCkgb25seVRva2VuIHJldHVybnMoYm9vbCkgew0KICAgICAgICBpZiAoYWxsb3dlZFtfZnJvbV1bX3NlbmRlcl0gPD0gYW1vdW50KSByZXR1cm4gZmFsc2U7DQogICAgICAgIGlmIChhbW91bnQgPiBiYWxhbmNlT2YoX2Zyb20pKSByZXR1cm4gZmFsc2U7DQogICAgICAgIGlmIChhbW91bnQgPT0gMCkgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIGlmICgoYmFsYW5jZXNbX3RvXSArIGFtb3VudCkgPCBhbW91bnQpIHJldHVybiBmYWxzZTsNCg0KICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gYW1vdW50Ow0KICAgICAgICBiYWxhbmNlc1tfdG9dICs9IGFtb3VudDsNCiAgICAgICAgYWxsb3dlZFtfZnJvbV1bX3NlbmRlcl0gLT0gYW1vdW50Ow0KDQogICAgICAgIGlmIChzZWVuSGVyZVtfdG9dID09IGZhbHNlKSB7DQogICAgICAgICAgICBzZWVuSGVyZUEucHVzaChfdG8pOw0KICAgICAgICAgICAgc2VlbkhlcmVbX3RvXSA9IHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCg0KICAgIGZ1bmN0aW9uIGNoYW5nZVVzZWQoYWRkcmVzcyBfYWRkciwgaW50IGFtb3VudCkgb25seVRva2VuIHsNCiAgICAgICAgaW50IG15VG9kYXkgPSBpbnQodXNlZFRvZGF5W19hZGRyXSkgKyBhbW91bnQ7DQogICAgICAgIHVzZWRUb2RheVtfYWRkcl0gPSB1aW50KG15VG9kYXkpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJlc2V0VXNlZFRvZGF5KHVpbnQ4IHN0YXJ0SSwgdWludDggbnVtVGltZXMpIG9ubHlUb2tlbk9yT3duZXIgcmV0dXJucyh1aW50OCkgew0KICAgICAgICB1aW50OCBudW1EZWxldGVkOw0KICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1UaW1lcyAmJiBpICsgc3RhcnRJIDwgc2VlbkhlcmVBLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAodXNlZFRvZGF5W3NlZW5IZXJlQVtpK3N0YXJ0SV1dICE9IDApIHsNCiAgICAgICAgICAgICAgICBkZWxldGUgdXNlZFRvZGF5W3NlZW5IZXJlQVtpK3N0YXJ0SV1dOw0KICAgICAgICAgICAgICAgIG51bURlbGV0ZWQrKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbnVtRGVsZXRlZDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgcmV0dXJucyAodWludCkgew0KICAgICAgICAvLyBkb24ndCBmb3JnZXQgdG8gc3VidHJhY3QgdXNlZFRvZGF5DQogICAgICAgIGlmICh1c2VkVG9kYXlbX2FkZHJdID49IGJhbGFuY2VzW19hZGRyXSkgeyByZXR1cm4gMDt9DQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfYWRkcl0gLSB1c2VkVG9kYXlbX2FkZHJdOw0KICAgIH0NCg0KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MsIGFkZHJlc3MsIHVpbnQpOw0KDQogICAgZnVuY3Rpb24gdG9rZW5BcHByb3ZlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBvbmx5VG9rZW4gcmV0dXJucyAoYm9vbCkgew0KICAgICAgICBhbGxvd2VkW19mcm9tXVtfc3BlbmRlcl0gPSBfdmFsdWU7DQogICAgICAgIEFwcHJvdmFsKF9mcm9tLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgew0KICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjaGFuZ2VUb2tlbihhZGRyZXNzIF90b2tlbikgb25seU93bmVyIHsNCiAgICAgICAgdG9rZW4gPSBUb2tlbihfdG9rZW4pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJlZHVjZVRvdGFsU3VwcGx5KHVpbnQgYW1vdW50KSBvbmx5VG9rZW4gew0KICAgICAgICBpZiAoYW1vdW50ID4gdG90YWxTdXBwbHkpIHRocm93Ow0KDQogICAgICAgIHRvdGFsU3VwcGx5IC09IGFtb3VudDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzZXRCYWxhbmNlKGFkZHJlc3MgX2FkZHIsIHVpbnQgYW1vdW50KSBvbmx5VG9rZW5Pck93bmVyIHsNCiAgICAgICAgaWYgKGJhbGFuY2VzW19hZGRyXSA9PSBhbW91bnQpIHsgcmV0dXJuOyB9DQogICAgICAgIGlmIChiYWxhbmNlc1tfYWRkcl0gPCBhbW91bnQpIHsNCiAgICAgICAgICAgIC8vIGluY3JlYXNpbmcgdG90YWxTdXBwbHkNCiAgICAgICAgICAgIHVpbnQgaW5jcmVhc2UgPSBhbW91bnQgLSBiYWxhbmNlc1tfYWRkcl07DQogICAgICAgICAgICB0b3RhbFN1cHBseSArPSBpbmNyZWFzZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIGRlY3JlYXNpbmcgdG90YWxTdXBwbHkNCiAgICAgICAgICAgIHVpbnQgZGVjcmVhc2UgPSBiYWxhbmNlc1tfYWRkcl0gLSBhbW91bnQ7DQogICAgICAgICAgICAvL1RPRE86IHNhZmVTdWINCiAgICAgICAgICAgIHRvdGFsU3VwcGx5IC09IGRlY3JlYXNlOw0KICAgICAgICB9DQogICAgICAgIGJhbGFuY2VzW19hZGRyXSA9IGFtb3VudDsNCiAgICB9DQoNCn0='