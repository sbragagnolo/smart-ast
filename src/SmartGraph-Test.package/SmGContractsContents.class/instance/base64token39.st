base 64 content
base64token39
	^'Y29udHJhY3QgT3duYWJsZSB7DQogIGFkZHJlc3MgcHVibGljIG93bmVyOw0KDQogIGZ1bmN0aW9uIE93bmFibGUoKSB7DQogICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICB9DQoNCiAgbW9kaWZpZXIgb25seU93bmVyKCkgew0KICAgIGlmIChtc2cuc2VuZGVyID09IG93bmVyKQ0KICAgICAgXzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXIoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsNCiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgb3duZXIgPSBuZXdPd25lcjsNCiAgfQ0KDQp9DQoNCmNvbnRyYWN0IEVSQzIwIHsNCiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7DQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7DQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOw0KDQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOw0KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsNCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOw0KICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsNCiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7DQp9DQoNCmNvbnRyYWN0IFNhZmVNYXRoIHsNCiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgcmV0dXJuIGEgLSBiOw0KICB9DQoNCiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKyBiOw0KICAgIGFzc2VydChjPj1hICYmIGM+PWIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7DQogICAgaWYgKCFhc3NlcnRpb24pIHRocm93Ow0KICB9DQp9DQoNCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIFNhZmVNYXRoIHsNCg0KICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7DQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsNCg0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSwgX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOw0KICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07DQogICAgDQogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsNCiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoX2FsbG93YW5jZSwgX3ZhbHVlKTsNCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsNCiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOw0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgew0KICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOw0KICB9DQoNCn0NCg0KLyoNCiAgV2luZ3MgRVJDMjAgVG9rZW4uDQogIEFkZGVkIGFsbG9jYXRpb24gZm9yIHVzZXJzIHdobyBwYXJ0aWNpcGlhdGVkIGluIFdpbmdzIENhbXBhaWduLg0KDQogIEltcG9ydGFudCENCiAgV2UgaGF2ZSB0byBydW4gcHJlLW1pbmUgYWxsb2NhdGlvbiBmaXJzdC4NCiAgQW5kIG9ubHkgdGhlbiByZXN0IG9mIHVzZXJzLg0KICBPciBpdCdzIG5vdCBnb2luZyB0byB3b3JrIGR1ZSB0byB3aGVuQWxsb2NhdGlvbiBsb2dpYy4NCiovDQpjb250cmFjdCBUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsNCiAgLy8gQWNjb3VudCBhbGxvY2F0aW9uIGV2ZW50DQogIGV2ZW50IEFMTE9DQVRJT04oYWRkcmVzcyBpbmRleGVkIGFjY291bnQsIHVpbnQgYW1vdW50KTsNCg0KICAvKg0KICAgIFByZW1pbmUgZXZlbnRzDQogICovDQogIGV2ZW50IFBSRU1JTkVSX0FEREVEKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBhY2NvdW50LCB1aW50IGFtb3VudCk7DQogIGV2ZW50IFBSRU1JTkVfQUxMT0NBVElPTl9BRERFRChhZGRyZXNzIGluZGV4ZWQgYWNjb3VudCwgdWludCB0aW1lKTsNCiAgZXZlbnQgUFJFTUlORV9SRUxFQVNFKGFkZHJlc3MgaW5kZXhlZCBhY2NvdW50LCB1aW50IHRpbWVzdGFtcCwgdWludCBhbW91bnQpOw0KICBldmVudCBQUkVNSU5FUl9DSEFOR0VEKGFkZHJlc3MgaW5kZXhlZCBvbGRQcmVtaW5lciwgYWRkcmVzcyBuZXdQcmVtaW5lciwgYWRkcmVzcyBuZXdSZWNpcGllbnQpOw0KDQogIC8qDQogICAgUHJlbWluZSBzdHJ1Y3R1cmUNCiAgKi8NCiAgc3RydWN0IFByZW1pbmVyIHsNCiAgICBhZGRyZXNzIGFjY291bnQ7DQogICAgdWludCBtb250aGx5UGF5bWVudDsNCiAgICB1aW50IGxhdGVzdEFsbG9jYXRpb247DQogICAgYm9vbCBkaXNhYmxlZDsNCg0KICAgIHVpbnQgYWxsb2NhdGlvbnNDb3VudDsNCiAgICBtYXBwaW5nKHVpbnQgPT4gdWludCkgYWxsb2NhdGlvbnM7DQogIH0NCg0KICAvKg0KICAgIExpc3Qgb2YgcHJlbWluZXJzDQogICovDQogIG1hcHBpbmcoYWRkcmVzcyA9PiBQcmVtaW5lcikgcHJlbWluZXJzOw0KDQogIC8qDQogICAgVG9rZW4gTmFtZSAmIFRva2VuIFN5bWJvbCAmIERlY2ltYWxzDQogICovDQogIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJXSU5HUyI7DQogIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIldJTkdTIjsNCiAgdWludCBwdWJsaWMgZGVjaW1hbHMgPSAxODsNCg0KICAvKg0KICAgIFRvdGFsIHN1cHBseQ0KICAqLw0KICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseSA9IDEwKioyNjsvLzEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsNCg0KICAvKg0KICAgIFByZW1pbmUgYWxsb2NhdGlvbiBpbnRlcnZhbA0KICAqLw0KICB1aW50IHB1YmxpYyBEQVlTXzI4ID0gMjQxOTIwMDsNCiAgdWludCBwdWJsaWMgREFZU18zMSA9IDI2Nzg0MDA7DQoNCiAgLyoNCiAgICBNYXhpbXVtIHByZW1pbmUgYWxsb2NhdGlvbnMgY291bnQNCiAgKi8NCiAgdWludCBwdWJsaWMgTUFYX0FMTE9DQVRJT05TX0NPVU5UID0gMjY7DQoNCiAgLyoNCiAgICBIb3cgbWFueSBhY2NvdW50cyBhbGxvY2F0ZWQ/DQogICovDQogIHVpbnQgcHVibGljIGFjY291bnRzVG9BbGxvY2F0ZTsNCg0KICAvKg0KICAgIE11bHRpc2lnbmF0dXJlDQogICovDQogIGFkZHJlc3MgcHVibGljIG11bHRpc2lnbmF0dXJlOw0KDQogIC8qDQogICAgT25seSBtdWx0aXNpZ25hdHVyZQ0KICAqLw0KICBtb2RpZmllciBvbmx5TXVsdGlzaWduYXR1cmUoKSB7DQogICAgaWYgKG1zZy5zZW5kZXIgIT0gbXVsdGlzaWduYXR1cmUpIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIF87DQogIH0NCg0KICAvKg0KICAgIFdoZW4gcHJlbWluZXIgaXMgbm90IGRpc2FibGVkDQogICovDQogIG1vZGlmaWVyIHdoZW5QcmVtaW5lcklzbnREaXNhYmxlZChhZGRyZXNzIF9hY2NvdW50KSB7DQogICAgaWYgKHByZW1pbmVyc1tfYWNjb3VudF0uZGlzYWJsZWQgPT0gdHJ1ZSkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgXzsNCiAgfQ0KDQogIC8qDQogICAgTW9kaWZpZXIgZm9yIGNoZWNraW5nIGlzIGFsbG9jYXRpb24gY29tcGxldGVkLg0KICAgIE1heWJlIHdlIHNob3VsZCBhZGQgaGVyZSBwcmUtbWluZSBhY2NvdW50cyB0b28uDQogICovDQogIG1vZGlmaWVyIHdoZW5BbGxvY2F0aW9uKGJvb2wgdmFsdWUpIHsNCiAgICBpZiAoKGFjY291bnRzVG9BbGxvY2F0ZSA+IDApID09IHZhbHVlKSB7DQogICAgICBfOw0KICAgIH0gZWxzZSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogIH0NCg0KICAvKg0KICAgIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBhbGxvY2F0ZWQNCiAgKi8NCiAgbW9kaWZpZXIgd2hlbkFjY291bnRIYXNudEFsbG9jYXRlZChhZGRyZXNzIHVzZXIpIHsNCiAgICBpZiAoYmFsYW5jZXNbdXNlcl0gPT0gMCkgew0KICAgICAgXzsNCiAgICB9IGVsc2Ugew0KICAgICAgdGhyb3c7DQogICAgfQ0KICB9DQoNCiAgLyoNCiAgICBDaGVjayBpZiBwcmVtaW5lciBhbHJlYWR5IGFkZGVkDQogICovDQogIG1vZGlmaWVyIHdoZW5QcmVtaW5lSGFzbnRBbGxvY2F0ZWQoYWRkcmVzcyBwcmVtaW5lcikgew0KICAgIGlmIChwcmVtaW5lcnNbcHJlbWluZXJdLmFjY291bnQgPT0gYWRkcmVzcygwKSkgew0KICAgICAgXzsNCiAgICB9IGVsc2Ugew0KICAgICAgdGhyb3c7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gVG9rZW4odWludCBfYWNjb3VudHNUb0FsbG9jYXRlLCBhZGRyZXNzIF9tdWx0aXNpZ25hdHVyZSkgew0KICAgIC8qDQogICAgICBNYXliZSB3ZSBzaG91bGQgY2FsY3VsYXRlIGl0IGluIGFsbG9jYXRpb24gYW5kIHByZS1taW5lLg0KICAgICAgSSBtZWFuIHRvdGFsIHN1cHBseQ0KICAgICovDQogICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIGFjY291bnRzVG9BbGxvY2F0ZSA9IF9hY2NvdW50c1RvQWxsb2NhdGU7DQogICAgbXVsdGlzaWduYXR1cmUgPSBfbXVsdGlzaWduYXR1cmU7DQogIH0NCg0KICAvKg0KICAgIEFsbG9jYXRlIHRva2VucyBmb3IgdXNlcnMuDQogICAgT25seSBvd25lciBhbmQgb25seSB3aGlsZSBhbGxvY2F0aW9uIGFjdGl2ZS4NCg0KICAgIFNob3VsZCBjaGVjayBpZiB1c2VyIGFsbG9jYXRlZCBhbHJlYWR5IChubyBkb3VibGUgYWxsb2NhdGlvbnMpDQogICovDQogIGZ1bmN0aW9uIGFsbG9jYXRlKGFkZHJlc3MgdXNlciwgdWludCBiYWxhbmNlKSBvbmx5T3duZXIoKSB3aGVuQWxsb2NhdGlvbih0cnVlKSB3aGVuQWNjb3VudEhhc250QWxsb2NhdGVkKHVzZXIpIHsNCiAgICBiYWxhbmNlc1t1c2VyXSA9IGJhbGFuY2U7DQoNCiAgICBhY2NvdW50c1RvQWxsb2NhdGUtLTsNCiAgICBBTExPQ0FUSU9OKHVzZXIsIGJhbGFuY2UpOw0KICB9DQoNCiAgLyoNCiAgICBTdGFuZGFyZCBUb2tlbiBmdW5jdGlvbmFsDQogICovDQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgd2hlbkFsbG9jYXRpb24oZmFsc2UpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7DQogIH0NCg0KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB3aGVuQWxsb2NhdGlvbihmYWxzZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7DQogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICB9DQoNCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgd2hlbkFsbG9jYXRpb24oZmFsc2UpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIHJldHVybiBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpOw0KICB9DQoNCiAgLyoNCiAgICBQcmVtaW5lIGZ1bmN0aW9uYWxpdHkNCiAgKi8NCg0KICAvKg0KICAgIEFkZCBwcmUtbWluZSBhY2NvdW50DQogICovDQogIGZ1bmN0aW9uIGFkZFByZW1pbmVyKGFkZHJlc3MgcHJlbWluZXIsIGFkZHJlc3MgcmVjaXBpZW50LCB1aW50IGluaXRpYWxCYWxhbmNlLCB1aW50IG1vbnRobHlQYXltZW50KSBvbmx5T3duZXIoKSB3aGVuQWxsb2NhdGlvbih0cnVlKSB3aGVuUHJlbWluZUhhc250QWxsb2NhdGVkKHByZW1pbmVyKSB7DQogICAgdmFyIHByZW1pbmUgPSBQcmVtaW5lcigNCiAgICAgICAgcmVjaXBpZW50LA0KICAgICAgICBtb250aGx5UGF5bWVudCwNCiAgICAgICAgMCwNCiAgICAgICAgZmFsc2UsDQogICAgICAgIDANCiAgICAgICk7DQoNCg0KICAgIGJhbGFuY2VzW3JlY2lwaWVudF0gPSBzYWZlQWRkKGJhbGFuY2VzW3JlY2lwaWVudF0sIGluaXRpYWxCYWxhbmNlKTsNCiAgICBwcmVtaW5lcnNbcHJlbWluZXJdID0gcHJlbWluZTsNCiAgICBhY2NvdW50c1RvQWxsb2NhdGUtLTsNCiAgICBQUkVNSU5FUl9BRERFRChwcmVtaW5lciwgcHJlbWluZS5hY2NvdW50LCBpbml0aWFsQmFsYW5jZSk7DQogIH0NCg0KICAvKg0KICAgIERpc2FibGUgcHJlLW1pbmVyDQogICovDQogIGZ1bmN0aW9uIGRpc2FibGVQcmVtaW5lcihhZGRyZXNzIF9wcmVtaW5lciwgYWRkcmVzcyBfbmV3UHJlbWluZXIsIGFkZHJlc3MgX25ld1JlY2lwaWVudCkgb25seU11bHRpc2lnbmF0dXJlKCkgd2hlblByZW1pbmVySXNudERpc2FibGVkKF9wcmVtaW5lcikgew0KICAgIHZhciBvbGRQcmVtaW5lciA9IHByZW1pbmVyc1tfcHJlbWluZXJdOw0KDQogICAgaWYgKG9sZFByZW1pbmVyLmFjY291bnQgPT0gYWRkcmVzcygwKSB8fCBwcmVtaW5lcnNbX25ld1ByZW1pbmVyXS5hY2NvdW50ICE9IGFkZHJlc3MoMCkpIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIHByZW1pbmVyc1tfbmV3UHJlbWluZXJdID0gb2xkUHJlbWluZXI7DQogICAgcHJlbWluZXJzW19uZXdQcmVtaW5lcl0uYWNjb3VudCA9IF9uZXdSZWNpcGllbnQ7DQogICAgb2xkUHJlbWluZXIuZGlzYWJsZWQgPSB0cnVlOw0KDQogICAgaWYocHJlbWluZXJzW19uZXdQcmVtaW5lcl0uZGlzYWJsZWQgPT0gdHJ1ZSkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgcHJlbWluZXJzW19uZXdQcmVtaW5lcl0uYWxsb2NhdGlvbnNDb3VudDsgaSsrKSB7DQogICAgICBwcmVtaW5lcnNbX25ld1ByZW1pbmVyXS5hbGxvY2F0aW9uc1tpXSA9IG9sZFByZW1pbmVyLmFsbG9jYXRpb25zW2ldOw0KICAgIH0NCg0KICAgIFBSRU1JTkVSX0NIQU5HRUQoX3ByZW1pbmVyLCBfbmV3UHJlbWluZXIsIF9uZXdSZWNpcGllbnQpOw0KICB9DQoNCiAgLyoNCiAgICBBZGQgcHJlLW1pbmUgYWxsb2NhdGlvbg0KICAqLw0KICBmdW5jdGlvbiBhZGRQcmVtaW5lQWxsb2NhdGlvbihhZGRyZXNzIF9wcmVtaW5lciwgdWludCBfdGltZSkgb25seU93bmVyKCkgd2hlbkFsbG9jYXRpb24odHJ1ZSkgd2hlblByZW1pbmVySXNudERpc2FibGVkKF9wcmVtaW5lcikgew0KICAgIHZhciBwcmVtaW5lciA9IHByZW1pbmVyc1tfcHJlbWluZXJdOw0KDQogICAgaWYgKHByZW1pbmVyLmFjY291bnQgPT0gYWRkcmVzcygwKSB8fCAgX3RpbWUgPT0gMCB8fCBwcmVtaW5lci5hbGxvY2F0aW9uc0NvdW50ID09IE1BWF9BTExPQ0FUSU9OU19DT1VOVCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgaWYgKHByZW1pbmVyLmFsbG9jYXRpb25zQ291bnQgPiAwKSB7DQogICAgICB2YXIgcHJldmlvdXNBbGxvY2F0aW9uID0gcHJlbWluZXIuYWxsb2NhdGlvbnNbcHJlbWluZXIuYWxsb2NhdGlvbnNDb3VudC0xXTsNCg0KICAgICAgaWYgKHByZXZpb3VzQWxsb2NhdGlvbiA+IF90aW1lKSB7DQogICAgICAgIHRocm93Ow0KICAgICAgfQ0KDQogICAgICBpZiAocHJldmlvdXNBbGxvY2F0aW9uICsgREFZU18yOCA+IF90aW1lKSB7DQogICAgICAgIHRocm93Ow0KICAgICAgfQ0KDQogICAgICBpZiAocHJldmlvdXNBbGxvY2F0aW9uICsgREFZU18zMSA8IF90aW1lKSB7DQogICAgICAgIHRocm93Ow0KICAgICAgfQ0KICAgIH0NCg0KICAgIHByZW1pbmVyLmFsbG9jYXRpb25zW3ByZW1pbmVyLmFsbG9jYXRpb25zQ291bnQrK10gPSBfdGltZTsNCiAgICBQUkVNSU5FX0FMTE9DQVRJT05fQURERUQoX3ByZW1pbmVyLCBfdGltZSk7DQogIH0NCg0KICAvKg0KICAgIEdldCBwcmVtaW5lcg0KICAqLw0KICBmdW5jdGlvbiBnZXRQcmVtaW5lcihhZGRyZXNzIF9wcmVtaW5lcikgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcywgYm9vbCwgdWludCwgdWludCwgdWludCkgew0KICAgIHZhciBwcmVtaW5lciA9IHByZW1pbmVyc1tfcHJlbWluZXJdOw0KDQogICAgcmV0dXJuIChwcmVtaW5lci5hY2NvdW50LCBwcmVtaW5lci5kaXNhYmxlZCwgcHJlbWluZXIubW9udGhseVBheW1lbnQsIHByZW1pbmVyLmxhdGVzdEFsbG9jYXRpb24sIHByZW1pbmVyLmFsbG9jYXRpb25zQ291bnQpOw0KICB9DQoNCiAgLyoNCiAgICBHZXQgcHJlbWluZXIgYWxsb2NhdGlvbiB0aW1lIGJ5IGluZGV4DQogICovDQogIGZ1bmN0aW9uIGdldFByZW1pbmVyQWxsb2NhdGlvbihhZGRyZXNzIF9wcmVtaW5lciwgdWludCBfaW5kZXgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsNCiAgICByZXR1cm4gcHJlbWluZXJzW19wcmVtaW5lcl0uYWxsb2NhdGlvbnNbX2luZGV4XTsNCiAgfQ0KDQogIC8qDQogICAgUmVsZWFzZSBwcmVtaW5lIHdoZW4gcHJlbWluZXIgYXNraW5nDQogICAgR2FzIHVzYWdlOiAweDU3ODYgb3IgMjI0MDYgR0FTLg0KICAgIE1heGltdW0gaXMgMjYgbW9udGhzIG9mIHByZS1taW5lIGluIGNhc2Ugb2YgV2luZ3MuIFNvIHNob3VsZCBiZSBlbm91Z2ggdG8gZXhlY3V0ZSBpdC4NCiAgKi8NCiAgZnVuY3Rpb24gcmVsZWFzZVByZW1pbmUoKSB3aGVuQWxsb2NhdGlvbihmYWxzZSkgd2hlblByZW1pbmVySXNudERpc2FibGVkKG1zZy5zZW5kZXIpIHsNCiAgICB2YXIgcHJlbWluZXIgPSBwcmVtaW5lcnNbbXNnLnNlbmRlcl07DQoNCiAgICBpZiAocHJlbWluZXIuYWNjb3VudCA9PSBhZGRyZXNzKDApKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBmb3IgKHVpbnQgaSA9IHByZW1pbmVyLmxhdGVzdEFsbG9jYXRpb247IGkgPCBwcmVtaW5lci5hbGxvY2F0aW9uc0NvdW50OyBpKyspIHsNCiAgICAgIGlmIChwcmVtaW5lci5hbGxvY2F0aW9uc1tpXSA8IGJsb2NrLnRpbWVzdGFtcCkgew0KICAgICAgICBpZiAocHJlbWluZXIuYWxsb2NhdGlvbnNbaV0gPT0gMCkgew0KICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgYmFsYW5jZXNbcHJlbWluZXIuYWNjb3VudF0gPSBzYWZlQWRkKGJhbGFuY2VzW3ByZW1pbmVyLmFjY291bnRdLCBwcmVtaW5lci5tb250aGx5UGF5bWVudCk7DQogICAgICAgIHByZW1pbmVyLmxhdGVzdEFsbG9jYXRpb24gPSBpOw0KDQogICAgICAgIFBSRU1JTkVfUkVMRUFTRShwcmVtaW5lci5hY2NvdW50LCBwcmVtaW5lci5hbGxvY2F0aW9uc1tpXSwgcHJlbWluZXIubW9udGhseVBheW1lbnQpOw0KICAgICAgICBwcmVtaW5lci5hbGxvY2F0aW9uc1tpXSA9IDA7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0='