base 64 content
base64tokenPurchase
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQpjb250cmFjdCBPd25hYmxlIHsNCiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQoNCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsNCiAgICBvd25lciA9IG1zZy5zZW5kZXI7DQogIH0NCg0KICBtb2RpZmllciBvbmx5T3duZXIoKSB7DQogICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCiAgICBfOw0KICB9DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsNCiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgew0KICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICB9DQogIH0NCg0KfQ0KDQpjb250cmFjdCBLaWxsYWJsZSBpcyBPd25hYmxlIHsNCiAgZnVuY3Rpb24ga2lsbCgpIG9ubHlPd25lciB7DQogICAgc2VsZmRlc3RydWN0KG93bmVyKTsNCiAgfQ0KfQ0KDQpjb250cmFjdCBFUkMyMCB7DQogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5Ow0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOw0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCg0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsNCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7DQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsNCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7DQogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KfQ0KDQpjb250cmFjdCBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICB1aW50IGMgPSBhICogYjsNCiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gc2FmZURpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIGFzc2VydChiID4gMCk7DQogICAgdWludCBjID0gYSAvIGI7DQogICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgcmV0dXJuIGEgLSBiOw0KICB9DQoNCiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKyBiOw0KICAgIGFzc2VydChjPj1hICYmIGM+PWIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsNCiAgICBpZiAoIWFzc2VydGlvbikgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICB9DQp9DQoNCg0KLy8vIEB0aXRsZSBWZXJpdGFzZXVtIFB1cmNoYXNlDQovLy8gQGF1dGhvciBSaWFhbiBGIFZlbnRlcn4gUkZWZW50ZXJ+IDxtc2dAcmZ2LmlvPg0KY29udHJhY3QgVG9rZW5QdXJjaGFzZSBpcyBPd25hYmxlLCBLaWxsYWJsZSwgU2FmZU1hdGggew0KDQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgc3RhcnRUaW1lID0gMTQ5MzEzMDYwMDsgICAgICAgICAgICAvLyAyMDE3IEFwcmlsIDI1dGggOTozMCBFU1QgKDE0OjMwIFVUQykNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBjbG9zZVRpbWUgPSBzdGFydFRpbWUgKyAzMSBkYXlzOyAgIC8vIElDTyB3aWxsIHJ1biBmb3IgMzEgZGF5cw0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IHByaWNlID0gMzMzMzMzMzMzMzMzMzMzMzM7ICAgICAgICAgLy8gRWFjaCB0b2tlbiBoYXMgMTggZGVjaW1hbCBwbGFjZXMsIGp1c3QgbGlrZSBldGhlci4NCiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgcHJpY2VEYXlPbmUgPSBwcmljZSAqIDggLyAxMDsgICAgIC8vIERheSBvbmUgcHJpY2UgWzIwICUgZGlzY291bnQgKHggKiA4IC8gMTApXQ0KICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBwcmljZURheVR3byA9IHByaWNlICogOSAvIDEwOyAgICAgLy8gRGF5IHR3byBwcmljZSBbMTAgJSBkaXNjb3VudCAoeCAqIDkgLyAxMCldDQoNCiAgICBFUkMyMCBwdWJsaWMgdG9rZW47ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbiANCg0KICAgIC8vIC8vLy8gdGltZSB0ZXN0IGZ1bmN0aW9uYWxpdHkgLy8vLy8NCiAgICAvLyB1aW50IHB1YmxpYyBub3c7ICAgICAgICAgICAgICAgIC8vDQogICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLw0KICAgIC8vIGZ1bmN0aW9uIHNldE5vdyh1aW50IF90aW1lKSB7ICAgLy8NCiAgICAvLyAgICAgbm93ID0gX3RpbWU7ICAgICAgICAgICAgICAgIC8vDQogICAgLy8gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLw0KICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCg0KICAgIC8vLyBAbm90aWNlIFVzZWQgdG8gYnV5IHRva2VucyB3aXRoIEV0aGVyDQogICAgLy8vIEByZXR1cm4gVGhlIGFtb3VudCBvZiBhY3R1YWwgdG9rZW5zIHB1cmNoYXNlZA0KICAgIGZ1bmN0aW9uIHB1cmNoYXNlVG9rZW5zKCkgcGF5YWJsZSByZXR1cm5zICh1aW50KSB7DQogICAgICAgIC8vIGNoZWNrIGlmIG5vdyBpcyB3aXRoaW4gSUNPIHBlcmlvZCwgb3IgaWYgdGhlIGFtb3VudCBzZW50IGlzIG5vdGhpbmcNCiAgICAgICAgaWYgKChub3cgPCBzdGFydFRpbWUpIHx8IChub3cgPiBjbG9zZVRpbWUpIHx8IChtc2cudmFsdWUgPT0gMCkpIHRocm93Ow0KICAgICAgICANCiAgICAgICAgdWludCBjdXJyZW50UHJpY2U7DQogICAgICAgIC8vIG9ubHkgdXNpbmcgc2FmZU1hdGggZm9yIGNhbGN1bGF0aW9ucyBpbnZvbHZpbmcgZXh0ZXJuYWwgaW5jb21pbmcgZGF0YSAodG8gc2FmZSBnYXMpDQogICAgICAgIGlmIChub3cgPCAoc3RhcnRUaW1lICsgMSBkYXlzKSkgeyAgICAgICAvLyBkYXkgb25lIGRpc2NvdW50DQogICAgICAgICAgICBjdXJyZW50UHJpY2UgPSBwcmljZURheU9uZTsNCiAgICAgICAgfSANCiAgICAgICAgZWxzZSBpZiAobm93IDwgKHN0YXJ0VGltZSArIDIgZGF5cykpIHsgIC8vIGRheSB0d28gZGlzY291bnQNCiAgICAgICAgICAgIGN1cnJlbnRQcmljZSA9IHByaWNlRGF5VHdvOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKG5vdyA8IChzdGFydFRpbWUgKyAxMiBkYXlzKSkgew0KICAgICAgICAgICAgLy8gMSAlIHJlZHVjdGlvbiBpbiB0aGUgZGlzY291bnRlZCByYXRlIGZyb20gZGF5IDIgdW50aWwgZGF5IDEyIChzbGlkaW5nIHNjYWxlIHBlciBzZWNvbmQpDQogICAgICAgICAgICBjdXJyZW50UHJpY2UgPSBwcmljZSAtICgoc3RhcnRUaW1lICsgMTIgZGF5cyAtIG5vdykgKiBwcmljZSAvIDEwMCBkYXlzKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGN1cnJlbnRQcmljZSA9IHByaWNlOw0KICAgICAgICB9DQogICAgICAgIHVpbnQgdG9rZW5zID0gc2FmZU11bChtc2cudmFsdWUsIDEgZXRoZXIpIC8gY3VycmVudFByaWNlOyAgICAgICAvLyBvbmx5IG9uZSBzYWZlTWF0aCBjaGVjayBpcyByZXF1aXJlZCBmb3IgdGhlIGluY29taW5nIGV0aGVyIHZhbHVlDQoNCiAgICAgICAgaWYgKCF0b2tlbi50cmFuc2ZlckZyb20ob3duZXIsIG1zZy5zZW5kZXIsIHRva2VucykpIHRocm93OyAgICAgIC8vIGlmIHRoZXJlIGlzIHNvbWUgZXJyb3Igd2l0aCB0aGUgdG9rZW4gdHJhbnNmZXIsIHRocm93IGFuZCByZXR1cm4gdGhlIEV0aGVyDQoNCiAgICAgICAgcmV0dXJuIHRva2VuczsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIHN1Y2Nlc3NmdWwgcHVyY2hhc2UsIHJldHVybiB0aGUgYW1vdW50IG9mIHRva2VucyBwdXJjaGFzZWQgdmFsdWUNCiAgICB9DQoNCiAgICAvLy8vLy8vLy8vLy8vLy8vIG93bmVyIG9ubHkgZnVuY3Rpb25zIGJlbG93DQoNCiAgICAvLy8gQG5vdGljZSBXaXRoZHJhdyBhbGwgRXRoZXIgaW4gdGhpcyBjb250cmFjdA0KICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgc3VjY2Vzc2Z1bA0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3RXRoZXIoKSBwYXlhYmxlIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiBvd25lci5zZW5kKHRoaXMuYmFsYW5jZSk7DQogICAgfQ0KDQogICAgLy8vIEBub3RpY2Ugc2V0cyB0aGUgdG9rZW4gdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGlzIExvdHRlcnkNCiAgICAvLy8gQHBhcmFtIF90b2tlbiBUaGUgYWRkcmVzcyBvZiB0aGUgRVJDMjAgdG9rZW4NCiAgICBmdW5jdGlvbiBzZXRUb2tlbihhZGRyZXNzIF90b2tlbikgZXh0ZXJuYWwgb25seU93bmVyIHsgICAgIA0KICAgICAgICB0b2tlbiA9IEVSQzIwKF90b2tlbik7DQogICAgfQ0KfQ=='