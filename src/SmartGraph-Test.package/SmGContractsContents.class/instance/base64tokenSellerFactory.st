base 64 content
base64tokenSellerFactory
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC40Ow0KDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIFRva2VuU2VsbGVyRmFjdG9yeQ0KLy8NCi8vIERlY2VudHJhbGlzZWQgdHJ1c3RsZXNzIEVSQzIwLXBhcnRpYWxseS1jb21wbGlhbnQgdG9rZW4gdG8gRVRIIGV4Y2hhbmdlDQovLyBjb250cmFjdCBvbiB0aGUgRXRoZXJldW0gYmxvY2tjaGFpbi4NCi8vDQovLyBUaGlzIGNhdGVycyBmb3IgdGhlIEdvbGVtIE5ldHdvcmsgVG9rZW4gd2hpY2ggZG9lcyBub3QgaW1wbGVtZW50IHRoZQ0KLy8gRVJDMjAgdHJhbnNmZXJGcm9tKC4uLiksIGFwcHJvdmUoLi4uKSBhbmQgYWxsb3dhbmNlKC4uLikgbWV0aG9kcw0KLy8NCi8vIEhpc3Rvcnk6DQovLyAgIEphbiAyNSAyMDE3IC0gQlBCIEFkZGVkIG1ha2VyVHJhbnNmZXJBc3NldCguLi4pDQovLyAgIEZlYiAwNSAyMDE3IC0gQlBCIEJ1ZyBmaXggaW4gdGhlIGNoYW5nZSBjYWxjdWxhdGlvbiBmb3IgdGhlIFVuaWNvcm4NCi8vICAgICAgICAgICAgICAgICAgICAgdG9rZW4gd2l0aCBuYXR1cmFsIG51bWJlciAxDQovLw0KLy8gRW5qb3kuIChjKSBKb25ueUxhdHRlLCBDaW50aXggJiBCb2treVBvb0JhaCAyMDE3LiBUaGUgTUlUIGxpY2VuY2UuDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQpjb250cmFjdCBFUkMyMFBhcnRpYWwgew0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCB0b3RhbFN1cHBseSk7DQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsNCiAgICAvLyBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOw0KICAgIC8vIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQogICAgLy8gZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7DQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7DQogICAgLy8gZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7DQp9DQoNCmNvbnRyYWN0IE93bmVkIHsNCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOw0KDQogICAgZnVuY3Rpb24gT3duZWQoKSB7DQogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5T3duZXIgew0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsNCiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsNCiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsNCiAgICB9DQp9DQoNCi8vIGNvbnRyYWN0IGNhbiBzZWxsIHRva2VucyBmb3IgRVRIDQovLyBwcmljZXMgYXJlIGluIGFtb3VudCBvZiB3ZWkgcGVyIGJhdGNoIG9mIHRva2VuIHVuaXRzDQoNCmNvbnRyYWN0IFRva2VuU2VsbGVyIGlzIE93bmVkIHsNCg0KICAgIGFkZHJlc3MgcHVibGljIGFzc2V0OyAgICAgICAvLyBhZGRyZXNzIG9mIHRva2VuDQogICAgdWludDI1NiBwdWJsaWMgc2VsbFByaWNlOyAgIC8vIGNvbnRyYWN0IHNlbGxzIGxvdHMgb2YgdG9rZW5zIGF0IHRoaXMgcHJpY2UNCiAgICB1aW50MjU2IHB1YmxpYyB1bml0czsgICAgICAgLy8gbG90IHNpemUgKHRva2VuLXdlaSkNCg0KICAgIGJvb2wgcHVibGljIHNlbGxzVG9rZW5zOyAgICAvLyBpcyBjb250cmFjdCBzZWxsaW5nDQoNCiAgICBldmVudCBBY3RpdmF0ZWRFdmVudChib29sIHNlbGxzKTsNCiAgICBldmVudCBNYWtlcldpdGhkcmV3QXNzZXQodWludDI1NiB0b2tlbnMpOw0KICAgIGV2ZW50IE1ha2VyVHJhbnNmZXJyZWRBc3NldChhZGRyZXNzIHRvVG9rZW5TZWxsZXIsIHVpbnQyNTYgdG9rZW5zKTsNCiAgICBldmVudCBNYWtlcldpdGhkcmV3RVJDMjBUb2tlbihhZGRyZXNzIHRva2VuQWRkcmVzcywgdWludDI1NiB0b2tlbnMpOw0KICAgIGV2ZW50IE1ha2VyV2l0aGRyZXdFdGhlcih1aW50MjU2IGV0aGVycyk7DQogICAgZXZlbnQgVGFrZXJCb3VnaHRBc3NldChhZGRyZXNzIGluZGV4ZWQgYnV5ZXIsIHVpbnQyNTYgZXRoZXJzU2VudCwNCiAgICAgICAgdWludDI1NiBldGhlcnNSZXR1cm5lZCwgdWludDI1NiB0b2tlbnNCb3VnaHQpOw0KDQogICAgLy8gQ29uc3RydWN0b3IgLSBvbmx5IHRvIGJlIGNhbGxlZCBieSB0aGUgVG9rZW5TZWxsZXJGYWN0b3J5IGNvbnRyYWN0DQogICAgZnVuY3Rpb24gVG9rZW5TZWxsZXIgKA0KICAgICAgICBhZGRyZXNzIF9hc3NldCwNCiAgICAgICAgdWludDI1NiBfc2VsbFByaWNlLA0KICAgICAgICB1aW50MjU2IF91bml0cywNCiAgICAgICAgYm9vbCAgICBfc2VsbHNUb2tlbnMNCiAgICApIHsNCiAgICAgICAgYXNzZXQgICAgICAgPSBfYXNzZXQ7DQogICAgICAgIHNlbGxQcmljZSAgID0gX3NlbGxQcmljZTsNCiAgICAgICAgdW5pdHMgICAgICAgPSBfdW5pdHM7DQogICAgICAgIHNlbGxzVG9rZW5zID0gX3NlbGxzVG9rZW5zOw0KICAgICAgICBBY3RpdmF0ZWRFdmVudChzZWxsc1Rva2Vucyk7DQogICAgfQ0KDQogICAgLy8gTWFrZXIgY2FuIGFjdGl2YXRlIG9yIGRlYWN0aXZhdGUgdGhpcyBjb250cmFjdCdzDQogICAgLy8gc2VsbGluZyBzdGF0dXMNCiAgICAvLw0KICAgIC8vIFRoZSBBY3RpdmF0ZWRFdmVudCgpIGV2ZW50IGlzIGxvZ2dlZCB3aXRoIHRoZSBmb2xsb3dpbmcNCiAgICAvLyBwYXJhbWV0ZXI6DQogICAgLy8gICBzZWxsc1Rva2VucyAgdGhpcyBjb250cmFjdCBjYW4gc2VsbCBhc3NldCB0b2tlbnMNCiAgICBmdW5jdGlvbiBhY3RpdmF0ZSAoDQogICAgICAgIGJvb2wgX3NlbGxzVG9rZW5zDQogICAgKSBvbmx5T3duZXIgew0KICAgICAgICBzZWxsc1Rva2VucyA9IF9zZWxsc1Rva2VuczsNCiAgICAgICAgQWN0aXZhdGVkRXZlbnQoc2VsbHNUb2tlbnMpOw0KICAgIH0NCg0KICAgIC8vIE1ha2VyIGNhbiB3aXRoZHJhdyBhc3NldCB0b2tlbnMgZnJvbSB0aGlzIGNvbnRyYWN0LCB3aXRoIHRoZQ0KICAgIC8vIGZvbGxvd2luZyBwYXJhbWV0ZXI6DQogICAgLy8gICB0b2tlbnMgIGlzIHRoZSBudW1iZXIgb2YgYXNzZXQgdG9rZW5zIHRvIGJlIHdpdGhkcmF3bg0KICAgIC8vDQogICAgLy8gVGhlIE1ha2VyV2l0aGRyZXdBc3NldCgpIGV2ZW50IGlzIGxvZ2dlZCB3aXRoIHRoZSBmb2xsb3dpbmcNCiAgICAvLyBwYXJhbWV0ZXI6DQogICAgLy8gICB0b2tlbnMgIGlzIHRoZSBudW1iZXIgb2YgdG9rZW5zIHdpdGhkcmF3biBieSB0aGUgbWFrZXINCiAgICAvLw0KICAgIC8vIFRoaXMgbWV0aG9kIHdhcyBjYWxsZWQgd2l0aGRyYXdBc3NldCgpIGluIHRoZSBvbGQgdmVyc2lvbg0KICAgIGZ1bmN0aW9uIG1ha2VyV2l0aGRyYXdBc3NldCh1aW50MjU2IHRva2Vucykgb25seU93bmVyIHJldHVybnMgKGJvb2wgb2spIHsNCiAgICAgICAgTWFrZXJXaXRoZHJld0Fzc2V0KHRva2Vucyk7DQogICAgICAgIHJldHVybiBFUkMyMFBhcnRpYWwoYXNzZXQpLnRyYW5zZmVyKG93bmVyLCB0b2tlbnMpOw0KICAgIH0NCg0KICAgIC8vIE1ha2VyIGNhbiB0cmFuc2ZlciBhc3NldCB0b2tlbnMgZnJvbSB0aGlzIGNvbnRyYWN0IHRvIGFub3RoZXINCiAgICAvLyBUb2tlblNlbGxlciBjb250cmFjdCwgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcjoNCiAgICAvLyAgIHRvVG9rZW5TZWxsZXIgIEFub3RoZXIgVG9rZW5TZWxsZXIgY29udHJhY3Qgb3duZWQgYnkgdGhlDQogICAgLy8gICAgICAgICAgICAgICAgICBzYW1lIG93bmVyDQogICAgLy8gICB0b2tlbnMgICAgICAgICBpcyB0aGUgbnVtYmVyIG9mIGFzc2V0IHRva2VucyB0byBiZSBtb3ZlZA0KICAgIC8vDQogICAgLy8gVGhlIE1ha2VyVHJhbnNmZXJyZWRBc3NldCgpIGV2ZW50IGlzIGxvZ2dlZCB3aXRoIHRoZSBmb2xsb3dpbmcNCiAgICAvLyBwYXJhbWV0ZXJzOg0KICAgIC8vICAgdG9Ub2tlblNlbGxlciAgVGhlIG90aGVyIFRva2VuU2VsbGVyIGNvbnRyYWN0IG93bmVkIGJ5DQogICAgLy8gICAgICAgICAgICAgICAgICB0aGUgc2FtZSBvd25lcg0KICAgIC8vICAgdG9rZW5zICAgICAgICAgaXMgdGhlIG51bWJlciBvZiB0b2tlbnMgdHJhbnNmZXJyZWQNCiAgICAvLw0KICAgIC8vIFRoZSBhc3NldCBUcmFuc2ZlcigpIGV2ZW50IGlzIGxvZ2dlZCBmcm9tIHRoaXMgY29udHJhY3QgdG8NCiAgICAvLyB0aGUgb3RoZXIgY29udHJhY3QNCiAgICAvLw0KICAgIGZ1bmN0aW9uIG1ha2VyVHJhbnNmZXJBc3NldCgNCiAgICAgICAgVG9rZW5TZWxsZXIgdG9Ub2tlblNlbGxlciwNCiAgICAgICAgdWludDI1NiB0b2tlbnMNCiAgICApIG9ubHlPd25lciByZXR1cm5zIChib29sIG9rKSB7DQogICAgICAgIGlmIChvd25lciAhPSB0b1Rva2VuU2VsbGVyLm93bmVyKCkgfHwgYXNzZXQgIT0gdG9Ub2tlblNlbGxlci5hc3NldCgpKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICBNYWtlclRyYW5zZmVycmVkQXNzZXQodG9Ub2tlblNlbGxlciwgdG9rZW5zKTsNCiAgICAgICAgcmV0dXJuIEVSQzIwUGFydGlhbChhc3NldCkudHJhbnNmZXIodG9Ub2tlblNlbGxlciwgdG9rZW5zKTsNCiAgICB9DQoNCiAgICAvLyBNYWtlciBjYW4gd2l0aGRyYXcgYW55IEVSQzIwIGFzc2V0IHRva2VucyBmcm9tIHRoaXMgY29udHJhY3QNCiAgICAvLw0KICAgIC8vIFRoaXMgbWV0aG9kIGlzIGluY2x1ZGVkIGluIHRoZSBjYXNlIHdoZXJlIHRoaXMgY29udHJhY3QgcmVjZWl2ZXMNCiAgICAvLyB0aGUgd3JvbmcgdG9rZW5zDQogICAgLy8NCiAgICAvLyBUaGUgTWFrZXJXaXRoZHJld0VSQzIwVG9rZW4oKSBldmVudCBpcyBsb2dnZWQgd2l0aCB0aGUgZm9sbG93aW5nDQogICAgLy8gcGFyYW1ldGVyOg0KICAgIC8vICAgdG9rZW5BZGRyZXNzICBpcyB0aGUgYWRkcmVzcyBvZiB0aGUgdG9rZW5zIHdpdGhkcmF3biBieSB0aGUgbWFrZXINCiAgICAvLyAgIHRva2VucyAgICAgICAgaXMgdGhlIG51bWJlciBvZiB0b2tlbnMgd2l0aGRyYXduIGJ5IHRoZSBtYWtlcg0KICAgIC8vDQogICAgLy8gVGhpcyBtZXRob2Qgd2FzIGNhbGxlZCB3aXRoZHJhd1Rva2VuKCkgaW4gdGhlIG9sZCB2ZXJzaW9uDQogICAgZnVuY3Rpb24gbWFrZXJXaXRoZHJhd0VSQzIwVG9rZW4oDQogICAgICAgIGFkZHJlc3MgdG9rZW5BZGRyZXNzLA0KICAgICAgICB1aW50MjU2IHRva2Vucw0KICAgICkgb25seU93bmVyIHJldHVybnMgKGJvb2wgb2spIHsNCiAgICAgICAgTWFrZXJXaXRoZHJld0VSQzIwVG9rZW4odG9rZW5BZGRyZXNzLCB0b2tlbnMpOw0KICAgICAgICByZXR1cm4gRVJDMjBQYXJ0aWFsKHRva2VuQWRkcmVzcykudHJhbnNmZXIob3duZXIsIHRva2Vucyk7DQogICAgfQ0KDQogICAgLy8gTWFrZXIgd2l0aGRyYXdzIGV0aGVycyBmcm9tIHRoaXMgY29udHJhY3QNCiAgICAvLw0KICAgIC8vIFRoZSBNYWtlcldpdGhkcmV3RXRoZXIoKSBldmVudCBpcyBsb2dnZWQgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcg0KICAgIC8vICAgZXRoZXJzICBpcyB0aGUgbnVtYmVyIG9mIGV0aGVycyB3aXRoZHJhd24gYnkgdGhlIG1ha2VyDQogICAgLy8NCiAgICAvLyBUaGlzIG1ldGhvZCB3YXMgY2FsbGVkIHdpdGhkcmF3KCkgaW4gdGhlIG9sZCB2ZXJzaW9uDQogICAgZnVuY3Rpb24gbWFrZXJXaXRoZHJhd0V0aGVyKHVpbnQyNTYgZXRoZXJzKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBvaykgew0KICAgICAgICBpZiAodGhpcy5iYWxhbmNlID49IGV0aGVycykgew0KICAgICAgICAgICAgTWFrZXJXaXRoZHJld0V0aGVyKGV0aGVycyk7DQogICAgICAgICAgICByZXR1cm4gb3duZXIuc2VuZChldGhlcnMpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gVGFrZXIgYnV5cyBhc3NldCB0b2tlbnMgYnkgc2VuZGluZyBldGhlcnMNCiAgICAvLw0KICAgIC8vIFRoZSBUYWtlckJvdWdodEFzc2V0KCkgZXZlbnQgaXMgbG9nZ2VkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzDQogICAgLy8gICBidXllciAgICAgICAgICAgaXMgdGhlIGJ1eWVyJ3MgYWRkcmVzcw0KICAgIC8vICAgZXRoZXJzU2VudCAgICAgIGlzIHRoZSBudW1iZXIgb2YgZXRoZXJzIHNlbnQgYnkgdGhlIGJ1eWVyDQogICAgLy8gICBldGhlcnNSZXR1cm5lZCAgaXMgdGhlIG51bWJlciBvZiBldGhlcnMgc2VudCBiYWNrIHRvIHRoZSBidXllciBhcw0KICAgIC8vICAgICAgICAgICAgICAgICAgIGNoYW5nZQ0KICAgIC8vICAgdG9rZW5zQm91Z2h0ICAgIGlzIHRoZSBudW1iZXIgb2YgYXNzZXQgdG9rZW5zIHNlbnQgdG8gdGhlIGJ1eWVyDQogICAgLy8NCiAgICAvLyBUaGlzIG1ldGhvZCB3YXMgY2FsbGVkIGJ1eSgpIGluIHRoZSBvbGQgdmVyc2lvbg0KICAgIGZ1bmN0aW9uIHRha2VyQnV5QXNzZXQoKSBwYXlhYmxlIHsNCiAgICAgICAgaWYgKHNlbGxzVG9rZW5zIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpIHsNCiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBzZWxsUHJpY2UgaGFzIGFscmVhZHkgYmVlbiB2YWxpZGF0ZWQgYXMgPiAwDQogICAgICAgICAgICB1aW50IG9yZGVyICAgID0gbXNnLnZhbHVlIC8gc2VsbFByaWNlOw0KICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHVuaXRzIGhhcyBhbHJlYWR5IGJlZW4gdmFsaWRhdGVkIGFzID4gMA0KICAgICAgICAgICAgdWludCBjYW5fc2VsbCA9IEVSQzIwUGFydGlhbChhc3NldCkuYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpIC8gdW5pdHM7DQogICAgICAgICAgICB1aW50MjU2IGNoYW5nZSA9IDA7DQogICAgICAgICAgICBpZiAobXNnLnZhbHVlID4gKGNhbl9zZWxsICogc2VsbFByaWNlKSkgew0KICAgICAgICAgICAgICAgIGNoYW5nZSAgPSBtc2cudmFsdWUgLSAoY2FuX3NlbGwgKiBzZWxsUHJpY2UpOw0KICAgICAgICAgICAgICAgIG9yZGVyID0gY2FuX3NlbGw7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoY2hhbmdlID4gMCkgew0KICAgICAgICAgICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKGNoYW5nZSkpIHRocm93Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG9yZGVyID4gMCkgew0KICAgICAgICAgICAgICAgIGlmICghRVJDMjBQYXJ0aWFsKGFzc2V0KS50cmFuc2Zlcihtc2cuc2VuZGVyLCBvcmRlciAqIHVuaXRzKSkgdGhyb3c7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBUYWtlckJvdWdodEFzc2V0KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgY2hhbmdlLCBvcmRlciAqIHVuaXRzKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBSZXR1cm4gdXNlciBmdW5kcyBpZiB0aGUgY29udHJhY3QgaXMgbm90IHNlbGxpbmcNCiAgICAgICAgZWxzZSBpZiAoIW1zZy5zZW5kZXIuc2VuZChtc2cudmFsdWUpKSB0aHJvdzsNCiAgICB9DQoNCiAgICAvLyBUYWtlciBidXlzIHRva2VucyBieSBzZW5kaW5nIGV0aGVycw0KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgew0KICAgICAgICB0YWtlckJ1eUFzc2V0KCk7DQogICAgfQ0KfQ0KDQovLyBUaGlzIGNvbnRyYWN0IGRlcGxveXMgVG9rZW5TZWxsZXIgY29udHJhY3RzIGFuZCBsb2dzIHRoZSBldmVudA0KY29udHJhY3QgVG9rZW5TZWxsZXJGYWN0b3J5IGlzIE93bmVkIHsNCg0KICAgIGV2ZW50IFRyYWRlTGlzdGluZyhhZGRyZXNzIGluZGV4ZWQgb3duZXJBZGRyZXNzLCBhZGRyZXNzIGluZGV4ZWQgdG9rZW5TZWxsZXJBZGRyZXNzLA0KICAgICAgICBhZGRyZXNzIGluZGV4ZWQgYXNzZXQsIHVpbnQyNTYgc2VsbFByaWNlLCB1aW50MjU2IHVuaXRzLCBib29sIHNlbGxzVG9rZW5zKTsNCiAgICBldmVudCBPd25lcldpdGhkcmV3RVJDMjBUb2tlbihhZGRyZXNzIGluZGV4ZWQgdG9rZW5BZGRyZXNzLCB1aW50MjU2IHRva2Vucyk7DQoNCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgX3ZlcmlmeTsNCg0KICAgIC8vIEFueW9uZSBjYW4gY2FsbCB0aGlzIG1ldGhvZCB0byB2ZXJpZnkgdGhlIHNldHRpbmdzIG9mIGENCiAgICAvLyBUb2tlblNlbGxlciBjb250cmFjdC4gVGhlIHBhcmFtZXRlcnMgYXJlOg0KICAgIC8vICAgdHJhZGVDb250cmFjdCAgaXMgdGhlIGFkZHJlc3Mgb2YgYSBUb2tlblNlbGxlciBjb250cmFjdA0KICAgIC8vDQogICAgLy8gUmV0dXJuIHZhbHVlczoNCiAgICAvLyAgIHZhbGlkICAgICAgICBkaWQgdGhpcyBUb2tlblRyYWRlckZhY3RvcnkgY3JlYXRlIHRoZSBUb2tlblRyYWRlciBjb250cmFjdD8NCiAgICAvLyAgIG93bmVyICAgICAgICBpcyB0aGUgb3duZXIgb2YgdGhlIFRva2VuVHJhZGVyIGNvbnRyYWN0DQogICAgLy8gICBhc3NldCAgICAgICAgaXMgdGhlIEVSQzIwIGFzc2V0IGFkZHJlc3MNCiAgICAvLyAgIHNlbGxQcmljZSAgICBpcyB0aGUgc2VsbCBwcmljZSBpbiBldGhlcnMgcGVyIGB1bml0c2Agb2YgYXNzZXQgdG9rZW5zDQogICAgLy8gICB1bml0cyAgICAgICAgaXMgdGhlIG51bWJlciBvZiB1bml0cyBvZiBhc3NldCB0b2tlbnMNCiAgICAvLyAgIHNlbGxzVG9rZW5zICBpcyB0aGUgVG9rZW5UcmFkZXIgY29udHJhY3Qgc2VsbGluZyB0b2tlbnM/DQogICAgLy8NCiAgICBmdW5jdGlvbiB2ZXJpZnkoYWRkcmVzcyB0cmFkZUNvbnRyYWN0KSBjb25zdGFudCByZXR1cm5zICgNCiAgICAgICAgYm9vbCAgICB2YWxpZCwNCiAgICAgICAgYWRkcmVzcyBvd25lciwNCiAgICAgICAgYWRkcmVzcyBhc3NldCwNCiAgICAgICAgdWludDI1NiBzZWxsUHJpY2UsDQogICAgICAgIHVpbnQyNTYgdW5pdHMsDQogICAgICAgIGJvb2wgICAgc2VsbHNUb2tlbnMNCiAgICApIHsNCiAgICAgICAgdmFsaWQgPSBfdmVyaWZ5W3RyYWRlQ29udHJhY3RdOw0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICAgIFRva2VuU2VsbGVyIHQgPSBUb2tlblNlbGxlcih0cmFkZUNvbnRyYWN0KTsNCiAgICAgICAgICAgIG93bmVyICAgICAgICAgPSB0Lm93bmVyKCk7DQogICAgICAgICAgICBhc3NldCAgICAgICAgID0gdC5hc3NldCgpOw0KICAgICAgICAgICAgc2VsbFByaWNlICAgICA9IHQuc2VsbFByaWNlKCk7DQogICAgICAgICAgICB1bml0cyAgICAgICAgID0gdC51bml0cygpOw0KICAgICAgICAgICAgc2VsbHNUb2tlbnMgICA9IHQuc2VsbHNUb2tlbnMoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIE1ha2VyIGNhbiBjYWxsIHRoaXMgbWV0aG9kIHRvIGNyZWF0ZSBhIG5ldyBUb2tlblNlbGxlciBjb250cmFjdA0KICAgIC8vIHdpdGggdGhlIG1ha2VyIGJlaW5nIHRoZSBvd25lciBvZiB0aGlzIG5ldyBjb250cmFjdA0KICAgIC8vDQogICAgLy8gUGFyYW1ldGVyczoNCiAgICAvLyAgIGFzc2V0ICAgICAgICBpcyB0aGUgRVJDMjAgYXNzZXQgYWRkcmVzcw0KICAgIC8vICAgc2VsbFByaWNlICAgIGlzIHRoZSBzZWxsIHByaWNlIGluIGV0aGVycyBwZXIgYHVuaXRzYCBvZiBhc3NldCB0b2tlbnMNCiAgICAvLyAgIHVuaXRzICAgICAgICBpcyB0aGUgbnVtYmVyIG9mIHVuaXRzIG9mIGFzc2V0IHRva2Vucw0KICAgIC8vICAgc2VsbHNUb2tlbnMgIGlzIHRoZSBUb2tlblNlbGxlciBjb250cmFjdCBzZWxsaW5nIHRva2Vucz8NCiAgICAvLw0KICAgIC8vIEZvciBleGFtcGxlLCBsaXN0aW5nIGEgVG9rZW5TZWxsZXIgY29udHJhY3Qgb24gdGhlIEdOVCBHb2xlbSBOZXR3b3JrIFRva2VuDQogICAgLy8gd2hlcmUgdGhlIGNvbnRyYWN0IHdpbGwgc2VsbCBHTlQgdG9rZW5zIGF0IGEgcmF0ZSBvZiAxNzAvMTAwMDAwID0gMC4wMDE3IEVUSA0KICAgIC8vIHBlciBHTlQgdG9rZW46DQogICAgLy8gICBhc3NldCAgICAgICAgMHhhNzQ0NzY0NDMxMTlhOTQyZGU0OTg1OTBmZTFmMjQ1NGQ3ZDRhYzBkDQogICAgLy8gICBzZWxsUHJpY2UgICAgMTcwDQogICAgLy8gICB1bml0cyAgICAgICAgMTAwMDAwDQogICAgLy8gICBzZWxsc1Rva2VucyAgdHJ1ZQ0KICAgIC8vDQogICAgLy8gVGhlIFRyYWRlTGlzdGluZygpIGV2ZW50IGlzIGxvZ2dlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVycw0KICAgIC8vICAgb3duZXJBZGRyZXNzICAgICAgICBpcyB0aGUgTWFrZXIncyBhZGRyZXNzDQogICAgLy8gICB0b2tlblNlbGxlckFkZHJlc3MgIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBuZXdseSBjcmVhdGVkIFRva2VuU2VsbGVyIGNvbnRyYWN0DQogICAgLy8gICBhc3NldCAgICAgICAgICAgICAgIGlzIHRoZSBFUkMyMCBhc3NldCBhZGRyZXNzDQogICAgLy8gICBzZWxsUHJpY2UgICAgICAgICAgIGlzIHRoZSBzZWxsIHByaWNlIGluIGV0aGVycyBwZXIgYHVuaXRzYCBvZiBhc3NldCB0b2tlbnMNCiAgICAvLyAgIHVuaXQgICAgICAgICAgICAgICAgaXMgdGhlIG51bWJlciBvZiB1bml0cyBvZiBhc3NldCB0b2tlbnMNCiAgICAvLyAgIHNlbGxzVG9rZW5zICAgICAgICAgaXMgdGhlIFRva2VuU2VsbGVyIGNvbnRyYWN0IHNlbGxpbmcgdG9rZW5zPw0KICAgIC8vDQogICAgLy8gVGhpcyBtZXRob2Qgd2FzIGNhbGxlZCBjcmVhdGVUcmFkZUNvbnRyYWN0KCkgaW4gdGhlIG9sZCB2ZXJzaW9uDQogICAgLy8NCiAgICBmdW5jdGlvbiBjcmVhdGVTYWxlQ29udHJhY3QoDQogICAgICAgIGFkZHJlc3MgYXNzZXQsDQogICAgICAgIHVpbnQyNTYgc2VsbFByaWNlLA0KICAgICAgICB1aW50MjU2IHVuaXRzLA0KICAgICAgICBib29sICAgIHNlbGxzVG9rZW5zDQogICAgKSByZXR1cm5zIChhZGRyZXNzIHNlbGxlcikgew0KICAgICAgICAvLyBDYW5ub3QgaGF2ZSBpbnZhbGlkIGFzc2V0DQogICAgICAgIGlmIChhc3NldCA9PSAweDApIHRocm93Ow0KICAgICAgICAvLyBDYW5ub3Qgc2V0IHplcm8gb3IgbmVnYXRpdmUgcHJpY2UNCiAgICAgICAgaWYgKHNlbGxQcmljZSA8PSAwKSB0aHJvdzsNCiAgICAgICAgLy8gQ2Fubm90IHNlbGwgemVybyBvciBuZWdhdGl2ZSB1bml0cw0KICAgICAgICBpZiAodW5pdHMgPD0gMCkgdGhyb3c7DQogICAgICAgIHNlbGxlciA9IG5ldyBUb2tlblNlbGxlcigNCiAgICAgICAgICAgIGFzc2V0LA0KICAgICAgICAgICAgc2VsbFByaWNlLA0KICAgICAgICAgICAgdW5pdHMsDQogICAgICAgICAgICBzZWxsc1Rva2Vucyk7DQogICAgICAgIC8vIFJlY29yZCB0aGF0IHRoaXMgZmFjdG9yeSBjcmVhdGVkIHRoZSB0cmFkZXINCiAgICAgICAgX3ZlcmlmeVtzZWxsZXJdID0gdHJ1ZTsNCiAgICAgICAgLy8gU2V0IHRoZSBvd25lciB0byB3aG9ldmVyIGNhbGxlZCB0aGUgZnVuY3Rpb24NCiAgICAgICAgVG9rZW5TZWxsZXIoc2VsbGVyKS50cmFuc2Zlck93bmVyc2hpcChtc2cuc2VuZGVyKTsNCiAgICAgICAgVHJhZGVMaXN0aW5nKG1zZy5zZW5kZXIsIHNlbGxlciwgYXNzZXQsIHNlbGxQcmljZSwgdW5pdHMsIHNlbGxzVG9rZW5zKTsNCiAgICB9DQoNCiAgICAvLyBGYWN0b3J5IG93bmVyIGNhbiB3aXRoZHJhdyBhbnkgRVJDMjAgYXNzZXQgdG9rZW5zIGZyb20gdGhpcyBjb250cmFjdA0KICAgIC8vDQogICAgLy8gVGhpcyBtZXRob2QgaXMgaW5jbHVkZWQgaW4gdGhlIGNhc2Ugd2hlcmUgdGhpcyBjb250cmFjdCByZWNlaXZlcw0KICAgIC8vIHRoZSB3cm9uZyB0b2tlbnMNCiAgICAvLw0KICAgIC8vIFRoZSBPd25lcldpdGhkcmV3RVJDMjBUb2tlbigpIGV2ZW50IGlzIGxvZ2dlZCB3aXRoIHRoZSBmb2xsb3dpbmcNCiAgICAvLyBwYXJhbWV0ZXI6DQogICAgLy8gICB0b2tlbkFkZHJlc3MgIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbnMgd2l0aGRyYXduIGJ5IHRoZSBtYWtlcg0KICAgIC8vICAgdG9rZW5zICAgICAgICBpcyB0aGUgbnVtYmVyIG9mIHRva2VucyB3aXRoZHJhd24gYnkgdGhlIG1ha2VyDQogICAgZnVuY3Rpb24gb3duZXJXaXRoZHJhd0VSQzIwVG9rZW4oYWRkcmVzcyB0b2tlbkFkZHJlc3MsIHVpbnQyNTYgdG9rZW5zKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBvaykgew0KICAgICAgICBPd25lcldpdGhkcmV3RVJDMjBUb2tlbih0b2tlbkFkZHJlc3MsIHRva2Vucyk7DQogICAgICAgIHJldHVybiBFUkMyMFBhcnRpYWwodG9rZW5BZGRyZXNzKS50cmFuc2Zlcihvd25lciwgdG9rZW5zKTsNCiAgICB9DQoNCiAgICAvLyBQcmV2ZW50cyBhY2NpZGVudGFsIHNlbmRpbmcgb2YgZXRoZXIgdG8gdGhlIGZhY3RvcnkNCiAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIHRocm93Ow0KICAgIH0NCn0='