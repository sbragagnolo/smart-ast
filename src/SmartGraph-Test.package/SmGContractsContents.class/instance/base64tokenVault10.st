base 64 content
base64tokenVault10
	^'LyoNCiAqIEVSQzIwIGludGVyZmFjZQ0KICogc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICovDQpjb250cmFjdCBFUkMyMCB7DQogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5Ow0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOw0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCg0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsNCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7DQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsNCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7DQogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KfQ0KDQoNCg0KLyoqDQogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzDQogKi8NCmNvbnRyYWN0IFNhZmVNYXRoIHsNCiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgYXNzZXJ0KGIgPiAwKTsNCiAgICB1aW50IGMgPSBhIC8gYjsNCiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICBhc3NlcnQoYiA8PSBhKTsNCiAgICByZXR1cm4gYSAtIGI7DQogIH0NCg0KICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSArIGI7DQogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgew0KICAgIGlmICghYXNzZXJ0aW9uKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogIH0NCn0NCg0KDQoNCi8qKg0KICogU3RhbmRhcmQgRVJDMjAgdG9rZW4gd2l0aCBTaG9ydCBIYW5kIEF0dGFjayBhbmQgYXBwcm92ZSgpIHJhY2UgY29uZGl0aW9uIG1pdGlnYXRpb24uDQogKg0KICogQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOg0KICogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sDQogKi8NCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIFNhZmVNYXRoIHsNCg0KICAvKiBUb2tlbiBzdXBwbHkgZ290IGluY3JlYXNlZCBhbmQgYSBuZXcgb3duZXIgcmVjZWl2ZWQgdGhlc2UgdG9rZW5zICovDQogIGV2ZW50IE1pbnRlZChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCk7DQoNCiAgLyogQWN0dWFsIGJhbGFuY2VzIG9mIHRva2VuIGhvbGRlcnMgKi8NCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOw0KDQogIC8qIGFwcHJvdmUoKSBhbGxvd2FuY2VzICovDQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsNCg0KICAvKiBJbnRlcmZhY2UgZGVjbGFyYXRpb24gKi8NCiAgZnVuY3Rpb24gaXNUb2tlbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sIHdlQXJlKSB7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCg0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSwgX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOw0KICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIHVpbnQgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOw0KDQogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsNCiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoX2FsbG93YW5jZSwgX3ZhbHVlKTsNCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsNCiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KDQogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2ANCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdA0KICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOg0KICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQ0KICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7DQoNCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsNCiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgfQ0KDQp9DQoNCg0KDQovKg0KICogT3duYWJsZQ0KICoNCiAqIEJhc2UgY29udHJhY3Qgd2l0aCBhbiBvd25lci4NCiAqIFByb3ZpZGVzIG9ubHlPd25lciBtb2RpZmllciwgd2hpY2ggcHJldmVudHMgZnVuY3Rpb24gZnJvbSBydW5uaW5nIGlmIGl0IGlzIGNhbGxlZCBieSBhbnlvbmUgb3RoZXIgdGhhbiB0aGUgb3duZXIuDQogKi8NCmNvbnRyYWN0IE93bmFibGUgew0KICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCg0KICBmdW5jdGlvbiBPd25hYmxlKCkgew0KICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgfQ0KDQogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsNCiAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICAgIF87DQogIH0NCg0KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgew0KICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7DQogICAgICBvd25lciA9IG5ld093bmVyOw0KICAgIH0NCiAgfQ0KDQp9DQoNCg0KLyoqDQogKiBIb2xkIHRva2VucyBmb3IgYSBncm91cCBpbnZlc3RvciBvZiBpbnZlc3RvcnMgdW50aWwgdGhlIHVubG9jayBkYXRlLg0KICoNCiAqIEFmdGVyIHRoZSB1bmxvY2sgZGF0ZSB0aGUgaW52ZXN0b3IgY2FuIGNsYWltIHRoZWlyIHRva2Vucy4NCiAqDQogKiBTdGVwcw0KICoNCiAqIC0gUHJlcGFyZSBhIHNwcmVhZHNoZWV0IGZvciB0b2tlbiBhbGxvY2F0aW9uDQogKiAtIERlcGxveSB0aGlzIGNvbnRyYWN0LCB3aXRoIHRoZSBzdW0gdG8gdG9rZW5zIHRvIGJlIGRpc3RyaWJ1dGVkLCBmcm9tIHRoZSBvd25lciBhY2NvdW50DQogKiAtIENhbGwgc2V0SW52ZXN0b3IgZm9yIGFsbCBpbnZlc3RvcnMgZnJvbSB0aGUgb3duZXIgYWNjb3VudCB1c2luZyBhIGxvY2FsIHNjcmlwdCBhbmQgQ1NWIGlucHV0DQogKiAtIE1vdmUgdG9rZW5zVG9CZUFsbG9jYXRlZCBpbiB0aGlzIGNvbnRyYWN0IHVzaW5nIFN0YW5kYXJkVG9rZW4udHJhbnNmZXIoKQ0KICogLSBDYWxsIGxvY2sgZnJvbSB0aGUgb3duZXIgYWNjb3VudA0KICogLSBXYWl0IHVudGlsIHRoZSBmcmVlemUgcGVyaW9kIGlzIG92ZXINCiAqIC0gQWZ0ZXIgdGhlIGZyZWV6ZSB0aW1lIGlzIG92ZXIgaW52ZXN0b3JzIGNhbiBjYWxsIGNsYWltKCkgZnJvbSB0aGVpciBhZGRyZXNzIHRvIGdldCB0aGVpciB0b2tlbnMNCiAqDQogKi8NCmNvbnRyYWN0IFRva2VuVmF1bHQgaXMgT3duYWJsZSB7DQoNCiAgLyoqIEhvdyBtYW55IGludmVzdG9ycyB3ZSBoYXZlIG5vdyAqLw0KICB1aW50IHB1YmxpYyBpbnZlc3RvckNvdW50Ow0KDQogIC8qKiBTdW0gZnJvbSB0aGUgc3ByZWFkc2hlZXQgaG93IG11Y2ggdG9rZW5zIHdlIHNob3VsZCBnZXQgb24gdGhlIGNvbnRyYWN0LiBJZiB0aGUgc3VtIGRvZXMgbm90IG1hdGNoIGF0IHRoZSB0aW1lIG9mIHRoZSBsb2NrIHRoZSB2YXVsdCBpcyBmYXVsdHkgYW5kIG11c3QgYmUgcmVjcmVhdGVkLiovDQogIHVpbnQgcHVibGljIHRva2Vuc1RvQmVBbGxvY2F0ZWQ7DQoNCiAgLyoqIEhvdyBtYW55IHRva2VucyBpbnZlc3RvcnMgaGF2ZSBjbGFpbWVkIHNvIGZhciAqLw0KICB1aW50IHB1YmxpYyB0b3RhbENsYWltZWQ7DQoNCiAgLyoqIEhvdyBtYW55IHRva2VucyBvdXIgaW50ZXJuYWwgYm9vayBrZWVwaW5nIHRlbGxzIHVzIHRvIGhhdmUgYXQgdGhlIHRpbWUgb2YgbG9jaygpIHdoZW4gYWxsIGludmVzdG9yIGRhdGEgaGFzIGJlZW4gbG9hZGVkICovDQogIHVpbnQgcHVibGljIHRva2Vuc0FsbG9jYXRlZFRvdGFsOw0KDQogIC8qKiBIb3cgbXVjaCB3ZSBoYXZlIGFsbG9jYXRlZCB0byB0aGUgaW52ZXN0b3JzIGludmVzdGVkICovDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYmFsYW5jZXM7DQoNCiAgLyoqIEhvdyBtYW55IHRva2VucyBpbnZlc3RvcnMgaGF2ZSBjbGFpbWVkICovDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgY2xhaW1lZDsNCg0KICAvKiogV2hlbiBvdXIgY2xhaW0gZnJlZXplIGlzIG92ZXIgKFVOSVggdGltZXN0YW1wKSAqLw0KICB1aW50IHB1YmxpYyBmcmVlemVFbmRzQXQ7DQoNCiAgLyoqIFdoZW4gdGhpcyB2YXVsdCB3YXMgbG9ja2VkIChVTklYIHRpbWVzdGFtcCkgKi8NCiAgdWludCBwdWJsaWMgbG9ja2VkQXQ7DQoNCiAgLyoqIFdlIGNhbiBhbHNvIGRlZmluZSBvdXIgb3duIHRva2VuLCB3aGljaCB3aWxsIG92ZXJyaWRlIHRoZSBJQ08gb25lICoqKi8NCiAgU3RhbmRhcmRUb2tlbiBwdWJsaWMgdG9rZW47DQoNCiAgLyoqIFdoYXQgaXMgb3VyIGN1cnJlbnQgc3RhdGUuDQogICAqDQogICAqIExvYWRpbmc6IEludmVzdG9yIGRhdGEgaXMgYmVpbmcgbG9hZGVkIGFuZCBjb250cmFjdCBub3QgeWV0IGxvY2tlZA0KICAgKiBIb2xkaW5nOiBIb2xkaW5nIHRva2VucyBmb3IgaW52ZXN0b3JzDQogICAqIERpc3RyaWJ1dGluZzogRnJlZXplIHRpbWUgaXMgb3ZlciwgaW52ZXN0b3JzIGNhbiBjbGFpbSB0aGVpciB0b2tlbnMNCiAgICovDQogIGVudW0gU3RhdGV7VW5rbm93biwgTG9hZGluZywgSG9sZGluZywgRGlzdHJpYnV0aW5nfQ0KDQogIC8qKiBXZSBhbGxvY2F0ZWQgdG9rZW5zIGZvciBpbnZlc3RvciAqLw0KICBldmVudCBBbGxvY2F0ZWQoYWRkcmVzcyBpbnZlc3RvciwgdWludCB2YWx1ZSk7DQoNCiAgLyoqIFdlIGRpc3RyaWJ1dGVkIHRva2VucyB0byBhbiBpbnZlc3RvciAqLw0KICBldmVudCBEaXN0cmlidXRlZChhZGRyZXNzIGludmVzdG9ycywgdWludCBjb3VudCk7DQoNCiAgZXZlbnQgTG9ja2VkKCk7DQoNCiAgLyoqDQogICAqIENyZWF0ZSBwcmVzYWxlIGNvbnRyYWN0IHdoZXJlIGxvY2sgdXAgcGVyaW9kIGlzIGdpdmVuIGRheXMNCiAgICoNCiAgICogQHBhcmFtIF9vd25lciBXaG8gY2FuIGxvYWQgaW52ZXN0b3IgZGF0YSBhbmQgbG9jaw0KICAgKiBAcGFyYW0gX2ZyZWV6ZUVuZHNBdCBVTklYIHRpbWVzdGFtcCB3aGVuIHRoZSB2YXVsdCB1bmxvY2tzDQogICAqIEBwYXJhbSBfdG9rZW4gVG9rZW4gY29udHJhY3QgYWRkcmVzcyB3ZSBhcmUgZGlzdHJpYnV0aW5nDQogICAqIEBwYXJhbSBfdG9rZW5zVG9CZUFsbG9jYXRlZCBUb3RhbCBudW1iZXIgb2YgdG9rZW5zIHRoaXMgdmF1bHQgd2lsbCBob2xkIC0gaW5jbHVkaW5nIGRlY2ltYWwgbXVsdGlwbGNhdGlvbg0KICAgKg0KICAgKi8NCiAgZnVuY3Rpb24gVG9rZW5WYXVsdChhZGRyZXNzIF9vd25lciwgdWludCBfZnJlZXplRW5kc0F0LCBTdGFuZGFyZFRva2VuIF90b2tlbiwgdWludCBfdG9rZW5zVG9CZUFsbG9jYXRlZCkgew0KDQogICAgb3duZXIgPSBfb3duZXI7DQoNCiAgICAvLyBJbnZhbGlkIG93ZW5yDQogICAgaWYob3duZXIgPT0gMCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgdG9rZW4gPSBfdG9rZW47DQoNCiAgICAvLyBDaGVjayB0aGUgYWRkcmVzcyBsb29rcyBsaWtlIGEgdG9rZW4gY29udHJhY3QNCiAgICBpZighdG9rZW4uaXNUb2tlbigpKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICAvLyBHaXZlIGFyZ3VtZW50DQogICAgaWYoX2ZyZWV6ZUVuZHNBdCA9PSAwKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICAvLyBTYW5pdHkgY2hlY2sgb24gX3Rva2Vuc1RvQmVBbGxvY2F0ZWQNCiAgICBpZihfdG9rZW5zVG9CZUFsbG9jYXRlZCA9PSAwKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBmcmVlemVFbmRzQXQgPSBfZnJlZXplRW5kc0F0Ow0KICAgIHRva2Vuc1RvQmVBbGxvY2F0ZWQgPSBfdG9rZW5zVG9CZUFsbG9jYXRlZDsNCiAgfQ0KDQogIC8vLyBAZGV2IEFkZCBhIHByZXNhbGUgcGFydGljaXBhdGluZyBhbGxvY2F0aW9uDQogIGZ1bmN0aW9uIHNldEludmVzdG9yKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsNCg0KICAgIGlmKGxvY2tlZEF0ID4gMCkgew0KICAgICAgLy8gQ2Fubm90IGFkZCBuZXcgaW52ZXN0b3JzIGFmdGVyIHRoZSB2YXVsdCBpcyBsb2NrZWQNCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIGlmKGFtb3VudCA9PSAwKSB0aHJvdzsgLy8gTm8gZW1wdHkgYnV5cw0KDQogICAgLy8gRG9uJ3QgYWxsb3cgcmVzZXQNCiAgICBpZihiYWxhbmNlc1tpbnZlc3Rvcl0gPiAwKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBiYWxhbmNlc1tpbnZlc3Rvcl0gPSBhbW91bnQ7DQoNCiAgICBpbnZlc3RvckNvdW50Kys7DQoNCiAgICB0b2tlbnNBbGxvY2F0ZWRUb3RhbCArPSBhbW91bnQ7DQoNCiAgICBBbGxvY2F0ZWQoaW52ZXN0b3IsIGFtb3VudCk7DQogIH0NCg0KICAvLy8gQGRldiBMb2NrIHRoZSB2YXVsdA0KICAvLy8gICAgICAtIEFsbCBiYWxhbmNlcyBoYXZlIGJlZW4gbG9hZGVkIGluIGNvcnJlY3RseQ0KICAvLy8gICAgICAtIFRva2VucyBhcmUgdHJhbnNmZXJyZWQgb24gdGhpcyB2YXVsdCBjb3JyZWN0bHkNCiAgLy8vICAgICAgLSBDaGVja3MgYXJlIGluIHBsYWNlIHRvIHByZXZlbnQgY3JlYXRpbmcgYSB2YXVsdCB0aGF0IGlzIGxvY2tlZCB3aXRoIGluY29ycmVjdCB0b2tlbiBiYWxhbmNlcy4NCiAgZnVuY3Rpb24gbG9jaygpIG9ubHlPd25lciB7DQoNCiAgICBpZihsb2NrZWRBdCA+IDApIHsNCiAgICAgIHRocm93OyAvLyBBbHJlYWR5IGxvY2tlZA0KICAgIH0NCg0KICAgIC8vIFNwcmVhZHNoZWV0IHN1bSBkb2VzIG5vdCBtYXRjaCB0byB3aGF0IHdlIGhhdmUgbG9hZGVkIHRvIHRoZSBpbnZlc3RvciBkYXRhDQogICAgaWYodG9rZW5zQWxsb2NhdGVkVG90YWwgIT0gdG9rZW5zVG9CZUFsbG9jYXRlZCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgLy8gRG8gbm90IGxvY2sgdGhlIHZhdWx0IGlmIHRoZSBnaXZlbiB0b2tlbnMgYXJlIG5vdCBvbiB0aGlzIGNvbnRyYWN0DQogICAgaWYodG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpICE9IHRva2Vuc0FsbG9jYXRlZFRvdGFsKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBsb2NrZWRBdCA9IG5vdzsNCg0KICAgIExvY2tlZCgpOw0KICB9DQoNCiAgLy8vIEBkZXYgSW4gdGhlIGNhc2UgbG9ja2luZyBmYWlsZWQsIHRoZW4gYWxsb3cgdGhlIG93bmVyIHRvIHJlY2xhaW0gdGhlIHRva2VucyBvbiB0aGUgY29udHJhY3QuDQogIGZ1bmN0aW9uIHJlY292ZXJGYWlsZWRMb2NrKCkgb25seU93bmVyIHsNCiAgICBpZihsb2NrZWRBdCA+IDApIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIC8vIFRyYW5zZmVyIGFsbCB0b2tlbnMgb24gdGhpcyBjb250cmFjdCBiYWNrIHRvIHRoZSBvd25lcg0KICAgIHRva2VuLnRyYW5zZmVyKG93bmVyLCB0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkpOw0KICB9DQoNCiAgLy8vIEBkZXYgR2V0IHRoZSBjdXJyZW50IGJhbGFuY2Ugb2YgdG9rZW5zIGluIHRoZSB2YXVsdA0KICAvLy8gQHJldHVybiB1aW50IEhvdyBtYW55IHRva2VucyB0aGVyZSBhcmUgY3VycmVudGx5IGluIHZhdWx0DQogIGZ1bmN0aW9uIGdldEJhbGFuY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBob3dNYW55VG9rZW5zQ3VycmVudGx5SW5WYXVsdCkgew0KICAgIHJldHVybiB0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7DQogIH0NCg0KICAvLy8gQGRldiBDbGFpbSBOIGJvdWdodCB0b2tlbnMgdG8gdGhlIGludmVzdG9yIGFzIHRoZSBtc2cgc2VuZGVyDQogIGZ1bmN0aW9uIGNsYWltKCkgew0KDQogICAgYWRkcmVzcyBpbnZlc3RvciA9IG1zZy5zZW5kZXI7DQoNCiAgICBpZihsb2NrZWRBdCA9PSAwKSB7DQogICAgICB0aHJvdzsgLy8gV2Ugd2VyZSBuZXZlciBsb2NrZWQNCiAgICB9DQoNCiAgICBpZihub3cgPCBmcmVlemVFbmRzQXQpIHsNCiAgICAgIHRocm93OyAvLyBUcnlpbmcgdG8gY2xhaW0gZWFybHkNCiAgICB9DQoNCiAgICBpZihiYWxhbmNlc1tpbnZlc3Rvcl0gPT0gMCkgew0KICAgICAgLy8gTm90IG91ciBpbnZlc3Rvcg0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgaWYoY2xhaW1lZFtpbnZlc3Rvcl0gPiAwKSB7DQogICAgICB0aHJvdzsgLy8gQWxyZWFkeSBjbGFpbWVkDQogICAgfQ0KDQogICAgdWludCBhbW91bnQgPSBiYWxhbmNlc1tpbnZlc3Rvcl07DQoNCiAgICBjbGFpbWVkW2ludmVzdG9yXSA9IGFtb3VudDsNCg0KICAgIHRvdGFsQ2xhaW1lZCArPSBhbW91bnQ7DQoNCiAgICB0b2tlbi50cmFuc2ZlcihpbnZlc3RvciwgYW1vdW50KTsNCg0KICAgIERpc3RyaWJ1dGVkKGludmVzdG9yLCBhbW91bnQpOw0KICB9DQoNCiAgLy8vIEBkZXYgUmVzb2x2ZSB0aGUgY29udHJhY3QgdW1hbWJpZ2lvdXMgc3RhdGUNCiAgZnVuY3Rpb24gZ2V0U3RhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhTdGF0ZSkgew0KICAgIGlmKGxvY2tlZEF0ID09IDApIHsNCiAgICAgIHJldHVybiBTdGF0ZS5Mb2FkaW5nOw0KICAgIH0gZWxzZSBpZihub3cgPiBmcmVlemVFbmRzQXQpIHsNCiAgICAgIHJldHVybiBTdGF0ZS5EaXN0cmlidXRpbmc7DQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiBTdGF0ZS5Ib2xkaW5nOw0KICAgIH0NCiAgfQ0KDQp9'