base 64 content
base64tokenVault9
	^'LyoNCiAqIEVSQzIwIGludGVyZmFjZQ0KICogc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMA0KICovDQpjb250cmFjdCBFUkMyMCB7DQogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5Ow0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOw0KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCg0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsNCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7DQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsNCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7DQogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOw0KfQ0KDQoNCg0KLyoqDQogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzDQogKi8NCmNvbnRyYWN0IFNhZmVNYXRoIHsNCiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgYXNzZXJ0KGIgPiAwKTsNCiAgICB1aW50IGMgPSBhIC8gYjsNCiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICBhc3NlcnQoYiA8PSBhKTsNCiAgICByZXR1cm4gYSAtIGI7DQogIH0NCg0KICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSArIGI7DQogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgew0KICAgIGlmICghYXNzZXJ0aW9uKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogIH0NCn0NCg0KDQoNCi8qKg0KICogU3RhbmRhcmQgRVJDMjAgdG9rZW4gd2l0aCBTaG9ydCBIYW5kIEF0dGFjayBhbmQgYXBwcm92ZSgpIHJhY2UgY29uZGl0aW9uIG1pdGlnYXRpb24uDQogKg0KICogQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOg0KICogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sDQogKi8NCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIFNhZmVNYXRoIHsNCg0KICAvKiBUb2tlbiBzdXBwbHkgZ290IGluY3JlYXNlZCBhbmQgYSBuZXcgb3duZXIgcmVjZWl2ZWQgdGhlc2UgdG9rZW5zICovDQogIGV2ZW50IE1pbnRlZChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCk7DQoNCiAgLyogQWN0dWFsIGJhbGFuY2VzIG9mIHRva2VuIGhvbGRlcnMgKi8NCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOw0KDQogIC8qIGFwcHJvdmUoKSBhbGxvd2FuY2VzICovDQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsNCg0KICAvKiBJbnRlcmZhY2UgZGVjbGFyYXRpb24gKi8NCiAgZnVuY3Rpb24gaXNUb2tlbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sIHdlQXJlKSB7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCg0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSwgX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOw0KICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KICAgIHVpbnQgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOw0KDQogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsNCiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoX2FsbG93YW5jZSwgX3ZhbHVlKTsNCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOw0KICAgIHJldHVybiB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsNCiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykgew0KDQogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2ANCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdA0KICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOg0KICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQ0KICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7DQoNCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsNCiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsNCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsNCiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsNCiAgfQ0KDQp9DQoNCg0KDQovKg0KICogT3duYWJsZQ0KICoNCiAqIEJhc2UgY29udHJhY3Qgd2l0aCBhbiBvd25lci4NCiAqIFByb3ZpZGVzIG9ubHlPd25lciBtb2RpZmllciwgd2hpY2ggcHJldmVudHMgZnVuY3Rpb24gZnJvbSBydW5uaW5nIGlmIGl0IGlzIGNhbGxlZCBieSBhbnlvbmUgb3RoZXIgdGhhbiB0aGUgb3duZXIuDQogKi8NCmNvbnRyYWN0IE93bmFibGUgew0KICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCg0KICBmdW5jdGlvbiBPd25hYmxlKCkgew0KICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgfQ0KDQogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsNCiAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICAgIF87DQogIH0NCg0KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgew0KICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7DQogICAgICBvd25lciA9IG5ld093bmVyOw0KICAgIH0NCiAgfQ0KDQp9DQoNCg0KLyoqDQogKiBIb2xkIHRva2VucyBmb3IgYSBncm91cCBpbnZlc3RvciBvZiBpbnZlc3RvcnMgdW50aWwgdGhlIHVubG9jayBkYXRlLg0KICoNCiAqIEFmdGVyIHRoZSB1bmxvY2sgZGF0ZSB0aGUgaW52ZXN0b3IgY2FuIGNsYWltIHRoZWlyIHRva2Vucy4NCiAqDQogKiBTdGVwcw0KICoNCiAqIC0gUHJlcGFyZSBhIHNwcmVhZHNoZWV0IGZvciB0b2tlbiBhbGxvY2F0aW9uDQogKiAtIERlcGxveSB0aGlzIGNvbnRyYWN0LCB3aXRoIHRoZSBzdW0gdG8gdG9rZW5zIHRvIGJlIGRpc3RyaWJ1dGVkLCBmcm9tIHRoZSBvd25lciBhY2NvdW50DQogKiAtIENhbGwgc2V0SW52ZXN0b3IgZm9yIGFsbCBpbnZlc3RvcnMgZnJvbSB0aGUgb3duZXIgYWNjb3VudCB1c2luZyBhIGxvY2FsIHNjcmlwdCBhbmQgQ1NWIGlucHV0DQogKiAtIE1vdmUgdG9rZW5zVG9CZUFsbG9jYXRlZCBpbiB0aGlzIGNvbnRyYWN0IHVzaW5nIFN0YW5kYXJkVG9rZW4udHJhbnNmZXIoKQ0KICogLSBDYWxsIGxvY2sgZnJvbSB0aGUgb3duZXIgYWNjb3VudA0KICogLSBXYWl0IHVudGlsIHRoZSBmcmVlemUgcGVyaW9kIGlzIG92ZXINCiAqIC0gQWZ0ZXIgdGhlIGZyZWV6ZSB0aW1lIGlzIG92ZXIgaW52ZXN0b3JzIGNhbiBjYWxsIGNsYWltKCkgZnJvbSB0aGVpciBhZGRyZXNzIHRvIGdldCB0aGVpciB0b2tlbnMNCiAqDQogKi8NCmNvbnRyYWN0IFRva2VuVmF1bHQgaXMgT3duYWJsZSB7DQoNCiAgLyoqIEhvdyBtYW55IGludmVzdG9ycyB3ZSBoYXZlIG5vdyAqLw0KICB1aW50IHB1YmxpYyBpbnZlc3RvckNvdW50Ow0KDQogIC8qKiBTdW0gZnJvbSB0aGUgc3ByZWFkc2hlZXQgaG93IG11Y2ggdG9rZW5zIHdlIHNob3VsZCBnZXQgb24gdGhlIGNvbnRyYWN0LiBJZiB0aGUgc3VtIGRvZXMgbm90IG1hdGNoIGF0IHRoZSB0aW1lIG9mIHRoZSBsb2NrIHRoZSB2YXVsdCBpcyBmYXVsdHkgYW5kIG11c3QgYmUgcmVjcmVhdGVkLiovDQogIHVpbnQgcHVibGljIHRva2Vuc1RvQmVBbGxvY2F0ZWQ7DQoNCiAgLyoqIEhvdyBtYW55IHRva2VucyBpbnZlc3RvcnMgaGF2ZSBjbGFpbWVkIHNvIGZhciAqLw0KICB1aW50IHB1YmxpYyB0b3RhbENsYWltZWQ7DQoNCiAgLyoqIEhvdyBtYW55IHRva2VucyBvdXIgaW50ZXJuYWwgYm9vayBrZWVwaW5nIHRlbGxzIHVzIHRvIGhhdmUgYXQgdGhlIHRpbWUgb2YgbG9jaygpIHdoZW4gYWxsIGludmVzdG9yIGRhdGEgaGFzIGJlZW4gbG9hZGVkICovDQogIHVpbnQgcHVibGljIHRva2Vuc0FsbG9jYXRlZFRvdGFsOw0KDQogIC8qKiBIb3cgbXVjaCB3ZSBoYXZlIGFsbG9jYXRlZCB0byB0aGUgaW52ZXN0b3JzIGludmVzdGVkICovDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYmFsYW5jZXM7DQoNCiAgLyoqIEhvdyBtYW55IHRva2VucyBpbnZlc3RvcnMgaGF2ZSBjbGFpbWVkICovDQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgY2xhaW1lZDsNCg0KICAvKiogV2hlbiBvdXIgY2xhaW0gZnJlZXplIGlzIG92ZXIgKFVOSVggdGltZXN0YW1wKSAqLw0KICB1aW50IHB1YmxpYyBmcmVlemVFbmRzQXQ7DQoNCiAgLyoqIFdoZW4gdGhpcyB2YXVsdCB3YXMgbG9ja2VkIChVTklYIHRpbWVzdGFtcCkgKi8NCiAgdWludCBwdWJsaWMgbG9ja2VkQXQ7DQoNCiAgLyoqIFdlIGNhbiBhbHNvIGRlZmluZSBvdXIgb3duIHRva2VuLCB3aGljaCB3aWxsIG92ZXJyaWRlIHRoZSBJQ08gb25lICoqKi8NCiAgU3RhbmRhcmRUb2tlbiBwdWJsaWMgdG9rZW47DQoNCiAgLyoqIFdoYXQgaXMgb3VyIGN1cnJlbnQgc3RhdGUuDQogICAqDQogICAqIExvYWRpbmc6IEludmVzdG9yIGRhdGEgaXMgYmVpbmcgbG9hZGVkIGFuZCBjb250cmFjdCBub3QgeWV0IGxvY2tlZA0KICAgKiBIb2xkaW5nOiBIb2xkaW5nIHRva2VucyBmb3IgaW52ZXN0b3JzDQogICAqIERpc3RyaWJ1dGluZzogRnJlZXplIHRpbWUgaXMgb3ZlciwgaW52ZXN0b3JzIGNhbiBjbGFpbSB0aGVpciB0b2tlbnMNCiAgICovDQogIGVudW0gU3RhdGV7VW5rbm93biwgTG9hZGluZywgSG9sZGluZywgRGlzdHJpYnV0aW5nfQ0KDQogIC8qKiBXZSBhbGxvY2F0ZWQgdG9rZW5zIGZvciBpbnZlc3RvciAqLw0KICBldmVudCBBbGxvY2F0ZWQoYWRkcmVzcyBpbnZlc3RvciwgdWludCB2YWx1ZSk7DQoNCiAgLyoqIFdlIGRpc3RyaWJ1dGVkIHRva2VucyB0byBhbiBpbnZlc3RvciAqLw0KICBldmVudCBEaXN0cmlidXRlZChhZGRyZXNzIGludmVzdG9ycywgdWludCBjb3VudCk7DQoNCiAgZXZlbnQgTG9ja2VkKCk7DQoNCiAgLyoqDQogICAqIENyZWF0ZSBwcmVzYWxlIGNvbnRyYWN0IHdoZXJlIGxvY2sgdXAgcGVyaW9kIGlzIGdpdmVuIGRheXMNCiAgICoNCiAgICogQHBhcmFtIF9mcmVlemVFbmRzQXQgVU5JWCB0aW1lc3RhbXAgd2hlbiB0aGUgdmF1bHQgdW5sb2Nrcw0KICAgKiBAcGFyYW0gX3Rva2VuIFRva2VuIGNvbnRyYWN0IGFkZHJlc3Mgd2UgYXJlIGRpc3RyaWJ1dGluZw0KICAgKiBAcGFyYW0gX3Rva2Vuc1RvQmVBbGxvY2F0ZWQgVG90YWwgbnVtYmVyIG9mIHRva2VucyB0aGlzIHZhdWx0IHdpbGwgaG9sZCAtIGluY2x1ZGluZyBkZWNpbWFsIG11bHRpcGxjYXRpb24NCiAgICoNCiAgICovDQogIGZ1bmN0aW9uIFRva2VuVmF1bHQodWludCBfZnJlZXplRW5kc0F0LCBTdGFuZGFyZFRva2VuIF90b2tlbiwgdWludCBfdG9rZW5zVG9CZUFsbG9jYXRlZCkgew0KDQogICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KDQogICAgLy8gSW52YWxpZCBvd2Vucg0KICAgIGlmKG93bmVyID09IDApIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIHRva2VuID0gX3Rva2VuOw0KDQogICAgLy8gQ2hlY2sgdGhlIGFkZHJlc3MgbG9va3MgbGlrZSBhIHRva2VuIGNvbnRyYWN0DQogICAgaWYoIXRva2VuLmlzVG9rZW4oKSkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgLy8gR2l2ZSBhcmd1bWVudA0KICAgIGlmKF9mcmVlemVFbmRzQXQgPT0gMCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgLy8gU2FuaXR5IGNoZWNrIG9uIF90b2tlbnNUb0JlQWxsb2NhdGVkDQogICAgaWYoX3Rva2Vuc1RvQmVBbGxvY2F0ZWQgPT0gMCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgZnJlZXplRW5kc0F0ID0gX2ZyZWV6ZUVuZHNBdDsNCiAgICB0b2tlbnNUb0JlQWxsb2NhdGVkID0gX3Rva2Vuc1RvQmVBbGxvY2F0ZWQ7DQogIH0NCg0KICAvLy8gQGRldiBBZGQgYSBwcmVzYWxlIHBhcnRpY2lwYXRpbmcgYWxsb2NhdGlvbg0KICBmdW5jdGlvbiBzZXRJbnZlc3RvcihhZGRyZXNzIGludmVzdG9yLCB1aW50IGFtb3VudCkgcHVibGljIG9ubHlPd25lciB7DQoNCiAgICBpZihsb2NrZWRBdCA+IDApIHsNCiAgICAgIC8vIENhbm5vdCBhZGQgbmV3IGludmVzdG9ycyBhZnRlciB0aGUgdmF1bHQgaXMgbG9ja2VkDQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICBpZihhbW91bnQgPT0gMCkgdGhyb3c7IC8vIE5vIGVtcHR5IGJ1eXMNCg0KICAgIC8vIERvbid0IGFsbG93IHJlc2V0DQogICAgaWYoYmFsYW5jZXNbaW52ZXN0b3JdID4gMCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgYmFsYW5jZXNbaW52ZXN0b3JdID0gYW1vdW50Ow0KDQogICAgaW52ZXN0b3JDb3VudCsrOw0KDQogICAgdG9rZW5zQWxsb2NhdGVkVG90YWwgKz0gYW1vdW50Ow0KDQogICAgQWxsb2NhdGVkKGludmVzdG9yLCBhbW91bnQpOw0KICB9DQoNCiAgLy8vIEBkZXYgTG9jayB0aGUgdmF1bHQNCiAgLy8vICAgICAgLSBBbGwgYmFsYW5jZXMgaGF2ZSBiZWVuIGxvYWRlZCBpbiBjb3JyZWN0bHkNCiAgLy8vICAgICAgLSBUb2tlbnMgYXJlIHRyYW5zZmVycmVkIG9uIHRoaXMgdmF1bHQgY29ycmVjdGx5DQogIC8vLyAgICAgIC0gQ2hlY2tzIGFyZSBpbiBwbGFjZSB0byBwcmV2ZW50IGNyZWF0aW5nIGEgdmF1bHQgdGhhdCBpcyBsb2NrZWQgd2l0aCBpbmNvcnJlY3QgdG9rZW4gYmFsYW5jZXMuDQogIGZ1bmN0aW9uIGxvY2soKSBvbmx5T3duZXIgew0KDQogICAgaWYobG9ja2VkQXQgPiAwKSB7DQogICAgICB0aHJvdzsgLy8gQWxyZWFkeSBsb2NrZWQNCiAgICB9DQoNCiAgICAvLyBTcHJlYWRzaGVldCBzdW0gZG9lcyBub3QgbWF0Y2ggdG8gd2hhdCB3ZSBoYXZlIGxvYWRlZCB0byB0aGUgaW52ZXN0b3IgZGF0YQ0KICAgIGlmKHRva2Vuc0FsbG9jYXRlZFRvdGFsICE9IHRva2Vuc1RvQmVBbGxvY2F0ZWQpIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIC8vIERvIG5vdCBsb2NrIHRoZSB2YXVsdCBpZiB0aGUgZ2l2ZW4gdG9rZW5zIGFyZSBub3Qgb24gdGhpcyBjb250cmFjdA0KICAgIGlmKHRva2VuLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKSAhPSB0b2tlbnNBbGxvY2F0ZWRUb3RhbCkgew0KICAgICAgdGhyb3c7DQogICAgfQ0KDQogICAgbG9ja2VkQXQgPSBub3c7DQoNCiAgICBMb2NrZWQoKTsNCiAgfQ0KDQogIC8vLyBAZGV2IEluIHRoZSBjYXNlIGxvY2tpbmcgZmFpbGVkLCB0aGVuIGFsbG93IHRoZSBvd25lciB0byByZWNsYWltIHRoZSB0b2tlbnMgb24gdGhlIGNvbnRyYWN0Lg0KICBmdW5jdGlvbiByZWNvdmVyRmFpbGVkTG9jaygpIG9ubHlPd25lciB7DQogICAgaWYobG9ja2VkQXQgPiAwKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQoNCiAgICAvLyBUcmFuc2ZlciBhbGwgdG9rZW5zIG9uIHRoaXMgY29udHJhY3QgYmFjayB0byB0aGUgb3duZXINCiAgICB0b2tlbi50cmFuc2Zlcihvd25lciwgdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpKTsNCiAgfQ0KDQogIC8vLyBAZGV2IEdldCB0aGUgY3VycmVudCBiYWxhbmNlIG9mIHRva2VucyBpbiB0aGUgdmF1bHQNCiAgLy8vIEByZXR1cm4gdWludCBIb3cgbWFueSB0b2tlbnMgdGhlcmUgYXJlIGN1cnJlbnRseSBpbiB2YXVsdA0KICBmdW5jdGlvbiBnZXRCYWxhbmNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgaG93TWFueVRva2Vuc0N1cnJlbnRseUluVmF1bHQpIHsNCiAgICByZXR1cm4gdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOw0KICB9DQoNCiAgLy8vIEBkZXYgQ2xhaW0gTiBib3VnaHQgdG9rZW5zIHRvIHRoZSBpbnZlc3RvciBhcyB0aGUgbXNnIHNlbmRlcg0KICBmdW5jdGlvbiBjbGFpbSgpIHsNCg0KICAgIGFkZHJlc3MgaW52ZXN0b3IgPSBtc2cuc2VuZGVyOw0KDQogICAgaWYobG9ja2VkQXQgPT0gMCkgew0KICAgICAgdGhyb3c7IC8vIFdlIHdlcmUgbmV2ZXIgbG9ja2VkDQogICAgfQ0KDQogICAgaWYobm93IDwgZnJlZXplRW5kc0F0KSB7DQogICAgICB0aHJvdzsgLy8gVHJ5aW5nIHRvIGNsYWltIGVhcmx5DQogICAgfQ0KDQogICAgaWYoYmFsYW5jZXNbaW52ZXN0b3JdID09IDApIHsNCiAgICAgIC8vIE5vdCBvdXIgaW52ZXN0b3INCiAgICAgIHRocm93Ow0KICAgIH0NCg0KICAgIGlmKGNsYWltZWRbaW52ZXN0b3JdID4gMCkgew0KICAgICAgdGhyb3c7IC8vIEFscmVhZHkgY2xhaW1lZA0KICAgIH0NCg0KICAgIHVpbnQgYW1vdW50ID0gYmFsYW5jZXNbaW52ZXN0b3JdOw0KDQogICAgY2xhaW1lZFtpbnZlc3Rvcl0gPSBhbW91bnQ7DQoNCiAgICB0b3RhbENsYWltZWQgKz0gYW1vdW50Ow0KDQogICAgdG9rZW4udHJhbnNmZXIoaW52ZXN0b3IsIGFtb3VudCk7DQoNCiAgICBEaXN0cmlidXRlZChpbnZlc3RvciwgYW1vdW50KTsNCiAgfQ0KDQogIC8vLyBAZGV2IFJlc29sdmUgdGhlIGNvbnRyYWN0IHVtYW1iaWdpb3VzIHN0YXRlDQogIGZ1bmN0aW9uIGdldFN0YXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoU3RhdGUpIHsNCiAgICBpZihsb2NrZWRBdCA9PSAwKSB7DQogICAgICByZXR1cm4gU3RhdGUuTG9hZGluZzsNCiAgICB9IGVsc2UgaWYobm93ID4gZnJlZXplRW5kc0F0KSB7DQogICAgICByZXR1cm4gU3RhdGUuRGlzdHJpYnV0aW5nOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gU3RhdGUuSG9sZGluZzsNCiAgICB9DQogIH0NCg0KfQ=='