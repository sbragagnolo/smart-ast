base 64 content
base64ubermenschPrefundToken1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KDQovKioNCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MNCiAqLw0KbGlicmFyeSBTYWZlTWF0aCB7DQogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICBhc3NlcnQoYiA+IDApOw0KICAgIHVpbnQgYyA9IGEgLyBiOw0KICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgcmV0dXJuIGEgLSBiOw0KICB9DQoNCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSArIGI7DQogICAgYXNzZXJ0KGMgPj0gYSk7DQogICAgcmV0dXJuIGM7DQogIH0NCg0KICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogIH0NCg0KICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgew0KICAgIGlmICghYXNzZXJ0aW9uKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogIH0NCn0NCg0KDQovKg0KICogT3duYWJsZQ0KICoNCiAqIEJhc2UgY29udHJhY3Qgd2l0aCBhbiBvd25lci4NCiAqIFByb3ZpZGVzIG9ubHlPd25lciBtb2RpZmllciwgd2hpY2ggcHJldmVudHMgZnVuY3Rpb24gZnJvbSBydW5uaW5nIGlmIGl0IGlzIGNhbGxlZCBieSBhbnlvbmUgb3RoZXIgdGhhbiB0aGUgb3duZXIuDQogKi8NCmNvbnRyYWN0IE93bmFibGUgew0KICBhZGRyZXNzIHB1YmxpYyBvd25lcjsNCg0KICBmdW5jdGlvbiBPd25hYmxlKCkgew0KICAgIG93bmVyID0gbXNnLnNlbmRlcjsNCiAgfQ0KDQogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsNCiAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICAgIF87DQogIH0NCg0KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgew0KICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7DQogICAgICBvd25lciA9IG5ld093bmVyOw0KICAgIH0NCiAgfQ0KfQ0KDQoNCi8qDQogKiBFUkMyMEJhc2ljDQogKiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlDQogKiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwDQogKi8NCmNvbnRyYWN0IEVSQzIwQmFzaWMgew0KICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsNCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7DQogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOw0KfQ0KDQoNCi8qDQogKiBCYXNpYyB0b2tlbg0KICogQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMNCiAqLw0KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsNCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7DQoNCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOw0KDQogIC8qDQogICAqIEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrICANCiAgICovDQogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsNCiAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsNCiAgICAgICB0aHJvdzsNCiAgICAgfQ0KICAgICBfOw0KICB9DQoNCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7DQogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsNCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsNCiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7DQogIH0NCg0KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgew0KICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOw0KICB9DQp9DQoNCg0KLyoqDQogKiBAdGl0bGUgRnVuZGFibGVUb2tlbiAtIGFjY291bnRzIGZvciBmdW5kcyB0byBzdGFuZCBiZWhpbmQgaXQNCiAqIEBhdXRob3IgRG1pdHJ5IEtvY2hpbiA8a0B1YmVybWVuc2NoLnN0b3JlPg0KICogV2UgbmVlZCB0byBzdG9yZSB0aGlzIGRhdGEgdG8gYmUgYWJsZSB0byBrbm93IGhvdyBtdWNoIGZ1bmRzIGFyZSBzdGFuZGluZyBiZWhpbmQgdGhlIHRva2Vucw0KICogSXQgbWF5IGNvbWUgaGFuZHkgaW4gdG9rZW4gdHJhbnNmb3JtYXRpb24uIEZvciBleGFtcGxlIGlmIHByZWZ1bmQgd291bGQgbm90IGJlIHN1Y2Nlc3NmdWwgd2UNCiAqIHdpbGwgYmUgYWJsZSB0byByZWZ1bmQgYWxsIHRoZSBpbnZlc3RlZCBtb25leQ0KICovDQpjb250cmFjdCBGdW5kYWJsZVRva2VuIGlzIEJhc2ljVG9rZW4gew0KICAgIC8vL0ludmVzdGVkIGZ1bmRzDQogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBmdW5kczsNCg0KICAgIC8vL1RvdGFsIGZ1bmRzIGJlaGluZCB0aGUgdG9rZW5zDQogICAgdWludCBwdWJsaWMgdG90YWxGdW5kczsNCg0KICAgIGZ1bmN0aW9uIEZ1bmRhYmxlVG9rZW4oKSB7fQ0KfQ0KDQoNCi8qKg0KICogVHJhbnNmb3JtIGFnZW50IHRyYW5zZmVycyB0b2tlbnMgdG8gYSBuZXcgY29udHJhY3QuIEl0IG1heSB0cmFuc2Zvcm0gdGhlbSB0byBhbm90aGVyIHRva2VucyBvciByZWZ1bmQNCiAqIFRyYW5zZm9ybSBhZ2VudCBpdHNlbGYgY2FuIGJlIHRoZSB0b2tlbiBjb250cmFjdCwgb3IganVzdCBhIG1pZGRsZSBtYW4gY29udHJhY3QgZG9pbmcgdGhlIGhlYXZ5IGxpZnRpbmcuDQogKi8NCmNvbnRyYWN0IFRyYW5zZm9ybUFnZW50IHsNCiAgICAvLy9UaGUgb3JpZ2luYWwgc3VwcGx5IG9mIHRva2VucyB0byBiZSB0cmFuc2Zvcm1lZA0KICAgIHVpbnQyNTYgcHVibGljIG9yaWdpbmFsU3VwcGx5Ow0KICAgIC8vL1RoZSBvcmlnaW5hbCBmdW5kcyBiZWhpbmQgdGhlIHRva2VucyB0byBiZSB0cmFuc2Zvcm1lZA0KICAgIHVpbnQyNTYgcHVibGljIG9yaWdpbmFsRnVuZHM7DQoNCiAgICAvKiogSW50ZXJmYWNlIG1hcmtlciAqLw0KICAgIGZ1bmN0aW9uIGlzVHJhbnNmb3JtQWdlbnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0cmFuc2Zvcm1Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3Rva2VucywgdWludDI1NiBfZnVuZHMpIHB1YmxpYzsNCg0KfQ0KDQoNCi8qKg0KICogQSB0b2tlbiB0cmFuc2Zvcm0gbWVjaGFuaXNtIHdoZXJlIHVzZXJzIGNhbiBvcHQtaW4gYW1vdW50IG9mIHRva2VucyB0byB0aGUgbmV4dCBzbWFydCBjb250cmFjdCByZXZpc2lvbi4NCiAqDQogKiBGaXJzdCBlbnZpc2lvbmVkIGJ5IEdvbGVtIGFuZCBMdW55ciBwcm9qZWN0cy4NCiAqLw0KY29udHJhY3QgVHJhbnNmb3JtYWJsZVRva2VuIGlzIEZ1bmRhYmxlVG9rZW4sIE93bmFibGUgew0KDQogICAgLyoqIFRoZSBuZXh0IGNvbnRyYWN0IHdoZXJlIHRoZSB0b2tlbnMgd2lsbCBiZSBtaWdyYXRlZC4gKi8NCiAgICBUcmFuc2Zvcm1BZ2VudCBwdWJsaWMgdHJhbnNmb3JtQWdlbnQ7DQoNCiAgICAvKiogSG93IG1hbnkgdG9rZW5zIHdlIGhhdmUgdHJhbnNmb3JtZWQgYnkgbm93LiAqLw0KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsVHJhbnNmb3JtZWRUb2tlbnM7DQoNCiAgICAvKioNCiAgICAgKiBUcmFuc2Zvcm0gc3RhdGVzLg0KICAgICAqDQogICAgICogLSBOb3RBbGxvd2VkOiBUaGUgY2hpbGQgY29udHJhY3QgaGFzIG5vdCByZWFjaGVkIGEgY29uZGl0aW9uIHdoZXJlIHRoZSB0cmFuc2Zvcm0gY2FuIGJndW4NCiAgICAgKiAtIFdhaXRpbmdGb3JBZ2VudDogVG9rZW4gYWxsb3dzIHRyYW5zZm9ybSwgYnV0IHdlIGRvbid0IGhhdmUgYSBuZXcgYWdlbnQgeWV0DQogICAgICogLSBSZWFkeVRvVHJhbnNmb3JtOiBUaGUgYWdlbnQgaXMgc2V0LCBidXQgbm90IGEgc2luZ2xlIHRva2VuIGhhcyBiZWVuIHRyYW5zZm9ybWVkIHlldCwgc28gd2UNCiAgICAgICAgICAgIHN0aWxsIGhhdmUgYSBjaGFuY2UgdG8gcmVzZXQgYWdlbnQgdG8gYW5vdGhlciB2YWx1ZQ0KICAgICAqIC0gVHJhbnNmb3JtaW5nOiBUcmFuc2Zvcm0gYWdlbnQgaXMgc2V0IGFuZCB0aGUgYmFsYW5jZSBob2xkZXJzIGNhbiB0cmFuc2Zvcm0gdGhlaXIgdG9rZW5zDQogICAgICoNCiAgICAgKi8NCiAgICBlbnVtIFRyYW5zZm9ybVN0YXRlIHtVbmtub3duLCBOb3RBbGxvd2VkLCBXYWl0aW5nRm9yQWdlbnQsIFJlYWR5VG9UcmFuc2Zvcm0sIFRyYW5zZm9ybWluZ30NCg0KICAgIC8qKg0KICAgICAqIFNvbWVib2R5IGhhcyB0cmFuc2Zvcm1kIHNvbWUgb2YgaGlzIHRva2Vucy4NCiAgICAgKi8NCiAgICBldmVudCBUcmFuc2Zvcm0oYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF90b2tlbnMsIHVpbnQyNTYgX2Z1bmRzKTsNCg0KICAgIC8qKg0KICAgICAqIE5ldyB0cmFuc2Zvcm0gYWdlbnQgYXZhaWxhYmxlLg0KICAgICAqLw0KICAgIGV2ZW50IFRyYW5zZm9ybUFnZW50U2V0KGFkZHJlc3MgYWdlbnQpOw0KDQogICAgLyoqDQogICAgICogQWxsb3cgdGhlIHRva2VuIGhvbGRlciB0byB0cmFuc2Zvcm0gYWxsIG9mIHRoZWlyIHRva2VucyB0byBhIG5ldyBjb250cmFjdC4NCiAgICAgKi8NCiAgICBmdW5jdGlvbiB0cmFuc2Zvcm0oKSBwdWJsaWMgew0KDQogICAgICAgIFRyYW5zZm9ybVN0YXRlIHN0YXRlID0gZ2V0VHJhbnNmb3JtU3RhdGUoKTsNCiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBUcmFuc2Zvcm1TdGF0ZS5SZWFkeVRvVHJhbnNmb3JtIHx8IHN0YXRlID09IFRyYW5zZm9ybVN0YXRlLlRyYW5zZm9ybWluZyk7DQoNCiAgICAgICAgdWludCB0b2tlbnMgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsNCiAgICAgICAgdWludCBpbnZlc3RtZW50cyA9IGZ1bmRzW21zZy5zZW5kZXJdOw0KICAgICAgICByZXF1aXJlKHRva2VucyA+IDApOyAvLyBWYWxpZGF0ZSBpbnB1dCB2YWx1ZS4NCg0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7DQogICAgICAgIGZ1bmRzW21zZy5zZW5kZXJdID0gMDsNCg0KICAgICAgICAvLyBUYWtlIHRva2VucyBvdXQgZnJvbSBjaXJjdWxhdGlvbg0KICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1Yih0b2tlbnMpOw0KICAgICAgICB0b3RhbEZ1bmRzID0gdG90YWxGdW5kcy5zdWIoaW52ZXN0bWVudHMpOw0KDQogICAgICAgIHRvdGFsVHJhbnNmb3JtZWRUb2tlbnMgPSB0b3RhbFRyYW5zZm9ybWVkVG9rZW5zLmFkZCh0b2tlbnMpOw0KDQogICAgICAgIC8vIFRyYW5zZm9ybSBhZ2VudCByZWlzc3VlcyB0aGUgdG9rZW5zDQogICAgICAgIHRyYW5zZm9ybUFnZW50LnRyYW5zZm9ybUZyb20obXNnLnNlbmRlciwgdG9rZW5zLCBpbnZlc3RtZW50cyk7DQogICAgICAgIFRyYW5zZm9ybShtc2cuc2VuZGVyLCB0cmFuc2Zvcm1BZ2VudCwgdG9rZW5zLCBpbnZlc3RtZW50cyk7DQoNCiAgICAgICAgLy9PbmNlIHRyYW5zZm9ybWF0aW9uIGlzIGZpbmlzaGVkIHRoZSBjb250cmFjdCBpcyBub3QgbmVlZGVkIGFueW1vcmUNCiAgICAgICAgaWYodG90YWxTdXBwbHkgPT0gMCkNCiAgICAgICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0IGFuIHRyYW5zZm9ybSBhZ2VudCB0aGF0IGhhbmRsZXMNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBzZXRUcmFuc2Zvcm1BZ2VudChhZGRyZXNzIGFnZW50KSBvbmx5T3duZXIgZXh0ZXJuYWwgew0KICAgICAgICByZXF1aXJlKGFnZW50ICE9IDB4MCk7DQogICAgICAgIC8vIFRyYW5zZm9ybSBoYXMgYWxyZWFkeSBiZWd1biBmb3IgYW4gYWdlbnQNCiAgICAgICAgcmVxdWlyZShnZXRUcmFuc2Zvcm1TdGF0ZSgpICE9IFRyYW5zZm9ybVN0YXRlLlRyYW5zZm9ybWluZyk7DQoNCiAgICAgICAgdHJhbnNmb3JtQWdlbnQgPSBUcmFuc2Zvcm1BZ2VudChhZ2VudCk7DQoNCiAgICAgICAgLy8gQmFkIGludGVyZmFjZQ0KICAgICAgICByZXF1aXJlKHRyYW5zZm9ybUFnZW50LmlzVHJhbnNmb3JtQWdlbnQoKSk7DQogICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRva2VuIHN1cHBsaWVzIG1hdGNoIGluIHNvdXJjZSBhbmQgdGFyZ2V0DQogICAgICAgIHJlcXVpcmUodHJhbnNmb3JtQWdlbnQub3JpZ2luYWxTdXBwbHkoKSA9PSB0b3RhbFN1cHBseSk7DQogICAgICAgIHJlcXVpcmUodHJhbnNmb3JtQWdlbnQub3JpZ2luYWxGdW5kcygpID09IHRvdGFsRnVuZHMpOw0KDQogICAgICAgIFRyYW5zZm9ybUFnZW50U2V0KHRyYW5zZm9ybUFnZW50KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBHZXQgdGhlIHN0YXRlIG9mIHRoZSB0b2tlbiB0cmFuc2Zvcm0uDQogICAgICovDQogICAgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtU3RhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhUcmFuc2Zvcm1TdGF0ZSkgew0KICAgICAgICBpZihhZGRyZXNzKHRyYW5zZm9ybUFnZW50KSA9PSAweDAwKSByZXR1cm4gVHJhbnNmb3JtU3RhdGUuV2FpdGluZ0ZvckFnZW50Ow0KICAgICAgICBlbHNlIGlmKHRvdGFsVHJhbnNmb3JtZWRUb2tlbnMgPT0gMCkgcmV0dXJuIFRyYW5zZm9ybVN0YXRlLlJlYWR5VG9UcmFuc2Zvcm07DQogICAgICAgIGVsc2UgcmV0dXJuIFRyYW5zZm9ybVN0YXRlLlRyYW5zZm9ybWluZzsNCiAgICB9DQp9DQoNCg0KLyoqDQogKiBNaW50YWJsZSB0b2tlbg0KICoNCiAqIFNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aXRoIG1pbnRhYmxlIHRva2VuIGNyZWF0aW9uDQogKiBJc3N1ZToNCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvaXNzdWVzLzEyMA0KICogQmFzZWQgb24gY29kZSBieSBUb2tlbk1hcmtldE5ldDoNCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Ub2tlbk1hcmtldE5ldC9pY28vYmxvYi9tYXN0ZXIvY29udHJhY3RzL01pbnRhYmxlVG9rZW4uc29sDQogKi8NCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gaXMgQmFzaWNUb2tlbiB7DQogICAgLyoqDQogICAgICBDcm93ZHNhbGUgY29udHJhY3QgYWxsb3dlZCB0byBtaW50IHRva2Vucw0KICAgICovDQoNCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIGludGVybmFsIHsNCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7DQogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsNCiAgICAgICAgLy9Bbm5vdW5jZSB0aGF0IHdlIGhhdmUgbWludGVkIHNvbWUgdG9rZW5zDQogICAgICAgIFRyYW5zZmVyKDB4MCwgX3RvLCBfYW1vdW50KTsNCiAgICB9DQp9DQoNCg0KLy8vIEB0aXRsZSBUb2tlbiBjb250cmFjdCAtIEltcGxlbWVudHMgU3RhbmRhcmQgVG9rZW4gSW50ZXJmYWNlIHdpdGggVWJlcm1lbnNjaCBmZWF0dXJlcy4NCi8vLyBAYXV0aG9yIERtaXRyeSBLb2NoaW4gLSA8a0B1YmVybWVuc2NoLnN0b3JlPg0KY29udHJhY3QgVWJlcm1lbnNjaFByZWZ1bmRUb2tlbiBpcyBNaW50YWJsZVRva2VuLCBUcmFuc2Zvcm1hYmxlVG9rZW4gew0KICAgIHN0cmluZyBjb25zdGFudCBwdWJsaWMgbmFtZSA9ICJVYmVybWVuc2NoIFByZWZ1bmQiOw0KICAgIHN0cmluZyBjb25zdGFudCBwdWJsaWMgc3ltYm9sID0gIlVNUCI7DQogICAgdWludCBjb25zdGFudCBwdWJsaWMgZGVjaW1hbHMgPSA4Ow0KDQogICAgLy9UaGUgcHJpY2Ugb2YgMSB0b2tlbiBpbiBFdGhlcg0KICAgIHVpbnQgY29uc3RhbnQgcHVibGljIFRPS0VOX1BSSUNFID0gMC4wMDI1ICogMSBldGhlcjsNCiAgICAvL1RoZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgdG8gYmUgc29sZCBpbiBjcm93ZHNhbGUNCiAgICB1aW50IGNvbnN0YW50IHB1YmxpYyBUT0tFTl9DQVAgPSAyMDAwMDAwMCAqICgxMCAqKiBkZWNpbWFscyk7DQoNCiAgICB1aW50IHB1YmxpYyBpbnZlc3RvckNvdW50Ow0KICAgIGFkZHJlc3MgcHVibGljIG11bHRpc2lnV2FsbGV0Ow0KICAgIGJvb2wgcHVibGljIHN0b3BwZWQ7DQoNCiAgICAvLyBBIG5ldyBpbnZlc3RtZW50IHdhcyBtYWRlDQogICAgZXZlbnQgSW52ZXN0ZWQoYWRkcmVzcyBpbmRleGVkIGludmVzdG9yLCB1aW50IHdlaUFtb3VudCwgdWludCB0b2tlbkFtb3VudCk7DQoNCiAgICBmdW5jdGlvbiBVYmVybWVuc2NoUHJlZnVuZFRva2VuKGFkZHJlc3MgbXVsdGlzaWcpew0KICAgICAgICAvL1dlIHJlcXVpcmUgdGhhdCB0aGUgb3duZXIgc2hvdWxkIGJlIG11bHRpc2lnIHdhbGxldA0KICAgICAgICAvL0JlY2F1c2Ugb3duZXIgY2FuIG1ha2UgaW1wb3J0YW50IGRlY2lzaW9ucyBsaWtlIHN0b3BwaW5nIHByZWZ1bmQNCiAgICAgICAgLy9hbmQgc2V0dGluZyBUcmFuc2Zvcm1BZ2VudA0KICAgICAgICAvL0hvd2V2ZXIgdGhpcyBjb250cmFjdCBjYW4gYmUgY3JlYXRlZCBieSBhbnkgYWNjb3VudC4gQWZ0ZXIgY3JlYXRpb24NCiAgICAgICAgLy9pdCBhdXRvbWF0aWNhbGx5IHRyYW5zZmVycyBvd25lcnNoaXAgdG8gbXVsdGlzaWcgd2FsbGV0DQogICAgICAgIHRyYW5zZmVyT3duZXJzaGlwKG11bHRpc2lnKTsNCiAgICAgICAgbXVsdGlzaWdXYWxsZXQgPSBtdWx0aXNpZzsNCiAgICB9DQoNCiAgICBtb2RpZmllciBvbmx5QWN0aXZlKCl7DQogICAgICAgIHJlcXVpcmUoIXN0b3BwZWQpOw0KICAgICAgICAvL1NldHRpbmcgdGhlIHRyYW5zZmVyIGFnZW50IGVmZmVjdGl2ZWx5IHN0b3BzIHByZWZ1bmQNCiAgICAgICAgcmVxdWlyZShnZXRUcmFuc2Zvcm1TdGF0ZSgpID09IFRyYW5zZm9ybVN0YXRlLldhaXRpbmdGb3JBZ2VudCk7DQogICAgICAgIF87DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmV0dXJucyBib251c2VzIGJhc2VkIG9uIHRoZSBjdXJyZW50IHRvdGFsU3VwcGx5IGluIHBlcmNlbnRzDQogICAgICogQW4gaW52ZXN0b3IgZ2V0cyB0aGUgYm9udXMgYmFzZWQgb24gdGhlIGN1cnJlbnQgdG90YWxTdXBwbHkgdmFsdWUNCiAgICAgKiBldmVuIGlmIHRoZSByZXN1bHRpbmcgdG90YWxTdXBwbHkgYWZ0ZXIgYW4gaW52ZXN0bWVudCBjb3JyZXNwb25kcyB0byBkaWZmZXJlbnQgYm9udXMNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50Qm9udXMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCl7DQogICAgICAgIGlmKHRvdGFsU3VwcGx5IDwgNzAwMDAwMCAqICgxMCAqKiBkZWNpbWFscykpDQogICAgICAgICAgICByZXR1cm4gMTgwOw0KICAgICAgICBpZih0b3RhbFN1cHBseSA8IDE0MDAwMDAwICogKDEwICoqIGRlY2ltYWxzKSkNCiAgICAgICAgICAgIHJldHVybiAxNTU7DQogICAgICAgIHJldHVybiAxNDA7DQogICAgfQ0KDQogICAgLy8vIEBkZXYgbWFpbiBmdW5jdGlvbiB0byBidXkgdG9rZW5zIHRvIHNwZWNpZmllZCBhZGRyZXNzDQogICAgLy8vIEBwYXJhbSB0byBUaGUgYWRkcmVzcyBvZiB0b2tlbiByZWNpcGllbnQNCiAgICBmdW5jdGlvbiBpbnZlc3QoYWRkcmVzcyB0bykgb25seUFjdGl2ZSBwdWJsaWMgcGF5YWJsZSB7DQogICAgICAgIHVpbnQgYW1vdW50ID0gbXNnLnZhbHVlOw0KICAgICAgICAvL0JvbnVzZXMgYXJlIGluIHBlcmNlbnRzIHNvIHRoZSBmaW5hbCB2YWx1ZSBtdXN0IGJlIGRpdmlkZWQgYnkgMTAwDQogICAgICAgIHVpbnQgdG9rZW5BbW91bnQgPSBnZXRDdXJyZW50Qm9udXMoKS5tdWwoYW1vdW50KS5tdWwoMTAgKiogZGVjaW1hbHMgLyAxMDApLmRpdihUT0tFTl9QUklDRSk7DQoNCiAgICAgICAgcmVxdWlyZSh0b2tlbkFtb3VudCA+PSAwKTsNCg0KICAgICAgICBpZihmdW5kc1t0b10gPT0gMCkgew0KICAgICAgICAgICAgLy8gQSBuZXcgaW52ZXN0b3INCiAgICAgICAgICAgICsraW52ZXN0b3JDb3VudDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFVwZGF0ZSBpbnZlc3Rvcg0KICAgICAgICBmdW5kc1t0b10gPSBmdW5kc1t0b10uYWRkKGFtb3VudCk7DQogICAgICAgIHRvdGFsRnVuZHMgPSB0b3RhbEZ1bmRzLmFkZChhbW91bnQpOw0KDQogICAgICAgIC8vbWludCB0b2tlbnMNCiAgICAgICAgbWludCh0bywgdG9rZW5BbW91bnQpOw0KDQogICAgICAgIC8vV2UgYWxzbyBzaG91bGQgbm90IGJyZWFrIHRoZSB0b2tlbiBjYXANCiAgICAgICAgLy9UaGlzIGlzIGV4YWN0bHkgInJlcXVpcmUnIGFuZCBub3QgJ2Fzc2VydCcgYmVjYXVzZSBpdCBkZXBlbmRzIG9uIG1zZy52YWx1ZSAtIGEgdXNlciBzdXBwbGllZCBwYXJhbWV0ZXJzDQogICAgICAgIC8vV2hpbGUgJ2Fzc2VydCcgc2hvdWxkIGNvcnJlc3BvbmQgdG8gYSBicm9rZW4gYnVzaW5lc3MgbG9naWMNCiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA8PSBUT0tFTl9DQVApOw0KDQogICAgICAgIC8vIFBvY2tldCB0aGUgbW9uZXkNCiAgICAgICAgbXVsdGlzaWdXYWxsZXQudHJhbnNmZXIoYW1vdW50KTsNCg0KICAgICAgICAvLyBUZWxsIHVzIGludmVzdCB3YXMgc3VjY2Vzcw0KICAgICAgICBJbnZlc3RlZCh0bywgYW1vdW50LCB0b2tlbkFtb3VudCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYnV5KCkgcHVibGljIHBheWFibGUgew0KICAgICAgICBpbnZlc3QobXNnLnNlbmRlcik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKXsNCiAgICAgICAgdGhyb3c7IC8vVGhpcyBwcmVmdW5kIHRva2VuIGNhbiBub3QgYmUgdHJhbnNmZXJyZWQNCiAgICB9DQoNCiAgICAvL1N0b3BzIHRoZSBjcm93ZHNhbGUgZm9yZXZlcg0KICAgIGZ1bmN0aW9uIHN0b3AoKSBvbmx5T3duZXIgew0KICAgICAgICBzdG9wcGVkID0gdHJ1ZTsNCiAgICB9DQoNCiAgICAvL1dlJ2xsIHRyeSB0byBhY2NlcHQgc2VuZGluZyBldGhlciBvbiB0aGUgY29udHJhY3QgYWRkcmVzcywgaG9wZSB0aGUgZ2FzIHN1cHBsaWVkIHdvdWxkIGJlIGVub3VnaA0KICAgIGZ1bmN0aW9uICgpIHBheWFibGV7DQogICAgICAgIGJ1eSgpOw0KICAgIH0NCn0='