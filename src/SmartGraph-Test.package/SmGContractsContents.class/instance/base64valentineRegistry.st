base 64 content
base64valentineRegistry
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4yOw0KDQpjb250cmFjdCBWYWxlbnRpbmVSZWdpc3RyeSB7DQoNCiAgICBldmVudCBMb2dWYWxlbnRpbmVSZXF1ZXN0Q3JlYXRlZChzdHJpbmcgcmVxdWVzdGVyTmFtZSwgc3RyaW5nIHZhbGVudGluZU5hbWUsIHN0cmluZyBjdXN0b21NZXNzYWdlLCBhZGRyZXNzIHZhbGVudGluZUFkZHJlc3MsIGFkZHJlc3MgcmVxdWVzdGVyQWRkcmVzcyk7DQogICAgZXZlbnQgTG9nUmVxdWVzdEFjY2VwdGVkKGFkZHJlc3MgcmVxdWVzdGVyQWRkcmVzcyk7DQoNCiAgICBzdHJ1Y3QgUmVxdWVzdCB7DQogICAgICAgIHN0cmluZyByZXF1ZXN0ZXJOYW1lOw0KICAgICAgICBzdHJpbmcgdmFsZW50aW5lTmFtZTsNCiAgICAgICAgc3RyaW5nIGN1c3RvbU1lc3NhZ2U7DQogICAgICAgIGJvb2wgZG9lc0V4aXN0Ow0KICAgICAgICBib29sIHdhc0FjY2VwdGVkOw0KICAgICAgICBhZGRyZXNzIHZhbGVudGluZUFkZHJlc3M7DQogICAgfQ0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOw0KICAgIC8vIFJlcXVlc3RzIG1hcHMgcmVxdWVzdGVyIGFkZHJlc3NlcyB0byB0aGUgcmVxdWVzdHMgZGV0YWlscw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gUmVxdWVzdCkgcHJpdmF0ZSByZXF1ZXN0czsNCiAgICB1aW50IHB1YmxpYyBudW1SZXF1ZXN0ZXJzOw0KICAgIGFkZHJlc3NbXSBwdWJsaWMgcmVxdWVzdGVyczsNCiAgICBhZGRyZXNzIGNvbnN0YW50IEFERFJFU1NfTlVMTCA9IDA7DQogICAgdWludCBjb25zdGFudCBNQVhfQ1VTVE9NX01FU1NBR0VfTEVOR1RIID0gMTQwOw0KICAgIHVpbnQgY29uc3RhbnQgTUFYX05BTUVfTEVOR1RIID0gMjU7DQogICAgdWludCBjb25zdGFudCBDT1NUID0gMC4xIGV0aGVyOw0KDQogICAgbW9kaWZpZXIgcmVzdHJpY3RlZCgpIHsNCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpDQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQogICAgbW9kaWZpZXIgY29zdHModWludCBfYW1vdW50KSB7DQogICAgICAgIGlmIChtc2cudmFsdWUgPCBfYW1vdW50KQ0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIF87DQogICAgfQ0KICAgIG1vZGlmaWVyIHByb2hpYml0UmVxdWVzdFVwZGF0ZXMoKSB7DQogICAgICAgIGlmIChyZXF1ZXN0c1ttc2cuc2VuZGVyXS5kb2VzRXhpc3QpDQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBWYWxlbnRpbmVSZWdpc3RyeSgpIHsNCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOw0KICAgIH0NCg0KICAgIC8vIENyZWF0ZXMgYSB2YWxlbnRpbmUgcmVxdWVzdCB0aGF0IGNhbiBvbmx5IGJlIGFjY2VwdGVkIGJ5IHRoZSBzcGVjaWZpZWQgdmFsZW50aW5lQWRkcmVzcw0KICAgIGZ1bmN0aW9uIGNyZWF0ZVRhcmdldGVkVmFsZW50aW5lUmVxdWVzdChzdHJpbmcgcmVxdWVzdGVyTmFtZSwgc3RyaW5nIHZhbGVudGluZU5hbWUsDQogICAgICAgIHN0cmluZyBjdXN0b21NZXNzYWdlLCBhZGRyZXNzIHZhbGVudGluZUFkZHJlc3MpDQogICAgICAgIGNvc3RzKENPU1QpDQogICAgICAgIHByb2hpYml0UmVxdWVzdFVwZGF0ZXMNCiAgICAgICAgcGF5YWJsZQ0KICAgICAgICBwdWJsaWMgew0KICAgICAgICBjcmVhdGVOZXdWYWxlbnRpbmVSZXF1ZXN0KHJlcXVlc3Rlck5hbWUsIHZhbGVudGluZU5hbWUsIGN1c3RvbU1lc3NhZ2UsIHZhbGVudGluZUFkZHJlc3MpOw0KICAgIH0NCg0KICAgIC8vIENyZWF0ZXMgYSB2YWxlbnRpbmUgcmVxdWVzdCB0aGF0IGNhbiBiZSBmdWxsZmlsbGVkIGJ5IGFueSBhZGRyZXNzDQogICAgZnVuY3Rpb24gY3JlYXRlT3BlblZhbGVudGluZVJlcXVlc3Qoc3RyaW5nIHJlcXVlc3Rlck5hbWUsIHN0cmluZyB2YWxlbnRpbmVOYW1lLCBzdHJpbmcgY3VzdG9tTWVzc2FnZSkNCiAgICAgICAgY29zdHMoQ09TVCkNCiAgICAgICAgcHJvaGliaXRSZXF1ZXN0VXBkYXRlcw0KICAgICAgICBwYXlhYmxlDQogICAgICAgIHB1YmxpYyB7DQogICAgICAgIGNyZWF0ZU5ld1ZhbGVudGluZVJlcXVlc3QocmVxdWVzdGVyTmFtZSwgdmFsZW50aW5lTmFtZSwgY3VzdG9tTWVzc2FnZSwgQUREUkVTU19OVUxMKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjcmVhdGVOZXdWYWxlbnRpbmVSZXF1ZXN0KHN0cmluZyByZXF1ZXN0ZXJOYW1lLCBzdHJpbmcgdmFsZW50aW5lTmFtZSwgc3RyaW5nIGN1c3RvbU1lc3NhZ2UsDQogICAgICAgIGFkZHJlc3MgdmFsZW50aW5lQWRkcmVzcykNCiAgICAgICAgaW50ZXJuYWwgew0KICAgICAgICBpZiAoYnl0ZXMocmVxdWVzdGVyTmFtZSkubGVuZ3RoID4gTUFYX05BTUVfTEVOR1RIIHx8IGJ5dGVzKHZhbGVudGluZU5hbWUpLmxlbmd0aCA+IE1BWF9OQU1FX0xFTkdUSA0KICAgICAgICAgICAgfHwgYnl0ZXMoY3VzdG9tTWVzc2FnZSkubGVuZ3RoID4gTUFYX0NVU1RPTV9NRVNTQUdFX0xFTkdUSCkgew0KICAgICAgICAgICAgdGhyb3c7IC8vIGludmFsaWQgcmVxdWVzdA0KICAgICAgICB9DQogICAgICAgIGJvb2wgZG9lc0V4aXN0ID0gdHJ1ZTsNCiAgICAgICAgYm9vbCB3YXNBY2NlcHRlZCA9IGZhbHNlOw0KICAgICAgICBSZXF1ZXN0IG1lbW9yeSByID0gUmVxdWVzdChyZXF1ZXN0ZXJOYW1lLCB2YWxlbnRpbmVOYW1lLCBjdXN0b21NZXNzYWdlLCBkb2VzRXhpc3QsDQogICAgICAgIHdhc0FjY2VwdGVkLCB2YWxlbnRpbmVBZGRyZXNzKTsNCiAgICAgICAgcmVxdWVzdGVycy5wdXNoKG1zZy5zZW5kZXIpOw0KICAgICAgICBudW1SZXF1ZXN0ZXJzKys7DQogICAgICAgIHJlcXVlc3RzW21zZy5zZW5kZXJdID0gcjsNCiAgICAgICAgTG9nVmFsZW50aW5lUmVxdWVzdENyZWF0ZWQocmVxdWVzdGVyTmFtZSwgdmFsZW50aW5lTmFtZSwgY3VzdG9tTWVzc2FnZSwgdmFsZW50aW5lQWRkcmVzcywgbXNnLnNlbmRlcik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWNjZXB0VmFsZW50aW5lUmVxdWVzdChhZGRyZXNzIHJlcXVlc3RlckFkZHJlc3MpIHB1YmxpYyB7DQogICAgICAgIFJlcXVlc3QgcmVxdWVzdCA9IHJlcXVlc3RzW3JlcXVlc3RlckFkZHJlc3NdOw0KICAgICAgICBpZiAoIXJlcXVlc3QuZG9lc0V4aXN0KSB7DQogICAgICAgICAgICB0aHJvdzsgLy8gdGhlIHJlcXVlc3QgZG9lc24ndCBleGlzdA0KICAgICAgICB9DQogICAgICAgIHJlcXVlc3Qud2FzQWNjZXB0ZWQgPSB0cnVlOw0KICAgICAgICBMb2dSZXF1ZXN0QWNjZXB0ZWQocmVxdWVzdGVyQWRkcmVzcyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0UmVxdWVzdEJ5UmVxdWVzdGVyQWRkcmVzcyhhZGRyZXNzIHJlcXVlc3RlckFkZHJlc3MpIHB1YmxpYyByZXR1cm5zIChzdHJpbmcsIHN0cmluZywgc3RyaW5nLCBib29sLCBhZGRyZXNzLCBhZGRyZXNzKSB7DQogICAgICAgIFJlcXVlc3QgciA9IHJlcXVlc3RzW3JlcXVlc3RlckFkZHJlc3NdOw0KICAgICAgICBpZiAoIXIuZG9lc0V4aXN0KSB7DQogICAgICAgICAgICByZXR1cm4gKCIiLCAiIiwgIiIsIGZhbHNlLCBBRERSRVNTX05VTEwsIEFERFJFU1NfTlVMTCk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIChyLnJlcXVlc3Rlck5hbWUsIHIudmFsZW50aW5lTmFtZSwgci5jdXN0b21NZXNzYWdlLCByLndhc0FjY2VwdGVkLCByLnZhbGVudGluZUFkZHJlc3MsIHJlcXVlc3RlckFkZHJlc3MpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFJlcXVlc3RCeUluZGV4KHVpbnQgaW5kZXgpIHB1YmxpYyByZXR1cm5zIChzdHJpbmcsIHN0cmluZywgc3RyaW5nLCBib29sLCBhZGRyZXNzLCBhZGRyZXNzKSB7DQogICAgICAgIGlmIChpbmRleCA+PSByZXF1ZXN0ZXJzLmxlbmd0aCkgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgYWRkcmVzcyByZXF1ZXN0ZXJBZGRyZXNzID0gcmVxdWVzdGVyc1tpbmRleF07DQogICAgICAgIFJlcXVlc3QgciA9IHJlcXVlc3RzW3JlcXVlc3RlckFkZHJlc3NdOw0KICAgICAgICByZXR1cm4gKHIucmVxdWVzdGVyTmFtZSwgci52YWxlbnRpbmVOYW1lLCByLmN1c3RvbU1lc3NhZ2UsIHIud2FzQWNjZXB0ZWQsIHIudmFsZW50aW5lQWRkcmVzcywgcmVxdWVzdGVyQWRkcmVzcyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdXBkYXRlT3duZXIoYWRkcmVzcyBuZXdPd25lcikNCiAgICAgICAgcmVzdHJpY3RlZA0KICAgICAgICBwdWJsaWMgew0KICAgICAgICBvd25lciA9IG5ld093bmVyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNhc2hvdXQoYWRkcmVzcyByZWNpcGllbnQpDQogICAgICAgIHJlc3RyaWN0ZWQNCiAgICAgICAgcHVibGljIHsNCiAgICAgICAgYWRkcmVzcyBjb250cmFjdEFkZHJlc3MgPSB0aGlzOw0KICAgICAgICBpZiAoIXJlY2lwaWVudC5zZW5kKGNvbnRyYWN0QWRkcmVzcy5iYWxhbmNlKSkgew0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICB9DQp9'