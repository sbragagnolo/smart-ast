base 64 content
base64vault1
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC42Ow0KDQoNCi8qDQogICAgQ29weXJpZ2h0IDIwMTYsIEpvcmRpIEJheWxpbmENCg0KICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5DQogICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkNCiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcg0KICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uDQoNCiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwNCiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZg0KICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUNCiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLg0KDQogICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UNCiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4NCiAqLw0KDQovLy8gQHRpdGxlIFZhdWx0IENvbnRyYWN0DQovLy8gQGF1dGhvciBKb3JkaSBCYXlsaW5hDQovLy8gQG5vdGljZSBUaGlzIGNvbnRyYWN0IGhvbGRzIGZ1bmRzIGZvciBDYW1wYWlnbnMgYW5kIGF1dG9tYXRlcyBwYXltZW50cy4gRm9yDQovLy8gIHRoaXMgaXRlcmF0aW9uIHRoZSBmdW5kcyB3aWxsIGNvbWUgc3RyYWlnaHQgZnJvbSB0aGUgR2l2ZXRoIE11bHRpc2lnIGFzIGENCi8vLyAgc2FmZXR5IHByZWNhdXRpb24sIGJ1dCBvbmNlIGZ1bGx5IHRlc3RlZCBhbmQgb3B0aW1pemVkIHRoaXMgY29udHJhY3Qgd2lsbA0KLy8vICBiZSBhIHNhZmUgcGxhY2UgdG8gc3RvcmUgZnVuZHMgZXF1aXBwZWQgd2l0aCBvcHRpb25hbCB2YXJpYWJsZSB0aW1lIGRlbGF5cw0KLy8vICB0byBhbGxvdyBmb3IgYW4gb3B0aW9uYWwgZXNjYXBlIGhhdGNoDQoNCi8vLyBAZGV2IGBPd25lZGAgaXMgYSBiYXNlIGxldmVsIGNvbnRyYWN0IHRoYXQgYXNzaWducyBhbiBgb3duZXJgIHRoYXQgY2FuIGJlDQovLy8gIGxhdGVyIGNoYW5nZWQNCmNvbnRyYWN0IE93bmVkIHsNCiAgICAvLy8gQGRldiBgb3duZXJgIGlzIHRoZSBvbmx5IGFkZHJlc3MgdGhhdCBjYW4gY2FsbCBhIGZ1bmN0aW9uIHdpdGggdGhpcw0KICAgIC8vLyBtb2RpZmllcg0KICAgIG1vZGlmaWVyIG9ubHlPd25lciB7IGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsgXzsgfQ0KDQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7DQoNCiAgICAvLy8gQG5vdGljZSBUaGUgQ29uc3RydWN0b3IgYXNzaWducyB0aGUgbWVzc2FnZSBzZW5kZXIgdG8gYmUgYG93bmVyYA0KICAgIGZ1bmN0aW9uIE93bmVkKCkgeyBvd25lciA9IG1zZy5zZW5kZXI7fQ0KDQogICAgLy8vIEBub3RpY2UgYG93bmVyYCBjYW4gc3RlcCBkb3duIGFuZCBhc3NpZ24gc29tZSBvdGhlciBhZGRyZXNzIHRvIHRoaXMgcm9sZQ0KICAgIC8vLyBAcGFyYW0gX25ld093bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgb3duZXIuIDB4MCBjYW4gYmUgdXNlZCB0byBjcmVhdGUNCiAgICAvLy8gIGFuIHVub3duZWQgbmV1dHJhbCB2YXVsdCwgaG93ZXZlciB0aGF0IGNhbm5vdCBiZSB1bmRvbmUNCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIHsNCiAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7DQogICAgfQ0KfQ0KLy8vIEBkZXYgYEVzY2FwYWJsZWAgaXMgYSBiYXNlIGxldmVsIGNvbnRyYWN0IGJ1aWx0IG9mZiBvZiB0aGUgYE93bmVkYA0KLy8vICBjb250cmFjdCB0aGF0IGNyZWF0ZXMgYW4gZXNjYXBlIGhhdGNoIGZ1bmN0aW9uIHRvIHNlbmQgaXRzIGV0aGVyIHRvDQovLy8gIGBlc2NhcGVEZXN0aW5hdGlvbmAgd2hlbiBjYWxsZWQgYnkgdGhlIGBlc2NhcGVDYWxsZXJgIGluIHRoZSBjYXNlIHRoYXQNCi8vLyAgc29tZXRoaW5nIHVuZXhwZWN0ZWQgaGFwcGVucw0KY29udHJhY3QgRXNjYXBhYmxlIGlzIE93bmVkIHsNCiAgICBhZGRyZXNzIHB1YmxpYyBlc2NhcGVDYWxsZXI7DQogICAgYWRkcmVzcyBwdWJsaWMgZXNjYXBlRGVzdGluYXRpb247DQoNCiAgICAvLy8gQG5vdGljZSBUaGUgQ29uc3RydWN0b3IgYXNzaWducyB0aGUgYGVzY2FwZURlc3RpbmF0aW9uYCBhbmQgdGhlDQogICAgLy8vICBgZXNjYXBlQ2FsbGVyYA0KICAgIC8vLyBAcGFyYW0gX2VzY2FwZURlc3RpbmF0aW9uIFRoZSBhZGRyZXNzIG9mIGEgc2FmZSBsb2NhdGlvbiAodXN1IGENCiAgICAvLy8gIE11bHRpc2lnKSB0byBzZW5kIHRoZSBldGhlciBoZWxkIGluIHRoaXMgY29udHJhY3QNCiAgICAvLy8gQHBhcmFtIF9lc2NhcGVDYWxsZXIgVGhlIGFkZHJlc3Mgb2YgYSB0cnVzdGVkIGFjY291bnQgb3IgY29udHJhY3QgdG8NCiAgICAvLy8gIGNhbGwgYGVzY2FwZUhhdGNoKClgIHRvIHNlbmQgdGhlIGV0aGVyIGluIHRoaXMgY29udHJhY3QgdG8gdGhlDQogICAgLy8vICBgZXNjYXBlRGVzdGluYXRpb25gIGl0IHdvdWxkIGJlIGlkZWFsIHRoYXQgYGVzY2FwZUNhbGxlcmAgY2Fubm90IG1vdmUNCiAgICAvLy8gIGZ1bmRzIG91dCBvZiBgZXNjYXBlRGVzdGluYXRpb25gDQogICAgZnVuY3Rpb24gRXNjYXBhYmxlKGFkZHJlc3MgX2VzY2FwZUNhbGxlciwgYWRkcmVzcyBfZXNjYXBlRGVzdGluYXRpb24pIHsNCiAgICAgICAgZXNjYXBlQ2FsbGVyID0gX2VzY2FwZUNhbGxlcjsNCiAgICAgICAgZXNjYXBlRGVzdGluYXRpb24gPSBfZXNjYXBlRGVzdGluYXRpb247DQogICAgfQ0KDQogICAgLy8vIEBkZXYgVGhlIGFkZHJlc3NlcyBwcmVhc3NpZ25lZCB0aGUgYGVzY2FwZUNhbGxlcmAgcm9sZQ0KICAgIC8vLyAgaXMgdGhlIG9ubHkgYWRkcmVzc2VzIHRoYXQgY2FuIGNhbGwgYSBmdW5jdGlvbiB3aXRoIHRoaXMgbW9kaWZpZXINCiAgICBtb2RpZmllciBvbmx5RXNjYXBlQ2FsbGVyT3JPd25lciB7DQogICAgICAgIGlmICgobXNnLnNlbmRlciAhPSBlc2NhcGVDYWxsZXIpJiYobXNnLnNlbmRlciAhPSBvd25lcikpDQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgXzsNCiAgICB9DQoNCiAgICAvLy8gQG5vdGljZSBUaGUgYGVzY2FwZUhhdGNoKClgIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBhcyBhIGxhc3QgcmVzb3J0IGlmIGENCiAgICAvLy8gc2VjdXJpdHkgaXNzdWUgaXMgdW5jb3ZlcmVkIG9yIHNvbWV0aGluZyB1bmV4cGVjdGVkIGhhcHBlbmVkDQogICAgZnVuY3Rpb24gZXNjYXBlSGF0Y2goKSBvbmx5RXNjYXBlQ2FsbGVyT3JPd25lciB7DQogICAgICAgIHVpbnQgdG90YWwgPSB0aGlzLmJhbGFuY2U7DQogICAgICAgIC8vIFNlbmQgdGhlIHRvdGFsIGJhbGFuY2Ugb2YgdGhpcyBjb250cmFjdCB0byB0aGUgYGVzY2FwZURlc3RpbmF0aW9uYA0KICAgICAgICBpZiAoIWVzY2FwZURlc3RpbmF0aW9uLnNlbmQodG90YWwpKSB7DQogICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgfQ0KICAgICAgICBFc2NhcGVDYWxsZWQodG90YWwpOw0KICAgIH0NCiAgICAvLy8gQG5vdGljZSBDaGFuZ2VzIHRoZSBhZGRyZXNzIGFzc2lnbmVkIHRvIGNhbGwgYGVzY2FwZUhhdGNoKClgDQogICAgLy8vIEBwYXJhbSBfbmV3RXNjYXBlQ2FsbGVyIFRoZSBhZGRyZXNzIG9mIGEgdHJ1c3RlZCBhY2NvdW50IG9yIGNvbnRyYWN0IHRvDQogICAgLy8vICBjYWxsIGBlc2NhcGVIYXRjaCgpYCB0byBzZW5kIHRoZSBldGhlciBpbiB0aGlzIGNvbnRyYWN0IHRvIHRoZQ0KICAgIC8vLyAgYGVzY2FwZURlc3RpbmF0aW9uYCBpdCB3b3VsZCBiZSBpZGVhbCB0aGF0IGBlc2NhcGVDYWxsZXJgIGNhbm5vdA0KICAgIC8vLyAgbW92ZSBmdW5kcyBvdXQgb2YgYGVzY2FwZURlc3RpbmF0aW9uYA0KICAgIGZ1bmN0aW9uIGNoYW5nZUVzY2FwZUNhbGxlcihhZGRyZXNzIF9uZXdFc2NhcGVDYWxsZXIpIG9ubHlFc2NhcGVDYWxsZXJPck93bmVyIHsNCiAgICAgICAgZXNjYXBlQ2FsbGVyID0gX25ld0VzY2FwZUNhbGxlcjsNCiAgICB9DQoNCiAgICBldmVudCBFc2NhcGVDYWxsZWQodWludCBhbW91bnQpOw0KfQ0KDQovLy8gQGRldiBgVmF1bHRgIGlzIGEgaGlnaGVyIGxldmVsIGNvbnRyYWN0IGJ1aWx0IG9mZiBvZiB0aGUgYEVzY2FwYWJsZWANCi8vLyAgY29udHJhY3QgdGhhdCBob2xkcyBmdW5kcyBmb3IgQ2FtcGFpZ25zIGFuZCBhdXRvbWF0ZXMgcGF5bWVudHMuDQpjb250cmFjdCBWYXVsdCBpcyBFc2NhcGFibGUgew0KDQogICAgLy8vIEBkZXYgYFBheW1lbnRgIGlzIGEgcHVibGljIHN0cnVjdHVyZSB0aGF0IGRlc2NyaWJlcyB0aGUgZGV0YWlscyBvZg0KICAgIC8vLyAgZWFjaCBwYXltZW50IG1ha2luZyBpdCBlYXN5IHRvIHRyYWNrIHRoZSBtb3ZlbWVudCBvZiBmdW5kcw0KICAgIC8vLyAgdHJhbnNwYXJlbnRseQ0KICAgIHN0cnVjdCBQYXltZW50IHsNCiAgICAgICAgc3RyaW5nIGRlc2NyaXB0aW9uOyAgICAgLy8gV2hhdCBpcyB0aGUgcHVycG9zZSBvZiB0aGlzIHBheW1lbnQNCiAgICAgICAgYWRkcmVzcyBzcGVuZGVyOyAgICAgICAgLy8gV2hvIGlzIHNlbmRpbmcgdGhlIGZ1bmRzDQogICAgICAgIHVpbnQgZWFybGllc3RQYXlUaW1lOyAgIC8vIFRoZSBlYXJsaWVzdCBhIHBheW1lbnQgY2FuIGJlIG1hZGUgKFVuaXggVGltZSkNCiAgICAgICAgYm9vbCBjYW5jZWxlZDsgICAgICAgICAvLyBJZiBUcnVlIHRoZW4gdGhlIHBheW1lbnQgaGFzIGJlZW4gY2FuY2VsZWQNCiAgICAgICAgYm9vbCBwYWlkOyAgICAgICAgICAgICAgLy8gSWYgVHJ1ZSB0aGVuIHRoZSBwYXltZW50IGhhcyBiZWVuIHBhaWQNCiAgICAgICAgYWRkcmVzcyByZWNpcGllbnQ7ICAgICAgLy8gV2hvIGlzIHJlY2VpdmluZyB0aGUgZnVuZHMNCiAgICAgICAgdWludCBhbW91bnQ7ICAgICAgICAgICAgLy8gVGhlIGFtb3VudCBvZiB3ZWkgc2VudCBpbiB0aGUgcGF5bWVudA0KICAgICAgICB1aW50IHNlY3VyaXR5R3VhcmREZWxheTsvLyBUaGUgc2Vjb25kcyBgc2VjdXJpdHlHdWFyZGAgY2FuIGRlbGF5IHBheW1lbnQNCiAgICB9DQoNCiAgICBQYXltZW50W10gcHVibGljIGF1dGhvcml6ZWRQYXltZW50czsNCg0KICAgIGFkZHJlc3MgcHVibGljIHNlY3VyaXR5R3VhcmQ7DQogICAgdWludCBwdWJsaWMgYWJzb2x1dGVNaW5UaW1lTG9jazsNCiAgICB1aW50IHB1YmxpYyB0aW1lTG9jazsNCiAgICB1aW50IHB1YmxpYyBtYXhTZWN1cml0eUd1YXJkRGVsYXk7DQoNCiAgICAvLy8gQGRldiBUaGUgd2hpdGUgbGlzdCBvZiBhcHByb3ZlZCBhZGRyZXNzZXMgYWxsb3dlZCB0byBzZXQgdXAgJiYgcmVjZWl2ZQ0KICAgIC8vLyAgcGF5bWVudHMgZnJvbSB0aGlzIHZhdWx0DQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgYWxsb3dlZFNwZW5kZXJzOw0KDQogICAgLy8vIEBkZXYgVGhlIGFkZHJlc3MgYXNzaWduZWQgdGhlIHJvbGUgb2YgYHNlY3VyaXR5R3VhcmRgIGlzIHRoZSBvbmx5DQogICAgLy8vICBhZGRyZXNzZXMgdGhhdCBjYW4gY2FsbCBhIGZ1bmN0aW9uIHdpdGggdGhpcyBtb2RpZmllcg0KICAgIG1vZGlmaWVyIG9ubHlTZWN1cml0eUd1YXJkIHsgaWYgKG1zZy5zZW5kZXIgIT0gc2VjdXJpdHlHdWFyZCkgdGhyb3c7IF87IH0NCg0KICAgIC8vIEBkZXYgRXZlbnRzIHRvIG1ha2UgdGhlIHBheW1lbnQgbW92ZW1lbnRzIGVhc3kgdG8gZmluZCBvbiB0aGUgYmxvY2tjaGFpbg0KICAgIGV2ZW50IFBheW1lbnRBdXRob3JpemVkKHVpbnQgaW5kZXhlZCBpZFBheW1lbnQsIGFkZHJlc3MgaW5kZXhlZCByZWNpcGllbnQsIHVpbnQgYW1vdW50KTsNCiAgICBldmVudCBQYXltZW50RXhlY3V0ZWQodWludCBpbmRleGVkIGlkUGF5bWVudCwgYWRkcmVzcyBpbmRleGVkIHJlY2lwaWVudCwgdWludCBhbW91bnQpOw0KICAgIGV2ZW50IFBheW1lbnRDYW5jZWxlZCh1aW50IGluZGV4ZWQgaWRQYXltZW50KTsNCiAgICBldmVudCBFdGhlclJlY2VpdmVkKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IGFtb3VudCk7DQogICAgZXZlbnQgU3BlbmRlckF1dGhvcml6YXRpb24oYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIGJvb2wgYXV0aG9yaXplZCk7DQoNCi8vLy8vLy8vLw0KLy8gQ29uc3RydWN0b3INCi8vLy8vLy8vLw0KDQogICAgLy8vIEBub3RpY2UgVGhlIENvbnN0cnVjdG9yIGNyZWF0ZXMgdGhlIFZhdWx0IG9uIHRoZSBibG9ja2NoYWluDQogICAgLy8vIEBwYXJhbSBfZXNjYXBlQ2FsbGVyIFRoZSBhZGRyZXNzIG9mIGEgdHJ1c3RlZCBhY2NvdW50IG9yIGNvbnRyYWN0IHRvDQogICAgLy8vICBjYWxsIGBlc2NhcGVIYXRjaCgpYCB0byBzZW5kIHRoZSBldGhlciBpbiB0aGlzIGNvbnRyYWN0IHRvIHRoZQ0KICAgIC8vLyAgYGVzY2FwZURlc3RpbmF0aW9uYCBpdCB3b3VsZCBiZSBpZGVhbCBpZiBgZXNjYXBlQ2FsbGVyYCBjYW5ub3QgbW92ZQ0KICAgIC8vLyAgZnVuZHMgb3V0IG9mIGBlc2NhcGVEZXN0aW5hdGlvbmANCiAgICAvLy8gQHBhcmFtIF9lc2NhcGVEZXN0aW5hdGlvbiBUaGUgYWRkcmVzcyBvZiBhIHNhZmUgbG9jYXRpb24gKHVzdSBhDQogICAgLy8vICBNdWx0aXNpZykgdG8gc2VuZCB0aGUgZXRoZXIgaGVsZCBpbiB0aGlzIGNvbnRyYWN0IGluIGFuIGVtZXJnZW5jeQ0KICAgIC8vLyBAcGFyYW0gX2Fic29sdXRlTWluVGltZUxvY2sgVGhlIG1pbmltdW0gbnVtYmVyIG9mIHNlY29uZHMgYHRpbWVsb2NrYCBjYW4NCiAgICAvLy8gIGJlIHNldCB0bywgaWYgc2V0IHRvIDAgdGhlIGBvd25lcmAgY2FuIHJlbW92ZSB0aGUgYHRpbWVMb2NrYCBjb21wbGV0ZWx5DQogICAgLy8vIEBwYXJhbSBfdGltZUxvY2sgSW5pdGlhbCBudW1iZXIgb2Ygc2Vjb25kcyB0aGF0IHBheW1lbnRzIGFyZSBkZWxheWVkDQogICAgLy8vICBhZnRlciB0aGV5IGFyZSBhdXRob3JpemVkIChhIHNlY3VyaXR5IHByZWNhdXRpb24pDQogICAgLy8vIEBwYXJhbSBfc2VjdXJpdHlHdWFyZCBBZGRyZXNzIHRoYXQgd2lsbCBiZSBhYmxlIHRvIGRlbGF5IHRoZSBwYXltZW50cw0KICAgIC8vLyAgYmV5b25kIHRoZSBpbml0aWFsIHRpbWVsb2NrIHJlcXVpcmVtZW50czsgY2FuIGJlIHNldCB0byAweDAgdG8gcmVtb3ZlDQogICAgLy8vICB0aGUgYHNlY3VyaXR5R3VhcmRgIGZ1bmN0aW9uYWxpdHkNCiAgICAvLy8gQHBhcmFtIF9tYXhTZWN1cml0eUd1YXJkRGVsYXkgVGhlIG1heGltdW0gbnVtYmVyIG9mIHNlY29uZHMgaW4gdG90YWwNCiAgICAvLy8gICB0aGF0IGBzZWN1cml0eUd1YXJkYCBjYW4gZGVsYXkgYSBwYXltZW50IHNvIHRoYXQgdGhlIG93bmVyIGNhbiBjYW5jZWwNCiAgICAvLy8gICB0aGUgcGF5bWVudCBpZiBuZWVkZWQNCiAgICBmdW5jdGlvbiBWYXVsdCgNCiAgICAgICAgYWRkcmVzcyBfZXNjYXBlQ2FsbGVyLA0KICAgICAgICBhZGRyZXNzIF9lc2NhcGVEZXN0aW5hdGlvbiwNCiAgICAgICAgdWludCBfYWJzb2x1dGVNaW5UaW1lTG9jaywNCiAgICAgICAgdWludCBfdGltZUxvY2ssDQogICAgICAgIGFkZHJlc3MgX3NlY3VyaXR5R3VhcmQsDQogICAgICAgIHVpbnQgX21heFNlY3VyaXR5R3VhcmREZWxheSkgRXNjYXBhYmxlKF9lc2NhcGVDYWxsZXIsIF9lc2NhcGVEZXN0aW5hdGlvbikNCiAgICB7DQogICAgICAgIGFic29sdXRlTWluVGltZUxvY2sgPSBfYWJzb2x1dGVNaW5UaW1lTG9jazsNCiAgICAgICAgdGltZUxvY2sgPSBfdGltZUxvY2s7DQogICAgICAgIHNlY3VyaXR5R3VhcmQgPSBfc2VjdXJpdHlHdWFyZDsNCiAgICAgICAgbWF4U2VjdXJpdHlHdWFyZERlbGF5ID0gX21heFNlY3VyaXR5R3VhcmREZWxheTsNCiAgICB9DQoNCi8vLy8vLy8vLw0KLy8gSGVscGVyIGZ1bmN0aW9ucw0KLy8vLy8vLy8vDQoNCiAgICAvLy8gQG5vdGljZSBTdGF0ZXMgdGhlIHRvdGFsIG51bWJlciBvZiBhdXRob3JpemVkIHBheW1lbnRzIGluIHRoaXMgY29udHJhY3QNCiAgICAvLy8gQHJldHVybiBUaGUgbnVtYmVyIG9mIHBheW1lbnRzIGV2ZXIgYXV0aG9yaXplZCBldmVuIGlmIHRoZXkgd2VyZSBjYW5jZWxlZA0KICAgIGZ1bmN0aW9uIG51bWJlck9mQXV0aG9yaXplZFBheW1lbnRzKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgew0KICAgICAgICByZXR1cm4gYXV0aG9yaXplZFBheW1lbnRzLmxlbmd0aDsNCiAgICB9DQoNCi8vLy8vLw0KLy8gUmVjZWl2ZSBFdGhlcg0KLy8vLy8vDQoNCiAgICAvLy8gQG5vdGljZSBDYWxsZWQgYW55dGltZSBldGhlciBpcyBzZW50IHRvIHRoZSBjb250cmFjdCAmJiBjcmVhdGVzIGFuIGV2ZW50DQogICAgLy8vIHRvIG1vcmUgZWFzaWx5IHRyYWNrIHRoZSBpbmNvbWluZyB0cmFuc2FjdGlvbnMNCiAgICBmdW5jdGlvbiByZWNlaXZlRXRoZXIoKSBwYXlhYmxlIHsNCiAgICAgICAgRXRoZXJSZWNlaXZlZChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOw0KICAgIH0NCg0KICAgIC8vLyBAbm90aWNlIFRoZSBmYWxsIGJhY2sgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW5ldmVyIGV0aGVyIGlzIHNlbnQgdG8gdGhpcw0KICAgIC8vLyAgY29udHJhY3QNCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICAgICAgcmVjZWl2ZUV0aGVyKCk7DQogICAgfQ0KDQovLy8vLy8vLw0KLy8gU3BlbmRlciBJbnRlcmZhY2UNCi8vLy8vLy8vDQoNCiAgICAvLy8gQG5vdGljZSBvbmx5IGBhbGxvd2VkU3BlbmRlcnNbXWAgQ3JlYXRlcyBhIG5ldyBgUGF5bWVudGANCiAgICAvLy8gQHBhcmFtIF9kZXNjcmlwdGlvbiBCcmllZiBkZXNjcmlwdGlvbiBvZiB0aGUgcGF5bWVudCB0aGF0IGlzIGF1dGhvcml6ZWQNCiAgICAvLy8gQHBhcmFtIF9yZWNpcGllbnQgRGVzdGluYXRpb24gb2YgdGhlIHBheW1lbnQNCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgQW1vdW50IHRvIGJlIHBhaWQgaW4gd2VpDQogICAgLy8vIEBwYXJhbSBfcGF5bWVudERlbGF5IE51bWJlciBvZiBzZWNvbmRzIHRoZSBwYXltZW50IGlzIHRvIGJlIGRlbGF5ZWQsIGlmDQogICAgLy8vICB0aGlzIHZhbHVlIGlzIGJlbG93IGB0aW1lTG9ja2AgdGhlbiB0aGUgYHRpbWVMb2NrYCBkZXRlcm1pbmVzIHRoZSBkZWxheQ0KICAgIC8vLyBAcmV0dXJuIFRoZSBQYXltZW50IElEIG51bWJlciBmb3IgdGhlIG5ldyBhdXRob3JpemVkIHBheW1lbnQNCiAgICBmdW5jdGlvbiBhdXRob3JpemVQYXltZW50KA0KICAgICAgICBzdHJpbmcgX2Rlc2NyaXB0aW9uLA0KICAgICAgICBhZGRyZXNzIF9yZWNpcGllbnQsDQogICAgICAgIHVpbnQgX2Ftb3VudCwNCiAgICAgICAgdWludCBfcGF5bWVudERlbGF5DQogICAgKSByZXR1cm5zKHVpbnQpIHsNCg0KICAgICAgICAvLyBGYWlsIGlmIHlvdSBhcmVudCBvbiB0aGUgYGFsbG93ZWRTcGVuZGVyc2Agd2hpdGUgbGlzdA0KICAgICAgICBpZiAoIWFsbG93ZWRTcGVuZGVyc1ttc2cuc2VuZGVyXSApIHRocm93Ow0KICAgICAgICB1aW50IGlkUGF5bWVudCA9IGF1dGhvcml6ZWRQYXltZW50cy5sZW5ndGg7ICAgICAgIC8vIFVuaXF1ZSBQYXltZW50IElEDQogICAgICAgIGF1dGhvcml6ZWRQYXltZW50cy5sZW5ndGgrKzsNCg0KICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGxpbmVzIGZpbGwgb3V0IHRoZSBwYXltZW50IHN0cnVjdA0KICAgICAgICBQYXltZW50IHAgPSBhdXRob3JpemVkUGF5bWVudHNbaWRQYXltZW50XTsNCiAgICAgICAgcC5zcGVuZGVyID0gbXNnLnNlbmRlcjsNCg0KICAgICAgICAvLyBEZXRlcm1pbmVzIHRoZSBlYXJsaWVzdCB0aGUgcmVjaXBpZW50IGNhbiByZWNlaXZlIHBheW1lbnQgKFVuaXggdGltZSkNCiAgICAgICAgcC5lYXJsaWVzdFBheVRpbWUgPSBfcGF5bWVudERlbGF5ID49IHRpbWVMb2NrID8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93ICsgX3BheW1lbnREZWxheSA6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyArIHRpbWVMb2NrOw0KICAgICAgICBwLnJlY2lwaWVudCA9IF9yZWNpcGllbnQ7DQogICAgICAgIHAuYW1vdW50ID0gX2Ftb3VudDsNCiAgICAgICAgcC5kZXNjcmlwdGlvbiA9IF9kZXNjcmlwdGlvbjsNCiAgICAgICAgUGF5bWVudEF1dGhvcml6ZWQoaWRQYXltZW50LCBwLnJlY2lwaWVudCwgcC5hbW91bnQpOw0KICAgICAgICByZXR1cm4gaWRQYXltZW50Ow0KICAgIH0NCg0KICAgIC8vLyBAbm90aWNlIG9ubHkgYGFsbG93ZWRTcGVuZGVyc1tdYCBUaGUgcmVjaXBpZW50IG9mIGEgcGF5bWVudCBjYWxscyB0aGlzDQogICAgLy8vICBmdW5jdGlvbiB0byBzZW5kIHRoZW1zZWx2ZXMgdGhlIGV0aGVyIGFmdGVyIHRoZSBgZWFybGllc3RQYXlUaW1lYCBoYXMNCiAgICAvLy8gIGV4cGlyZWQNCiAgICAvLy8gQHBhcmFtIF9pZFBheW1lbnQgVGhlIHBheW1lbnQgSUQgdG8gYmUgZXhlY3V0ZWQNCiAgICBmdW5jdGlvbiBjb2xsZWN0QXV0aG9yaXplZFBheW1lbnQodWludCBfaWRQYXltZW50KSB7DQoNCiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgYF9pZFBheW1lbnRgIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBwYXltZW50cyBzdHJ1Y3QNCiAgICAgICAgaWYgKF9pZFBheW1lbnQgPj0gYXV0aG9yaXplZFBheW1lbnRzLmxlbmd0aCkgdGhyb3c7DQoNCiAgICAgICAgUGF5bWVudCBwID0gYXV0aG9yaXplZFBheW1lbnRzW19pZFBheW1lbnRdOw0KDQogICAgICAgIC8vIENoZWNraW5nIGZvciByZWFzb25zIG5vdCB0byBleGVjdXRlIHRoZSBwYXltZW50DQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IHAucmVjaXBpZW50KSB0aHJvdzsNCiAgICAgICAgaWYgKCFhbGxvd2VkU3BlbmRlcnNbcC5zcGVuZGVyXSkgdGhyb3c7DQogICAgICAgIGlmIChub3cgPCBwLmVhcmxpZXN0UGF5VGltZSkgdGhyb3c7DQogICAgICAgIGlmIChwLmNhbmNlbGVkKSB0aHJvdzsNCiAgICAgICAgaWYgKHAucGFpZCkgdGhyb3c7DQogICAgICAgIGlmICh0aGlzLmJhbGFuY2UgPCBwLmFtb3VudCkgdGhyb3c7DQoNCiAgICAgICAgcC5wYWlkID0gdHJ1ZTsgLy8gU2V0IHRoZSBwYXltZW50IHRvIGJlaW5nIHBhaWQNCiAgICAgICAgaWYgKCFwLnJlY2lwaWVudC5zZW5kKHAuYW1vdW50KSkgeyAgLy8gTWFrZSB0aGUgcGF5bWVudA0KICAgICAgICAgICAgdGhyb3c7DQogICAgICAgIH0NCiAgICAgICAgUGF5bWVudEV4ZWN1dGVkKF9pZFBheW1lbnQsIHAucmVjaXBpZW50LCBwLmFtb3VudCk7DQogICAgIH0NCg0KLy8vLy8vLy8vDQovLyBTZWN1cml0eUd1YXJkIEludGVyZmFjZQ0KLy8vLy8vLy8vDQoNCiAgICAvLy8gQG5vdGljZSBgb25seVNlY3VyaXR5R3VhcmRgIERlbGF5cyBhIHBheW1lbnQgZm9yIGEgc2V0IG51bWJlciBvZiBzZWNvbmRzDQogICAgLy8vIEBwYXJhbSBfaWRQYXltZW50IElEIG9mIHRoZSBwYXltZW50IHRvIGJlIGRlbGF5ZWQNCiAgICAvLy8gQHBhcmFtIF9kZWxheSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgdG8gZGVsYXkgdGhlIHBheW1lbnQNCiAgICBmdW5jdGlvbiBkZWxheVBheW1lbnQodWludCBfaWRQYXltZW50LCB1aW50IF9kZWxheSkgb25seVNlY3VyaXR5R3VhcmQgew0KICAgICAgICBpZiAoX2lkUGF5bWVudCA+PSBhdXRob3JpemVkUGF5bWVudHMubGVuZ3RoKSB0aHJvdzsNCg0KICAgICAgICBQYXltZW50IHAgPSBhdXRob3JpemVkUGF5bWVudHNbX2lkUGF5bWVudF07DQoNCiAgICAgICAgaWYgKChwLnNlY3VyaXR5R3VhcmREZWxheSArIF9kZWxheSA+IG1heFNlY3VyaXR5R3VhcmREZWxheSkgfHwNCiAgICAgICAgICAgIChwLnBhaWQpIHx8DQogICAgICAgICAgICAocC5jYW5jZWxlZCkpDQogICAgICAgICAgICB0aHJvdzsNCg0KICAgICAgICBwLnNlY3VyaXR5R3VhcmREZWxheSArPSBfZGVsYXk7DQogICAgICAgIHAuZWFybGllc3RQYXlUaW1lICs9IF9kZWxheTsNCiAgICB9DQoNCi8vLy8vLy8vDQovLyBPd25lciBJbnRlcmZhY2UNCi8vLy8vLy8NCg0KICAgIC8vLyBAbm90aWNlIGBvbmx5T3duZXJgIENhbmNlbCBhIHBheW1lbnQgYWxsIHRvZ2V0aGVyDQogICAgLy8vIEBwYXJhbSBfaWRQYXltZW50IElEIG9mIHRoZSBwYXltZW50IHRvIGJlIGNhbmNlbGVkLg0KICAgIGZ1bmN0aW9uIGNhbmNlbFBheW1lbnQodWludCBfaWRQYXltZW50KSBvbmx5T3duZXIgew0KICAgICAgICBpZiAoX2lkUGF5bWVudCA+PSBhdXRob3JpemVkUGF5bWVudHMubGVuZ3RoKSB0aHJvdzsNCg0KICAgICAgICBQYXltZW50IHAgPSBhdXRob3JpemVkUGF5bWVudHNbX2lkUGF5bWVudF07DQoNCg0KICAgICAgICBpZiAocC5jYW5jZWxlZCkgdGhyb3c7DQogICAgICAgIGlmIChwLnBhaWQpIHRocm93Ow0KDQogICAgICAgIHAuY2FuY2VsZWQgPSB0cnVlOw0KICAgICAgICBQYXltZW50Q2FuY2VsZWQoX2lkUGF5bWVudCk7DQogICAgfQ0KDQogICAgLy8vIEBub3RpY2UgYG9ubHlPd25lcmAgQWRkcyBhIHNwZW5kZXIgdG8gdGhlIGBhbGxvd2VkU3BlbmRlcnNbXWAgd2hpdGUgbGlzdA0KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGNvbnRyYWN0IGJlaW5nIGF1dGhvcml6ZWQvdW5hdXRob3JpemVkDQogICAgLy8vIEBwYXJhbSBfYXV0aG9yaXplIGB0cnVlYCBpZiBhdXRob3JpemluZyBhbmQgYGZhbHNlYCBpZiB1bmF1dGhvcml6aW5nDQogICAgZnVuY3Rpb24gYXV0aG9yaXplU3BlbmRlcihhZGRyZXNzIF9zcGVuZGVyLCBib29sIF9hdXRob3JpemUpIG9ubHlPd25lciB7DQogICAgICAgIGFsbG93ZWRTcGVuZGVyc1tfc3BlbmRlcl0gPSBfYXV0aG9yaXplOw0KICAgICAgICBTcGVuZGVyQXV0aG9yaXphdGlvbihfc3BlbmRlciwgX2F1dGhvcml6ZSk7DQogICAgfQ0KDQogICAgLy8vIEBub3RpY2UgYG9ubHlPd25lcmAgU2V0cyB0aGUgYWRkcmVzcyBvZiBgc2VjdXJpdHlHdWFyZGANCiAgICAvLy8gQHBhcmFtIF9uZXdTZWN1cml0eUd1YXJkIEFkZHJlc3Mgb2YgdGhlIG5ldyBzZWN1cml0eSBndWFyZA0KICAgIGZ1bmN0aW9uIHNldFNlY3VyaXR5R3VhcmQoYWRkcmVzcyBfbmV3U2VjdXJpdHlHdWFyZCkgb25seU93bmVyIHsNCiAgICAgICAgc2VjdXJpdHlHdWFyZCA9IF9uZXdTZWN1cml0eUd1YXJkOw0KICAgIH0NCg0KDQogICAgLy8vIEBub3RpY2UgYG9ubHlPd25lcmAgQ2hhbmdlcyBgdGltZUxvY2tgOyB0aGUgbmV3IGB0aW1lTG9ja2AgY2Fubm90IGJlDQogICAgLy8vICBsb3dlciB0aGFuIGBhYnNvbHV0ZU1pblRpbWVMb2NrYA0KICAgIC8vLyBAcGFyYW0gX25ld1RpbWVMb2NrIFNldHMgdGhlIG5ldyBtaW5pbXVtIGRlZmF1bHQgYHRpbWVMb2NrYCBpbiBzZWNvbmRzOw0KICAgIC8vLyAgcGVuZGluZyBwYXltZW50cyBtYWludGFpbiB0aGVpciBgZWFybGllc3RQYXlUaW1lYA0KICAgIGZ1bmN0aW9uIHNldFRpbWVsb2NrKHVpbnQgX25ld1RpbWVMb2NrKSBvbmx5T3duZXIgew0KICAgICAgICBpZiAoX25ld1RpbWVMb2NrIDwgYWJzb2x1dGVNaW5UaW1lTG9jaykgdGhyb3c7DQogICAgICAgIHRpbWVMb2NrID0gX25ld1RpbWVMb2NrOw0KICAgIH0NCg0KICAgIC8vLyBAbm90aWNlIGBvbmx5T3duZXJgIENoYW5nZXMgdGhlIG1heGltdW0gbnVtYmVyIG9mIHNlY29uZHMNCiAgICAvLy8gYHNlY3VyaXR5R3VhcmRgIGNhbiBkZWxheSBhIHBheW1lbnQNCiAgICAvLy8gQHBhcmFtIF9tYXhTZWN1cml0eUd1YXJkRGVsYXkgVGhlIG5ldyBtYXhpbXVtIGRlbGF5IGluIHNlY29uZHMgdGhhdA0KICAgIC8vLyAgYHNlY3VyaXR5R3VhcmRgIGNhbiBkZWxheSB0aGUgcGF5bWVudCdzIGV4ZWN1dGlvbiBpbiB0b3RhbA0KICAgIGZ1bmN0aW9uIHNldE1heFNlY3VyaXR5R3VhcmREZWxheSh1aW50IF9tYXhTZWN1cml0eUd1YXJkRGVsYXkpIG9ubHlPd25lciB7DQogICAgICAgIG1heFNlY3VyaXR5R3VhcmREZWxheSA9IF9tYXhTZWN1cml0eUd1YXJkRGVsYXk7DQogICAgfQ0KfQ=='