base 64 content
base64wallet
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMzsNCg0KY29udHJhY3QgbXVsdGlvd25lZCB7DQoNCgkvLyBUWVBFUw0KDQoJLy8gc3RydWN0IGZvciB0aGUgc3RhdHVzIG9mIGEgcGVuZGluZyBvcGVyYXRpb24uDQoJc3RydWN0IFBlbmRpbmdTdGF0ZSB7DQoJCXVpbnQgeWV0TmVlZGVkOw0KCQl1aW50IG93bmVyc0RvbmU7DQoJCXVpbnQgaW5kZXg7DQoJfQ0KDQoJLy8gRVZFTlRTDQoNCgkvLyB0aGlzIGNvbnRyYWN0IG9ubHkgaGFzIHNpeCB0eXBlcyBvZiBldmVudHM6IGl0IGNhbiBhY2NlcHQgYSBjb25maXJtYXRpb24sIGluIHdoaWNoIGNhc2UNCgkvLyB3ZSByZWNvcmQgb3duZXIgYW5kIG9wZXJhdGlvbiAoaGFzaCkgYWxvbmdzaWRlIGl0Lg0KCWV2ZW50IENvbmZpcm1hdGlvbihhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbik7DQoJZXZlbnQgUmV2b2tlKGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uKTsNCgkvLyBzb21lIG90aGVycyBhcmUgaW4gdGhlIGNhc2Ugb2YgYW4gb3duZXIgY2hhbmdpbmcuDQoJZXZlbnQgT3duZXJDaGFuZ2VkKGFkZHJlc3Mgb2xkT3duZXIsIGFkZHJlc3MgbmV3T3duZXIpOw0KCWV2ZW50IE93bmVyQWRkZWQoYWRkcmVzcyBuZXdPd25lcik7DQoJZXZlbnQgT3duZXJSZW1vdmVkKGFkZHJlc3Mgb2xkT3duZXIpOw0KCS8vIHRoZSBsYXN0IG9uZSBpcyBlbWl0dGVkIGlmIHRoZSByZXF1aXJlZCBzaWduYXR1cmVzIGNoYW5nZQ0KCWV2ZW50IFJlcXVpcmVtZW50Q2hhbmdlZCh1aW50IG5ld1JlcXVpcmVtZW50KTsNCg0KCS8vIE1PRElGSUVSUw0KDQoJLy8gc2ltcGxlIHNpbmdsZS1zaWcgZnVuY3Rpb24gbW9kaWZpZXIuDQoJbW9kaWZpZXIgb25seW93bmVyIHsNCgkJaWYgKGlzT3duZXIobXNnLnNlbmRlcikpDQoJCQlfOw0KCX0NCgkvLyBtdWx0aS1zaWcgZnVuY3Rpb24gbW9kaWZpZXI6IHRoZSBvcGVyYXRpb24gbXVzdCBoYXZlIGFuIGludHJpbnNpYyBoYXNoIGluIG9yZGVyDQoJLy8gdGhhdCBsYXRlciBhdHRlbXB0cyBjYW4gYmUgcmVhbGlzZWQgYXMgdGhlIHNhbWUgdW5kZXJseWluZyBvcGVyYXRpb24gYW5kDQoJLy8gdGh1cyBjb3VudCBhcyBjb25maXJtYXRpb25zLg0KCW1vZGlmaWVyIG9ubHltYW55b3duZXJzKGJ5dGVzMzIgX29wZXJhdGlvbikgew0KCQlpZiAoY29uZmlybUFuZENoZWNrKF9vcGVyYXRpb24pKQ0KCQkJXzsNCgl9DQoNCgkvLyBNRVRIT0RTDQoNCgkvLyBjb25zdHJ1Y3RvciBpcyBnaXZlbiBudW1iZXIgb2Ygc2lncyByZXF1aXJlZCB0byBkbyBwcm90ZWN0ZWQgIm9ubHltYW55b3duZXJzIiB0cmFuc2FjdGlvbnMNCgkvLyBhcyB3ZWxsIGFzIHRoZSBzZWxlY3Rpb24gb2YgYWRkcmVzc2VzIGNhcGFibGUgb2YgY29uZmlybWluZyB0aGVtLg0KCWZ1bmN0aW9uIG11bHRpb3duZWQoYWRkcmVzc1tdIF9vd25lcnMsIHVpbnQgX3JlcXVpcmVkKSB7DQoJCXJlcXVpcmUoX3JlcXVpcmVkID4gMCk7DQoJCXJlcXVpcmUoX293bmVycy5sZW5ndGggPj0gX3JlcXVpcmVkKTsNCgkJbV9udW1Pd25lcnMgPSBfb3duZXJzLmxlbmd0aDsNCgkJZm9yICh1aW50IGkgPSAwOyBpIDwgX293bmVycy5sZW5ndGg7ICsraSkgew0KCQkJbV9vd25lcnNbMSArIGldID0gdWludChfb3duZXJzW2ldKTsNCgkJCW1fb3duZXJJbmRleFt1aW50KF9vd25lcnNbaV0pXSA9IDEgKyBpOw0KCQl9DQoJCW1fcmVxdWlyZWQgPSBfcmVxdWlyZWQ7DQoJfQ0KDQoJLy8gUmV2b2tlcyBhIHByaW9yIGNvbmZpcm1hdGlvbiBvZiB0aGUgZ2l2ZW4gb3BlcmF0aW9uDQoJZnVuY3Rpb24gcmV2b2tlKGJ5dGVzMzIgX29wZXJhdGlvbikgZXh0ZXJuYWwgew0KCQl1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChtc2cuc2VuZGVyKV07DQoJCS8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyDQoJCWlmIChvd25lckluZGV4ID09IDApIHJldHVybjsNCgkJdWludCBvd25lckluZGV4Qml0ID0gMioqb3duZXJJbmRleDsNCgkJdmFyIHBlbmRpbmcgPSBtX3BlbmRpbmdbX29wZXJhdGlvbl07DQoJCWlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID4gMCkgew0KCQkJcGVuZGluZy55ZXROZWVkZWQrKzsNCgkJCXBlbmRpbmcub3duZXJzRG9uZSAtPSBvd25lckluZGV4Qml0Ow0KCQkJUmV2b2tlKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOw0KCQl9DQoJfQ0KDQoJLy8gUmVwbGFjZXMgYW4gb3duZXIgYF9mcm9tYCB3aXRoIGFub3RoZXIgYF90b2AuDQoJZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQoJCWlmIChpc093bmVyKF90bykpIHJldHVybjsNCgkJdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQoX2Zyb20pXTsNCgkJaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOw0KDQoJCWNsZWFyUGVuZGluZygpOw0KCQltX293bmVyc1tvd25lckluZGV4XSA9IHVpbnQoX3RvKTsNCgkJbV9vd25lckluZGV4W3VpbnQoX2Zyb20pXSA9IDA7DQoJCW1fb3duZXJJbmRleFt1aW50KF90byldID0gb3duZXJJbmRleDsNCgkJT3duZXJDaGFuZ2VkKF9mcm9tLCBfdG8pOw0KCX0NCg0KCWZ1bmN0aW9uIGFkZE93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgew0KCQlpZiAoaXNPd25lcihfb3duZXIpKSByZXR1cm47DQoNCgkJY2xlYXJQZW5kaW5nKCk7DQoJCWlmIChtX251bU93bmVycyA+PSBjX21heE93bmVycykNCgkJCXJlb3JnYW5pemVPd25lcnMoKTsNCgkJaWYgKG1fbnVtT3duZXJzID49IGNfbWF4T3duZXJzKQ0KCQkJcmV0dXJuOw0KCQltX251bU93bmVycysrOw0KCQltX293bmVyc1ttX251bU93bmVyc10gPSB1aW50KF9vd25lcik7DQoJCW1fb3duZXJJbmRleFt1aW50KF9vd25lcildID0gbV9udW1Pd25lcnM7DQoJCU93bmVyQWRkZWQoX293bmVyKTsNCgl9DQoNCglmdW5jdGlvbiByZW1vdmVPd25lcihhZGRyZXNzIF9vd25lcikgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCgkJdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQoX293bmVyKV07DQoJCWlmIChvd25lckluZGV4ID09IDApIHJldHVybjsNCgkJaWYgKG1fcmVxdWlyZWQgPiBtX251bU93bmVycyAtIDEpIHJldHVybjsNCg0KCQltX293bmVyc1tvd25lckluZGV4XSA9IDA7DQoJCW1fb3duZXJJbmRleFt1aW50KF9vd25lcildID0gMDsNCgkJY2xlYXJQZW5kaW5nKCk7DQoJCXJlb3JnYW5pemVPd25lcnMoKTsgLy9tYWtlIHN1cmUgbV9udW1Pd25lciBpcyBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG93bmVycyBhbmQgYWx3YXlzIHBvaW50cyB0byB0aGUgb3B0aW1hbCBmcmVlIHNsb3QNCgkJT3duZXJSZW1vdmVkKF9vd25lcik7DQoJfQ0KDQoJZnVuY3Rpb24gY2hhbmdlUmVxdWlyZW1lbnQodWludCBfbmV3UmVxdWlyZWQpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQoJCWlmIChfbmV3UmVxdWlyZWQgPT0gMCkgcmV0dXJuOw0KCQlpZiAoX25ld1JlcXVpcmVkID4gbV9udW1Pd25lcnMpIHJldHVybjsNCgkJbV9yZXF1aXJlZCA9IF9uZXdSZXF1aXJlZDsNCgkJY2xlYXJQZW5kaW5nKCk7DQoJCVJlcXVpcmVtZW50Q2hhbmdlZChfbmV3UmVxdWlyZWQpOw0KCX0NCg0KCS8vIEdldHMgYW4gb3duZXIgYnkgMC1pbmRleGVkIHBvc2l0aW9uICh1c2luZyBudW1Pd25lcnMgYXMgdGhlIGNvdW50KQ0KCWZ1bmN0aW9uIGdldE93bmVyKHVpbnQgb3duZXJJbmRleCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgew0KCQlyZXR1cm4gYWRkcmVzcyhtX293bmVyc1tvd25lckluZGV4ICsgMV0pOw0KCX0NCg0KCWZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBfYWRkcikgcmV0dXJucyAoYm9vbCkgew0KCQlyZXR1cm4gbV9vd25lckluZGV4W3VpbnQoX2FkZHIpXSA+IDA7DQoJfQ0KDQoJZnVuY3Rpb24gaGFzQ29uZmlybWVkKGJ5dGVzMzIgX29wZXJhdGlvbiwgYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsNCgkJdmFyIHBlbmRpbmcgPSBtX3BlbmRpbmdbX29wZXJhdGlvbl07DQoJCXVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KF9vd25lcildOw0KDQoJCS8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyDQoJCWlmIChvd25lckluZGV4ID09IDApIHJldHVybiBmYWxzZTsNCg0KCQkvLyBkZXRlcm1pbmUgdGhlIGJpdCB0byBzZXQgZm9yIHRoaXMgb3duZXIuDQoJCXVpbnQgb3duZXJJbmRleEJpdCA9IDIqKm93bmVySW5kZXg7DQoJCXJldHVybiAhKHBlbmRpbmcub3duZXJzRG9uZSAmIG93bmVySW5kZXhCaXQgPT0gMCk7DQoJfQ0KDQoJLy8gSU5URVJOQUwgTUVUSE9EUw0KDQoJZnVuY3Rpb24gY29uZmlybUFuZENoZWNrKGJ5dGVzMzIgX29wZXJhdGlvbikgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgew0KCQkvLyBkZXRlcm1pbmUgd2hhdCBpbmRleCB0aGUgcHJlc2VudCBzZW5kZXIgaXM6DQoJCXVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXTsNCgkJLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXINCgkJaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOw0KDQoJCXZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOw0KCQkvLyBpZiB3ZSdyZSBub3QgeWV0IHdvcmtpbmcgb24gdGhpcyBvcGVyYXRpb24sIHN3aXRjaCBvdmVyIGFuZCByZXNldCB0aGUgY29uZmlybWF0aW9uIHN0YXR1cy4NCgkJaWYgKHBlbmRpbmcueWV0TmVlZGVkID09IDApIHsNCgkJCS8vIHJlc2V0IGNvdW50IG9mIGNvbmZpcm1hdGlvbnMgbmVlZGVkLg0KCQkJcGVuZGluZy55ZXROZWVkZWQgPSBtX3JlcXVpcmVkOw0KCQkJLy8gcmVzZXQgd2hpY2ggb3duZXJzIGhhdmUgY29uZmlybWVkIChub25lKSAtIHNldCBvdXIgYml0bWFwIHRvIDAuDQoJCQlwZW5kaW5nLm93bmVyc0RvbmUgPSAwOw0KCQkJcGVuZGluZy5pbmRleCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aCsrOw0KCQkJbV9wZW5kaW5nSW5kZXhbcGVuZGluZy5pbmRleF0gPSBfb3BlcmF0aW9uOw0KCQl9DQoJCS8vIGRldGVybWluZSB0aGUgYml0IHRvIHNldCBmb3IgdGhpcyBvd25lci4NCgkJdWludCBvd25lckluZGV4Qml0ID0gMioqb3duZXJJbmRleDsNCgkJLy8gbWFrZSBzdXJlIHdlICh0aGUgbWVzc2FnZSBzZW5kZXIpIGhhdmVuJ3QgY29uZmlybWVkIHRoaXMgb3BlcmF0aW9uIHByZXZpb3VzbHkuDQoJCWlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApIHsNCgkJCUNvbmZpcm1hdGlvbihtc2cuc2VuZGVyLCBfb3BlcmF0aW9uKTsNCgkJCS8vIG9rIC0gY2hlY2sgaWYgY291bnQgaXMgZW5vdWdoIHRvIGdvIGFoZWFkLg0KCQkJaWYgKHBlbmRpbmcueWV0TmVlZGVkID09IDEpIHsNCgkJCQkvLyBlbm91Z2ggY29uZmlybWF0aW9uczogcmVzZXQgYW5kIHJ1biBpbnRlcmlvci4NCgkJCQlkZWxldGUgbV9wZW5kaW5nSW5kZXhbbV9wZW5kaW5nW19vcGVyYXRpb25dLmluZGV4XTsNCgkJCQlkZWxldGUgbV9wZW5kaW5nW19vcGVyYXRpb25dOw0KCQkJCXJldHVybiB0cnVlOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCS8vIG5vdCBlbm91Z2g6IHJlY29yZCB0aGF0IHRoaXMgb3duZXIgaW4gcGFydGljdWxhciBjb25maXJtZWQuDQoJCQkJcGVuZGluZy55ZXROZWVkZWQtLTsNCgkJCQlwZW5kaW5nLm93bmVyc0RvbmUgfD0gb3duZXJJbmRleEJpdDsNCgkJCX0NCgkJfQ0KCX0NCg0KCWZ1bmN0aW9uIHJlb3JnYW5pemVPd25lcnMoKSBwcml2YXRlIHsNCgkJdWludCBmcmVlID0gMTsNCgkJd2hpbGUgKGZyZWUgPCBtX251bU93bmVycykNCgkJew0KCQkJd2hpbGUgKGZyZWUgPCBtX251bU93bmVycyAmJiBtX293bmVyc1tmcmVlXSAhPSAwKSBmcmVlKys7DQoJCQl3aGlsZSAobV9udW1Pd25lcnMgPiAxICYmIG1fb3duZXJzW21fbnVtT3duZXJzXSA9PSAwKSBtX251bU93bmVycy0tOw0KCQkJaWYgKGZyZWUgPCBtX251bU93bmVycyAmJiBtX293bmVyc1ttX251bU93bmVyc10gIT0gMCAmJiBtX293bmVyc1tmcmVlXSA9PSAwKQ0KCQkJew0KCQkJCW1fb3duZXJzW2ZyZWVdID0gbV9vd25lcnNbbV9udW1Pd25lcnNdOw0KCQkJCW1fb3duZXJJbmRleFttX293bmVyc1tmcmVlXV0gPSBmcmVlOw0KCQkJCW1fb3duZXJzW21fbnVtT3duZXJzXSA9IDA7DQoJCQl9DQoJCX0NCgl9DQoNCglmdW5jdGlvbiBjbGVhclBlbmRpbmcoKSBpbnRlcm5hbCB7DQoJCXVpbnQgbGVuZ3RoID0gbV9wZW5kaW5nSW5kZXgubGVuZ3RoOw0KCQlmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkNCgkJCWlmIChtX3BlbmRpbmdJbmRleFtpXSAhPSAwKQ0KCQkJCWRlbGV0ZSBtX3BlbmRpbmdbbV9wZW5kaW5nSW5kZXhbaV1dOw0KCQlkZWxldGUgbV9wZW5kaW5nSW5kZXg7DQoJfQ0KDQoJLy8gRklFTERTDQoNCgkvLyB0aGUgbnVtYmVyIG9mIG93bmVycyB0aGF0IG11c3QgY29uZmlybSB0aGUgc2FtZSBvcGVyYXRpb24gYmVmb3JlIGl0IGlzIHJ1bi4NCgl1aW50IHB1YmxpYyBtX3JlcXVpcmVkOw0KCS8vIHBvaW50ZXIgdXNlZCB0byBmaW5kIGEgZnJlZSBzbG90IGluIG1fb3duZXJzDQoJdWludCBwdWJsaWMgbV9udW1Pd25lcnM7DQoNCgkvLyBsaXN0IG9mIG93bmVycw0KCXVpbnRbMjU2XSBtX293bmVyczsNCgl1aW50IGNvbnN0YW50IGNfbWF4T3duZXJzID0gMjUwOw0KCS8vIGluZGV4IG9uIHRoZSBsaXN0IG9mIG93bmVycyB0byBhbGxvdyByZXZlcnNlIGxvb2t1cA0KCW1hcHBpbmcodWludCA9PiB1aW50KSBtX293bmVySW5kZXg7DQoJLy8gdGhlIG9uZ29pbmcgb3BlcmF0aW9ucy4NCgltYXBwaW5nKGJ5dGVzMzIgPT4gUGVuZGluZ1N0YXRlKSBtX3BlbmRpbmc7DQoJYnl0ZXMzMltdIG1fcGVuZGluZ0luZGV4Ow0KfQ0KDQovLyBpbmhlcml0YWJsZSAicHJvcGVydHkiIGNvbnRyYWN0IHRoYXQgZW5hYmxlcyBtZXRob2RzIHRvIGJlIHByb3RlY3RlZCBieSBwbGFjaW5nIGEgbGluZWFyIGxpbWl0IChzcGVjaWZpYWJsZSkNCi8vIG9uIGEgcGFydGljdWxhciByZXNvdXJjZSBwZXIgY2FsZW5kYXIgZGF5LiBpcyBtdWx0aW93bmVkIHRvIGFsbG93IHRoZSBsaW1pdCB0byBiZSBhbHRlcmVkLiByZXNvdXJjZSB0aGF0IG1ldGhvZA0KLy8gdXNlcyBpcyBzcGVjaWZpZWQgaW4gdGhlIG1vZGlmaWVyLg0KY29udHJhY3QgZGF5bGltaXQgaXMgbXVsdGlvd25lZCB7DQoNCgkvLyBNRVRIT0RTDQoNCgkvLyBjb25zdHJ1Y3RvciAtIHN0b3JlcyBpbml0aWFsIGRhaWx5IGxpbWl0IGFuZCByZWNvcmRzIHRoZSBwcmVzZW50IGRheSdzIGluZGV4Lg0KCWZ1bmN0aW9uIGRheWxpbWl0KHVpbnQgX2xpbWl0KSB7DQoJCW1fZGFpbHlMaW1pdCA9IF9saW1pdDsNCgkJbV9sYXN0RGF5ID0gdG9kYXkoKTsNCgl9DQoJLy8gKHJlKXNldHMgdGhlIGRhaWx5IGxpbWl0LiBuZWVkcyBtYW55IG9mIHRoZSBvd25lcnMgdG8gY29uZmlybS4gZG9lc24ndCBhbHRlciB0aGUgYW1vdW50IGFscmVhZHkgc3BlbnQgdG9kYXkuDQoJZnVuY3Rpb24gc2V0RGFpbHlMaW1pdCh1aW50IF9uZXdMaW1pdCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCgkJbV9kYWlseUxpbWl0ID0gX25ld0xpbWl0Ow0KCX0NCgkvLyByZXNldHMgdGhlIGFtb3VudCBhbHJlYWR5IHNwZW50IHRvZGF5LiBuZWVkcyBtYW55IG9mIHRoZSBvd25lcnMgdG8gY29uZmlybS4NCglmdW5jdGlvbiByZXNldFNwZW50VG9kYXkoKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgew0KCQltX3NwZW50VG9kYXkgPSAwOw0KCX0NCg0KCS8vIElOVEVSTkFMIE1FVEhPRFMNCg0KCS8vIGNoZWNrcyB0byBzZWUgaWYgdGhlcmUgaXMgYXQgbGVhc3QgYF92YWx1ZWAgbGVmdCBmcm9tIHRoZSBkYWlseSBsaW1pdCB0b2RheS4gaWYgdGhlcmUgaXMsIHN1YnRyYWN0cyBpdCBhbmQNCgkvLyByZXR1cm5zIHRydWUuIG90aGVyd2lzZSBqdXN0IHJldHVybnMgZmFsc2UuDQoJZnVuY3Rpb24gdW5kZXJMaW1pdCh1aW50IF92YWx1ZSkgaW50ZXJuYWwgb25seW93bmVyIHJldHVybnMgKGJvb2wpIHsNCgkJLy8gcmVzZXQgdGhlIHNwZW5kIGxpbWl0IGlmIHdlJ3JlIG9uIGEgZGlmZmVyZW50IGRheSB0byBsYXN0IHRpbWUuDQoJCWlmICh0b2RheSgpID4gbV9sYXN0RGF5KSB7DQoJCQltX3NwZW50VG9kYXkgPSAwOw0KCQkJbV9sYXN0RGF5ID0gdG9kYXkoKTsNCgkJfQ0KCQkvLyBjaGVjayB0byBzZWUgaWYgdGhlcmUncyBlbm91Z2ggbGVmdCAtIGlmIHNvLCBzdWJ0cmFjdCBhbmQgcmV0dXJuIHRydWUuDQoJCS8vIG92ZXJmbG93IHByb3RlY3Rpb24gICAgICAgICAgICAgICAgICAgIC8vIGRhaWx5TGltaXQgY2hlY2sNCgkJaWYgKG1fc3BlbnRUb2RheSArIF92YWx1ZSA+PSBtX3NwZW50VG9kYXkgJiYgbV9zcGVudFRvZGF5ICsgX3ZhbHVlIDw9IG1fZGFpbHlMaW1pdCkgew0KCQkJbV9zcGVudFRvZGF5ICs9IF92YWx1ZTsNCgkJCXJldHVybiB0cnVlOw0KCQl9DQoJCXJldHVybiBmYWxzZTsNCgl9DQoJLy8gZGV0ZXJtaW5lcyB0b2RheSdzIGluZGV4Lg0KCWZ1bmN0aW9uIHRvZGF5KCkgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7IHJldHVybiBub3cgLyAxIGRheXM7IH0NCg0KCS8vIEZJRUxEUw0KDQoJdWludCBwdWJsaWMgbV9kYWlseUxpbWl0Ow0KCXVpbnQgcHVibGljIG1fc3BlbnRUb2RheTsNCgl1aW50IHB1YmxpYyBtX2xhc3REYXk7DQp9DQoNCi8vIGludGVyZmFjZSBjb250cmFjdCBmb3IgbXVsdGlzaWcgcHJveHkgY29udHJhY3RzOyBzZWUgYmVsb3cgZm9yIGRvY3MuDQpjb250cmFjdCBtdWx0aXNpZyB7DQoNCgkvLyBFVkVOVFMNCg0KCS8vIGxvZ2dlZCBldmVudHM6DQoJLy8gRnVuZHMgaGFzIGFycml2ZWQgaW50byB0aGUgd2FsbGV0IChyZWNvcmQgaG93IG11Y2gpLg0KCWV2ZW50IERlcG9zaXQoYWRkcmVzcyBfZnJvbSwgdWludCB2YWx1ZSk7DQoJLy8gU2luZ2xlIHRyYW5zYWN0aW9uIGdvaW5nIG91dCBvZiB0aGUgd2FsbGV0IChyZWNvcmQgd2hvIHNpZ25lZCBmb3IgaXQsIGhvdyBtdWNoLCBhbmQgdG8gd2hvbSBpdCdzIGdvaW5nKS4NCglldmVudCBTaW5nbGVUcmFuc2FjdChhZGRyZXNzIG93bmVyLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhLCBhZGRyZXNzIGNyZWF0ZWQpOw0KCS8vIE11bHRpLXNpZyB0cmFuc2FjdGlvbiBnb2luZyBvdXQgb2YgdGhlIHdhbGxldCAocmVjb3JkIHdobyBzaWduZWQgZm9yIGl0IGxhc3QsIHRoZSBvcGVyYXRpb24gaGFzaCwgaG93IG11Y2gsIGFuZCB0byB3aG9tIGl0J3MgZ29pbmcpLg0KCWV2ZW50IE11bHRpVHJhbnNhY3QoYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24sIHVpbnQgdmFsdWUsIGFkZHJlc3MgdG8sIGJ5dGVzIGRhdGEsIGFkZHJlc3MgY3JlYXRlZCk7DQoJLy8gQ29uZmlybWF0aW9uIHN0aWxsIG5lZWRlZCBmb3IgYSB0cmFuc2FjdGlvbi4NCglldmVudCBDb25maXJtYXRpb25OZWVkZWQoYnl0ZXMzMiBvcGVyYXRpb24sIGFkZHJlc3MgaW5pdGlhdG9yLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhKTsNCg0KCS8vIEZVTkNUSU9OUw0KDQoJLy8gVE9ETzogZG9jdW1lbnQNCglmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgZXh0ZXJuYWw7DQoJZnVuY3Rpb24gZXhlY3V0ZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBleHRlcm5hbCByZXR1cm5zIChieXRlczMyIG9faGFzaCk7DQoJZnVuY3Rpb24gY29uZmlybShieXRlczMyIF9oKSByZXR1cm5zIChib29sIG9fc3VjY2Vzcyk7DQp9DQoNCmNvbnRyYWN0IGNyZWF0b3Igew0KCWZ1bmN0aW9uIGRvQ3JlYXRlKHVpbnQgX3ZhbHVlLCBieXRlcyBfY29kZSkgaW50ZXJuYWwgcmV0dXJucyAoYWRkcmVzcyBvX2FkZHIpIHsNCgkJYm9vbCBmYWlsZWQ7DQoJCWFzc2VtYmx5IHsNCgkJCW9fYWRkciA6PSBjcmVhdGUoX3ZhbHVlLCBhZGQoX2NvZGUsIDB4MjApLCBtbG9hZChfY29kZSkpDQoJCQlmYWlsZWQgOj0gaXN6ZXJvKGV4dGNvZGVzaXplKG9fYWRkcikpDQoJCX0NCgkJcmVxdWlyZSghZmFpbGVkKTsNCgl9DQp9DQoNCi8vIHVzYWdlOg0KLy8gYnl0ZXMzMiBoID0gV2FsbGV0KHcpLmZyb20ob25lT3duZXIpLmV4ZWN1dGUodG8sIHZhbHVlLCBkYXRhKTsNCi8vIFdhbGxldCh3KS5mcm9tKGFub3RoZXJPd25lcikuY29uZmlybShoKTsNCmNvbnRyYWN0IFdhbGxldCBpcyBtdWx0aXNpZywgbXVsdGlvd25lZCwgZGF5bGltaXQsIGNyZWF0b3Igew0KDQoJLy8gVFlQRVMNCg0KCS8vIFRyYW5zYWN0aW9uIHN0cnVjdHVyZSB0byByZW1lbWJlciBkZXRhaWxzIG9mIHRyYW5zYWN0aW9uIGxlc3QgaXQgbmVlZCBiZSBzYXZlZCBmb3IgYSBsYXRlciBjYWxsLg0KCXN0cnVjdCBUcmFuc2FjdGlvbiB7DQoJCWFkZHJlc3MgdG87DQoJCXVpbnQgdmFsdWU7DQoJCWJ5dGVzIGRhdGE7DQoJfQ0KDQoJLy8gTUVUSE9EUw0KDQoJLy8gY29uc3RydWN0b3IgLSBqdXN0IHBhc3Mgb24gdGhlIG93bmVyIGFycmF5IHRvIHRoZSBtdWx0aW93bmVkIGFuZA0KCS8vIHRoZSBsaW1pdCB0byBkYXlsaW1pdA0KCWZ1bmN0aW9uIFdhbGxldChhZGRyZXNzW10gX293bmVycywgdWludCBfcmVxdWlyZWQsIHVpbnQgX2RheWxpbWl0KQ0KCQkJbXVsdGlvd25lZChfb3duZXJzLCBfcmVxdWlyZWQpIGRheWxpbWl0KF9kYXlsaW1pdCkgew0KCX0NCg0KCS8vIGtpbGxzIHRoZSBjb250cmFjdCBzZW5kaW5nIGV2ZXJ5dGhpbmcgdG8gYF90b2AuDQoJZnVuY3Rpb24ga2lsbChhZGRyZXNzIF90bykgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCgkJc3VpY2lkZShfdG8pOw0KCX0NCg0KCS8vIGdldHMgY2FsbGVkIHdoZW4gbm8gb3RoZXIgZnVuY3Rpb24gbWF0Y2hlcw0KCWZ1bmN0aW9uKCkgcGF5YWJsZSB7DQoJCS8vIGp1c3QgYmVpbmcgc2VudCBzb21lIGNhc2g/DQoJCWlmIChtc2cudmFsdWUgPiAwKQ0KCQkJRGVwb3NpdChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOw0KCX0NCg0KCS8vIE91dHNpZGUtdmlzaWJsZSB0cmFuc2FjdCBlbnRyeSBwb2ludC4gRXhlY3V0ZXMgdHJhbnNhY3Rpb24gaW1tZWRpYXRlbHkgaWYgYmVsb3cgZGFpbHkgc3BlbmQgbGltaXQuDQoJLy8gSWYgbm90LCBnb2VzIGludG8gbXVsdGlzaWcgcHJvY2Vzcy4gV2UgcHJvdmlkZSBhIGhhc2ggb24gcmV0dXJuIHRvIGFsbG93IHRoZSBzZW5kZXIgdG8gcHJvdmlkZQ0KCS8vIHNob3J0Y3V0cyBmb3IgdGhlIG90aGVyIGNvbmZpcm1hdGlvbnMgKGFsbG93aW5nIHRoZW0gdG8gYXZvaWQgcmVwbGljYXRpbmcgdGhlIF90bywgX3ZhbHVlDQoJLy8gYW5kIF9kYXRhIGFyZ3VtZW50cykuIFRoZXkgc3RpbGwgZ2V0IHRoZSBvcHRpb24gb2YgdXNpbmcgdGhlbSBpZiB0aGV5IHdhbnQsIGFueXdheXMuDQoJZnVuY3Rpb24gZXhlY3V0ZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBleHRlcm5hbCBvbmx5b3duZXIgcmV0dXJucyAoYnl0ZXMzMiBvX2hhc2gpIHsNCgkJLy8gZmlyc3QsIHRha2UgdGhlIG9wcG9ydHVuaXR5IHRvIGNoZWNrIHRoYXQgd2UncmUgdW5kZXIgdGhlIGRhaWx5IGxpbWl0Lg0KCQlpZiAoKF9kYXRhLmxlbmd0aCA9PSAwICYmIHVuZGVyTGltaXQoX3ZhbHVlKSkgfHwgbV9yZXF1aXJlZCA9PSAxKSB7DQoJCQkvLyB5ZXMgLSBqdXN0IGV4ZWN1dGUgdGhlIGNhbGwuDQoJCQlhZGRyZXNzIGNyZWF0ZWQ7DQoJCQlpZiAoX3RvID09IDApIHsNCgkJCQljcmVhdGVkID0gY3JlYXRlKF92YWx1ZSwgX2RhdGEpOw0KCQkJfSBlbHNlIHsNCgkJCQlyZXF1aXJlKF90by5jYWxsLnZhbHVlKF92YWx1ZSkoX2RhdGEpKTsNCgkJCX0NCgkJCVNpbmdsZVRyYW5zYWN0KG1zZy5zZW5kZXIsIF92YWx1ZSwgX3RvLCBfZGF0YSwgY3JlYXRlZCk7DQoJCX0gZWxzZSB7DQoJCQkvLyBkZXRlcm1pbmUgb3VyIG9wZXJhdGlvbiBoYXNoLg0KCQkJb19oYXNoID0gc2hhMyhtc2cuZGF0YSwgYmxvY2subnVtYmVyKTsNCgkJCS8vIHN0b3JlIGlmIGl0J3MgbmV3DQoJCQlpZiAobV90eHNbb19oYXNoXS50byA9PSAwICYmIG1fdHhzW29faGFzaF0udmFsdWUgPT0gMCAmJiBtX3R4c1tvX2hhc2hdLmRhdGEubGVuZ3RoID09IDApIHsNCgkJCQltX3R4c1tvX2hhc2hdLnRvID0gX3RvOw0KCQkJCW1fdHhzW29faGFzaF0udmFsdWUgPSBfdmFsdWU7DQoJCQkJbV90eHNbb19oYXNoXS5kYXRhID0gX2RhdGE7DQoJCQl9DQoJCQlpZiAoIWNvbmZpcm0ob19oYXNoKSkgew0KCQkJCUNvbmZpcm1hdGlvbk5lZWRlZChvX2hhc2gsIG1zZy5zZW5kZXIsIF92YWx1ZSwgX3RvLCBfZGF0YSk7DQoJCQl9DQoJCX0NCgl9DQoNCglmdW5jdGlvbiBjcmVhdGUodWludCBfdmFsdWUsIGJ5dGVzIF9jb2RlKSBpbnRlcm5hbCByZXR1cm5zIChhZGRyZXNzIG9fYWRkcikgew0KCQlyZXR1cm4gZG9DcmVhdGUoX3ZhbHVlLCBfY29kZSk7DQoJfQ0KDQoJLy8gY29uZmlybSBhIHRyYW5zYWN0aW9uIHRocm91Z2gganVzdCB0aGUgaGFzaC4gd2UgdXNlIHRoZSBwcmV2aW91cyB0cmFuc2FjdGlvbnMgbWFwLCBtX3R4cywgaW4gb3JkZXINCgkvLyB0byBkZXRlcm1pbmUgdGhlIGJvZHkgb2YgdGhlIHRyYW5zYWN0aW9uIGZyb20gdGhlIGhhc2ggcHJvdmlkZWQuDQoJZnVuY3Rpb24gY29uZmlybShieXRlczMyIF9oKSBvbmx5bWFueW93bmVycyhfaCkgcmV0dXJucyAoYm9vbCBvX3N1Y2Nlc3MpIHsNCgkJaWYgKG1fdHhzW19oXS50byAhPSAwIHx8IG1fdHhzW19oXS52YWx1ZSAhPSAwIHx8IG1fdHhzW19oXS5kYXRhLmxlbmd0aCAhPSAwKSB7DQoJCQlhZGRyZXNzIGNyZWF0ZWQ7DQoJCQlpZiAobV90eHNbX2hdLnRvID09IDApIHsNCgkJCQljcmVhdGVkID0gY3JlYXRlKG1fdHhzW19oXS52YWx1ZSwgbV90eHNbX2hdLmRhdGEpOw0KCQkJfSBlbHNlIHsNCgkJCQlyZXF1aXJlKG1fdHhzW19oXS50by5jYWxsLnZhbHVlKG1fdHhzW19oXS52YWx1ZSkobV90eHNbX2hdLmRhdGEpKTsNCgkJCX0NCg0KCQkJTXVsdGlUcmFuc2FjdChtc2cuc2VuZGVyLCBfaCwgbV90eHNbX2hdLnZhbHVlLCBtX3R4c1tfaF0udG8sIG1fdHhzW19oXS5kYXRhLCBjcmVhdGVkKTsNCgkJCWRlbGV0ZSBtX3R4c1tfaF07DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KCX0NCg0KCS8vIElOVEVSTkFMIE1FVEhPRFMNCg0KCWZ1bmN0aW9uIGNsZWFyUGVuZGluZygpIGludGVybmFsIHsNCgkJdWludCBsZW5ndGggPSBtX3BlbmRpbmdJbmRleC5sZW5ndGg7DQoJCWZvciAodWludCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKQ0KCQkJZGVsZXRlIG1fdHhzW21fcGVuZGluZ0luZGV4W2ldXTsNCgkJc3VwZXIuY2xlYXJQZW5kaW5nKCk7DQoJfQ0KDQoJLy8gRklFTERTDQoNCgkvLyBwZW5kaW5nIHRyYW5zYWN0aW9ucyB3ZSBoYXZlIGF0IHByZXNlbnQuDQoJbWFwcGluZyAoYnl0ZXMzMiA9PiBUcmFuc2FjdGlvbikgbV90eHM7DQp9'