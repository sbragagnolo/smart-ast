base 64 content
base64wallet13
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC44Ow0KDQovKioNCiAqIFRoaXMgaXMgYSBtdWx0aXNpZyB3YWxsZXQgYmFzZWQgb24gR2F2J3Mgb3JpZ2luYWwgaW1wbGVtZW50YXRpb24sIGRhaWx5IHdpdGhkcmF3IGxpbWl0cyByZW1vdmVkLg0KICoNCiAqDQogKiBGb3Igb3RoZXIgbXVsdGlzaWcgd2FsbGV0IGltcGxlbWVudGF0aW9ucywgc2VlIGh0dHBzOi8vYmxvZy5nbm9zaXMucG0vcmVsZWFzZS1vZi1uZXctbXVsdGlzaWctd2FsbGV0LTU5YjY4MTFmN2VkYw0KICovDQoNCi8vIE11bHRpLXNpZywgZGFpbHktbGltaXRlZCBhY2NvdW50IHByb3h5L3dhbGxldC4NCi8vIEBhdXRob3JzOg0KLy8gR2F2IFdvb2QgPGdAZXRoZGV2LmNvbT4NCi8vIGluaGVyaXRhYmxlICJwcm9wZXJ0eSIgY29udHJhY3QgdGhhdCBlbmFibGVzIG1ldGhvZHMgdG8gYmUgcHJvdGVjdGVkIGJ5IHJlcXVpcmluZyB0aGUgYWNxdWllc2NlbmNlIG9mIGVpdGhlciBhDQovLyBzaW5nbGUsIG9yLCBjcnVjaWFsbHksIGVhY2ggb2YgYSBudW1iZXIgb2YsIGRlc2lnbmF0ZWQgb3duZXJzLg0KLy8gdXNhZ2U6DQovLyB1c2UgbW9kaWZpZXJzIG9ubHlvd25lciAoanVzdCBvd24gb3duZWQpIG9yIG9ubHltYW55b3duZXJzKGhhc2gpLCB3aGVyZWJ5IHRoZSBzYW1lIGhhc2ggbXVzdCBiZSBwcm92aWRlZCBieQ0KLy8gc29tZSBudW1iZXIgKHNwZWNpZmllZCBpbiBjb25zdHJ1Y3Rvcikgb2YgdGhlIHNldCBvZiBvd25lcnMgKHNwZWNpZmllZCBpbiB0aGUgY29uc3RydWN0b3IsIG1vZGlmaWFibGUpIGJlZm9yZSB0aGUNCi8vIGludGVyaW9yIGlzIGV4ZWN1dGVkLg0KY29udHJhY3QgbXVsdGlvd25lZCB7DQoNCgkvLyBUWVBFUw0KDQogICAgLy8gc3RydWN0IGZvciB0aGUgc3RhdHVzIG9mIGEgcGVuZGluZyBvcGVyYXRpb24uDQogICAgc3RydWN0IFBlbmRpbmdTdGF0ZSB7DQogICAgICAgIHVpbnQgeWV0TmVlZGVkOw0KICAgICAgICB1aW50IG93bmVyc0RvbmU7DQogICAgICAgIHVpbnQgaW5kZXg7DQogICAgfQ0KDQoJLy8gRVZFTlRTDQoNCiAgICAvLyB0aGlzIGNvbnRyYWN0IG9ubHkgaGFzIHNpeCB0eXBlcyBvZiBldmVudHM6IGl0IGNhbiBhY2NlcHQgYSBjb25maXJtYXRpb24sIGluIHdoaWNoIGNhc2UNCiAgICAvLyB3ZSByZWNvcmQgb3duZXIgYW5kIG9wZXJhdGlvbiAoaGFzaCkgYWxvbmdzaWRlIGl0Lg0KICAgIGV2ZW50IENvbmZpcm1hdGlvbihhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbik7DQogICAgZXZlbnQgUmV2b2tlKGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uKTsNCiAgICAvLyBzb21lIG90aGVycyBhcmUgaW4gdGhlIGNhc2Ugb2YgYW4gb3duZXIgY2hhbmdpbmcuDQogICAgZXZlbnQgT3duZXJDaGFuZ2VkKGFkZHJlc3Mgb2xkT3duZXIsIGFkZHJlc3MgbmV3T3duZXIpOw0KICAgIGV2ZW50IE93bmVyQWRkZWQoYWRkcmVzcyBuZXdPd25lcik7DQogICAgZXZlbnQgT3duZXJSZW1vdmVkKGFkZHJlc3Mgb2xkT3duZXIpOw0KICAgIC8vIHRoZSBsYXN0IG9uZSBpcyBlbWl0dGVkIGlmIHRoZSByZXF1aXJlZCBzaWduYXR1cmVzIGNoYW5nZQ0KICAgIGV2ZW50IFJlcXVpcmVtZW50Q2hhbmdlZCh1aW50IG5ld1JlcXVpcmVtZW50KTsNCg0KCS8vIE1PRElGSUVSUw0KDQogICAgLy8gc2ltcGxlIHNpbmdsZS1zaWcgZnVuY3Rpb24gbW9kaWZpZXIuDQogICAgbW9kaWZpZXIgb25seW93bmVyIHsNCiAgICAgICAgaWYgKGlzT3duZXIobXNnLnNlbmRlcikpDQogICAgICAgICAgICBfOw0KICAgIH0NCiAgICAvLyBtdWx0aS1zaWcgZnVuY3Rpb24gbW9kaWZpZXI6IHRoZSBvcGVyYXRpb24gbXVzdCBoYXZlIGFuIGludHJpbnNpYyBoYXNoIGluIG9yZGVyDQogICAgLy8gdGhhdCBsYXRlciBhdHRlbXB0cyBjYW4gYmUgcmVhbGlzZWQgYXMgdGhlIHNhbWUgdW5kZXJseWluZyBvcGVyYXRpb24gYW5kDQogICAgLy8gdGh1cyBjb3VudCBhcyBjb25maXJtYXRpb25zLg0KICAgIG1vZGlmaWVyIG9ubHltYW55b3duZXJzKGJ5dGVzMzIgX29wZXJhdGlvbikgew0KICAgICAgICBpZiAoY29uZmlybUFuZENoZWNrKF9vcGVyYXRpb24pKQ0KICAgICAgICAgICAgXzsNCiAgICB9DQoNCgkvLyBNRVRIT0RTDQoNCiAgICAvLyBjb25zdHJ1Y3RvciBpcyBnaXZlbiBudW1iZXIgb2Ygc2lncyByZXF1aXJlZCB0byBkbyBwcm90ZWN0ZWQgIm9ubHltYW55b3duZXJzIiB0cmFuc2FjdGlvbnMNCiAgICAvLyBhcyB3ZWxsIGFzIHRoZSBzZWxlY3Rpb24gb2YgYWRkcmVzc2VzIGNhcGFibGUgb2YgY29uZmlybWluZyB0aGVtLg0KICAgIGZ1bmN0aW9uIG11bHRpb3duZWQoYWRkcmVzc1tdIF9vd25lcnMsIHVpbnQgX3JlcXVpcmVkKSB7DQogICAgICAgIG1fbnVtT3duZXJzID0gX293bmVycy5sZW5ndGggKyAxOw0KICAgICAgICBtX293bmVyc1sxXSA9IHVpbnQobXNnLnNlbmRlcik7DQogICAgICAgIG1fb3duZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXSA9IDE7DQogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IF9vd25lcnMubGVuZ3RoOyArK2kpDQogICAgICAgIHsNCiAgICAgICAgICAgIG1fb3duZXJzWzIgKyBpXSA9IHVpbnQoX293bmVyc1tpXSk7DQogICAgICAgICAgICBtX293bmVySW5kZXhbdWludChfb3duZXJzW2ldKV0gPSAyICsgaTsNCiAgICAgICAgfQ0KICAgICAgICBtX3JlcXVpcmVkID0gX3JlcXVpcmVkOw0KICAgIH0NCg0KICAgIC8vIFJldm9rZXMgYSBwcmlvciBjb25maXJtYXRpb24gb2YgdGhlIGdpdmVuIG9wZXJhdGlvbg0KICAgIGZ1bmN0aW9uIHJldm9rZShieXRlczMyIF9vcGVyYXRpb24pIGV4dGVybmFsIHsNCiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQobXNnLnNlbmRlcildOw0KICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBvd25lcg0KICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm47DQogICAgICAgIHVpbnQgb3duZXJJbmRleEJpdCA9IDIqKm93bmVySW5kZXg7DQogICAgICAgIHZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOw0KICAgICAgICBpZiAocGVuZGluZy5vd25lcnNEb25lICYgb3duZXJJbmRleEJpdCA+IDApIHsNCiAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkKys7DQogICAgICAgICAgICBwZW5kaW5nLm93bmVyc0RvbmUgLT0gb3duZXJJbmRleEJpdDsNCiAgICAgICAgICAgIFJldm9rZShtc2cuc2VuZGVyLCBfb3BlcmF0aW9uKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIFJlcGxhY2VzIGFuIG93bmVyIGBfZnJvbWAgd2l0aCBhbm90aGVyIGBfdG9gLg0KICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgew0KICAgICAgICBpZiAoaXNPd25lcihfdG8pKSByZXR1cm47DQogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KF9mcm9tKV07DQogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsNCg0KICAgICAgICBjbGVhclBlbmRpbmcoKTsNCiAgICAgICAgbV9vd25lcnNbb3duZXJJbmRleF0gPSB1aW50KF90byk7DQogICAgICAgIG1fb3duZXJJbmRleFt1aW50KF9mcm9tKV0gPSAwOw0KICAgICAgICBtX293bmVySW5kZXhbdWludChfdG8pXSA9IG93bmVySW5kZXg7DQogICAgICAgIE93bmVyQ2hhbmdlZChfZnJvbSwgX3RvKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIF9vd25lcikgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgaWYgKGlzT3duZXIoX293bmVyKSkgcmV0dXJuOw0KDQogICAgICAgIGNsZWFyUGVuZGluZygpOw0KICAgICAgICBpZiAobV9udW1Pd25lcnMgPj0gY19tYXhPd25lcnMpDQogICAgICAgICAgICByZW9yZ2FuaXplT3duZXJzKCk7DQogICAgICAgIGlmIChtX251bU93bmVycyA+PSBjX21heE93bmVycykNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgbV9udW1Pd25lcnMrKzsNCiAgICAgICAgbV9vd25lcnNbbV9udW1Pd25lcnNdID0gdWludChfb3duZXIpOw0KICAgICAgICBtX293bmVySW5kZXhbdWludChfb3duZXIpXSA9IG1fbnVtT3duZXJzOw0KICAgICAgICBPd25lckFkZGVkKF9vd25lcik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcmVtb3ZlT3duZXIoYWRkcmVzcyBfb3duZXIpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KF9vd25lcildOw0KICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm47DQogICAgICAgIGlmIChtX3JlcXVpcmVkID4gbV9udW1Pd25lcnMgLSAxKSByZXR1cm47DQoNCiAgICAgICAgbV9vd25lcnNbb3duZXJJbmRleF0gPSAwOw0KICAgICAgICBtX293bmVySW5kZXhbdWludChfb3duZXIpXSA9IDA7DQogICAgICAgIGNsZWFyUGVuZGluZygpOw0KICAgICAgICByZW9yZ2FuaXplT3duZXJzKCk7IC8vbWFrZSBzdXJlIG1fbnVtT3duZXIgaXMgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBvd25lcnMgYW5kIGFsd2F5cyBwb2ludHMgdG8gdGhlIG9wdGltYWwgZnJlZSBzbG90DQogICAgICAgIE93bmVyUmVtb3ZlZChfb3duZXIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNoYW5nZVJlcXVpcmVtZW50KHVpbnQgX25ld1JlcXVpcmVkKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgew0KICAgICAgICBpZiAoX25ld1JlcXVpcmVkID4gbV9udW1Pd25lcnMpIHJldHVybjsNCiAgICAgICAgbV9yZXF1aXJlZCA9IF9uZXdSZXF1aXJlZDsNCiAgICAgICAgY2xlYXJQZW5kaW5nKCk7DQogICAgICAgIFJlcXVpcmVtZW50Q2hhbmdlZChfbmV3UmVxdWlyZWQpOw0KICAgIH0NCg0KICAgIC8vIEdldHMgYW4gb3duZXIgYnkgMC1pbmRleGVkIHBvc2l0aW9uICh1c2luZyBudW1Pd25lcnMgYXMgdGhlIGNvdW50KQ0KICAgIGZ1bmN0aW9uIGdldE93bmVyKHVpbnQgb3duZXJJbmRleCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgew0KICAgICAgICByZXR1cm4gYWRkcmVzcyhtX293bmVyc1tvd25lckluZGV4ICsgMV0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBfYWRkcikgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICByZXR1cm4gbV9vd25lckluZGV4W3VpbnQoX2FkZHIpXSA+IDA7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaGFzQ29uZmlybWVkKGJ5dGVzMzIgX29wZXJhdGlvbiwgYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgdmFyIHBlbmRpbmcgPSBtX3BlbmRpbmdbX29wZXJhdGlvbl07DQogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KF9vd25lcildOw0KDQogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyDQogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybiBmYWxzZTsNCg0KICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIGJpdCB0byBzZXQgZm9yIHRoaXMgb3duZXIuDQogICAgICAgIHVpbnQgb3duZXJJbmRleEJpdCA9IDIqKm93bmVySW5kZXg7DQogICAgICAgIHJldHVybiAhKHBlbmRpbmcub3duZXJzRG9uZSAmIG93bmVySW5kZXhCaXQgPT0gMCk7DQogICAgfQ0KDQogICAgLy8gSU5URVJOQUwgTUVUSE9EUw0KDQogICAgZnVuY3Rpb24gY29uZmlybUFuZENoZWNrKGJ5dGVzMzIgX29wZXJhdGlvbikgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICAvLyBkZXRlcm1pbmUgd2hhdCBpbmRleCB0aGUgcHJlc2VudCBzZW5kZXIgaXM6DQogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXTsNCiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXINCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOw0KDQogICAgICAgIHZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOw0KICAgICAgICAvLyBpZiB3ZSdyZSBub3QgeWV0IHdvcmtpbmcgb24gdGhpcyBvcGVyYXRpb24sIHN3aXRjaCBvdmVyIGFuZCByZXNldCB0aGUgY29uZmlybWF0aW9uIHN0YXR1cy4NCiAgICAgICAgaWYgKHBlbmRpbmcueWV0TmVlZGVkID09IDApIHsNCiAgICAgICAgICAgIC8vIHJlc2V0IGNvdW50IG9mIGNvbmZpcm1hdGlvbnMgbmVlZGVkLg0KICAgICAgICAgICAgcGVuZGluZy55ZXROZWVkZWQgPSBtX3JlcXVpcmVkOw0KICAgICAgICAgICAgLy8gcmVzZXQgd2hpY2ggb3duZXJzIGhhdmUgY29uZmlybWVkIChub25lKSAtIHNldCBvdXIgYml0bWFwIHRvIDAuDQogICAgICAgICAgICBwZW5kaW5nLm93bmVyc0RvbmUgPSAwOw0KICAgICAgICAgICAgcGVuZGluZy5pbmRleCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aCsrOw0KICAgICAgICAgICAgbV9wZW5kaW5nSW5kZXhbcGVuZGluZy5pbmRleF0gPSBfb3BlcmF0aW9uOw0KICAgICAgICB9DQogICAgICAgIC8vIGRldGVybWluZSB0aGUgYml0IHRvIHNldCBmb3IgdGhpcyBvd25lci4NCiAgICAgICAgdWludCBvd25lckluZGV4Qml0ID0gMioqb3duZXJJbmRleDsNCiAgICAgICAgLy8gbWFrZSBzdXJlIHdlICh0aGUgbWVzc2FnZSBzZW5kZXIpIGhhdmVuJ3QgY29uZmlybWVkIHRoaXMgb3BlcmF0aW9uIHByZXZpb3VzbHkuDQogICAgICAgIGlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApIHsNCiAgICAgICAgICAgIENvbmZpcm1hdGlvbihtc2cuc2VuZGVyLCBfb3BlcmF0aW9uKTsNCiAgICAgICAgICAgIC8vIG9rIC0gY2hlY2sgaWYgY291bnQgaXMgZW5vdWdoIHRvIGdvIGFoZWFkLg0KICAgICAgICAgICAgaWYgKHBlbmRpbmcueWV0TmVlZGVkIDw9IDEpIHsNCiAgICAgICAgICAgICAgICAvLyBlbm91Z2ggY29uZmlybWF0aW9uczogcmVzZXQgYW5kIHJ1biBpbnRlcmlvci4NCiAgICAgICAgICAgICAgICBkZWxldGUgbV9wZW5kaW5nSW5kZXhbbV9wZW5kaW5nW19vcGVyYXRpb25dLmluZGV4XTsNCiAgICAgICAgICAgICAgICBkZWxldGUgbV9wZW5kaW5nW19vcGVyYXRpb25dOw0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIG5vdCBlbm91Z2g6IHJlY29yZCB0aGF0IHRoaXMgb3duZXIgaW4gcGFydGljdWxhciBjb25maXJtZWQuDQogICAgICAgICAgICAgICAgcGVuZGluZy55ZXROZWVkZWQtLTsNCiAgICAgICAgICAgICAgICBwZW5kaW5nLm93bmVyc0RvbmUgfD0gb3duZXJJbmRleEJpdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJlb3JnYW5pemVPd25lcnMoKSBwcml2YXRlIHsNCiAgICAgICAgdWludCBmcmVlID0gMTsNCiAgICAgICAgd2hpbGUgKGZyZWUgPCBtX251bU93bmVycykNCiAgICAgICAgew0KICAgICAgICAgICAgd2hpbGUgKGZyZWUgPCBtX251bU93bmVycyAmJiBtX293bmVyc1tmcmVlXSAhPSAwKSBmcmVlKys7DQogICAgICAgICAgICB3aGlsZSAobV9udW1Pd25lcnMgPiAxICYmIG1fb3duZXJzW21fbnVtT3duZXJzXSA9PSAwKSBtX251bU93bmVycy0tOw0KICAgICAgICAgICAgaWYgKGZyZWUgPCBtX251bU93bmVycyAmJiBtX293bmVyc1ttX251bU93bmVyc10gIT0gMCAmJiBtX293bmVyc1tmcmVlXSA9PSAwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG1fb3duZXJzW2ZyZWVdID0gbV9vd25lcnNbbV9udW1Pd25lcnNdOw0KICAgICAgICAgICAgICAgIG1fb3duZXJJbmRleFttX293bmVyc1tmcmVlXV0gPSBmcmVlOw0KICAgICAgICAgICAgICAgIG1fb3duZXJzW21fbnVtT3duZXJzXSA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjbGVhclBlbmRpbmcoKSBpbnRlcm5hbCB7DQogICAgICAgIHVpbnQgbGVuZ3RoID0gbV9wZW5kaW5nSW5kZXgubGVuZ3RoOw0KICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkNCiAgICAgICAgICAgIGlmIChtX3BlbmRpbmdJbmRleFtpXSAhPSAwKQ0KICAgICAgICAgICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdbbV9wZW5kaW5nSW5kZXhbaV1dOw0KICAgICAgICBkZWxldGUgbV9wZW5kaW5nSW5kZXg7DQogICAgfQ0KDQogICAJLy8gRklFTERTDQoNCiAgICAvLyB0aGUgbnVtYmVyIG9mIG93bmVycyB0aGF0IG11c3QgY29uZmlybSB0aGUgc2FtZSBvcGVyYXRpb24gYmVmb3JlIGl0IGlzIHJ1bi4NCiAgICB1aW50IHB1YmxpYyBtX3JlcXVpcmVkOw0KICAgIC8vIHBvaW50ZXIgdXNlZCB0byBmaW5kIGEgZnJlZSBzbG90IGluIG1fb3duZXJzDQogICAgdWludCBwdWJsaWMgbV9udW1Pd25lcnM7DQoNCiAgICAvLyBsaXN0IG9mIG93bmVycw0KICAgIHVpbnRbMjU2XSBtX293bmVyczsNCiAgICB1aW50IGNvbnN0YW50IGNfbWF4T3duZXJzID0gMjUwOw0KICAgIC8vIGluZGV4IG9uIHRoZSBsaXN0IG9mIG93bmVycyB0byBhbGxvdyByZXZlcnNlIGxvb2t1cA0KICAgIG1hcHBpbmcodWludCA9PiB1aW50KSBtX293bmVySW5kZXg7DQogICAgLy8gdGhlIG9uZ29pbmcgb3BlcmF0aW9ucy4NCiAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gUGVuZGluZ1N0YXRlKSBtX3BlbmRpbmc7DQogICAgYnl0ZXMzMltdIG1fcGVuZGluZ0luZGV4Ow0KfQ0KDQovLyBpbmhlcml0YWJsZSAicHJvcGVydHkiIGNvbnRyYWN0IHRoYXQgZW5hYmxlcyBtZXRob2RzIHRvIGJlIHByb3RlY3RlZCBieSBwbGFjaW5nIGEgbGluZWFyIGxpbWl0IChzcGVjaWZpYWJsZSkNCi8vIG9uIGEgcGFydGljdWxhciByZXNvdXJjZSBwZXIgY2FsZW5kYXIgZGF5LiBpcyBtdWx0aW93bmVkIHRvIGFsbG93IHRoZSBsaW1pdCB0byBiZSBhbHRlcmVkLiByZXNvdXJjZSB0aGF0IG1ldGhvZA0KLy8gdXNlcyBpcyBzcGVjaWZpZWQgaW4gdGhlIG1vZGlmaWVyLg0KY29udHJhY3QgZGF5bGltaXQgaXMgbXVsdGlvd25lZCB7DQoNCgkvLyBNT0RJRklFUlMNCg0KICAgIC8vIHNpbXBsZSBtb2RpZmllciBmb3IgZGFpbHkgbGltaXQuDQogICAgbW9kaWZpZXIgbGltaXRlZERhaWx5KHVpbnQgX3ZhbHVlKSB7DQogICAgICAgIGlmICh1bmRlckxpbWl0KF92YWx1ZSkpDQogICAgICAgICAgICBfOw0KICAgIH0NCg0KCS8vIE1FVEhPRFMNCg0KICAgIC8vIGNvbnN0cnVjdG9yIC0gc3RvcmVzIGluaXRpYWwgZGFpbHkgbGltaXQgYW5kIHJlY29yZHMgdGhlIHByZXNlbnQgZGF5J3MgaW5kZXguDQogICAgZnVuY3Rpb24gZGF5bGltaXQodWludCBfbGltaXQpIHsNCiAgICAgICAgbV9kYWlseUxpbWl0ID0gX2xpbWl0Ow0KICAgICAgICBtX2xhc3REYXkgPSB0b2RheSgpOw0KICAgIH0NCiAgICAvLyAocmUpc2V0cyB0aGUgZGFpbHkgbGltaXQuIG5lZWRzIG1hbnkgb2YgdGhlIG93bmVycyB0byBjb25maXJtLiBkb2Vzbid0IGFsdGVyIHRoZSBhbW91bnQgYWxyZWFkeSBzcGVudCB0b2RheS4NCiAgICBmdW5jdGlvbiBzZXREYWlseUxpbWl0KHVpbnQgX25ld0xpbWl0KSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgew0KICAgICAgICBtX2RhaWx5TGltaXQgPSBfbmV3TGltaXQ7DQogICAgfQ0KICAgIC8vIHJlc2V0cyB0aGUgYW1vdW50IGFscmVhZHkgc3BlbnQgdG9kYXkuIG5lZWRzIG1hbnkgb2YgdGhlIG93bmVycyB0byBjb25maXJtLg0KICAgIGZ1bmN0aW9uIHJlc2V0U3BlbnRUb2RheSgpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQogICAgICAgIG1fc3BlbnRUb2RheSA9IDA7DQogICAgfQ0KDQogICAgLy8gSU5URVJOQUwgTUVUSE9EUw0KDQogICAgLy8gY2hlY2tzIHRvIHNlZSBpZiB0aGVyZSBpcyBhdCBsZWFzdCBgX3ZhbHVlYCBsZWZ0IGZyb20gdGhlIGRhaWx5IGxpbWl0IHRvZGF5LiBpZiB0aGVyZSBpcywgc3VidHJhY3RzIGl0IGFuZA0KICAgIC8vIHJldHVybnMgdHJ1ZS4gb3RoZXJ3aXNlIGp1c3QgcmV0dXJucyBmYWxzZS4NCiAgICBmdW5jdGlvbiB1bmRlckxpbWl0KHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCBvbmx5b3duZXIgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICAvLyByZXNldCB0aGUgc3BlbmQgbGltaXQgaWYgd2UncmUgb24gYSBkaWZmZXJlbnQgZGF5IHRvIGxhc3QgdGltZS4NCiAgICAgICAgLyppZiAodG9kYXkoKSA+IG1fbGFzdERheSkgew0KICAgICAgICAgICAgbV9zcGVudFRvZGF5ID0gMDsNCiAgICAgICAgICAgIG1fbGFzdERheSA9IHRvZGF5KCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIHRoZXJlJ3MgZW5vdWdoIGxlZnQgLSBpZiBzbywgc3VidHJhY3QgYW5kIHJldHVybiB0cnVlLg0KICAgICAgICAvLyBvdmVyZmxvdyBwcm90ZWN0aW9uICAgICAgICAgICAgICAgICAgICAvLyBkYWlseUxpbWl0IGNoZWNrDQogICAgICAgIGlmIChtX3NwZW50VG9kYXkgKyBfdmFsdWUgPj0gbV9zcGVudFRvZGF5ICYmIG1fc3BlbnRUb2RheSArIF92YWx1ZSA8PSBtX2RhaWx5TGltaXQpIHsNCiAgICAgICAgICAgIG1fc3BlbnRUb2RheSArPSBfdmFsdWU7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7Ki8NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCiAgICAvLyBkZXRlcm1pbmVzIHRvZGF5J3MgaW5kZXguDQogICAgZnVuY3Rpb24gdG9kYXkoKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsgcmV0dXJuIG5vdyAvIDEgZGF5czsgfQ0KDQoJLy8gRklFTERTDQoNCiAgICB1aW50IHB1YmxpYyBtX2RhaWx5TGltaXQ7DQogICAgdWludCBwdWJsaWMgbV9zcGVudFRvZGF5Ow0KICAgIHVpbnQgcHVibGljIG1fbGFzdERheTsNCn0NCg0KLy8gaW50ZXJmYWNlIGNvbnRyYWN0IGZvciBtdWx0aXNpZyBwcm94eSBjb250cmFjdHM7IHNlZSBiZWxvdyBmb3IgZG9jcy4NCmNvbnRyYWN0IG11bHRpc2lnIHsNCg0KCS8vIEVWRU5UUw0KDQogICAgLy8gbG9nZ2VkIGV2ZW50czoNCiAgICAvLyBGdW5kcyBoYXMgYXJyaXZlZCBpbnRvIHRoZSB3YWxsZXQgKHJlY29yZCBob3cgbXVjaCkuDQogICAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIF9mcm9tLCB1aW50IHZhbHVlKTsNCiAgICAvLyBTaW5nbGUgdHJhbnNhY3Rpb24gZ29pbmcgb3V0IG9mIHRoZSB3YWxsZXQgKHJlY29yZCB3aG8gc2lnbmVkIGZvciBpdCwgaG93IG11Y2gsIGFuZCB0byB3aG9tIGl0J3MgZ29pbmcpLg0KICAgIGV2ZW50IFNpbmdsZVRyYW5zYWN0KGFkZHJlc3Mgb3duZXIsIHVpbnQgdmFsdWUsIGFkZHJlc3MgdG8sIGJ5dGVzIGRhdGEpOw0KICAgIC8vIE11bHRpLXNpZyB0cmFuc2FjdGlvbiBnb2luZyBvdXQgb2YgdGhlIHdhbGxldCAocmVjb3JkIHdobyBzaWduZWQgZm9yIGl0IGxhc3QsIHRoZSBvcGVyYXRpb24gaGFzaCwgaG93IG11Y2gsIGFuZCB0byB3aG9tIGl0J3MgZ29pbmcpLg0KICAgIGV2ZW50IE11bHRpVHJhbnNhY3QoYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24sIHVpbnQgdmFsdWUsIGFkZHJlc3MgdG8sIGJ5dGVzIGRhdGEpOw0KICAgIC8vIENvbmZpcm1hdGlvbiBzdGlsbCBuZWVkZWQgZm9yIGEgdHJhbnNhY3Rpb24uDQogICAgZXZlbnQgQ29uZmlybWF0aW9uTmVlZGVkKGJ5dGVzMzIgb3BlcmF0aW9uLCBhZGRyZXNzIGluaXRpYXRvciwgdWludCB2YWx1ZSwgYWRkcmVzcyB0bywgYnl0ZXMgZGF0YSk7DQoNCiAgICAvLyBGVU5DVElPTlMNCg0KICAgIC8vIFRPRE86IGRvY3VtZW50DQogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIGV4dGVybmFsOw0KICAgIGZ1bmN0aW9uIGV4ZWN1dGUoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgZXh0ZXJuYWwgcmV0dXJucyAoYnl0ZXMzMik7DQogICAgZnVuY3Rpb24gY29uZmlybShieXRlczMyIF9oKSByZXR1cm5zIChib29sKTsNCn0NCg0KLy8gdXNhZ2U6DQovLyBieXRlczMyIGggPSBXYWxsZXQodykuZnJvbShvbmVPd25lcikudHJhbnNhY3QodG8sIHZhbHVlLCBkYXRhKTsNCi8vIFdhbGxldCh3KS5mcm9tKGFub3RoZXJPd25lcikuY29uZmlybShoKTsNCmNvbnRyYWN0IFdhbGxldCBpcyBtdWx0aXNpZywgbXVsdGlvd25lZCwgZGF5bGltaXQgew0KDQoJLy8gVFlQRVMNCg0KICAgIC8vIFRyYW5zYWN0aW9uIHN0cnVjdHVyZSB0byByZW1lbWJlciBkZXRhaWxzIG9mIHRyYW5zYWN0aW9uIGxlc3QgaXQgbmVlZCBiZSBzYXZlZCBmb3IgYSBsYXRlciBjYWxsLg0KICAgIHN0cnVjdCBUcmFuc2FjdGlvbiB7DQogICAgICAgIGFkZHJlc3MgdG87DQogICAgICAgIHVpbnQgdmFsdWU7DQogICAgICAgIGJ5dGVzIGRhdGE7DQogICAgfQ0KDQogICAgLy8gTUVUSE9EUw0KDQogICAgLy8gY29uc3RydWN0b3IgLSBqdXN0IHBhc3Mgb24gdGhlIG93bmVyIGFycmF5IHRvIHRoZSBtdWx0aW93bmVkIGFuZA0KICAgIC8vIHRoZSBsaW1pdCB0byBkYXlsaW1pdA0KICAgIGZ1bmN0aW9uIFdhbGxldChhZGRyZXNzW10gX293bmVycywgdWludCBfcmVxdWlyZWQsIHVpbnQgX2RheWxpbWl0KQ0KICAgICAgICAgICAgbXVsdGlvd25lZChfb3duZXJzLCBfcmVxdWlyZWQpIGRheWxpbWl0KF9kYXlsaW1pdCkgew0KICAgIH0NCg0KICAgIC8vIGtpbGxzIHRoZSBjb250cmFjdCBzZW5kaW5nIGV2ZXJ5dGhpbmcgdG8gYF90b2AuDQogICAgZnVuY3Rpb24ga2lsbChhZGRyZXNzIF90bykgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgc3VpY2lkZShfdG8pOw0KICAgIH0NCg0KICAgIC8vIGdldHMgY2FsbGVkIHdoZW4gbm8gb3RoZXIgZnVuY3Rpb24gbWF0Y2hlcw0KICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7DQogICAgICAgIC8vIGp1c3QgYmVpbmcgc2VudCBzb21lIGNhc2g/DQogICAgICAgIGlmIChtc2cudmFsdWUgPiAwKQ0KICAgICAgICAgICAgRGVwb3NpdChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOw0KICAgIH0NCg0KICAgIC8vIE91dHNpZGUtdmlzaWJsZSB0cmFuc2FjdCBlbnRyeSBwb2ludC4gRXhlY3V0ZXMgdHJhbnNhY3Rpb24gaW1tZWRpYXRlbHkgaWYgYmVsb3cgZGFpbHkgc3BlbmQgbGltaXQuDQogICAgLy8gSWYgbm90LCBnb2VzIGludG8gbXVsdGlzaWcgcHJvY2Vzcy4gV2UgcHJvdmlkZSBhIGhhc2ggb24gcmV0dXJuIHRvIGFsbG93IHRoZSBzZW5kZXIgdG8gcHJvdmlkZQ0KICAgIC8vIHNob3J0Y3V0cyBmb3IgdGhlIG90aGVyIGNvbmZpcm1hdGlvbnMgKGFsbG93aW5nIHRoZW0gdG8gYXZvaWQgcmVwbGljYXRpbmcgdGhlIF90bywgX3ZhbHVlDQogICAgLy8gYW5kIF9kYXRhIGFyZ3VtZW50cykuIFRoZXkgc3RpbGwgZ2V0IHRoZSBvcHRpb24gb2YgdXNpbmcgdGhlbSBpZiB0aGV5IHdhbnQsIGFueXdheXMuDQogICAgZnVuY3Rpb24gZXhlY3V0ZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBleHRlcm5hbCBvbmx5b3duZXIgcmV0dXJucyAoYnl0ZXMzMiBfcikgew0KICAgICAgICAvLyBmaXJzdCwgdGFrZSB0aGUgb3Bwb3J0dW5pdHkgdG8gY2hlY2sgdGhhdCB3ZSdyZSB1bmRlciB0aGUgZGFpbHkgbGltaXQuDQogICAgICAgIGlmICh1bmRlckxpbWl0KF92YWx1ZSkpIHsNCiAgICAgICAgICAgIFNpbmdsZVRyYW5zYWN0KG1zZy5zZW5kZXIsIF92YWx1ZSwgX3RvLCBfZGF0YSk7DQogICAgICAgICAgICAvLyB5ZXMgLSBqdXN0IGV4ZWN1dGUgdGhlIGNhbGwuDQogICAgICAgICAgICBfdG8uY2FsbC52YWx1ZShfdmFsdWUpKF9kYXRhKTsNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9DQogICAgICAgIC8vIGRldGVybWluZSBvdXIgb3BlcmF0aW9uIGhhc2guDQogICAgICAgIF9yID0gc2hhMyhtc2cuZGF0YSwgYmxvY2subnVtYmVyKTsNCiAgICAgICAgaWYgKCFjb25maXJtKF9yKSAmJiBtX3R4c1tfcl0udG8gPT0gMCkgew0KICAgICAgICAgICAgbV90eHNbX3JdLnRvID0gX3RvOw0KICAgICAgICAgICAgbV90eHNbX3JdLnZhbHVlID0gX3ZhbHVlOw0KICAgICAgICAgICAgbV90eHNbX3JdLmRhdGEgPSBfZGF0YTsNCiAgICAgICAgICAgIENvbmZpcm1hdGlvbk5lZWRlZChfciwgbXNnLnNlbmRlciwgX3ZhbHVlLCBfdG8sIF9kYXRhKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIGNvbmZpcm0gYSB0cmFuc2FjdGlvbiB0aHJvdWdoIGp1c3QgdGhlIGhhc2guIHdlIHVzZSB0aGUgcHJldmlvdXMgdHJhbnNhY3Rpb25zIG1hcCwgbV90eHMsIGluIG9yZGVyDQogICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBib2R5IG9mIHRoZSB0cmFuc2FjdGlvbiBmcm9tIHRoZSBoYXNoIHByb3ZpZGVkLg0KICAgIGZ1bmN0aW9uIGNvbmZpcm0oYnl0ZXMzMiBfaCkgb25seW1hbnlvd25lcnMoX2gpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgaWYgKG1fdHhzW19oXS50byAhPSAwKSB7DQogICAgICAgICAgICBtX3R4c1tfaF0udG8uY2FsbC52YWx1ZShtX3R4c1tfaF0udmFsdWUpKG1fdHhzW19oXS5kYXRhKTsNCiAgICAgICAgICAgIE11bHRpVHJhbnNhY3QobXNnLnNlbmRlciwgX2gsIG1fdHhzW19oXS52YWx1ZSwgbV90eHNbX2hdLnRvLCBtX3R4c1tfaF0uZGF0YSk7DQogICAgICAgICAgICBkZWxldGUgbV90eHNbX2hdOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBJTlRFUk5BTCBNRVRIT0RTDQoNCiAgICBmdW5jdGlvbiBjbGVhclBlbmRpbmcoKSBpbnRlcm5hbCB7DQogICAgICAgIHVpbnQgbGVuZ3RoID0gbV9wZW5kaW5nSW5kZXgubGVuZ3RoOw0KICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkNCiAgICAgICAgICAgIGRlbGV0ZSBtX3R4c1ttX3BlbmRpbmdJbmRleFtpXV07DQogICAgICAgIHN1cGVyLmNsZWFyUGVuZGluZygpOw0KICAgIH0NCg0KCS8vIEZJRUxEUw0KDQogICAgLy8gcGVuZGluZyB0cmFuc2FjdGlvbnMgd2UgaGF2ZSBhdCBwcmVzZW50Lg0KICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gVHJhbnNhY3Rpb24pIG1fdHhzOw0KfQ=='