base 64 content
base64wallet14
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC42Ow0KDQpjb250cmFjdCBtdWx0aW93bmVkIHsNCg0KICAgIC8vIFRZUEVTDQoNCiAgICAvLyBzdHJ1Y3QgZm9yIHRoZSBzdGF0dXMgb2YgYSBwZW5kaW5nIG9wZXJhdGlvbi4NCiAgICBzdHJ1Y3QgUGVuZGluZ1N0YXRlIHsNCiAgICAgICAgdWludCB5ZXROZWVkZWQ7DQogICAgICAgIHVpbnQgb3duZXJzRG9uZTsNCiAgICAgICAgdWludCBpbmRleDsNCiAgICB9DQoNCiAgICAvLyBFVkVOVFMNCg0KICAgIC8vIHRoaXMgY29udHJhY3Qgb25seSBoYXMgc2l4IHR5cGVzIG9mIGV2ZW50czogaXQgY2FuIGFjY2VwdCBhIGNvbmZpcm1hdGlvbiwgaW4gd2hpY2ggY2FzZQ0KICAgIC8vIHdlIHJlY29yZCBvd25lciBhbmQgb3BlcmF0aW9uIChoYXNoKSBhbG9uZ3NpZGUgaXQuDQogICAgZXZlbnQgQ29uZmlybWF0aW9uKGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uKTsNCiAgICBldmVudCBSZXZva2UoYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24pOw0KICAgIC8vIHNvbWUgb3RoZXJzIGFyZSBpbiB0aGUgY2FzZSBvZiBhbiBvd25lciBjaGFuZ2luZy4NCiAgICBldmVudCBPd25lckNoYW5nZWQoYWRkcmVzcyBvbGRPd25lciwgYWRkcmVzcyBuZXdPd25lcik7DQogICAgZXZlbnQgT3duZXJBZGRlZChhZGRyZXNzIG5ld093bmVyKTsNCiAgICBldmVudCBPd25lclJlbW92ZWQoYWRkcmVzcyBvbGRPd25lcik7DQogICAgLy8gdGhlIGxhc3Qgb25lIGlzIGVtaXR0ZWQgaWYgdGhlIHJlcXVpcmVkIHNpZ25hdHVyZXMgY2hhbmdlDQogICAgZXZlbnQgUmVxdWlyZW1lbnRDaGFuZ2VkKHVpbnQgbmV3UmVxdWlyZW1lbnQpOw0KDQogICAgLy8gTU9ESUZJRVJTDQoNCiAgICAvLyBzaW1wbGUgc2luZ2xlLXNpZyBmdW5jdGlvbiBtb2RpZmllci4NCiAgICBtb2RpZmllciBvbmx5b3duZXIgew0KICAgICAgICBpZiAoaXNPd25lcihtc2cuc2VuZGVyKSkNCiAgICAgICAgICAgIF87DQogICAgfQ0KICAgIC8vIG11bHRpLXNpZyBmdW5jdGlvbiBtb2RpZmllcjogdGhlIG9wZXJhdGlvbiBtdXN0IGhhdmUgYW4gaW50cmluc2ljIGhhc2ggaW4gb3JkZXINCiAgICAvLyB0aGF0IGxhdGVyIGF0dGVtcHRzIGNhbiBiZSByZWFsaXNlZCBhcyB0aGUgc2FtZSB1bmRlcmx5aW5nIG9wZXJhdGlvbiBhbmQNCiAgICAvLyB0aHVzIGNvdW50IGFzIGNvbmZpcm1hdGlvbnMuDQogICAgbW9kaWZpZXIgb25seW1hbnlvd25lcnMoYnl0ZXMzMiBfb3BlcmF0aW9uKSB7DQogICAgICAgIGlmIChjb25maXJtQW5kQ2hlY2soX29wZXJhdGlvbikpDQogICAgICAgICAgICBfOw0KICAgIH0NCg0KICAgIC8vIE1FVEhPRFMNCg0KICAgIC8vIGNvbnN0cnVjdG9yIGlzIGdpdmVuIG51bWJlciBvZiBzaWdzIHJlcXVpcmVkIHRvIGRvIHByb3RlY3RlZCAib25seW1hbnlvd25lcnMiIHRyYW5zYWN0aW9ucw0KICAgIC8vIGFzIHdlbGwgYXMgdGhlIHNlbGVjdGlvbiBvZiBhZGRyZXNzZXMgY2FwYWJsZSBvZiBjb25maXJtaW5nIHRoZW0uDQogICAgZnVuY3Rpb24gbXVsdGlvd25lZChhZGRyZXNzW10gX293bmVycywgdWludCBfcmVxdWlyZWQpIHsNCiAgICAgICAgbV9udW1Pd25lcnMgPSBfb3duZXJzLmxlbmd0aCArIDE7DQogICAgICAgIG1fb3duZXJzWzFdID0gdWludChtc2cuc2VuZGVyKTsNCiAgICAgICAgbV9vd25lckluZGV4W3VpbnQobXNnLnNlbmRlcildID0gMTsNCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX293bmVycy5sZW5ndGg7ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgbV9vd25lcnNbMiArIGldID0gdWludChfb3duZXJzW2ldKTsNCiAgICAgICAgICAgIG1fb3duZXJJbmRleFt1aW50KF9vd25lcnNbaV0pXSA9IDIgKyBpOw0KICAgICAgICB9DQogICAgICAgIG1fcmVxdWlyZWQgPSBfcmVxdWlyZWQ7DQogICAgfQ0KDQogICAgLy8gUmV2b2tlcyBhIHByaW9yIGNvbmZpcm1hdGlvbiBvZiB0aGUgZ2l2ZW4gb3BlcmF0aW9uDQogICAgZnVuY3Rpb24gcmV2b2tlKGJ5dGVzMzIgX29wZXJhdGlvbikgZXh0ZXJuYWwgew0KICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChtc2cuc2VuZGVyKV07DQogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyDQogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsNCiAgICAgICAgdWludCBvd25lckluZGV4Qml0ID0gMioqb3duZXJJbmRleDsNCiAgICAgICAgdmFyIHBlbmRpbmcgPSBtX3BlbmRpbmdbX29wZXJhdGlvbl07DQogICAgICAgIGlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID4gMCkgew0KICAgICAgICAgICAgcGVuZGluZy55ZXROZWVkZWQrKzsNCiAgICAgICAgICAgIHBlbmRpbmcub3duZXJzRG9uZSAtPSBvd25lckluZGV4Qml0Ow0KICAgICAgICAgICAgUmV2b2tlKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gUmVwbGFjZXMgYW4gb3duZXIgYF9mcm9tYCB3aXRoIGFub3RoZXIgYF90b2AuDQogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQogICAgICAgIGlmIChpc093bmVyKF90bykpIHJldHVybjsNCiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQoX2Zyb20pXTsNCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOw0KDQogICAgICAgIGNsZWFyUGVuZGluZygpOw0KICAgICAgICBtX293bmVyc1tvd25lckluZGV4XSA9IHVpbnQoX3RvKTsNCiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX2Zyb20pXSA9IDA7DQogICAgICAgIG1fb3duZXJJbmRleFt1aW50KF90byldID0gb3duZXJJbmRleDsNCiAgICAgICAgT3duZXJDaGFuZ2VkKF9mcm9tLCBfdG8pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFkZE93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgew0KICAgICAgICBpZiAoaXNPd25lcihfb3duZXIpKSByZXR1cm47DQoNCiAgICAgICAgY2xlYXJQZW5kaW5nKCk7DQogICAgICAgIGlmIChtX251bU93bmVycyA+PSBjX21heE93bmVycykNCiAgICAgICAgICAgIHJlb3JnYW5pemVPd25lcnMoKTsNCiAgICAgICAgaWYgKG1fbnVtT3duZXJzID49IGNfbWF4T3duZXJzKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBtX251bU93bmVycysrOw0KICAgICAgICBtX293bmVyc1ttX251bU93bmVyc10gPSB1aW50KF9vd25lcik7DQogICAgICAgIG1fb3duZXJJbmRleFt1aW50KF9vd25lcildID0gbV9udW1Pd25lcnM7DQogICAgICAgIE93bmVyQWRkZWQoX293bmVyKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiByZW1vdmVPd25lcihhZGRyZXNzIF9vd25lcikgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQoX293bmVyKV07DQogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsNCiAgICAgICAgaWYgKG1fcmVxdWlyZWQgPiBtX251bU93bmVycyAtIDEpIHJldHVybjsNCg0KICAgICAgICBtX293bmVyc1tvd25lckluZGV4XSA9IDA7DQogICAgICAgIG1fb3duZXJJbmRleFt1aW50KF9vd25lcildID0gMDsNCiAgICAgICAgY2xlYXJQZW5kaW5nKCk7DQogICAgICAgIHJlb3JnYW5pemVPd25lcnMoKTsgLy9tYWtlIHN1cmUgbV9udW1Pd25lciBpcyBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG93bmVycyBhbmQgYWx3YXlzIHBvaW50cyB0byB0aGUgb3B0aW1hbCBmcmVlIHNsb3QNCiAgICAgICAgT3duZXJSZW1vdmVkKF9vd25lcik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2hhbmdlUmVxdWlyZW1lbnQodWludCBfbmV3UmVxdWlyZWQpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQogICAgICAgIGlmIChfbmV3UmVxdWlyZWQgPiBtX251bU93bmVycykgcmV0dXJuOw0KICAgICAgICBtX3JlcXVpcmVkID0gX25ld1JlcXVpcmVkOw0KICAgICAgICBjbGVhclBlbmRpbmcoKTsNCiAgICAgICAgUmVxdWlyZW1lbnRDaGFuZ2VkKF9uZXdSZXF1aXJlZCk7DQogICAgfQ0KDQogICAgLy8gR2V0cyBhbiBvd25lciBieSAwLWluZGV4ZWQgcG9zaXRpb24gKHVzaW5nIG51bU93bmVycyBhcyB0aGUgY291bnQpDQogICAgZnVuY3Rpb24gZ2V0T3duZXIodWludCBvd25lckluZGV4KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7DQogICAgICAgIHJldHVybiBhZGRyZXNzKG1fb3duZXJzW293bmVySW5kZXggKyAxXSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaXNPd25lcihhZGRyZXNzIF9hZGRyKSByZXR1cm5zIChib29sKSB7DQogICAgICAgIHJldHVybiBtX293bmVySW5kZXhbdWludChfYWRkcildID4gMDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBoYXNDb25maXJtZWQoYnl0ZXMzMiBfb3BlcmF0aW9uLCBhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgew0KICAgICAgICB2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsNCiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQoX293bmVyKV07DQoNCiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXINCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIC8vIGRldGVybWluZSB0aGUgYml0IHRvIHNldCBmb3IgdGhpcyBvd25lci4NCiAgICAgICAgdWludCBvd25lckluZGV4Qml0ID0gMioqb3duZXJJbmRleDsNCiAgICAgICAgcmV0dXJuICEocGVuZGluZy5vd25lcnNEb25lICYgb3duZXJJbmRleEJpdCA9PSAwKTsNCiAgICB9DQoNCiAgICAvLyBJTlRFUk5BTCBNRVRIT0RTDQoNCiAgICBmdW5jdGlvbiBjb25maXJtQW5kQ2hlY2soYnl0ZXMzMiBfb3BlcmF0aW9uKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7DQogICAgICAgIC8vIGRldGVybWluZSB3aGF0IGluZGV4IHRoZSBwcmVzZW50IHNlbmRlciBpczoNCiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQobXNnLnNlbmRlcildOw0KICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBvd25lcg0KICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm47DQoNCiAgICAgICAgdmFyIHBlbmRpbmcgPSBtX3BlbmRpbmdbX29wZXJhdGlvbl07DQogICAgICAgIC8vIGlmIHdlJ3JlIG5vdCB5ZXQgd29ya2luZyBvbiB0aGlzIG9wZXJhdGlvbiwgc3dpdGNoIG92ZXIgYW5kIHJlc2V0IHRoZSBjb25maXJtYXRpb24gc3RhdHVzLg0KICAgICAgICBpZiAocGVuZGluZy55ZXROZWVkZWQgPT0gMCkgew0KICAgICAgICAgICAgLy8gcmVzZXQgY291bnQgb2YgY29uZmlybWF0aW9ucyBuZWVkZWQuDQogICAgICAgICAgICBwZW5kaW5nLnlldE5lZWRlZCA9IG1fcmVxdWlyZWQ7DQogICAgICAgICAgICAvLyByZXNldCB3aGljaCBvd25lcnMgaGF2ZSBjb25maXJtZWQgKG5vbmUpIC0gc2V0IG91ciBiaXRtYXAgdG8gMC4NCiAgICAgICAgICAgIHBlbmRpbmcub3duZXJzRG9uZSA9IDA7DQogICAgICAgICAgICBwZW5kaW5nLmluZGV4ID0gbV9wZW5kaW5nSW5kZXgubGVuZ3RoKys7DQogICAgICAgICAgICBtX3BlbmRpbmdJbmRleFtwZW5kaW5nLmluZGV4XSA9IF9vcGVyYXRpb247DQogICAgICAgIH0NCiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBiaXQgdG8gc2V0IGZvciB0aGlzIG93bmVyLg0KICAgICAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4Ow0KICAgICAgICAvLyBtYWtlIHN1cmUgd2UgKHRoZSBtZXNzYWdlIHNlbmRlcikgaGF2ZW4ndCBjb25maXJtZWQgdGhpcyBvcGVyYXRpb24gcHJldmlvdXNseS4NCiAgICAgICAgaWYgKHBlbmRpbmcub3duZXJzRG9uZSAmIG93bmVySW5kZXhCaXQgPT0gMCkgew0KICAgICAgICAgICAgQ29uZmlybWF0aW9uKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOw0KICAgICAgICAgICAgLy8gb2sgLSBjaGVjayBpZiBjb3VudCBpcyBlbm91Z2ggdG8gZ28gYWhlYWQuDQogICAgICAgICAgICBpZiAocGVuZGluZy55ZXROZWVkZWQgPD0gMSkgew0KICAgICAgICAgICAgICAgIC8vIGVub3VnaCBjb25maXJtYXRpb25zOiByZXNldCBhbmQgcnVuIGludGVyaW9yLg0KICAgICAgICAgICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdJbmRleFttX3BlbmRpbmdbX29wZXJhdGlvbl0uaW5kZXhdOw0KICAgICAgICAgICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdbX29wZXJhdGlvbl07DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gbm90IGVub3VnaDogcmVjb3JkIHRoYXQgdGhpcyBvd25lciBpbiBwYXJ0aWN1bGFyIGNvbmZpcm1lZC4NCiAgICAgICAgICAgICAgICBwZW5kaW5nLnlldE5lZWRlZC0tOw0KICAgICAgICAgICAgICAgIHBlbmRpbmcub3duZXJzRG9uZSB8PSBvd25lckluZGV4Qml0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcmVvcmdhbml6ZU93bmVycygpIHByaXZhdGUgew0KICAgICAgICB1aW50IGZyZWUgPSAxOw0KICAgICAgICB3aGlsZSAoZnJlZSA8IG1fbnVtT3duZXJzKQ0KICAgICAgICB7DQogICAgICAgICAgICB3aGlsZSAoZnJlZSA8IG1fbnVtT3duZXJzICYmIG1fb3duZXJzW2ZyZWVdICE9IDApIGZyZWUrKzsNCiAgICAgICAgICAgIHdoaWxlIChtX251bU93bmVycyA+IDEgJiYgbV9vd25lcnNbbV9udW1Pd25lcnNdID09IDApIG1fbnVtT3duZXJzLS07DQogICAgICAgICAgICBpZiAoZnJlZSA8IG1fbnVtT3duZXJzICYmIG1fb3duZXJzW21fbnVtT3duZXJzXSAhPSAwICYmIG1fb3duZXJzW2ZyZWVdID09IDApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgbV9vd25lcnNbZnJlZV0gPSBtX293bmVyc1ttX251bU93bmVyc107DQogICAgICAgICAgICAgICAgbV9vd25lckluZGV4W21fb3duZXJzW2ZyZWVdXSA9IGZyZWU7DQogICAgICAgICAgICAgICAgbV9vd25lcnNbbV9udW1Pd25lcnNdID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNsZWFyUGVuZGluZygpIGludGVybmFsIHsNCiAgICAgICAgdWludCBsZW5ndGggPSBtX3BlbmRpbmdJbmRleC5sZW5ndGg7DQogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgaWYgKG1fcGVuZGluZ0luZGV4W2ldICE9IDApDQogICAgICAgICAgICAgICAgZGVsZXRlIG1fcGVuZGluZ1ttX3BlbmRpbmdJbmRleFtpXV07DQogICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdJbmRleDsNCiAgICB9DQoNCiAgICAvLyBGSUVMRFMNCg0KICAgIC8vIHRoZSBudW1iZXIgb2Ygb3duZXJzIHRoYXQgbXVzdCBjb25maXJtIHRoZSBzYW1lIG9wZXJhdGlvbiBiZWZvcmUgaXQgaXMgcnVuLg0KICAgIHVpbnQgcHVibGljIG1fcmVxdWlyZWQ7DQogICAgLy8gcG9pbnRlciB1c2VkIHRvIGZpbmQgYSBmcmVlIHNsb3QgaW4gbV9vd25lcnMNCiAgICB1aW50IHB1YmxpYyBtX251bU93bmVyczsNCg0KICAgIC8vIGxpc3Qgb2Ygb3duZXJzDQogICAgdWludFsyNTZdIG1fb3duZXJzOw0KICAgIHVpbnQgY29uc3RhbnQgY19tYXhPd25lcnMgPSAyNTA7DQogICAgLy8gaW5kZXggb24gdGhlIGxpc3Qgb2Ygb3duZXJzIHRvIGFsbG93IHJldmVyc2UgbG9va3VwDQogICAgbWFwcGluZyh1aW50ID0+IHVpbnQpIG1fb3duZXJJbmRleDsNCiAgICAvLyB0aGUgb25nb2luZyBvcGVyYXRpb25zLg0KICAgIG1hcHBpbmcoYnl0ZXMzMiA9PiBQZW5kaW5nU3RhdGUpIG1fcGVuZGluZzsNCiAgICBieXRlczMyW10gbV9wZW5kaW5nSW5kZXg7DQp9DQoNCi8vIGluaGVyaXRhYmxlICJwcm9wZXJ0eSIgY29udHJhY3QgdGhhdCBlbmFibGVzIG1ldGhvZHMgdG8gYmUgcHJvdGVjdGVkIGJ5IHBsYWNpbmcgYSBsaW5lYXIgbGltaXQgKHNwZWNpZmlhYmxlKQ0KLy8gb24gYSBwYXJ0aWN1bGFyIHJlc291cmNlIHBlciBjYWxlbmRhciBkYXkuIGlzIG11bHRpb3duZWQgdG8gYWxsb3cgdGhlIGxpbWl0IHRvIGJlIGFsdGVyZWQuIHJlc291cmNlIHRoYXQgbWV0aG9kDQovLyB1c2VzIGlzIHNwZWNpZmllZCBpbiB0aGUgbW9kaWZpZXIuDQpjb250cmFjdCBkYXlsaW1pdCBpcyBtdWx0aW93bmVkIHsNCg0KICAgIC8vIE1PRElGSUVSUw0KDQogICAgLy8gc2ltcGxlIG1vZGlmaWVyIGZvciBkYWlseSBsaW1pdC4NCiAgICBtb2RpZmllciBsaW1pdGVkRGFpbHkodWludCBfdmFsdWUpIHsNCiAgICAgICAgaWYgKHVuZGVyTGltaXQoX3ZhbHVlKSkNCiAgICAgICAgICAgIF87DQogICAgfQ0KDQogICAgLy8gTUVUSE9EUw0KDQogICAgLy8gY29uc3RydWN0b3IgLSBzdG9yZXMgaW5pdGlhbCBkYWlseSBsaW1pdCBhbmQgcmVjb3JkcyB0aGUgcHJlc2VudCBkYXkncyBpbmRleC4NCiAgICBmdW5jdGlvbiBkYXlsaW1pdCh1aW50IF9saW1pdCkgew0KICAgICAgICBtX2RhaWx5TGltaXQgPSBfbGltaXQ7DQogICAgICAgIG1fbGFzdERheSA9IHRvZGF5KCk7DQogICAgfQ0KICAgIC8vIChyZSlzZXRzIHRoZSBkYWlseSBsaW1pdC4gbmVlZHMgbWFueSBvZiB0aGUgb3duZXJzIHRvIGNvbmZpcm0uIGRvZXNuJ3QgYWx0ZXIgdGhlIGFtb3VudCBhbHJlYWR5IHNwZW50IHRvZGF5Lg0KICAgIGZ1bmN0aW9uIHNldERhaWx5TGltaXQodWludCBfbmV3TGltaXQpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQogICAgICAgIG1fZGFpbHlMaW1pdCA9IF9uZXdMaW1pdDsNCiAgICB9DQogICAgLy8gcmVzZXRzIHRoZSBhbW91bnQgYWxyZWFkeSBzcGVudCB0b2RheS4gbmVlZHMgbWFueSBvZiB0aGUgb3duZXJzIHRvIGNvbmZpcm0uDQogICAgZnVuY3Rpb24gcmVzZXRTcGVudFRvZGF5KCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgbV9zcGVudFRvZGF5ID0gMDsNCiAgICB9DQoNCiAgICAvLyBJTlRFUk5BTCBNRVRIT0RTDQoNCiAgICAvLyBjaGVja3MgdG8gc2VlIGlmIHRoZXJlIGlzIGF0IGxlYXN0IGBfdmFsdWVgIGxlZnQgZnJvbSB0aGUgZGFpbHkgbGltaXQgdG9kYXkuIGlmIHRoZXJlIGlzLCBzdWJ0cmFjdHMgaXQgYW5kDQogICAgLy8gcmV0dXJucyB0cnVlLiBvdGhlcndpc2UganVzdCByZXR1cm5zIGZhbHNlLg0KICAgIGZ1bmN0aW9uIHVuZGVyTGltaXQodWludCBfdmFsdWUpIGludGVybmFsIG9ubHlvd25lciByZXR1cm5zIChib29sKSB7DQogICAgICAgIC8vIHJlc2V0IHRoZSBzcGVuZCBsaW1pdCBpZiB3ZSdyZSBvbiBhIGRpZmZlcmVudCBkYXkgdG8gbGFzdCB0aW1lLg0KICAgICAgICBpZiAodG9kYXkoKSA+IG1fbGFzdERheSkgew0KICAgICAgICAgICAgbV9zcGVudFRvZGF5ID0gMDsNCiAgICAgICAgICAgIG1fbGFzdERheSA9IHRvZGF5KCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIHRoZXJlJ3MgZW5vdWdoIGxlZnQgLSBpZiBzbywgc3VidHJhY3QgYW5kIHJldHVybiB0cnVlLg0KICAgICAgICAvLyBvdmVyZmxvdyBwcm90ZWN0aW9uICAgICAgICAgICAgICAgICAgICAvLyBkYWlseUxpbWl0IGNoZWNrDQogICAgICAgIGlmIChtX3NwZW50VG9kYXkgKyBfdmFsdWUgPj0gbV9zcGVudFRvZGF5ICYmIG1fc3BlbnRUb2RheSArIF92YWx1ZSA8PSBtX2RhaWx5TGltaXQpIHsNCiAgICAgICAgICAgIG1fc3BlbnRUb2RheSArPSBfdmFsdWU7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgIC8vIGRldGVybWluZXMgdG9kYXkncyBpbmRleC4NCiAgICBmdW5jdGlvbiB0b2RheSgpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAodWludCkgeyByZXR1cm4gbm93IC8gMSBkYXlzOyB9DQoNCiAgICAvLyBGSUVMRFMNCg0KICAgIHVpbnQgcHVibGljIG1fZGFpbHlMaW1pdDsNCiAgICB1aW50IHB1YmxpYyBtX3NwZW50VG9kYXk7DQogICAgdWludCBwdWJsaWMgbV9sYXN0RGF5Ow0KfQ0KDQovLyBpbnRlcmZhY2UgY29udHJhY3QgZm9yIG11bHRpc2lnIHByb3h5IGNvbnRyYWN0czsgc2VlIGJlbG93IGZvciBkb2NzLg0KY29udHJhY3QgbXVsdGlzaWcgew0KDQogICAgLy8gRVZFTlRTDQoNCiAgICAvLyBsb2dnZWQgZXZlbnRzOg0KICAgIC8vIEZ1bmRzIGhhcyBhcnJpdmVkIGludG8gdGhlIHdhbGxldCAocmVjb3JkIGhvdyBtdWNoKS4NCiAgICBldmVudCBEZXBvc2l0KGFkZHJlc3MgX2Zyb20sIHVpbnQgdmFsdWUpOw0KICAgIC8vIFNpbmdsZSB0cmFuc2FjdGlvbiBnb2luZyBvdXQgb2YgdGhlIHdhbGxldCAocmVjb3JkIHdobyBzaWduZWQgZm9yIGl0LCBob3cgbXVjaCwgYW5kIHRvIHdob20gaXQncyBnb2luZykuDQogICAgZXZlbnQgU2luZ2xlVHJhbnNhY3QoYWRkcmVzcyBvd25lciwgdWludCB2YWx1ZSwgYWRkcmVzcyB0bywgYnl0ZXMgZGF0YSk7DQogICAgLy8gTXVsdGktc2lnIHRyYW5zYWN0aW9uIGdvaW5nIG91dCBvZiB0aGUgd2FsbGV0IChyZWNvcmQgd2hvIHNpZ25lZCBmb3IgaXQgbGFzdCwgdGhlIG9wZXJhdGlvbiBoYXNoLCBob3cgbXVjaCwgYW5kIHRvIHdob20gaXQncyBnb2luZykuDQogICAgZXZlbnQgTXVsdGlUcmFuc2FjdChhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbiwgdWludCB2YWx1ZSwgYWRkcmVzcyB0bywgYnl0ZXMgZGF0YSk7DQogICAgLy8gQ29uZmlybWF0aW9uIHN0aWxsIG5lZWRlZCBmb3IgYSB0cmFuc2FjdGlvbi4NCiAgICBldmVudCBDb25maXJtYXRpb25OZWVkZWQoYnl0ZXMzMiBvcGVyYXRpb24sIGFkZHJlc3MgaW5pdGlhdG9yLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhKTsNCg0KICAgIC8vIEZVTkNUSU9OUw0KDQogICAgLy8gVE9ETzogZG9jdW1lbnQNCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgZXh0ZXJuYWw7DQogICAgZnVuY3Rpb24gZXhlY3V0ZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBleHRlcm5hbCByZXR1cm5zIChieXRlczMyKTsNCiAgICBmdW5jdGlvbiBjb25maXJtKGJ5dGVzMzIgX2gpIHJldHVybnMgKGJvb2wpOw0KfQ0KDQovLyB1c2FnZToNCi8vIGJ5dGVzMzIgaCA9IFdhbGxldCh3KS5mcm9tKG9uZU93bmVyKS5leGVjdXRlKHRvLCB2YWx1ZSwgZGF0YSk7DQovLyBXYWxsZXQodykuZnJvbShhbm90aGVyT3duZXIpLmNvbmZpcm0oaCk7DQpjb250cmFjdCBXYWxsZXQgaXMgbXVsdGlzaWcsIG11bHRpb3duZWQsIGRheWxpbWl0IHsNCg0KICAgIC8vIFRZUEVTDQoNCiAgICAvLyBUcmFuc2FjdGlvbiBzdHJ1Y3R1cmUgdG8gcmVtZW1iZXIgZGV0YWlscyBvZiB0cmFuc2FjdGlvbiBsZXN0IGl0IG5lZWQgYmUgc2F2ZWQgZm9yIGEgbGF0ZXIgY2FsbC4NCiAgICBzdHJ1Y3QgVHJhbnNhY3Rpb24gew0KICAgICAgICBhZGRyZXNzIHRvOw0KICAgICAgICB1aW50IHZhbHVlOw0KICAgICAgICBieXRlcyBkYXRhOw0KICAgIH0NCg0KICAgIC8vIE1FVEhPRFMNCg0KICAgIC8vIGNvbnN0cnVjdG9yIC0ganVzdCBwYXNzIG9uIHRoZSBvd25lciBhcnJheSB0byB0aGUgbXVsdGlvd25lZCBhbmQNCiAgICAvLyB0aGUgbGltaXQgdG8gZGF5bGltaXQNCiAgICBmdW5jdGlvbiBXYWxsZXQoYWRkcmVzc1tdIF9vd25lcnMsIHVpbnQgX3JlcXVpcmVkLCB1aW50IF9kYXlsaW1pdCkNCiAgICAgICAgICAgIG11bHRpb3duZWQoX293bmVycywgX3JlcXVpcmVkKSBkYXlsaW1pdChfZGF5bGltaXQpIHsNCiAgICB9DQoNCiAgICAvLyBraWxscyB0aGUgY29udHJhY3Qgc2VuZGluZyBldmVyeXRoaW5nIHRvIGBfdG9gLg0KICAgIGZ1bmN0aW9uIGtpbGwoYWRkcmVzcyBfdG8pIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQogICAgICAgIHN1aWNpZGUoX3RvKTsNCiAgICB9DQoNCiAgICAvLyBnZXRzIGNhbGxlZCB3aGVuIG5vIG90aGVyIGZ1bmN0aW9uIG1hdGNoZXMNCiAgICBmdW5jdGlvbigpIHBheWFibGUgew0KICAgICAgICAvLyBqdXN0IGJlaW5nIHNlbnQgc29tZSBjYXNoPw0KICAgICAgICBpZiAobXNnLnZhbHVlID4gMCkNCiAgICAgICAgICAgIERlcG9zaXQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsNCiAgICB9DQoNCiAgICAvLyBPdXRzaWRlLXZpc2libGUgdHJhbnNhY3QgZW50cnkgcG9pbnQuIEV4ZWN1dGVzIHRyYW5zYWN0aW9uIGltbWVkaWF0ZWx5IGlmIGJlbG93IGRhaWx5IHNwZW5kIGxpbWl0Lg0KICAgIC8vIElmIG5vdCwgZ29lcyBpbnRvIG11bHRpc2lnIHByb2Nlc3MuIFdlIHByb3ZpZGUgYSBoYXNoIG9uIHJldHVybiB0byBhbGxvdyB0aGUgc2VuZGVyIHRvIHByb3ZpZGUNCiAgICAvLyBzaG9ydGN1dHMgZm9yIHRoZSBvdGhlciBjb25maXJtYXRpb25zIChhbGxvd2luZyB0aGVtIHRvIGF2b2lkIHJlcGxpY2F0aW5nIHRoZSBfdG8sIF92YWx1ZQ0KICAgIC8vIGFuZCBfZGF0YSBhcmd1bWVudHMpLiBUaGV5IHN0aWxsIGdldCB0aGUgb3B0aW9uIG9mIHVzaW5nIHRoZW0gaWYgdGhleSB3YW50LCBhbnl3YXlzLg0KICAgIGZ1bmN0aW9uIGV4ZWN1dGUoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgZXh0ZXJuYWwgb25seW93bmVyIHJldHVybnMgKGJ5dGVzMzIgX3IpIHsNCiAgICAgICAgLy8gZmlyc3QsIHRha2UgdGhlIG9wcG9ydHVuaXR5IHRvIGNoZWNrIHRoYXQgd2UncmUgdW5kZXIgdGhlIGRhaWx5IGxpbWl0Lg0KICAgICAgICBpZiAodW5kZXJMaW1pdChfdmFsdWUpKSB7DQogICAgICAgICAgICBTaW5nbGVUcmFuc2FjdChtc2cuc2VuZGVyLCBfdmFsdWUsIF90bywgX2RhdGEpOw0KICAgICAgICAgICAgLy8geWVzIC0ganVzdCBleGVjdXRlIHRoZSBjYWxsLg0KICAgICAgICAgICAgX3RvLmNhbGwudmFsdWUoX3ZhbHVlKShfZGF0YSk7DQogICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgfQ0KICAgICAgICAvLyBkZXRlcm1pbmUgb3VyIG9wZXJhdGlvbiBoYXNoLg0KICAgICAgICBfciA9IHNoYTMobXNnLmRhdGEsIGJsb2NrLm51bWJlcik7DQogICAgICAgIGlmICghY29uZmlybShfcikgJiYgbV90eHNbX3JdLnRvID09IDApIHsNCiAgICAgICAgICAgIG1fdHhzW19yXS50byA9IF90bzsNCiAgICAgICAgICAgIG1fdHhzW19yXS52YWx1ZSA9IF92YWx1ZTsNCiAgICAgICAgICAgIG1fdHhzW19yXS5kYXRhID0gX2RhdGE7DQogICAgICAgICAgICBDb25maXJtYXRpb25OZWVkZWQoX3IsIG1zZy5zZW5kZXIsIF92YWx1ZSwgX3RvLCBfZGF0YSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBjb25maXJtIGEgdHJhbnNhY3Rpb24gdGhyb3VnaCBqdXN0IHRoZSBoYXNoLiB3ZSB1c2UgdGhlIHByZXZpb3VzIHRyYW5zYWN0aW9ucyBtYXAsIG1fdHhzLCBpbiBvcmRlcg0KICAgIC8vIHRvIGRldGVybWluZSB0aGUgYm9keSBvZiB0aGUgdHJhbnNhY3Rpb24gZnJvbSB0aGUgaGFzaCBwcm92aWRlZC4NCiAgICBmdW5jdGlvbiBjb25maXJtKGJ5dGVzMzIgX2gpIG9ubHltYW55b3duZXJzKF9oKSByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmIChtX3R4c1tfaF0udG8gIT0gMCkgew0KICAgICAgICAgICAgbV90eHNbX2hdLnRvLmNhbGwudmFsdWUobV90eHNbX2hdLnZhbHVlKShtX3R4c1tfaF0uZGF0YSk7DQogICAgICAgICAgICBNdWx0aVRyYW5zYWN0KG1zZy5zZW5kZXIsIF9oLCBtX3R4c1tfaF0udmFsdWUsIG1fdHhzW19oXS50bywgbV90eHNbX2hdLmRhdGEpOw0KICAgICAgICAgICAgZGVsZXRlIG1fdHhzW19oXTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gSU5URVJOQUwgTUVUSE9EUw0KDQogICAgZnVuY3Rpb24gY2xlYXJQZW5kaW5nKCkgaW50ZXJuYWwgew0KICAgICAgICB1aW50IGxlbmd0aCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aDsNCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpDQogICAgICAgICAgICBkZWxldGUgbV90eHNbbV9wZW5kaW5nSW5kZXhbaV1dOw0KICAgICAgICBzdXBlci5jbGVhclBlbmRpbmcoKTsNCiAgICB9DQoNCiAgICAvLyBGSUVMRFMNCg0KICAgIC8vIHBlbmRpbmcgdHJhbnNhY3Rpb25zIHdlIGhhdmUgYXQgcHJlc2VudC4NCiAgICBtYXBwaW5nIChieXRlczMyID0+IFRyYW5zYWN0aW9uKSBtX3R4czsNCn0='