base 64 content
base64wallet5
	^'LyoqDQogKiBUaGlzIGlzIGEgbXVsdGlzaWcgd2FsbGV0IGJhc2VkIG9uIEdhdidzIG9yaWdpbmFsIGltcGxlbWVudGF0aW9uLCBkYWlseSB3aXRoZHJhdyBsaW1pdHMgcmVtb3ZlZC4NCiAqDQogKg0KICogRm9yIG90aGVyIG11bHRpc2lnIHdhbGxldCBpbXBsZW1lbnRhdGlvbnMsIHNlZSBodHRwczovL2Jsb2cuZ25vc2lzLnBtL3JlbGVhc2Utb2YtbmV3LW11bHRpc2lnLXdhbGxldC01OWI2ODExZjdlZGMNCiAqLw0KDQovLyBNdWx0aS1zaWcsIGRhaWx5LWxpbWl0ZWQgYWNjb3VudCBwcm94eS93YWxsZXQuDQovLyBAYXV0aG9yczoNCi8vIEdhdiBXb29kIDxnQGV0aGRldi5jb20+DQovLyBpbmhlcml0YWJsZSAicHJvcGVydHkiIGNvbnRyYWN0IHRoYXQgZW5hYmxlcyBtZXRob2RzIHRvIGJlIHByb3RlY3RlZCBieSByZXF1aXJpbmcgdGhlIGFjcXVpZXNjZW5jZSBvZiBlaXRoZXIgYQ0KLy8gc2luZ2xlLCBvciwgY3J1Y2lhbGx5LCBlYWNoIG9mIGEgbnVtYmVyIG9mLCBkZXNpZ25hdGVkIG93bmVycy4NCi8vIHVzYWdlOg0KLy8gdXNlIG1vZGlmaWVycyBvbmx5b3duZXIgKGp1c3Qgb3duIG93bmVkKSBvciBvbmx5bWFueW93bmVycyhoYXNoKSwgd2hlcmVieSB0aGUgc2FtZSBoYXNoIG11c3QgYmUgcHJvdmlkZWQgYnkNCi8vIHNvbWUgbnVtYmVyIChzcGVjaWZpZWQgaW4gY29uc3RydWN0b3IpIG9mIHRoZSBzZXQgb2Ygb3duZXJzIChzcGVjaWZpZWQgaW4gdGhlIGNvbnN0cnVjdG9yLCBtb2RpZmlhYmxlKSBiZWZvcmUgdGhlDQovLyBpbnRlcmlvciBpcyBleGVjdXRlZC4NCmNvbnRyYWN0IG11bHRpb3duZWQgew0KDQoJLy8gVFlQRVMNCg0KICAgIC8vIHN0cnVjdCBmb3IgdGhlIHN0YXR1cyBvZiBhIHBlbmRpbmcgb3BlcmF0aW9uLg0KICAgIHN0cnVjdCBQZW5kaW5nU3RhdGUgew0KICAgICAgICB1aW50IHlldE5lZWRlZDsNCiAgICAgICAgdWludCBvd25lcnNEb25lOw0KICAgICAgICB1aW50IGluZGV4Ow0KICAgIH0NCg0KCS8vIEVWRU5UUw0KDQogICAgLy8gdGhpcyBjb250cmFjdCBvbmx5IGhhcyBzaXggdHlwZXMgb2YgZXZlbnRzOiBpdCBjYW4gYWNjZXB0IGEgY29uZmlybWF0aW9uLCBpbiB3aGljaCBjYXNlDQogICAgLy8gd2UgcmVjb3JkIG93bmVyIGFuZCBvcGVyYXRpb24gKGhhc2gpIGFsb25nc2lkZSBpdC4NCiAgICBldmVudCBDb25maXJtYXRpb24oYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24pOw0KICAgIGV2ZW50IFJldm9rZShhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbik7DQogICAgLy8gc29tZSBvdGhlcnMgYXJlIGluIHRoZSBjYXNlIG9mIGFuIG93bmVyIGNoYW5naW5nLg0KICAgIGV2ZW50IE93bmVyQ2hhbmdlZChhZGRyZXNzIG9sZE93bmVyLCBhZGRyZXNzIG5ld093bmVyKTsNCiAgICBldmVudCBPd25lckFkZGVkKGFkZHJlc3MgbmV3T3duZXIpOw0KICAgIGV2ZW50IE93bmVyUmVtb3ZlZChhZGRyZXNzIG9sZE93bmVyKTsNCiAgICAvLyB0aGUgbGFzdCBvbmUgaXMgZW1pdHRlZCBpZiB0aGUgcmVxdWlyZWQgc2lnbmF0dXJlcyBjaGFuZ2UNCiAgICBldmVudCBSZXF1aXJlbWVudENoYW5nZWQodWludCBuZXdSZXF1aXJlbWVudCk7DQoNCgkvLyBNT0RJRklFUlMNCg0KICAgIC8vIHNpbXBsZSBzaW5nbGUtc2lnIGZ1bmN0aW9uIG1vZGlmaWVyLg0KICAgIG1vZGlmaWVyIG9ubHlvd25lciB7DQogICAgICAgIGlmIChpc093bmVyKG1zZy5zZW5kZXIpKQ0KICAgICAgICAgICAgXzsNCiAgICB9DQogICAgLy8gbXVsdGktc2lnIGZ1bmN0aW9uIG1vZGlmaWVyOiB0aGUgb3BlcmF0aW9uIG11c3QgaGF2ZSBhbiBpbnRyaW5zaWMgaGFzaCBpbiBvcmRlcg0KICAgIC8vIHRoYXQgbGF0ZXIgYXR0ZW1wdHMgY2FuIGJlIHJlYWxpc2VkIGFzIHRoZSBzYW1lIHVuZGVybHlpbmcgb3BlcmF0aW9uIGFuZA0KICAgIC8vIHRodXMgY291bnQgYXMgY29uZmlybWF0aW9ucy4NCiAgICBtb2RpZmllciBvbmx5bWFueW93bmVycyhieXRlczMyIF9vcGVyYXRpb24pIHsNCiAgICAgICAgaWYgKGNvbmZpcm1BbmRDaGVjayhfb3BlcmF0aW9uKSkNCiAgICAgICAgICAgIF87DQogICAgfQ0KDQoJLy8gTUVUSE9EUw0KDQogICAgLy8gY29uc3RydWN0b3IgaXMgZ2l2ZW4gbnVtYmVyIG9mIHNpZ3MgcmVxdWlyZWQgdG8gZG8gcHJvdGVjdGVkICJvbmx5bWFueW93bmVycyIgdHJhbnNhY3Rpb25zDQogICAgLy8gYXMgd2VsbCBhcyB0aGUgc2VsZWN0aW9uIG9mIGFkZHJlc3NlcyBjYXBhYmxlIG9mIGNvbmZpcm1pbmcgdGhlbS4NCiAgICBmdW5jdGlvbiBtdWx0aW93bmVkKGFkZHJlc3NbXSBfb3duZXJzLCB1aW50IF9yZXF1aXJlZCkgew0KICAgICAgICBtX251bU93bmVycyA9IF9vd25lcnMubGVuZ3RoICsgMTsNCiAgICAgICAgbV9vd25lcnNbMV0gPSB1aW50KG1zZy5zZW5kZXIpOw0KICAgICAgICBtX293bmVySW5kZXhbdWludChtc2cuc2VuZGVyKV0gPSAxOw0KICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfb3duZXJzLmxlbmd0aDsgKytpKQ0KICAgICAgICB7DQogICAgICAgICAgICBtX293bmVyc1syICsgaV0gPSB1aW50KF9vd25lcnNbaV0pOw0KICAgICAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyc1tpXSldID0gMiArIGk7DQogICAgICAgIH0NCiAgICAgICAgbV9yZXF1aXJlZCA9IF9yZXF1aXJlZDsNCiAgICB9DQoNCiAgICAvLyBSZXZva2VzIGEgcHJpb3IgY29uZmlybWF0aW9uIG9mIHRoZSBnaXZlbiBvcGVyYXRpb24NCiAgICBmdW5jdGlvbiByZXZva2UoYnl0ZXMzMiBfb3BlcmF0aW9uKSBleHRlcm5hbCB7DQogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXTsNCiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXINCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOw0KICAgICAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4Ow0KICAgICAgICB2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsNCiAgICAgICAgaWYgKHBlbmRpbmcub3duZXJzRG9uZSAmIG93bmVySW5kZXhCaXQgPiAwKSB7DQogICAgICAgICAgICBwZW5kaW5nLnlldE5lZWRlZCsrOw0KICAgICAgICAgICAgcGVuZGluZy5vd25lcnNEb25lIC09IG93bmVySW5kZXhCaXQ7DQogICAgICAgICAgICBSZXZva2UobXNnLnNlbmRlciwgX29wZXJhdGlvbik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBSZXBsYWNlcyBhbiBvd25lciBgX2Zyb21gIHdpdGggYW5vdGhlciBgX3RvYC4NCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgaWYgKGlzT3duZXIoX3RvKSkgcmV0dXJuOw0KICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfZnJvbSldOw0KICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm47DQoNCiAgICAgICAgY2xlYXJQZW5kaW5nKCk7DQogICAgICAgIG1fb3duZXJzW293bmVySW5kZXhdID0gdWludChfdG8pOw0KICAgICAgICBtX293bmVySW5kZXhbdWludChfZnJvbSldID0gMDsNCiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX3RvKV0gPSBvd25lckluZGV4Ow0KICAgICAgICBPd25lckNoYW5nZWQoX2Zyb20sIF90byk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWRkT3duZXIoYWRkcmVzcyBfb3duZXIpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQogICAgICAgIGlmIChpc093bmVyKF9vd25lcikpIHJldHVybjsNCg0KICAgICAgICBjbGVhclBlbmRpbmcoKTsNCiAgICAgICAgaWYgKG1fbnVtT3duZXJzID49IGNfbWF4T3duZXJzKQ0KICAgICAgICAgICAgcmVvcmdhbml6ZU93bmVycygpOw0KICAgICAgICBpZiAobV9udW1Pd25lcnMgPj0gY19tYXhPd25lcnMpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIG1fbnVtT3duZXJzKys7DQogICAgICAgIG1fb3duZXJzW21fbnVtT3duZXJzXSA9IHVpbnQoX293bmVyKTsNCiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyKV0gPSBtX251bU93bmVyczsNCiAgICAgICAgT3duZXJBZGRlZChfb3duZXIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJlbW92ZU93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgew0KICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfb3duZXIpXTsNCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOw0KICAgICAgICBpZiAobV9yZXF1aXJlZCA+IG1fbnVtT3duZXJzIC0gMSkgcmV0dXJuOw0KDQogICAgICAgIG1fb3duZXJzW293bmVySW5kZXhdID0gMDsNCiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyKV0gPSAwOw0KICAgICAgICBjbGVhclBlbmRpbmcoKTsNCiAgICAgICAgcmVvcmdhbml6ZU93bmVycygpOyAvL21ha2Ugc3VyZSBtX251bU93bmVyIGlzIGVxdWFsIHRvIHRoZSBudW1iZXIgb2Ygb3duZXJzIGFuZCBhbHdheXMgcG9pbnRzIHRvIHRoZSBvcHRpbWFsIGZyZWUgc2xvdA0KICAgICAgICBPd25lclJlbW92ZWQoX293bmVyKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjaGFuZ2VSZXF1aXJlbWVudCh1aW50IF9uZXdSZXF1aXJlZCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgaWYgKF9uZXdSZXF1aXJlZCA+IG1fbnVtT3duZXJzKSByZXR1cm47DQogICAgICAgIG1fcmVxdWlyZWQgPSBfbmV3UmVxdWlyZWQ7DQogICAgICAgIGNsZWFyUGVuZGluZygpOw0KICAgICAgICBSZXF1aXJlbWVudENoYW5nZWQoX25ld1JlcXVpcmVkKTsNCiAgICB9DQoNCiAgICAvLyBHZXRzIGFuIG93bmVyIGJ5IDAtaW5kZXhlZCBwb3NpdGlvbiAodXNpbmcgbnVtT3duZXJzIGFzIHRoZSBjb3VudCkNCiAgICBmdW5jdGlvbiBnZXRPd25lcih1aW50IG93bmVySW5kZXgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsNCiAgICAgICAgcmV0dXJuIGFkZHJlc3MobV9vd25lcnNbb3duZXJJbmRleCArIDFdKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FkZHIpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgcmV0dXJuIG1fb3duZXJJbmRleFt1aW50KF9hZGRyKV0gPiAwOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGhhc0NvbmZpcm1lZChieXRlczMyIF9vcGVyYXRpb24sIGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIHZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOw0KICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfb3duZXIpXTsNCg0KICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBvd25lcg0KICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBiaXQgdG8gc2V0IGZvciB0aGlzIG93bmVyLg0KICAgICAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4Ow0KICAgICAgICByZXR1cm4gIShwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApOw0KICAgIH0NCg0KICAgIC8vIElOVEVSTkFMIE1FVEhPRFMNCg0KICAgIGZ1bmN0aW9uIGNvbmZpcm1BbmRDaGVjayhieXRlczMyIF9vcGVyYXRpb24pIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoYXQgaW5kZXggdGhlIHByZXNlbnQgc2VuZGVyIGlzOg0KICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChtc2cuc2VuZGVyKV07DQogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyDQogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsNCg0KICAgICAgICB2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsNCiAgICAgICAgLy8gaWYgd2UncmUgbm90IHlldCB3b3JraW5nIG9uIHRoaXMgb3BlcmF0aW9uLCBzd2l0Y2ggb3ZlciBhbmQgcmVzZXQgdGhlIGNvbmZpcm1hdGlvbiBzdGF0dXMuDQogICAgICAgIGlmIChwZW5kaW5nLnlldE5lZWRlZCA9PSAwKSB7DQogICAgICAgICAgICAvLyByZXNldCBjb3VudCBvZiBjb25maXJtYXRpb25zIG5lZWRlZC4NCiAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkID0gbV9yZXF1aXJlZDsNCiAgICAgICAgICAgIC8vIHJlc2V0IHdoaWNoIG93bmVycyBoYXZlIGNvbmZpcm1lZCAobm9uZSkgLSBzZXQgb3VyIGJpdG1hcCB0byAwLg0KICAgICAgICAgICAgcGVuZGluZy5vd25lcnNEb25lID0gMDsNCiAgICAgICAgICAgIHBlbmRpbmcuaW5kZXggPSBtX3BlbmRpbmdJbmRleC5sZW5ndGgrKzsNCiAgICAgICAgICAgIG1fcGVuZGluZ0luZGV4W3BlbmRpbmcuaW5kZXhdID0gX29wZXJhdGlvbjsNCiAgICAgICAgfQ0KICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIGJpdCB0byBzZXQgZm9yIHRoaXMgb3duZXIuDQogICAgICAgIHVpbnQgb3duZXJJbmRleEJpdCA9IDIqKm93bmVySW5kZXg7DQogICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSAodGhlIG1lc3NhZ2Ugc2VuZGVyKSBoYXZlbid0IGNvbmZpcm1lZCB0aGlzIG9wZXJhdGlvbiBwcmV2aW91c2x5Lg0KICAgICAgICBpZiAocGVuZGluZy5vd25lcnNEb25lICYgb3duZXJJbmRleEJpdCA9PSAwKSB7DQogICAgICAgICAgICBDb25maXJtYXRpb24obXNnLnNlbmRlciwgX29wZXJhdGlvbik7DQogICAgICAgICAgICAvLyBvayAtIGNoZWNrIGlmIGNvdW50IGlzIGVub3VnaCB0byBnbyBhaGVhZC4NCiAgICAgICAgICAgIGlmIChwZW5kaW5nLnlldE5lZWRlZCA8PSAxKSB7DQogICAgICAgICAgICAgICAgLy8gZW5vdWdoIGNvbmZpcm1hdGlvbnM6IHJlc2V0IGFuZCBydW4gaW50ZXJpb3IuDQogICAgICAgICAgICAgICAgZGVsZXRlIG1fcGVuZGluZ0luZGV4W21fcGVuZGluZ1tfb3BlcmF0aW9uXS5pbmRleF07DQogICAgICAgICAgICAgICAgZGVsZXRlIG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBub3QgZW5vdWdoOiByZWNvcmQgdGhhdCB0aGlzIG93bmVyIGluIHBhcnRpY3VsYXIgY29uZmlybWVkLg0KICAgICAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkLS07DQogICAgICAgICAgICAgICAgcGVuZGluZy5vd25lcnNEb25lIHw9IG93bmVySW5kZXhCaXQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiByZW9yZ2FuaXplT3duZXJzKCkgcHJpdmF0ZSB7DQogICAgICAgIHVpbnQgZnJlZSA9IDE7DQogICAgICAgIHdoaWxlIChmcmVlIDwgbV9udW1Pd25lcnMpDQogICAgICAgIHsNCiAgICAgICAgICAgIHdoaWxlIChmcmVlIDwgbV9udW1Pd25lcnMgJiYgbV9vd25lcnNbZnJlZV0gIT0gMCkgZnJlZSsrOw0KICAgICAgICAgICAgd2hpbGUgKG1fbnVtT3duZXJzID4gMSAmJiBtX293bmVyc1ttX251bU93bmVyc10gPT0gMCkgbV9udW1Pd25lcnMtLTsNCiAgICAgICAgICAgIGlmIChmcmVlIDwgbV9udW1Pd25lcnMgJiYgbV9vd25lcnNbbV9udW1Pd25lcnNdICE9IDAgJiYgbV9vd25lcnNbZnJlZV0gPT0gMCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBtX293bmVyc1tmcmVlXSA9IG1fb3duZXJzW21fbnVtT3duZXJzXTsNCiAgICAgICAgICAgICAgICBtX293bmVySW5kZXhbbV9vd25lcnNbZnJlZV1dID0gZnJlZTsNCiAgICAgICAgICAgICAgICBtX293bmVyc1ttX251bU93bmVyc10gPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2xlYXJQZW5kaW5nKCkgaW50ZXJuYWwgew0KICAgICAgICB1aW50IGxlbmd0aCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aDsNCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpDQogICAgICAgICAgICBpZiAobV9wZW5kaW5nSW5kZXhbaV0gIT0gMCkNCiAgICAgICAgICAgICAgICBkZWxldGUgbV9wZW5kaW5nW21fcGVuZGluZ0luZGV4W2ldXTsNCiAgICAgICAgZGVsZXRlIG1fcGVuZGluZ0luZGV4Ow0KICAgIH0NCg0KICAgCS8vIEZJRUxEUw0KDQogICAgLy8gdGhlIG51bWJlciBvZiBvd25lcnMgdGhhdCBtdXN0IGNvbmZpcm0gdGhlIHNhbWUgb3BlcmF0aW9uIGJlZm9yZSBpdCBpcyBydW4uDQogICAgdWludCBwdWJsaWMgbV9yZXF1aXJlZDsNCiAgICAvLyBwb2ludGVyIHVzZWQgdG8gZmluZCBhIGZyZWUgc2xvdCBpbiBtX293bmVycw0KICAgIHVpbnQgcHVibGljIG1fbnVtT3duZXJzOw0KDQogICAgLy8gbGlzdCBvZiBvd25lcnMNCiAgICB1aW50WzI1Nl0gbV9vd25lcnM7DQogICAgdWludCBjb25zdGFudCBjX21heE93bmVycyA9IDI1MDsNCiAgICAvLyBpbmRleCBvbiB0aGUgbGlzdCBvZiBvd25lcnMgdG8gYWxsb3cgcmV2ZXJzZSBsb29rdXANCiAgICBtYXBwaW5nKHVpbnQgPT4gdWludCkgbV9vd25lckluZGV4Ow0KICAgIC8vIHRoZSBvbmdvaW5nIG9wZXJhdGlvbnMuDQogICAgbWFwcGluZyhieXRlczMyID0+IFBlbmRpbmdTdGF0ZSkgbV9wZW5kaW5nOw0KICAgIGJ5dGVzMzJbXSBtX3BlbmRpbmdJbmRleDsNCn0NCg0KLy8gaW5oZXJpdGFibGUgInByb3BlcnR5IiBjb250cmFjdCB0aGF0IGVuYWJsZXMgbWV0aG9kcyB0byBiZSBwcm90ZWN0ZWQgYnkgcGxhY2luZyBhIGxpbmVhciBsaW1pdCAoc3BlY2lmaWFibGUpDQovLyBvbiBhIHBhcnRpY3VsYXIgcmVzb3VyY2UgcGVyIGNhbGVuZGFyIGRheS4gaXMgbXVsdGlvd25lZCB0byBhbGxvdyB0aGUgbGltaXQgdG8gYmUgYWx0ZXJlZC4gcmVzb3VyY2UgdGhhdCBtZXRob2QNCi8vIHVzZXMgaXMgc3BlY2lmaWVkIGluIHRoZSBtb2RpZmllci4NCmNvbnRyYWN0IGRheWxpbWl0IGlzIG11bHRpb3duZWQgew0KDQoJLy8gTU9ESUZJRVJTDQoNCiAgICAvLyBzaW1wbGUgbW9kaWZpZXIgZm9yIGRhaWx5IGxpbWl0Lg0KICAgIG1vZGlmaWVyIGxpbWl0ZWREYWlseSh1aW50IF92YWx1ZSkgew0KICAgICAgICBpZiAodW5kZXJMaW1pdChfdmFsdWUpKQ0KICAgICAgICAgICAgXzsNCiAgICB9DQoNCgkvLyBNRVRIT0RTDQoNCiAgICAvLyBjb25zdHJ1Y3RvciAtIHN0b3JlcyBpbml0aWFsIGRhaWx5IGxpbWl0IGFuZCByZWNvcmRzIHRoZSBwcmVzZW50IGRheSdzIGluZGV4Lg0KICAgIGZ1bmN0aW9uIGRheWxpbWl0KHVpbnQgX2xpbWl0KSB7DQogICAgICAgIG1fZGFpbHlMaW1pdCA9IF9saW1pdDsNCiAgICAgICAgbV9sYXN0RGF5ID0gdG9kYXkoKTsNCiAgICB9DQogICAgLy8gKHJlKXNldHMgdGhlIGRhaWx5IGxpbWl0LiBuZWVkcyBtYW55IG9mIHRoZSBvd25lcnMgdG8gY29uZmlybS4gZG9lc24ndCBhbHRlciB0aGUgYW1vdW50IGFscmVhZHkgc3BlbnQgdG9kYXkuDQogICAgZnVuY3Rpb24gc2V0RGFpbHlMaW1pdCh1aW50IF9uZXdMaW1pdCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgbV9kYWlseUxpbWl0ID0gX25ld0xpbWl0Ow0KICAgIH0NCiAgICAvLyByZXNldHMgdGhlIGFtb3VudCBhbHJlYWR5IHNwZW50IHRvZGF5LiBuZWVkcyBtYW55IG9mIHRoZSBvd25lcnMgdG8gY29uZmlybS4NCiAgICBmdW5jdGlvbiByZXNldFNwZW50VG9kYXkoKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgew0KICAgICAgICBtX3NwZW50VG9kYXkgPSAwOw0KICAgIH0NCg0KICAgIC8vIElOVEVSTkFMIE1FVEhPRFMNCg0KICAgIC8vIGNoZWNrcyB0byBzZWUgaWYgdGhlcmUgaXMgYXQgbGVhc3QgYF92YWx1ZWAgbGVmdCBmcm9tIHRoZSBkYWlseSBsaW1pdCB0b2RheS4gaWYgdGhlcmUgaXMsIHN1YnRyYWN0cyBpdCBhbmQNCiAgICAvLyByZXR1cm5zIHRydWUuIG90aGVyd2lzZSBqdXN0IHJldHVybnMgZmFsc2UuDQogICAgZnVuY3Rpb24gdW5kZXJMaW1pdCh1aW50IF92YWx1ZSkgaW50ZXJuYWwgb25seW93bmVyIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgLy8gcmVzZXQgdGhlIHNwZW5kIGxpbWl0IGlmIHdlJ3JlIG9uIGEgZGlmZmVyZW50IGRheSB0byBsYXN0IHRpbWUuDQogICAgICAgIC8qaWYgKHRvZGF5KCkgPiBtX2xhc3REYXkpIHsNCiAgICAgICAgICAgIG1fc3BlbnRUb2RheSA9IDA7DQogICAgICAgICAgICBtX2xhc3REYXkgPSB0b2RheSgpOw0KICAgICAgICB9DQogICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiB0aGVyZSdzIGVub3VnaCBsZWZ0IC0gaWYgc28sIHN1YnRyYWN0IGFuZCByZXR1cm4gdHJ1ZS4NCiAgICAgICAgLy8gb3ZlcmZsb3cgcHJvdGVjdGlvbiAgICAgICAgICAgICAgICAgICAgLy8gZGFpbHlMaW1pdCBjaGVjaw0KICAgICAgICBpZiAobV9zcGVudFRvZGF5ICsgX3ZhbHVlID49IG1fc3BlbnRUb2RheSAmJiBtX3NwZW50VG9kYXkgKyBfdmFsdWUgPD0gbV9kYWlseUxpbWl0KSB7DQogICAgICAgICAgICBtX3NwZW50VG9kYXkgKz0gX3ZhbHVlOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOyovDQogICAgICAgIHJldHVybiB0cnVlOyAvL1ZpbGxldGVzdA0KICAgIH0NCiAgICAvLyBkZXRlcm1pbmVzIHRvZGF5J3MgaW5kZXguDQogICAgZnVuY3Rpb24gdG9kYXkoKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsgcmV0dXJuIG5vdyAvIDEgZGF5czsgfQ0KDQoJLy8gRklFTERTDQoNCiAgICB1aW50IHB1YmxpYyBtX2RhaWx5TGltaXQ7DQogICAgdWludCBwdWJsaWMgbV9zcGVudFRvZGF5Ow0KICAgIHVpbnQgcHVibGljIG1fbGFzdERheTsNCn0NCg0KLy8gaW50ZXJmYWNlIGNvbnRyYWN0IGZvciBtdWx0aXNpZyBwcm94eSBjb250cmFjdHM7IHNlZSBiZWxvdyBmb3IgZG9jcy4NCmNvbnRyYWN0IG11bHRpc2lnIHsNCg0KCS8vIEVWRU5UUw0KDQogICAgLy8gbG9nZ2VkIGV2ZW50czoNCiAgICAvLyBGdW5kcyBoYXMgYXJyaXZlZCBpbnRvIHRoZSB3YWxsZXQgKHJlY29yZCBob3cgbXVjaCkuDQogICAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIF9mcm9tLCB1aW50IHZhbHVlKTsNCiAgICAvLyBTaW5nbGUgdHJhbnNhY3Rpb24gZ29pbmcgb3V0IG9mIHRoZSB3YWxsZXQgKHJlY29yZCB3aG8gc2lnbmVkIGZvciBpdCwgaG93IG11Y2gsIGFuZCB0byB3aG9tIGl0J3MgZ29pbmcpLg0KICAgIGV2ZW50IFNpbmdsZVRyYW5zYWN0KGFkZHJlc3Mgb3duZXIsIHVpbnQgdmFsdWUsIGFkZHJlc3MgdG8sIGJ5dGVzIGRhdGEpOw0KICAgIC8vIE11bHRpLXNpZyB0cmFuc2FjdGlvbiBnb2luZyBvdXQgb2YgdGhlIHdhbGxldCAocmVjb3JkIHdobyBzaWduZWQgZm9yIGl0IGxhc3QsIHRoZSBvcGVyYXRpb24gaGFzaCwgaG93IG11Y2gsIGFuZCB0byB3aG9tIGl0J3MgZ29pbmcpLg0KICAgIGV2ZW50IE11bHRpVHJhbnNhY3QoYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24sIHVpbnQgdmFsdWUsIGFkZHJlc3MgdG8sIGJ5dGVzIGRhdGEpOw0KICAgIC8vIENvbmZpcm1hdGlvbiBzdGlsbCBuZWVkZWQgZm9yIGEgdHJhbnNhY3Rpb24uDQogICAgZXZlbnQgQ29uZmlybWF0aW9uTmVlZGVkKGJ5dGVzMzIgb3BlcmF0aW9uLCBhZGRyZXNzIGluaXRpYXRvciwgdWludCB2YWx1ZSwgYWRkcmVzcyB0bywgYnl0ZXMgZGF0YSk7DQoNCiAgICAvLyBGVU5DVElPTlMNCg0KICAgIC8vIFRPRE86IGRvY3VtZW50DQogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIGV4dGVybmFsOw0KICAgIGZ1bmN0aW9uIGV4ZWN1dGUoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgZXh0ZXJuYWwgcmV0dXJucyAoYnl0ZXMzMik7DQogICAgZnVuY3Rpb24gY29uZmlybShieXRlczMyIF9oKSByZXR1cm5zIChib29sKTsNCn0NCg0KLy8gdXNhZ2U6DQovLyBieXRlczMyIGggPSBXYWxsZXQodykuZnJvbShvbmVPd25lcikudHJhbnNhY3QodG8sIHZhbHVlLCBkYXRhKTsNCi8vIFdhbGxldCh3KS5mcm9tKGFub3RoZXJPd25lcikuY29uZmlybShoKTsNCmNvbnRyYWN0IFdhbGxldCBpcyBtdWx0aXNpZywgbXVsdGlvd25lZCwgZGF5bGltaXQgew0KDQoJLy8gVFlQRVMNCg0KICAgIC8vIFRyYW5zYWN0aW9uIHN0cnVjdHVyZSB0byByZW1lbWJlciBkZXRhaWxzIG9mIHRyYW5zYWN0aW9uIGxlc3QgaXQgbmVlZCBiZSBzYXZlZCBmb3IgYSBsYXRlciBjYWxsLg0KICAgIHN0cnVjdCBUcmFuc2FjdGlvbiB7DQogICAgICAgIGFkZHJlc3MgdG87DQogICAgICAgIHVpbnQgdmFsdWU7DQogICAgICAgIGJ5dGVzIGRhdGE7DQogICAgfQ0KDQogICAgLy8gTUVUSE9EUw0KDQogICAgLy8gY29uc3RydWN0b3IgLSBqdXN0IHBhc3Mgb24gdGhlIG93bmVyIGFycmF5IHRvIHRoZSBtdWx0aW93bmVkIGFuZA0KICAgIC8vIHRoZSBsaW1pdCB0byBkYXlsaW1pdA0KICAgIGZ1bmN0aW9uIFdhbGxldChhZGRyZXNzW10gX293bmVycywgdWludCBfcmVxdWlyZWQsIHVpbnQgX2RheWxpbWl0KQ0KICAgICAgICAgICAgbXVsdGlvd25lZChfb3duZXJzLCBfcmVxdWlyZWQpIGRheWxpbWl0KF9kYXlsaW1pdCkgew0KICAgIH0NCg0KICAgIC8vIGtpbGxzIHRoZSBjb250cmFjdCBzZW5kaW5nIGV2ZXJ5dGhpbmcgdG8gYF90b2AuDQogICAgZnVuY3Rpb24ga2lsbChhZGRyZXNzIF90bykgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgc3VpY2lkZShfdG8pOw0KICAgIH0NCg0KICAgIC8vIGdldHMgY2FsbGVkIHdoZW4gbm8gb3RoZXIgZnVuY3Rpb24gbWF0Y2hlcw0KICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7DQogICAgICAgIC8vIGp1c3QgYmVpbmcgc2VudCBzb21lIGNhc2g/DQogICAgICAgIGlmIChtc2cudmFsdWUgPiAwKQ0KICAgICAgICAgICAgRGVwb3NpdChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOw0KICAgIH0NCg0KICAgIC8vIE91dHNpZGUtdmlzaWJsZSB0cmFuc2FjdCBlbnRyeSBwb2ludC4gRXhlY3V0ZXMgdHJhbnNhY3Rpb24gaW1tZWRpYXRlbHkgaWYgYmVsb3cgZGFpbHkgc3BlbmQgbGltaXQuDQogICAgLy8gSWYgbm90LCBnb2VzIGludG8gbXVsdGlzaWcgcHJvY2Vzcy4gV2UgcHJvdmlkZSBhIGhhc2ggb24gcmV0dXJuIHRvIGFsbG93IHRoZSBzZW5kZXIgdG8gcHJvdmlkZQ0KICAgIC8vIHNob3J0Y3V0cyBmb3IgdGhlIG90aGVyIGNvbmZpcm1hdGlvbnMgKGFsbG93aW5nIHRoZW0gdG8gYXZvaWQgcmVwbGljYXRpbmcgdGhlIF90bywgX3ZhbHVlDQogICAgLy8gYW5kIF9kYXRhIGFyZ3VtZW50cykuIFRoZXkgc3RpbGwgZ2V0IHRoZSBvcHRpb24gb2YgdXNpbmcgdGhlbSBpZiB0aGV5IHdhbnQsIGFueXdheXMuDQogICAgZnVuY3Rpb24gZXhlY3V0ZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBleHRlcm5hbCBvbmx5b3duZXIgcmV0dXJucyAoYnl0ZXMzMiBfcikgew0KICAgICAgICAvLyBmaXJzdCwgdGFrZSB0aGUgb3Bwb3J0dW5pdHkgdG8gY2hlY2sgdGhhdCB3ZSdyZSB1bmRlciB0aGUgZGFpbHkgbGltaXQuDQogICAgICAgIGlmICh1bmRlckxpbWl0KF92YWx1ZSkpIHsNCiAgICAgICAgICAgIFNpbmdsZVRyYW5zYWN0KG1zZy5zZW5kZXIsIF92YWx1ZSwgX3RvLCBfZGF0YSk7DQogICAgICAgICAgICAvLyB5ZXMgLSBqdXN0IGV4ZWN1dGUgdGhlIGNhbGwuDQogICAgICAgICAgICBfdG8uY2FsbC52YWx1ZShfdmFsdWUpKF9kYXRhKTsNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9DQogICAgICAgIC8vIGRldGVybWluZSBvdXIgb3BlcmF0aW9uIGhhc2guDQogICAgICAgIF9yID0gc2hhMyhtc2cuZGF0YSwgYmxvY2subnVtYmVyKTsNCiAgICAgICAgaWYgKCFjb25maXJtKF9yKSAmJiBtX3R4c1tfcl0udG8gPT0gMCkgew0KICAgICAgICAgICAgbV90eHNbX3JdLnRvID0gX3RvOw0KICAgICAgICAgICAgbV90eHNbX3JdLnZhbHVlID0gX3ZhbHVlOw0KICAgICAgICAgICAgbV90eHNbX3JdLmRhdGEgPSBfZGF0YTsNCiAgICAgICAgICAgIENvbmZpcm1hdGlvbk5lZWRlZChfciwgbXNnLnNlbmRlciwgX3ZhbHVlLCBfdG8sIF9kYXRhKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIGNvbmZpcm0gYSB0cmFuc2FjdGlvbiB0aHJvdWdoIGp1c3QgdGhlIGhhc2guIHdlIHVzZSB0aGUgcHJldmlvdXMgdHJhbnNhY3Rpb25zIG1hcCwgbV90eHMsIGluIG9yZGVyDQogICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBib2R5IG9mIHRoZSB0cmFuc2FjdGlvbiBmcm9tIHRoZSBoYXNoIHByb3ZpZGVkLg0KICAgIGZ1bmN0aW9uIGNvbmZpcm0oYnl0ZXMzMiBfaCkgb25seW1hbnlvd25lcnMoX2gpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgaWYgKG1fdHhzW19oXS50byAhPSAwKSB7DQogICAgICAgICAgICBtX3R4c1tfaF0udG8uY2FsbC52YWx1ZShtX3R4c1tfaF0udmFsdWUpKG1fdHhzW19oXS5kYXRhKTsNCiAgICAgICAgICAgIE11bHRpVHJhbnNhY3QobXNnLnNlbmRlciwgX2gsIG1fdHhzW19oXS52YWx1ZSwgbV90eHNbX2hdLnRvLCBtX3R4c1tfaF0uZGF0YSk7DQogICAgICAgICAgICBkZWxldGUgbV90eHNbX2hdOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBJTlRFUk5BTCBNRVRIT0RTDQoNCiAgICBmdW5jdGlvbiBjbGVhclBlbmRpbmcoKSBpbnRlcm5hbCB7DQogICAgICAgIHVpbnQgbGVuZ3RoID0gbV9wZW5kaW5nSW5kZXgubGVuZ3RoOw0KICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkNCiAgICAgICAgICAgIGRlbGV0ZSBtX3R4c1ttX3BlbmRpbmdJbmRleFtpXV07DQogICAgICAgIHN1cGVyLmNsZWFyUGVuZGluZygpOw0KICAgIH0NCg0KCS8vIEZJRUxEUw0KDQogICAgLy8gcGVuZGluZyB0cmFuc2FjdGlvbnMgd2UgaGF2ZSBhdCBwcmVzZW50Lg0KICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gVHJhbnNhY3Rpb24pIG1fdHhzOw0KfQ=='