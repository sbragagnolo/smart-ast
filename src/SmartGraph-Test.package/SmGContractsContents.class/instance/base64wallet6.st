base 64 content
base64wallet6
	^'LyoqDQogKiBUaGlzIGlzIGEgbXVsdGlzaWcgd2FsbGV0IGJhc2VkIG9uIEdhdidzIG9yaWdpbmFsIGltcGxlbWVudGF0aW9uLCBkYWlseSB3aXRoZHJhdyBsaW1pdHMgcmVtb3ZlZC4NCiAqDQogKg0KICogRm9yIG90aGVyIG11bHRpc2lnIHdhbGxldCBpbXBsZW1lbnRhdGlvbnMsIHNlZSBodHRwczovL2Jsb2cuZ25vc2lzLnBtL3JlbGVhc2Utb2YtbmV3LW11bHRpc2lnLXdhbGxldC01OWI2ODExZjdlZGMNCiAqLw0KDQovLyBNdWx0aS1zaWcsIGRhaWx5LWxpbWl0ZWQgYWNjb3VudCBwcm94eS93YWxsZXQuDQovLyBAYXV0aG9yczoNCi8vIEdhdiBXb29kIDxnQGV0aGRldi5jb20+DQovLyBpbmhlcml0YWJsZSAicHJvcGVydHkiIGNvbnRyYWN0IHRoYXQgZW5hYmxlcyBtZXRob2RzIHRvIGJlIHByb3RlY3RlZCBieSByZXF1aXJpbmcgdGhlIGFjcXVpZXNjZW5jZSBvZiBlaXRoZXIgYQ0KLy8gc2luZ2xlLCBvciwgY3J1Y2lhbGx5LCBlYWNoIG9mIGEgbnVtYmVyIG9mLCBkZXNpZ25hdGVkIG93bmVycy4NCi8vIHVzYWdlOg0KLy8gdXNlIG1vZGlmaWVycyBvbmx5b3duZXIgKGp1c3Qgb3duIG93bmVkKSBvciBvbmx5bWFueW93bmVycyhoYXNoKSwgd2hlcmVieSB0aGUgc2FtZSBoYXNoIG11c3QgYmUgcHJvdmlkZWQgYnkNCi8vIHNvbWUgbnVtYmVyIChzcGVjaWZpZWQgaW4gY29uc3RydWN0b3IpIG9mIHRoZSBzZXQgb2Ygb3duZXJzIChzcGVjaWZpZWQgaW4gdGhlIGNvbnN0cnVjdG9yLCBtb2RpZmlhYmxlKSBiZWZvcmUgdGhlDQovLyBpbnRlcmlvciBpcyBleGVjdXRlZC4NCmNvbnRyYWN0IG11bHRpb3duZWQgew0KDQoJLy8gVFlQRVMNCg0KICAgIC8vIHN0cnVjdCBmb3IgdGhlIHN0YXR1cyBvZiBhIHBlbmRpbmcgb3BlcmF0aW9uLg0KICAgIHN0cnVjdCBQZW5kaW5nU3RhdGUgew0KICAgICAgICB1aW50IHlldE5lZWRlZDsNCiAgICAgICAgdWludCBvd25lcnNEb25lOw0KICAgICAgICB1aW50IGluZGV4Ow0KICAgIH0NCg0KCS8vIEVWRU5UUw0KDQogICAgLy8gdGhpcyBjb250cmFjdCBvbmx5IGhhcyBzaXggdHlwZXMgb2YgZXZlbnRzOiBpdCBjYW4gYWNjZXB0IGEgY29uZmlybWF0aW9uLCBpbiB3aGljaCBjYXNlDQogICAgLy8gd2UgcmVjb3JkIG93bmVyIGFuZCBvcGVyYXRpb24gKGhhc2gpIGFsb25nc2lkZSBpdC4NCiAgICBldmVudCBDb25maXJtYXRpb24oYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24pOw0KICAgIGV2ZW50IFJldm9rZShhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbik7DQogICAgLy8gc29tZSBvdGhlcnMgYXJlIGluIHRoZSBjYXNlIG9mIGFuIG93bmVyIGNoYW5naW5nLg0KICAgIGV2ZW50IE93bmVyQ2hhbmdlZChhZGRyZXNzIG9sZE93bmVyLCBhZGRyZXNzIG5ld093bmVyKTsNCiAgICBldmVudCBPd25lckFkZGVkKGFkZHJlc3MgbmV3T3duZXIpOw0KICAgIGV2ZW50IE93bmVyUmVtb3ZlZChhZGRyZXNzIG9sZE93bmVyKTsNCiAgICAvLyB0aGUgbGFzdCBvbmUgaXMgZW1pdHRlZCBpZiB0aGUgcmVxdWlyZWQgc2lnbmF0dXJlcyBjaGFuZ2UNCiAgICBldmVudCBSZXF1aXJlbWVudENoYW5nZWQodWludCBuZXdSZXF1aXJlbWVudCk7DQoNCgkvLyBNT0RJRklFUlMNCg0KICAgIC8vIHNpbXBsZSBzaW5nbGUtc2lnIGZ1bmN0aW9uIG1vZGlmaWVyLg0KICAgIG1vZGlmaWVyIG9ubHlvd25lciB7DQogICAgICAgIGlmIChpc093bmVyKG1zZy5zZW5kZXIpKQ0KICAgICAgICAgICAgXzsNCiAgICB9DQogICAgLy8gbXVsdGktc2lnIGZ1bmN0aW9uIG1vZGlmaWVyOiB0aGUgb3BlcmF0aW9uIG11c3QgaGF2ZSBhbiBpbnRyaW5zaWMgaGFzaCBpbiBvcmRlcg0KICAgIC8vIHRoYXQgbGF0ZXIgYXR0ZW1wdHMgY2FuIGJlIHJlYWxpc2VkIGFzIHRoZSBzYW1lIHVuZGVybHlpbmcgb3BlcmF0aW9uIGFuZA0KICAgIC8vIHRodXMgY291bnQgYXMgY29uZmlybWF0aW9ucy4NCiAgICBtb2RpZmllciBvbmx5bWFueW93bmVycyhieXRlczMyIF9vcGVyYXRpb24pIHsNCiAgICAgICAgaWYgKGNvbmZpcm1BbmRDaGVjayhfb3BlcmF0aW9uKSkNCiAgICAgICAgICAgIF87DQogICAgfQ0KDQoJLy8gTUVUSE9EUw0KDQogICAgLy8gY29uc3RydWN0b3IgaXMgZ2l2ZW4gbnVtYmVyIG9mIHNpZ3MgcmVxdWlyZWQgdG8gZG8gcHJvdGVjdGVkICJvbmx5bWFueW93bmVycyIgdHJhbnNhY3Rpb25zDQogICAgLy8gYXMgd2VsbCBhcyB0aGUgc2VsZWN0aW9uIG9mIGFkZHJlc3NlcyBjYXBhYmxlIG9mIGNvbmZpcm1pbmcgdGhlbS4NCiAgICBmdW5jdGlvbiBtdWx0aW93bmVkKGFkZHJlc3NbXSBfb3duZXJzLCB1aW50IF9yZXF1aXJlZCkgew0KICAgICAgICBtX251bU93bmVycyA9IF9vd25lcnMubGVuZ3RoICsgMTsNCiAgICAgICAgbV9vd25lcnNbMV0gPSB1aW50KG1zZy5zZW5kZXIpOw0KICAgICAgICBtX293bmVySW5kZXhbdWludChtc2cuc2VuZGVyKV0gPSAxOw0KICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfb3duZXJzLmxlbmd0aDsgKytpKQ0KICAgICAgICB7DQogICAgICAgICAgICBtX293bmVyc1syICsgaV0gPSB1aW50KF9vd25lcnNbaV0pOw0KICAgICAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyc1tpXSldID0gMiArIGk7DQogICAgICAgIH0NCiAgICAgICAgbV9yZXF1aXJlZCA9IF9yZXF1aXJlZDsNCiAgICB9DQoNCiAgICAvLyBSZXZva2VzIGEgcHJpb3IgY29uZmlybWF0aW9uIG9mIHRoZSBnaXZlbiBvcGVyYXRpb24NCiAgICBmdW5jdGlvbiByZXZva2UoYnl0ZXMzMiBfb3BlcmF0aW9uKSBleHRlcm5hbCB7DQogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXTsNCiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXINCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOw0KICAgICAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4Ow0KICAgICAgICB2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsNCiAgICAgICAgaWYgKHBlbmRpbmcub3duZXJzRG9uZSAmIG93bmVySW5kZXhCaXQgPiAwKSB7DQogICAgICAgICAgICBwZW5kaW5nLnlldE5lZWRlZCsrOw0KICAgICAgICAgICAgcGVuZGluZy5vd25lcnNEb25lIC09IG93bmVySW5kZXhCaXQ7DQogICAgICAgICAgICBSZXZva2UobXNnLnNlbmRlciwgX29wZXJhdGlvbik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBSZXBsYWNlcyBhbiBvd25lciBgX2Zyb21gIHdpdGggYW5vdGhlciBgX3RvYC4NCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgaWYgKGlzT3duZXIoX3RvKSkgcmV0dXJuOw0KICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfZnJvbSldOw0KICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm47DQoNCiAgICAgICAgY2xlYXJQZW5kaW5nKCk7DQogICAgICAgIG1fb3duZXJzW293bmVySW5kZXhdID0gdWludChfdG8pOw0KICAgICAgICBtX293bmVySW5kZXhbdWludChfZnJvbSldID0gMDsNCiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX3RvKV0gPSBvd25lckluZGV4Ow0KICAgICAgICBPd25lckNoYW5nZWQoX2Zyb20sIF90byk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWRkT3duZXIoYWRkcmVzcyBfb3duZXIpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQogICAgICAgIGlmIChpc093bmVyKF9vd25lcikpIHJldHVybjsNCg0KICAgICAgICBjbGVhclBlbmRpbmcoKTsNCiAgICAgICAgaWYgKG1fbnVtT3duZXJzID49IGNfbWF4T3duZXJzKQ0KICAgICAgICAgICAgcmVvcmdhbml6ZU93bmVycygpOw0KICAgICAgICBpZiAobV9udW1Pd25lcnMgPj0gY19tYXhPd25lcnMpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIG1fbnVtT3duZXJzKys7DQogICAgICAgIG1fb3duZXJzW21fbnVtT3duZXJzXSA9IHVpbnQoX293bmVyKTsNCiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyKV0gPSBtX251bU93bmVyczsNCiAgICAgICAgT3duZXJBZGRlZChfb3duZXIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJlbW92ZU93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgew0KICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfb3duZXIpXTsNCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOw0KICAgICAgICBpZiAobV9yZXF1aXJlZCA+IG1fbnVtT3duZXJzIC0gMSkgcmV0dXJuOw0KDQogICAgICAgIG1fb3duZXJzW293bmVySW5kZXhdID0gMDsNCiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyKV0gPSAwOw0KICAgICAgICBjbGVhclBlbmRpbmcoKTsNCiAgICAgICAgcmVvcmdhbml6ZU93bmVycygpOyAvL21ha2Ugc3VyZSBtX251bU93bmVyIGlzIGVxdWFsIHRvIHRoZSBudW1iZXIgb2Ygb3duZXJzIGFuZCBhbHdheXMgcG9pbnRzIHRvIHRoZSBvcHRpbWFsIGZyZWUgc2xvdA0KICAgICAgICBPd25lclJlbW92ZWQoX293bmVyKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjaGFuZ2VSZXF1aXJlbWVudCh1aW50IF9uZXdSZXF1aXJlZCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgaWYgKF9uZXdSZXF1aXJlZCA+IG1fbnVtT3duZXJzKSByZXR1cm47DQogICAgICAgIG1fcmVxdWlyZWQgPSBfbmV3UmVxdWlyZWQ7DQogICAgICAgIGNsZWFyUGVuZGluZygpOw0KICAgICAgICBSZXF1aXJlbWVudENoYW5nZWQoX25ld1JlcXVpcmVkKTsNCiAgICB9DQoNCiAgICAvLyBHZXRzIGFuIG93bmVyIGJ5IDAtaW5kZXhlZCBwb3NpdGlvbiAodXNpbmcgbnVtT3duZXJzIGFzIHRoZSBjb3VudCkNCiAgICBmdW5jdGlvbiBnZXRPd25lcih1aW50IG93bmVySW5kZXgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsNCiAgICAgICAgcmV0dXJuIGFkZHJlc3MobV9vd25lcnNbb3duZXJJbmRleCArIDFdKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FkZHIpIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgcmV0dXJuIG1fb3duZXJJbmRleFt1aW50KF9hZGRyKV0gPiAwOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGhhc0NvbmZpcm1lZChieXRlczMyIF9vcGVyYXRpb24sIGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7DQogICAgICAgIHZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOw0KICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfb3duZXIpXTsNCg0KICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBvd25lcg0KICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBiaXQgdG8gc2V0IGZvciB0aGlzIG93bmVyLg0KICAgICAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4Ow0KICAgICAgICByZXR1cm4gIShwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApOw0KICAgIH0NCg0KICAgIC8vIElOVEVSTkFMIE1FVEhPRFMNCg0KICAgIGZ1bmN0aW9uIGNvbmZpcm1BbmRDaGVjayhieXRlczMyIF9vcGVyYXRpb24pIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoYXQgaW5kZXggdGhlIHByZXNlbnQgc2VuZGVyIGlzOg0KICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChtc2cuc2VuZGVyKV07DQogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyDQogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsNCg0KICAgICAgICB2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsNCiAgICAgICAgLy8gaWYgd2UncmUgbm90IHlldCB3b3JraW5nIG9uIHRoaXMgb3BlcmF0aW9uLCBzd2l0Y2ggb3ZlciBhbmQgcmVzZXQgdGhlIGNvbmZpcm1hdGlvbiBzdGF0dXMuDQogICAgICAgIGlmIChwZW5kaW5nLnlldE5lZWRlZCA9PSAwKSB7DQogICAgICAgICAgICAvLyByZXNldCBjb3VudCBvZiBjb25maXJtYXRpb25zIG5lZWRlZC4NCiAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkID0gbV9yZXF1aXJlZDsNCiAgICAgICAgICAgIC8vIHJlc2V0IHdoaWNoIG93bmVycyBoYXZlIGNvbmZpcm1lZCAobm9uZSkgLSBzZXQgb3VyIGJpdG1hcCB0byAwLg0KICAgICAgICAgICAgcGVuZGluZy5vd25lcnNEb25lID0gMDsNCiAgICAgICAgICAgIHBlbmRpbmcuaW5kZXggPSBtX3BlbmRpbmdJbmRleC5sZW5ndGgrKzsNCiAgICAgICAgICAgIG1fcGVuZGluZ0luZGV4W3BlbmRpbmcuaW5kZXhdID0gX29wZXJhdGlvbjsNCiAgICAgICAgfQ0KICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIGJpdCB0byBzZXQgZm9yIHRoaXMgb3duZXIuDQogICAgICAgIHVpbnQgb3duZXJJbmRleEJpdCA9IDIqKm93bmVySW5kZXg7DQogICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSAodGhlIG1lc3NhZ2Ugc2VuZGVyKSBoYXZlbid0IGNvbmZpcm1lZCB0aGlzIG9wZXJhdGlvbiBwcmV2aW91c2x5Lg0KICAgICAgICBpZiAocGVuZGluZy5vd25lcnNEb25lICYgb3duZXJJbmRleEJpdCA9PSAwKSB7DQogICAgICAgICAgICBDb25maXJtYXRpb24obXNnLnNlbmRlciwgX29wZXJhdGlvbik7DQogICAgICAgICAgICAvLyBvayAtIGNoZWNrIGlmIGNvdW50IGlzIGVub3VnaCB0byBnbyBhaGVhZC4NCiAgICAgICAgICAgIGlmIChwZW5kaW5nLnlldE5lZWRlZCA8PSAxKSB7DQogICAgICAgICAgICAgICAgLy8gZW5vdWdoIGNvbmZpcm1hdGlvbnM6IHJlc2V0IGFuZCBydW4gaW50ZXJpb3IuDQogICAgICAgICAgICAgICAgZGVsZXRlIG1fcGVuZGluZ0luZGV4W21fcGVuZGluZ1tfb3BlcmF0aW9uXS5pbmRleF07DQogICAgICAgICAgICAgICAgZGVsZXRlIG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBub3QgZW5vdWdoOiByZWNvcmQgdGhhdCB0aGlzIG93bmVyIGluIHBhcnRpY3VsYXIgY29uZmlybWVkLg0KICAgICAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkLS07DQogICAgICAgICAgICAgICAgcGVuZGluZy5vd25lcnNEb25lIHw9IG93bmVySW5kZXhCaXQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiByZW9yZ2FuaXplT3duZXJzKCkgcHJpdmF0ZSB7DQogICAgICAgIHVpbnQgZnJlZSA9IDE7DQogICAgICAgIHdoaWxlIChmcmVlIDwgbV9udW1Pd25lcnMpDQogICAgICAgIHsNCiAgICAgICAgICAgIHdoaWxlIChmcmVlIDwgbV9udW1Pd25lcnMgJiYgbV9vd25lcnNbZnJlZV0gIT0gMCkgZnJlZSsrOw0KICAgICAgICAgICAgd2hpbGUgKG1fbnVtT3duZXJzID4gMSAmJiBtX293bmVyc1ttX251bU93bmVyc10gPT0gMCkgbV9udW1Pd25lcnMtLTsNCiAgICAgICAgICAgIGlmIChmcmVlIDwgbV9udW1Pd25lcnMgJiYgbV9vd25lcnNbbV9udW1Pd25lcnNdICE9IDAgJiYgbV9vd25lcnNbZnJlZV0gPT0gMCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBtX293bmVyc1tmcmVlXSA9IG1fb3duZXJzW21fbnVtT3duZXJzXTsNCiAgICAgICAgICAgICAgICBtX293bmVySW5kZXhbbV9vd25lcnNbZnJlZV1dID0gZnJlZTsNCiAgICAgICAgICAgICAgICBtX293bmVyc1ttX251bU93bmVyc10gPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2xlYXJQZW5kaW5nKCkgaW50ZXJuYWwgew0KICAgICAgICB1aW50IGxlbmd0aCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aDsNCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpDQogICAgICAgICAgICBpZiAobV9wZW5kaW5nSW5kZXhbaV0gIT0gMCkNCiAgICAgICAgICAgICAgICBkZWxldGUgbV9wZW5kaW5nW21fcGVuZGluZ0luZGV4W2ldXTsNCiAgICAgICAgZGVsZXRlIG1fcGVuZGluZ0luZGV4Ow0KICAgIH0NCg0KICAgCS8vIEZJRUxEUw0KDQogICAgLy8gdGhlIG51bWJlciBvZiBvd25lcnMgdGhhdCBtdXN0IGNvbmZpcm0gdGhlIHNhbWUgb3BlcmF0aW9uIGJlZm9yZSBpdCBpcyBydW4uDQogICAgdWludCBwdWJsaWMgbV9yZXF1aXJlZDsNCiAgICAvLyBwb2ludGVyIHVzZWQgdG8gZmluZCBhIGZyZWUgc2xvdCBpbiBtX293bmVycw0KICAgIHVpbnQgcHVibGljIG1fbnVtT3duZXJzOw0KDQogICAgLy8gbGlzdCBvZiBvd25lcnMNCiAgICB1aW50WzI1Nl0gbV9vd25lcnM7DQogICAgdWludCBjb25zdGFudCBjX21heE93bmVycyA9IDI1MDsNCiAgICAvLyBpbmRleCBvbiB0aGUgbGlzdCBvZiBvd25lcnMgdG8gYWxsb3cgcmV2ZXJzZSBsb29rdXANCiAgICBtYXBwaW5nKHVpbnQgPT4gdWludCkgbV9vd25lckluZGV4Ow0KICAgIC8vIHRoZSBvbmdvaW5nIG9wZXJhdGlvbnMuDQogICAgbWFwcGluZyhieXRlczMyID0+IFBlbmRpbmdTdGF0ZSkgbV9wZW5kaW5nOw0KICAgIGJ5dGVzMzJbXSBtX3BlbmRpbmdJbmRleDsNCn0NCg0KLy8gaW5oZXJpdGFibGUgInByb3BlcnR5IiBjb250cmFjdCB0aGF0IGVuYWJsZXMgbWV0aG9kcyB0byBiZSBwcm90ZWN0ZWQgYnkgcGxhY2luZyBhIGxpbmVhciBsaW1pdCAoc3BlY2lmaWFibGUpDQovLyBvbiBhIHBhcnRpY3VsYXIgcmVzb3VyY2UgcGVyIGNhbGVuZGFyIGRheS4gaXMgbXVsdGlvd25lZCB0byBhbGxvdyB0aGUgbGltaXQgdG8gYmUgYWx0ZXJlZC4gcmVzb3VyY2UgdGhhdCBtZXRob2QNCi8vIHVzZXMgaXMgc3BlY2lmaWVkIGluIHRoZSBtb2RpZmllci4NCmNvbnRyYWN0IGRheWxpbWl0IGlzIG11bHRpb3duZWQgew0KDQoJLy8gTU9ESUZJRVJTDQoNCiAgICAvLyBzaW1wbGUgbW9kaWZpZXIgZm9yIGRhaWx5IGxpbWl0Lg0KICAgIG1vZGlmaWVyIGxpbWl0ZWREYWlseSh1aW50IF92YWx1ZSkgew0KICAgICAgICBpZiAodW5kZXJMaW1pdChfdmFsdWUpKQ0KICAgICAgICAgICAgXzsNCiAgICB9DQoNCgkvLyBNRVRIT0RTDQoNCiAgICAvLyBjb25zdHJ1Y3RvciAtIHN0b3JlcyBpbml0aWFsIGRhaWx5IGxpbWl0IGFuZCByZWNvcmRzIHRoZSBwcmVzZW50IGRheSdzIGluZGV4Lg0KICAgIGZ1bmN0aW9uIGRheWxpbWl0KHVpbnQgX2xpbWl0KSB7DQogICAgICAgIG1fZGFpbHlMaW1pdCA9IF9saW1pdDsNCiAgICAgICAgbV9sYXN0RGF5ID0gdG9kYXkoKTsNCiAgICB9DQogICAgLy8gKHJlKXNldHMgdGhlIGRhaWx5IGxpbWl0LiBuZWVkcyBtYW55IG9mIHRoZSBvd25lcnMgdG8gY29uZmlybS4gZG9lc24ndCBhbHRlciB0aGUgYW1vdW50IGFscmVhZHkgc3BlbnQgdG9kYXkuDQogICAgZnVuY3Rpb24gc2V0RGFpbHlMaW1pdCh1aW50IF9uZXdMaW1pdCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsNCiAgICAgICAgbV9kYWlseUxpbWl0ID0gX25ld0xpbWl0Ow0KICAgIH0NCiAgICAvLyByZXNldHMgdGhlIGFtb3VudCBhbHJlYWR5IHNwZW50IHRvZGF5LiBuZWVkcyBtYW55IG9mIHRoZSBvd25lcnMgdG8gY29uZmlybS4NCiAgICBmdW5jdGlvbiByZXNldFNwZW50VG9kYXkoKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgew0KICAgICAgICBtX3NwZW50VG9kYXkgPSAwOw0KICAgIH0NCg0KICAgIC8vIElOVEVSTkFMIE1FVEhPRFMNCg0KICAgIC8vIGNoZWNrcyB0byBzZWUgaWYgdGhlcmUgaXMgYXQgbGVhc3QgYF92YWx1ZWAgbGVmdCBmcm9tIHRoZSBkYWlseSBsaW1pdCB0b2RheS4gaWYgdGhlcmUgaXMsIHN1YnRyYWN0cyBpdCBhbmQNCiAgICAvLyByZXR1cm5zIHRydWUuIG90aGVyd2lzZSBqdXN0IHJldHVybnMgZmFsc2UuDQogICAgZnVuY3Rpb24gdW5kZXJMaW1pdCh1aW50IF92YWx1ZSkgaW50ZXJuYWwgb25seW93bmVyIHJldHVybnMgKGJvb2wpIHsNCiAgICAgICAgLy8gcmVzZXQgdGhlIHNwZW5kIGxpbWl0IGlmIHdlJ3JlIG9uIGEgZGlmZmVyZW50IGRheSB0byBsYXN0IHRpbWUuDQogICAgICAgIC8qaWYgKHRvZGF5KCkgPiBtX2xhc3REYXkpIHsNCiAgICAgICAgICAgIG1fc3BlbnRUb2RheSA9IDA7DQogICAgICAgICAgICBtX2xhc3REYXkgPSB0b2RheSgpOw0KICAgICAgICB9DQogICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiB0aGVyZSdzIGVub3VnaCBsZWZ0IC0gaWYgc28sIHN1YnRyYWN0IGFuZCByZXR1cm4gdHJ1ZS4NCiAgICAgICAgLy8gb3ZlcmZsb3cgcHJvdGVjdGlvbiAgICAgICAgICAgICAgICAgICAgLy8gZGFpbHlMaW1pdCBjaGVjaw0KICAgICAgICBpZiAobV9zcGVudFRvZGF5ICsgX3ZhbHVlID49IG1fc3BlbnRUb2RheSAmJiBtX3NwZW50VG9kYXkgKyBfdmFsdWUgPD0gbV9kYWlseUxpbWl0KSB7DQogICAgICAgICAgICBtX3NwZW50VG9kYXkgKz0gX3ZhbHVlOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOyovDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQogICAgLy8gZGV0ZXJtaW5lcyB0b2RheSdzIGluZGV4Lg0KICAgIGZ1bmN0aW9uIHRvZGF5KCkgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7IHJldHVybiBub3cgLyAxIGRheXM7IH0NCg0KCS8vIEZJRUxEUw0KDQogICAgdWludCBwdWJsaWMgbV9kYWlseUxpbWl0Ow0KICAgIHVpbnQgcHVibGljIG1fc3BlbnRUb2RheTsNCiAgICB1aW50IHB1YmxpYyBtX2xhc3REYXk7DQp9DQoNCi8vIGludGVyZmFjZSBjb250cmFjdCBmb3IgbXVsdGlzaWcgcHJveHkgY29udHJhY3RzOyBzZWUgYmVsb3cgZm9yIGRvY3MuDQpjb250cmFjdCBtdWx0aXNpZyB7DQoNCgkvLyBFVkVOVFMNCg0KICAgIC8vIGxvZ2dlZCBldmVudHM6DQogICAgLy8gRnVuZHMgaGFzIGFycml2ZWQgaW50byB0aGUgd2FsbGV0IChyZWNvcmQgaG93IG11Y2gpLg0KICAgIGV2ZW50IERlcG9zaXQoYWRkcmVzcyBfZnJvbSwgdWludCB2YWx1ZSk7DQogICAgLy8gU2luZ2xlIHRyYW5zYWN0aW9uIGdvaW5nIG91dCBvZiB0aGUgd2FsbGV0IChyZWNvcmQgd2hvIHNpZ25lZCBmb3IgaXQsIGhvdyBtdWNoLCBhbmQgdG8gd2hvbSBpdCdzIGdvaW5nKS4NCiAgICBldmVudCBTaW5nbGVUcmFuc2FjdChhZGRyZXNzIG93bmVyLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhKTsNCiAgICAvLyBNdWx0aS1zaWcgdHJhbnNhY3Rpb24gZ29pbmcgb3V0IG9mIHRoZSB3YWxsZXQgKHJlY29yZCB3aG8gc2lnbmVkIGZvciBpdCBsYXN0LCB0aGUgb3BlcmF0aW9uIGhhc2gsIGhvdyBtdWNoLCBhbmQgdG8gd2hvbSBpdCdzIGdvaW5nKS4NCiAgICBldmVudCBNdWx0aVRyYW5zYWN0KGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhKTsNCiAgICAvLyBDb25maXJtYXRpb24gc3RpbGwgbmVlZGVkIGZvciBhIHRyYW5zYWN0aW9uLg0KICAgIGV2ZW50IENvbmZpcm1hdGlvbk5lZWRlZChieXRlczMyIG9wZXJhdGlvbiwgYWRkcmVzcyBpbml0aWF0b3IsIHVpbnQgdmFsdWUsIGFkZHJlc3MgdG8sIGJ5dGVzIGRhdGEpOw0KDQogICAgLy8gRlVOQ1RJT05TDQoNCiAgICAvLyBUT0RPOiBkb2N1bWVudA0KICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvKSBleHRlcm5hbDsNCiAgICBmdW5jdGlvbiBleGVjdXRlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGV4dGVybmFsIHJldHVybnMgKGJ5dGVzMzIpOw0KICAgIGZ1bmN0aW9uIGNvbmZpcm0oYnl0ZXMzMiBfaCkgcmV0dXJucyAoYm9vbCk7DQp9DQoNCi8vIHVzYWdlOg0KLy8gYnl0ZXMzMiBoID0gV2FsbGV0KHcpLmZyb20ob25lT3duZXIpLnRyYW5zYWN0KHRvLCB2YWx1ZSwgZGF0YSk7DQovLyBXYWxsZXQodykuZnJvbShhbm90aGVyT3duZXIpLmNvbmZpcm0oaCk7DQpjb250cmFjdCBXYWxsZXQgaXMgbXVsdGlzaWcsIG11bHRpb3duZWQsIGRheWxpbWl0IHsNCg0KCS8vIFRZUEVTDQoNCiAgICAvLyBUcmFuc2FjdGlvbiBzdHJ1Y3R1cmUgdG8gcmVtZW1iZXIgZGV0YWlscyBvZiB0cmFuc2FjdGlvbiBsZXN0IGl0IG5lZWQgYmUgc2F2ZWQgZm9yIGEgbGF0ZXIgY2FsbC4NCiAgICBzdHJ1Y3QgVHJhbnNhY3Rpb24gew0KICAgICAgICBhZGRyZXNzIHRvOw0KICAgICAgICB1aW50IHZhbHVlOw0KICAgICAgICBieXRlcyBkYXRhOw0KICAgIH0NCg0KICAgIC8vIE1FVEhPRFMNCg0KICAgIC8vIGNvbnN0cnVjdG9yIC0ganVzdCBwYXNzIG9uIHRoZSBvd25lciBhcnJheSB0byB0aGUgbXVsdGlvd25lZCBhbmQNCiAgICAvLyB0aGUgbGltaXQgdG8gZGF5bGltaXQNCiAgICBmdW5jdGlvbiBXYWxsZXQoYWRkcmVzc1tdIF9vd25lcnMsIHVpbnQgX3JlcXVpcmVkLCB1aW50IF9kYXlsaW1pdCkNCiAgICAgICAgICAgIG11bHRpb3duZWQoX293bmVycywgX3JlcXVpcmVkKSBkYXlsaW1pdChfZGF5bGltaXQpIHsNCiAgICB9DQoNCiAgICAvLyBraWxscyB0aGUgY29udHJhY3Qgc2VuZGluZyBldmVyeXRoaW5nIHRvIGBfdG9gLg0KICAgIGZ1bmN0aW9uIGtpbGwoYWRkcmVzcyBfdG8pIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7DQogICAgICAgIHN1aWNpZGUoX3RvKTsNCiAgICB9DQoNCiAgICAvLyBnZXRzIGNhbGxlZCB3aGVuIG5vIG90aGVyIGZ1bmN0aW9uIG1hdGNoZXMNCiAgICBmdW5jdGlvbigpIHBheWFibGUgew0KICAgICAgICAvLyBqdXN0IGJlaW5nIHNlbnQgc29tZSBjYXNoPw0KICAgICAgICBpZiAobXNnLnZhbHVlID4gMCkNCiAgICAgICAgICAgIERlcG9zaXQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsNCiAgICB9DQoNCiAgICAvLyBPdXRzaWRlLXZpc2libGUgdHJhbnNhY3QgZW50cnkgcG9pbnQuIEV4ZWN1dGVzIHRyYW5zYWN0aW9uIGltbWVkaWF0ZWx5IGlmIGJlbG93IGRhaWx5IHNwZW5kIGxpbWl0Lg0KICAgIC8vIElmIG5vdCwgZ29lcyBpbnRvIG11bHRpc2lnIHByb2Nlc3MuIFdlIHByb3ZpZGUgYSBoYXNoIG9uIHJldHVybiB0byBhbGxvdyB0aGUgc2VuZGVyIHRvIHByb3ZpZGUNCiAgICAvLyBzaG9ydGN1dHMgZm9yIHRoZSBvdGhlciBjb25maXJtYXRpb25zIChhbGxvd2luZyB0aGVtIHRvIGF2b2lkIHJlcGxpY2F0aW5nIHRoZSBfdG8sIF92YWx1ZQ0KICAgIC8vIGFuZCBfZGF0YSBhcmd1bWVudHMpLiBUaGV5IHN0aWxsIGdldCB0aGUgb3B0aW9uIG9mIHVzaW5nIHRoZW0gaWYgdGhleSB3YW50LCBhbnl3YXlzLg0KICAgIGZ1bmN0aW9uIGV4ZWN1dGUoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgZXh0ZXJuYWwgb25seW93bmVyIHJldHVybnMgKGJ5dGVzMzIgX3IpIHsNCiAgICAgICAgLy8gZmlyc3QsIHRha2UgdGhlIG9wcG9ydHVuaXR5IHRvIGNoZWNrIHRoYXQgd2UncmUgdW5kZXIgdGhlIGRhaWx5IGxpbWl0Lg0KICAgICAgICBpZiAodW5kZXJMaW1pdChfdmFsdWUpKSB7DQogICAgICAgICAgICBTaW5nbGVUcmFuc2FjdChtc2cuc2VuZGVyLCBfdmFsdWUsIF90bywgX2RhdGEpOw0KICAgICAgICAgICAgLy8geWVzIC0ganVzdCBleGVjdXRlIHRoZSBjYWxsLg0KICAgICAgICAgICAgX3RvLmNhbGwudmFsdWUoX3ZhbHVlKShfZGF0YSk7DQogICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgfQ0KICAgICAgICAvLyBkZXRlcm1pbmUgb3VyIG9wZXJhdGlvbiBoYXNoLg0KICAgICAgICBfciA9IHNoYTMobXNnLmRhdGEsIGJsb2NrLm51bWJlcik7DQogICAgICAgIGlmICghY29uZmlybShfcikgJiYgbV90eHNbX3JdLnRvID09IDApIHsNCiAgICAgICAgICAgIG1fdHhzW19yXS50byA9IF90bzsNCiAgICAgICAgICAgIG1fdHhzW19yXS52YWx1ZSA9IF92YWx1ZTsNCiAgICAgICAgICAgIG1fdHhzW19yXS5kYXRhID0gX2RhdGE7DQogICAgICAgICAgICBDb25maXJtYXRpb25OZWVkZWQoX3IsIG1zZy5zZW5kZXIsIF92YWx1ZSwgX3RvLCBfZGF0YSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBjb25maXJtIGEgdHJhbnNhY3Rpb24gdGhyb3VnaCBqdXN0IHRoZSBoYXNoLiB3ZSB1c2UgdGhlIHByZXZpb3VzIHRyYW5zYWN0aW9ucyBtYXAsIG1fdHhzLCBpbiBvcmRlcg0KICAgIC8vIHRvIGRldGVybWluZSB0aGUgYm9keSBvZiB0aGUgdHJhbnNhY3Rpb24gZnJvbSB0aGUgaGFzaCBwcm92aWRlZC4NCiAgICBmdW5jdGlvbiBjb25maXJtKGJ5dGVzMzIgX2gpIG9ubHltYW55b3duZXJzKF9oKSByZXR1cm5zIChib29sKSB7DQogICAgICAgIGlmIChtX3R4c1tfaF0udG8gIT0gMCkgew0KICAgICAgICAgICAgbV90eHNbX2hdLnRvLmNhbGwudmFsdWUobV90eHNbX2hdLnZhbHVlKShtX3R4c1tfaF0uZGF0YSk7DQogICAgICAgICAgICBNdWx0aVRyYW5zYWN0KG1zZy5zZW5kZXIsIF9oLCBtX3R4c1tfaF0udmFsdWUsIG1fdHhzW19oXS50bywgbV90eHNbX2hdLmRhdGEpOw0KICAgICAgICAgICAgZGVsZXRlIG1fdHhzW19oXTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gSU5URVJOQUwgTUVUSE9EUw0KDQogICAgZnVuY3Rpb24gY2xlYXJQZW5kaW5nKCkgaW50ZXJuYWwgew0KICAgICAgICB1aW50IGxlbmd0aCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aDsNCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpDQogICAgICAgICAgICBkZWxldGUgbV90eHNbbV9wZW5kaW5nSW5kZXhbaV1dOw0KICAgICAgICBzdXBlci5jbGVhclBlbmRpbmcoKTsNCiAgICB9DQoNCgkvLyBGSUVMRFMNCg0KICAgIC8vIHBlbmRpbmcgdHJhbnNhY3Rpb25zIHdlIGhhdmUgYXQgcHJlc2VudC4NCiAgICBtYXBwaW5nIChieXRlczMyID0+IFRyYW5zYWN0aW9uKSBtX3R4czsNCn0='