base 64 content
base64ziberToken11
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMTsNCg0KLyoNCg0KICBaaWJlci5pbyBDb250cmFjdA0KICA9PT09PT09PT09PT09PT09PT09PT09PT0NCiAgQnV5cyBaQlIgdG9rZW5zIGZyb20gdGhlIERBTyBjcm93ZHNhbGUgb24geW91ciBiZWhhbGYuDQogIEF1dGhvcjogL3UvTGVvDQoNCiovDQoNCg0KLy8gSW50ZXJmYWNlIHRvIFpCUiBJQ08gQ29udHJhY3QNCmNvbnRyYWN0IERhb1Rva2VuIHsNCiAgdWludDI1NiBwdWJsaWMgQ0FQOw0KICB1aW50MjU2IHB1YmxpYyB0b3RhbEV0aGVyczsNCiAgZnVuY3Rpb24gcHJveHlQYXltZW50KGFkZHJlc3MgcGFydGljaXBhbnQpIHBheWFibGU7DQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQp9DQoNCmNvbnRyYWN0IFppYmVyVG9rZW4gew0KICAvLyBTdG9yZSB0aGUgYW1vdW50IG9mIEVUSCBkZXBvc2l0ZWQgYnkgZWFjaCBhY2NvdW50Lg0KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsNCiAgLy8gU3RvcmUgd2hldGhlciBvciBub3QgZWFjaCBhY2NvdW50IHdvdWxkIGhhdmUgbWFkZSBpdCBpbnRvIHRoZSBjcm93ZHNhbGUuDQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGNoZWNrZWRfaW47DQogIC8vIEJvdW50eSBmb3IgZXhlY3V0aW5nIGJ1eS4NCiAgdWludDI1NiBwdWJsaWMgYm91bnR5Ow0KICAvLyBUcmFjayB3aGV0aGVyIHRoZSBjb250cmFjdCBoYXMgYm91Z2h0IHRoZSB0b2tlbnMgeWV0Lg0KICBib29sIHB1YmxpYyBib3VnaHRfdG9rZW5zOw0KICAvLyBSZWNvcmQgdGhlIHRpbWUgdGhlIGNvbnRyYWN0IGJvdWdodCB0aGUgdG9rZW5zLg0KICB1aW50MjU2IHB1YmxpYyB0aW1lX2JvdWdodDsNCiAgLy8gRW1lcmdlbmN5IGtpbGwgc3dpdGNoIGluIGNhc2UgYSBjcml0aWNhbCBidWcgaXMgZm91bmQuDQogIGJvb2wgcHVibGljIGtpbGxfc3dpdGNoOw0KICANCiAgLyogUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8NCiAgc3RyaW5nIHB1YmxpYyBuYW1lOw0KICBzdHJpbmcgcHVibGljIHN5bWJvbDsNCiAgdWludDggcHVibGljIGRlY2ltYWxzOw0KICANCiAgLy8gUmF0aW8gb2YgWkJSIHRva2VucyByZWNlaXZlZCB0byBFVEggY29udHJpYnV0ZWQNCiAgLy8gMS4wMDAuMDAwIEJHUCA9IDgwLjAwMC4wMDAgWkJSDQogIC8vIDFFVEggPSAyMTggQkdQICgwMy4wNy4yMDE3OiBodHRwczovL3d3dy5jb2luZ2Vja28uY29tL2VuL3ByaWNlX2NoYXJ0cy9ldGhlcmV1bS9nYnApDQogIC8vIDEgRVRIID0gMTc0NDAgWkJSDQogIHVpbnQyNTYgWkJSX3Blcl9ldGggPSAxNzQ0MDsNCiAgLy9Ub3RhbCBaQlIgVG9rZW5zIFJlc2VydmUNCiAgdWludDI1NiBaQlJfdG90YWxfcmVzZXJ2ZSA9IDEwMDAwMDAwMDsNCiAgLy8gWkJSIFRva2VucyBmb3IgRGV2ZWxvcGVycw0KICB1aW50MjU2IFpCUl9kZXZfcmVzZXJ2ZWQgPSAxMDAwMDAwMDsNCiAgLy8gWkJSIFRva2VucyBmb3IgU2VsbGluZyBvdmVyIElDTw0KICB1aW50MjU2IFpCUl9mb3Jfc2VsbGluZyA9IDgwMDAwMDAwOw0KICAvLyBaQlIgVG9rZW5zIGZvciBCb3VudHkNCiAgdWludDI1NiBaQlJfZm9yX2JvdW50eT0gMTAwMDAwMDA7DQogIC8vIEVUSCBmb3IgYWN0aXZhdGUga2lsbC1zd2l0Y2ggaW4gY29udHJhY3QNCiAgdWludDI1NiBFVEhfdG9fZW5kID0gNTAwMDAgZXRoZXI7DQogIHVpbnQgcmVnaXN0cmVkVG87DQogIHVpbnQyNTYgbG9hZGVkUmVmdW5kOw0KICB1aW50MjU2IF9zdXBwbHk7DQogIHN0cmluZyBfbmFtZTsNCiAgc3RyaW5nIF9zeW1ib2w7DQogIHVpbnQ4IF9kZWNpbWFsczsNCg0KICAvLyBUaGUgWkJSIFRva2VuIGFkZHJlc3MgYW5kIHNhbGUgYWRkcmVzcyBhcmUgdGhlIHNhbWUuDQogIERhb1Rva2VuIHB1YmxpYyB0b2tlbiA9IERhb1Rva2VuKDB4YTlkNTg1Q0UzQjIyN2Q2OTk4NWMzRjdBODY2ZkU3ZDBlNTEwZGE1MCk7DQogIC8vIFRoZSBkZXZlbG9wZXIgYWRkcmVzcy4NCiAgYWRkcmVzcyBkZXZlbG9wZXJfYWRkcmVzcyA9IDB4NjUwODg3QjMzQkZBNDIzMjQwRUQ3QmM0QkQyNmM2NjA3NUUzYkVhZjsNCg0KDQogIC8qIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcyAqLw0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsNCiAgICANCiAgICAvKiBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMgKi8NCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsNCiAgICANCiAgICAvKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgKi8NCiAgICBmdW5jdGlvbiBaaWJlclRva2VuKCkgew0KICAgICAgICAvKiBpZiBzdXBwbHkgbm90IGdpdmVuIHRoZW4gZ2VuZXJhdGUgMTAwIG1pbGxpb24gb2YgdGhlIHNtYWxsZXN0IHVuaXQgb2YgdGhlIHRva2VuICovDQogICAgICAgIF9zdXBwbHkgPSAxMDAwMDAwMDAwMDsNCiAgICAgICAgDQogICAgICAgIC8qIFVubGVzcyB5b3UgYWRkIG90aGVyIGZ1bmN0aW9ucyB0aGVzZSB2YXJpYWJsZXMgd2lsbCBuZXZlciBjaGFuZ2UgKi8NCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gX3N1cHBseTsNCiAgICAgICAgbmFtZSA9ICJaSUJFUiBDVyBUb2tlbnMiOyAgICAgDQogICAgICAgIHN5bWJvbCA9ICJaQlIiOw0KICAgICAgICANCiAgICAgICAgLyogSWYgeW91IHdhbnQgYSBkaXZpc2libGUgdG9rZW4gdGhlbiBhZGQgdGhlIGFtb3VudCBvZiBkZWNpbWFscyB0aGUgYmFzZSB1bml0IGhhcyAgKi8NCiAgICAgICAgZGVjaW1hbHMgPSAyOw0KICAgIH0NCg0KDQogICAgLy8vIFNhZmVNYXRoIGNvbnRyYWN0IC0gbWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcw0KICAgIC8vLyBAYXV0aG9yIGRldkBzbWFydGNvbnRyYWN0ZWFtLmNvbQ0KICAgIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgIHVpbnQgYyA9IGEgKiBiOw0KICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsNCiAgICAgIHJldHVybiBjOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICAgIGFzc2VydChiID4gMCk7DQogICAgICB1aW50IGMgPSBhIC8gYjsNCiAgICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOw0KICAgICAgcmV0dXJuIGM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgYXNzZXJ0KGIgPD0gYSk7DQogICAgICByZXR1cm4gYSAtIGI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgdWludCBjID0gYSArIGI7DQogICAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsNCiAgICAgIHJldHVybiBjOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7DQogICAgICBpZiAoIWFzc2VydGlvbikgew0KICAgICAgICB0aHJvdzsNCiAgICAgIH0NCiAgICB9DQoNCg0KICAgIC8qKg0KICAgICogQWxsb3cgbG9hZCByZWZ1bmRzIGJhY2sgb24gdGhlIGNvbnRyYWN0IGZvciB0aGUgcmVmdW5kaW5nLg0KICAgICoNCiAgICAqIFRoZSB0ZWFtIGNhbiB0cmFuc2ZlciB0aGUgZnVuZHMgYmFjayBvbiB0aGUgc21hcnQgY29udHJhY3QgaW4gdGhlIGNhc2UgdGhlIG1pbmltdW0gZ29hbCB3YXMgbm90IHJlYWNoZWQuLg0KICAgICovDQogICAgZnVuY3Rpb24gbG9hZFJlZnVuZCgpIHBheWFibGUgew0KICAgICAgaWYobXNnLnZhbHVlID09IDApIHRocm93Ow0KICAgICAgbG9hZGVkUmVmdW5kID0gc2FmZUFkZChsb2FkZWRSZWZ1bmQsIG1zZy52YWx1ZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBJbnZlc3RvcnMgY2FuIGNsYWltIHJlZnVuZC4NCiAgICAqLw0KICAgIGZ1bmN0aW9uIHJlZnVuZCgpIHByaXZhdGUgIHsNCiAgICAgIHVpbnQyNTYgd2VpVmFsdWUgPSB0aGlzLmJhbGFuY2U7DQogICAgICBpZiAod2VpVmFsdWUgPT0gMCkgdGhyb3c7DQogICAgICB1aW50MjU2IHdlaVJlZnVuZGVkOw0KICAgICAgd2VpUmVmdW5kZWQgPSBzYWZlQWRkKHdlaVJlZnVuZGVkLCB3ZWlWYWx1ZSk7DQogICAgICByZWZ1bmQoKTsNCiAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKHdlaVZhbHVlKSkgdGhyb3c7DQogICAgfQ0KDQogICAgLyogU2VuZCBjb2lucyAqLw0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgew0KICAgICAgICAvKiBpZiB0aGUgc2VuZGVyIGRvZW5zdCBoYXZlIGVub3VnaCBiYWxhbmNlIHRoZW4gc3RvcCAqLw0KICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB0aHJvdzsNCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHRocm93Ow0KICAgICAgICANCiAgICAgICAgLyogQWRkIGFuZCBzdWJ0cmFjdCBuZXcgYmFsYW5jZXMgKi8NCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsNCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOw0KICAgICAgICANCiAgICAgICAgLyogTm90aWZpeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyB0cmFuc2ZlciB0b29rIHBsYWNlICovDQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgICB9DQogIA0KICAvLyBBbGxvd3MgdGhlIGRldmVsb3BlciB0byBzaHV0IGRvd24gZXZlcnl0aGluZyBleGNlcHQgd2l0aGRyYXdhbHMgaW4gZW1lcmdlbmNpZXMuDQogIGZ1bmN0aW9uIGFjdGl2YXRlX2tpbGxfc3dpdGNoKCkgew0KICAgIC8vIE9ubHkgYWxsb3cgdGhlIGRldmVsb3BlciB0byBhY3RpdmF0ZSB0aGUga2lsbCBzd2l0Y2guDQogICAgaWYgKG1zZy5zZW5kZXIgIT0gZGV2ZWxvcGVyX2FkZHJlc3MpIHRocm93Ow0KICAgIC8vIElycmV2ZXJzaWJseSBhY3RpdmF0ZSB0aGUga2lsbCBzd2l0Y2guDQogICAga2lsbF9zd2l0Y2ggPSB0cnVlOw0KICB9DQogIA0KICAvLyBXaXRoZHJhd3MgYWxsIEVUSCBkZXBvc2l0ZWQgb3IgWkJSIHB1cmNoYXNlZCBieSB0aGUgc2VuZGVyLg0KICBmdW5jdGlvbiB3aXRoZHJhdygpew0KICAgIC8vIElmIGNhbGxlZCBiZWZvcmUgdGhlIElDTywgY2FuY2VsIGNhbGxlcidzIHBhcnRpY2lwYXRpb24gaW4gdGhlIHNhbGUuDQogICAgaWYgKCFib3VnaHRfdG9rZW5zKSB7DQogICAgICAvLyBTdG9yZSB0aGUgdXNlcidzIGJhbGFuY2UgcHJpb3IgdG8gd2l0aGRyYXdhbCBpbiBhIHRlbXBvcmFyeSB2YXJpYWJsZS4NCiAgICAgIHVpbnQyNTYgZXRoX2Ftb3VudCA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOw0KICAgICAgLy8gVXBkYXRlIHRoZSB1c2VyJ3MgYmFsYW5jZSBwcmlvciB0byBzZW5kaW5nIEVUSCB0byBwcmV2ZW50IHJlY3Vyc2l2ZSBjYWxsLg0KICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOw0KICAgICAgLy8gUmV0dXJuIHRoZSB1c2VyJ3MgZnVuZHMuICBUaHJvd3Mgb24gZmFpbHVyZSB0byBwcmV2ZW50IGxvc3Mgb2YgZnVuZHMuDQogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aF9hbW91bnQpOw0KICAgIH0NCiAgICAvLyBXaXRoZHJhdyB0aGUgc2VuZGVyJ3MgdG9rZW5zIGlmIHRoZSBjb250cmFjdCBoYXMgYWxyZWFkeSBwdXJjaGFzZWQgdGhlbS4NCiAgICBlbHNlIHsNCiAgICAgIC8vIFN0b3JlIHRoZSB1c2VyJ3MgWkJSIGJhbGFuY2UgaW4gYSB0ZW1wb3JhcnkgdmFyaWFibGUgKDEgRVRIV2VpIC0+IDIwMDAgWkJSV2VpKS4NCiAgICAgIHVpbnQyNTYgWkJSX2Ftb3VudCA9IGJhbGFuY2VzW21zZy5zZW5kZXJdICogWkJSX3Blcl9ldGg7DQogICAgICAvLyBVcGRhdGUgdGhlIHVzZXIncyBiYWxhbmNlIHByaW9yIHRvIHNlbmRpbmcgWkJSIHRvIHByZXZlbnQgcmVjdXJzaXZlIGNhbGwuDQogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7DQogICAgICAvLyBObyBmZWUgZm9yIHdpdGhkcmF3aW5nIGlmIHRoZSB1c2VyIHdvdWxkIGhhdmUgbWFkZSBpdCBpbnRvIHRoZSBjcm93ZHNhbGUgYWxvbmUuDQogICAgICB1aW50MjU2IGZlZSA9IDA7DQogICAgICAvLyAxJSBmZWUgaWYgdGhlIHVzZXIgZGlkbid0IGNoZWNrIGluIGR1cmluZyB0aGUgY3Jvd2RzYWxlLg0KICAgICAgaWYgKCFjaGVja2VkX2luW21zZy5zZW5kZXJdKSB7DQogICAgICAgIGZlZSA9IFpCUl9hbW91bnQgLyAxMDA7DQogICAgICAgIC8vIFNlbmQgYW55IG5vbi16ZXJvIGZlZXMgdG8gZGV2ZWxvcGVyLg0KICAgICAgICBpZighdG9rZW4udHJhbnNmZXIoZGV2ZWxvcGVyX2FkZHJlc3MsIGZlZSkpIHRocm93Ow0KICAgICAgfQ0KICAgICAgLy8gU2VuZCB0aGUgdXNlciB0aGVpciB0b2tlbnMuICBUaHJvd3MgaWYgdGhlIGNyb3dkc2FsZSBpc24ndCBvdmVyLg0KICAgICAgaWYoIXRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIFpCUl9hbW91bnQgLSBmZWUpKSB0aHJvdzsNCiAgICB9DQogIH0NCiAgDQogIC8vIEFsbG93IGRldmVsb3BlciB0byBhZGQgRVRIIHRvIHRoZSBidXkgZXhlY3V0aW9uIGJvdW50eS4NCiAgZnVuY3Rpb24gYWRkX3RvX2JvdW50eSgpIHBheWFibGUgew0KICAgIC8vIE9ubHkgYWxsb3cgdGhlIGRldmVsb3BlciB0byBjb250cmlidXRlIHRvIHRoZSBidXkgZXhlY3V0aW9uIGJvdW50eS4NCiAgICBpZiAobXNnLnNlbmRlciAhPSBkZXZlbG9wZXJfYWRkcmVzcykgdGhyb3c7DQogICAgLy8gRGlzYWxsb3cgYWRkaW5nIHRvIGJvdW50eSBpZiBraWxsIHN3aXRjaCBpcyBhY3RpdmUuDQogICAgaWYgKGtpbGxfc3dpdGNoKSB0aHJvdzsNCiAgICAvLyBEaXNhbGxvdyBhZGRpbmcgdG8gdGhlIGJvdW50eSBpZiBjb250cmFjdCBoYXMgYWxyZWFkeSBib3VnaHQgdGhlIHRva2Vucy4NCiAgICBpZiAoYm91Z2h0X3Rva2VucykgdGhyb3c7DQogICAgLy8gVXBkYXRlIGJvdW50eSB0byBpbmNsdWRlIHJlY2VpdmVkIGFtb3VudC4NCiAgICBib3VudHkgKz0gbXNnLnZhbHVlOw0KICB9DQogIA0KICAvLyBCdXlzIHRva2VucyBpbiB0aGUgY3Jvd2RzYWxlIGFuZCByZXdhcmRzIHRoZSBjYWxsZXIsIGNhbGxhYmxlIGJ5IGFueW9uZS4NCiAgZnVuY3Rpb24gY2xhaW1fYm91bnR5KCl7DQogICAgLy8gU2hvcnQgY2lyY3VpdCB0byBzYXZlIGdhcyBpZiB0aGUgY29udHJhY3QgaGFzIGFscmVhZHkgYm91Z2h0IHRva2Vucy4NCiAgICBpZiAoYm91Z2h0X3Rva2VucykgcmV0dXJuOw0KICAgIC8vIERpc2FsbG93IGJ1eWluZyBpbnRvIHRoZSBjcm93ZHNhbGUgaWYga2lsbCBzd2l0Y2ggaXMgYWN0aXZlLg0KICAgIGlmIChraWxsX3N3aXRjaCkgdGhyb3c7DQogICAgLy8gUmVjb3JkIHRoYXQgdGhlIGNvbnRyYWN0IGhhcyBib3VnaHQgdGhlIHRva2Vucy4NCiAgICBib3VnaHRfdG9rZW5zID0gdHJ1ZTsNCiAgICAvLyBSZWNvcmQgdGhlIHRpbWUgdGhlIGNvbnRyYWN0IGJvdWdodCB0aGUgdG9rZW5zLg0KICAgIHRpbWVfYm91Z2h0ID0gbm93ICsgMSBkYXlzOw0KICAgIC8vIFRyYW5zZmVyIGFsbCB0aGUgZnVuZHMgKGxlc3MgdGhlIGJvdW50eSkgdG8gdGhlIFpCUiBjcm93ZHNhbGUgY29udHJhY3QNCiAgICAvLyB0byBidXkgdG9rZW5zLiAgVGhyb3dzIGlmIHRoZSBjcm93ZHNhbGUgaGFzbid0IHN0YXJ0ZWQgeWV0IG9yIGhhcw0KICAgIC8vIGFscmVhZHkgY29tcGxldGVkLCBwcmV2ZW50aW5nIGxvc3Mgb2YgZnVuZHMuDQogICAgdG9rZW4ucHJveHlQYXltZW50LnZhbHVlKHRoaXMuYmFsYW5jZSAtIGJvdW50eSkoYWRkcmVzcyh0aGlzKSk7DQogICAgLy8gU2VuZCB0aGUgY2FsbGVyIHRoZWlyIGJvdW50eSBmb3IgYnV5aW5nIHRva2VucyBmb3IgdGhlIGNvbnRyYWN0Lg0KICAgIGlmKHRoaXMuYmFsYW5jZSA+IEVUSF90b19lbmQpDQogICAgew0KICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGJvdW50eSk7DQogICAgfQ0KICAgIGVsc2Ugew0KICAgICAgICB0aW1lX2JvdWdodCA9IG5vdyArICAxIGRheXMgKiA5Ow0KICAgICAgICBpZih0aGlzLmJhbGFuY2UgPiBFVEhfdG9fZW5kKSB7DQogICAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcihib3VudHkpOw0KICAgICAgICB9DQogICAgICB9DQogIH0NCg0KICAgIC8vQ2hlY2sgaXMgbXNnX3NlbmRlciBpcyBjb250cmFjdCBkZXYNCiAgbW9kaWZpZXIgb25seU93bmVyKCkgew0KICAgIGlmIChtc2cuc2VuZGVyICE9IGRldmVsb3Blcl9hZGRyZXNzKSB7DQogICAgICB0aHJvdzsNCiAgICB9DQogICAgXzsNCiAgfQ0KICANCiAgLy8gU2VuZCBmdW5kIHdoZW4gaWNvIGVuZA0KICBmdW5jdGlvbiB3aXRoZHJhd0V0aCgpIG9ubHlPd25lciB7ICAgICAgICANCiAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOw0KICB9DQogIA0KICAvL0tpbGwgY29udHJhY3QNCiAgZnVuY3Rpb24ga2lsbCgpIG9ubHlPd25lciB7ICAgICAgICANCiAgICAgICAgc2VsZmRlc3RydWN0KGRldmVsb3Blcl9hZGRyZXNzKTsNCiAgfQ0KICANCiAgLy8gQSBoZWxwZXIgZnVuY3Rpb24gZm9yIHRoZSBkZWZhdWx0IGZ1bmN0aW9uLCBhbGxvd2luZyBjb250cmFjdHMgdG8gaW50ZXJhY3QuDQogIGZ1bmN0aW9uIGRlZmF1bHRfaGVscGVyKCkgcGF5YWJsZSB7DQogICAgLy8gVHJlYXQgbmVhci16ZXJvIEVUSCB0cmFuc2FjdGlvbnMgYXMgY2hlY2sgaW5zIGFuZCB3aXRoZHJhd2FsIHJlcXVlc3RzLg0KICAgIGlmIChtc2cudmFsdWUgPD0gMSBmaW5uZXkpIHsNCiAgICAgIC8vIENoZWNrIGluIGR1cmluZyB0aGUgY3Jvd2RzYWxlLg0KICAgICAgaWYgKGJvdWdodF90b2tlbnMpIHsNCiAgICAgICAgLy8gT25seSBhbGxvdyBjaGVja2luZyBpbiBiZWZvcmUgdGhlIGNyb3dkc2FsZSBoYXMgcmVhY2hlZCB0aGUgY2FwLg0KICAgICAgICBpZiAodG9rZW4udG90YWxFdGhlcnMoKSA+PSB0b2tlbi5DQVAoKSkgdGhyb3c7DQogICAgICAgIC8vIE1hcmsgdXNlciBhcyBjaGVja2VkIGluLCBtZWFuaW5nIHRoZXkgd291bGQgaGF2ZSBiZWVuIGFibGUgdG8gZW50ZXIgYWxvbmUuDQogICAgICAgIGNoZWNrZWRfaW5bbXNnLnNlbmRlcl0gPSB0cnVlOw0KICAgICAgfQ0KICAgICAgLy8gV2l0aGRyYXcgZnVuZHMgaWYgdGhlIGNyb3dkc2FsZSBoYXNuJ3QgYmVndW4geWV0IG9yIGlzIGFscmVhZHkgb3Zlci4NCiAgICAgIGVsc2Ugew0KICAgICAgICB3aXRoZHJhdygpOw0KICAgICAgfQ0KICAgIH0NCiAgICAvLyBEZXBvc2l0IHRoZSB1c2VyJ3MgZnVuZHMgZm9yIHVzZSBpbiBwdXJjaGFzaW5nIHRva2Vucy4NCiAgICBlbHNlIHsNCiAgICAgIC8vIERpc2FsbG93IGRlcG9zaXRzIGlmIGtpbGwgc3dpdGNoIGlzIGFjdGl2ZS4NCiAgICAgIGlmIChraWxsX3N3aXRjaCkgdGhyb3c7DQogICAgICAvLyBPbmx5IGFsbG93IGRlcG9zaXRzIGlmIHRoZSBjb250cmFjdCBoYXNuJ3QgYWxyZWFkeSBwdXJjaGFzZWQgdGhlIHRva2Vucy4NCiAgICAgIGlmIChib3VnaHRfdG9rZW5zKSB0aHJvdzsNCiAgICAgIC8vIFVwZGF0ZSByZWNvcmRzIG9mIGRlcG9zaXRlZCBFVEggdG8gaW5jbHVkZSB0aGUgcmVjZWl2ZWQgYW1vdW50Lg0KICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gbXNnLnZhbHVlOw0KICAgIH0NCiAgfQ0KICANCiAgLy8gRGVmYXVsdCBmdW5jdGlvbi4gIENhbGxlZCB3aGVuIGEgdXNlciBzZW5kcyBFVEggdG8gdGhlIGNvbnRyYWN0Lg0KICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICAvLyBEZWxlZ2F0ZSB0byB0aGUgaGVscGVyIGZ1bmN0aW9uLg0KICAgIGRlZmF1bHRfaGVscGVyKCk7DQogIH0NCiAgDQp9'