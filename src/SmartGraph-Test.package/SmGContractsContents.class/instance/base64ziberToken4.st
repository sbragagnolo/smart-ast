base 64 content
base64ziberToken4
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMzsNCg0KLyoNCg0KICBaaWJlci5pbyBDb250cmFjdA0KICA9PT09PT09PT09PT09PT09PT09PT09PT0NCiAgQnV5cyBaQlIgdG9rZW5zIGZyb20gdGhlIERBTyBjcm93ZHNhbGUgb24geW91ciBiZWhhbGYuDQogIEF1dGhvcjogL3UvTGVvDQoNCiovDQoNCg0KLy8gSW50ZXJmYWNlIHRvIFpCUiBJQ08gQ29udHJhY3QNCmNvbnRyYWN0IERhb1Rva2VuIHsNCiAgdWludDI1NiBwdWJsaWMgQ0FQOw0KICB1aW50MjU2IHB1YmxpYyB0b3RhbEV0aGVyczsNCiAgZnVuY3Rpb24gcHJveHlQYXltZW50KGFkZHJlc3MgcGFydGljaXBhbnQpIHBheWFibGU7DQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQp9DQoNCmNvbnRyYWN0IFppYmVyVG9rZW4gew0KICAvLyBTdG9yZSB0aGUgYW1vdW50IG9mIEVUSCBkZXBvc2l0ZWQgYnkgZWFjaCBhY2NvdW50Lg0KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsNCiAgLy8gU3RvcmUgd2hldGhlciBvciBub3QgZWFjaCBhY2NvdW50IHdvdWxkIGhhdmUgbWFkZSBpdCBpbnRvIHRoZSBjcm93ZHNhbGUuDQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGNoZWNrZWRfaW47DQogIC8vIGljbyBmb3IgZXhlY3V0aW5nIGJ1eS4NCiAgdWludDI1NiBwdWJsaWMgaWNvOw0KICAvLyBUcmFjayB3aGV0aGVyIHRoZSBjb250cmFjdCBoYXMgYm91Z2h0IHRoZSB0b2tlbnMgeWV0Lg0KICBib29sIHB1YmxpYyBib3VnaHRfdG9rZW5zOw0KICAvLyBSZWNvcmQgdGhlIHRpbWUgdGhlIGNvbnRyYWN0IGJvdWdodCB0aGUgdG9rZW5zLg0KICB1aW50MjU2IHB1YmxpYyB0aW1lX2JvdWdodDsNCiAgdWludDI1NiBwdWJsaWMgZXh0cmFfdGltZV9ib3VnaHQ7DQogIC8vIEVtZXJnZW5jeSBraWxsIHN3aXRjaCBpbiBjYXNlIGEgY3JpdGljYWwgYnVnIGlzIGZvdW5kLg0KICBib29sIHB1YmxpYyBraWxsX3N3aXRjaDsNCiAgDQogIC8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovDQogIHN0cmluZyBwdWJsaWMgbmFtZTsNCiAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7DQogIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsNCiAgDQogIC8vIFJhdGlvIG9mIFpCUiB0b2tlbnMgcmVjZWl2ZWQgdG8gRVRIIGNvbnRyaWJ1dGVkDQogIC8vIDEuMDAwLjAwMCBCR1AgPSA4MC4wMDAuMDAwIFpCUg0KICAvLyAxRVRIID0gMjE4IEJHUCAoMDMuMDcuMjAxNzogaHR0cHM6Ly93d3cuY29pbmdlY2tvLmNvbS9lbi9wcmljZV9jaGFydHMvZXRoZXJldW0vZ2JwKQ0KICAvLyAxIEVUSCA9IDE3NDQwIFpCUg0KICB1aW50MjU2IFpCUl9wZXJfZXRoID0gMTc0NDA7DQogIC8vVG90YWwgWkJSIFRva2VucyBSZXNlcnZlDQogIHVpbnQyNTYgWkJSX3RvdGFsX3Jlc2VydmUgPSAxMDAwMDAwMDA7DQogIC8vIFpCUiBUb2tlbnMgZm9yIERldmVsb3BlcnMNCiAgdWludDI1NiBaQlJfZGV2X3Jlc2VydmVkID0gMTAwMDAwMDA7DQogIC8vIFpCUiBUb2tlbnMgZm9yIFNlbGxpbmcgb3ZlciBJQ08NCiAgdWludDI1NiBaQlJfZm9yX3NlbGxpbmcgPSA4MDAwMDAwMDsNCiAgLy8gWkJSIFRva2VucyBmb3IgaWNvDQogIHVpbnQyNTYgWkJSX2Zvcl9pY289IDEwMDAwMDAwOw0KICAvLyBFVEggZm9yIGFjdGl2YXRlIGtpbGwtc3dpdGNoIGluIGNvbnRyYWN0DQogIHVpbnQyNTYgbWluX2V0aF90b19lbmQgPSA1MDAwMCBldGhlcjsNCiAgdWludDI1NiBtYXhfZXRoX3RvX2VuZCA9IDEwMDAwMCBldGhlcjsNCiAgdWludCByZWdpc3RyZWRUbzsNCiAgdWludDI1NiBsb2FkZWRSZWZ1bmQ7DQogIHVpbnQyNTYgX3N1cHBseTsNCiAgc3RyaW5nIF9uYW1lOw0KICBzdHJpbmcgX3N5bWJvbDsNCiAgdWludDggX2RlY2ltYWxzOw0KDQogIC8vIFRoZSBaQlIgVG9rZW4gYWRkcmVzcyBhbmQgc2FsZSBhZGRyZXNzIGFyZSB0aGUgc2FtZS4NCiAgRGFvVG9rZW4gcHVibGljIHRva2VuID0gRGFvVG9rZW4oMHhhOWQ1ODVDRTNCMjI3ZDY5OTg1YzNGN0E4NjZmRTdkMGU1MTBkYTUwKTsNCiAgLy8gVGhlIGRldmVsb3BlciBhZGRyZXNzLg0KICBhZGRyZXNzIGRldmVsb3Blcl9hZGRyZXNzID0gMHgwMDRCNzRFYTczN0FGRDI1Y2UwODM1NzNmQjQ1YTQ5ZGE3NjJhQ0Q0OyANCg0KICAvKiBUaGlzIGNyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgYmFsYW5jZXMgKi8NCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOw0KICAgIA0KICAvKiBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMgKi8NCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7DQogICAgDQogIC8qIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdCAqLw0KICBmdW5jdGlvbiBaaWJlclRva2VuKCkgew0KICAgICAgLyogaWYgc3VwcGx5IG5vdCBnaXZlbiB0aGVuIGdlbmVyYXRlIDEwMCBtaWxsaW9uIG9mIHRoZSBzbWFsbGVzdCB1bml0IG9mIHRoZSB0b2tlbiAqLw0KICAgICAgX3N1cHBseSA9IDEwMDAwMDAwMDAwOw0KICAgICAgDQogICAgICAvKiBVbmxlc3MgeW91IGFkZCBvdGhlciBmdW5jdGlvbnMgdGhlc2UgdmFyaWFibGVzIHdpbGwgbmV2ZXIgY2hhbmdlICovDQogICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBfc3VwcGx5Ow0KICAgICAgbmFtZSA9ICJaSUJFUiBMVEQgQ3Jvd2RzYWxlIFRva2VucyI7ICAgICANCiAgICAgIHN5bWJvbCA9ICJaQlIiOw0KICAgICAgDQogICAgICAvKiBJZiB5b3Ugd2FudCBhIGRpdmlzaWJsZSB0b2tlbiB0aGVuIGFkZCB0aGUgYW1vdW50IG9mIGRlY2ltYWxzIHRoZSBiYXNlIHVuaXQgaGFzICAqLw0KICAgICAgZGVjaW1hbHMgPSAyOw0KICB9DQoNCg0KICAvLy8gU2FmZU1hdGggY29udHJhY3QgLSBtYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzDQogIC8vLyBAYXV0aG9yIGRldkBzbWFydGNvbnRyYWN0ZWFtLmNvbQ0KICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgdWludCBjID0gYSAqIGI7DQogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICBhc3NlcnQoYiA+IDApOw0KICAgIHVpbnQgYyA9IGEgLyBiOw0KICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOw0KICAgIHJldHVybiBjOw0KICB9DQoNCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgIGFzc2VydChiIDw9IGEpOw0KICAgIHJldHVybiBhIC0gYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsNCiAgICB1aW50IGMgPSBhICsgYjsNCiAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsNCiAgICByZXR1cm4gYzsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7DQogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikgew0KICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOw0KICB9DQoNCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7DQogICAgaWYgKCFhc3NlcnRpb24pIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCiAgfQ0KDQoNCiAgLyoqDQogICogQWxsb3cgbG9hZCByZWZ1bmRzIGJhY2sgb24gdGhlIGNvbnRyYWN0IGZvciB0aGUgcmVmdW5kaW5nLg0KICAqDQogICogVGhlIHRlYW0gY2FuIHRyYW5zZmVyIHRoZSBmdW5kcyBiYWNrIG9uIHRoZSBzbWFydCBjb250cmFjdCBpbiB0aGUgY2FzZSB0aGUgbWluaW11bSBnb2FsIHdhcyBub3QgcmVhY2hlZC4uDQogICovDQogIGZ1bmN0aW9uIGxvYWRSZWZ1bmQoKSBwYXlhYmxlIHsNCiAgICBpZihtc2cudmFsdWUgPT0gMCkgdGhyb3c7DQogICAgbG9hZGVkUmVmdW5kID0gc2FmZUFkZChsb2FkZWRSZWZ1bmQsIG1zZy52YWx1ZSk7DQogIH0NCg0KICAvKioNCiAgKiBJbnZlc3RvcnMgY2FuIGNsYWltIHJlZnVuZC4NCiAgKi8NCiAgZnVuY3Rpb24gcmVmdW5kKCkgcHJpdmF0ZSAgew0KICAgIHVpbnQyNTYgd2VpVmFsdWUgPSB0aGlzLmJhbGFuY2U7DQogICAgaWYgKHdlaVZhbHVlID09IDApIHRocm93Ow0KICAgIHVpbnQyNTYgd2VpUmVmdW5kZWQ7DQogICAgd2VpUmVmdW5kZWQgPSBzYWZlQWRkKHdlaVJlZnVuZGVkLCB3ZWlWYWx1ZSk7DQogICAgcmVmdW5kKCk7DQogICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQod2VpVmFsdWUpKSB0aHJvdzsNCiAgfQ0KDQogIC8qIFNlbmQgY29pbnMgKi8NCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7DQogICAgICAvKiBpZiB0aGUgc2VuZGVyIGRvZW5zdCBoYXZlIGVub3VnaCBiYWxhbmNlIHRoZW4gc3RvcCAqLw0KICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IF92YWx1ZSkgdGhyb3c7DQogICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgdGhyb3c7DQogICAgICANCiAgICAgIC8qIEFkZCBhbmQgc3VidHJhY3QgbmV3IGJhbGFuY2VzICovDQogICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOw0KICAgICAgDQogICAgICAvKiBOb3RpZml5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UgKi8NCiAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsNCiAgfQ0KICANCiAgLy8gQWxsb3dzIHRoZSBkZXZlbG9wZXIgdG8gc2h1dCBkb3duIGV2ZXJ5dGhpbmcgZXhjZXB0IHdpdGhkcmF3YWxzIGluIGVtZXJnZW5jaWVzLg0KICBmdW5jdGlvbiBhY3RpdmF0ZV9raWxsX3N3aXRjaCgpIHsNCiAgICAvLyBPbmx5IGFsbG93IHRoZSBkZXZlbG9wZXIgdG8gYWN0aXZhdGUgdGhlIGtpbGwgc3dpdGNoLg0KICAgIGlmIChtc2cuc2VuZGVyICE9IGRldmVsb3Blcl9hZGRyZXNzKSB0aHJvdzsNCiAgICAvLyBJcnJldmVyc2libHkgYWN0aXZhdGUgdGhlIGtpbGwgc3dpdGNoLg0KICAgIGtpbGxfc3dpdGNoID0gdHJ1ZTsNCiAgfQ0KICANCiAgLy8gV2l0aGRyYXdzIGFsbCBFVEggZGVwb3NpdGVkIG9yIFpCUiBwdXJjaGFzZWQgYnkgdGhlIHNlbmRlci4NCiAgZnVuY3Rpb24gd2l0aGRyYXcoKXsNCiAgICAvLyBJZiBjYWxsZWQgYmVmb3JlIHRoZSBJQ08sIGNhbmNlbCBjYWxsZXIncyBwYXJ0aWNpcGF0aW9uIGluIHRoZSBzYWxlLg0KICAgIGlmICghYm91Z2h0X3Rva2Vucykgew0KICAgICAgLy8gU3RvcmUgdGhlIHVzZXIncyBiYWxhbmNlIHByaW9yIHRvIHdpdGhkcmF3YWwgaW4gYSB0ZW1wb3JhcnkgdmFyaWFibGUuDQogICAgICB1aW50MjU2IGV0aF9hbW91bnQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsNCiAgICAgIC8vIFVwZGF0ZSB0aGUgdXNlcidzIGJhbGFuY2UgcHJpb3IgdG8gc2VuZGluZyBFVEggdG8gcHJldmVudCByZWN1cnNpdmUgY2FsbC4NCiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsNCiAgICAgIC8vIFJldHVybiB0aGUgdXNlcidzIGZ1bmRzLiAgVGhyb3dzIG9uIGZhaWx1cmUgdG8gcHJldmVudCBsb3NzIG9mIGZ1bmRzLg0KICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihldGhfYW1vdW50KTsNCiAgICB9DQogICAgLy8gV2l0aGRyYXcgdGhlIHNlbmRlcidzIHRva2VucyBpZiB0aGUgY29udHJhY3QgaGFzIGFscmVhZHkgcHVyY2hhc2VkIHRoZW0uDQogICAgZWxzZSB7DQogICAgICAvLyBTdG9yZSB0aGUgdXNlcidzIFpCUiBiYWxhbmNlIGluIGEgdGVtcG9yYXJ5IHZhcmlhYmxlICgxIEVUSFdlaSAtPiAyMDAwIFpCUldlaSkuDQogICAgICB1aW50MjU2IFpCUl9hbW91bnQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXSAqIFpCUl9wZXJfZXRoOw0KICAgICAgLy8gVXBkYXRlIHRoZSB1c2VyJ3MgYmFsYW5jZSBwcmlvciB0byBzZW5kaW5nIFpCUiB0byBwcmV2ZW50IHJlY3Vyc2l2ZSBjYWxsLg0KICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOw0KICAgICAgLy8gTm8gZmVlIGZvciB3aXRoZHJhd2luZyBpZiB0aGUgdXNlciB3b3VsZCBoYXZlIG1hZGUgaXQgaW50byB0aGUgY3Jvd2RzYWxlIGFsb25lLg0KICAgICAgdWludDI1NiBmZWUgPSAwOw0KICAgICAgLy8gMSUgZmVlIGlmIHRoZSB1c2VyIGRpZG4ndCBjaGVjayBpbiBkdXJpbmcgdGhlIGNyb3dkc2FsZS4NCiAgICAgIGlmICghY2hlY2tlZF9pblttc2cuc2VuZGVyXSkgew0KICAgICAgICBmZWUgPSBaQlJfYW1vdW50IC8gMTAwOw0KICAgICAgICAvLyBTZW5kIGFueSBub24temVybyBmZWVzIHRvIGRldmVsb3Blci4NCiAgICAgICAgaWYoIXRva2VuLnRyYW5zZmVyKGRldmVsb3Blcl9hZGRyZXNzLCBmZWUpKSB0aHJvdzsNCiAgICAgIH0NCiAgICAgIC8vIFNlbmQgdGhlIHVzZXIgdGhlaXIgdG9rZW5zLiAgVGhyb3dzIGlmIHRoZSBjcm93ZHNhbGUgaXNuJ3Qgb3Zlci4NCiAgICAgIGlmKCF0b2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCBaQlJfYW1vdW50IC0gZmVlKSkgdGhyb3c7DQogICAgfQ0KICB9DQogIA0KICAvLyBBbGxvdyBkZXZlbG9wZXIgdG8gYWRkIEVUSCB0byB0aGUgYnV5IGV4ZWN1dGlvbiBpY28uDQogIGZ1bmN0aW9uIGFkZF90b19pY28oKSBwYXlhYmxlIHsNCiAgICAvLyBPbmx5IGFsbG93IHRoZSBkZXZlbG9wZXIgdG8gY29udHJpYnV0ZSB0byB0aGUgYnV5IGV4ZWN1dGlvbiBpY28uDQogICAgaWYgKG1zZy5zZW5kZXIgIT0gZGV2ZWxvcGVyX2FkZHJlc3MpIHRocm93Ow0KICAgIC8vIERpc2FsbG93IGFkZGluZyB0byBpY28gaWYga2lsbCBzd2l0Y2ggaXMgYWN0aXZlLg0KICAgIGlmIChraWxsX3N3aXRjaCkgdGhyb3c7DQogICAgLy8gRGlzYWxsb3cgYWRkaW5nIHRvIHRoZSBpY28gaWYgY29udHJhY3QgaGFzIGFscmVhZHkgYm91Z2h0IHRoZSB0b2tlbnMuDQogICAgaWYgKGJvdWdodF90b2tlbnMpIHRocm93Ow0KICAgIC8vIFVwZGF0ZSBpY28gdG8gaW5jbHVkZSByZWNlaXZlZCBhbW91bnQuDQogICAgaWNvICs9IG1zZy52YWx1ZTsNCiAgfQ0KICANCiAgLy8gQnV5cyB0b2tlbnMgaW4gdGhlIGNyb3dkc2FsZSBhbmQgcmV3YXJkcyB0aGUgY2FsbGVyLCBjYWxsYWJsZSBieSBhbnlvbmUuDQogIGZ1bmN0aW9uIGNsYWltX2ljbygpew0KICAgIC8vIFNob3J0IGNpcmN1aXQgdG8gc2F2ZSBnYXMgaWYgdGhlIGNvbnRyYWN0IGhhcyBhbHJlYWR5IGJvdWdodCB0b2tlbnMuDQogICAgaWYgKGJvdWdodF90b2tlbnMpIHJldHVybjsNCiAgICAvLyBEaXNhbGxvdyBidXlpbmcgaW50byB0aGUgY3Jvd2RzYWxlIGlmIGtpbGwgc3dpdGNoIGlzIGFjdGl2ZS4NCiAgICBpZiAoa2lsbF9zd2l0Y2gpIHRocm93Ow0KICAgIC8vIFJlY29yZCB0aGF0IHRoZSBjb250cmFjdCBoYXMgYm91Z2h0IHRoZSB0b2tlbnMuDQogICAgYm91Z2h0X3Rva2VucyA9IHRydWU7DQogICAgLy8gUmVjb3JkIHRoZSB0aW1lIHRoZSBjb250cmFjdCBib3VnaHQgdGhlIHRva2Vucy4NCiAgICB0aW1lX2JvdWdodCA9IG5vdyArIDEgZGF5czsNCiAgICAvLyBUcmFuc2ZlciBhbGwgdGhlIGZ1bmRzIChsZXNzIHRoZSBpY28pIHRvIHRoZSBaQlIgY3Jvd2RzYWxlIGNvbnRyYWN0DQogICAgLy8gdG8gYnV5IHRva2Vucy4gIFRocm93cyBpZiB0aGUgY3Jvd2RzYWxlIGhhc24ndCBzdGFydGVkIHlldCBvciBoYXMNCiAgICAvLyBhbHJlYWR5IGNvbXBsZXRlZCwgcHJldmVudGluZyBsb3NzIG9mIGZ1bmRzLg0KICAgIHRva2VuLnByb3h5UGF5bWVudC52YWx1ZSh0aGlzLmJhbGFuY2UgLSBpY28pKGFkZHJlc3ModGhpcykpOw0KICAgIC8vIFNlbmQgdGhlIGNhbGxlciB0aGVpciBpY28gZm9yIGJ1eWluZyB0b2tlbnMgZm9yIHRoZSBjb250cmFjdC4NCiAgICBpZih0aGlzLmJhbGFuY2UgPiBtYXhfZXRoX3RvX2VuZCkNCiAgICB7DQogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoaWNvKTsNCiAgICB9DQogICAgZWxzZSB7DQogICAgICAgIGV4dHJhX3RpbWVfYm91Z2h0ID0gbm93ICsgIDEgZGF5cyAqIDEwOw0KICAgICAgICBpZih0aGlzLmJhbGFuY2UgPCBtaW5fZXRoX3RvX2VuZCkgdGhyb3c7DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIGlmIChub3cgPiBleHRyYV90aW1lX2JvdWdodCkgew0KICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihpY28pOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICB9DQoNCiAgICAvL0NoZWNrIGlzIG1zZ19zZW5kZXIgaXMgY29udHJhY3QgZGV2DQogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsNCiAgICBpZiAobXNnLnNlbmRlciAhPSBkZXZlbG9wZXJfYWRkcmVzcykgew0KICAgICAgdGhyb3c7DQogICAgfQ0KICAgIF87DQogIH0NCiAgDQogIC8vIFNlbmQgZnVuZCB3aGVuIGljbyBlbmQNCiAgZnVuY3Rpb24gd2l0aGRyYXdFdGgoKSBvbmx5T3duZXIgeyAgICAgICAgDQogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsNCiAgfQ0KICANCiAgLy9LaWxsIGNvbnRyYWN0DQogIGZ1bmN0aW9uIGtpbGwoKSBvbmx5T3duZXIgeyAgICAgICAgDQogICAgICAgIHNlbGZkZXN0cnVjdChkZXZlbG9wZXJfYWRkcmVzcyk7DQogIH0NCiAgDQogIC8vIEEgaGVscGVyIGZ1bmN0aW9uIGZvciB0aGUgZGVmYXVsdCBmdW5jdGlvbiwgYWxsb3dpbmcgY29udHJhY3RzIHRvIGludGVyYWN0Lg0KICBmdW5jdGlvbiBkZWZhdWx0X2hlbHBlcigpIHBheWFibGUgew0KICAgIC8vIENoZWNrIGlmIElDTyBTdGFydGVkOiAyNy4wNy4yMDE3IDEyOjAwIEdNVCB0byBnZXQgRVRIIC8vMTUwMTE1NjgwMA0KICAgIGlmIChub3cgPCAxNTAwNjU1MjAwICkgdGhyb3c7IA0KICAgIGVsc2Ugew0KICAgICAgLy8gVHJlYXQgbmVhci16ZXJvIEVUSCB0cmFuc2FjdGlvbnMgYXMgY2hlY2sgaW5zIGFuZCB3aXRoZHJhd2FsIHJlcXVlc3RzLg0KICAgICAgaWYgKG1zZy52YWx1ZSA8PSAxIGZpbm5leSkgew0KICAgICAgICAvLyBDaGVjayBpbiBkdXJpbmcgdGhlIGNyb3dkc2FsZS4NCiAgICAgICAgaWYgKGJvdWdodF90b2tlbnMpIHsNCiAgICAgICAgICAvLyBPbmx5IGFsbG93IGNoZWNraW5nIGluIGJlZm9yZSB0aGUgY3Jvd2RzYWxlIGhhcyByZWFjaGVkIHRoZSBjYXAuDQogICAgICAgICAgaWYgKHRva2VuLnRvdGFsRXRoZXJzKCkgPj0gdG9rZW4uQ0FQKCkpIHRocm93Ow0KICAgICAgICAgIC8vIE1hcmsgdXNlciBhcyBjaGVja2VkIGluLCBtZWFuaW5nIHRoZXkgd291bGQgaGF2ZSBiZWVuIGFibGUgdG8gZW50ZXIgYWxvbmUuDQogICAgICAgICAgY2hlY2tlZF9pblttc2cuc2VuZGVyXSA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgLy8gV2l0aGRyYXcgZnVuZHMgaWYgdGhlIGNyb3dkc2FsZSBoYXNuJ3QgYmVndW4geWV0IG9yIGlzIGFscmVhZHkgb3Zlci4NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgd2l0aGRyYXcoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLy8gRGVwb3NpdCB0aGUgdXNlcidzIGZ1bmRzIGZvciB1c2UgaW4gcHVyY2hhc2luZyB0b2tlbnMuDQogICAgICBlbHNlIHsNCiAgICAgICAgLy8gRGlzYWxsb3cgZGVwb3NpdHMgaWYga2lsbCBzd2l0Y2ggaXMgYWN0aXZlLg0KICAgICAgICBpZiAoa2lsbF9zd2l0Y2gpIHRocm93Ow0KICAgICAgICAvLyBPbmx5IGFsbG93IGRlcG9zaXRzIGlmIHRoZSBjb250cmFjdCBoYXNuJ3QgYWxyZWFkeSBwdXJjaGFzZWQgdGhlIHRva2Vucy4NCiAgICAgICAgaWYgKGJvdWdodF90b2tlbnMpIHRocm93Ow0KICAgICAgICAvLyBVcGRhdGUgcmVjb3JkcyBvZiBkZXBvc2l0ZWQgRVRIIHRvIGluY2x1ZGUgdGhlIHJlY2VpdmVkIGFtb3VudC4NCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gbXNnLnZhbHVlOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICANCiAgLy8gRGVmYXVsdCBmdW5jdGlvbi4gIENhbGxlZCB3aGVuIGEgdXNlciBzZW5kcyBFVEggdG8gdGhlIGNvbnRyYWN0Lg0KICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsNCiAgICAvLyBEZWxlZ2F0ZSB0byB0aGUgaGVscGVyIGZ1bmN0aW9uLg0KICAgIGRlZmF1bHRfaGVscGVyKCk7DQogIH0NCiAgDQp9'