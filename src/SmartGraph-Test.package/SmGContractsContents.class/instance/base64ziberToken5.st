base 64 content
base64ziberToken5
	^'cHJhZ21hIHNvbGlkaXR5XjAuNC4xMzsNCg0KLyoNCg0KICBaaWJlci5pbyBDb250cmFjdA0KICA9PT09PT09PT09PT09PT09PT09PT09PT0NCiAgQnV5cyBaQlIgdG9rZW5zIGZyb20gdGhlIERBTyBjcm93ZHNhbGUgb24geW91ciBiZWhhbGYuDQogIEF1dGhvcjogL3UvTGVvDQoNCiovDQoNCg0KLy8gSW50ZXJmYWNlIHRvIFpCUiBJQ08gQ29udHJhY3QNCmNvbnRyYWN0IERhb1Rva2VuIHsNCiAgdWludDI1NiBwdWJsaWMgQ0FQOw0KICB1aW50MjU2IHB1YmxpYyB0b3RhbEV0aGVyczsNCiAgZnVuY3Rpb24gcHJveHlQYXltZW50KGFkZHJlc3MgcGFydGljaXBhbnQpIHBheWFibGU7DQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7DQp9DQoNCmNvbnRyYWN0IFppYmVyVG9rZW4gew0KICAvLyBTdG9yZSB0aGUgYW1vdW50IG9mIEVUSCBkZXBvc2l0ZWQgYnkgZWFjaCBhY2NvdW50Lg0KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsNCiAgLy8gU3RvcmUgd2hldGhlciBvciBub3QgZWFjaCBhY2NvdW50IHdvdWxkIGhhdmUgbWFkZSBpdCBpbnRvIHRoZSBjcm93ZHNhbGUuDQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGNoZWNrZWRfaW47DQogIC8vIEJvdW50eSBmb3IgZXhlY3V0aW5nIGJ1eS4NCiAgdWludDI1NiBwdWJsaWMgYm91bnR5Ow0KICAvLyBUcmFjayB3aGV0aGVyIHRoZSBjb250cmFjdCBoYXMgYm91Z2h0IHRoZSB0b2tlbnMgeWV0Lg0KICBib29sIHB1YmxpYyBib3VnaHRfdG9rZW5zOw0KICAvLyBSZWNvcmQgdGhlIHRpbWUgdGhlIGNvbnRyYWN0IGJvdWdodCB0aGUgdG9rZW5zLg0KICB1aW50MjU2IHB1YmxpYyB0aW1lX2JvdWdodDsNCiAgLy8gRW1lcmdlbmN5IGtpbGwgc3dpdGNoIGluIGNhc2UgYSBjcml0aWNhbCBidWcgaXMgZm91bmQuDQogIGJvb2wgcHVibGljIGtpbGxfc3dpdGNoOw0KICANCiAgLyogUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8NCiAgc3RyaW5nIHB1YmxpYyBuYW1lOw0KICBzdHJpbmcgcHVibGljIHN5bWJvbDsNCiAgdWludDggcHVibGljIGRlY2ltYWxzOw0KICANCiAgLy8gUmF0aW8gb2YgWkJSIHRva2VucyByZWNlaXZlZCB0byBFVEggY29udHJpYnV0ZWQNCiAgLy8gMS4wMDAuMDAwIEJHUCA9IDgwLjAwMC4wMDAgWkJSDQogIC8vIDFFVEggPSAyMTggQkdQICgwMy4wNy4yMDE3OiBodHRwczovL3d3dy5jb2luZ2Vja28uY29tL2VuL3ByaWNlX2NoYXJ0cy9ldGhlcmV1bS9nYnApDQogIC8vIDEgRVRIID0gMTc0NDAgWkJSDQogIHVpbnQyNTYgWkJSX3Blcl9ldGggPSAxNzQ0MDsNCiAgLy9Ub3RhbCBaQlIgVG9rZW5zIFJlc2VydmUNCiAgdWludDI1NiBaQlJfdG90YWxfcmVzZXJ2ZSA9IDEwMDAwMDAwMDsNCiAgLy8gWkJSIFRva2VucyBmb3IgRGV2ZWxvcGVycw0KICB1aW50MjU2IFpCUl9kZXZfcmVzZXJ2ZWQgPSAxMDAwMDAwMDsNCiAgLy8gWkJSIFRva2VucyBmb3IgU2VsbGluZyBvdmVyIElDTw0KICB1aW50MjU2IFpCUl9mb3Jfc2VsbGluZyA9IDgwMDAwMDAwOw0KICAvLyBaQlIgVG9rZW5zIGZvciBCb3VudHkNCiAgdWludDI1NiBaQlJfZm9yX2JvdW50eT0gMTAwMDAwMDA7DQogIC8vIEVUSCBmb3IgYWN0aXZhdGUga2lsbC1zd2l0Y2ggaW4gY29udHJhY3QNCiAgdWludDI1NiBFVEhfdG9fZW5kID0gNTAwMDAgZXRoZXI7DQogIHVpbnQgcmVnaXN0cmVkVG87DQogIHVpbnQyNTYgbG9hZGVkUmVmdW5kOw0KICB1aW50MjU2IF9zdXBwbHk7DQogIHN0cmluZyBfbmFtZTsNCiAgc3RyaW5nIF9zeW1ib2w7DQogIHVpbnQ4IF9kZWNpbWFsczsNCg0KICAvLyBUaGUgWkJSIFRva2VuIGFkZHJlc3MgYW5kIHNhbGUgYWRkcmVzcyBhcmUgdGhlIHNhbWUuDQogIERhb1Rva2VuIHB1YmxpYyB0b2tlbiA9IERhb1Rva2VuKDB4YTlkNTg1Q0UzQjIyN2Q2OTk4NWMzRjdBODY2ZkU3ZDBlNTEwZGE1MCk7DQogIC8vIFRoZSBkZXZlbG9wZXIgYWRkcmVzcy4NCiAgYWRkcmVzcyBkZXZlbG9wZXJfYWRkcmVzcyA9IDB4MDAxMTlFNGI2ZkMxRDkzMWY2M0ZGQjI2QjNFYUJFMkM0RTc3OTUzMzsgDQogIC8vMHg2NTA4ODdCMzNCRkE0MjMyNDBFRDdCYzRCRDI2YzY2MDc1RTNiRWFmOw0KDQoNCiAgLyogVGhpcyBjcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGJhbGFuY2VzICovDQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOw0KICAgIA0KICAgIC8qIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyAqLw0KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOw0KICAgIA0KICAgIC8qIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdCAqLw0KICAgIGZ1bmN0aW9uIFppYmVyVG9rZW4oKSB7DQogICAgICAgIC8qIGlmIHN1cHBseSBub3QgZ2l2ZW4gdGhlbiBnZW5lcmF0ZSAxMDAgbWlsbGlvbiBvZiB0aGUgc21hbGxlc3QgdW5pdCBvZiB0aGUgdG9rZW4gKi8NCiAgICAgICAgX3N1cHBseSA9IDEwMDAwMDAwMDAwOw0KICAgICAgICANCiAgICAgICAgLyogVW5sZXNzIHlvdSBhZGQgb3RoZXIgZnVuY3Rpb25zIHRoZXNlIHZhcmlhYmxlcyB3aWxsIG5ldmVyIGNoYW5nZSAqLw0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBfc3VwcGx5Ow0KICAgICAgICBuYW1lID0gIlpJQkVSIENXIFRva2VucyI7ICAgICANCiAgICAgICAgc3ltYm9sID0gIlpCUiI7DQogICAgICAgIA0KICAgICAgICAvKiBJZiB5b3Ugd2FudCBhIGRpdmlzaWJsZSB0b2tlbiB0aGVuIGFkZCB0aGUgYW1vdW50IG9mIGRlY2ltYWxzIHRoZSBiYXNlIHVuaXQgaGFzICAqLw0KICAgICAgICBkZWNpbWFscyA9IDI7DQogICAgfQ0KDQoNCiAgICAvLy8gU2FmZU1hdGggY29udHJhY3QgLSBtYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzDQogICAgLy8vIEBhdXRob3IgZGV2QHNtYXJ0Y29udHJhY3RlYW0uY29tDQogICAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgdWludCBjID0gYSAqIGI7DQogICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOw0KICAgICAgcmV0dXJuIGM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc2FmZURpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgew0KICAgICAgYXNzZXJ0KGIgPiAwKTsNCiAgICAgIHVpbnQgYyA9IGEgLyBiOw0KICAgICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7DQogICAgICByZXR1cm4gYzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgICBhc3NlcnQoYiA8PSBhKTsNCiAgICAgIHJldHVybiBhIC0gYjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7DQogICAgICB1aW50IGMgPSBhICsgYjsNCiAgICAgIGFzc2VydChjPj1hICYmIGM+PWIpOw0KICAgICAgcmV0dXJuIGM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsNCiAgICAgIHJldHVybiBhID49IGIgPyBhIDogYjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgew0KICAgICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7DQogICAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsNCiAgICAgIGlmICghYXNzZXJ0aW9uKSB7DQogICAgICAgIHRocm93Ow0KICAgICAgfQ0KICAgIH0NCg0KDQogICAgLyoqDQogICAgKiBBbGxvdyBsb2FkIHJlZnVuZHMgYmFjayBvbiB0aGUgY29udHJhY3QgZm9yIHRoZSByZWZ1bmRpbmcuDQogICAgKg0KICAgICogVGhlIHRlYW0gY2FuIHRyYW5zZmVyIHRoZSBmdW5kcyBiYWNrIG9uIHRoZSBzbWFydCBjb250cmFjdCBpbiB0aGUgY2FzZSB0aGUgbWluaW11bSBnb2FsIHdhcyBub3QgcmVhY2hlZC4uDQogICAgKi8NCiAgICBmdW5jdGlvbiBsb2FkUmVmdW5kKCkgcGF5YWJsZSB7DQogICAgICBpZihtc2cudmFsdWUgPT0gMCkgdGhyb3c7DQogICAgICBsb2FkZWRSZWZ1bmQgPSBzYWZlQWRkKGxvYWRlZFJlZnVuZCwgbXNnLnZhbHVlKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEludmVzdG9ycyBjYW4gY2xhaW0gcmVmdW5kLg0KICAgICovDQogICAgZnVuY3Rpb24gcmVmdW5kKCkgcHJpdmF0ZSAgew0KICAgICAgdWludDI1NiB3ZWlWYWx1ZSA9IHRoaXMuYmFsYW5jZTsNCiAgICAgIGlmICh3ZWlWYWx1ZSA9PSAwKSB0aHJvdzsNCiAgICAgIHVpbnQyNTYgd2VpUmVmdW5kZWQ7DQogICAgICB3ZWlSZWZ1bmRlZCA9IHNhZmVBZGQod2VpUmVmdW5kZWQsIHdlaVZhbHVlKTsNCiAgICAgIHJlZnVuZCgpOw0KICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQod2VpVmFsdWUpKSB0aHJvdzsNCiAgICB9DQoNCiAgICAvKiBTZW5kIGNvaW5zICovDQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7DQogICAgICAgIC8qIGlmIHRoZSBzZW5kZXIgZG9lbnN0IGhhdmUgZW5vdWdoIGJhbGFuY2UgdGhlbiBzdG9wICovDQogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHRocm93Ow0KICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgdGhyb3c7DQogICAgICAgIA0KICAgICAgICAvKiBBZGQgYW5kIHN1YnRyYWN0IG5ldyBiYWxhbmNlcyAqLw0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOw0KICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7DQogICAgICAgIA0KICAgICAgICAvKiBOb3RpZml5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UgKi8NCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOw0KICAgIH0NCiAgDQogIC8vIEFsbG93cyB0aGUgZGV2ZWxvcGVyIHRvIHNodXQgZG93biBldmVyeXRoaW5nIGV4Y2VwdCB3aXRoZHJhd2FscyBpbiBlbWVyZ2VuY2llcy4NCiAgZnVuY3Rpb24gYWN0aXZhdGVfa2lsbF9zd2l0Y2goKSB7DQogICAgLy8gT25seSBhbGxvdyB0aGUgZGV2ZWxvcGVyIHRvIGFjdGl2YXRlIHRoZSBraWxsIHN3aXRjaC4NCiAgICBpZiAobXNnLnNlbmRlciAhPSBkZXZlbG9wZXJfYWRkcmVzcykgdGhyb3c7DQogICAgLy8gSXJyZXZlcnNpYmx5IGFjdGl2YXRlIHRoZSBraWxsIHN3aXRjaC4NCiAgICBraWxsX3N3aXRjaCA9IHRydWU7DQogIH0NCiAgDQogIC8vIFdpdGhkcmF3cyBhbGwgRVRIIGRlcG9zaXRlZCBvciBaQlIgcHVyY2hhc2VkIGJ5IHRoZSBzZW5kZXIuDQogIGZ1bmN0aW9uIHdpdGhkcmF3KCl7DQogICAgLy8gSWYgY2FsbGVkIGJlZm9yZSB0aGUgSUNPLCBjYW5jZWwgY2FsbGVyJ3MgcGFydGljaXBhdGlvbiBpbiB0aGUgc2FsZS4NCiAgICBpZiAoIWJvdWdodF90b2tlbnMpIHsNCiAgICAgIC8vIFN0b3JlIHRoZSB1c2VyJ3MgYmFsYW5jZSBwcmlvciB0byB3aXRoZHJhd2FsIGluIGEgdGVtcG9yYXJ5IHZhcmlhYmxlLg0KICAgICAgdWludDI1NiBldGhfYW1vdW50ID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07DQogICAgICAvLyBVcGRhdGUgdGhlIHVzZXIncyBiYWxhbmNlIHByaW9yIHRvIHNlbmRpbmcgRVRIIHRvIHByZXZlbnQgcmVjdXJzaXZlIGNhbGwuDQogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7DQogICAgICAvLyBSZXR1cm4gdGhlIHVzZXIncyBmdW5kcy4gIFRocm93cyBvbiBmYWlsdXJlIHRvIHByZXZlbnQgbG9zcyBvZiBmdW5kcy4NCiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXRoX2Ftb3VudCk7DQogICAgfQ0KICAgIC8vIFdpdGhkcmF3IHRoZSBzZW5kZXIncyB0b2tlbnMgaWYgdGhlIGNvbnRyYWN0IGhhcyBhbHJlYWR5IHB1cmNoYXNlZCB0aGVtLg0KICAgIGVsc2Ugew0KICAgICAgLy8gU3RvcmUgdGhlIHVzZXIncyBaQlIgYmFsYW5jZSBpbiBhIHRlbXBvcmFyeSB2YXJpYWJsZSAoMSBFVEhXZWkgLT4gMjAwMCBaQlJXZWkpLg0KICAgICAgdWludDI1NiBaQlJfYW1vdW50ID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0gKiBaQlJfcGVyX2V0aDsNCiAgICAgIC8vIFVwZGF0ZSB0aGUgdXNlcidzIGJhbGFuY2UgcHJpb3IgdG8gc2VuZGluZyBaQlIgdG8gcHJldmVudCByZWN1cnNpdmUgY2FsbC4NCiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsNCiAgICAgIC8vIE5vIGZlZSBmb3Igd2l0aGRyYXdpbmcgaWYgdGhlIHVzZXIgd291bGQgaGF2ZSBtYWRlIGl0IGludG8gdGhlIGNyb3dkc2FsZSBhbG9uZS4NCiAgICAgIHVpbnQyNTYgZmVlID0gMDsNCiAgICAgIC8vIDElIGZlZSBpZiB0aGUgdXNlciBkaWRuJ3QgY2hlY2sgaW4gZHVyaW5nIHRoZSBjcm93ZHNhbGUuDQogICAgICBpZiAoIWNoZWNrZWRfaW5bbXNnLnNlbmRlcl0pIHsNCiAgICAgICAgZmVlID0gWkJSX2Ftb3VudCAvIDEwMDsNCiAgICAgICAgLy8gU2VuZCBhbnkgbm9uLXplcm8gZmVlcyB0byBkZXZlbG9wZXIuDQogICAgICAgIGlmKCF0b2tlbi50cmFuc2ZlcihkZXZlbG9wZXJfYWRkcmVzcywgZmVlKSkgdGhyb3c7DQogICAgICB9DQogICAgICAvLyBTZW5kIHRoZSB1c2VyIHRoZWlyIHRva2Vucy4gIFRocm93cyBpZiB0aGUgY3Jvd2RzYWxlIGlzbid0IG92ZXIuDQogICAgICBpZighdG9rZW4udHJhbnNmZXIobXNnLnNlbmRlciwgWkJSX2Ftb3VudCAtIGZlZSkpIHRocm93Ow0KICAgIH0NCiAgfQ0KICANCiAgLy8gQWxsb3cgZGV2ZWxvcGVyIHRvIGFkZCBFVEggdG8gdGhlIGJ1eSBleGVjdXRpb24gYm91bnR5Lg0KICBmdW5jdGlvbiBhZGRfdG9fYm91bnR5KCkgcGF5YWJsZSB7DQogICAgLy8gT25seSBhbGxvdyB0aGUgZGV2ZWxvcGVyIHRvIGNvbnRyaWJ1dGUgdG8gdGhlIGJ1eSBleGVjdXRpb24gYm91bnR5Lg0KICAgIGlmIChtc2cuc2VuZGVyICE9IGRldmVsb3Blcl9hZGRyZXNzKSB0aHJvdzsNCiAgICAvLyBEaXNhbGxvdyBhZGRpbmcgdG8gYm91bnR5IGlmIGtpbGwgc3dpdGNoIGlzIGFjdGl2ZS4NCiAgICBpZiAoa2lsbF9zd2l0Y2gpIHRocm93Ow0KICAgIC8vIERpc2FsbG93IGFkZGluZyB0byB0aGUgYm91bnR5IGlmIGNvbnRyYWN0IGhhcyBhbHJlYWR5IGJvdWdodCB0aGUgdG9rZW5zLg0KICAgIGlmIChib3VnaHRfdG9rZW5zKSB0aHJvdzsNCiAgICAvLyBVcGRhdGUgYm91bnR5IHRvIGluY2x1ZGUgcmVjZWl2ZWQgYW1vdW50Lg0KICAgIGJvdW50eSArPSBtc2cudmFsdWU7DQogIH0NCiAgDQogIC8vIEJ1eXMgdG9rZW5zIGluIHRoZSBjcm93ZHNhbGUgYW5kIHJld2FyZHMgdGhlIGNhbGxlciwgY2FsbGFibGUgYnkgYW55b25lLg0KICBmdW5jdGlvbiBjbGFpbV9ib3VudHkoKXsNCiAgICAvLyBTaG9ydCBjaXJjdWl0IHRvIHNhdmUgZ2FzIGlmIHRoZSBjb250cmFjdCBoYXMgYWxyZWFkeSBib3VnaHQgdG9rZW5zLg0KICAgIGlmIChib3VnaHRfdG9rZW5zKSByZXR1cm47DQogICAgLy8gRGlzYWxsb3cgYnV5aW5nIGludG8gdGhlIGNyb3dkc2FsZSBpZiBraWxsIHN3aXRjaCBpcyBhY3RpdmUuDQogICAgaWYgKGtpbGxfc3dpdGNoKSB0aHJvdzsNCiAgICAvLyBSZWNvcmQgdGhhdCB0aGUgY29udHJhY3QgaGFzIGJvdWdodCB0aGUgdG9rZW5zLg0KICAgIGJvdWdodF90b2tlbnMgPSB0cnVlOw0KICAgIC8vIFJlY29yZCB0aGUgdGltZSB0aGUgY29udHJhY3QgYm91Z2h0IHRoZSB0b2tlbnMuDQogICAgdGltZV9ib3VnaHQgPSBub3cgKyAxIGRheXM7DQogICAgLy8gVHJhbnNmZXIgYWxsIHRoZSBmdW5kcyAobGVzcyB0aGUgYm91bnR5KSB0byB0aGUgWkJSIGNyb3dkc2FsZSBjb250cmFjdA0KICAgIC8vIHRvIGJ1eSB0b2tlbnMuICBUaHJvd3MgaWYgdGhlIGNyb3dkc2FsZSBoYXNuJ3Qgc3RhcnRlZCB5ZXQgb3IgaGFzDQogICAgLy8gYWxyZWFkeSBjb21wbGV0ZWQsIHByZXZlbnRpbmcgbG9zcyBvZiBmdW5kcy4NCiAgICB0b2tlbi5wcm94eVBheW1lbnQudmFsdWUodGhpcy5iYWxhbmNlIC0gYm91bnR5KShhZGRyZXNzKHRoaXMpKTsNCiAgICAvLyBTZW5kIHRoZSBjYWxsZXIgdGhlaXIgYm91bnR5IGZvciBidXlpbmcgdG9rZW5zIGZvciB0aGUgY29udHJhY3QuDQogICAgaWYodGhpcy5iYWxhbmNlID4gRVRIX3RvX2VuZCkNCiAgICB7DQogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYm91bnR5KTsNCiAgICB9DQogICAgZWxzZSB7DQogICAgICAgIHRpbWVfYm91Z2h0ID0gbm93ICsgIDEgZGF5cyAqIDk7DQogICAgICAgIGlmKHRoaXMuYmFsYW5jZSA+IEVUSF90b19lbmQpIHsNCiAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGJvdW50eSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgfQ0KDQogICAgLy9DaGVjayBpcyBtc2dfc2VuZGVyIGlzIGNvbnRyYWN0IGRldg0KICBtb2RpZmllciBvbmx5T3duZXIoKSB7DQogICAgaWYgKG1zZy5zZW5kZXIgIT0gZGV2ZWxvcGVyX2FkZHJlc3MpIHsNCiAgICAgIHRocm93Ow0KICAgIH0NCiAgICBfOw0KICB9DQogIA0KICAvLyBTZW5kIGZ1bmQgd2hlbiBpY28gZW5kDQogIGZ1bmN0aW9uIHdpdGhkcmF3RXRoKCkgb25seU93bmVyIHsgICAgICAgIA0KICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7DQogIH0NCiAgDQogIC8vS2lsbCBjb250cmFjdA0KICBmdW5jdGlvbiBraWxsKCkgb25seU93bmVyIHsgICAgICAgIA0KICAgICAgICBzZWxmZGVzdHJ1Y3QoZGV2ZWxvcGVyX2FkZHJlc3MpOw0KICB9DQogIA0KICAvLyBBIGhlbHBlciBmdW5jdGlvbiBmb3IgdGhlIGRlZmF1bHQgZnVuY3Rpb24sIGFsbG93aW5nIGNvbnRyYWN0cyB0byBpbnRlcmFjdC4NCiAgZnVuY3Rpb24gZGVmYXVsdF9oZWxwZXIoKSBwYXlhYmxlIHsNCiAgICAvLyBDaGVjayBpZiBJQ08gU3RhcnRlZDogMjcuMDcuMjAxNyAxMjowMCBHTVQgdG8gZ2V0IEVUSCAvLzE1MDExNTY4MDANCiAgICBpZiAobm93IDwgMTUwMDQ4NDUwNiApIHRocm93OyANCiAgICBlbHNlIHsNCiAgICAgIC8vIFRyZWF0IG5lYXItemVybyBFVEggdHJhbnNhY3Rpb25zIGFzIGNoZWNrIGlucyBhbmQgd2l0aGRyYXdhbCByZXF1ZXN0cy4NCiAgICAgIGlmIChtc2cudmFsdWUgPD0gMSBmaW5uZXkpIHsNCiAgICAgICAgLy8gQ2hlY2sgaW4gZHVyaW5nIHRoZSBjcm93ZHNhbGUuDQogICAgICAgIGlmIChib3VnaHRfdG9rZW5zKSB7DQogICAgICAgICAgLy8gT25seSBhbGxvdyBjaGVja2luZyBpbiBiZWZvcmUgdGhlIGNyb3dkc2FsZSBoYXMgcmVhY2hlZCB0aGUgY2FwLg0KICAgICAgICAgIGlmICh0b2tlbi50b3RhbEV0aGVycygpID49IHRva2VuLkNBUCgpKSB0aHJvdzsNCiAgICAgICAgICAvLyBNYXJrIHVzZXIgYXMgY2hlY2tlZCBpbiwgbWVhbmluZyB0aGV5IHdvdWxkIGhhdmUgYmVlbiBhYmxlIHRvIGVudGVyIGFsb25lLg0KICAgICAgICAgIGNoZWNrZWRfaW5bbXNnLnNlbmRlcl0gPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIC8vIFdpdGhkcmF3IGZ1bmRzIGlmIHRoZSBjcm93ZHNhbGUgaGFzbid0IGJlZ3VuIHlldCBvciBpcyBhbHJlYWR5IG92ZXIuDQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIHdpdGhkcmF3KCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC8vIERlcG9zaXQgdGhlIHVzZXIncyBmdW5kcyBmb3IgdXNlIGluIHB1cmNoYXNpbmcgdG9rZW5zLg0KICAgICAgZWxzZSB7DQogICAgICAgIC8vIERpc2FsbG93IGRlcG9zaXRzIGlmIGtpbGwgc3dpdGNoIGlzIGFjdGl2ZS4NCiAgICAgICAgaWYgKGtpbGxfc3dpdGNoKSB0aHJvdzsNCiAgICAgICAgLy8gT25seSBhbGxvdyBkZXBvc2l0cyBpZiB0aGUgY29udHJhY3QgaGFzbid0IGFscmVhZHkgcHVyY2hhc2VkIHRoZSB0b2tlbnMuDQogICAgICAgIGlmIChib3VnaHRfdG9rZW5zKSB0aHJvdzsNCiAgICAgICAgLy8gVXBkYXRlIHJlY29yZHMgb2YgZGVwb3NpdGVkIEVUSCB0byBpbmNsdWRlIHRoZSByZWNlaXZlZCBhbW91bnQuDQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZTsNCiAgICAgIH0NCiAgICB9DQogIH0NCiAgDQogIC8vIERlZmF1bHQgZnVuY3Rpb24uICBDYWxsZWQgd2hlbiBhIHVzZXIgc2VuZHMgRVRIIHRvIHRoZSBjb250cmFjdC4NCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7DQogICAgLy8gRGVsZWdhdGUgdG8gdGhlIGhlbHBlciBmdW5jdGlvbi4NCiAgICBkZWZhdWx0X2hlbHBlcigpOw0KICB9DQogIA0KfQ=='